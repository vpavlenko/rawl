{"version":3,"sources":["../webpack/bootstrap","components/rawl/forge/constants.ts","utils/corpusUtils.tsx","components/rawl/book/Book.tsx","sampler/sampler.ts","components/rawl/legends/PianoLegend.tsx","components/rawl/editor/types.ts","components/Slider.js","components/AppFooter.tsx","components/rawl/SnippetList.tsx","components/rawl/editor/EditorStyles.ts","components/AppHeader.tsx","components/rawl/decomposition/decomposeScores.tsx","keySlugMapping.ts","components/ErrorBoundary.tsx","components/rawl/CompositionTitle.tsx","components/rawl/SnippetItem.tsx","components/rawl/getNoteRectangles.tsx","components/rawl/Toggle.tsx","components/rawl/editor/FoldButtonWithIcon.tsx","components/rawl/corpora/explanations.ts","components/rawl/snippets/SnippetLink.tsx","components/rawl/SongNarrative.tsx","components/rawl/InlineRawlPlayer.tsx","components/rawl/editor/Editor.tsx","components/rawl/editor/commandParser.ts","components/rawl/editor/hooks/useBackup.ts","components/rawl/editor/ManualStyles.tsx","components/rawl/editor/sourceConverter.ts","components/rawl/parseMidi.ts","components/AppContext.tsx","../config/polyfills.js","index.js","chip-core.js","config/firebaseConfig.js","handlers/handleSongClick.ts","players/midi/midi-helpers.js","promisify-xhr.js","components/Alert.js","components/TimeSlider.js","components/SignIn.js","components/DropMessage.tsx","components/Timeline.tsx","components/rawl/book/AboutTop100Corpus.tsx","components/rawl/FrozenNotesLayout.tsx","config/index.js","components/rawl/FrozenNotes.tsx","components/rawl/SystemLayout.tsx","components/rawl/layouts/ControlPanel.tsx","components/rawl/legends/guitarChords.ts","components/rawl/layouts/MeasureNumbers.tsx","components/rawl/layouts/MergedVoicesLegend.tsx","components/rawl/book/Citations.tsx","components/rawl/book/cites.ts","components/rawl/book/FileDropBox.tsx","components/rawl/book/Metaphors.tsx","components/rawl/layouts/VoiceName.tsx","components/rawl/autoAnalysis.ts","components/rawl/layouts/LayoutSelector.tsx","components/rawl/measures.ts","components/rawl/analysis.ts","components/rawl/notesToInsertConverter.ts","components/rawl/book/beyondChapters.tsx","components/rawl/CorpusSearch.tsx","components/rawl/Histograms.tsx","components/rawl/OldLandingPage.tsx","components/rawl/ShortcutHelp.tsx","components/rawl/blog/Blog.tsx","components/rawl/blog/blogPosts.tsx","components/rawl/book/BookOnStyles.tsx","components/rawl/book/stylesChapters.tsx","components/rawl/corpora/Corpus.tsx","components/rawl/corpora/Structures.tsx","components/rawl/decomposition/Decomposition.tsx","components/rawl/editor/EditorDecorations.ts","components/rawl/editor/EditorMidi.ts","components/rawl/editor/EditorSavingMenu.tsx","components/rawl/editor/Manual.tsx","images/editor_major_layout.png","images/editor_minor_layout.png","components/rawl/editor/scores.ts","components/rawl/editor/Converter.tsx","components/rawl/editor/EditorLandingPage.tsx","components/rawl/forge/ForgeUI.tsx","components/rawl/forge/ForgeGenerator.ts","components/rawl/forge/noteUtils.ts","components/rawl/forge/ForgeMidi.ts","components/rawl/midiStorage.tsx","components/rawl/pages/DAW.tsx","assets/images/reaper_colormap.png","components/rawl/transformMidi.ts","gm-patch-map.js","players/MIDIFilePlayer.js","players/Player.js","players/MIDIPlayer.js","components/rawl/corpora/corpora.tsx","components/rawl/Rawl.tsx","components/rawl/legends/ChordStairs.tsx","components/App.tsx","components/rawl/AnalysisGrid.tsx","components/rawl/corpora/utils.ts","components/rawl/book/chapters.tsx","util.js","components/rawl/corpora/CorpusLink.tsx","components/rawl/top100Composers.ts","components/rawl/legends/chords.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","C3","TICKS_PER_QUARTER","MEASURE_LENGTH","DEFAULT_VELOCITY","DEFAULT_NOTE_DURATION_PADDING","CHORD_OCTAVE_ADJUSTMENTS","vi","bVI","Flags","span","GenreList","div","GenreItem","getUniqueStyles","genre","style","styles","Set","split","map","trim","forEach","add","Array","from","getEmojis","country","flag","hasMetadata","corpus","Boolean","composerBirthYear","formatComposerName","slug","word","part","charAt","toUpperCase","join","BookContainer","Title","h1","GroupContainer","ComposersGrid","ComposerItem","ComposerLink","a","ComposerWrapper","SnippetContainer","ComposerList","ul","ComposerListItem","li","ChapterSelector","attrs","className","ChapterTitleTooltip","props","isHovered","isSelected","ChapterButton","button","NavChordWrapper","ReadableTextBlock","ComposerListColumn","TwoColumnLayout","ComposerTitle","composer","displayTitle","color","getChapterSlug","chapter","slugify","toLowerCase","CompositionLink","onLinkClick","showNarrativeIcon","href","target","rel","onClick","isVocal","NARRATIVES","marginLeft","qa","ChapterGroup","isActive","hideHeader","ChapterArrow","ModeToggle","useParams","history","useHistory","location","useLocation","appContext","React","useContext","AppContext","hoveredChapter","setHoveredChapter","useState","hoveredComposerSlug","setHoveredComposerSlug","hoveredColors","setHoveredColors","isBeyondMode","setIsBeyondMode","pathname","startsWith","useEffect","shouldBeBeyondMode","currentMidi","Error","analyses","eject","loadingSnippets","setLoadingSnippets","handleComposerLinkClick","e","handleSnippetClick","async","snippet","composerSlug","prev","handleSongClick","secondsSpan","seekPosition","Math","max","seek","next","delete","currentChapters","BEYOND_CHAPTERS","CHAPTERS","currentChapterGroups","BEYOND_CHAPTER_GROUPS","CHAPTER_GROUPS","chapterTitles","useMemo","title","selectedChapter","find","hoveredComposerChapter","chapters","composers","includes","findChapterForComposer","firstBeyondChapter","Redirect","to","position","Toggle","leftIcon","faHouse","rightIcon","faGlobe","isRight","onToggle","leftTitle","rightTitle","entries","startIndex","endIndex","groupChapters","some","newSlug","handleChapterSelect","onMouseEnter","onMouseLeave","MODULATIONS_CHAPTER_TITLE","width","height","overflow","top","NewTonicSymbol","left","number","previousTonic","modulationDiff","tonicStart","DOUBLE_TONIC_CHAPTER_TITLE","chords","scale","playbackMode","margin","fontSize","FontAwesomeIcon","icon","faClockRotateLeft","titleChords","currentChapter","currentSnippet","snippets","tag","initialTonic","frozenNotes","analysis","modulations","marginTop","FoldablePianoLegend","currentTonic","pretext","display","flexDirection","gap","TOP_100_COMPOSERS","minHeight","filter","pop","onSnippetClick","isPreview","noteHeight","marginBottom","tags","index","marginRight","RelatedCorporaDisplay","horizontal","showMetadata","CorpusLink","MUSESCORE_TOP_100_SLUG","cursor","preventDefault","stopPropagation","undefined","renderContent","ARPEGGIO_DELAY_MS","samplerLoaded","loadingPromise","sampler","Tone","Sampler","urls","A0","C1","A1","C2","A2","A3","C4","A4","C5","A5","C6","A6","C7","A7","C8","baseUrl","onload","toDestination","set","volume","getContext","addAudioWorklet","context","rawContext","audioWorklet","addModule","workletNode","AudioWorkletNode","connect","destination","error","console","originalTriggerAttack","triggerAttack","args","this","originalTriggerRelease","triggerRelease","getAudioContextState","state","startAudioContext","start","ensureSamplerLoaded","Promise","resolve","loaded","checkLoaded","setTimeout","resumeAudioContext","activeEvents","activeNotes","playArpeggiatedChord","chordNumbers","cancelPreviousSounds","releaseAll","id","Transport","clear","cancel","noteNames","note","midi","Frequency","toNote","currentTransportTime","seconds","eventId","schedule","time","triggerAttackRelease","playRawMidiNote","midiNumber","duration","noteName","cleanupArpeggiator","playArpeggiatedChordSequence","chordSequence","onChordStart","onChordEnd","currentTime","chord","chordIndex","noteIndex","playHighlightedNotes","highlightedNotes","bpm","cancelPrevious","validNotes","warn","minStartTime","min","startTime","originalBpm","durationInSeconds","BLACK_KEYS","WHITE_KEYS","BLACK_KEY_LABELS","keyPress","keyframes","PianoKey","isEnabled","isPlaying","css","ScaleLabel","PianoLegend","inline","enabledPitches","playingNotes","setPlayingNotes","playNote","keyWidth","keyHeight","rowDistance","padding","backgroundColor","zIndex","Fragment","has","borderRadius","bottom","fontWeight","textAlign","textShadow","PITCH_CLASS_TO_LETTER","toString","replace","InlinePianoLegend","showLegend","setShowLegend","useLocalStorage","hoveredScale","setHoveredScale","showGuitarChords","setShowGuitarChords","_slug","right","faUserGraduate","faGuitar","FoldButtonWithIcon","isFolded","border","isArray","MAJOR_MODE","MINOR_MODE","modeItem","chapterChords","CHROMATIC_CHORDS","_","justifyContent","background","isValidModeName","modeStr","normalizedStr","MODE_DISPLAY_MAP","withUnderscores","MAJOR_SCALE_MAP","MINOR_SCALE_MAP","LYDIAN_SCALE_MAP","MIXOLYDIAN_SCALE_MAP","DORIAN_SCALE_MAP","PHRYGIAN_SCALE_MAP","HARMONIC_MINOR_SCALE_MAP","MELODIC_MINOR_SCALE_MAP","MODE_SHORTHAND_MAP","M","h","major","minor","lydian","mixolydian","dorian","phrygian","NOTE_LETTER_MAP","f","g","k","q","w","y","u","COLORS","SliderContainer","styled","_templateObject","_taggedTemplateLiteral","SliderRail","_templateObject2","SliderKnob","_templateObject3","pos","dragging","StyledRangeInput","input","type","_templateObject4","concat","Slider","_PureComponent","_this","_classCallCheck","autoBindReact","node","createRef","draggedPos","_inherits","_createClass","event","current","clientX","offsetLeft","offsetWidth","setState","onDrag","_this2","persist","document","addEventListener","onMouseMove","onMouseUp","_this3","removeEventListener","onChange","createElement","ref","onMouseDown","PureComponent","FOOTER_HEIGHT","StyledVolumeSlider","StyledAppFooter","AppFooterMain","TempoSection","LatencySection","DownloadButton","PauseButton","LatencyButton","TimeSliderWrapper","StyledTempoButton","memo","withRouter","currentSongDurationMs","ejected","paused","handleTimeSliderChange","handleVolumeChange","getCurrentPositionMs","togglePause","latencyCorrectionMs","setLatencyCorrectionMs","tempo","setTempo","canDownload","currentMidiBuffer","segments","lastSegment","endsWith","handleTempoChange","delta","newTempo","Number","toFixed","disabled","faPlay","faPause","alignItems","transform","lineHeight","fontFamily","fixed","integer","decimal","formatTempo","sign","abs","step","onDoubleClick","pointerEvents","opacity","blob","Blob","URL","createObjectURL","createBlobUrl","download","faDownload","SnippetListContainer","SnippetItemWrapper","measureCount","PX_IN_MEASURE","isLoading","SlugLabel","ComposerInfo","ComposerHeader","ComposerName","YearInfo","slugs","deleteSnippet","measuresSpan","midiSlug","composerInfo","corpora","midis","getComposerInfo","EditorContainer","RawlContainer","EditorPanel","DebugPanel","EditorContent","CodeMirrorWrapper","FoldButton","ErrorMessage","ResizeHandle","NoteColorLetter","StatusBar","HEADER_HEIGHT","HeaderContainer","NavLinks","baseLinkStyles","HeaderLink","Link","ExternalLink","ExternalLinks","path","user","handleLogin","handleLogout","enableManualRemeasuring","handleToggleManualRemeasuring","getLinkStyle","pathPrefix","adminUserId","ADMIN_USER_ID","decomposeScores","steps","score","explanation","Component","hasError","getDerivedStateFromError","componentDidCatch","errorInfo","render","fallback","children","MetadataContainer","RelatedCorpora","CorpusRow","relatedCorporaSlugs","corpusSlug","sourceUrl","onSourceUrlUpdate","editedUrl","setEditedUrl","handleSave","formattedTitle","beautifySlug","museScoreUrl","encodeURIComponent","textDecoration","dangerouslySetInnerHTML","__html","faArrowUpRightFromSquare","onKeyDown","onBlur","placeholder","faLink","SnippetItemContainer","SnippetHeader","TimingInfo","SnippetContent","DeleteButton","PlaybackCursor","rehydratedNotes","rehydratedAnalysis","rehydratedMeasuresAndBeats","rehydrateSnippet","paddedMeasuresAndBeats","endMeasure","paddingLength","slicedMeasures","measures","paddedMeasures","fill","snippetMidiRange","Infinity","voiceNotes","snippetMidiNumberToY","useCallback","timeRange","containerWidth","toX","normalizedTime","isNaN","isCurrentlyPlaying","cursorPosition","currentPlaybackTime","end","isPreviewWithoutTime","transition","notes","midiNumberToY","maxWidth","measuresAndBeats","startMeasure","phraseStarts","GM_DRUM_KIT","getNoteRectangles","handleNoteClick","handleMouseEnter","handleMouseLeave","secondsToX","showSourceLocation","log","isDrum","relativeNumber","voiceIndex","sourceLocation","noteUnderCursor","baseHeight","baseTop","isHighlighted","pathData","pitchBend","pitchBendData","noteDuration","noteStartX","pitchBendToY","timeToX","point","convertPitchBendToPathData","sourceLocationText","commandType","command","row","col","placeItems","whiteSpace","round","boxSizing","boxShadow","stroke","strokeWidth","ToggleContainer","ToggleIcon","active","ToggleSlider","faChevronUp","faChevronDown","SnippetLink","topic","Pp","Label","SongNarrative","lastOpenedIndex","setLastOpenedIndex","showNarrative","setShowNarrative","narrative","faTimes","TonicProvider","paddingTop","ContentArea","isRawlVisible","measureStart","rawlProps","saveAnalysis","setIsRawlVisible","parsingResult","savedAnalysis","voiceNames","voiceMask","setVoiceMask","isEmbedded","onEject","rawlLanguage","StreamLanguage","define","languageData","commentTokens","line","token","stream","eatSpace","match","skipToEnd","TabsContainer","Tab","AdminContent","CONTEXT_STUB","currentKey","tonic","currentTrack","timeSignatures","numerator","channelOctaves","commentToEndOfFile","currentBpm","ANALYSIS_STUB","executeCopyForChannels","channels","scoreByTrack","lineNumber","originalTrack","sourceStartAbsBeat","calculateGlobalBeatPosition","sourceStart","sourceStartBeat","sourceEndAbsBeat","sourceEnd","sourceEndBeat","targetStartAbsBeat","targetMeasure","targetBeat","spanLengthInBeats","track","currentTrackNotes","sourceNotes","allCopies","shifts","shiftGroup","idx","copyStartBeat","sourcePositions","scaleDegree","flatMap","shiftIndex","targetMode","modes","sourcePosition","targetPosition","newDegree","newMidi","calculateShiftedNote","accidental","flat","initialSource","disableEditing","showProgrammingManual","isDecompositionMode","customChild","onEditorChange","version","effectiveSlug","versionNum","parseInt","isMac","navigator","platform","indexOf","setError","foldEditor","setFoldEditor","editorRef","useRef","playSongBuffer","setScore","isEditorFocused","setIsEditorFocused","currentLine","setCurrentLine","currentColumn","setCurrentColumn","setContext","structuredClone","panelHeight","setPanelHeight","localStorage","getItem","isDragging","setIsDragging","dragStartY","dragStartHeight","extractedMidiNotes","setExtractedMidiNotes","matchedParsingResult","setMatchedParsingResult","activeTab","setActiveTab","previouslyHighlightedNotes","setPreviouslyHighlightedNotes","isPreviewingBackup","setIsPreviewingBackup","tempScoreRef","editorMountTime","Date","now","setBackup","useBackup","__disableGlobalShortcuts","handleKeyDown","code","shiftKey","altOptionPressed","metaKey","altKey","view","measureCoordMatch","doc","lineAt","selection","main","text","absoluteMeasureNum","measureRenumbering","measureTime","seekTime","handleMouseDown","clientY","currentHeight","innerHeight","handleMouseMove","newHeight","heightVh","setItem","handleMouseUp","capture","parseScore","timeoutId","autoplay","clearTimeout","allLines","commentLineIndex","findIndex","lines","newContext","Map","lineIndex","parseCommand","baseOctave","keys","signatures","size","allMidiNotes","midiNote","logicalNoteToMidi","pitch","velocity","startTick","durationTicks","channel","notesByChannel","channelNotes","midiResult","generateMidiWithMetadata","extractedNotes","midiInfo","midiData","message","handleTextChange","timestamp","sessionTime","newEditorScore","removeItem","editId","db","getFirestore","docRef","docSnap","getDoc","exists","source","versions","convertSourceToVersions","versionIndex","newScore","scores","loadScore","handleCursorChange","viewUpdate","head","lineObj","colPosition","hasSelection","empty","matchNotesWithMidiWriter","clonedResult","JSON","parse","stringify","eventsByChannel","foundExactMatch","matchingNote","matchFound","allChannels","channelIdx","channelEvents","foundNote","pitches","tickSpan","matchingMidiWriterNote","hasMatch","notesByRow","rowNotes","sort","b","leftmostCol","rightmostCol","targetSourceCol","matchedResult","navigateToSourceLocation","column","dispatch","anchor","scrollIntoView","focus","newHighlightedNotes","prevNote","paddingBottom","onUpdate","theme","customTheme","flex","extensions","characterBackgroundsPlugin","activeLineGutterTheme","keymap","of","run","toggleComment","basicSetup","lineNumbers","highlightActiveLineGutter","highlightActiveLine","foldGutter","onFocus","readOnly","ManualContainer","onRestoreBackup","onPreviewBackup","onRestorePreview","uid","ParseMidiDisplay","MidiWriterJsDisplay","parseKey","keyString","rootNote","modeString","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","normalizeModeName","parseCopyCommand","measureStr","beatStr","sourceStartStr","sourceStartBeatStr","sourceEndStr","sourceEndBeatStr","shiftsStr","parseFloat","shiftsStrTrimmed","shiftTokens","shiftStartPositions","currentPos","actualLineNumber","sourceCol","shiftToken","shiftValue","modeModifier","parseTimeSignatures","parts","currentMeasure","denominator","num","measure","getTimeSignatureAt","ANALYSIS_STUB_WITH_SECTIONS","sections","extendedContext","cleanLine","phrasesMatch","phrasePairs","phrasePatch","pair","pairMatch","diff","parsePhrasesCommand","sectionsMatch","sectionNumbers","sectionStr","section","parseSectionsCommand","trackCommand","channelMatch","trackMatch","hand","octave","parseTrackCommand","bpmMatch","copyCmd","melodyPart","startBeat","beatsPerMeasure","parseMelodyString","calculateMidiNumber","octaveShift","absoluteScaleDegree","baseDegree","floor","semitoneOffset","getScaleMapForMode","getBaseOctaveForTrack","beatInMeasure","totalBeats","measureBeats","globalBeatToMeasureAndBeat","globalBeat","remainingBeats","melodyString","currentPosition","melodyPartStartIndex","tokens","processTokens","lineNotes","isDurationMarker","test","getDuration","lastNoteIndex","noteTokens","noteToken","actualNote","octaveUpMatches","octaveDownMatches","scaleDegreeOffset","lastIndexOf","marker","hasDot","hasTriplet","currentToken","currentTokenStart","char","durationToken","durationTokenPos","hasOctaveOrAccidental","originalDegree","effectiveKey","scaleMap","backupKey","backup","setBackupState","item","existingBackup","existingData","toLocaleString","scoreLength","newBackup","removeBackup","KeyboardLayout","ButtonBar","RestoreButton","ViewToggle","ToggleButton","TelegramInput","PublishedUrl","PublishButton","hasChanges","isPublishing","convertedSource","commentPart","substring","basePart","insertIndex","inDurationMarker","notePart","convertNotePitches","parseNotes","events","activeChannels","timeEvents","timebase","beats","measuresInTicks","secondsPerQuarterNote","lastBeatFractionGone","constructedBeatsInLastMeasure","lastBeatTime","lastTick","createNewBeat","timeUntil","tick","newBeatEndTime","newBeatEndTick","playTime","denominatorPower","at","ticks","calculateMeasureAndBeats","subtype","EVENT_META_KEY_SIGNATURE","noteOn","currentTick","EVENT_MIDI","param1","EVENT_MIDI_NOTE_OFF","EVENT_MIDI_NOTE_ON","param2","tickPosition","EVENT_MIDI_PITCH_BEND","uniqueMidiNumbers","midiToRelativeNumberMap","getNotes","uniqueIds","secondToLastMeasureStart","beat","createContext","enable","assign","ReactDOM","Router","basename","process","App","getElementById","CHIP_CORE","_scriptDir","currentScript","src","readyPromiseResolve","readyPromiseReject","moduleArg","arguments","Module","reject","read_","readAsync","moduleOverrides","thisProgram","scriptDirectory","substr","url","xhr","XMLHttpRequest","open","send","responseText","onerror","responseType","status","response","wasmBinary","wasmMemory","out","err","WebAssembly","_typeof","abort","HEAP8","HEAPU8","HEAP16","HEAP32","HEAPU32","HEAPF32","HEAP64","HEAPF64","ABORT","assert","condition","updateMemoryViews","buffer","Int8Array","Int16Array","Uint8Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","wasmBinaryFile","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","runDependencies","runDependencyWatcher","dependenciesFulfilled","addRunDependency","removeRunDependency","clearInterval","callback","what","RuntimeError","isDataURI","filename","getBinarySync","file","instantiateArrayBuffer","binaryFile","imports","receiver","fetch","then","credentials","getBinaryPromise","binary","instantiate","instance","reason","ASM_CONSTS","$0","callRuntimeCallbacks","callbacks","UTF8Decoder","TextDecoder","UTF8ArrayToString","heapOrArray","maxBytesToRead","endIdx","endPtr","decode","subarray","str","u0","u1","u2","String","fromCharCode","ch","UTF8ToString","ptr","ExceptionInfo","excPtr","set_type","get_type","set_destructor","destructor","get_destructor","set_caught","caught","get_caught","set_rethrown","rethrown","get_rethrown","init","set_adjusted_ptr","adjustedPtr","get_adjusted_ptr","get_exception_ptr","___cxa_is_pointer_type","adjusted","PATH","isAbs","splitPath","exec","normalizeArray","allowAboveRoot","up","last","unshift","normalize","isAbsolute","trailingSlash","dirname","root","dir","lastSlash","paths","join2","randomFill","crypto","getRandomValues","initRandomFill","PATH_FS","resolvedPath","resolvedAbsolute","FS","cwd","TypeError","relative","arr","fromParts","toParts","samePartsLength","outputParts","FS_stdin_getChar_buffer","lengthBytesUTF8","len","charCodeAt","stringToUTF8Array","heap","outIdx","maxBytesToWrite","startIdx","intArrayFromString","stringy","dontAddNull","u8array","numBytesWritten","TTY","ttys","shutdown","register","dev","ops","output","registerDevice","stream_ops","tty","rdev","ErrnoError","seekable","close","fsync","read","offset","get_char","bytesRead","write","put_char","default_tty_ops","prompt","readline","FS_stdin_getChar","val","ioctl_tcgets","c_iflag","c_oflag","c_cflag","c_lflag","c_cc","ioctl_tcsets","optional_actions","ioctl_tiocgwinsz","default_tty1_ops","mmapAlloc","ceil","alignMemory","_emscripten_builtin_memalign","address","zeroMemory","MEMFS","ops_table","mount","createNode","parent","isBlkdev","isFIFO","getattr","node_ops","setattr","lookup","mknod","rename","unlink","rmdir","readdir","symlink","llseek","allocate","mmap","msync","link","readlink","chrdev","chrdev_stream_ops","isDir","contents","isFile","usedBytes","isLink","isChrdev","getFileDataAsTypedArray","expandFileStorage","newCapacity","prevCapacity","oldContents","resizeFileStorage","newSize","attr","ino","nlink","gid","atime","mtime","ctime","blksize","blocks","genericErrors","old_node","new_dir","new_name","new_node","lookupNode","newname","oldpath","canOwn","whence","prot","flags","allocated","byteOffset","mmapFlags","preloadPlugins","FS_getMode","canRead","canWrite","IDBFS","dbs","indexedDB","_indexedDB","ret","mozIndexedDB","webkitIndexedDB","msIndexedDB","DB_VERSION","DB_STORE_NAME","syncfs","populate","getLocalSet","local","getRemoteSet","remote","reconcile","quit","values","getDB","req","onupgradeneeded","fileStore","transaction","objectStoreNames","contains","objectStore","createObjectStore","indexNames","createIndex","unique","onsuccess","isRealDir","toAbsolute","check","mountpoint","stat","openKeyCursor","primaryKey","loadLocalEntry","lookupPath","storeLocalEntry","entry","mkdirTree","writeFile","chmod","utime","removeLocalEntry","loadRemoteEntry","store","storeRemoteEntry","put","removeRemoteEntry","dst","total","e2","getTime","remove","errored","done","oncomplete","reverse","mounts","devices","streams","nextInode","nameTable","currentPath","initialized","ignorePermissions","filesystems","syncFSRequests","opts","follow_mount","recurse_count","current_path","islast","isMountpoint","mounted","follow","count","getPath","isRoot","hashName","parentid","hash","hashAddNode","name_next","hashRemoveNode","errCode","mayLookup","FSNode","destroyNode","isSocket","flagsToPermissionString","perms","nodePermissions","mayCreate","mayDelete","isdir","errno","mayOpen","MAX_OPEN_FDS","nextfd","fd","getStreamChecked","getStream","createStream","FSStream","shared","defineProperties","isRead","isWrite","isAppend","closeStream","device","getDevice","makedev","ma","mi","getMounts","completed","doCallback","pseudo","mountRoot","unmount","mkdir","dirs","mkdev","newpath","old_path","new_path","old_dir","old_dirname","new_dirname","old_name","dontFollow","lstat","lchmod","fchmod","chown","lchown","fchown","truncate","ftruncate","FS_modeStringToFlags","created","ungotten","readFiles","isClosed","getdents","seeking","bytesWritten","munmap","ioctl","cmd","arg","readFile","encoding","buf","actualNumBytes","ArrayBuffer","isView","byteLength","chdir","createDefaultDirectories","createDefaultDevices","randomBuffer","randomLeft","randomByte","createDevice","createSpecialDirectories","proc_self","createStandardStreams","ensureErrnoError","setErrno","constructor","stack","staticInit","findObject","dontResolveLastLink","analyzePath","parentExists","parentPath","parentObject","createPath","createFile","properties","createDataFile","forceLoadFile","obj","isDevice","isFolder","createLazyFile","LazyUint8Array","lengthKnown","chunks","chunkOffset","chunkSize","setDataGetter","cacheLength","header","datalength","getResponseHeader","hasByteServing","usesGzip","lazyArray","chunkNum","setRequestHeader","overrideMimeType","doXHR","_length","_chunkSize","writeChunks","fn","SYSCALLS","DEFAULT_POLLMASK","calculateAt","dirfd","allowEmpty","getStreamFromFD","doStat","func","BigInt","doMsync","addr","varargs","getp","getStr","bigintToI53Checked","NaN","readEmAsmArgsArray","growMemory","pages","grow","ENV","getEnvStrings","strings","env","languages","x","createPreloadedFile","dontCreateFile","preFinish","fullname","processData","byteArray","finish","Browser","handled","plugin","FS_handledByPreloadPlugin","dep","arrayBuffer","asyncLoad","calledRun","wasmImports","___errno_location","op","termios","argp","winsize","sigPtr","argbuf","readEmAsmArgs","runEmAsmFunction","dest","copyWithin","requestedSize","oldSize","maxHeapSize","cutDown","overGrownHeapSize","__environ","environ_buf","bufSize","string","stringToAscii","penviron_count","penviron_buf_size","iov","iovcnt","pnum","curr","doReadv","newOffset","doWritev","wasmExports","info","receiveInstance","instantiateStreaming","createWasm","a0","a1","a2","a3","a4","a5","a6","a7","stackSave","stackRestore","stackAlloc","doRun","cb","postRun","preRun","ident","returnType","argTypes","toC","outPtr","stringToUTF8","stringToUTF8OnStack","getCFunc","cArgs","converter","convertReturnValue","onDone","runCaller","ready","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","deps","isHiddenRoute","firestore","indexData","analysisKey","fSlug","midiDoc","midiBlob","toUint8Array","playbackResolve","loadMidi","EventIterator","curEvent","loopStartPos","elapsedLoops","curTick","debug","EVENT_MIDI_CONTROLLER","loop","_objectSpread","isLoopStart","isLoopEnd","isAllNotesOff","allNotesOff","printTrack","charArr","padStart","viz","MIDIFile","getLoopedEvents","tracks","smallestDelta","loopCount","combinedEvents","format","getFormat","tickResolution","getTickResolution","loopCountReached","eventIterator","MIDIEvents","EVENT_META","EVENT_META_SET_TEMPO","trackIterators","every","it","_trackIterators$_i","getTimeEvents","maxPlayTime","_event$delta","tempoBPM","EVENT_META_TIME_SIGNATURE","_trackIterators$_i2","_ref","_toConsumableArray","_ref2","promisify","oldSend","xhrArguments","statusText","Alert","handlePlayerError","hidden","showPlayerError","playerError","TimeSliderContainer","TimeLabel","DurationLabel","TimeSlider","_React$Component","draggedSongPositionMs","currentSongPositionMs","timer","prevProps","setInterval","_this2$props","ms","sec","getTimeLabel","getSongPos","handlePositionDrag","handlePositionDrop","HeaderDiv","SignIn","isAdmin","checked","email","MessageBoxOuter","MessageBox","MessageBoxInner","dropzoneProps","isDragActive","TimelineContainer","TimelineWrapper","TimelineYear","YearMarker","YearLabel","ComposersGroup","ComposerCard","h3","CountryFlag","FilterIndicator","CloseFilter","selectedCountry","setSelectedCountry","selectedStyle","setSelectedStyle","composersWithoutYear","filteredComposers","filteredYears","ComposerCardContent","handleCountryClick","handleStyleClick","year","AboutTop100Corpus","Container","FrozenNotesDisplay","JsonDisplay","pre","RangeInputs","NumberInput","CopyIndicator","visible","StyledSelect","classNamePrefix","SaveButton","unsaved","FlashOverlay","customComponents","Option","components","label","selectTheme","colors","primary","primary75","primary50","primary25","danger","dangerLight","neutral0","neutral5","neutral10","neutral20","neutral30","neutral40","neutral50","neutral60","neutral70","neutral80","neutral90","selectStyles","control","provided","borderColor","menu","option","singleValue","indicatorSeparator","dropdownIndicator","clearIndicator","dataRange","setDataRange","inputRange","setInputRange","tagName","setTagName","copyIndicatorVisible","setCopyIndicatorVisible","menuIsOpen","setMenuIsOpen","tagError","setTagError","unsavedChanges","setUnsavedChanges","flashVisible","setFlashVisible","phraseStartsUpdated","setPhraseStartsUpdated","maxMeasure","validateAndUpdateRange","newRange","handleRangeChange","newValue","handleRangeBlur","createFrozenNotes","endTime","notesInVoices","lengthToNotes","TIME_SCALE_FACTOR","midiNumbers","deltaCoding","getModulations","initialModulation","mod","reduce","latest","relevantModulations","fromEntries","frozenNotesData","snippetPhraseStarts","getPhraseStarts","exportString","resetToDefaults","saveSnippet","updatedAnalysis","snippetToDelete","selectRef","copyToClipboard","clipboard","writeText","allTags","tagSet","tagCounts","countTagOccurrences","saveButtonRef","measureStartRef","select","updatedSnippets","maxMeasures","updateSnippetPhraseStarts","selectedOption","actionMeta","action","handleSelectChange","options","isClearable","onMenuOpen","onMenuClose","API_BASE","CATALOG_PREFIX","ERROR_FLASH_DURATION_MS","FORMATS","MAX_VOICES","SOUNDFONT_MOUNTPOINT","SOUNDFONT_URL_PATH","SOUNDFONTS","items","FrozenNotesContainer","HeaderStaff","midiRange","adjustedNotes","pitchClass","getNoteColorPitchClass","pitchClassToCssClass","colorPitchClass","dummyMeasureSelection","selectedMeasure","selectMeasure","splitAtMeasure","mergeAtMeasure","renumberMeasure","sectionSpan","memoizedNoteRectangles","AnalysisGrid","measureSelection","showHeader","showTonalGrid","voiceRectangles","getAverageMidiNumber","sum","getMidiRange","Voice","mouseHandlers","scrollInfo","voiceName","mask","xToSeconds","localMidiRange","systemClickHandler","noteRectangles","frozenHeight","frozenMidiRange","DUMMY_CALLBACK","hasVisibleNotes","VoiceName","StackedSystemLayout","positionSeconds","setNoteHeight","secondWidth","setSecondWidth","setSecondWidthCalled","prevPositionSeconds","voicesSortedByAverageMidiNumber","voice","average","sectionSpans","sectionStartInPhrases","optimalSecondWidth","targetWidth","innerWidth","annotatedSections","longestSection","longest","longestSectionLength","calculatedWidth","secondsPerMeasure","voices","parentRef","sectionRefs","setScrollInfo","debouncedScroll","debounce","handleScroll","scrollLeft","parentDiv","sectionIndex","sectionElement","behavior","block","overflowX","overflowY","order","el","MeasureNumbers","Cursor","MERGED_VOICE_NAMES","MERGED_VOICE_MASK","MergedSystemLayout","flattenedNotes","TinyLetter","delay","frameId","cancelAnimationFrame","requestAnimationFrame","registerKeyboardHandler","unregisterKeyboardHandler","debounceSetNoteHeight","debounceSetSecondWidth","handleSecondWidthChange","newWidth","transformOrigin","CHORD_TYPES","PITCH_CLASS_TO_GUITAR_LETTER","convertChordToGuitarChord","absoluteRoot","chordType","InlineSnippets","setHoveredMeasuresSpan","hoveredSnippetIndex","setHoveredSnippetIndex","filteredSnippets","filterSnippetsByAccess","groupedItems","setGroupedItems","itemRefs","grouped","form","measureNum","content","sourceSnippet","prevRight","prevIndex","rect","getBoundingClientRect","prevMeasure","updated","groupIndex","flexWrap","userSelect","currentTarget","snippetKey","FORCED_PANNING_LABEL","onForcedPanningChange","forcedPanning","setForcedPanning","isSingleActive","borderBottom","reload","htmlFor","newVoiceMask","verticalAlign","CitationContainer","CitationIcon","CitationPopup","Citation","citeKey","showCitation","setShowCitation","formattedCitation","setFormattedCitation","citationUrl","setCitationUrl","setPosition","iconRef","CITES","bibtex","authors","author","given","family","editor","issued","whereText","where","hasUrl","rightSpace","faQuoteRight","rings_tuning","alf_aeolian","tagg_loops","nobile","richards","vice_despacito","DropBox","Icon","Text","FileDropBox","faMusic","GradientText","GradientGreen","GradientCool","GradientWarm","GradientBright","GradientDark","TextLine","setTop","updatePosition","outerComponentRect","parentElement","scrollY","closest","findTonic","countPitchClasses","bestTonic","bestValue","currentValue","findFirstPhraseStart","earliestOnset","setSystemLayout","prevLayout","snap","buildManualMeasuresAndBeats","manualMeasures","measureStarts","currentBeatsPerMeasure","previousBeatsPerMeasure","measureIndex","currentMeasureLength","newMeasure","rehydrateNotes","rehydrateAnalysis","adjustModulations","deltaDecoding","encoded","undeltaCoding","frozenAnalysis","comment","getNewAnalysis","update","newModulations","sortedMeasures","lastValue","removeIdleModulations","advanceAnalysis","commitAnalysisUpdate","newAnalysis","starts","lengthTime","absoluteSpan","numMeasures","PITCH_CLASS_TO_NOTE_NAME","FLAT_NOTE_NAMES","getMeasureSpan","getBeatsInMeasure","measureSpan","logMeasureNotesInformation","coloredNotes","globalKeyInfo","notesInMeasure","beatsInMeasure","noteStart","EPSILON","getNoteMeasure","getNotesInMeasureAndVoice","secondsPerBeat","remainingNotes","previousNoteEnd","splitNotesIntoLines","commands","beatBasedTiming","convertNotesToBeatTiming","rawlSyntaxWithI","rawlSyntaxRepresentation","notesArray","linearRepresentation","debugInfo","inputNotes","midiNum","calculations","baseMidiNumber","sortedNotes","measureEnd","measureDuration","chordThreshold","currentChord","noteEnd","groupNotesIntoChords","secondsToBeatPosition","timeInSeconds","clampedTime","proportionComplete","beatPosition","baseValue","notesWithMidi","lowestMidiNote","lowest","lowestMidi","previousChordEnd","beatEnd","beatDuration","durationSeconds","expectedBeatDuration","distanceFromPrevious","relativeMidiNumber","isChord","chordNotes","isMinor","determineIfMinorKey","convertNotesToRawlSyntax","timeSignature","emitTimeSignature","estimatedBpm","getDurationCharacter","allDurations","symbol","minDiff","restThreshold","isMinorOverride","debugDetails","pitchClassCounts","emitRests","restString","actualDuration","remainingDuration","actualTotalDuration","sortedDurations","bestFit","smallestDuration","getPitchNotation","octaveNotations","getDiatonicNotation","scaleIndex","oct","baseNoteLetter","repeat","found","nextDiatonicIndex","actualOctave","noteValue","emittedRest","actualRestDuration","newPreviousNoteEnd","durationSymbol","actualNoteDuration","emittedNote","generateFormattedScore","outputLines","rootPitchClass","voiceOctaves","voiceBaseMidiNumbers","allNotes","keyName","determineGlobalKey","getKeyName","filteredSections","lastMeasureTime","timePerBeat","beatsPerSecond","beatsPerMinute","altBpm","patch","measureCommands","rawlSyntaxCommands","singleLineCommandsMap","multiLineCommandsMap","measureIndexStr","insertToMeasureMap","compressedCommands","rawlSyntax","rangeCompressedOutput","currentIndex","currentCommand","copyMatch","startCopiedMeasure","rangeLength","nextIndex","nextCopyMatch","H2","h2","intro","P","rnc","UL","ct","highlightMatch","term","regex","RegExp","getNiceName","SearchContainer","SearchInputContainer","SearchInput","TotalCount","ResultsContainer","searchTerm","setSearchTerm","searchInputRef","totalMidis","setTotalMidis","uniqueMidis","filteredCorpora","searchTerms","corpusWords","midiWords","niceName","groupedCorpora","acc","group","sortedGroups","multiCorpusGroups","singleCorpusEntries","minWidth","renderEmptySearchResults","composerMatched","matchingMidis","niceNameWords","borderLeft","paddingLeft","ProgressSection","RawlSection","Stats","ProgressBar","ProgressFill","percent","HistogramList","ButtonContainer","Button","PlayPauseButton","SkipButton","calculatedCount","setCalculatedCount","recentHistograms","setRecentHistograms","allMidis","seenSlugs","getAllMidis","setCurrentIndex","setIsLoading","autoBatchEnabled","setAutoBatchEnabled","lastCalculationTime","setLastCalculationTime","skippedSongs","setSkippedSongs","timeoutRef","loadingTimeoutRef","skipSong","skippedSlug","loadNextSong","alert","nextMidi","toggleAutoBatch","copyHistogramsToClipboard","histogramsJSON","savedIndex","histograms","recent","intervalId","NeonLink","Example","bad","Side","sideImage","Content","ChordStairsContainer","Section","allow","allowFullScreen","shortcuts","Global","Space","ArrowLeft","ArrowRight","container","category","table","borderCollapse","tr","td","kbd","ShortcutHelp","categoryShortcuts","description","DATE_COLOR","BlogContainer","BlogTitle","BlogPostList","BlogPostTitle","MAX_CHORD_COUNT","BLOG_POSTS","post","BlogPostItem","BlogPostChords","BlogPostPreview","BlogPostDate","BlogPostContent","BlogPostContainer","BlogPostDateSidebar","SidebarDate","TitleContainer","TitleChords","formatDisplayDate","dateString","toLocaleDateString","month","day","postId","correctSlug","extractTextFromJsx","date","sortedPosts","H","CL","Direct","DirectMe","element","isValidElement","EditorIndexContainer","EditorIndexTitle","ChapterContent","ChapterDescription","STYLES_CHAPTERS","renderChapterContent","STYLES_CHAPTER_GROUPS","all","getTagsForMidi","filteredAnalysis","getSnippetTags","posttext","getComposerOrder","hasOrder","PathContainer","MenuContainer","ChapterRow","ScrollableContent","CategorySection","CategoryHeader","ChaptersContainer","twoColumns","TopicContainer","TopicCard","HomeChapter","TopicMenu","TopicBubble","EjectButton","ChapterCategories","CHAPTER_CATEGORIES","order_of_chords","texture","melody","chromaticism","modulation","chord_types","rhythm_and_meter","misc","formatCategoryLabel","TopicContent","activeTopic","activeChapter","chapterData","matchingSnippet","nextProps","initialChapter","initialTopic","loading","setLoading","errorMessages","setErrorMessages","setChapterData","setActiveChapter","selectedMeasureStart","setSelectedMeasureStart","setActiveTopic","selectFirstTopicFromChapter","chapterIndex","topics","firstTopic","processAnalyses","errors","snippetWithSlug","topicData","getCategoryForChapter","chapterName","handleBreadcrumbClick","categoryChapters","categories","allCategorizedChapters","getMiscChapters","localeCompare","shouldUseTwoColumns","midPoint","handleTopicClick","GuideContainer","StepTitle","NavigationControls","NavigationButton","StepInfo","ExplanationContainer","ExplanationText","ExplanationTextArea","textarea","ActionsContainer","ActionButton","CopySuccess","STORAGE_KEY","currentStep","setCurrentStep","currentCode","setCurrentCode","localScoreData","setLocalScoreData","setExplanation","copySuccess","setCopySuccess","updateLocalStorage","updatedData","storedData","parsedData","maxSteps","currentStepData","newCode","updatedScoreData","faArrowLeft","lastStep","newStep","handleAddStep","faPlus","faArrowRight","newExplanation","formattedData","catch","faCopy","getBackgroundsForLine","baseDecorations","class","commentIndex","inWhitespace","cmdMatch","phrasesWord","argsStr","argsStartIndex","argPattern","argMatch","fullArg","signIndex","diffLength","sectionsWord","processKeySignature","noteDecorations","processNoteColors","dec","fullMatch","sourceSpan","spanMatch","spanStartIndex","modeStartIndex","UNSTABLE_PITCHES","parseNote","isPartOfChord","hasDuration","degree","durationStart","keyMatch","noteToNumber","cleanMelodyPart","melodyStartIndex","effectiveLength","lastNextIndex","parseMelody","dotClass","colorIndex","calculateNoteColor","lineLength","decorations","chordGroups","currentChordStart","colorClass","absoluteStart","absoluteEnd","absoluteDurationStart","applyNoteColors","createTheme","settings","foreground","caret","selectionMatch","lineHighlight","gutterBackground","gutterForeground","fontStyle","EditorView","ViewPlugin","fromClass","lastValidDecorations","buildDecorations","Decoration","none","docChanged","viewportChanged","newDecorations","builder","RangeSetBuilder","visibleRanges","backgrounds","charPos","decoration","mark","v","eventHandlers","Track","MidiTrack","NoteEvent","Writer","generateMidiFile","groupedNotes","trackNames","tempoTrack","tempoTrackName","addTrackName","ts","setTimeSignature","trackName","noteEvent","addEvent","sortedTracks","base64Data","dataUri","binaryString","atob","bytes","generateInitialAnalysis","SavingMenuContainer","MenuRow","Input","BackupInfo","VersionLinks","VersionLink","ClickableLink","ToastNotification","SignInMessage","SignInLink","BackupText","shortLink","setShortLink","publishTitle","setPublishTitle","storedTitle","setIsPublishing","setVersions","allVersionsContent","setAllVersionsContent","documentUpdatedAt","setDocumentUpdatedAt","showToast","setShowToast","isHoveringBackup","setIsHoveringBackup","originalScore","setOriginalScore","setEditorMountTime","updatedAt","toDate","fetchDocumentDetails","handleEditorMounted","detail","mountTime","handleSaveClick","editsCollection","collection","updateDoc","serverTimestamp","newVersionNumber","newShortLink","newDoc","owner","addDoc","createdAt","hasOriginalScore","hours","getHours","minutes","getMinutes","timeStr","diffMs","diffMins","diffHours","diffDays","isToday","getDate","getMonth","getFullYear","isYesterday","relativeDate","formatBackupTime","formatDiffLength","versionNumber","handleVersionClick","fullUrl","origin","mt","getNoteNameFromMidi","isMinorKey","decorateScale","scaleName","styledLetters","letter","NoteExample","DisplayContainer","formatNote","random","baseName","endTick","startSec","endSec","durationSec","earliestTick","colSpan","alt","new","schubert_d365_09","Gravity_Falls_Opening","chopsticks","ConverterContainer","TextareasContainer","TextareaColumn","StyledTextarea","ButtonsContainer","inputText","setInputText","outputText","setOutputText","tempDoc","convertSourceText","StyledButton","StyledButtonLink","LandingContainer","LeftColumn","RightColumn","UserScoresContainer","ScoresContainer","ScoresTitle","ScoresList","ScoreItem","ScoreLink","ScoreTimestamp","VersionBadge","userScores","setUserScores","query","querySnapshot","getDocs","fetchUserScores","formatDistanceToNow","addSuffix","ForgeContainer","SelectorContainer","HorizontalCategorySection","TopControls","BPMSlider","BPMLabel","BPMValue","ForgeButton","propName","handleStyleInteraction","useForgeContext","ProgressionButton","PatternButton","INITIAL_STATE","patternIndex","progression","playbackStyle","wholeNoteStyle","alternationStyle","melodyRhythm","melodyType","MODE_OPTIONS","PLAYBACK_STYLES","WHOLE_NOTE_STYLES","ALTERNATION_STYLES","MELODY_RHYTHMS","MELODY_TYPES","ForgeContext","ButtonSection","customButton","CustomButton","ButtonComponent","TONIC_OPTIONS","lastClickedState","setLastClickedState","lastGeneratedConfig","setLastGeneratedConfig","isDraggingBPM","setIsDraggingBPM","setCurrentMidi","setRawlProps","isClickPending","patternSequences","PATTERNS","pattern","prepareMidi","newConfig","shouldAutoPlay","isEqual","config","generateNotes","downloadableInfo","PROGRESSIONS","midiDataLength","getProgressionDisplay","prog","SCALE_CHORDS","Provider","updates","eventType","newState","newBPM","seq","natural_minor","CLASSIC","ALTERNATE_1","ALTERNATE_2","DESCENDING","MINOR_RISE","getChord","getAdjustedBasePitch","basePitch","createNote","pitchOffset","findPitchInScale","scaleDegrees","normalizedPitch","deg","generateAlbertiPattern","EIGHTH_NOTE","selectedPattern","chordPitches","rehydrateChords","baseTime","getBaseNoteParams","patternValue","octaveOffset","generateWholeNotes","quarter","generateRootChordAlternation","melodyNotes","getScaleDegrees","notesPerMeasure","generateMelody","FORGE_MOCK_ID","musicalEvents","currentStartTime","currentChannel","currentPitches","convertToMusicalEvents","generateMidiFromEvents","saveMidi","slugToCheck","checkSlugExists","firestoreBlob","Bytes","fromUint8Array","indexRef","arrayUnion","saveMidiFromLink","params","URLSearchParams","search","decodeURIComponent","method","ok","DropSaveForm","setTitle","setSourceUrl","titleInputRef","handleKeyPress","isNoteOrPitchBendEvent","isGlobalMetaEvent","getTrackName","nameEvent","createTrackNameEvent","deltaTime","createEndOfTrackEvent","ensureTrackEnding","findUnusedChannel","usedChannels","pushEventWithDeltaTime","lastEventTime","targetChannel","absoluteTime","inputData","_forcedPanning","parseMidi","getUsedChannels","channelTracks","trackIndex","mergedEvents","globalMetaEvents","enhancedEvent","newTracks","processedChannels","trackIndices","leftHandChannel","baseTrackName","leftHandEvents","rightHandEvents","leftName","lastMetaTime","controllerType","rightHandLastEventTime","leftHandLastEventTime","isFirstTrack","cleanedRightHandEvents","cleanedLeftHandEvents","outputData","writeMidi","GM_INSTRUMENTS","GM_DRUM_KITS","require","SYSEX_GM_RESET","SEQUENCED_CONTROLLERS","META_LABELS","_defineProperty","EVENT_META_TEXT","EVENT_META_COPYRIGHT_NOTICE","EVENT_META_TRACK_NAME","EVENT_META_INSTRUMENT_NAME","EVENT_META_LYRICS","EVENT_META_MARKER","EVENT_META_CUE_POINT","printSysex","MIDIPlayer","autoBind","synth","programChangeCb","speed","skipSilence","lastProcessPlayTimestamp","lastSendTimestamp","useWebMIDI","sampleRate","channelsInUse","channelMask","channelProgramNums","textInfo","setChipStateDump","channelToTrack","stop","load","midiFile","_this$setChipStateDum","useTrackLoops","elapsedTime","getTrackEvents","getEvents","summarizeMidiEvents","datas","getUint16","doSkipSilence","firstNoteDelay","messageDelay","numSysexEvents","firstNote","eventList","EVENT_SYSEX","EVENT_DIVSYSEX","MIDI_1PARAM_EVENTS","MIDI_2PARAMS_EVENTS","play","endCallback","playbackStartedCallback","reset","performance","resume","processPlaySynth","bufferSize","bufferStart","batchSize","msPerBatch","samplesRemaining","noteOff","EVENT_MIDI_PROGRAM_CHANGE","handleProgramChange","programChange","controlChange","synthStillActive","getValue","processPlay","throttleDelayMs","EVENT_MIDI_CHANNEL_AFTERTOUCH","EVENT_MIDI_NOTE_AFTERTOUCH","scaledPlayTime","BUFFER_AHEAD","program","_this$programChangeCb","panic","_this$synth2","_this$synth","getPosition","setOutput","getSpeed","setSpeed","setPositionSynth","setPositionWebMidi","wasPaused","numEvents","eventMap","getChannelInUse","getChannelProgramNum","iconv","chardet","detect","setChannelMute","isMuted","panicChannel","setUseWebMIDI","Player","_EventEmitter","core","appTogglePause","stopped","fileExtensions","metadata","timeCount","renderTime","perfLoggingInterval","paramDefs","fileExtension","startMs","getMetadata","durationMs","getDurationMs","positionMs","getPositionMs","numVoices","getNumVoices","getParamDefs","getTempo","getVoiceMask","getVoiceName","isStopped","isPaused","seekMs","processAudioInner","cost","budget","audioNode","audioprocess","onaudioprocess","outputBuffer","numberOfChannels","getChannelData","filepath","meta","system","game","artist","EventEmitter","PROGRESSIVE_SOUNDFONTS","qualityLevel","dummyMidiOutput","midiDevices","_Player","_len","_key","defaultValue","dependsOn","param","hint","_tp_init","_malloc","filepathMeta","midiFilePlayer","MIDIFilePlayer","emit","range","_tp_note_on","_tp_note_off","_tp_pitch_bend","_tp_control_change","_tp_program_change","_tp_panic","_tp_panic_channel","_tp_render","_tp_reset","numBanks","_adl_getBanksCount","_adl_getBankNames","oplBanks","def","webMidiIsInitialized","transientParams","setParameter","soundfontQualityLevel","loadingSoundfonts","highestLoadedSoundfontIndex","startProgressiveSoundfontLoading","updateSoundfontParamDefs","loadNextSoundfont","nextSoundfont","preloadSoundfont","formatted","subtitle","_loadData","_asyncToGenerator","_regeneratorRuntime","_callee","newTransientParams","currentSoundfont","bestSoundfont","initialSoundfont","_args","wrap","_context","ensureWebMidiInitialized","metadataFromFilepath","getParameter","getSynthengineBasedOnFilename","getOpl3bankBasedOnFilename","_tp_set_ch10_melodic","setTransientParameter","getBasePlayerState","abrupt","_x","_x2","fp","opl3def","opl3banks","findBank","bank","bankId","_superPropGet","suspend","_this4","pgm","instrumentName","_this5","_this6","_tp_get_polyphony","paramDef","userSoundfonts","userSoundfontPath","fluidSynth","_tp_get_fluid_synth","_fluid_synth_set_chorus_on","level","remap01","depthMs","_fluid_synth_set_chorus","_this7","isTransient","_tp_set_synth_engine","sfIndex","sf","ensureEmscFileWithUrl","_loadSoundfont","_tp_set_reverb","setFluidChorus","_tp_set_polyphony","_tp_set_bank","muteAudioDuringCall","ccall","soundfontName","onLoadCallback","_this8","newQualityLevel","wasPlaying","currentPositionMs","similarTo","secondsToX__","xToSeconds__","getTonic","getSecondsMeasure","noteMeasure","getNoteColor","setAnalysis","analysisRef","systemLayout","analysisUpdate","setSelectedMeasure","selectedMeasureRef","hoveredNote","setHoveredNote","MouseEvent","futureAnalysis","groupByPhrasesTillTheEnd","groupSize","newSections","sectionToRemove","displayNumber","isShift","firstPhraseStart","notesInVoice","setPositionMs","running","animate","handleEscapePress","keyCode","targetElement","systemLayoutProps","absoluteMeasureStart","showCopyAnimation","setShowCopyAnimation","copyButtonRef","handleCopySource","formattedScore","beautifiedTitle","borderTop","flexShrink","flexGrow","newUrl","midiDocRef","animation","ChordNote","NOTE_HEIGHT","scaleOut","ChordBoundingBox","clickable","ChordContent","ChordName","TonicContext","ChordStairs","propTonic","contextTonic","playingStates","setPlayingStates","hideLabels","titleHeight","chapterChordsSet","modeChordSet","modeChordSetWithoutV","hasIntersection","filteredChords","numChords","rehydratedChords","minPosition","positions","pitchOfMinPosition","maxPosition","totalHeight","tonicChordPosition","scaledNoteHeight","scaledNoteWidth","scaledHorizontalGap","scaledFontSize","handleChordClick","timeout","chordData","clickedChordIndex","transposedNotes","handleChordMouseEnter","handleChordMouseLeave","topPosition","chordNameOffset","pitchIndex","formatChordName","intervalString","getDisplayChordName","mergeAnalyses","existingAnalyses","newAnalyses","setAppElement","AppMainContent","super","keyboardHandlers","seekForRawl","seekRelativeInner","midiPlayer","transformedBuffer","setPlaybackStartedCallback","loadData","parsing","setupMidiPlayer","prevState","handleSetVoiceMask","startPlayback","onDrop","droppedFiles","reader","FileReader","droppedFilename","ext","extname","sf2Path","forceWrite","ensureEmscFileWithData","chipCore","forceUpdate","currUrl","readAsArrayBuffer","toggleShortcutHelp","showShortcutHelp","handler","resetMidiPlayerState","currentSongNumVoices","songUrl","handleUnlockAudioContext","audioContext","audioContextLocked","audioContextState","updatePlaybackTime","handleSequencerStateUpdate","isEjected","attachMediaKeyHandlers","contentAreaRef","errorTimer","songRequest","firebaseApp","auth","getAuth","adminDocRef","adminSnapshot","default","onAuthStateChanged","loadingUser","loadUserAnalyses","AudioContext","webkitAudioContext","latencyHint","savedLatencyCorrection","initialLatencyCorrection","directories","fileToDownload","hoveredMeasuresSpan","pow","log2","baseLatency","gainNode","createGain","gain","playerNode","createScriptProcessor","unlockAudioContext","initChipCore","urlSlug","keySlug","valueSlug","userId","userDocRef","userSnapshot","userData","setDoc","finally","audioState","locateFile","prefix","print","msg","printErr","self","on","handlePlayerStateUpdate","processAudio","handleFileSystemReady","mapSequencerStateToAppState","sequencerState","appState","prop","seqProp","provider","GoogleAuthProvider","signInWithPopup","signOut","userRef","userDoc","mediaSessionAudio","mediaSession","setActionHandler","seekRelative","ctrlKey","HTMLElement","blur","HTMLInputElement","setSpeedRelative","pause","playbackState","processFetchedDirectory","playerState","playSong","canPlay","transformedMidi","playFromFirestore","inputArray","uint8Array","componentDidMount","playbackTimer","componentWillUnmount","componentDidUpdate","prevPath","isStructuresRoute","wasStructuresRoute","rawlRoute","Route","decompositionRoute","disableClick","Switch","exact","component","StructuresWithParams","isOpen","onRequestClose","contentLabel","overlay","firstSlashIndex","STACKED_RN_HEIGHT","KEY_TO_OFFSET","z","VerticalBar","MeasureBar","BeatBar","RemeasuringInput","inputRef","setValue","parsedValue","autoFocus","maskImage","WebkitMaskImage","Measure","isPhraseStart","showNonPhraseStarts","selectedPhraseStart","isLastSection","showMeasureBar","Beat","second","TonalGrid","minX","maxX","fromIndex","toIndex","fromX","modulationsArray","showBeats","relevantBars","bar","maxKey","numericKey","titleCase","rn","chordString","STRUCTURES_TO_CHORDS","layout","faKeyboard","scales","STRICT_NATURAL_MINOR","updateQueryString","newParams","queryString","stateUrl","replaceState","unlock","body","titlesFromMetadata","allOrNone","copyright","getFilepathFromUrl","emscRuntime","remap","fromLeft","fromRight","toLeft","toRight","badgeStyle","letterSpacing","faList","iconColor","LOWERCASE_WORDS","CHORDS","biiio7","vio7","iiio7","vo7","bviio7","ivo7","bvio7","ii","II","II7","ii7","iii","III","iii7","iv","iv7","I","I7","VI","vi7","IV","IV7","V","V7","V43","V9","Vb9","Vsoul","Vsoulii","V13","V7b9","Vsus4","Vsus47","Imaj7","Imaj9","IVmaj7","I5","IV5","V5","bVII","bVII7","bvi","bvii","bIII","biii","bII","bII7","viio7","biio7","io7","It","Fr","Ger","Cad64","cad64","i64","ii65","io","imaj7","i7","iio","iio7","viio","IPAC","I6","i6","b2","b3","b6","b7","bii","vii","v7","WT1","WT2","stackChordUp","prevRoot","currentRoot","distanceUp","distanceDown"],"mappings":"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AyBvB,EACvB19E,EACA6+E,EACAI,EACAjkE,GAEFkkE,EAAwBxB,EACtB19E,EACA4+E,EACAM,EACAR,OAEG,CAEL,GACEh1B,GACe,eAAf1pD,EAAMb,MACmB,KAAzBa,EAAMg/E,eAEN,OAIFC,EAAyBvB,EACvB19E,EACA6+E,EACAI,EACAjkE,GAEFkkE,EAAwBxB,EACtB19E,EACA4+E,EACAM,EACAR,EAEJ,KAIF,MAAMU,EAAyBP,EAAgBn5F,KAC7C,EAAGm4F,eAActrE,mBAAkBvS,KAAYA,IAE3Cq/E,EAAwBT,EAAel5F,KAC3C,EAAGm4F,eAActrE,mBAAkBvS,KAAYA,IAGjDu+E,EAAU98F,KACR87F,EAAkB6B,GAClB7B,EAAkB8B,GAEtB,CAGAtoF,EAAK69C,OAAOhvD,SAAQ,CAACutB,EAAOgrE,KACEhrE,EAAMtkB,MAC/BmR,GAAU,YAAaA,GAASw+E,EAAkBjkF,IAAIyF,EAAMgb,YAG7DujE,EAAU98F,KAAK87F,EAAkBpqE,GACnC,IAIF,MAMMmsE,GAAa,IAAAC,WANW,CAC5Bx0C,OAAQh0C,EAAKg0C,OACb6J,OAAQ2pC,IAKV,OAAO,IAAI5uD,WAAW2vD,EACxB,C,4TCvWaE,EAAiB,CAC5B,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iB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B,CACEE,KAAM,UACNsf,MAAO,CACL,qBACA,mDACA,uBACA,uBACA,cACA,6BACA,6CACA,yBACA,gCACA,0DACA,mCACA,eAEFspF,UAAW,CAAC,iBAAkB,SAEhC,CACE5oG,KAAM,OACNsf,MAAO,CACL,6BACA,6CACA,wBACA,wCACA,iCACA,kCACA,qBACA,8BACA,yCACA,0BACA,iCACA,oDACA,iBACA,YACA,wCACA,qCACA,4BACA,4BACA,+BACA,oCACA,2CAEFspF,UAAW,CAAC,qBAEd,CACE5oG,KAAM,gBACNsf,MAAO,CACL,qCACA,oEACA,4DAEFxf,kBAAmB,KACnBjB,MAAO,kBACPC,MAAO,uBACPW,QAAS,WAEX,CACEO,KAAM,qBACNsf,MAAO,CAAC,kCAAmC,+BAC3Cxf,kBAAmB,KACnBjB,MAAO,6BACPC,MAAO,0BACPW,QAAS,SACTmpG,UAAW,CAAC,oBAEd,CACE5oG,KAAM,kBACNsf,MAAO,CACL,qDACA,mCACA,qBACA,sDACA,uBACA,0FACA,wCACA,gCACA,kCAEFxf,kBAAmB,KACnBjB,MAAO,+BACPC,MAAO,8BACPW,QAAS,MACTmpG,UAAW,CAAC,mBAEd,CACE5oG,KAAM,gBACNsf,MAAO,CACL,sDACA,oCACA,sDACA,yBACA,+CACA,oBAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,oCACPW,QAAS,UACTmpG,UAAW,CAAC,cAAe,eAE7B,CAAE5oG,KAAM,WAAYsf,MAAO,CAAC,iCAC5B,CACEtf,KAAM,kBACNsf,MAAO,CACL,qEACA,oIAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,8BACPW,QAAS,SAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,8BACA,oCACA,+BACA,8BACA,uFAGJ,CACEtf,KAAM,kBACNsf,MAAO,CACL,mEACA,qDAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,+BACPW,QAAS,SAEX,CACEO,KAAM,gBACNsf,MAAO,CACL,gDACA,wCACA,wDACA,iDACA,yDACA,gFAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,8BACPW,QAAS,SAEX,CACEO,KAAM,QACNsf,MAAO,CACL,yCACA,qCACA,yCACA,yEAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,uBACPW,QAAS,kBAGX,CACEO,KAAM,aACNsf,MAAO,CAAC,UACRxf,kBAAmB,KACnBL,QAAS,QACTZ,MAAO,oBAET,CACEmB,KAAM,kBACNsf,MAAO,CACL,sCACA,iEACA,+EACA,8CAEFxf,kBAAmB,KACnBL,QAAS,QACTZ,MAAO,oBAET,CACEmB,KAAM,kBACNsf,MAAO,CAAC,2BACRxf,kBAAmB,KACnBjB,MAAO,gCACPC,MAAO,oCACPW,QAAS,SAEX,CACEO,KAAM,eACNsf,MAAO,CACL,+DACA,yBACA,uDACA,+BACA,oCACA,mBACA,0DACA,uEACA,8CACA,qBACA,4BACA,2BACA,sGACA,uBACA,kCACA,wCACA,qCACA,QACA,gDAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,sCACPW,QAAS,OAEX,CACEO,KAAM,YACNsf,MAAO,CACL,kCACA,qCAEFxf,kBAAmB,KACnBjB,MAAO,UACPC,MAAO,wBACPW,QAAS,WAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,yBACA,2CACA,mCACA,yBACA,+BAEFxf,kBAAmB,KACnBjB,MAAO,wBACPC,MAAO,wCACPW,QAAS,WAEX,CACEO,KAAM,WACNsf,MAAO,CACL,kEACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,mCACA,mCACA,mCACA,mCACA,kCAEFxf,kBAAmB,KACnBjB,MAAO,UACPC,MAAO,iCACPW,QAAS,WAEX,CACEO,KAAM,wBACNsf,MAAO,CACL,uDACA,0CAEFxf,kBAAmB,KACnBjB,MAAO,UACPC,MAAO,iBACPW,QAAS,WAEX,CACEO,KAAM,yBACNsf,MAAO,CACL,oCACA,uCACA,mCAEFxf,kBAAmB,KACnBjB,MAAO,4BACPC,MAAO,wBACPW,QAAS,eAEX,CACEO,KAAM,WACNsf,MAAO,CAAC,iBAAkB,oCAC1Bxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,uBACPW,QAAS,WAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,qCACA,gCACA,4BACA,8BACA,8BACA,cAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,iCACPW,QAAS,QAEX,CACEO,KAAM,qBACNsf,MAAO,CACL,gBACA,qGAEFxf,kBAAmB,KACnBjB,MAAO,oBACPC,MAAO,uBACPW,QAAS,cAEX,CACEO,KAAM,YACNsf,MAAO,CACL,8BACA,yCACA,qBACA,yDACA,sDACA,uBACA,qBACA,qBACA,kBACA,kCAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,iBACPW,QAAS,QAEX,CACEO,KAAM,oBACNsf,MAAO,CACL,qBACA,qDAEFxf,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,qBACNsf,MAAO,CAAC,+CACRxf,kBAAmB,KACnBjB,MAAO,0BACPC,MAAO,sBACPW,QAAS,cAEX,CACEO,KAAM,mBACNsf,MAAO,CACL,6BACA,oCACA,yCAEFxf,kBAAmB,KACnBjB,MAAO,sBACPC,MAAO,oBACPW,QAAS,WAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,iFACA,iCACA,oCACA,6BACA,mCACA,6BAEFxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,oCACPW,QAAS,SAEX,CACEO,KAAM,gBACNsf,MAAO,CAAC,uBAAwB,qBAGlC,CACEtf,KAAM,cACNsf,MAAO,CACL,kCACA,sBACA,oBACA,sCACA,0BACA,sBACA,aACA,4BAEFxf,kBAAmB,KACnBjB,MAAO,oBACPC,MAAO,iBACPW,QAAS,OAEX,CACEO,KAAM,eACNsf,MAAO,CAAC,mBAAoB,oBAC5Bxf,kBAAmB,KACnBjB,MAAO,oBACPC,MAAO,mBACPW,QAAS,OAEX,CAAEO,KAAM,cAAesf,MAAO,CAAC,kCAC/B,CACEtf,KAAM,eACNsf,MAAO,CAAC,sBAAuB,yBAC/Bxf,kBAAmB,KACnBjB,MAAO,sBACPC,MAAO,sBACPW,QAAS,OAEX,CACEO,KAAM,eACNsf,MAAO,CACL,4DACA,yDACA,wDACA,oCACA,wCACA,4DAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,mBACPW,QAAS,SAEX,CACEO,KAAM,WACNsf,MAAO,CACL,8BACA,mBACA,mBAEFxf,kBAAmB,KACnBjB,MAAO,oBACPC,MAAO,mBACPW,QAAS,OAEX,CACEO,KAAM,WACNsf,MAAO,CACL,uCACA,iCACA,yCAEFxf,kBAAmB,KACnBjB,MAAO,qBACPC,MAAO,mBACPW,QAAS,UAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,sCACA,mDACA,qCACA,sCAEFxf,kBAAmB,KACnBjB,MAAO,oBACPC,MAAO,kBACPW,QAAS,UAEX,CACEO,KAAM,cACNsf,MAAO,CACL,mDACA,2EACA,2DAEFxf,kBAAmB,KACnBjB,MAAO,oBACPC,MAAO,gBACPW,QAAS,UAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,8BACA,sCACA,sCACA,sDAEFxf,kBAAmB,KACnBjB,MAAO,oBACPC,MAAO,cACPW,QAAS,UAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,2CACA,mCACA,mCAEFxf,kBAAmB,KACnBL,QAAS,UACTZ,MAAO,iBAET,CACEmB,KAAM,eACNsf,MAAO,CACL,8CACA,sBACA,4DACA,iBACA,uFAEFxf,kBAAmB,KACnBjB,MAAO,qBACPC,MAAO,eACPW,QAAS,SAEX,CACEO,KAAM,qBACNsf,MAAO,CACL,4BACA,SACA,4BACA,4BACA,6BACA,qCACA,6BACA,qCACA,uDACA,oCAEFxf,kBAAmB,KACnBjB,MAAO,qBACPC,MAAO,yBACPW,QAAS,UAEX,CACEO,KAAM,eACNsf,MAAO,CACL,yBACA,WACA,0BACA,0BACA,8BACA,yBACA,kBAEFxf,kBAAmB,KACnBjB,MAAO,yBACPC,MAAO,6BACPW,QAAS,UAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,iBACA,gCACA,gDACA,uBACA,iCACA,wCACA,iBACA,mBACA,uBACA,yCACA,mCACA,+BACA,uCACA,iCACA,wBACA,wBACA,+BAEFzgB,MAAO,oBACPC,MAAO,gBACPW,QAAS,iBAEX,CACEO,KAAM,eACNsf,MAAO,CACL,8BACA,sCACA,qCACA,mCACA,uCACA,qCACA,2EACA,2CACA,uCACA,kDACA,kDACA,4CACA,+BACA,iDACA,uCACA,sCACA,sCACA,0CACA,2CACA,wCACA,uCACA,qCACA,qCACA,sCACA,oCACA,sCACA,0CACA,wCACA,mDACA,mDACA,wCACA,0CACA,wBACA,yCACA,gCACA,8CACA,6CACA,qCACA,yCACA,iDACA,sCACA,kCACA,qCACA,2CACA,mCACA,yCACA,uCACA,0CACA,gBAEFxf,kBAAmB,KACnBjB,MAAO,oBACPC,MAAO,UACPW,QAAS,OAEX,CACEO,KAAM,aACNsf,MAAO,CACL,yBACA,2BACA,uEAEFxf,kBAAmB,KACnBjB,MAAO,uBACPC,MAAO,yBACPW,QAAS,WAEX,CACEO,KAAM,oBACNsf,MAAO,CACL,kBACA,kBACA,2FACA,4BACA,0CACA,wDACA,yCACA,6CACA,iFACA,8BACA,8CACA,uBACA,6EACA,0BACA,uBACA,iBACA,oBACA,wBACA,gBACA,uBACA,yBACA,6BACA,8BACA,8BACA,yCACA,gCACA,iDAEFxf,kBAAmB,KACnBjB,MAAO,4BACPC,MAAO,wBACPW,QAAS,OAEX,CACEO,KAAM,eACNsf,MAAO,CACL,2BACA,uCACA,mCAEFxf,kBAAmB,KACnBjB,MAAO,SACPY,QAAS,aAEX,CACEO,KAAM,cACNsf,MAAO,CACL,oCACA,yBACA,0BACA,0CAEFxf,kBAAmB,KACnBjB,MAAO,6CACPY,QAAS,aAEX,CACEO,KAAM,YACNsf,MAAO,CACL,oEACA,wCACA,kBACA,oDAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,aACPW,QAAS,OAEX,CACEO,KAAM,cACNsf,MAAO,CACL,iCACA,uCACA,wCAEFxf,kBAAmB,KACnBjB,MAAO,iBACPC,MAAO,eACPW,QAAS,OAEX,CACEO,KAAM,WACNsf,MAAO,CACL,qBACA,qBACA,qBACA,wCAEFzgB,MAAO,sBACPC,MAAO,kBACPW,QAAS,OAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,6EACA,6EACA,mCACA,8BACA,8BACA,gCAEFxf,kBAAmB,KACnBL,QAAS,QACTZ,MAAO,oBAET,CACEmB,KAAM,iBACNsf,MAAO,CACL,yBACA,sBACA,kCACA,iBACA,2CACA,kBACA,sBACA,kBACA,wBACA,0CACA,sBACA,sBACA,kBACA,0BACA,8BACA,mBACA,uBAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,sBACPW,QAAS,WAEX,CACEO,KAAM,aACNsf,MAAO,CACL,4BACA,wFACA,iCACA,6CACA,8CACA,mDACA,2BACA,8BACA,sCACA,oCACA,iEACA,cACA,wCACA,mDACA,4BACA,4BACA,sBACA,yBACA,iDACA,uCACA,4BACA,kDACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,kBACPC,MAAO,oBACPW,QAAS,OAEX,CAEEO,KAAM,cACNsf,MAAO,CACL,kCACA,gBACA,0BACA,wBACA,yBACA,WAEFxf,kBAAmB,KACnBjB,MAAO,UACPC,MAAO,YACPW,QAAS,OAEX,CACEO,KAAM,aACNsf,MAAO,CAAC,uCACRxf,kBAAmB,KACnBjB,MAAO,sBACPC,MAAO,sBACPW,QAAS,OAEX,CACEO,KAAM,mBACNsf,MAAO,CACL,wBACA,iCACA,mDACA,sDACA,uCAEFxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,wBACPW,QAAS,OAEX,CAAEO,KAAM,iBAAkBsf,MAAO,IACjC,CACEtf,KAAM,mBACNsf,MAAO,CACL,kEACA,kEACA,8DACA,qDACA,sCAGJ,CACEtf,KAAM,aACNsf,MAAO,CACL,2BACA,kDACA,sBACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,wBACPC,MAAO,qBACPW,QAAS,OAEX,CACEO,KAAM,MACNsf,MAAO,CACL,wDACA,2DACA,oCACA,mBACA,yBACA,kDAEFxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,kBACPW,QAAS,cACTmpG,UAAW,CAAC,eAEd,CACE5oG,KAAM,OACNsf,MAAO,CACL,oEACA,kDACA,iDACA,sDACA,+CACA,gEACA,kDACA,oDACA,+DACA,sDACA,qDACA,8CAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,wBACPW,QAAS,OAEX,CACEO,KAAM,8BACNsf,MAAO,CACL,kCACA,2BACA,uEACA,0CACA,4CACA,+CAEA,8CACA,yCACA,6BACA,oCACA,2CACA,sDACA,2DACA,sDACA,wDAEA,gBAEA,sCACA,8CACA,sCACA,gFACA,yEAGJ,CACEtf,KAAM,YACNsf,MAAO,CACL,4GACA,iFACA,2EACA,yEACA,kFACA,4CAEFxf,kBAAmB,KACnBL,QAAS,QACTZ,MAAO,oBAET,CACEmB,KAAM,cACNsf,MAAO,CACL,2CACA,iDACA,yFAEFxf,kBAAmB,KACnBjB,MAAO,0CACPY,QAAS,SAEX,CACEO,KAAM,mCACNsf,MAAO,CACL,gCACA,sFACA,kBACA,sBACA,QACA,SACA,yEAEFxf,kBAAmB,KACnBjB,MAAO,sBACPC,MAAO,uBACPW,QAAS,OAEX,CACEO,KAAM,cACNsf,MAAO,CAAC,yCACRxf,kBAAmB,KACnBjB,MAAO,sBACPC,MAAO,uBACPW,QAAS,OAEX,CACEO,KAAM,QACNsf,MAAO,CACL,iDACA,8CAEA,6EAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,gBACPW,QAAS,UAEX,CACEO,KAAM,oBACNsf,MAAO,CACL,+EACA,6DAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,oBACPW,QAAS,SAEX,CACEO,KAAM,cACNsf,MAAO,CACL,qEACA,0CACA,gDACA,0DACA,gCACA,0CACA,+BACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,0BACPC,MAAO,2BACPW,QAAS,SAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,6BACA,yCACA,iCAEFxf,kBAAmB,KACnBjB,MAAO,uBACPC,MAAO,wBACPW,QAAS,OAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,yCACA,gDAEFxf,kBAAmB,MAErB,CACEE,KAAM,iBACNsf,MAAO,CACL,sEACA,yDAEFxf,kBAAmB,KACnBjB,MAAO,aACPY,QAAS,UAEX,CACEO,KAAM,aACNsf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sf,MAAO,CACL,4DACA,gEACA,gEACA,wDACA,yDACA,wDACA,6DACA,mCACA,mDAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,oBACPW,QAAS,OAEX,CACEO,KAAM,sBACNsf,MAAO,CACL,0DACA,qDACA,mDACA,8DACA,+DACA,6DAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,sBACPW,QAAS,OAEX,CACEO,KAAM,qBACNsf,MAAO,CACL,gCACA,2EACA,cACA,0DACA,+BACA,8CACA,yCACA,iCACA,iEACA,2BACA,kCACA,+BACA,iBACA,oCACA,4BACA,iCACA,0FACA,sCACA,kDAEFxf,kBAAmB,KACnBjB,MAAO,wBACPC,MAAO,8BACPW,QAAS,UAEX,CACEO,KAAM,aACNsf,MAAO,CACL,8DACA,oCACA,4BACA,uCAEFxf,kBAAmB,KACnBjB,MAAO,OACPC,MAAO,sBACPW,QAAS,OAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,uDACA,8CAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,sBACPW,QAAS,WAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,qCACA,6BACA,gEACA,6FACA,+DAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,6BACPW,QAAS,UAEX,CACEO,KAAM,WACNsf,MAAO,CACL,iDACA,8CAEFxf,kBAAmB,KACnBjB,MAAO,sCACPC,MAAO,yBACPW,QAAS,MAEX,CACEO,KAAM,mBACNsf,MAAO,CAAC,qCACRxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,6BACPW,QAAS,UAEX,CACEO,KAAM,eACNsf,MAAO,CACL,0BACA,oCACA,yCACA,6CACA,sDACA,kCACA,8BACA,4BACA,4CACA,oCACA,oCACA,wCACA,gCACA,sJAEFxf,kBAAmB,KACnBjB,MAAO,eACPC,MAAO,yBACPW,QAAS,OAEX,CACEO,KAAM,QACNsf,MAAO,CAAC,oCACRxf,kBAAmB,KACnBjB,MAAO,MACPC,MAAO,sBACPW,QAAS,SAEX,CACEO,KAAM,OACNsf,MAAO,CACL,sCACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,wBACPC,MAAO,8BACPW,QAAS,MAEX,CACEO,KAAM,mBACNsf,MAAO,CAAC,gDACRxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,2BACPW,QAAS,SAEX,CACEO,KAAM,sBACNsf,MAAO,CACL,2DACA,yBACA,8DACA,yBAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,gBACPW,QAAS,aAEX,CACEO,KAAM,eACNsf,MAAO,CACL,+BACA,+BACA,0BACA,SACA,8BACA,4BACA,2BAEFxf,kBAAmB,KACnBjB,MAAO,kBACPC,MAAO,iBACPW,QAAS,WAEX,CACEO,KAAM,gBACNsf,MAAO,CACL,6BACA,+BACA,sEAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,wBACPW,QAAS,SAEX,CACEO,KAAM,eACNsf,MAAO,CACL,gDACA,iCAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,yBACPW,QAAS,SAEX,CACEO,KAAM,YACNsf,MAAO,CACL,6EACA,4BAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,sBACPW,QAAS,SAEX,CACEO,KAAM,cACNsf,MAAO,CAAC,iBAAkB,oBAAqB,uBAC/Cxf,kBAAmB,KACnBjB,MAAO,+BACPC,MAAO,qBACPW,QAAS,OAEX,CACEO,KAAM,WACNsf,MAAO,CACL,gCACA,4BACA,mCACA,eAEFxf,kBAAmB,KACnBjB,MAAO,+BACPC,MAAO,wBACPW,QAAS,UAEX,CACEO,KAAM,uBACNsf,MAAO,CACL,sBACA,UACA,qCAEFxf,kBAAmB,KACnBjB,MAAO,iCACPC,MAAO,sBACPW,QAAS,OAEX,CACEO,KAAM,qBACNsf,MAAO,CACL,wBACA,+BACA,8BACA,oBACA,8BAEFxf,kBAAmB,KACnBjB,MAAO,0BACPC,MAAO,sBACPW,QAAS,OAEX,CACEO,KAAM,SACNsf,MAAO,CACL,kBACA,cACA,yBACA,oBACA,8BACA,kBAEFxf,kBAAmB,KACnBjB,MAAO,2BACPC,MAAO,iBACPW,QAAS,SAEX,CACEO,KAAM,mBACNsf,MAAO,CACL,2BACA,uBACA,0BACA,0BACA,0BACA,uBACA,wBACA,2BAEFxf,kBAAmB,KACnBjB,MAAO,kBACPC,MAAO,sBACPW,QAAS,MAEX,CACEO,KAAM,UACNsf,MAAO,CACL,yBACA,mCACA,gCACA,kCACA,qDACA,qCACA,4CACA,oCACA,0CACA,qCACA,+CACA,4CACA,sBACA,sBAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,gBACPW,QAAS,UAEX,CACEO,KAAM,gBACNsf,MAAO,CACL,gBACA,oCACA,2CACA,8DACA,2BACA,qBACA,0BAEFxf,kBAAmB,KACnBjB,MAAO,iBACPC,MAAO,eACPW,QAAS,eAEX,CACEO,KAAM,UACNsf,MAAO,CACL,iDACA,4BACA,oBACA,mDACA,qDACA,qBACA,sBACA,oBACA,yBACA,UACA,iCACA,mCAEFxf,kBAAmB,KACnBjB,MAAO,2BACPC,MAAO,eACPW,QAAS,WAEX,CACEO,KAAM,YACNsf,MAAO,CAAC,8BACRxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,kBACPW,QAAS,WAEX,CACEO,KAAM,gBACNsf,MAAO,CACL,0CACA,mCACA,0FAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,wBACPW,QAAS,OAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,kBACA,mEACA,8EACA,oDACA,qDACA,sDAGA,kBACA,wBACA,0CACA,4CACA,uCACA,oBAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,oBACPW,QAAS,MAEX,CACEO,KAAM,aACNsf,MAAO,CACL,gCACA,yDACA,0BACA,cACA,wDACA,6BACA,2CACA,eACA,qBAEFxf,kBAAmB,MAErB,CACEE,KAAM,yCACNsf,MAAO,CACL,sCACA,uEACA,6CACA,wBAEFxf,kBAAmB,KACnBjB,MAAO,yBACPC,MAAO,gBACPW,QAAS,OAEX,CACEO,KAAM,iBACNsf,MAAO,CAAC,4BAA6B,UACrCxf,kBAAmB,KACnBjB,MAAO,0BACPC,MAAO,kBACPW,QAAS,UAEX,CACEO,KAAM,kBACNsf,MAAO,CAAC,oDACRxf,kBAAmB,KACnBjB,MAAO,m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ACA,oDACA,kCACA,qCACA,0CACA,uDACA,6DACA,eACA,8CACA,4BACA,eACA,mCACA,6DACA,aACA,yCACA,mEACA,gDACA,wCAEFxf,kBAAmB,KACnBjB,MAAO,gBACPC,MAAO,uBACPW,QAAS,OAEX,CACEO,KAAM,gBACNsf,MAAO,CAAC,yBAA0B,wBAClCzgB,MAAO,UACPY,QAAS,MACTK,kBAAmB,MAErB,CACEE,KAAM,aACNsf,MAAO,CACL,sEAEFzgB,MAAO,YACPiB,kBAAmB,MAErB,CACEE,KAAM,iBACNsf,MAAO,CAAC,cAAe,oBACvBxf,kBAAmB,KACnBjB,MAAO,QACPC,MAAO,qBACPW,QAAS,aAEX,CACEO,KAAM,aACNsf,MAAO,CACL,YACA,uBACA,4CACA,8BACA,2BACA,4CACA,0CACA,0BACA,mEACA,0DACA,0BAEFxf,kBAAmB,KACnBjB,MAAO,4BACPC,MAAO,iBACPW,QAAS,SAEX,CACEO,KAAM,UACNsf,MAAO,CACL,2BACA,oBACA,yBACA,oBACA,8CACA,+BACA,WACA,oBACA,4BACA,iFACA,oBACA,qBACA,mBACA,8BAEFxf,kBAAmB,KACnBjB,MAAO,gBACPC,MAAO,iBACPW,QAAS,SAEX,CACEO,KAAM,aACNsf,MAAO,CACL,sEAEFxf,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,6BACNsf,MAAO,CAAC,sCACRxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,0BACPW,QAAS,YAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,oDACA,6CAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,kBACPW,QAAS,SAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,wDACA,0BACA,0EACA,qDAEFxf,kBAAmB,KACnBjB,MAAO,qBACPC,MAAO,kBACPW,QAAS,OAEX,CACEO,KAAM,mBACNsf,MAAO,CACL,oEACA,2CACA,kCAEFxf,kBAAmB,KACnBjB,MAAO,wBACPC,MAAO,wBACPW,QAAS,SAEX,CACEO,KAAM,WACNsf,MAAO,CACL,qCACA,4CAEFxf,kBAAmB,KACnBjB,MAAO,cACPC,MAAO,mBACPW,QAAS,SAEX,CACEO,KAAM,mBACNsf,MAAO,CAAC,2BAA4B,2BACpCxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,wBACPW,QAAS,UAEX,CAIEO,KAAM,cACNsf,MAAO,CACL,qDACA,0DACA,yCAEA,iDACA,wDACA,8DACA,yDACA,8CACA,4CACA,kDACA,0DACA,sDACA,uDACA,8CACA,+EACA,+CACA,2DACA,uDACA,iDACA,8DACA,wDACA,yCACA,6CACA,yDACA,6DACA,2DACA,qDACA,sDACA,gDACA,iEACA,wDACA,0DACA,+CACA,oDACA,kDACA,yCACA,6CACA,gDACA,mEACA,qDACA,iDACA,2CACA,+CACA,uDACA,gEACA,wDACA,+CACA,+DAEA,2DAEA,+CAEFxf,kBAAmB,KACnBjB,MAAO,MACPC,MAAO,6CACPW,QAAS,UAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,2CACA,8BAEFxf,kBAAmB,MAErB,CACEE,KAAM,cACNsf,MAAO,CACL,gDACA,sBACA,kEAEFxf,kBAAmB,KACnBL,QAAS,MACTZ,MAAO,cAET,CACEmB,KAAM,YACNsf,MAAO,CAAC,cAAe,eAAgB,iBAEzC,CACEtf,KAAM,gBACNsf,MAAO,CACL,kDACA,4BACA,mDACA,wCACA,wBAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,sBACPW,QAAS,SAEX,CACEO,KAAM,eACNsf,MAAO,CACL,gEACA,wDACA,4DAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,uBACPW,QAAS,UAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,cACA,yDACA,oBAEFxf,kBAAmB,KACnBL,QAAS,SAEX,CAAEO,KAAM,mBAAoBsf,MAAO,CAAC,qCACpC,CACEtf,KAAM,YACNsf,MAAO,CACL,mEACA,gEACA,qFAGJ,CACEtf,KAAM,iBACNsf,MAAO,CACL,0CACA,iFACA,2CACA,mDACA,UACA,mCAEFxf,kBAAmB,KACnBjB,MAAO,OACPY,QAAS,OAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,2BACA,yBACA,2BACA,uEACA,sDACA,2DACA,6CACA,4CACA,2FACA,iDACA,qCACA,kBACA,mCACA,mBACA,kBACA,aACA,uBACA,wEACA,2BACA,eACA,0BACA,mCACA,mBACA,uBACA,+EACA,sEACA,6CACA,oDACA,yCAEFzgB,MAAO,OAEPC,MAAO,iBACPW,QAAS,OAEX,CAEEO,KAAM,eACNsf,MAAO,CACL,gEACA,4EACA,2DACA,kCACA,8EACA,mCACA,8DACA,qEAEA,8EACA,uEAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,WACPW,QAAS,UAEX,CACEO,KAAM,sBACNsf,MAAO,CACL,kCACA,+DACA,uDACA,wDAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,yBACPW,QAAS,WAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,mCACA,yCAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,eACPW,QAAS,UAEX,CACEO,KAAM,iBACNsf,MAAO,CAAC,6BAA8B,gBAExC,CACEtf,KAAM,iBACNsf,MAAO,CACL,8FACA,uCAGJ,CACEtf,KAAM,kBACNsf,MAAO,CAAC,+CAEV,CAAEtf,KAAM,QAASsf,MAAO,CAAC,iBACzB,CACEtf,KAAM,iBACNsf,MAAO,CACL,6BACA,mBACA,+EACA,aACA,mFAEFxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,wBACPW,QAAS,OAEX,CACEO,KAAM,mBACNsf,MAAO,CAEL,oCACA,iCACA,8BAEA,wCACA,wCAGA,gBACA,oCAEA,kCAEA,oCAEA,iCACA,gCACA,qCAEA,8BACA,YACA,sBAEA,qCACA,qCACA,iCACA,wCACA,iCACA,iCAEA,qCACA,kCACA,2CACA,aAEA,8BAEA,qEACA,gCACA,gCACA,iDAEA,8BACA,6BACA,kCAEFxf,kBAAmB,KACnBhB,MAAO,6BACPW,QAAS,OAEX,CACEO,KAAM,oBACNsf,MAAO,CAAC,2DACRxf,kBAAmB,KACnBjB,MAAO,OACPC,MAAO,cACPW,QAAS,OAEX,CACEO,KAAM,YACNsf,MAAO,CACL,0GAEFxf,kBAAmB,KACnBjB,MAAO,YACPY,QAAS,SAEX,CACEO,KAAM,gBACNsf,MAAO,CACL,oCACA,2EACA,sBAEF7f,QAAS,QACTK,kBAAmB,KACnBjB,MAAO,cAET,CACEmB,KAAM,iBACNsf,MAAO,CACL,yDACA,oEACA,yDACA,0DAEFxf,kBAAmB,MAErB,CACEE,KAAM,4BACNsf,MAAO,CACL,sCACA,sCACA,+CAGJ,CACEtf,KAAM,gBACNsf,MAAO,CACL,qBACA,mBACA,gBACA,yBACA,kFACA,qDACA,4DACA,oEACA,qDACA,sBACA,8BAEA,6CAEA,uBACA,sBACA,8CACA,4DACA,mCACA,uBAEFzgB,MAAO,gBACPC,MAAO,iBAET,CACEkB,KAAM,mBACNsf,MAAO,CACL,uBACA,WACA,kCACA,+BACA,gCAGJ,CACEtf,KAAM,6BACNsf,MAAO,CAAC,wCACRxf,kBAAmB,KACnBjB,MAAO,8BACPY,QAAS,OAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,mEACA,oEACA,qEACA,oEACA,4CAEFzgB,MAAO,aACPiB,kBAAmB,MAErB,CACEE,KAAM,cACNsf,MAAO,CACL,iCACA,+BACA,sBACA,sBACA,mBACA,oCACA,oCAEFxf,kBAAmB,KACnBjB,MAAO,qBACPC,MAAO,2BACPW,QAAS,OAEX,CACEO,KAAM,QACNsf,MAAO,CACL,+BACA,4EAEFzgB,MAAO,YACPC,MAAO,qBAGT,CACEkB,KAAM,gBACNsf,MAAO,CAAC,4CAA6C,sBACrDxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,cACPW,QAAS,UAEX,CACEO,KAAM,sBACNsf,MAAO,CACL,qCACA,SACA,mCACA,kCACA,2CACA,+BACA,+BACA,UACA,mBAEFxf,kBAAmB,KACnBjB,MAAO,qBACPC,MAAO,qBACPW,QAAS,QAEX,CACEO,KAAM,qBACNsf,MAAO,CACL,oDACA,oDACA,qDAEFxf,kBAAmB,MAErB,CACEE,KAAM,cACNsf,MAAO,CACL,kBACA,mBACA,wBACA,wBACA,oBACA,wBAEFxf,kBAAmB,KACnBjB,MAAO,wBACPC,MAAO,sBACPW,QAAS,WAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,UACA,mBACA,UACA,mBACA,eACA,QACA,gBAEFxf,kBAAmB,KACnBjB,MAAO,kBACPC,MAAO,gBACPW,QAAS,OAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,oCACA,0BACA,iCACA,iDAEFxf,kBAAmB,KACnBjB,MAAO,uBACPC,MAAO,2BACPW,QAAS,UAEX,CACEO,KAAM,QACNsf,MAAO,CAAC,uCACRxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,WACPW,QAAS,UAEX,CACEO,KAAM,mBACNsf,MAAO,CACL,+CACA,qBACA,oCACA,iCACA,+CACA,4BAEFxf,kBAAmB,KACnBjB,MAAO,yBACPC,MAAO,kBACPW,QAAS,OAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,qDACA,wFACA,uBACA,6CACA,iDACA,kEACA,0CAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,sBACPW,QAAS,MAEX,CACEO,KAAM,eACNsf,MAAO,CACL,wCACA,8CACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,wBACPC,MAAO,wBACPW,QAAS,UAEX,CACEO,KAAM,mBACNsf,MAAO,CACL,2CACA,yBACA,yCACA,8CACA,qDACA,oDACA,6CACA,iCACA,yDACA,gCACA,2DACA,qFACA,oDACA,0DACA,4EACA,8CACA,0BAEFxf,kBAAmB,KACnBjB,MAAO,wBACPC,MAAO,sBACPW,QAAS,UAEX,CACEO,KAAM,qBACNsf,MAAO,CACL,mCACA,sCACA,mCACA,0BACA,sDACA,yBACA,sCACA,8CACA,gCACA,4CAEFxf,kBAAmB,KACnBjB,MAAO,sBACPC,MAAO,sBACPW,QAAS,UAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,sBACA,mCACA,4BACA,6BACA,gCACA,wCACA,4CACA,oCACA,6BAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,uBACPW,QAAS,UAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,0BACA,sBACA,4BACA,OACA,iCAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,eACPW,QAAS,UAEX,CACEO,KAAM,SACNsf,MAAO,CACL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,CAAC,sBAClC,CACEtf,KAAM,iBACNsf,MAAO,CACL,2BACA,6BACA,2BACA,2DAEA,0BACA,2BACA,0BAEA,0BACA,2BAEFxf,kBAAmB,KACnBjB,MAAO,qBACPY,QAAS,UAEX,CACEO,KAAM,eACNsf,MAAO,CACL,0BACA,0BACA,wBACA,kCACA,0CACA,0BACA,4BACA,kCACA,sCACA,iCAEFspF,UAAW,CAAC,kBACZ/pG,MAAO,aACPiB,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,+BACA,iCACA,sCACA,oCACA,4BAEFspF,UAAW,CAAC,iBAEd,CACE5oG,KAAM,gBACNsf,MAAO,CACL,0CACA,mCACA,wDACA,2BACA,iBACA,oCACA,yBAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,qBACPW,QAAS,OAEX,CACEO,KAAM,iBACNsf,MAAO,CAAC,uCACRxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,qBACPW,QAAS,WAEX,CACEO,KAAM,yBACNsf,MAAO,CAAC,kBACRxf,kBAAmB,MAErB,CACEE,KAAM,gBACNsf,MAAO,CACL,qCACA,0EACA,0CACA,2CACA,wCACA,8BACA,oBACA,oFACA,wFACA,aACA,4CACA,+BACA,kCACA,gCACA,4EACA,wDAEFxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,wBACPW,QAAS,OAEX,CACEO,KAAM,oBACNsf,MAAO,CACL,oDACA,yCACA,iEAEFxf,kBAAmB,KACnBjB,MAAO,QACPC,MAAO,qCACPW,QAAS,OAEX,CACEO,KAAM,sBACNsf,MAAO,CACL,mEACA,6DAEFxf,kBAAmB,KACnBjB,MAAO,6BACPC,MAAO,8BACPW,QAAS,OAEX,CACEO,KAAM,cACNsf,MAAO,CACL,sBACA,sCACA,wBACA,oBACA,wBAEA,yBACA,6BACA,0BAEFxf,kBAAmB,KACnBjB,MAAO,OACPC,MAAO,0BACPW,QAAS,OAEX,CACEO,KAAM,mBACNsf,MAAO,CACL,kCACA,sBACA,sCACA,kCACA,+BACA,0BACA,sCACA,+CAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,yBACPW,QAAS,OAEX,CACEO,KAAM,qBACNsf,MAAO,CAEL,oCACA,4BACA,6BACA,kCACA,4CACA,2CACA,4BACA,+BACA,wCACA,oDACA,oCACA,uCACA,6CACA,6BAIA,wCACA,4BACA,wCACA,2CAGA,iCACA,kCACA,yCAEA,qDACA,+BAEA,kCACA,4CACA,mCAGA,8CACA,iCACA,sCACA,+CAEFxf,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,qCACNsf,MAAO,CACL,gGACA,kDACA,0CACA,0CACA,6CACA,iEAGJ,CACEtf,KAAM,kBACNsf,MAAO,CACL,yDACA,8BACA,gEACA,6BACA,2BACA,iCACA,2BACA,mCACA,4BACA,kCACA,8BACA,8CACA,iCACA,4BACA,sCACA,qCACA,4BACA,kBAEFxf,kBAAmB,KACnBjB,MAAO,gCACPY,QAAS,WAEX,CACEO,KAAM,2BACNsf,MAAO,CACL,wCACA,gDACA,4DACA,oCACA,8CAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,WACPW,QAAS,UAEX,CAAEO,KAAM,oBAAqBsf,MAAO,CAAC,kCACrC,CACEtf,KAAM,wBACNsf,MAAO,CACL,qCACA,0DACA,+CACA,+CAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,gBACPW,QAAS,UAEX,CACEO,KAAM,gBACNsf,MAAO,CACL,wDACA,+BACA,2CAEFxf,kBAAmB,KACnBjB,MAAO,WACPC,MAAO,WACPW,QAAS,WAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,2CACA,gCACA,wCACA,uBAEFxf,kBAAmB,KACnBjB,MAAO,kBACPC,MAAO,iBACPW,QAAS,WAEX,CACEO,KAAM,kBACNsf,MAAO,CACL,2DACA,iCACA,qCACA,mCACA,uCACA,8BACA,uCACA,sCACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,kBACPC,MAAO,qBACPW,QAAS,WAEX,CACEO,KAAM,oBACNsf,MAAO,CACL,uCACA,4DACA,oCACA,sCAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,WACPW,QAAS,UAEX,CACE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B,sBAAuB,aACtDxf,kBAAmB,KACnBjB,MAAO,kBACPC,MAAO,UACPW,QAAS,UAEX,CACEO,KAAM,eACNsf,MAAO,CACL,oDACA,wCACA,yCACA,kBACA,oEACA,iEACA,0CACA,mFACA,iFACA,sBACA,kDAEFxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,0BACPW,QAAS,OAEX,CACEO,KAAM,eACNsf,MAAO,CACL,iCACA,uFACA,0FAEFxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,aACPW,QAAS,OAEX,CACEO,KAAM,eACNsf,MAAO,CACL,4EACA,qDACA,8EACA,4BACA,sEACA,gCACA,gGACA,6BAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,wBACPW,QAAS,SAEX,CACEO,KAAM,cACNsf,MAAO,CACL,kEACA,kCACA,wCACA,2CACA,sCAEFxf,kBAAmB,KACnBjB,MAAO,gBACPC,MAAO,sBACPW,QAAS,WAEX,CACEO,KAAM,4BACNsf,MAAO,CACL,kBACA,uBACA,mDAEFxf,uBAAmBmM,EACnBpN,MAAO,YACPC,MAAO,qBACPW,aAASwM,GAEX,CACEjM,KAAM,kBACNsf,MAAO,CACL,yFACA,qDACA,iGACA,mDACA,sCACA,oDACA,+EAEFxf,kBAAmB,KACnBjB,MAAO,WACPC,MAAO,sBACPW,QAAS,WAEX,CACEO,KAAM,gBACNsf,MAAO,CACL,uCACA,sCACA,4BAEA,0BACA,gCAGA,gCACA,2BACA,mCACA,qCACA,gCAEFzgB,MAAO,UACPC,MAAO,iDAET,CACEkB,KAAM,YACNsf,MAAO,CACL,mBACA,qBACA,iBACA,4BACA,sBAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,aACPW,aAASwM,GAEX,CACEjM,KAAM,MACNsf,MAAO,CACL,sCACA,yCAEFxf,kBAAmB,KACnBjB,MAAO,kBACPC,MAAO,cACPW,QAAS,MAEX,CACEO,KAAM,8BACNsf,MAAO,CACL,+EAGJ,CACEtf,KAAM,mBACNsf,MAAO,CACL,aACA,sDACA,iCAEFxf,kBAAmB,KACnBjB,MAAO,UACPC,MAAO,YACPW,QAAS,WAEX,CACEO,KAAM,mCACNsf,MAAO,CACL,kBACA,6CACA,0BAEA,kCACA,2BACA,yBACA,oHAEFxf,kBAAmB,KACnBjB,MAAO,QACPC,MAAO,MACPW,QAAS,aAEX,CACEO,KAAM,iBACNsf,MAAO,CAAC,mCACRxf,kBAAmB,KACnBjB,MAAO,SACPC,MAAO,OACPW,QAAS,OAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,+DACA,6BACA,+EAEFxf,kBAAmB,KACnBjB,MAAO,WACPC,MAAO,YACPW,QAAS,UAEX,CACEO,KAAM,wBACNsf,MAAO,CACL,gEACA,kCACA,+BACA,6CAEFxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,yBACPW,QAAS,OAEX,CACEO,KAAM,aACNsf,MAAO,CACL,yCACA,mBACA,iCAEFxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,yBACPW,QAAS,MAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,qCACA,6BACA,4CACA,8BACA,8BAEFxf,kBAAmB,KACnBjB,MAAO,aACPC,MAAO,sBACPW,QAAS,OAEX,CACEO,KAAM,gBACNsf,MAAO,CACL,+DACA,sDACA,yDACA,0DACA,6DACA,6DACA,mBACA,4DACA,oCACA,qCACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,WACPC,MAAO,+BACPW,QAAS,OAEX,CAAEO,KAAM,UAAWsf,MAAO,IAC1B,CACEtf,KAAM,eACNsf,MAAO,CACL,6DACA,gCACA,sBACA,iEACA,yBACA,gDACA,mDACA,+CAEFxf,kBAAmB,KACnBjB,MAAO,cACPC,MAAO,aACPW,QAAS,SAEX,CAEEO,KAAM,aACNsf,MAAO,CACL,cACA,SACA,eACA,sBACA,gBACA,yCACA,QAEA,6CAEFxf,kBAAmB,KACnBjB,MAAO,WACPC,MAAO,YACPW,QAAS,UAEX,CACEO,KAAM,oBACNsf,MAAO,CACL,wCACA,6CACA,6CACA,8CACA,eACA,qBAGJ,CACEtf,KAAM,cACNsf,MAAO,CACL,+BACA,6BACA,qCACA,oBACA,iDAEFxf,kBAAmB,KACnBjB,MAAO,WACPY,QAAS,UAEX,CAGEO,KAAM,mBACNsf,MAAO,CACL,mDAEA,mCAEA,0EACA,oBACA,oDACA,gCACA,+CACA,6DACA,oDACA,iBACA,8CACA,0CACA,+CAEFxf,kBAAmB,KACnBhB,MAAO,YACPD,MAAO,uBAET,CACEmB,KAAM,UACNsf,MAAO,CACL,+CACA,oCACA,8DAEFxf,kBAAmB,KACnBjB,MAAO,WACPC,MAAO,yBACPW,QAAS,kBAEX,CACEO,KAAM,iBACNsf,MAAO,CACL,+BACA,kCACA,sCAGJ,CAAEtf,KAAM,qBAAsBsf,MAAO,CAAC,cACtC,CACEtf,KAAM,aACNsf,MAAO,CACL,qBACA,oBACA,mBACA,4BACA,sBAEFzgB,MAAO,aACPiB,kBAAmB,KACnBL,QAAS,UAEX,CACEO,KAAM,oBACNsf,MAAO,CACL,mDACA,0CAGJ,CACEtf,KAAM,eACNsf,MAAO,CACL,iBACA,kCACA,8BAEFxf,kBAAmB,KACnBjB,MAAO,mBACPC,MAAO,sBACPW,QAAS,OAEX,CACEO,KAAM,eACNsf,MAAO,CACL,gDACA,oDACA,iCAEFxf,kBAAmB,KACnBjB,MAAO,wBACPC,MAAO,wBACPW,QAAS,cAEX,CACEO,KAAM,qBACNsf,MAAO,CACL,iCACA,0CAGJ,CAAEtf,KAAM,iBAAkBsf,MAAO,CAAC,0BAClC,CACEtf,KAAM,gBACNsf,MAAO,CACL,0CACA,qCACA,2BACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,gCACPY,QAAS,OAEX,CACEO,KAAM,eACNsf,MAAO,CACL,oCACA,6BACA,uBACA,iCAEFxgB,MAAO,gBACPW,QAAS,OAEX,CACEO,KAAM,gBACNsf,MAAO,CACL,2BACA,UACA,+BACA,gBACA,gBACA,+BACA,kBACA,oCACA,WACA,qBACA,iBACA,oBACA,cACA,oBACA,sBACA,qBACA,sCACA,WACA,eACA,+BACA,oCAGA,qBACA,cACA,wBACA,qBACA,+BAEFxf,kBAAmB,KACnBjB,MAAO,kBACPY,QAAS,cAEX,CACEO,KAAM,YACNsf,MAAO,CACL,8CACA,aACA,4CAEFxf,kBAAmB,KACnBjB,MAAO,aACP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CA,wCACA,sCAGA,sCACA,sCACA,sCACA,sCAGA,wCACA,sCACA,wCACA,wCACA,yCAEFxf,kBAAmB,KACnBjB,MAAO,YACPY,QAAS,WAGX,CACEO,KAAM,eACNsf,MAAO,CAAC,+BACRxf,kBAAmB,KACnBjB,MAAO,OACPC,MAAO,8BACPW,QAAS,OAEX,CACEO,KAAM,sBACNsf,MAAO,CACL,mDACA,yCACA,mEACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,OACPC,MAAO,2BACPW,QAAS,cAEX,CAEEO,KAAM,SACNsf,MAAO,CACL,+DACA,iDACA,wDACA,6DACA,oFAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,WACPW,QAAS,kBAEX,CAEEO,KAAM,YACNsf,MAAO,CACL,+CAEA,mDACA,qDACA,8GACA,mDACA,yBACA,4CACA,8CACA,kCACA,uCACA,mDACA,uCACA,qCACA,6BACA,6BAEA,sEACA,WAEA,yFACA,iDACA,mDACA,oDACA,iDACA,mCAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,WACPW,QAAS,WAEX,CACEO,KAAM,UACNsf,MAAO,CACL,gDACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,iCACPW,QAAS,SAEX,CACEO,KAAM,qBACNsf,MAAO,CAAC,2DAEV,CACEtf,KAAM,OACNsf,MAAO,CACL,gDACA,iBACA,gBACA,aACA,oBACA,sBACA,uBACA,sBACA,mBACA,mBACA,2DACA,qBACA,wBACA,oBACA,kBACA,oBACA,aACA,gBACA,kBACA,kBACA,yBACA,yBACA,mCACA,gBACA,sCACA,kBACA,kBACA,kBACA,4BACA,eACA,4BACA,yBACA,6BACA,wCACA,0BACA,mBACA,uDACA,eACA,oCACA,qBACA,uBACA,sBACA,wBACA,wBACA,kFACA,uBACA,gBACA,cACA,oBACA,eACA,6CACA,WACA,YACA,uBACA,oBACA,aACA,sBACA,cACA,gBACA,gBACA,gBACA,kBACA,+BACA,kBACA,wBACA,cACA,cACA,wBACA,sBACA,kBACA,iBACA,mBACA,gBACA,gBACA,sBACA,0BACA,kCACA,uBACA,sBACA,aACA,eACA,eACA,cACA,kBACA,iBACA,mBACA,mBACA,mBACA,wBACA,8BACA,4BACA,+BACA,4BACA,8BACA,qBACA,0BACA,eACA,qBACA,sBACA,kCACA,wBACA,gBACA,qCACA,4CACA,sBACA,qBACA,iBACA,qBACA,mBACA,kBACA,oBACA,oBACA,oBACA,gBACA,gBACA,8BACA,oBACA,uBACA,YACA,6BACA,UACA,YACA,WACA,aACA,0BACA,iBACA,iBAEF7f,QAAS,YAEX,CACEO,KAAM,qBACNsf,MAAO,CAAC,6DACRxf,kBAAmB,KACnBL,QAAS,UACTZ,MAAO,YACPC,MAAO,YAET,CACEkB,KAAM,kBACNsf,MAAO,CACL,yEACA,oEAEFxf,kBAAmB,KACnBhB,MAAO,eAET,CACEkB,KAAM,eACNsf,MAAO,CACL,0CACA,qCAEFxf,kBAAmB,KACnBjB,MAAO,mBACPY,QAAS,MAEX,CACEO,KAAM,wBACNsf,MAAO,CACL,+BACA,+DAEFxf,kBAAmB,KACnBL,QAAS,eACTZ,MAAO,YACPC,MAAO,QAET,CACEkB,KAAM,eACNsf,MAAO,CACL,oCACA,oCAGJ,CACEtf,KAAM,aACNsf,MAAO,CAEL,iCACA,qCACA,oCACA,+BAGA,8BACA,kCACA,kCACA,2BACA,yBACA,gCAGA,6BACA,2BACA,iCAEFzgB,MAAO,UACPiB,kBAAmB,MAErB,CACEE,KAAM,iBACNsf,MAAO,CACL,mBACA,gBACA,uCACA,qBACA,kCACA,eACA,iEAEA,8DACA,yBACA,eACA,wCACA,iBACA,2BACA,sBACA,iCACA,qBACA,iBACA,yBACA,mCACA,2BACA,eACA,kBAGJ,CACEtf,KAAM,qBACNsf,MAAO,CACL,wDACA,4CACA,6BACA,2CACA,2CACA,4CACA,4EACA,sEACA,4EACA,sCACA,sCACA,mEACA,gBACA,mBACA,uEACA,mCACA,eACA,iDACA,oDACA,wCACA,uCACA,oBACA,qCACA,kEACA,0BACA,qBACA,0DACA,sDACA,UAEFxf,kBAAmB,KACnBjB,MAAO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AET,CACEmB,KAAM,aACNsf,MAAO,CACL,mCACA,uCACA,8BACA,iBACA,mCACA,gBACA,2DACA,mCACA,mCAEFxf,kBAAmB,KACnBjB,MAAO,mBACPY,QAAS,SAEX,CACEO,KAAM,kBACNsf,MAAO,CAAC,yBAA0B,8BAClCxf,kBAAmB,KACnBL,QAAS,MACTZ,MAAO,QAET,CAAEmB,KAAM,QAASsf,MAAO,CAAC,mBAAoB,uBAC7C,CACEtf,KAAM,eACNsf,MAAO,CACL,6BACA,iDACA,uBACA,YACA,4EAGJ,CACEtf,KAAM,cACNsf,MAAO,CACL,eACA,2BACA,4BACA,4BACA,yCAGJ,CAAEtf,KAAM,cAAesf,MAAO,CAAC,wCAC/B,CAAEtf,KAAM,QAASsf,MAAO,CAAC,kBAAmB,+BAC5C,CACEtf,KAAM,cACNsf,MAAO,CACL,aACA,mDACA,4DACA,wBACA,2DAGJ,CACEtf,KAAM,gBACNsf,MAAO,CACL,oCACA,sCACA,0BACA,4DACA,4CAGJ,CACEtf,KAAM,cACNsf,MAAO,CACL,2CACA,2FAGJ,CACEtf,KAAM,cACNsf,MAAO,CACL,kBACA,gCACA,gCACA,gCACA,iEACA,kCAGJ,CACEtf,KAAM,cACNsf,MAAO,CACL,+CACA,4CACA,iDACA,iDACA,yDACA,mBACA,oBACA,uCACA,cACA,gCACA,wCAEA,qDAGJ,CACEtf,KAAM,sBACNsf,MAAO,CACL,2BACA,mCACA,sBACA,kCAEA,kEACA,gCACA,uCAGJ,CACEtf,KAAM,gBACNsf,MAAO,CACL,sBACA,kCACA,gCACA,gCACA,8BACA,sCAGJ,CACEtf,KAAM,QACNsf,MAAO,CACL,0BACA,0EACA,oCAEFspF,UAAW,CAAC,sBACZ9oG,kBAAmB,KACnBL,QAAS,UAEX,CACEO,KAAM,eACNsf,MAAO,CACL,sBACA,kCACA,uCACA,mBACA,0BACA,mCACA,wBACA,2BACA,4BACA,gEAEFxf,kBAAmB,MAErB,CACEE,KAAM,oBACNsf,MAAO,CACL,wBACA,6CACA,+BACA,6CACA,yEAGJ,CACEtf,KAAM,MACNsf,MAAO,CACL,+BACA,qDACA,yCACA,gBACA,qCACA,sBACA,0CACA,qBACA,YAEFzgB,MAAO,OACPiB,kBAAmB,KACnBL,QAAS,UAEX,CACEO,KAAM,gBACNsf,MAAO,CAAC,0DAEV,CACEtf,KAAM,aACNsf,MAAO,CACL,+BACA,sCACA,mCACA,uBACA,sCACA,2BAEF7f,QAAS,MACTK,kBAAmB,MAErB,CACEE,KAAM,qBACNsf,MAAO,CACL,wBACA,+BACA,yBACA,uHACA,uBACA,6BACA,qDAEF7f,QAAS,QACTK,kBAAmB,MAErB,CACEE,KAAM,kBACNsf,MAAO,CACL,iCACA,kEACA,qCAEFxf,kBAAmB,KACnBL,QAAS,SAEX,CAAEO,KAAM,UAAWsf,MAAO,CAAC,gCAC3B,CACEtf,KAAM,gBACNsf,MAAO,CACL,4CACA,6EAGJ,CACEtf,KAAM,aACNsf,MAAO,CACL,2DACA,uDACA,kFACA,iHACA,qCACA,6DAEFxf,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,aACNsf,MAAO,CACL,2CACA,2BACA,sBACA,4BAEFxf,kBAAmB,KACnBL,QAAS,MACTZ,MAAO,YAET,CACEmB,KAAM,iBACNsf,MAAO,CACL,4EACA,uBACA,yCACA,yBACA,gDAGJ,CACEtf,KAAM,iBACNsf,MAAO,CAAC,0CACRxf,kBAAmB,KACnBL,QAAS,aACTmpG,UAAW,CAAC,oBAEd,CACE5oG,KAAM,MACNsf,MAAO,CACL,+CACA,aACA,mBACA,uBACA,aACA,gCACA,gBAGJ,CACEtf,KAAM,YACNsf,MAAO,CACL,iBACA,qBACA,qBACA,mCAGJ,CACEtf,KAAM,aACNsf,MAAO,CACL,yFACA,eAGJ,CACEtf,KAAM,iBACNsf,MAAO,CACL,2BACA,cACA,cACA,UACA,YAEFzgB,MAAO,YAET,CACEmB,KAAM,mBACNsf,MAAO,CACL,sCACA,0DACA,uCAGJ,CACEtf,KAAM,eACNsf,MAAO,CACL,2BACA,0BACA,0BACA,6BACA,sCACA,2BACA,4BACA,gCACA,iCACA,8BACA,2BACA,oCACA,2DAEFspF,UAAW,CAAC,iBAEd,CACE5oG,KAAM,aACNsf,MAAO,CACL,iDACA,sBACA,uEACA,2BACA,uCACA,sBACA,kBACA,8BACA,0BACA,yBACA,iCACA,6CACA,oFACA,2CACA,oBACA,4BACA,wCACA,sCACA,oBACA,iBACA,6BACA,kCACA,iBACA,gBACA,yBACA,eACA,uBACA,8BACA,WACA,sCACA,mBACA,0BACA,0BACA,6BACA,2BACA,4BACA,gCACA,oCACA,oCACA,wBACA,qEACA,4BACA,mBACA,uDACA,OACA,4BACA,sCAGJ,CACEtf,KAAM,kBACNsf,MAAO,CACL,4CACA,4CACA,0EACA,wEACA,iEACA,sHACA,wCACA,iCAGJ,CACEtf,KAAM,sBACNsf,MAAO,CACL,mCACA,kCACA,4CACA,8CACA,6CAGJ,CACEtf,KAAM,EAAA6L,uBACN4uE,SAAU,UACVn7D,MAAO,CACL,qBACA,6DACA,aACA,yBACA,WACA,2CACA,yBACA,uCACA,iCACA,4CAEA,aACA,eACA,yCACA,mBACA,0CACA,6BACA,kCACA,qBACA,+BACA,6BAEA,6CACA,kBACA,wDACA,mBACA,sBACA,2DACA,qBACA,kBACA,qBACA,iCAEA,kEACA,kCACA,gEACA,iDACA,wBACA,wBACA,+BACA,wBACA,mBACA,sBAEA,2DACA,uBAEA,aACA,0BACA,oCACA,sBACA,2BACA,oCAEA,oBAEA,oCACA,8BACA,4BACA,wBACA,0CACA,4CACA,uBACA,gDACA,4CACA,+CAEA,0CACA,wCACA,aACA,mCACA,aACA,+BAEA,aACA,2CACA,2BACA,yCAEA,sBACA,gBACA,4EACA,2CACA,iBACA,0BACA,gCACA,4BACA,mCACA,sBAEA,iCACA,sDACA,gBACA,2BACA,gCACA,4BACA,4CACA,mCACA,sCACA,qBAEA,kBACA,mCACA,yFACA,wBACA,oDACA,8BACA,gCACA,oBACA,gDACA,gCACA,qBAGJ,CACEtf,KAAM,OACNsf,MAAO,CACL,sCACA,0CAGJ,CACEtf,KAAM,QACNsf,MAAO,CACL,+CACA,mDACA,mCACA,gCAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,WACPW,QAAS,oBAEX,CACEO,KAAM,gBACNsf,MAAO,CAAC,wBAAyB,wBACjCxf,kBAAmB,KACnBjB,MAAO,MACPY,QAAS,OAEX,CACEO,KAAM,WACNsf,MAAO,CACL,wCACA,uCACA,6BACA,0BACA,gCACA,qCACA,0CACA,uBACA,qBAEA,kDACA,4BACA,2CACA,wBACA,iCACA,4BAEFxf,kBAAmB,KACnBjB,MAAO,mBACPY,QAAS,OAEX,CACEO,KAAM,aACNsf,MAAO,CACL,8BACA,wBACA,wBACA,0BAEFxf,kBAAmB,KACnBjB,MAAO,YACPC,MAAO,WACPW,QAAS,UAEX,CACEO,KAAM,aACNsf,MAAO,CACL,0BACA,wBACA,uDACA,sBAEFxf,kBAAmB,KACnBjB,MAAO,MACPY,QAAS,MAEX,CACEO,KAAM,4CACNsf,MAAO,CACL,uDACA,6BAIJ,CACEtf,KAAM,gBACNsf,MAAO,CACL,eACA,wBACA,wCAEFxf,kBAAmB,KACnBjB,MAAO,wCACPY,QAAS,OAEX,CACEO,KAAM,mBACNsf,MAAO,CACL,kEACA,mEACA,4EACA,6DACA,wEACA,mEACA,oEACA,mEACA,qEACA,kEAEA,wCACA,qCAEFxf,kBAAmB,KACnBL,QAAS,OAEX,CACEO,KAAM,mBACNsf,MAAO,CACL,iDACA,oDAEFxf,kBAAmB,KACnBL,QAAS,OAEX,CACEO,KAAM,YACNsf,MAAO,CACL,YACA,yDACA,4FACA,uBAEFxf,kBAAmB,KACnBL,QAAS,QACTZ,MAAO,cAET,CACEmB,KAAM,0CACNsf,MAAO,CACL,0BACA,gGACA,0EACA,iFAEFxf,kBAAmB,KACnBjB,MAAO,kBACPY,QAAS,OAEX,CACEO,KAAM,eACNsf,MAAO,CACL,eACA,gDACA,mCACA,sBACA,8BAGJ,CACEtf,KAAM,aACNsf,MAAO,CACL,oCACA,mBACA,4DAEFxf,kBAAmB,KACnBjB,MAAO,aACPY,QAAS,OAEX,CACEO,KAAM,YACNsf,MAAO,CACL,oFACA,yBAEFxf,kBAAmB,KACnBjB,MAAO,mBACPY,QAAS,SAEX,CACEO,KAAM,gBACNsf,MAAO,CACL,uBACA,yBACA,qCACA,+BACA,8BACA,sCAEFxf,kBAAmB,KACnBL,QAAS,YACTZ,MAAO,SAET,CACEmB,KAAM,aACNsf,MAAO,CAAC,eAAgB,4BACxBxf,kBAAmB,KACnBjB,MAAO,WACPY,QAAS,WAEX,CACEO,KAAM,+BACNsf,MAAO,CACL,wBACA,qEACA,4CAEFxf,kBAAmB,KACnBL,QAAS,OAEX,CACEO,KAAM,eACNsf,MAAO,CAAC,YAAa,wBACrBxf,kBAAmB,KACnBL,QAAS,MACTZ,MAAO,QAET,CACEmB,KAAM,iBACNsf,MAAO,CACL,gEACA,8DACA,2CACA,gCAGJ,CACEtf,KAAM,SACNsf,MAAO,CACL,8BACA,wBACA,8BACA,8BACA,kCACA,eACA,iBACA,kDACA,4BACA,iDAEFxf,kBAAmB,MAErB,CACEE,KAAM,iBACNsf,MAAO,CAAC,mDACRxf,kBAAmB,MAErB,CACEE,KAAM,iBACNsf,MAAO,CAAC,8CAEV,CACEtf,KAAM,eACNsf,MAAO,CACL,8FAGJ,CACEtf,KAAM,gBACNsf,MAAO,CACL,wBACA,2BACA,mDACA,0BACA,+BACA,2BAEA,8BACA,oCAEFxf,kBAAmB,MAErB,CACEE,KAAM,uBACNsf,MAAO,CACL,2CACA,kDACA,gCACA,qCACA,oCAGJ,CACEtf,KAAM,mBACNsf,MAAO,CACL,YACA,eACA,0BACA,wDACA,gCACA,oFACA,oCACA,0CACA,uBACA,sFAEA,eACA,mCACA,wBACA,yCACA,0CACA,wCACA,YACA,iCACA,gBACA,oBAEA,mBACA,uBACA,0BACA,mBACA,mBACA,eACA,kDACA,wCACA,qEACA,cAEA,mEACA,kCACA,UACA,uDACA,kCACA,6BACA,gCACA,gDACA,yBACA,yCAEA,uCACA,2BACA,oBACA,8BACA,gEACA,iEACA,2BACA,4BACA,oDACA,+CAEA,sEACA,qBACA,4CACA,wCACA,gCACA,2CACA,gCACA,wCACA,+DACA,8BAEA,aACA,2CACA,wCACA,mCACA,4BACA,gDACA,8BACA,qDACA,sDACA,wBACA,gDAEA,2BACA,oBACA,6DACA,WACA,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,CACEtf,KAAM,gBACNsf,MAAO,CACL,qBACA,iCACA,qBACA,wCACA,2DACA,uBACA,0BACA,yBACA,2CACA,mCACA,gCACA,4BACA,6BACA,kCACA,sBACA,sBACA,wDACA,oCACA,yBACA,+DACA,gDACA,gBACA,8BACA,wBACA,kBACA,kCACA,yBACA,6CACA,oFACA,6BACA,qCACA,YACA,uBACA,4CACA,4CACA,mEACA,+BACA,6BACA,qDACA,0DACA,yCACA,mDACA,wCACA,uBACA,6BACA,2EACA,2EACA,+BACA,2BACA,wCACA,2BACA,6BACA,2BACA,0BACA,oCACA,4BACA,6BACA,4BACA,oDACA,4CACA,wCACA,4BACA,wCACA,uCACA,2CACA,+BACA,6CACA,6BACA,kCACA,sEACA,oCACA,sBACA,qBACA,wBACA,yBACA,uBACA,YACA,+BACA,4CACA,mBACA,6BACA,6BACA,qCACA,iBACA,6BACA,2CACA,kCACA,wCACA,qEACA,6DACA,0BACA,gDACA,+BACA,yBACA,yBACA,uBACA,cACA,eACA,+BACA,kBACA,cACA,+BACA,gBACA,8BACA,WACA,wCACA,WACA,6CACA,2BACA,YACA,oCACA,mDACA,gCACA,sBACA,kCACA,uCACA,wBACA,uBACA,6BACA,uBACA,iBACA,qBACA,qBACA,2BACA,4BACA,iCACA,2BACA,oCACA,4CACA,0EACA,4CACA,yCACA,6CACA,uBACA,oCACA,oCACA,uBACA,4BACA,qCACA,0BACA,oCACA,mBACA,2DACA,eACA,2BACA,qEACA,2CACA,2BACA,mDACA,0BACA,+BACA,8BACA,gCACA,oBACA,uBACA,mBACA,2BACA,2BACA,sBACA,uCACA,qDACA,qBACA,mBACA,gDACA,4BACA,eACA,mBACA,SACA,iDACA,8CACA,uCACA,4CACA,gBACA,qBACA,oCACA,2BACA,qEAGJ,CACEtf,KAAM,UACNsf,MAAO,CACL,qBACA,oBACA,wDACA,+BACA,gBACA,0BACA,+BACA,aACA,mCACA,8DACA,sBACA,4BACA,yBACA,6CACA,yBACA,sDACA,4CACA,sCACA,OACA,0CACA,0BACA,oCACA,kCACA,4DACA,6EACA,yBACA,0CACA,yFACA,kCACA,mCACA,8DACA,mBACA,wDACA,yCACA,sCACA,iCACA,4CACA,wCACA,2CACA,mCACA,kCACA,wCACA,sCACA,iDACA,gCACA,gCACA,gBACA,uCACA,kBACA,sBACA,4CACA,iBACA,wBACA,eACA,2BACA,4CACA,8CACA,6CACA,mHACA,yBACA,2BACA,uCACA,gDACA,4CACA,oCACA,oDACA,+CACA,+EACA,oCACA,oCACA,eACA,wCACA,oBACA,yBACA,2BACA,wBACA,yCACA,iEACA,gCACA,8CACA,8CACA,oCACA,gBACA,qCACA,6BACA,oBACA,gBACA,sBACA,kCACA,8BACA,2BACA,sBACA,mEACA,eACA,gCACA,iCACA,qCACA,8BAGJ,CACEtf,KAAM,eACNsf,MAAO,CACL,sBACA,4BACA,yBACA,UACA,cACA,sCACA,sCACA,qDACA,gEACA,6CACA,mCACA,iBACA,uBACA,iCACA,8BACA,2BACA,iDACA,yCACA,eACA,qCACA,+CACA,iCACA,sBACA,4DACA,gEACA,0BACA,yCACA,6CACA,4BACA,4CACA,oCACA,wCACA,gCACA,qJACA,sCACA,+BACA,2BACA,0BACA,0BACA,oBACA,qDACA,UACA,aACA,wBACA,kDACA,kCACA,mCACA,aACA,yCACA,8CACA,oBACA,yCACA,sDACA,+CACA,iCACA,iCACA,yCACA,0BACA,gCACA,kCACA,qBACA,uCACA,sCACA,4BACA,mBACA,iBACA,4BACA,sCACA,4CACA,8BACA,0DACA,mDACA,+BACA,kCACA,YACA,mEACA,6DACA,6CACA,qEACA,mEACA,4FACA,mBACA,wBACA,mBACA,2CACA,uCACA,uCACA,sCACA,sCACA,sCACA,wCACA,oDACA,4BACA,sBACA,cACA,sCACA,eACA,qCACA,4BACA,2DACA,wBACA,qBACA,oBACA,kBACA,iCACA,8DACA,yBACA,mBACA,cACA,gCACA,uBACA,uHACA,iCACA,8BACA,iEA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","file":"static/js/main.c12d5924.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([280,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// MIDI note numbers\nexport const C3 = 48;\n\n// Timing constants\nexport const TICKS_PER_QUARTER = 128;\nexport const MEASURE_LENGTH = TICKS_PER_QUARTER * 4;\n\n// Default values\nexport const DEFAULT_VELOCITY = 100;\nexport const DEFAULT_NOTE_DURATION_PADDING = 10; // How much shorter than the full duration notes should be\n\n// Octave adjustments\nexport const CHORD_OCTAVE_ADJUSTMENTS = {\n  vi: -12,\n  bVI: -12,\n} as const;\n","import { flag } from \"country-emoji\";\nimport * as React from \"react\";\nimport { ReactNode } from \"react\";\nimport styled from \"styled-components\";\n\nexport const Flags = styled.span`\n  display: inline-flex;\n  align-items: center;\n  margin-right: 4px;\n`;\n\nexport const GenreList = styled.div`\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  color: #999;\n`;\n\nexport const GenreItem = styled.span`\n  cursor: default;\n`;\n\nexport const getUniqueStyles = (genre?: string, style?: string): string[] => {\n  const styles = new Set<string>();\n  if (genre) {\n    genre\n      .split(\",\")\n      .map((s) => s.trim())\n      .forEach((s) => styles.add(s));\n  }\n  if (style) {\n    style\n      .split(\",\")\n      .map((s) => s.trim())\n      .forEach((s) => styles.add(s));\n  }\n  return Array.from(styles);\n};\n\nexport const getEmojis = (country?: string): ReactNode[] => {\n  if (!country) return [];\n  const countries = country.split(\",\").map((c) => c.trim());\n  return countries.map((c) => <Flags key={c}>{flag(c)}</Flags>);\n};\n\nexport interface HasMetadata {\n  composerBirthYear?: number;\n  country?: string;\n  genre?: string;\n  style?: string;\n}\n\nexport const hasMetadata = (corpus: HasMetadata): boolean => {\n  return Boolean(\n    corpus.composerBirthYear || corpus.country || corpus.genre || corpus.style,\n  );\n};\n\nexport const formatComposerName = (slug: string): string => {\n  return slug\n    .split(\"_\")\n    .map((word) =>\n      word\n        .split(\"-\")\n        .map((part) => part.charAt(0).toUpperCase() + part.slice(1))\n        .join(\"-\"),\n    )\n    .join(\" \");\n};\n","import {\n  faClockRotateLeft,\n  faGlobe,\n  faHouse,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { Redirect, useHistory, useLocation, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { slugify } from \"transliteration\";\nimport { AppContext } from \"../../AppContext\";\nimport { Snippet } from \"../analysis\";\nimport { NewTonicSymbol } from \"../AnalysisGrid\";\nimport { RelatedCorporaDisplay } from \"../CompositionTitle\";\nimport { MUSESCORE_TOP_100_SLUG } from \"../corpora/corpora\";\nimport { CorpusLink } from \"../corpora/CorpusLink\";\nimport ChordStairs from \"../legends/ChordStairs\";\nimport { FoldablePianoLegend } from \"../legends/PianoLegend\";\nimport SnippetList from \"../SnippetList\";\nimport { NARRATIVES } from \"../SongNarrative\";\nimport { Toggle } from \"../Toggle\";\nimport { TOP_100_COMPOSERS } from \"../top100Composers\";\nimport { BEYOND_CHAPTER_GROUPS, BEYOND_CHAPTERS } from \"./beyondChapters\";\nimport {\n  CHAPTER_GROUPS,\n  CHAPTERS,\n  DOUBLE_TONIC_CHAPTER_TITLE,\n  MODULATIONS_CHAPTER_TITLE,\n  s,\n} from \"./chapters\";\n\nconst NAV_HORIZONTAL_GAP = 15;\nconst NAV_CHORD_STAIRS_SCALE = 0.6;\n\ntype EnhancedSnippet = Snippet & {\n  composerSlug: string;\n};\n\nconst BookContainer = styled.div`\n  width: 97%;\n  padding: 20px;\n  color: #fff;\n  margin: 0 auto 100px auto;\n  position: relative;\n`;\n\nconst Title = styled.h1`\n  font-size: 24px;\n  color: #fff;\n`;\n\nconst GroupContainer = styled.div`\n  margin-bottom: 80px;\n`;\n\nconst ComposersGrid = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 40px;\n  margin-bottom: 30px;\n`;\n\nconst ComposerItem = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`;\n\nconst ComposerLink = styled.a`\n  color: #fff;\n  text-decoration: none;\n  cursor: pointer;\n  display: inline;\n`;\n\nconst ComposerWrapper = styled.div`\n  transition: all 0.3s ease;\n  padding: 4px 0px;\n  border-radius: 4px;\n`;\n\nconst SnippetContainer = styled.div`\n  margin: 0px 30px 30px 0px;\n`;\n\nconst ComposerList = styled.ul`\n  list-style: none;\n  padding-left: 0;\n  margin: 0;\n`;\n\nconst ComposerListItem = styled.li`\n  margin-left: 0;\n  white-space: nowrap;\n  transition: all 0.3s ease;\n  padding: 4px 0px;\n  border-radius: 4px;\n`;\n\nconst ChapterSelector = styled.div.attrs({ className: \"ChapterSelector\" })`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 10px ${NAV_HORIZONTAL_GAP}px;\n  padding: 0;\n  margin: 0;\n  overflow: visible;\n`;\n\nconst ChapterTitleTooltip = styled.div<{\n  isSelected?: boolean;\n  isHovered?: boolean;\n}>`\n  background: rgba(0, 0, 0, 0.9);\n  padding: 0px 8px;\n  white-space: nowrap;\n  pointer-events: none;\n  z-index: ${(props) => {\n    return props.isHovered ? 20000 : 10000;\n  }};\n  opacity: ${(props) => {\n    return props.isSelected || props.isHovered ? 1 : 0;\n  }};\n  color: #fff;\n`;\n\nconst ChapterButton = styled.button<{ isSelected: boolean }>`\n  background: black;\n  color: white;\n  cursor: pointer;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  padding: 0;\n  border-radius: 0;\n  overflow: visible;\n  height: 80px;\n  overflow: visible;\n\n  ${ChapterTitleTooltip} {\n    position: absolute;\n    top: 55px;\n    left: 50%;\n    transform: translateX(-50%);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 25px;\n    white-space: nowrap;\n  }\n\n  &:hover {\n    ${ChapterTitleTooltip} {\n      display: flex;\n    }\n  }\n`;\n\nconst NavChordWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: black;\n  position: relative;\n  height: 60px;\n  width: 100%;\n`;\n\nexport const ReadableTextBlock = styled.div`\n  min-width: 43em;\n  width: 43em;\n  color: #fff;\n  border-radius: 10px;\n  margin: 20px 0px 100px 0px;\n  position: relative;\n`;\n\nconst ComposerListColumn = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 0 3em;\n  font-size: 13px;\n  align-items: start;\n  align-content: flex-start;\n  justify-content: start;\n  min-width: 15em;\n`;\n\nconst TwoColumnLayout = styled.div`\n  display: flex;\n  gap: 3em;\n  margin: 0px 0px 100px 0px;\n  min-width: 43em;\n\n  @media (max-width: ${43 + 10 + 3}em) {\n    ${ComposerListColumn} {\n      display: none;\n    }\n  }\n`;\n\nexport const ComposerTitle: React.FC<{\n  composer: string;\n  displayTitle: string;\n  isVocal?: boolean;\n  style?: React.CSSProperties;\n}> = ({ composer, displayTitle, isVocal, style }) => (\n  <span style={style}>\n    <span style={{ color: \"#999\" }}>{composer}. </span>\n    <span style={{ color: \"#fff\" }}>\n      {displayTitle}\n      {/* {isVocal && <span style={{ marginLeft: \"4px\" }}></span>} */}\n    </span>\n  </span>\n);\n\nconst getChapterSlug = (chapter: string) => slugify(chapter.toLowerCase());\n\nexport const CompositionLink: React.FC<{\n  composer: (typeof TOP_100_COMPOSERS)[number];\n  onLinkClick?: (e: React.MouseEvent<HTMLAnchorElement>) => void;\n  showNarrativeIcon?: boolean;\n}> = ({ composer, onLinkClick, showNarrativeIcon = false }) => {\n  return (\n    <ComposerLink\n      href={`/f/${composer.slug}`}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      onClick={onLinkClick}\n    >\n      <ComposerTitle\n        composer={composer.composer}\n        displayTitle={composer.displayTitle}\n        isVocal={composer.isVocal}\n      />\n      {showNarrativeIcon && NARRATIVES[composer.slug] && (\n        <span style={{ marginLeft: \"12px\", color: \"#999\" }}>\n           {NARRATIVES[composer.slug].qa.length}\n        </span>\n      )}\n    </ComposerLink>\n  );\n};\n\nconst ChapterGroup = styled.div<{ isActive: boolean; hideHeader?: boolean }>`\n  display: inline-flex;\n  flex-direction: column;\n  width: fit-content;\n  min-width: min-content;\n  overflow: visible;\n\n  .group-header {\n    white-space: nowrap;\n    text-align: center;\n    color: ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n    font-size: 14px;\n    padding-bottom: 12px;\n    position: relative;\n    transition: color 0.3s ease;\n    width: 100%;\n    overflow: visible;\n    visibility: ${(props) => (props.hideHeader ? \"hidden\" : \"visible\")};\n\n    &::after {\n      content: \"\";\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      height: 8px;\n      border-top: 1px solid ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n      border-left: 1px solid ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n      border-right: 1px solid ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n      transition: border-color 0.3s ease;\n      visibility: ${(props) => (props.hideHeader ? \"hidden\" : \"visible\")};\n    }\n  }\n\n  .group-content {\n    display: flex;\n    flex-wrap: nowrap;\n    gap: ${NAV_HORIZONTAL_GAP}px;\n    overflow: visible;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n\n    &::-webkit-scrollbar {\n      display: none;\n    }\n  }\n`;\n\nconst findChapterForComposer = (\n  composerSlug: string,\n  chapters: typeof CHAPTERS,\n): string | null => {\n  return (\n    chapters.find((chapter) => chapter.composers.includes(composerSlug))\n      ?.title ?? null\n  );\n};\n\nconst ChapterArrow = styled.div`\n  position: absolute;\n  bottom: -20px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 1px;\n  height: 20px;\n  background: #666;\n  pointer-events: none;\n\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 0%;\n    left: 50%;\n    transform: translateX(-50%);\n    border-left: 3px solid transparent;\n    border-right: 3px solid transparent;\n    border-bottom: 4px solid #666;\n  }\n`;\n\nconst ModeToggle = styled.div`\n  position: absolute;\n  top: 0px;\n  right: 0px;\n`;\n\nconst Book: React.FC = () => {\n  const { slug } = useParams<{ slug?: string }>();\n  const history = useHistory();\n  const location = useLocation();\n  const appContext = React.useContext(AppContext);\n  const [hoveredChapter, setHoveredChapter] = React.useState<string | null>(\n    null,\n  );\n  const [hoveredComposerSlug, setHoveredComposerSlug] =\n    React.useState<string>(\"happy-birthday\");\n  const [hoveredColors, setHoveredColors] = useState<string[] | null>(null);\n  const [isBeyondMode, setIsBeyondMode] = useState(() =>\n    location.pathname.startsWith(\"/beyond\"),\n  );\n\n  // Keep mode in sync with URL\n  React.useEffect(() => {\n    const shouldBeBeyondMode = location.pathname.startsWith(\"/beyond\");\n    if (shouldBeBeyondMode !== isBeyondMode) {\n      setIsBeyondMode(shouldBeBeyondMode);\n    }\n  }, [location.pathname, isBeyondMode]);\n\n  React.useEffect(() => {\n    if (appContext.currentMidi?.slug) {\n      setHoveredComposerSlug(appContext.currentMidi.slug);\n    }\n  }, [appContext.currentMidi?.slug]);\n\n  if (!appContext) throw new Error(\"AppContext not found\");\n  const { analyses, eject } = appContext;\n  const [loadingSnippets, setLoadingSnippets] = React.useState<Set<string>>(\n    new Set(),\n  );\n\n  // Add handler for composer link clicks\n  const handleComposerLinkClick = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    eject(); // Eject the current player before navigating\n  };\n\n  // Handle snippet click with loading state\n  const handleSnippetClick = async (snippet: EnhancedSnippet) => {\n    const slug = snippet.composerSlug;\n    setLoadingSnippets((prev) => new Set([...prev, slug]));\n    try {\n      await appContext.handleSongClick(slug);\n      if (snippet.secondsSpan) {\n        const seekPosition = Math.max(0, (snippet.secondsSpan[0] - 1) * 1000);\n        appContext.seek(seekPosition);\n      }\n    } finally {\n      setLoadingSnippets((prev) => {\n        const next = new Set(prev);\n        next.delete(slug);\n        return next;\n      });\n    }\n  };\n\n  // Get chapters and groups based on mode\n  const currentChapters = isBeyondMode ? BEYOND_CHAPTERS : CHAPTERS;\n  const currentChapterGroups = isBeyondMode\n    ? BEYOND_CHAPTER_GROUPS\n    : CHAPTER_GROUPS;\n\n  // Get unique chapter titles\n  const chapterTitles = React.useMemo(() => {\n    return currentChapters.map((chapter) => chapter.title);\n  }, [currentChapters]);\n\n  // Find selected chapter based on slug\n  const selectedChapter = React.useMemo(() => {\n    if (!slug) return \"Intro\";\n    return (\n      chapterTitles.find(\n        (chapter) => getChapterSlug(chapter) === slug.toLowerCase(),\n      ) || \"Intro\"\n    );\n  }, [slug, chapterTitles]);\n\n  const hoveredComposerChapter = React.useMemo(() => {\n    return findChapterForComposer(hoveredComposerSlug, currentChapters);\n  }, [hoveredComposerSlug, currentChapters]);\n\n  // Redirect from root to /100/intro or /beyond/blues\n  if (!slug) {\n    const firstBeyondChapter = BEYOND_CHAPTERS[0]?.title || \"intro\";\n    return (\n      <Redirect\n        to={\n          isBeyondMode\n            ? `/beyond/${slugify(firstBeyondChapter.toLowerCase())}`\n            : \"/100/intro\"\n        }\n      />\n    );\n  }\n\n  // Handle chapter selection\n  const handleChapterSelect = (chapter: string) => {\n    eject(); // Add this line to eject MIDI before changing chapters\n    const newSlug = getChapterSlug(chapter);\n    history.push(`/${isBeyondMode ? \"beyond\" : \"100\"}/${newSlug}`);\n  };\n\n  // Add mode toggle handler\n  const handleModeToggle = () => {\n    eject();\n    setIsBeyondMode((prev) => !prev);\n    const firstBeyondChapter = BEYOND_CHAPTERS[0]?.title || \"intro\";\n    history.push(\n      `/${!isBeyondMode ? \"beyond\" : \"100\"}/${\n        !isBeyondMode ? slugify(firstBeyondChapter.toLowerCase()) : \"intro\"\n      }`,\n    );\n  };\n\n  const renderContent = () => {\n    const currentChapter = currentChapters.find(\n      (chapter) => chapter.title === selectedChapter,\n    );\n    if (!currentChapter) return null;\n\n    const currentSnippet = analyses[`f/${hoveredComposerSlug}`]?.snippets.find(\n      (s) => s.tag === \"book:index\",\n    );\n    const initialTonic =\n      currentSnippet?.frozenNotes.analysis.modulations[1] ?? 0;\n\n    return (\n      <>\n        <div style={{ marginTop: \"40px\" }}>\n          <FoldablePianoLegend\n            mode={currentChapter.mode}\n            setHoveredColors={setHoveredColors}\n            currentTonic={initialTonic}\n          />\n          {currentChapter.pretext &&\n            (currentChapter.title === \"Intro\" ? (\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  gap: \"10px\",\n                }}\n              >\n                <CompositionLink\n                  composer={TOP_100_COMPOSERS.find(\n                    (c) => c.slug === hoveredComposerSlug,\n                  )}\n                  onLinkClick={handleComposerLinkClick}\n                />\n\n                <div\n                  style={{\n                    display: \"flex\",\n                    gap: \"20px\",\n                    flexDirection: \"row\",\n                  }}\n                >\n                  <div\n                    style={{\n                      minHeight: \"300px\",\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                    }}\n                  >\n                    <SnippetList\n                      snippets={[\n                        analyses[`f/${hoveredComposerSlug}`]?.snippets\n                          .filter((snippet) => snippet.tag === \"book:index\")\n                          .pop(),\n                      ]\n                        .filter(Boolean)\n                        .map((snippet) => ({\n                          ...snippet,\n                          composerSlug: hoveredComposerSlug,\n                        }))}\n                      onSnippetClick={handleSnippetClick}\n                      loadingSnippets={loadingSnippets}\n                      isPreview={true}\n                      noteHeight={3}\n                      hoveredColors={hoveredColors}\n                    />\n                    <div\n                      style={{\n                        marginBottom: \"10px\",\n                        display: \"flex\",\n                        flexDirection: \"row\",\n                        gap: \"50px\",\n                      }}\n                    >\n                      {analyses[`f/${hoveredComposerSlug}`]?.tags && (\n                        <div\n                          style={{\n                            display: \"flex\",\n                            flexDirection: \"row\",\n                            gap: \"5px\",\n                            position: \"relative\",\n                            top: \"-3px\",\n                          }}\n                        >\n                          {analyses[`f/${hoveredComposerSlug}`].snippets\n                            .filter(\n                              (snippet: Snippet, index: number) =>\n                                snippet.tag !== \"book:index\" &&\n                                !snippet.tag.startsWith(\"last_chords\"),\n                            )\n                            .slice(0, 7)\n                            .map((snippet: Snippet, index: number) => (\n                              <div style={{ marginRight: \"20px\" }} key={index}>\n                                {s([snippet.tag] as any)}\n                              </div>\n                            ))}\n                        </div>\n                      )}\n                    </div>\n                    <RelatedCorporaDisplay\n                      slug={hoveredComposerSlug}\n                      horizontal={true}\n                      showMetadata={false}\n                    />\n                  </div>\n                </div>\n                <TwoColumnLayout>\n                  <ReadableTextBlock>\n                    {currentChapter.pretext()}\n                    <GroupContainer>\n                      <ComposersGrid>\n                        <ComposerWrapper>\n                          <CompositionLink\n                            composer={TOP_100_COMPOSERS.find(\n                              (c) => c.slug === \"happy-birthday\",\n                            )}\n                            onLinkClick={handleComposerLinkClick}\n                            showNarrativeIcon={true}\n                          />\n                        </ComposerWrapper>\n                      </ComposersGrid>\n                    </GroupContainer>\n                  </ReadableTextBlock>\n                  <ComposerListColumn>\n                    <div style={{ width: \"100%\", marginBottom: \"1em\" }}>\n                      <CorpusLink slug={MUSESCORE_TOP_100_SLUG} />\n                    </div>\n                    {TOP_100_COMPOSERS.slice(0, 100).map((composer) => (\n                      <div\n                        key={composer.slug}\n                        onMouseEnter={() =>\n                          setHoveredComposerSlug(composer.slug)\n                        }\n                        onMouseLeave={() =>\n                          setHoveredComposerSlug(\n                            appContext.currentMidi?.slug || \"happy-birthday\",\n                          )\n                        }\n                        style={{ cursor: \"pointer\" }}\n                      >\n                        <CompositionLink\n                          composer={composer}\n                          onLinkClick={(e) => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            const snippet = analyses[\n                              `f/${composer.slug}`\n                            ]?.snippets\n                              .filter((s) => s.tag === \"book:index\")\n                              .pop();\n                            if (snippet) {\n                              handleSnippetClick({\n                                ...snippet,\n                                composerSlug: composer.slug,\n                              });\n                            }\n                          }}\n                        />\n                      </div>\n                    ))}\n                  </ComposerListColumn>\n                </TwoColumnLayout>\n              </div>\n            ) : (\n              <ReadableTextBlock>{currentChapter.pretext()}</ReadableTextBlock>\n            ))}\n          {currentChapter.title !== \"Intro\" && (\n            <GroupContainer>\n              <ComposersGrid>\n                {currentChapter.composers\n                  .map((slug) => TOP_100_COMPOSERS.find((c) => c.slug === slug))\n                  .filter(\n                    (\n                      composer,\n                    ): composer is (typeof TOP_100_COMPOSERS)[number] =>\n                      composer !== undefined &&\n                      analyses[`f/${composer.slug}`]?.snippets?.some(\n                        (s) => s.tag === \"book:index\",\n                      ),\n                  )\n                  .map((composer) => {\n                    const snippets = (\n                      analyses[`f/${composer.slug}`]?.snippets || []\n                    )\n                      .filter((snippet) => snippet.tag === \"book:index\")\n                      .map((snippet) => ({\n                        ...snippet,\n                        composerSlug: composer.slug,\n                      }));\n\n                    return (\n                      <ComposerItem key={composer.slug}>\n                        <ComposerWrapper>\n                          <CompositionLink\n                            composer={composer}\n                            onLinkClick={handleComposerLinkClick}\n                            showNarrativeIcon={true}\n                          />\n                        </ComposerWrapper>\n                        {snippets.map((snippet) => (\n                          <SnippetContainer>\n                            <SnippetList\n                              snippets={[snippet]}\n                              onSnippetClick={handleSnippetClick}\n                              loadingSnippets={loadingSnippets}\n                              isPreview={true}\n                              noteHeight={3}\n                              hoveredColors={hoveredColors}\n                            />\n                          </SnippetContainer>\n                        ))}\n                      </ComposerItem>\n                    );\n                  })}\n              </ComposersGrid>\n\n              {currentChapter.composers\n                .map((slug) => TOP_100_COMPOSERS.find((c) => c.slug === slug))\n                .filter(\n                  (composer): composer is (typeof TOP_100_COMPOSERS)[number] =>\n                    composer !== undefined &&\n                    !analyses[`f/${composer.slug}`]?.snippets?.some(\n                      (s) => s.tag === \"book:index\",\n                    ),\n                ).length > 0 && (\n                <>\n                  <ComposerList>\n                    {currentChapter.composers\n                      .map((slug) =>\n                        TOP_100_COMPOSERS.find((c) => c.slug === slug),\n                      )\n                      .filter(\n                        (\n                          composer,\n                        ): composer is (typeof TOP_100_COMPOSERS)[number] =>\n                          composer !== undefined &&\n                          !analyses[`f/${composer.slug}`]?.snippets?.some(\n                            (s) => s.tag === \"book:index\",\n                          ),\n                      )\n                      .map((composer) => (\n                        <ComposerListItem key={composer.slug}>\n                          <CompositionLink\n                            composer={composer}\n                            onLinkClick={handleComposerLinkClick}\n                          />\n                        </ComposerListItem>\n                      ))}\n                  </ComposerList>\n                </>\n              )}\n            </GroupContainer>\n          )}\n        </div>\n      </>\n    );\n  };\n\n  return (\n    <BookContainer>\n      <div className=\"Book\" style={{ position: \"relative\" }}>\n        <Title>\n          {isBeyondMode\n            ? \"Visual Harmony Beyond the Top 100\"\n            : \"Visual Harmony of Top 100 Composers on MuseScore.com\"}\n        </Title>\n        <ModeToggle>\n          <Toggle\n            leftIcon={faHouse}\n            rightIcon={faGlobe}\n            isRight={isBeyondMode}\n            onToggle={handleModeToggle}\n            leftTitle=\"Top 100 Composers\"\n            rightTitle=\"Beyond Top 100\"\n          />\n        </ModeToggle>\n        <ChapterSelector>\n          {Object.entries(currentChapterGroups).map(\n            ([name, [startIndex, endIndex]]) => {\n              const groupChapters = currentChapters.slice(\n                startIndex - 1,\n                endIndex,\n              );\n              const isActive = groupChapters.some(\n                (chapter) => chapter.title === selectedChapter,\n              );\n              const hideHeader =\n                name.toLowerCase() === \"intro\" ||\n                name.toLowerCase() === \"style\";\n\n              return (\n                <ChapterGroup\n                  key={name}\n                  isActive={isActive}\n                  hideHeader={hideHeader}\n                >\n                  <div className=\"group-header\">{name}</div>\n                  <div className=\"group-content\">\n                    {groupChapters.map((chapter) => (\n                      <ChapterButton\n                        key={chapter.title}\n                        isSelected={selectedChapter === chapter.title}\n                        onClick={() => handleChapterSelect(chapter.title)}\n                        onMouseEnter={() => setHoveredChapter(chapter.title)}\n                        onMouseLeave={() => setHoveredChapter(null)}\n                      >\n                        <NavChordWrapper>\n                          {chapter.title === MODULATIONS_CHAPTER_TITLE ? (\n                            <div\n                              style={{\n                                position: \"relative\",\n                                width: \"65px\",\n                                height: \"45px\",\n                                overflow: \"hidden\",\n                              }}\n                            >\n                              <div\n                                style={{\n                                  position: \"absolute\",\n                                  top: \"10px\",\n                                  width: \"65px\",\n                                }}\n                              >\n                                <NewTonicSymbol\n                                  left={0}\n                                  number={1}\n                                  previousTonic={0}\n                                  modulationDiff={5}\n                                  tonicStart={5}\n                                />\n                              </div>\n                              <div\n                                style={{\n                                  position: \"absolute\",\n                                  top: \"25px\",\n                                  width: \"65px\",\n                                }}\n                              >\n                                <NewTonicSymbol\n                                  left={0}\n                                  number={1}\n                                  previousTonic={0}\n                                  modulationDiff={7}\n                                  tonicStart={7}\n                                />\n                              </div>\n                            </div>\n                          ) : chapter.title === DOUBLE_TONIC_CHAPTER_TITLE ? (\n                            <>\n                              <ChordStairs\n                                mode={{ title: \"\", chords: [\"vi\"] }}\n                                scale={NAV_CHORD_STAIRS_SCALE}\n                                playbackMode=\"no\"\n                              />\n                              <span style={{ margin: 3, fontSize: \"28px\" }}>\n                                =\n                              </span>\n                              <ChordStairs\n                                mode={{ title: \"\", chords: [\"i\"] }}\n                                scale={NAV_CHORD_STAIRS_SCALE}\n                                playbackMode=\"no\"\n                              />\n                            </>\n                          ) : chapter.title === \"Style\" ? (\n                            <FontAwesomeIcon\n                              icon={faClockRotateLeft}\n                              style={{ fontSize: \"20px\", color: \"white\" }}\n                            />\n                          ) : chapter.titleChords ? (\n                            <ChordStairs\n                              mode={{ title: \"\", chords: chapter.titleChords }}\n                              scale={NAV_CHORD_STAIRS_SCALE}\n                              playbackMode=\"no\"\n                            />\n                          ) : (\n                            chapter.title\n                          )}\n                        </NavChordWrapper>\n                        <ChapterTitleTooltip\n                          isSelected={selectedChapter === chapter.title}\n                          isHovered={\n                            hoveredChapter === chapter.title ||\n                            (hoveredComposerChapter === chapter.title &&\n                              selectedChapter === \"Intro\" &&\n                              hoveredComposerChapter !== \"Intro\")\n                          }\n                        >\n                          {chapter.title}\n                        </ChapterTitleTooltip>\n                        {hoveredComposerChapter === chapter.title &&\n                          selectedChapter === \"Intro\" &&\n                          hoveredComposerChapter !== \"Intro\" && (\n                            <ChapterArrow />\n                          )}\n                      </ChapterButton>\n                    ))}\n                  </div>\n                </ChapterGroup>\n              );\n            },\n          )}\n        </ChapterSelector>\n\n        {renderContent()}\n      </div>\n    </BookContainer>\n  );\n};\n\nexport default Book;\n","import * as Tone from \"tone\";\n\n// Add type definitions for our custom method\ndeclare module \"tone/build/esm/core/context/BaseContext\" {\n  interface BaseContext {\n    addAudioWorklet: () => Promise<void>;\n  }\n}\n\nexport const ARPEGGIO_DELAY_MS = 30;\nconst CHORD_SPACING = 1; // 1 second\nlet samplerLoaded = false;\nlet loadingPromise: Promise<void> | null = null;\n\nconst BASE_URL = \"https://tonejs.github.io/audio/salamander/\";\n\nexport const sampler = new Tone.Sampler({\n  urls: {\n    A0: \"A0.mp3\",\n    C1: \"C1.mp3\",\n    \"D#1\": \"Ds1.mp3\",\n    \"F#1\": \"Fs1.mp3\",\n    A1: \"A1.mp3\",\n    C2: \"C2.mp3\",\n    \"D#2\": \"Ds2.mp3\",\n    \"F#2\": \"Fs2.mp3\",\n    A2: \"A2.mp3\",\n    C3: \"C3.mp3\",\n    \"D#3\": \"Ds3.mp3\",\n    \"F#3\": \"Fs3.mp3\",\n    A3: \"A3.mp3\",\n    C4: \"C4.mp3\",\n    \"D#4\": \"Ds4.mp3\",\n    \"F#4\": \"Fs4.mp3\",\n    A4: \"A4.mp3\",\n    C5: \"C5.mp3\",\n    \"D#5\": \"Ds5.mp3\",\n    \"F#5\": \"Fs5.mp3\",\n    A5: \"A5.mp3\",\n    C6: \"C6.mp3\",\n    \"D#6\": \"Ds6.mp3\",\n    \"F#6\": \"Fs6.mp3\",\n    A6: \"A6.mp3\",\n    C7: \"C7.mp3\",\n    \"D#7\": \"Ds7.mp3\",\n    \"F#7\": \"Fs7.mp3\",\n    A7: \"A7.mp3\",\n    C8: \"C8.mp3\",\n  },\n  baseUrl: BASE_URL,\n  onload: () => {\n    samplerLoaded = true;\n  },\n})\n  .toDestination()\n  .set({\n    volume: -6,\n  });\n\n// Enable Audio Worklet processing\nTone.getContext().addAudioWorklet = async () => {\n  const context = Tone.getContext().rawContext;\n  if (context.audioWorklet) {\n    try {\n      await context.audioWorklet.addModule(\n        `data:text/javascript;charset=utf-8,\n        class ToneProcessor extends AudioWorkletProcessor {\n          process(inputs, outputs) {\n            // Pass audio through\n            const output = outputs[0];\n            const input = inputs[0];\n            for (let channel = 0; channel < output.length; ++channel) {\n              const inputChannel = input[channel];\n              const outputChannel = output[channel];\n              for (let i = 0; i < outputChannel.length; ++i) {\n                outputChannel[i] = inputChannel ? inputChannel[i] : 0;\n              }\n            }\n            return true;\n          }\n        }\n        registerProcessor('tone-processor', ToneProcessor);`,\n      );\n\n      const workletNode = new AudioWorkletNode(context, \"tone-processor\");\n      sampler.connect(workletNode);\n      workletNode.connect(context.destination);\n    } catch (error) {\n      console.error(\"Failed to add Audio Worklet:\", error);\n    }\n  }\n};\n\nconst originalTriggerAttack = sampler.triggerAttack;\nsampler.triggerAttack = function (...args) {\n  return originalTriggerAttack.apply(this, args);\n};\n\nconst originalTriggerRelease = sampler.triggerRelease;\nsampler.triggerRelease = function (...args) {\n  return originalTriggerRelease.apply(this, args);\n};\n\nexport const getAudioContextState = () => {\n  return Tone.getContext().state;\n};\n\nexport const startAudioContext = async () => {\n  try {\n    await Tone.start();\n    await Tone.getContext().addAudioWorklet();\n    return true;\n  } catch (error) {\n    console.error(\"Failed to start audio context:\", error);\n    throw error;\n  }\n};\n\nexport const ensureSamplerLoaded = async () => {\n  if (samplerLoaded) {\n    return;\n  }\n\n  if (loadingPromise) {\n    return loadingPromise;\n  }\n\n  loadingPromise = new Promise((resolve) => {\n    if (sampler.loaded) {\n      samplerLoaded = true;\n      resolve();\n      return;\n    }\n\n    const checkLoaded = () => {\n      if (sampler.loaded) {\n        samplerLoaded = true;\n        resolve();\n      } else {\n        setTimeout(checkLoaded, 100);\n      }\n    };\n\n    checkLoaded();\n  });\n\n  await loadingPromise;\n};\n\nexport const resumeAudioContext = async () => {\n  await Tone.start();\n};\n\nconst C3_MIDI_NUMBER = 48;\n\nlet activeEvents: number[] = [];\nlet activeNotes: string[] = [];\n\nexport const playArpeggiatedChord = async (\n  chordNumbers: number[],\n  cancelPreviousSounds = true,\n) => {\n  await ensureSamplerLoaded();\n\n  // Only cancel previous sounds if explicitly requested\n  if (cancelPreviousSounds) {\n    // 1. Stop all currently playing sounds immediately\n    sampler.releaseAll(0);\n\n    // 2. Clear all scheduled events\n    activeEvents.forEach((id) => Tone.Transport.clear(id));\n    Tone.Transport.cancel();\n\n    // 3. Reset our tracking arrays\n    activeEvents = [];\n    activeNotes = [];\n  }\n\n  // 4. Convert to MIDI notes starting from C3\n  const midiNotes = chordNumbers.map((note) => C3_MIDI_NUMBER + note);\n  const noteNames = midiNotes.map((midi) =>\n    Tone.Frequency(midi, \"midi\").toNote(),\n  );\n\n  // 5. Ensure Transport is started\n  if (Tone.Transport.state !== \"started\") {\n    Tone.Transport.start();\n  }\n\n  // 6. Schedule notes using Transport time\n  const currentTransportTime = Tone.Transport.seconds;\n\n  noteNames.forEach((note, index) => {\n    const scheduleTime =\n      currentTransportTime + (index * ARPEGGIO_DELAY_MS) / 1000;\n\n    const eventId = Tone.Transport.schedule((time) => {\n      activeNotes.push(note);\n      sampler.triggerAttackRelease(note, 0.5, time);\n    }, scheduleTime);\n\n    activeEvents.push(eventId);\n  });\n};\n\n// Add new function for playing raw MIDI notes\nexport const playRawMidiNote = async (midiNumber: number, duration: number) => {\n  await ensureSamplerLoaded();\n\n  sampler.releaseAll(0);\n  activeEvents.forEach((id) => Tone.Transport.clear(id));\n  Tone.Transport.cancel();\n\n  activeEvents = [];\n  activeNotes = [];\n\n  const noteName = Tone.Frequency(midiNumber, \"midi\").toNote();\n\n  if (Tone.Transport.state !== \"started\") {\n    Tone.Transport.start();\n  }\n\n  const eventId = Tone.Transport.schedule((time) => {\n    activeNotes.push(noteName);\n    sampler.triggerAttackRelease(noteName, duration / 1000, time);\n  }, Tone.Transport.seconds);\n\n  activeEvents.push(eventId);\n};\n\n// Add a cleanup function that can be called when needed (e.g., component unmount)\nexport const cleanupArpeggiator = () => {\n  sampler.releaseAll(0);\n  activeEvents.forEach((id) => Tone.Transport.clear(id));\n  Tone.Transport.cancel();\n  activeEvents = [];\n  activeNotes = [];\n};\n\nexport const playArpeggiatedChordSequence = async (\n  chordSequence: number[][],\n  onChordStart?: (index: number) => void,\n  onChordEnd?: (index: number) => void,\n) => {\n  await ensureSamplerLoaded();\n\n  // Clear any existing events\n  Tone.Transport.cancel();\n  sampler.releaseAll(0);\n  activeEvents = [];\n  activeNotes = [];\n\n  // Ensure transport is started\n  if (Tone.Transport.state !== \"started\") {\n    Tone.Transport.start();\n  }\n\n  const currentTime = Tone.Transport.seconds;\n\n  chordSequence.forEach((chord, chordIndex) => {\n    // Schedule each note in the chord\n    chord.forEach((note, noteIndex) => {\n      const noteTime =\n        currentTime +\n        chordIndex * CHORD_SPACING + // Delay for each chord\n        (noteIndex * ARPEGGIO_DELAY_MS) / 1000; // Arpeggio delay within chord\n\n      const eventId = Tone.Transport.schedule((time) => {\n        sampler.triggerAttackRelease(\n          Tone.Frequency(note + C3_MIDI_NUMBER, \"midi\").toNote(),\n          CHORD_SPACING,\n          time,\n        );\n\n        // Call onChordStart only for the first note of each chord\n        if (noteIndex === 0 && onChordStart) {\n          onChordStart(chordIndex);\n        }\n\n        // Schedule chord end callback after last note\n        if (noteIndex === chord.length - 1 && onChordEnd) {\n          Tone.Transport.schedule(() => {\n            onChordEnd(chordIndex);\n          }, time + 0.7); // 600ms animation duration\n        }\n      }, noteTime);\n\n      activeEvents.push(eventId);\n    });\n  });\n};\n\n// Define a type for highlighted notes\nexport interface HighlightedNote {\n  startTime: number; // Starting time in ticks\n  duration: number; // Duration in ticks\n  midiNumber: number; // MIDI note number\n}\n\n/**\n * Plays a collection of highlighted notes with precise timing.\n * Normalizes times by subtracting the earliest start time.\n *\n * @param highlightedNotes Array of notes with startTime, duration, and midiNumber\n * @param bpm The tempo to use for timing calculations (beats per minute)\n * @param cancelPrevious Whether to cancel previous sounds (default true)\n * @returns A function to stop playback\n */\nexport const playHighlightedNotes = async (\n  highlightedNotes: HighlightedNote[],\n  bpm: number = Tone.Transport.bpm.value,\n  cancelPrevious = true,\n): Promise<() => void> => {\n  // Ensure sampler is loaded\n  await ensureSamplerLoaded();\n\n  // Only cancel previous sounds if requested\n  if (cancelPrevious) {\n    // Stop all currently playing sounds\n    sampler.releaseAll(0);\n\n    // Clear all scheduled events\n    activeEvents.forEach((id) => Tone.Transport.clear(id));\n    Tone.Transport.cancel();\n\n    // Reset tracking arrays\n    activeEvents = [];\n    activeNotes = [];\n  }\n\n  // If no notes provided, just return the cleanup function\n  if (!highlightedNotes.length) {\n    return () => cleanupArpeggiator();\n  }\n\n  // Filter out invalid notes\n  const validNotes = highlightedNotes.filter(\n    (note) =>\n      note.duration > 0 && note.midiNumber >= 0 && note.midiNumber <= 127,\n  );\n\n  if (validNotes.length < highlightedNotes.length) {\n    console.warn(\n      `Filtered out ${\n        highlightedNotes.length - validNotes.length\n      } invalid notes`,\n    );\n  }\n\n  if (validNotes.length === 0) {\n    console.warn(\"No valid notes to play after filtering\");\n    return () => cleanupArpeggiator();\n  }\n\n  // Find the minimum start time to normalize all times\n  const minStartTime = Math.min(...validNotes.map((note) => note.startTime));\n\n  // Ensure Transport is started\n  if (Tone.Transport.state !== \"started\") {\n    Tone.Transport.start();\n  }\n\n  // Current transport time as reference point\n  const currentTransportTime = Tone.Transport.seconds;\n\n  // Set Tone.js BPM to match our BPM - critical for accurate timing!\n  // Store original BPM to restore later\n  const originalBpm = Tone.Transport.bpm.value;\n  Tone.Transport.bpm.value = bpm;\n\n  // Define constants for MIDI timing\n  // MidiWriter uses 128 ticks per quarter by default\n  const MIDI_WRITER_PPQ = 128;\n\n  // Schedule each note with precise timing\n  validNotes.forEach((note) => {\n    // Convert MIDI number to Tone.js note name\n    const noteName = Tone.Frequency(note.midiNumber, \"midi\").toNote();\n\n    // Calculate normalized start time in seconds\n    // First normalize the ticks (make everything relative to the first note)\n    const normalizedStartTimeTicks = note.startTime - minStartTime;\n\n    // Convert ticks to beats (quarter notes) by dividing by PPQ\n    const startTimeInBeats = normalizedStartTimeTicks / MIDI_WRITER_PPQ;\n\n    // Convert beats to seconds based on tempo (BPM)\n    const startTimeInSeconds = (60 / bpm) * startTimeInBeats;\n\n    // Similarly for duration\n    const durationInBeats = note.duration / MIDI_WRITER_PPQ;\n    const durationInSeconds = (60 / bpm) * durationInBeats;\n\n    // Schedule the note\n    const scheduleTime = currentTransportTime + startTimeInSeconds;\n\n    const eventId = Tone.Transport.schedule((time) => {\n      activeNotes.push(noteName);\n\n      // Use try/catch to log any errors during playback\n      try {\n        sampler.triggerAttackRelease(noteName, durationInSeconds, time);\n      } catch (error) {\n        console.error(`Error playing note ${noteName}:`, error);\n      }\n    }, scheduleTime);\n\n    activeEvents.push(eventId);\n  });\n\n  // Return a function to stop playback and restore original BPM\n  return () => {\n    sampler.releaseAll(0);\n    activeEvents.forEach((id) => Tone.Transport.clear(id));\n    activeEvents = [];\n    activeNotes = [];\n\n    // Restore original BPM\n    Tone.Transport.bpm.value = originalBpm;\n  };\n};\n","import { faGuitar, faUserGraduate } from \"@fortawesome/free-solid-svg-icons\";\nimport * as React from \"react\";\nimport styled, { css, keyframes } from \"styled-components\";\nimport { useLocalStorage } from \"usehooks-ts\";\nimport { playArpeggiatedChord } from \"../../../sampler/sampler\";\nimport { PITCH_CLASS_TO_LETTER } from \"../AnalysisGrid\";\nimport { Toggle } from \"../Toggle\";\nimport { FoldButtonWithIcon } from \"../editor/FoldButtonWithIcon\";\nimport { TOP_100_COMPOSERS } from \"../top100Composers\";\nimport ChordStairs from \"./ChordStairs\";\nimport { CHROMATIC_CHORDS, MAJOR_MODE, MINOR_MODE, Mode } from \"./chords\";\n\nconst PIANO_KEYBOARD_REPETITIONS = 2;\n\nconst BLACK_KEYS = [1, 3, -1, 6, 8, 10, -1];\nconst WHITE_KEYS = [0, 2, 4, 5, 7, 9, 11];\n\nconst BLACK_KEY_LABELS = [\"b2\", \"b3\", -1, \"#4\", \"b6\", \"b7\", -1];\n\nconst KEY_WIDTH = 26;\nconst KEY_HEIGHT = 70;\nconst ROW_DISTANCE = 40;\nconst PADDING = 2.5;\nconst INLINE_KEY_WIDTH = 10;\nconst INLINE_KEY_HEIGHT = 24;\nconst INLINE_ROW_DISTANCE = 15;\nconst INLINE_PADDING = 2;\n\nconst keyPress = keyframes`\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(0.95);\n  }\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst PianoKey = styled.div<{ isPlaying?: boolean; isEnabled?: boolean }>`\n  position: absolute;\n  user-select: none;\n  font-size: 16px;\n  font-weight: 700;\n  text-align: center;\n  vertical-align: bottom;\n  color: white;\n  text-shadow:\n    0.5px 0.5px 0px black,\n    -0.5px 0.5px 0px black,\n    0.5px -0.5px 0px black,\n    -0.5px -0.5px 0px black;\n  display: grid;\n  align-content: end;\n  box-sizing: border-box;\n  transform-origin: top;\n  opacity: ${(props) => (props.isEnabled ? 1 : 0)};\n  ${(props) =>\n    props.isPlaying &&\n    css`\n      animation: ${keyPress} 0.2s ease-out;\n    `}\n`;\n\nconst ScaleLabel = styled.span`\n  cursor: pointer;\n  padding: 2px 6px;\n  border-radius: 4px;\n  transition: background-color 0.2s;\n  color: gray;\n\n  &:hover {\n    color: white;\n  }\n`;\n\nexport const PianoLegend: React.FC<{\n  currentTonic?: number;\n  inline?: boolean;\n  enabledPitches?: number[];\n}> = ({\n  currentTonic = 0,\n  inline = false,\n  enabledPitches = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n}) => {\n  const [playingNotes, setPlayingNotes] = React.useState<Set<number>>(\n    new Set(),\n  );\n\n  const playNote = (note: number) => {\n    if (!inline && enabledPitches.includes(note)) {\n      const transposedNote = note + currentTonic;\n      playArpeggiatedChord([transposedNote], false);\n      setPlayingNotes(new Set([...playingNotes, note]));\n      setTimeout(() => {\n        setPlayingNotes((prev) => {\n          const next = new Set(prev);\n          next.delete(note);\n          return next;\n        });\n      }, 200);\n    }\n  };\n\n  const keyWidth = inline ? INLINE_KEY_WIDTH : KEY_WIDTH;\n  const keyHeight = inline ? INLINE_KEY_HEIGHT : KEY_HEIGHT;\n  const rowDistance = inline ? INLINE_ROW_DISTANCE : ROW_DISTANCE;\n  const padding = inline ? INLINE_PADDING : PADDING;\n\n  return (\n    <div style={{ backgroundColor: \"black\", padding: \"0\", zIndex: 100000 }}>\n      <div\n        style={{\n          position: \"relative\",\n          width: WHITE_KEYS.length * (keyWidth + padding),\n          height: keyHeight + rowDistance,\n        }}\n      >\n        {[0, 1, 2, 3, 4, 5, 6].map((i) => (\n          <React.Fragment key={i}>\n            <PianoKey\n              key={`w_${i}`}\n              className={\n                (inline || enabledPitches.includes(WHITE_KEYS[i])) &&\n                `noteColor_${[WHITE_KEYS[i]]}_colors`\n              }\n              isEnabled={inline || enabledPitches.includes(WHITE_KEYS[i])}\n              isPlaying={playingNotes.has(WHITE_KEYS[i])}\n              style={{\n                top: rowDistance,\n                left: (keyWidth + padding) * i,\n                width: keyWidth,\n                height: keyHeight,\n                borderRadius: inline ? \"3px\" : \"5px\",\n                cursor:\n                  inline || enabledPitches.includes(WHITE_KEYS[i])\n                    ? \"pointer\"\n                    : \"default\",\n              }}\n              onClick={() => playNote(WHITE_KEYS[i])}\n            >\n              <div style={{ position: \"relative\" }}>\n                {!inline && (\n                  <>\n                    {i === 0 && (\n                      <span\n                        style={{\n                          position: \"absolute\",\n                          bottom: \"18px\",\n                          left: \"2px\",\n                          color: \"black\",\n                          fontWeight: \"bold\",\n                          width: \"0\",\n                          overflow: \"visible\",\n                          textAlign: \"center\",\n                          fontSize: \"14px\",\n                          textShadow: \"none\",\n                          zIndex: 3,\n                        }}\n                      >\n                        {PITCH_CLASS_TO_LETTER[currentTonic]}\n                      </span>\n                    )}\n                    {i + 1}\n                  </>\n                )}\n              </div>\n            </PianoKey>\n            {BLACK_KEYS[i] !== -1 ? (\n              <PianoKey\n                key={`b_${i}`}\n                className={\n                  (inline || enabledPitches.includes(BLACK_KEYS[i])) &&\n                  `noteColor_${[BLACK_KEYS[i]]}_colors`\n                }\n                isEnabled={inline || enabledPitches.includes(BLACK_KEYS[i])}\n                isPlaying={playingNotes.has(BLACK_KEYS[i])}\n                style={{\n                  top: 0,\n                  left: (keyWidth + padding) * (i + 0.5),\n                  zIndex: 2,\n                  width: keyWidth,\n                  height: keyHeight,\n                  borderRadius: inline ? \"3px\" : \"5px\",\n                  cursor:\n                    inline || enabledPitches.includes(BLACK_KEYS[i])\n                      ? \"pointer\"\n                      : \"default\",\n                  backgroundColor: \"black\",\n                }}\n                onClick={() => playNote(BLACK_KEYS[i])}\n              >\n                {!inline &&\n                  BLACK_KEY_LABELS[i]\n                    .toString()\n                    .replace(\"b\", \"\")\n                    .replace(\"#\", \"\")}\n              </PianoKey>\n            ) : null}\n          </React.Fragment>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport const InlinePianoLegend: React.FC<{ enabledPitches?: number[] }> = ({\n  enabledPitches = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n}) => {\n  return <PianoLegend inline enabledPitches={enabledPitches} />;\n};\n\nexport const FoldablePianoLegend: React.FC<{\n  slug?: string;\n  mode?: Mode | Mode[];\n  currentTonic?: number;\n  setHoveredColors?: (colors: string[] | null) => void;\n}> = ({ slug, mode, currentTonic, setHoveredColors }) => {\n  const [showLegend, setShowLegend] = useLocalStorage(\"showLegend\", true);\n  const [hoveredScale, setHoveredScale] = React.useState<\n    \"major\" | \"minor\" | null\n  >(null);\n  const [showGuitarChords, setShowGuitarChords] = React.useState(false);\n\n  const getEnabledPitches = () => {\n    if (hoveredScale === \"major\") {\n      return WHITE_KEYS;\n    } else if (hoveredScale === \"minor\") {\n      return [0, 2, 3, 5, 7, 8, 10];\n    }\n    return [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n  };\n\n  const chords = TOP_100_COMPOSERS.find(({ slug: _slug }) => slug === _slug)\n    ?.chords;\n\n  const content = React.useMemo(() => {\n    return (\n      <div\n        key=\"piano-legend\"\n        style={{ position: \"fixed\", bottom: 51, right: 36, zIndex: 100000 }}\n      >\n        {showLegend ? (\n          <div style={{ position: \"relative\", marginTop: \"30px\" }}>\n            <Toggle\n              leftIcon={faUserGraduate}\n              rightIcon={faGuitar}\n              isRight={showGuitarChords}\n              onToggle={() => setShowGuitarChords((prev) => !prev)}\n              leftTitle=\"Show Roman numerals\"\n              rightTitle=\"Show guitar chords\"\n            />\n            <FoldButtonWithIcon\n              position=\"top\"\n              isFolded={!showLegend}\n              onClick={() => setShowLegend(false)}\n            />\n\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                gap: 35,\n                backgroundColor: \"black\",\n                padding: 10,\n                border: \"1px solid #666\",\n                zIndex: 100000,\n              }}\n            >\n              {(Array.isArray(mode)\n                ? mode\n                : mode\n                ? [mode]\n                : [MAJOR_MODE, MINOR_MODE]\n              ).map((modeItem, index) => (\n                <ChordStairs\n                  key={`mode-${index}`}\n                  mode={modeItem}\n                  chapterChords={chords}\n                  currentTonic={currentTonic}\n                  setHoveredColors={setHoveredColors}\n                  showGuitarChords={showGuitarChords}\n                />\n              ))}\n              {chords && (\n                <ChordStairs\n                  mode={CHROMATIC_CHORDS}\n                  chapterChords={chords}\n                  currentTonic={currentTonic}\n                  setHoveredColors={setHoveredColors}\n                  showGuitarChords={showGuitarChords}\n                />\n              )}\n              <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n                <div\n                  style={{\n                    margin: \"auto\",\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                  }}\n                >\n                  {Array.from({ length: PIANO_KEYBOARD_REPETITIONS }).map(\n                    (_, index) => (\n                      <PianoLegend\n                        key={`piano-${index}`}\n                        currentTonic={(currentTonic ?? 0) + index * 12}\n                        enabledPitches={getEnabledPitches()}\n                      />\n                    ),\n                  )}\n                </div>\n                <div\n                  style={{\n                    overflow: \"visible\",\n                    color: \"white\",\n                    display: \"flex\",\n                    gap: \"16px\",\n                    justifyContent: \"center\",\n                    marginTop: \"8px\",\n                  }}\n                >\n                  <ScaleLabel\n                    onMouseEnter={() => setHoveredScale(\"major\")}\n                    onMouseLeave={() => setHoveredScale(null)}\n                  >\n                    major\n                  </ScaleLabel>\n                  <ScaleLabel\n                    onMouseEnter={() => setHoveredScale(\"minor\")}\n                    onMouseLeave={() => setHoveredScale(null)}\n                  >\n                    natural minor\n                  </ScaleLabel>\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div style={{ position: \"relative\", marginTop: \"30px\" }}>\n            <FoldButtonWithIcon\n              position=\"top\"\n              isFolded={!showLegend}\n              onClick={() => setShowLegend(true)}\n            />\n            <button\n              onClick={() => setShowLegend(true)}\n              style={{\n                background: \"black\",\n                border: \"1px solid #333\",\n                padding: \"10px\",\n                cursor: \"pointer\",\n              }}\n            >\n              <InlinePianoLegend />\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }, [\n    showLegend,\n    slug,\n    mode,\n    currentTonic,\n    chords,\n    setShowLegend,\n    hoveredScale,\n    showGuitarChords,\n  ]);\n\n  return content;\n};\n","import { SourceLocation } from \"../parseMidi\";\n\n// Scale maps for major and minor scales\nexport const MINOR_SCALE_MAP = [0, 2, 3, 5, 7, 8, 10];\nexport const MAJOR_SCALE_MAP = [0, 2, 4, 5, 7, 9, 11];\nexport const LYDIAN_SCALE_MAP = [0, 2, 4, 6, 7, 9, 11]; // Major with #4\nexport const MIXOLYDIAN_SCALE_MAP = [0, 2, 4, 5, 7, 9, 10]; // Major with b7\nexport const DORIAN_SCALE_MAP = [0, 2, 3, 5, 7, 9, 10]; // Minor with natural 6\nexport const PHRYGIAN_SCALE_MAP = [0, 1, 3, 5, 7, 8, 10]; // Minor with b2\nexport const HARMONIC_MINOR_SCALE_MAP = [0, 2, 3, 5, 7, 8, 11]; // Harmonic minor\nexport const MELODIC_MINOR_SCALE_MAP = [0, 2, 3, 5, 7, 9, 11]; // Melodic minor (ascending)\n\n// Define a type for all supported mode names (internal representation)\nexport type ModeName =\n  | \"major\"\n  | \"minor\"\n  | \"lydian\"\n  | \"mixolydian\"\n  | \"dorian\"\n  | \"phrygian\"\n  | \"harmonic_minor\"\n  | \"melodic_minor\";\n\n// Define short mode identifiers used in copy commands\nexport type ModeShorthand = \"M\" | \"m\" | \"h\" | \"e\";\n\n// Map from shorthand to full mode name\nexport const MODE_SHORTHAND_MAP: Record<ModeShorthand, ModeName> = {\n  M: \"major\",\n  m: \"minor\",\n  h: \"harmonic_minor\",\n  e: \"melodic_minor\",\n};\n\n// Map from display string to internal mode name\nexport const MODE_DISPLAY_MAP: Record<string, ModeName> = {\n  major: \"major\",\n  minor: \"minor\",\n  lydian: \"lydian\",\n  mixolydian: \"mixolydian\",\n  dorian: \"dorian\",\n  phrygian: \"phrygian\",\n  \"harmonic minor\": \"harmonic_minor\",\n  \"melodic minor\": \"melodic_minor\",\n};\n\n// Utility to normalize mode string (with spaces) to internal representation (with underscores)\nexport function normalizeModeName(modeStr: string): ModeName {\n  const normalizedStr = modeStr.toLowerCase().trim();\n\n  // Check if it's already in our map\n  if (normalizedStr in MODE_DISPLAY_MAP) {\n    return MODE_DISPLAY_MAP[normalizedStr];\n  }\n\n  // If not, try replacing spaces with underscores\n  const withUnderscores = normalizedStr.replace(/\\s+/g, \"_\");\n  if (isValidModeName(withUnderscores)) {\n    return withUnderscores as ModeName;\n  }\n\n  // Default to major if unrecognized\n  console.warn(`Unrecognized mode: ${modeStr}, defaulting to major`);\n  return \"major\";\n}\n\n// Type guard to check if a string is a valid ModeName\nexport function isValidModeName(mode: string): mode is ModeName {\n  return [\n    \"major\",\n    \"minor\",\n    \"lydian\",\n    \"mixolydian\",\n    \"dorian\",\n    \"phrygian\",\n    \"harmonic_minor\",\n    \"melodic_minor\",\n  ].includes(mode);\n}\n\n// Utility function to get scale map for a mode\nexport function getScaleMapForMode(mode: ModeName): number[] {\n  switch (mode) {\n    case \"major\":\n      return MAJOR_SCALE_MAP;\n    case \"minor\":\n      return MINOR_SCALE_MAP;\n    case \"lydian\":\n      return LYDIAN_SCALE_MAP;\n    case \"mixolydian\":\n      return MIXOLYDIAN_SCALE_MAP;\n    case \"dorian\":\n      return DORIAN_SCALE_MAP;\n    case \"phrygian\":\n      return PHRYGIAN_SCALE_MAP;\n    case \"harmonic_minor\":\n      return HARMONIC_MINOR_SCALE_MAP;\n    case \"melodic_minor\":\n      return MELODIC_MINOR_SCALE_MAP;\n  }\n}\n\n// Note letter to number mapping\nexport const NOTE_LETTER_MAP: { [key: string]: number } = {\n  // First octave (letters) - now low octave\n  a: 0,\n  s: 1,\n  d: 2,\n  f: 3,\n  g: 4,\n  h: 5,\n  j: 6,\n  k: 7,\n  l: 8,\n\n  // Second octave (using q-u)\n  q: 7,\n  w: 8,\n  e: 9,\n  r: 10,\n  t: 11,\n  y: 12,\n  u: 13,\n\n  // Third octave (numeric) - now high octave\n  \"1\": 14,\n  \"2\": 15,\n  \"3\": 16,\n  \"4\": 17,\n  \"5\": 18,\n  \"6\": 19,\n  \"7\": 20,\n  \"8\": 21,\n  \"9\": 22,\n  \"0\": 23,\n\n  // Keep the alternative fingering for backward compatibility\n  i: 14,\n  o: 15,\n  p: 16,\n};\n\n// Type definitions\nexport type TimeSignature = {\n  numerator: number; // Only numerator is stored since denominator is always 4\n  measureStart: number; // Which measure this time signature starts at\n};\n\nexport type KeySignature = {\n  tonic: number; // 0 = C, 1 = C#/Db, etc.\n  mode: ModeName;\n};\n\nexport type BeatPosition = number; // Integer part is beat number, fraction is position within beat\n\nexport type MeasureSpan = {\n  start: BeatPosition;\n  end: BeatPosition;\n};\n\nexport interface LogicalNote {\n  scaleDegree: number;\n  duration: number;\n  span: MeasureSpan;\n  midiNumber: number | null;\n  accidental?: number;\n  sourceLocation?: SourceLocation; // Add source location tracking\n}\n\nexport type Command =\n  | { type: \"key\"; key: KeySignature }\n  | { type: \"insert\"; notes: LogicalNote[] }\n  | {\n      type: \"copy\";\n      targetMeasure: number;\n      targetBeat: number;\n      sourceStart: number;\n      sourceStartBeat: number;\n      sourceEnd: number;\n      sourceEndBeat: number;\n      shifts: {\n        type: \"group\";\n        shifts: (number | \"x\")[];\n        modes?: (string | undefined)[]; // Mode modifiers corresponding to shifts\n        sourcePositions?: { row: number; col: number; command: string }[]; // Source location information\n      }[]; // Array of shift groups, each containing one or more shifts to be applied at the same position\n    }\n  | {\n      type: \"ac\"; // All channels copy\n      targetMeasure: number;\n      targetBeat: number;\n      sourceStart: number;\n      sourceStartBeat: number;\n      sourceEnd: number;\n      sourceEndBeat: number;\n      shifts: {\n        type: \"group\";\n        shifts: (number | \"x\")[];\n        modes?: (string | undefined)[]; // Mode modifiers corresponding to shifts\n        sourcePositions?: { row: number; col: number; command: string }[]; // Source location information\n      }[]; // Array of shift groups, each containing one or more shifts to be applied at the same position\n    }\n  | { type: \"track\"; track: number; baseOctave?: number }\n  | { type: \"time\"; signatures: TimeSignature[] }\n  | { type: \"bpm\"; tempo: number };\n\nexport interface CommandContext {\n  currentKey: KeySignature;\n  existingNotes?: LogicalNote[];\n  lastNoteIndex?: number; // Index of last note before current command\n  currentTrack: number;\n  timeSignatures: TimeSignature[];\n  beatsPerMeasure?: number; // Optional because only needed during note parsing\n  channelOctaves: { [channel: number]: number }; // Map of channel numbers to their base octaves\n  commentToEndOfFile?: boolean;\n  currentBpm: number; // Default will be 120\n}\n","import autoBindReact from \"auto-bind/react\";\nimport React, { PureComponent } from \"react\";\nimport styled from \"styled-components\";\n\n// Slider color constants\nconst COLORS = {\n  TRACK_FILLED: \"#fff\", // Light gray for filled portion of track\n  TRACK_EMPTY: \"#000\", // Dark gray for empty portion of track\n  TRACK_BORDER: \"#888\", // Medium gray for borders\n  THUMB_BACKGROUND: \"#fff\", // Light gray for thumb (same as filled track)\n  THUMB_BORDER: \"#aaa\", // Medium gray for thumb border\n  THUMB_SHADOW: \"rgba(0, 0, 0, 0.4)\", // Semi-transparent black for shadow\n};\n\nconst SliderContainer = styled.div`\n  height: var(--charH);\n  padding: 0;\n  cursor: pointer;\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n  border: 0;\n  display: inline-block;\n`;\n\nconst SliderRail = styled.div`\n  width: calc(100% + var(--charW1));\n  height: 3px;\n  margin-top: -2px;\n  background: none;\n  position: absolute;\n  top: 50%;\n  box-sizing: border-box;\n  border: 1px solid var(--clickable);\n`;\n\nconst SliderKnob = styled.div`\n  height: var(--charH);\n  width: var(--charW1);\n  margin: 0;\n  border-radius: 0;\n  background-color: #fff;\n  position: absolute;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  left: ${(props) => props.pos};\n  transition: ${(props) => (props.dragging ? \"none\" : \"left 0.37s linear\")};\n`;\n\nexport const StyledRangeInput = styled.input.attrs({ type: \"range\" })`\n  -webkit-appearance: none;\n  background: transparent;\n  width: 100%;\n\n  &::-webkit-slider-runnable-track {\n    width: 100%;\n    height: 4px;\n    background: ${(props) => `linear-gradient(to right, \n      ${COLORS.TRACK_FILLED} ${(props.value / props.max) * 100}%, \n      ${COLORS.TRACK_EMPTY} ${(props.value / props.max) * 100}%)`};\n    border-radius: 2px;\n    border: 1px solid ${COLORS.TRACK_BORDER};\n  }\n\n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    height: 16px;\n    width: 16px;\n    border-radius: 50%;\n    background: ${COLORS.THUMB_BACKGROUND};\n    border: 1px solid ${COLORS.THUMB_BORDER};\n    margin-top: -7px; /* Centers the thumb on the track */\n    cursor: pointer;\n    box-shadow: 0 1px 3px ${COLORS.THUMB_SHADOW};\n  }\n\n  &::-moz-range-track {\n    width: 100%;\n    height: 4px;\n    background: ${(props) => `linear-gradient(to right, \n      ${COLORS.TRACK_FILLED} ${(props.value / props.max) * 100}%, \n      ${COLORS.TRACK_EMPTY} ${(props.value / props.max) * 100}%)`};\n    border-radius: 2px;\n    border: 1px solid ${COLORS.TRACK_BORDER};\n  }\n\n  &::-moz-range-progress {\n    background-color: ${COLORS.TRACK_FILLED};\n    height: 4px;\n    border-radius: 2px;\n  }\n\n  &::-moz-range-thumb {\n    height: 16px;\n    width: 16px;\n    border-radius: 50%;\n    background: ${COLORS.THUMB_BACKGROUND};\n    border: 1px solid ${COLORS.THUMB_BORDER};\n    cursor: pointer;\n    box-shadow: 0 1px 3px ${COLORS.THUMB_SHADOW};\n  }\n`;\n\nexport default class Slider extends PureComponent {\n  constructor(props) {\n    super(props);\n    autoBindReact(this);\n\n    this.node = React.createRef();\n    this.state = {\n      dragging: false,\n      draggedPos: null,\n    };\n  }\n\n  onMouseMove(event) {\n    if (this.state.dragging) {\n      const node = this.node.current;\n      const pos = Math.max(\n        Math.min((event.clientX - node.offsetLeft) / node.offsetWidth, 1),\n        0,\n      );\n      this.setState({\n        draggedPos: pos,\n      });\n      this.props.onDrag(pos);\n    }\n  }\n\n  onMouseDown(event) {\n    event.preventDefault();\n    event.persist();\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n    this.setState({ dragging: true }, () => this.onMouseMove(event));\n  }\n\n  onMouseUp(event) {\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n    // Wait a moment to prevent 'snapback' (pos momentarily won't match draggedPos)\n    setTimeout(() => {\n      this.setState({ dragging: false });\n    }, 150);\n    this.props.onChange(this.state.draggedPos);\n  }\n\n  render() {\n    const pos =\n      Math.max(\n        Math.min(\n          this.state.dragging ? this.state.draggedPos : this.props.pos,\n          1,\n        ),\n        0,\n      ) *\n        100 +\n      \"%\";\n\n    return (\n      <SliderContainer ref={this.node} onMouseDown={this.onMouseDown}>\n        <SliderRail />\n        <SliderKnob pos={pos} dragging={this.state.dragging} />\n      </SliderContainer>\n    );\n  }\n}\n","import { faDownload, faPause, faPlay } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { memo, useContext } from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"./AppContext\";\nimport { StyledRangeInput } from \"./Slider\";\nimport TimeSlider from \"./TimeSlider\";\n\nexport const FOOTER_HEIGHT = 25;\n\nconst StyledVolumeSlider = styled.div`\n  flex-shrink: 0;\n  width: 10%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0 10px;\n\n  &::before {\n    content: \"Vol\";\n    margin-right: 10px;\n  }\n\n  ${StyledRangeInput} {\n    width: 100%;\n  }\n`;\n\nconst StyledAppFooter = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: ${FOOTER_HEIGHT}px;\n  background: var(--background);\n  display: flex;\n  align-items: center;\n  padding: 0;\n  z-index: 10000000;\n  border-top: 1px solid var(--border);\n`;\n\nconst AppFooterMain = styled.div`\n  display: flex;\n  align-items: center;\n  flex: 1;\n  min-width: 0; // Prevents flex items from overflowing\n`;\n\nconst TempoSection = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-shrink: 0;\n  margin: 0 20px;\n  flex-direction: row;\n`;\n\nconst LatencySection = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 6.5em;\n  flex-shrink: 0;\n  margin: 0 20px;\n`;\n\nconst DownloadButton = styled.a`\n  width: 20px;\n  flex-shrink: 0;\n  text-align: center;\n  margin-left: 10px;\n`;\n\nconst PauseButton = styled.button`\n  width: 50px;\n  height: ${FOOTER_HEIGHT}px;\n  flex-shrink: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 16px;\n  line-height: 1;\n  margin-right: 10px;\n`;\n\nconst LatencyButton = styled.button`\n  height: ${FOOTER_HEIGHT}px;\n`;\n\nconst TimeSliderWrapper = styled.div`\n  flex: 2;\n  min-width: 300px;\n  margin: 0 10px;\n`;\n\nconst StyledTempoButton = styled.button`\n  width: 24px;\n  height: 24px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  color: #333;\n  border: 1px solid #999;\n  border-radius: 3px;\n  background: linear-gradient(to bottom, #f8f8f8 0%, #e0e0e0 100%);\n  box-shadow:\n    0 1px 2px rgba(0, 0, 0, 0.2),\n    inset 0 1px 0 rgba(255, 255, 255, 0.8),\n    inset 0 0 2px rgba(255, 255, 255, 0.5);\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  padding: 2px 0;\n  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);\n  transition: all 0.05s ease-in-out;\n  font-family:\n    Times New Roman,\n    serif;\n\n  &:active {\n    transform: translateY(1px);\n    box-shadow:\n      0 0 2px rgba(0, 0, 0, 0.2),\n      inset 0 1px 0 rgba(255, 255, 255, 0.8),\n      inset 0 0 2px rgba(255, 255, 255, 0.5);\n  }\n`;\n\nconst AppFooter: React.FC<\n  {\n    currentSongDurationMs: number;\n    ejected: boolean;\n    paused: boolean;\n    volume: number;\n    handleTimeSliderChange: any;\n    handleVolumeChange: any;\n    getCurrentPositionMs: any;\n    togglePause: any;\n    latencyCorrectionMs: number;\n    setLatencyCorrectionMs: (latency: number) => void;\n    tempo: number;\n    setTempo: (tempo: number) => void;\n  } & RouteComponentProps\n> = ({\n  currentSongDurationMs,\n  ejected,\n  paused,\n  volume,\n  handleTimeSliderChange,\n  handleVolumeChange,\n  getCurrentPositionMs,\n  togglePause,\n  latencyCorrectionMs,\n  setLatencyCorrectionMs,\n  location,\n  tempo,\n  setTempo,\n}) => {\n  const context = useContext(AppContext);\n  const canDownload = context?.currentMidiBuffer && context?.currentMidi;\n\n  const createBlobUrl = () => {\n    if (!context?.currentMidiBuffer) return \"\";\n    const blob = new Blob([context.currentMidiBuffer], { type: \"audio/midi\" });\n    return URL.createObjectURL(blob);\n  };\n\n  const getDownloadFilename = () => {\n    if (!context?.currentMidi) return \"download.mid\";\n    return `${context.currentMidi.title}.mid`;\n  };\n\n  const { pathname } = location;\n\n  const segments = pathname.split(\"/\").filter(Boolean);\n\n  let lastSegment = segments.length > 0 ? segments[segments.length - 1] : \"\";\n  if (!lastSegment.endsWith(\".mid\")) {\n    lastSegment = `${lastSegment}.mid`;\n  }\n\n  const handleTempoChange = (delta: number) => {\n    const newTempo = Math.max(0.1, Math.min(4, tempo + delta));\n    setTempo(Number(newTempo.toFixed(2)));\n  };\n\n  const formatTempo = (tempo: number) => {\n    const fixed = tempo.toFixed(2);\n    const [integer, decimal] = fixed.split(\".\");\n    if (decimal === \"00\") return integer;\n    if (decimal.endsWith(\"0\")) return `${integer}.${decimal[0]}`;\n    return fixed;\n  };\n\n  return (\n    <StyledAppFooter>\n      <AppFooterMain>\n        <PauseButton\n          onClick={togglePause}\n          title={paused ? \"Resume (use Space)\" : \"Pause (use Space)\"}\n          disabled={ejected}\n        >\n          <FontAwesomeIcon icon={paused ? faPlay : faPause} />\n        </PauseButton>\n\n        <TimeSliderWrapper>\n          <TimeSlider\n            paused={paused}\n            currentSongDurationMs={currentSongDurationMs}\n            getCurrentPositionMs={getCurrentPositionMs}\n            onChange={handleTimeSliderChange}\n          />\n        </TimeSliderWrapper>\n\n        <TempoSection>\n          <StyledTempoButton\n            onClick={() => handleTempoChange(-0.1)}\n            title={`Change tempo (Minus key)`}\n          >\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                height: \"100%\",\n                transform: \"translateY(-1px)\", // Fine-tuned adjustment\n              }}\n            >\n              <span\n                style={{\n                  fontSize: \"16px\",\n                  lineHeight: \"0.8\",\n                  fontWeight: \"bold\",\n                  marginBottom: \"-3px\", // Overlap adjustment\n                }}\n              >\n                _\n              </span>\n              <span\n                style={{\n                  fontSize: \"16px\",\n                  lineHeight: \"0.8\",\n                  fontWeight: \"bold\",\n                }}\n              >\n                -\n              </span>\n            </div>\n          </StyledTempoButton>\n          <span\n            style={{\n              // margin: \"0 15px\",\n              fontFamily: \"monospace\",\n              width: \"3em\",\n              textAlign: \"center\",\n              display: \"inline-block\",\n            }}\n          >\n            {formatTempo(tempo)}x\n          </span>\n          <StyledTempoButton\n            onClick={() => handleTempoChange(0.1)}\n            title={`Change tempo (Plus key)`}\n          >\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                height: \"100%\",\n                transform: \"translateY(-1px)\", // Fine-tuned adjustment\n              }}\n            >\n              <span\n                style={{\n                  fontSize: \"16px\",\n                  lineHeight: \"0.8\",\n                  fontWeight: \"bold\",\n                  marginBottom: \"-3px\", // Overlap adjustment\n                }}\n              >\n                +\n              </span>\n              <span\n                style={{\n                  fontSize: \"16px\",\n                  lineHeight: \"0.8\",\n                  fontWeight: \"bold\",\n                }}\n              >\n                =\n              </span>\n            </div>\n          </StyledTempoButton>\n        </TempoSection>\n\n        <LatencySection>\n          <LatencyButton\n            onClick={() => setLatencyCorrectionMs(latencyCorrectionMs - 100)}\n          >\n            \n          </LatencyButton>\n          <span style={{ fontFamily: \"monospace\" }}>\n            {`${\n              Math.sign(latencyCorrectionMs / 1000) >= 0 ? \"+\" : \"-\"\n            }${Math.abs(latencyCorrectionMs / 1000)\n              .toFixed(2)\n              .charAt(0)}.${Math.abs(latencyCorrectionMs / 1000)\n              .toFixed(2)\n              .charAt(2)}`}\n            s\n          </span>\n          <LatencyButton\n            onClick={() => setLatencyCorrectionMs(latencyCorrectionMs + 100)}\n          >\n            \n          </LatencyButton>\n        </LatencySection>\n\n        <StyledVolumeSlider>\n          <StyledRangeInput\n            title=\"Volume\"\n            min={0}\n            max={150}\n            step={1}\n            onChange={(e) => handleVolumeChange(e.target.value)}\n            onDoubleClick={(e) => {\n              handleVolumeChange(100);\n              e.preventDefault();\n              e.stopPropagation();\n            }}\n            value={volume}\n          />\n        </StyledVolumeSlider>\n\n        <DownloadButton\n          style={{\n            color: canDownload ? \"var(--neutral4)\" : \"var(--neutral6)\",\n            cursor: canDownload ? \"pointer\" : \"not-allowed\",\n            pointerEvents: canDownload ? \"auto\" : \"none\",\n            opacity: canDownload ? 1 : 0.5,\n            height: \"100%\",\n          }}\n          href={createBlobUrl()}\n          download={getDownloadFilename()}\n          title={\n            canDownload ? \"Download MIDI file\" : \"No MIDI file to download\"\n          }\n        >\n          <FontAwesomeIcon icon={faDownload} style={{ height: \"100%\" }} />\n        </DownloadButton>\n      </AppFooterMain>\n    </StyledAppFooter>\n  );\n};\n\nexport default memo(withRouter(AppFooter));\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport {\n  GenreItem,\n  GenreList,\n  getEmojis,\n  getUniqueStyles,\n  hasMetadata,\n} from \"../../utils/corpusUtils\";\nimport { Snippet } from \"./analysis\";\nimport { corpora } from \"./corpora/corpora\";\nimport SnippetItem, { PX_IN_MEASURE } from \"./SnippetItem\";\n\nconst SnippetListContainer = styled.div<{ isPreview?: boolean }>`\n  display: flex;\n  flex-wrap: wrap;\n  gap: ${(props) => (props.isPreview ? \"60px\" : \"20px\")};\n  padding-bottom: 10px;\n`;\n\nconst SnippetItemWrapper = styled.div<{\n  isPreview?: boolean;\n  measureCount: number;\n  isLoading?: boolean;\n}>`\n  flex: 0 0 auto;\n  margin-bottom: ${(props) => (props.isPreview ? \"0px\" : \"20px\")};\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  cursor: pointer;\n  width: ${(props) => props.measureCount * PX_IN_MEASURE}px;\n  align-items: start;\n  gap: 4px;\n\n  ${(props) =>\n    props.isLoading &&\n    `\n    &::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.7);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 10000;\n    }\n    \n    &::before {\n      content: '';\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 20px;\n      height: 20px;\n      border: 2px solid #fff;\n      border-top-color: transparent;\n      border-radius: 50%;\n      z-index: 10001;\n      animation: spinner 1s linear infinite;\n    }\n    \n    @keyframes spinner {\n      to {transform: translate(-50%, -50%) rotate(360deg);}\n    }\n  `}\n`;\n\nconst SlugLabel = styled.div`\n  color: #fff;\n  font-size: 12px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n  margin: 0;\n`;\n\nconst SnippetContainer = styled.div`\n  min-width: 0;\n  width: 100%;\n  margin: 0;\n`;\n\nconst ComposerInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  padding: 4px;\n  font-size: 0.8rem;\n  color: #fff;\n  border-top: 1px solid #333;\n  margin-top: 4px;\n`;\n\nconst ComposerHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst ComposerName = styled.span`\n  color: #fff;\n`;\n\nconst YearInfo = styled.span`\n  color: #999;\n  font-size: 0.8em;\n`;\n\ninterface SnippetListProps {\n  snippets: Snippet[];\n  slugs?: string[];\n  onSnippetClick: (snippet: Snippet) => void;\n  isPreview?: boolean;\n  noteHeight?: number;\n  loadingSnippets?: Set<string>;\n  deleteSnippet?: (index: number) => void;\n  hoveredColors?: string[] | null;\n}\n\nconst getComposerInfo = (midiSlug: string) => {\n  const matchingCorpora = corpora.filter((corpus) =>\n    corpus.midis.some((midi) => midi === midiSlug),\n  );\n  return matchingCorpora.find(hasMetadata) || null;\n};\n\nconst SnippetList: React.FC<SnippetListProps> = ({\n  snippets,\n  slugs,\n  onSnippetClick,\n  isPreview = false,\n  noteHeight = 3,\n  loadingSnippets = new Set(),\n  deleteSnippet,\n  hoveredColors,\n}) => {\n  return (\n    <SnippetListContainer isPreview={isPreview}>\n      {snippets.map((snippet, index) => {\n        const measureCount =\n          snippet.measuresSpan[1] - snippet.measuresSpan[0] + 1;\n        const composerSlug = (snippet as any).composerSlug;\n        const midiSlug = slugs?.[index];\n        const composerInfo = midiSlug ? getComposerInfo(midiSlug) : null;\n\n        return (\n          <SnippetItemWrapper\n            key={index}\n            isPreview={isPreview}\n            measureCount={measureCount}\n            onClick={() => onSnippetClick(snippet)}\n            isLoading={loadingSnippets.has(composerSlug)}\n          >\n            {midiSlug && <SlugLabel>{midiSlug}</SlugLabel>}\n            <SnippetContainer>\n              <SnippetItem\n                snippet={snippet}\n                index={index}\n                isPreview={isPreview}\n                noteHeight={noteHeight}\n                deleteSnippet={deleteSnippet}\n                hoveredColors={hoveredColors}\n              />\n            </SnippetContainer>\n            {composerInfo && (\n              <ComposerInfo>\n                <ComposerHeader>\n                  <ComposerName>\n                    {composerInfo.slug\n                      .split(\"_\")\n                      .map(\n                        (word) => word.charAt(0).toUpperCase() + word.slice(1),\n                      )\n                      .join(\" \")}\n                  </ComposerName>\n                  {composerInfo.country && (\n                    <div>{getEmojis(composerInfo.country)}</div>\n                  )}\n                  {composerInfo.composerBirthYear && (\n                    <YearInfo>({composerInfo.composerBirthYear})</YearInfo>\n                  )}\n                </ComposerHeader>\n                {(composerInfo.genre || composerInfo.style) && (\n                  <GenreList>\n                    {getUniqueStyles(\n                      composerInfo.genre,\n                      composerInfo.style,\n                    ).map((style, index) => (\n                      <GenreItem key={index}>{style}</GenreItem>\n                    ))}\n                  </GenreList>\n                )}\n              </ComposerInfo>\n            )}\n          </SnippetItemWrapper>\n        );\n      })}\n    </SnippetListContainer>\n  );\n};\n\nexport default SnippetList;\n","import styled from \"styled-components\";\nimport { FOOTER_HEIGHT } from \"../../AppFooter\";\n\ninterface EditorContainerProps {\n  height?: string;\n}\n\nexport const EditorContainer = styled.div<EditorContainerProps>`\n  position: relative;\n  width: 100%;\n  height: ${(props) => props.height || \"100%\"};\n  min-height: 200px;\n`;\n\nexport const RawlContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  z-index: 1;\n`;\n\nexport const EditorPanel = styled.div<{ isFolded: boolean; height?: string }>`\n  position: fixed;\n  bottom: ${FOOTER_HEIGHT}px;\n  left: 0;\n  width: calc(100% - 470px); /* Leave space for PianoLegend (about 280px) */\n  height: ${(props) => props.height || \"50vh\"};\n  background: #080808;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  transition: transform 1s ease;\n  transform: translateY(${(props) => (props.isFolded ? \"100%\" : \"0\")});\n  border-top: 1px solid #333;\n  border-right: 1px solid #333;\n  z-index: 1000;\n  margin-bottom: 0;\n  padding-bottom: 0;\n`;\n\nexport const DebugPanel = styled.div`\n  flex: 1;\n  background-color: #080808;\n  border-right: 1px solid #333;\n  padding: 20px;\n  overflow: auto;\n  color: #d4d4d4;\n  font-family: \"Menlo\", \"Monaco\", \"Courier New\", monospace;\n  font-size: 12px;\n`;\n\nexport const EditorContent = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 0;\n  padding-bottom: 0;\n  overflow: auto;\n`;\n\nexport const CodeMirrorWrapper = styled.div`\n  position: relative;\n  flex: 1;\n  height: 100%;\n  isolation: isolate;\n  background-color: #080808;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 0;\n  padding-bottom: 0;\n\n  /* Ensure all CodeMirror elements stay on top */\n  & * {\n    position: relative;\n  }\n\n  .cm-editor {\n    position: absolute !important;\n    inset: 0;\n    height: 100%;\n    font-family: \"Menlo\", \"Monaco\", \"Courier New\", monospace;\n    font-size: 12px;\n    line-height: calc(1.4em + 4px);\n\n    /* Selection styles */\n    .cm-selectionBackground {\n      background-color: rgba(255, 255, 255, 0.2) !important;\n    }\n\n    .cm-focused .cm-selectionBackground {\n      background-color: rgba(255, 255, 255, 0.3) !important;\n    }\n\n    &::selection,\n    *::selection {\n      background-color: rgba(255, 255, 255, 0.3) !important;\n      color: #ffffff !important;\n    }\n\n    .cm-cursor {\n      border-left: 1px solid #ffa500 !important;\n      border-left-width: 1px !important;\n      height: 2em !important;\n      margin-top: -0.5em !important;\n    }\n\n    .cm-line {\n      padding-top: 2px;\n      padding-bottom: 2px;\n    }\n  }\n\n  /* Comment styling */\n  .comment {\n    color: #666666 !important;\n    font-style: italic;\n  }\n\n  .cm-scroller,\n  .cm-content,\n  .cm-line,\n  .cm-activeLine,\n  .cm-activeLineGutter {\n    position: relative;\n  }\n\n  .cm-editor .cm-gutters {\n    position: relative;\n  }\n\n  /* Add padding to gutter line numbers */\n  .cm-lineNumbers .cm-gutterElement:not(:first-child) {\n    padding-top: 2px;\n  }\n\n  /* Command styling:\n   * - Regular playback commands (c, ac, i, etc.) use bold styling\n   * - Analysis commands (phrases, etc.) use white italic styling (.analysis-command)\n   */\n  .command-name {\n    font-weight: bold;\n  }\n\n  /* Analysis command styling - white and italic for all analysis-related commands */\n  .analysis-command {\n    color: #ffffff !important;\n    font-style: italic;\n  }\n\n  /* Phrases command diff styling */\n  .phrase-diff {\n    color: #ffffff !important;\n    font-weight: bold;\n  }\n\n  .source-span {\n    text-decoration: underline;\n    text-decoration-style: dotted;\n    text-decoration-thickness: 1px;\n    text-underline-offset: 3px;\n  }\n\n  .invalid-command {\n    text-decoration-color: white;\n    opacity: 0.5;\n  }\n\n  /* Override text colors for note backgrounds */\n  .noteColor_0_colors {\n    color: #000000 !important;\n    background-color: white !important;\n    --background-color: white;\n  }\n  .noteColor_1_colors {\n    color: #ffffff !important;\n    background-color: rgb(130, 0, 0) !important;\n    --background-color: rgb(130, 0, 0);\n  }\n  .noteColor_2_colors {\n    color: #000000 !important;\n    background-color: red !important;\n    --background-color: red;\n  }\n  .noteColor_3_colors {\n    color: #ffffff !important;\n    background-color: #007000 !important;\n    --background-color: #007000;\n  }\n  .noteColor_4_colors {\n    color: #000000 !important;\n    background-color: #00fb47 !important;\n    --background-color: #00fb47;\n  }\n  .noteColor_5_colors {\n    color: #ffffff !important;\n    background-color: #9500b3 !important;\n    --background-color: #9500b3;\n  }\n  .noteColor_6_colors {\n    color: #000000 !important;\n    background-color: #ea7eff !important;\n    --background-color: #ea7eff;\n  }\n  .noteColor_7_colors {\n    color: #000000 !important;\n    background-color: rgb(120, 120, 120) !important;\n    --background-color: rgb(120, 120, 120);\n  }\n  .noteColor_8_colors {\n    color: #ffffff !important;\n    background-color: rgb(0, 0, 255) !important;\n    --background-color: rgb(0, 0, 255);\n  }\n  .noteColor_9_colors {\n    color: #000000 !important;\n    background-color: #03b9d5 !important;\n    --background-color: #03b9d5;\n  }\n  .noteColor_10_colors {\n    color: #ffffff !important;\n    background-color: #ff7328 !important;\n    --background-color: #ff7328;\n  }\n  .noteColor_11_colors {\n    color: #000000 !important;\n    background-color: yellow !important;\n    --background-color: yellow;\n  }\n\n  /* Add dot styles */\n  .dotAbove {\n    position: relative;\n  }\n  .dotAbove::before {\n    content: \"\";\n    position: absolute;\n    width: 0;\n    height: 0;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n    border-bottom: 5px solid;\n    border-bottom-color: var(--background-color, background-color);\n    top: -5px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n  .dotBelow {\n    position: relative;\n  }\n  .dotBelow::before {\n    content: \"\";\n    position: absolute;\n    width: 0;\n    height: 0;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n    border-top: 5px solid;\n    border-top-color: var(--background-color, background-color);\n    bottom: -5px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n\n  /* Remove any potential gaps in the CM scroller */\n  .cm-scroller {\n    margin-bottom: 0;\n    padding-bottom: 0;\n  }\n`;\n\nexport const FoldButton = styled.button<{\n  position?: \"top\" | \"side\";\n  isFolded?: boolean;\n}>`\n  position: absolute;\n  background: #080808;\n  border: 1px solid #333;\n  color: #d4d4d4;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.2s;\n  z-index: 1001;\n  font-size: 14px;\n\n  ${(props) =>\n    props.position === \"top\"\n      ? `\n    top: -30px;\n    left: 0;\n    width: 60px;\n    height: 30px;\n    border-bottom: none;\n    border-radius: 4px 4px 0 0;\n  `\n      : `\n    left: -30px;\n    top: -1px;\n    width: 30px;\n    height: 60px;\n    border-right: none;\n    border-radius: 4px 0 0 4px;\n  `}\n\n  &:hover {\n    background-color: #2d2d2d;\n  }\n`;\n\nexport const ErrorMessage = styled.div`\n  color: #ff6b6b;\n  font-size: 11px;\n  margin-top: 4px;\n`;\n\nexport const ResizeHandle = styled.div`\n  position: absolute;\n  top: -3px;\n  left: 0;\n  right: 0;\n  height: 6px;\n  background: transparent;\n  cursor: row-resize;\n  z-index: 1001;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  &:active {\n    background: rgba(255, 255, 255, 0.2);\n  }\n`;\n\n// Export a reusable styled component for colored note letters\nexport const NoteColorLetter = styled.span`\n  /* Override text colors for note backgrounds */\n  &.noteColor_0_colors {\n    color: #000000 !important;\n    background-color: white !important;\n    --background-color: white;\n  }\n  &.noteColor_1_colors {\n    color: #ffffff !important;\n    background-color: rgb(130, 0, 0) !important;\n    --background-color: rgb(130, 0, 0);\n  }\n  &.noteColor_2_colors {\n    color: #000000 !important;\n    background-color: red !important;\n    --background-color: red;\n  }\n  &.noteColor_3_colors {\n    color: #ffffff !important;\n    background-color: #007000 !important;\n    --background-color: #007000;\n  }\n  &.noteColor_4_colors {\n    color: #000000 !important;\n    background-color: #00fb47 !important;\n    --background-color: #00fb47;\n  }\n  &.noteColor_5_colors {\n    color: #ffffff !important;\n    background-color: #9500b3 !important;\n    --background-color: #9500b3;\n  }\n  &.noteColor_6_colors {\n    color: #000000 !important;\n    background-color: #ea7eff !important;\n    --background-color: #ea7eff;\n  }\n  &.noteColor_7_colors {\n    color: #000000 !important;\n    background-color: rgb(120, 120, 120) !important;\n    --background-color: rgb(120, 120, 120);\n  }\n  &.noteColor_8_colors {\n    color: #ffffff !important;\n    background-color: rgb(0, 0, 255) !important;\n    --background-color: rgb(0, 0, 255);\n  }\n  &.noteColor_9_colors {\n    color: #000000 !important;\n    background-color: #03b9d5 !important;\n    --background-color: #03b9d5;\n  }\n  &.noteColor_10_colors {\n    color: #ffffff !important;\n    background-color: #ff7328 !important;\n    --background-color: #ff7328;\n  }\n  &.noteColor_11_colors {\n    color: #000000 !important;\n    background-color: yellow !important;\n    --background-color: yellow;\n  }\n`;\n\nexport const StatusBar = styled.div`\n  padding: 1px 4px;\n  color: #888; /* Subtle gray color */\n  font-size: 9px;\n  font-family: monospace;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  bottom: 2px;\n  right: 2px;\n  width: 7em;\n  text-align: center;\n  z-index: 1000;\n  pointer-events: none;\n`;\n","import * as React from \"react\";\nimport { useContext } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport styled, { css } from \"styled-components\";\nimport { ADMIN_USER_ID } from \"./App\";\nimport { AppContext } from \"./AppContext\";\nimport SignIn from \"./SignIn\";\n\nconst HEADER_HEIGHT = \"30px\";\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: black;\n  height: ${HEADER_HEIGHT};\n  overflow: hidden;\n  z-index: 100000000;\n`;\n\nconst NavLinks = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nexport const baseLinkStyles = css`\n  display: inline-flex;\n  align-items: center;\n  padding: 0px 18px;\n  text-decoration: none;\n  height: ${HEADER_HEIGHT};\n\n  &:hover {\n    text-decoration: none;\n    background: #333;\n  }\n`;\n\nconst HeaderLink = styled(Link)`\n  ${baseLinkStyles}\n`;\n\nconst ExternalLink = styled.a`\n  ${baseLinkStyles}\n`;\n\nconst ExternalLinks = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst AppHeader: React.FC = () => {\n  const location = useLocation();\n  const path = location.pathname;\n  const {\n    user,\n    handleLogin,\n    handleLogout,\n    enableManualRemeasuring,\n    handleToggleManualRemeasuring,\n  } = useContext(AppContext);\n\n  const getLinkStyle = (pathPrefix: string): React.CSSProperties => {\n    if (pathPrefix === \"/corpus\") {\n      return path === \"/corpus/\" ? { background: \"white\", color: \"black\" } : {};\n    }\n    return path.startsWith(pathPrefix)\n      ? { background: \"white\", color: \"black\" }\n      : {};\n  };\n\n  return (\n    <HeaderContainer>\n      <NavLinks>\n        <HeaderLink\n          className=\"AppHeader-title\"\n          to={{ pathname: \"/\" }}\n          style={getLinkStyle(\"/100\")}\n        >\n          Rawl\n        </HeaderLink>\n        <HeaderLink to=\"/blog/\" style={getLinkStyle(\"/blog\")}>\n          Blog\n        </HeaderLink>\n        <HeaderLink to=\"/corpus/\" style={getLinkStyle(\"/corpus\")}>\n          Pieces\n        </HeaderLink>\n        <HeaderLink to=\"/s/\" style={getLinkStyle(\"/s\")}>\n          Structures\n        </HeaderLink>\n        <HeaderLink to=\"/timeline/\" style={getLinkStyle(\"/timeline\")}>\n          Timeline\n        </HeaderLink>\n        <HeaderLink to=\"/e/\" style={getLinkStyle(\"/e\")}>\n          Editor\n        </HeaderLink>\n        {/* <HeaderLink to=\"/d/\" style={getLinkStyle(\"/d\")}>\n          Decompose\n        </HeaderLink> */}\n        <HeaderLink to=\"/forge/\" style={getLinkStyle(\"/forge\")}>\n          Forge\n        </HeaderLink>\n      </NavLinks>\n\n      <ExternalLinks>\n        <ExternalLink\n          href=\"https://github.com/vpavlenko/rawl\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <div className=\"octocat\" />\n        </ExternalLink>\n        <ExternalLink\n          href=\"https://vpavlenko.github.io/layouts\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          Layouts\n        </ExternalLink>\n        <ExternalLink\n          href=\"https://github.com/vpavlenko/study-music\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          Books\n        </ExternalLink>\n        <SignIn\n          user={user}\n          handleLogin={handleLogin}\n          handleLogout={handleLogout}\n          handleToggleManualRemeasuring={handleToggleManualRemeasuring}\n          enableManualRemeasuring={enableManualRemeasuring}\n          adminUserId={ADMIN_USER_ID}\n        />\n      </ExternalLinks>\n    </HeaderContainer>\n  );\n};\n\nexport default AppHeader;\n","export interface StepExplanation {\n  title: string;\n  content: string;\n}\n\nexport interface DecompositionStep {\n  score: string;\n  explanation: string;\n}\n\nexport interface DecomposedScore {\n  steps: DecompositionStep[];\n  title: string;\n}\n\nexport const decomposeScores: { [key: string]: DecomposedScore } = {\n  \"gibran_alcocer_-_idea_15\": {\n    title: \"Gibran Alcocer - Idea 15\",\n    steps: [\n      {\n        score:\n          \"Db minor\\n\\nlh\\n1   i 1=2=3=4=5=6=7=8=\\n1b3 c 1-1b3 7 14 21\\n3   i 1=q=a=x=\\n3b2 c 3-3b2 1 2 3 4 5 6 7\",\n        explanation: \"Let's use the Db minor scale.\",\n      },\n      {\n        score:\n          \"Db minor\\n6/4\\nphrases 5-3\\n\\nrh\\n1 i 1-2-3-4-5-6-7-8-\\n2 i 1,3,5,x,135_\\n3 c 2 1 2 3 4 5 6 7\",\n        explanation: \"Let's build triads on all 7 notes of this scale.\",\n      },\n      {\n        score:\n          \"Db minor\\n6/4\\nbpm 180\\nphrases 5-1 20+1\\nsections 2 4 6\\n\\nlh\\n1 i qet_\\n1b3 c 1-1b3 1 2 3 4 5 6 7\\n\\n4 i 135,qet,adg,135,qet,adg,\\n5 i qet,qet,qet,qet,qet,qet,\\n6 i 1,3,5,q,e,t,\\n7 i 135,35q,5qe,qet,eta,tad,\\n8 i 1,3,5,q,5,3,\\n9 i q,eta,5,q,eta,5,\\n10 i 1q,qe,qe, 5,qe,qe,\\n12 c 10 0 1 2 3 4 5 6 7\\n\\n21 c 15\\n22 c 17\\n23 c 19\\n24 c 18\\n\\n25 c 21-24\",\n        explanation:\n          \"Now we have seven chords.\\n\\nLet's find a pattern to play the one chord with. What can it be?\\n\\nOnce we found our desired pattern,  let's play all chords using it: lower note - lower+middle (twice) - upper - lower+middle (twice).\\n\\nAnd then let's only pick four chords we need: 4 - 6 - 1 - 7. Let's make it a loop and repeat it twice.\",\n      },\n      {\n        score:\n          \"Db minor\\n6/4\\nbpm 180\\nphrases 1+1 10-3 15-3\\nsections 3 5\\n\\nrh\\n1b5 i x-q-q-q-q+\\n4 c 1-2\\n3 c 1-2\\n2 c 1-2\\n6 c 1-5\\n11b5 i x-y-y-t-r+\\n14 c 11-12 3\\n13 c 11-12 4\\n12 c 11-12 2\\n15 c 11-15 2\\n\\nlh\\n7 i 4r,ry,ry, q,ry,ry,\\n8 c 7 2 4 3\\n12 c 7-10\\n16 c 7-10\",\n        explanation:\n          \"Now we need a melody. How about simply taking a rhythmic motive and repeat it many times?\\n\\nMaybe doing it together with the accompaniment will make it a nice music?\\n\\nOr, a bit better, what if a motive approaches a chord's lower note from above, in smallest steps?\\n\\nWe can target any note of a chord to sound nice. On a second repetition, let's target a middle note.\",\n      },\n      {\n        score:\n          \"Db minor\\n6/4\\nbpm 180\\nphrases 1+1 14-3\\nsections 4\\n\\nrh\\n1b5 i x-q-q-7-6+\\n2b5 i x-q-q-w-e+\\n3b5 i x-e-r-e-q+\\n4b5 i x-q-w-q-7+\\n5b5 i x-w-e-w-6+\\n6b5 i x-6-6-7-8+\\n7b5 i x-e-e-r-t+\\n8b5 i x-t-y-t-r+\\n\\n10b5 i x-q-q-7-6+\\n11b5 i x-q-q-w-e+\\n12b6 i x-q-t,t,t,t,e,e-w+\\n14b5 i x-w-e-w-6+\\n15b5 i x-6-6-7-8_.t_r-.r=t_e_r_w+.\\n\\nlh\\n2 i 4r,ry,ry, q,ry,ry,\\n3 c 2 2 4 3\\n6 c 2-5\\n11 c 2-9\",\n        explanation:\n          \"The approach contour of the motive can be more diverse. Just let's make sure that both the approach tail (anacrusis) and the target are using colors of the chord underneath.\\n\\nAs the motive gets boring after two repetitions, let's not use it on chords 1 and 7. We'll do something more diverse instead.\\n\\nAnd this is exactly what Gibran Alcocer did for verse 1.\",\n      },\n      {\n        score:\n          \"Db minor\\n6/4\\nbpm 180\\nphrases 9-3 14-3\\nsections 3 5\\n\\nrh\\n1 i 8-6-4- 8-6-4-\\n1b4 c 1-1b4\\n2 c 1 2 4 3\\n\\n6 i y-e-q-y-e-q-\\n6b4 c 6-6b4 0 0 0\\n8 c 3-4\\n\\n11 i y-e-q-y-e-q-u-e-q-y-e-q-\\n12 c 11\\n13 i t-e-q-t-e-q-\\n13b4 c 11b4\\n14 i r-w-7-r-w-7-t-w-7-t-w-7-\\n15 c 11-14\\n\\n\\nlh\\n1 i 4r,ry,ry, q,ry,ry,\\n2 c 1 2 4 3\\n6 c 1-4\\n11 c 1-4\\n15 c 1-4\",\n        explanation:\n          \"Now, for chorus 1 let's do the rapid stairs of chord notes: \\\"arpeggios\\\".\\n\\nTo make it more interesting, let's put the same arpeggio on chords 4 and 6. So that we repeat the same idea twice and only then change. Western music always repeats something twice and then changes, isn't it?\\n\\nAnd then let's make the top line of arpeggio notes a more interesting independent line with its mini story. We'll repeat it twice, of course :)\",\n      },\n      {\n        score:\n          \"Db minor\\n6/4\\nbpm 180\\nphrases 1+1 22-3 27+1 36+1\\nsections 2 4 6 7 9\\n\\n\\nrh\\n1b5 i x-q-q-7-6+\\n2b5 i x-q-q-w-e+\\n3b6 i x-q-t,t,t,t,e,e-w+\\n5b5 i x-w-e-w-6+\\n6b5 i x-6-6-7-8_.t_r-.r=t_e_r_w_.e_.\\n\\n10 i y-e-q-y-e-q-u-e-q-y-e-q-\\n11 c 10\\n12 i t-e-q-t-e-q-\\n12b4 c 10b4\\n13 i r-w-7-r-w-7-t-w-7-t-w-7-\\n14 c 10-13\\n\\n27 i y_.t_.\\n\\n\\nlh\\n2 i 4r,ry,ry, q,ry,ry,\\n3 c 2 2 4 3\\n6 c 2-5 0 0 0\\n27 i us+.\\n\\n18 ac 1-9\\n28 ac 10-17\\n36 ac 27\\n\",\n        explanation:\n          \"Let's combine verse 1 and chorus 1. To align chord loops vertically, we'll leave measure 1 as an anacrusis on its own line.\\n\\nAnd then let's do a signature Gibran's thing: let's linger on the ends of each section by prolonging the last chord.\",\n      },\n      {\n        score:\n          \"Db minor\\n6/4\\nbpm 180\\nphrases 13-3 22-3 27+1\\nsections 4 7\\n\\nrh\\n1 i q_.y_t,\\n2 c 1\\n3 i e_e,e_r,\\n4 c 3 -1\\n5 c 1-4\\n\\n10 c 1-8\\n\\n19 c 1-3\\n22 i w_w,w,e,w,6_.y_t,\\n24 c 20-21\\n26 i w_.e_.y_.t_.\\n\\nlh\\n10 i 4r,ry,ry, q,ry,ry,\\n11 c 10 2 4 3\\n14 c 10-13\\n19 c 10-17\\n27 i us+.\\n\\n\",\n        explanation:\n          \"Now let's compose a verse 2. It should have a single line, like a verse 1, but the motive can be simpler. m.2 = m.1 (measure 2 repeats measure 1), then again m.4 = m.3 one note down on the scale. Repeat the whole thing twice.\\n\\nThe colors are picked to go well with our chord loop. So let's combine melody and accompaniment.\\n\\nLet's make small adjustments to make melody more interesting. And also the ending should be like that of verse 1, with lingering on the last chord.\",\n      },\n      {\n        score:\n          \"Db minor\\n6/4\\nbpm 180\\nphrases 1+1 10+1 19+1 28+1 37+1\\nsections 2 4 6 8\\n\\n\\n\\nrh\\n1b5 i x-q-q-7-6+\\n2b5 i x-q-q-w-e+\\n3b6 i x-q-t,t,t,t,e,e-w+\\n5b5 i x-w-e-w-6+\\n6b5 i x-6-6-7-8_.t_r-.r=t_e_r_w_.e_. y_.t_.\\n\\n11 i y-e-q-y-e-q-u-e-q-y-e-q-\\n12 c 11\\n13 i t-e-q-t-e-q-\\n13b4 c 11b4\\n14 i r-w-7-r-w-7-t-w-7-t-w-7-\\n15 c 11-14\\n19 c 10\\n\\n29 c 11-19\\n\\n20 i q_.y_t,\\n21 c 20\\n22 i e_e,e_r,\\n23 i w_w,w,e,w,6_.y_t,\\n25 c 21-22\\n27 c 9-10\\n\\n\\nlh\\n2 i 4r,ry,ry, q,ry,ry,\\n3 c 2 2 4 3\\n6 c 2-5\\n10 i us+.\\n11 c 2-10 0 0 0\\n\\n\",\n        explanation:\n          \"As we combine verse 1, chorus 1, verse 2 and chorus 2 (which is chorus 1 verbatim), we already have 37 measures of a genuine 21 century neo-classical music. Let's enjoy it before we design verse 3 and the ending.\",\n      },\n      {\n        score:\n          \"Db minor\\n6/4\\nbpm 180\\nphrases 9-1 20+1 29+1\\nsections 2 3 4 6\\n\\nrh\\n1 i e,q,r,q,t,q\\n2 c 1 0 0 0\\n\\n5b2 i x,.e-y-t-r,e,\\n7 c 5-6\\n6 c 5-6\\n8 c 5-7\\n9 i q_\\n10 i r_\\n11 i e_\\n\\n12 c 1-2\\n14 i x,u,u,u,y,t-r,x-e,.\\n15 c 8-10\\n18 c 1-1b5 \\n18b5 i t,e,w_.e_.y_.t_.\\n\\n21 c 12-20\\n\\n\\nlh\\n22 i 4r,ry,ry, q,ry,ry,\\n21 c 22 2 x 4 6 2 0 4 3\\n29 i us+.\\n\",\n        explanation:\n          \"Let's find more motives for verse 3. The first is rising notes alternating with a steady note. This we would probably repeat only twice in a row, so that it won't become too boring.\\n\\nA contrasting motive is going down the scale in a more intricate rhythm.\\n\\nLet's end it with different notes every time.\\n\\nAs we add chords, let's change them a bit. We're in verse 3 and we've repeated the loop enough already. Now it's time for a slight change to introduce freshness. 6 - 4 - 1 - 3 instead of a previous 4 - 6 - 1 - 7.\",\n      },\n      {\n        score:\n          \"Db minor\\n6/4\\nbpm 180\\nphrases 1+1 10+1 19+1 28+1 37+1 46+1 55+1\\nsections 2 4 6 8 10 12\\n\\n\\n\\nrh\\n1b5 i x-q-q-7-6+\\n2b5 i x-q-q-w-e+\\n3b6 i x-q-t,t,t,t,e,e-w+\\n5b5 i x-w-e-w-6+\\n6b5 i x-6-6-7-8_.t_r-.r=t_e_r_w_.e_. y_.t_.\\n\\n11 i y-e-q-y-e-q-u-e-q-y-e-q-\\n12 c 11\\n13 i t-e-q-t-e-q-\\n13b4 c 11b4\\n14 i r-w-7-r-w-7-t-w-7-t-w-7-\\n15 c 11-14\\n19 c 10\\n\\n29 c 11-19\\n\\n20 i q_.y_t,\\n21 c 20\\n22 i e_e,e_r,\\n23 i w_w,w,e,w,6_.y_t,\\n25 c 21-22\\n27 c 9-10\\n\\n38 i e,q,r,q,t,q\\n39 c 38\\n40 i x,u,u,u,y,t-r,x-e,.\\n43b2 i x,.e-y-t-r,e,\\n41 c 43 0 0\\n42 i q_\\n43 i r_\\n44 c 38-38b6\\n44b6 i e,\\n\\n47 c 20-28 0&7\\n\\n\\nlh\\n2 i 4r,ry,ry, q,ry,ry,\\n3 c 2 2 4 3\\n6 c 2-5\\n10 i us+.\\n11 c 2-10 0 0 0\\n47 c 2-9\\n38 c 2 2 0 4 6 2 0 4\\n\\n45 ac 9-10\\n\\n\\n\\nch2 4\\n47 i y-e-q- y-e-q-\\n47b4 c 47-47b4 0 0 0\\n49 i t-e-q- t-e-q- \\n49b4 c 49-49b4\\n50 i r-w-7- r-w-7- t-w-7- t-w-7-\\n51 c 47-50\",\n        explanation:\n          \"And a chorus 3 will combine both accompaniment, arpeggio and a melody from verse 2 - as if a pianist has three hands. Well, a real pianist doesn't, but a recording studio is a magic place.\\n\\nWe can combine ideas of verse and chorus because they share the same chord loop.\",\n      },\n    ],\n  },\n};\n","const keySlugMapping: Record<string, string> = {\n  \"match-1\": \"Maple_Leaf_Rag_Scott_Joplin\",\n  \"match-2\": \"s.-xarhakos---stoy-thoma---greek-music-055\",\n  \"match-3\": \"may-be---yiruma\",\n  \"match-4\": \"Sweden_Minecraft\",\n  \"match-5\": \"arabesque-l.-66-no.-1-in-e-major\",\n  \"match-6\": \"gol-e-sang---anoushiravan-rohani\",\n  \"match-7\": \"philip-glass---facades\",\n  \"match-8\": \"fear-not-this-night-guild-wars-2-piano-version\",\n  \"match-9\": \"dragonborn---skyrim-theme-song-piano-solo\",\n  \"match-10\": \"s.-xarhakos---mpoyrnovalia---greek-music-079\",\n  \"match-11\": \"Clair_de_Lune__Debussy\",\n  \"match-12\": \"il-coure-mio---anoushiravan-rohani\",\n  \"match-13\": \"philip-glass---pruit-igoe\",\n  \"match-14\": \"the_entertainer_scott_joplin\",\n  \"match-15\": \"it-s-your-day---yiruma\",\n  \"match-16\": \"dry-hands-minecraft\",\n\n  \"river-1\": \"river_flows_in_you_minus1\",\n  \"river-2\": \"river_flows_in_you_0\",\n  \"river-3\": \"river_flows_in_you_plus1\",\n  \"river-4\": \"river_flows_in_you_plus2\",\n  \"river-5\": \"river_flows_in_you_plus3\",\n  \"river-6\": \"river_flows_in_you_plus4\",\n  \"river-7\": \"river_flows_in_you_plus5\",\n\n  \"epoch-1\": \"sadness-and-sorrow-for-piano-solo\",\n  \"epoch-2\":\n    \"unravel-acoustic-ver-tokyo-ghoul-theishter-sheet-music-full-sheets\",\n  \"epoch-3\":\n    \"slow-waltz-24-pieces-for-children-op.39-no.-23---dmitry-kabalevsky\",\n  \"epoch-4\": \"souvenir-de-porto-rico-200-i.e.-206-follower-special\",\n  \"epoch-5\": \"lost-patrol-main-theme---chris-glaister-jonathan-dunn\",\n  \"epoch-6\": \"nocturne-op.21-no1---ignacy-feliks-dobrzynski\",\n  \"epoch-7\": \"grieg_lyric_2_waltz_yaskawa\",\n  \"epoch-8\": \"neon-mixtape-tour---choose-your-seeds\",\n  \"epoch-9\": \"saman---olafur-arnalds\",\n  \"epoch-10\": \"mendelssohn-opus-67-no.-2-aka-lost-illusions\",\n};\n\nexport default keySlugMapping;\n","import React, { Component, ErrorInfo, ReactNode } from \"react\";\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  public state: State = {\n    hasError: false,\n  };\n\n  public static getDerivedStateFromError(_: Error): State {\n    return { hasError: true };\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error(\"Uncaught error:\", error, errorInfo);\n  }\n\n  public render() {\n    if (this.state.hasError) {\n      return this.props.fallback || <h1>Sorry.. there was an error</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import {\n  faArrowUpRightFromSquare,\n  faLink,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport {\n  GenreList,\n  getEmojis,\n  getUniqueStyles,\n  hasMetadata,\n} from \"../../utils/corpusUtils\";\nimport { ComposerTitle } from \"./book/Book\";\nimport { corpora, MUSESCORE_TOP_100_SLUG } from \"./corpora/corpora\";\nimport { CorpusLink } from \"./corpora/CorpusLink\";\nimport { beautifySlug } from \"./corpora/utils\";\nimport { TOP_100_COMPOSERS } from \"./top100Composers\";\n\nconst MUSESCORE_ICON = `\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 32\">\n  <path d=\"M5.529 8.944h.087c.088-3.375 2.677-6.18 5.968-6.18 2.15 0 3.685.92 4.475 2.19-1.14.482-2.018 1.622-2.018 3.025 0 1.885 1.58 3.331 3.51 3.331 1.93 0 3.51-1.622 3.51-3.769 0-3.638-3.334-6.97-7.766-6.97-4.43 0-7.81 3.55-7.81 7.715 0 .175 0 .35.044.657m13.69 13.369 3.64-5.61L6.363 9.644l-.044.043 12.9 12.624Zm4.65-3.726c0 4.821-4.125 8.152-8.336 8.152-3.291 0-5.705-1.183-6.889-2.805 1.492-.877 2.37-2.367 2.37-4.251 0-2.806-2.282-5.085-5.31-5.085C2.502 14.597 0 17.183 0 20.558c0 5.48 5.177 10.87 12.329 10.87C19.48 31.429 24 25.819 24 19.464c0-.351 0-.57-.044-.877h-.087Z\" fill=\"white\"/>\n</svg>\n`;\n\nexport type CompositionTitleProps = {\n  slug: string;\n  sourceUrl: string | null;\n  onSourceUrlUpdate: (newUrl: string) => void;\n};\n\nconst MetadataContainer = styled.div`\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  margin-left: 10px;\n`;\n\nexport const RelatedCorpora = styled.div<{ horizontal?: boolean }>`\n  display: flex;\n  flex-direction: ${(props) => (props.horizontal ? \"row\" : \"column\")};\n  gap: ${(props) => (props.horizontal ? \"30px\" : \"8px\")};\n`;\n\nexport const CorpusRow = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nexport const RelatedCorporaDisplay: React.FC<{\n  slug: string;\n  horizontal?: boolean;\n  showMetadata?: boolean;\n}> = ({ slug, horizontal = false, showMetadata = true }) => {\n  const relatedCorporaSlugs = React.useMemo(() => {\n    return corpora\n      .filter((corpus) => corpus.midis.includes(slug))\n      .filter((corpus) => corpus.slug !== MUSESCORE_TOP_100_SLUG)\n      .map((corpus) => corpus.slug);\n  }, [slug]);\n\n  if (relatedCorporaSlugs.length === 0) return null;\n\n  return (\n    <RelatedCorpora horizontal={horizontal}>\n      {relatedCorporaSlugs.map((corpusSlug) => {\n        const corpus = corpora.find((c) => c.slug === corpusSlug);\n        if (!corpus) return null;\n\n        return (\n          <CorpusRow key={corpusSlug}>\n            <CorpusLink slug={corpusSlug} />\n            {showMetadata && hasMetadata(corpus) && (\n              <MetadataContainer>\n                {corpus.country && <div>{getEmojis(corpus.country)}</div>}\n                {(corpus.genre || corpus.style) && (\n                  <GenreList>\n                    {getUniqueStyles(corpus.genre, corpus.style).join(\", \")}\n                  </GenreList>\n                )}\n                {corpus.composerBirthYear && (\n                  <span style={{ color: \"#999\" }}>\n                    *{corpus.composerBirthYear}\n                  </span>\n                )}\n              </MetadataContainer>\n            )}\n          </CorpusRow>\n        );\n      })}\n    </RelatedCorpora>\n  );\n};\n\nconst CompositionTitle: React.FC<CompositionTitleProps> = ({\n  slug,\n  sourceUrl,\n  onSourceUrlUpdate,\n}) => {\n  const [editedUrl, setEditedUrl] = React.useState(sourceUrl || \"\");\n\n  const handleSave = () => {\n    if (editedUrl !== sourceUrl) {\n      onSourceUrlUpdate(editedUrl);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") {\n      handleSave();\n    }\n  };\n\n  const formattedTitle = beautifySlug(slug);\n\n  const composerInfo = React.useMemo(() => {\n    return TOP_100_COMPOSERS.find((composer) => composer.slug === slug);\n  }, [slug]);\n\n  // Update document title when formattedTitle changes\n  React.useEffect(() => {\n    const title = composerInfo\n      ? `${composerInfo.composer} - ${composerInfo.displayTitle}`\n      : formattedTitle;\n    document.title = title;\n\n    // Restore original title when component unmounts\n    return () => {\n      document.title = \"Rawl: Visual Music Theory\";\n    };\n  }, [formattedTitle, composerInfo]);\n\n  const searchQuery = encodeURIComponent(formattedTitle);\n  const museScoreUrl = `https://musescore.com/sheetmusic?sort=view_count&text=${searchQuery}`;\n\n  return (\n    <div\n      style={{\n        padding: \"10px\",\n        backgroundColor: \"rgba(0, 0, 0, 0.8)\",\n        color: \"white\",\n        fontSize: \"16px\",\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n      }}\n    >\n      <h1\n        style={{\n          margin: 0,\n          fontSize: \"1em\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: \"8px\",\n          alignItems: \"flex-start\",\n        }}\n      >\n        <div>\n          {composerInfo ? (\n            <ComposerTitle\n              composer={composerInfo.composer}\n              displayTitle={composerInfo.displayTitle}\n            />\n          ) : (\n            formattedTitle\n          )}\n          {sourceUrl ? (\n            <a\n              href={sourceUrl}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              style={{\n                color: \"gray\",\n                textDecoration: \"none\",\n                cursor: \"pointer\",\n              }}\n            >\n              {sourceUrl.includes(\"musescore.com\") ? (\n                <span\n                  style={{\n                    display: \"inline-block\",\n                    width: \"12px\",\n                    height: \"12px\",\n                    marginLeft: \"20px\",\n                  }}\n                  dangerouslySetInnerHTML={{ __html: MUSESCORE_ICON }}\n                />\n              ) : (\n                <FontAwesomeIcon\n                  icon={faArrowUpRightFromSquare}\n                  style={{ width: \"15px\", marginLeft: \"10px\" }}\n                />\n              )}\n            </a>\n          ) : (\n            <>\n              <input\n                type=\"text\"\n                value={editedUrl}\n                onChange={(e) => setEditedUrl(e.target.value)}\n                onKeyDown={handleKeyDown}\n                onBlur={handleSave}\n                style={{\n                  marginLeft: \"10px\",\n                  fontSize: \"0.8em\",\n                  width: \"200px\",\n                  background: \"rgba(255, 255, 255, 0.1)\",\n                  border: \"none\",\n                  color: \"white\",\n                  padding: \"2px 5px\",\n                }}\n                placeholder=\"Enter source URL\"\n              />\n              <a\n                href={museScoreUrl}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                style={{\n                  color: \"gray\",\n                  textDecoration: \"none\",\n                  cursor: \"pointer\",\n                  marginLeft: \"10px\",\n                }}\n                title=\"Search on MuseScore\"\n              >\n                <FontAwesomeIcon icon={faLink} />\n              </a>\n            </>\n          )}\n        </div>\n\n        <RelatedCorporaDisplay slug={slug} />\n      </h1>\n    </div>\n  );\n};\n\nexport default CompositionTitle;\n","import React, { useCallback, useContext, useMemo } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport { Snippet, rehydrateSnippet } from \"./analysis\";\nimport EnhancedFrozenNotes from \"./FrozenNotes\";\n\nexport const PX_IN_MEASURE = 90;\n\nconst SnippetItemContainer = styled.div<{\n  width: number;\n  isPreview?: boolean;\n  isPreviewWithoutTime?: boolean;\n}>`\n  display: flex;\n  flex-direction: column;\n  width: ${(props) => props.width}px;\n  border-radius: ${(props) => (props.isPreview ? \"0\" : \"5px\")};\n  overflow: hidden;\n`;\n\nconst SnippetHeader = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  background-color: #222;\n`;\n\nconst TimingInfo = styled.div`\n  color: #888;\n  font-size: 0.8em;\n  margin-top: 4px;\n  text-align: center;\n`;\n\nconst SnippetContent = styled.div`\n  overflow-y: auto;\n  overflow-x: hidden;\n`;\n\nconst DeleteButton = styled.button`\n  background-color: #ff4136;\n  color: white;\n  border: none;\n  padding: 5px 10px;\n  border-radius: 3px;\n  cursor: pointer;\n  &:hover {\n    background-color: #ff7066;\n  }\n`;\n\nconst PlaybackCursor = styled.div`\n  position: absolute;\n  width: 2px;\n  height: 100%;\n  background-color: #ff6b00;\n  pointer-events: none;\n  z-index: 9999;\n  opacity: 0.8;\n  top: 0;\n  left: 0;\n  will-change: transform;\n  transform: translateX(0);\n  backface-visibility: hidden;\n`;\n\ninterface SnippetItemProps {\n  snippet: Snippet;\n  index: number;\n  deleteSnippet?: (index: number) => void;\n  noteHeight: number;\n  isPreview?: boolean;\n  hoveredColors?: string[] | null;\n}\n\nconst SnippetItem: React.FC<SnippetItemProps> = ({\n  snippet,\n  index,\n  deleteSnippet,\n  noteHeight,\n  isPreview = false,\n  hoveredColors,\n}) => {\n  const appContext = useContext(AppContext);\n  const { currentMidi } = appContext;\n\n  const { rehydratedNotes, rehydratedAnalysis, rehydratedMeasuresAndBeats } =\n    useMemo(() => rehydrateSnippet(snippet), [snippet]);\n\n  const paddedMeasuresAndBeats = useMemo(() => {\n    const startMeasure = snippet.measuresSpan[0];\n    const endMeasure = snippet.measuresSpan[1];\n\n    // Ensure we don't create an array with negative length\n    const paddingLength = Math.max(0, startMeasure - 1);\n\n    // Slice the measures array to include only the selected range\n    const slicedMeasures = rehydratedMeasuresAndBeats.measures.slice(\n      0,\n      endMeasure + 1,\n    );\n\n    const paddedMeasures = [\n      ...Array(paddingLength).fill(rehydratedMeasuresAndBeats.measures[0] || 0),\n      ...slicedMeasures,\n    ];\n\n    return {\n      ...rehydratedMeasuresAndBeats,\n      measures: paddedMeasures,\n    };\n  }, [snippet, rehydratedMeasuresAndBeats]);\n\n  const snippetMidiRange = useMemo(() => {\n    let min = Infinity;\n    let max = -Infinity;\n    rehydratedNotes.forEach((voiceNotes) => {\n      voiceNotes.forEach((note) => {\n        const midiNumber = note.note.midiNumber;\n        min = Math.min(min, midiNumber);\n        max = Math.max(max, midiNumber);\n      });\n    });\n    return [min, max] as [number, number];\n  }, [rehydratedNotes]);\n\n  const snippetMidiNumberToY = useCallback(\n    (midiNumber: number) => (snippetMidiRange[1] - midiNumber + 1) * noteHeight,\n    [snippetMidiRange, noteHeight],\n  );\n\n  const timeRange = useMemo(() => {\n    const startMeasure = snippet.measuresSpan[0];\n    const endMeasure = snippet.measuresSpan[1];\n    const startTime = paddedMeasuresAndBeats.measures[startMeasure - 1] || 0;\n    const endTime = paddedMeasuresAndBeats.measures[endMeasure] || startTime;\n    return [startTime, endTime] as [number, number];\n  }, [snippet, paddedMeasuresAndBeats]);\n\n  const containerWidth = useMemo(() => {\n    return (rehydratedMeasuresAndBeats.measures.length - 1) * PX_IN_MEASURE;\n  }, [timeRange]);\n\n  const toX = useCallback(\n    (seconds: number) => {\n      const normalizedTime =\n        (seconds - timeRange[0]) / (timeRange[1] - timeRange[0]);\n      return isNaN(normalizedTime) ? 0 : normalizedTime * containerWidth; // Use containerWidth instead of 400\n    },\n    [timeRange, containerWidth],\n  );\n\n  const isCurrentlyPlaying = useMemo(() => {\n    const snippetSlug = (snippet as any).composerSlug;\n    if (!currentMidi || !snippet.secondsSpan) return false;\n\n    const isPlaying = currentMidi.slug === snippetSlug;\n\n    return isPlaying;\n  }, [currentMidi, snippet]);\n\n  const cursorPosition = useMemo(() => {\n    if (\n      !isCurrentlyPlaying ||\n      !snippet.secondsSpan ||\n      appContext.currentPlaybackTime === null ||\n      appContext.currentPlaybackTime < snippet.secondsSpan[0]\n    ) {\n      return null;\n    }\n\n    const [start, end] = snippet.secondsSpan;\n    const currentTime = appContext.currentPlaybackTime;\n\n    // Calculate position as a percentage of the time range\n    const timeProgress = (currentTime - start) / (end - start);\n    const xPos = timeProgress * containerWidth;\n\n    return xPos;\n  }, [\n    isCurrentlyPlaying,\n    snippet.secondsSpan,\n    appContext.currentPlaybackTime,\n    containerWidth,\n  ]);\n\n  return (\n    <SnippetItemContainer\n      width={containerWidth}\n      isPreview={isPreview}\n      isPreviewWithoutTime={isPreview && snippet.secondsSpan === undefined}\n    >\n      {!isPreview && (\n        <SnippetHeader>\n          {!isPreview && deleteSnippet && (\n            <DeleteButton onClick={() => deleteSnippet(index)}>\n              Delete\n            </DeleteButton>\n          )}\n          <span>\n            {snippet.tag.replace(\":\", \": \")}{\" \"}\n            <span style={{ color: \"gray\" }}>\n              {snippet.measuresSpan.join(\"..\")}\n            </span>\n          </span>\n          {snippet.secondsSpan &&\n            Array.isArray(snippet.secondsSpan) &&\n            typeof snippet.secondsSpan[0] === \"number\" && (\n              <TimingInfo>\n                {snippet.secondsSpan[0].toFixed(2)}s -{\" \"}\n                {snippet.secondsSpan[1].toFixed(2)}s\n              </TimingInfo>\n            )}\n        </SnippetHeader>\n      )}\n      <SnippetContent style={{ position: \"relative\" }}>\n        {cursorPosition !== null && (\n          <PlaybackCursor\n            style={{\n              transform: `translateX(${cursorPosition}px)`,\n              transition:\n                appContext.currentPlaybackTime > snippet.secondsSpan[0]\n                  ? \"transform 0.74s linear\"\n                  : \"none\",\n            }}\n          />\n        )}\n        <EnhancedFrozenNotes\n          notes={rehydratedNotes}\n          midiNumberToY={snippetMidiNumberToY}\n          maxWidth={containerWidth}\n          analysis={rehydratedAnalysis}\n          measuresAndBeats={paddedMeasuresAndBeats}\n          noteHeight={noteHeight}\n          startMeasure={snippet.measuresSpan[0]}\n          toX={toX}\n          timeRange={timeRange}\n          isPreview={isPreview}\n          phraseStarts={snippet.phraseStarts || []}\n          hoveredColors={hoveredColors}\n        />\n      </SnippetContent>\n    </SnippetItemContainer>\n  );\n};\n\nexport default SnippetItem;\n","import * as React from \"react\";\nimport { SecondsConverter, SecondsSpan } from \"./Rawl\";\nimport { ColoredNote, Note, PitchBendPoint } from \"./parseMidi\";\n\n// Also useful emojis\n//      \n\n// https://www.stevenestrella.com/midi/gmdrums.gif\nconst GM_DRUM_KIT = {\n  28: \"\",\n  31: \"\", //\"Metronome Click\",\n  35: \"\", //\"Acoustic Bass Drum\",\n  36: \"\", //\"Bass Drum 1\",\n  37: \"\", //\"Side Stick\",\n  38: \"\", //\"Acoustic Snare\",\n  39: \"\", //\"Hand Clap\",\n  40: \"\", //\"Electric Snare\",\n  41: \"0\", //\"Low Floor Tom\",\n  42: \"\", // \"Closed Hi Hat\",\n  43: \"1\", //\"High Floor Tom\",\n  44: \"\", //\"Pedal Hi-Hat\",\n  45: \"2\", //\"Low Tom\",\n  46: \"\", //\"Open Hi-Hat\",\n  47: \"3\", // \"Low-Mid Tom\",\n  48: \"4\", //\"Hi-Mid Tom\",\n  49: \"\", //\"Crash Cymbal 1\",\n  50: \"5\", //\"High Tom\",\n  51: \"\", //\"Ride Cymbal 1\",\n  52: \"\", //\"Chinese Cymbal\",\n  53: \"\", //\"Ride Bell\",\n  54: \"\", //\"Tambourine\",\n  55: \"\", //\"Splash Cymbal\",\n  56: \"\",\n  57: \"\", //\"Crash Cymbal 2\",\n  58: \"\",\n  59: \"\", //\"Ride Cymbal 2\",\n  60: \"\",\n  61: \"\",\n  62: \"\",\n  63: \"\",\n  64: \"\",\n  65: \"\",\n  66: \"\",\n  67: \"\",\n  68: \"\",\n  69: \"\",\n  70: \"\",\n  71: \"\",\n  72: \"\",\n  73: \"#\",\n  74: \"\",\n  75: \"\",\n  76: \"\",\n  77: \"\",\n  78: \"\",\n  79: \"\",\n  80: \"\",\n  81: \"\",\n  82: \"\", //'Shaker',\n  83: \"\", //\"Jingle Bell\",\n  84: \"\",\n  85: \"\",\n  86: \"\",\n  87: \"\",\n};\n\ntype MouseEventHanlder = (note: Note) => void;\nexport type MouseHandlers = {\n  handleNoteClick: MouseEventHanlder | null;\n  handleMouseEnter: MouseEventHanlder;\n  handleMouseLeave: () => void;\n  hoveredNote: Note | null;\n  systemClickHandler: (\n    e: React.MouseEvent,\n    xToSeconds?: (number) => number,\n  ) => void;\n};\n\nconst convertPitchBendToPathData = (\n  pitchBendData: PitchBendPoint[],\n  span: SecondsSpan,\n  noteHeight: number,\n  secondsToX: SecondsConverter,\n): string => {\n  const pitchBendRange = 8192;\n  const noteDuration = span[1] - span[0];\n  const noteStartX = secondsToX(span[0]);\n\n  const pitchBendToY = (value) => {\n    const normalizedValue = (value + pitchBendRange) / (2 * pitchBendRange); // Normalize to 0-1\n    return noteHeight * (1 - normalizedValue) * 4 + noteHeight / 2; // Invert because SVG's Y increases downwards\n  };\n\n  // Map a time value to the SVG's X coordinate, relative to the note's duration\n  const timeToX = (time) => {\n    const relativeTime = time - span[0]; // Time relative to the note's start\n    const normalizedTime = relativeTime / noteDuration; // Normalize to 0-1\n    return normalizedTime * (secondsToX(span[1]) - noteStartX); // Scale to note's width\n  };\n\n  // Start the path data string at the first pitch bend point\n  let pathData = `M ${timeToX(pitchBendData[0].time)} ${pitchBendToY(\n    pitchBendData[0].value,\n  )}`;\n\n  // Add line segments to each subsequent pitch bend point\n  pitchBendData.forEach((point, index) => {\n    if (index > 0) {\n      // Skip the first point as it's already used in 'M'\n      pathData += ` L ${timeToX(point.time)} ${pitchBendToY(point.value)}`;\n    }\n  });\n\n  return pathData;\n};\n\nexport const getNoteRectangles = (\n  notes: ColoredNote[],\n  midiNumberToY: (number: number) => number,\n  noteHeight: number,\n  handleNoteClick: MouseEventHanlder,\n  handleMouseEnter: MouseEventHanlder,\n  handleMouseLeave: () => void,\n  secondsToX: SecondsConverter,\n  enableManualRemeasuring: boolean,\n  hoveredColors: string[] | null,\n  showSourceLocation: boolean = false,\n) => {\n  console.log(\"run getNoteRectangles on \", notes.length, \" notes\");\n  return notes.map((note) => {\n    const {\n      isDrum,\n      note: { midiNumber, relativeNumber },\n      color,\n      voiceIndex,\n      isActive,\n      sourceLocation,\n      noteUnderCursor,\n    } = note;\n    const number = relativeNumber === undefined ? midiNumber : relativeNumber;\n\n    // Calculate base height and top position\n    const baseHeight = noteHeight * 2;\n    const baseTop = midiNumberToY(isDrum ? number + 12 : number) - noteHeight;\n\n    const left = secondsToX(note.span[0]);\n    const width = secondsToX(note.span[1]) - secondsToX(note.span[0]);\n\n    // Determine if the note is highlighted based on color selection\n    const isHighlighted = !hoveredColors || hoveredColors.includes(color);\n\n    // Adjust height and top position for notes under the cursor\n    const height =\n      isActive && isHighlighted\n        ? noteUnderCursor\n          ? baseHeight * 2\n          : baseHeight\n        : 0.5;\n    const top =\n      isActive && isHighlighted\n        ? noteUnderCursor\n          ? baseTop - baseHeight\n          : baseTop\n        : baseTop + baseHeight - 0.5;\n\n    const pathData = note.pitchBend\n      ? convertPitchBendToPathData(\n          note.pitchBend,\n          note.span,\n          noteHeight,\n          secondsToX,\n        )\n      : null;\n\n    // Format source location string if it exists\n    let sourceLocationText = \"\";\n    if (sourceLocation) {\n      // Format the command type (i for insert, c for copy, ac for all-channels copy)\n      const commandType =\n        sourceLocation.command === \"insert\"\n          ? \"i\"\n          : sourceLocation.command === \"copy\"\n          ? \"c\"\n          : sourceLocation.command === \"ac\"\n          ? \"ac\"\n          : \"\";\n\n      if (commandType && sourceLocation.row && sourceLocation.col) {\n        sourceLocationText = `${commandType} ${sourceLocation.row},${sourceLocation.col}`;\n      }\n    }\n\n    return isDrum ? (\n      isActive && (\n        <div\n          style={{\n            position: \"absolute\",\n            fontSize: `${height}px`,\n            height: `${height}px`,\n            width: `${height}px`,\n            overflow: \"visible\",\n            left,\n            top,\n            fontFamily: \"Helvetica, sans-serif\",\n            color: \"white\",\n            placeItems: \"center\",\n            transform: \"translateX(-50%)\", // Shift the div left by half its width\n            whiteSpace: \"nowrap\", // Prevent text wrapping\n            zIndex: 1000,\n          }}\n        >\n          {GM_DRUM_KIT[midiNumber] || midiNumber}\n        </div>\n      )\n    ) : (\n      <div\n        key={`nr_${note.id}`}\n        className={`${color} voiceShape-${voiceIndex} ${\n          noteUnderCursor ? \"note-under-cursor\" : \"\"\n        }`}\n        style={{\n          position: \"absolute\",\n          height: `${height}px`,\n          width,\n          overflow: \"visible\",\n          top,\n          left,\n          pointerEvents: handleNoteClick ? \"auto\" : \"none\",\n          zIndex:\n            Math.round(10 + (width > 0 ? 1000 / width : 1000)) +\n            (noteUnderCursor ? 100 : 0),\n          boxSizing: \"border-box\",\n          display: \"grid\",\n          boxShadow: isActive && isHighlighted ? \"0 0 0px 0.5px black\" : \"\",\n          cursor: enableManualRemeasuring\n            ? \"e-resize\"\n            : handleNoteClick\n            ? \"pointer\"\n            : \"default\",\n          opacity: noteUnderCursor ? 1 : undefined,\n        }}\n        onClick={(e) => {\n          e.stopPropagation();\n          if (handleNoteClick) {\n            handleNoteClick(note);\n          }\n        }}\n        onMouseEnter={(e) => !isDrum && handleMouseEnter(note)}\n        onMouseLeave={() => !isDrum && handleMouseLeave()}\n      >\n        {pathData && isActive && isHighlighted && (\n          <div style={{ position: \"relative\", width: \"100%\", height: \"100%\" }}>\n            <svg\n              style={{\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                height: \"100%\",\n                width: \"100%\",\n                overflow: \"visible\",\n              }}\n            >\n              <path d={pathData} stroke=\"white\" strokeWidth=\"4\" fill=\"none\" />\n              <path d={pathData} stroke=\"black\" strokeWidth=\"2\" fill=\"none\" />\n            </svg>\n          </div>\n        )}\n        {showSourceLocation &&\n          sourceLocationText &&\n          isActive &&\n          isHighlighted && (\n            <div\n              style={{\n                position: \"absolute\",\n                top: \"-16px\",\n                left: 0,\n                color: \"white\",\n                fontSize: \"10px\",\n                whiteSpace: \"nowrap\",\n                backgroundColor: \"rgba(0,0,0,0.5)\",\n                padding: \"1px 3px\",\n                borderRadius: \"2px\",\n                pointerEvents: \"none\",\n              }}\n            >\n              {sourceLocationText}\n            </div>\n          )}\n      </div>\n    );\n  });\n};\n","import { IconDefinition } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nconst ToggleContainer = styled.div`\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  z-index: 3;\n  padding: 2px;\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.2);\n`;\n\nconst ToggleIcon = styled.div<{ active: boolean }>`\n  color: ${(props) => (props.active ? \"white\" : \"#666\")};\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst ToggleSlider = styled.div`\n  width: 32px;\n  height: 16px;\n  background: #444;\n  border-radius: 8px;\n  position: relative;\n  cursor: pointer;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background: #555;\n  }\n`;\n\nconst SliderKnob = styled.div<{ isRight: boolean }>`\n  width: 12px;\n  height: 12px;\n  background: white;\n  border-radius: 50%;\n  position: absolute;\n  top: 2px;\n  left: 2px;\n  transition: transform 0.2s;\n  transform: translateX(${(props) => (props.isRight ? \"16px\" : \"0\")});\n`;\n\ninterface ToggleProps {\n  leftIcon: IconDefinition;\n  rightIcon: IconDefinition;\n  isRight: boolean;\n  onToggle: () => void;\n  leftTitle?: string;\n  rightTitle?: string;\n}\n\nexport const Toggle: React.FC<ToggleProps> = ({\n  leftIcon,\n  rightIcon,\n  isRight,\n  onToggle,\n  leftTitle,\n  rightTitle,\n}) => {\n  return (\n    <ToggleContainer>\n      <ToggleIcon active={!isRight}>\n        <FontAwesomeIcon icon={leftIcon} />\n      </ToggleIcon>\n      <ToggleSlider onClick={onToggle} title={isRight ? leftTitle : rightTitle}>\n        <SliderKnob isRight={isRight} />\n      </ToggleSlider>\n      <ToggleIcon active={isRight}>\n        <FontAwesomeIcon icon={rightIcon} />\n      </ToggleIcon>\n    </ToggleContainer>\n  );\n};\n","import { faChevronDown, faChevronUp } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport { FoldButton } from \"./EditorStyles\";\n\ninterface FoldButtonWithIconProps {\n  position?: \"top\" | \"side\";\n  isFolded: boolean;\n  onClick: () => void;\n}\n\nexport const FoldButtonWithIcon: React.FC<FoldButtonWithIconProps> = ({\n  position = \"top\",\n  isFolded,\n  onClick,\n}) => (\n  <FoldButton position={position} isFolded={isFolded} onClick={onClick}>\n    <FontAwesomeIcon icon={isFolded ? faChevronUp : faChevronDown} />\n  </FoldButton>\n);\n\nexport default FoldButtonWithIcon;\n","const EXPLANATIONS: Record<string, string> = {\n  \"parallel:symmetry\": \"Mixed use of I and i within the same section\",\n  \"form:sentence\":\n    \"Idea (2 measures), its restatement (2 measures), fragmentation of the idea (1+1 measures), cadence (2 measures)\",\n};\n\nexport default EXPLANATIONS;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\ninterface SnippetLinkProps {\n  chapter: string;\n  topic: string;\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n}\n\nexport const SnippetLink: React.FC<SnippetLinkProps> = ({\n  chapter,\n  topic,\n  onMouseEnter,\n  onMouseLeave,\n}) => {\n  return (\n    <Link\n      to={`/s/${encodeURIComponent(chapter.trim())}/${encodeURIComponent(\n        topic.trim(),\n      )}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      onClick={(e) => e.stopPropagation()}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      style={{\n        textDecoration: \"none\",\n        color: \"inherit\",\n        display: \"inline-block\",\n        lineHeight: \"0.9\",\n        position: \"relative\",\n      }}\n    >\n      <div>\n        <span style={{ color: \"#777\" }}>{chapter.replace(/_/g, \" \")}</span>\n        <span style={{ color: \"#ccc\", display: \"block\" }}>\n          {topic.replace(/_/g, \" \")}\n        </span>\n      </div>\n    </Link>\n  );\n};\n","import { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { ReactNode, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useLocalStorage } from \"usehooks-ts\";\nimport { a, c, k, q } from \"./book/chapters\";\nimport { TonicProvider } from \"./legends/ChordStairs\";\n\nconst Pp = styled.div`\n  margin-bottom: 15px;\n`;\n\nconst Label = styled.span`\n  font-weight: bold;\n  color: #666;\n`;\n\nconst m = (n: number) => <>m. {n}</>;\n\nconst FoldButton = styled.button`\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  width: 25px;\n  height: 25px;\n  background: #1e1e1e;\n  color: #d4d4d4;\n  border: 1px solid #333;\n  font-size: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1001;\n\n  &:hover {\n    background-color: #2d2d2d;\n  }\n`;\n\ntype QAPair = {\n  q: string | ReactNode;\n  a?: ReactNode;\n};\n\nexport const NARRATIVES: Record<string, { qa: QAPair[] }> = {\n  \"happy-birthday\": {\n    qa: [\n      {\n        q: \"How many colors are in this score?\",\n        a: (\n          <>\n            Seven colors. This is an C major scale starting from a white note (a{\" \"}\n            <i>tonic</i>). Play with this scale: {k(\"white-keys\")}\n          </>\n        ),\n      },\n      {\n        q: 'Click on the \"melody\" in the top right panel to solo the melody. Listen to it separately. What repeats four times in it?',\n        a: \"A motive starting with two short notes is repeated four times, starting at the ends of measures 1, 3, 5, and 7.\",\n      },\n      // {\n      //   q: (\n      //     <>\n      //       If you have stereo sound output now, enable the{\" \"}\n      //       {FORCED_PANNING_LABEL} mode (the page will refresh). Now listen to\n      //       the song again. What do you hear?\n      //     </>\n      //   ),\n      //   a: \"The melody is now in the right ear and the accompaniment in the left one.\",\n      // },\n    ],\n  },\n  \"someone-like-you\": {\n    qa: [\n      {\n        q: (\n          <>\n            <Pp>\n              This score follows{\" \"}\n              {a(\n                \"https://www.youtube.com/watch?v=hLQl3WQQoQ0\",\n                \"the YouTube version\",\n              )}{\" \"}\n              closely.{\" \"}\n              {a(\n                \"https://genius.com/Adele-someone-like-you-lyrics\",\n                \"Lyrics on Genius\",\n              )}\n            </Pp>\n            <Pp>\n              Name the chords of the loop that's used in the intro and in all\n              verses.\n            </Pp>\n          </>\n        ),\n        a: <>It's {c`I iii vi IV`}</>,\n      },\n      {\n        q: <>The loop in the chorus is slightly different. Name its chords.</>,\n        a: <>It's {c`I V vi IV`}</>,\n      },\n      {\n        q: (\n          <>\n            Solo the vocal part - click on the \"Choir Aahs\" in the top right\n            voice legend. The main motive of the verse melody is one measure\n            long, starting from the end of {m(4)}. How many times does it repeat\n            almost verbatim and what happens with it afterwards?\n          </>\n        ),\n        a: (\n          <>\n            The {c`5 3 2 1 6`} repeats about five times and then mutates with\n            each measure - uses different contours for the same notes, gets more\n            shorter notes to the end.\n          </>\n        ),\n      },\n    ],\n  },\n  \"despacito-piano-cover-peter-bence\": {\n    qa: [\n      {\n        q: (\n          <>\n            People argue about the tonic here. {q(\"vice_despacito\")} I'll teach\n            you how to recolor. Select the measure number 1. Then, hover any\n            note to make it a white tonic note. To apply the coloring, click on\n            the desired tonic.\n          </>\n        ),\n      },\n    ],\n  },\n};\n\nexport const SongNarrative: React.FC<{\n  slug: string;\n  currentTonic?: number;\n}> = ({ slug, currentTonic }) => {\n  const [lastOpenedIndex, setLastOpenedIndex] = useState(0);\n  const [showNarrative, setShowNarrative] = useLocalStorage(\n    \"showNarrative\",\n    true,\n  );\n\n  const narrative = NARRATIVES[slug as keyof typeof NARRATIVES];\n\n  if (!narrative) {\n    return null;\n  }\n\n  const content = (\n    <div\n      style={{\n        position: \"absolute\",\n        top: 10,\n        right: -10,\n        width: \"457px\",\n        zIndex: 100000,\n      }}\n    >\n      {showNarrative ? (\n        <div>\n          <FoldButton onClick={() => setShowNarrative(false)}>\n            <FontAwesomeIcon icon={faTimes} />\n          </FoldButton>\n          <div\n            style={{\n              backgroundColor: \"black\",\n              padding: 10,\n              border: \"1px solid #666\",\n              zIndex: 100000,\n              maxWidth: \"40em\",\n            }}\n          >\n            {narrative.qa.map((qa, index) => {\n              if (index > lastOpenedIndex) {\n                return null;\n              }\n\n              return (\n                <TonicProvider currentTonic={currentTonic}>\n                  <div key={index} style={{ marginBottom: \"2.5rem\" }}>\n                    <div style={{ marginBottom: \"0.5rem\" }}>\n                      <Label>Q:</Label>{\" \"}\n                      <span style={{ color: \"#fff\" }}>{qa.q}</span>\n                    </div>\n\n                    {index < lastOpenedIndex\n                      ? qa.a && (\n                          <div style={{ paddingTop: \"10px\" }}>\n                            <Label>A:</Label>{\" \"}\n                            <span style={{ color: \"#fff\" }}>{qa.a}</span>\n                          </div>\n                        )\n                      : (qa.a || index < narrative.qa.length - 1) && (\n                          <button\n                            style={{\n                              padding: \"10px\",\n                              marginTop: \"10px\",\n                              backgroundColor: \"#4a90e2\",\n                              color: \"white\",\n                              border: \"none\",\n                              borderRadius: \"4px\",\n                              cursor: \"pointer\",\n                            }}\n                            onClick={() => setLastOpenedIndex(index + 1)}\n                          >\n                            {qa.a ? \"Show answer\" : \"Show next question\"}\n                          </button>\n                        )}\n                  </div>\n                </TonicProvider>\n              );\n            })}\n          </div>\n        </div>\n      ) : (\n        <button\n          onClick={() => setShowNarrative(true)}\n          style={{\n            position: \"absolute\",\n            top: 0,\n            right: 0,\n            background: \"none\",\n            border: \"none\",\n            cursor: \"pointer\",\n            fontSize: \"24px\",\n            padding: 0,\n          }}\n        >\n          \n        </button>\n      )}\n    </div>\n  );\n\n  return content;\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport Rawl from \"./Rawl\";\n\nconst ContentArea = styled.div<{ isRawlVisible: boolean }>`\n  flex-grow: 1;\n  height: ${(props) =>\n    props.isRawlVisible ? \"calc(50vh - 30px)\" : \"calc(100vh - 30px)\"};\n  overflow-y: auto;\n  transition: height 0.3s ease-in-out;\n`;\n\nconst RawlContainer = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 50vh;\n  background-color: #000;\n  z-index: 200000;\n  overflow: auto;\n`;\n\ninterface InlineRawlPlayerProps {\n  children: React.ReactNode;\n  measureStart?: number;\n}\n\nconst InlineRawlPlayer: React.FC<InlineRawlPlayerProps> = ({\n  children,\n  measureStart,\n}) => {\n  const { currentMidi, rawlProps, saveAnalysis, eject, latencyCorrectionMs } =\n    useContext(AppContext);\n  const [isRawlVisible, setIsRawlVisible] = useState(false);\n\n  useEffect(() => {\n    setIsRawlVisible(!!currentMidi);\n  }, [currentMidi]);\n\n  // Combined eject callback\n  const handleEject = () => {\n    eject();\n    setIsRawlVisible(false);\n  };\n\n  return (\n    <>\n      <ContentArea isRawlVisible={isRawlVisible}>{children}</ContentArea>\n      {currentMidi && rawlProps && rawlProps?.parsingResult && (\n        <RawlContainer>\n          <Rawl\n            parsingResult={rawlProps.parsingResult}\n            getCurrentPositionMs={rawlProps.getCurrentPositionMs}\n            savedAnalysis={rawlProps.savedAnalysis}\n            saveAnalysis={saveAnalysis}\n            voiceNames={rawlProps.voiceNames}\n            voiceMask={rawlProps.voiceMask}\n            setVoiceMask={rawlProps.setVoiceMask}\n            enableManualRemeasuring={rawlProps.enableManualRemeasuring}\n            seek={rawlProps.seek}\n            latencyCorrectionMs={latencyCorrectionMs}\n            sourceUrl={currentMidi.sourceUrl}\n            measureStart={measureStart}\n            isEmbedded={true}\n            onEject={handleEject}\n          />\n        </RawlContainer>\n      )}\n    </>\n  );\n};\n\nexport default InlineRawlPlayer;\n","import { toggleComment } from \"@codemirror/commands\";\nimport { StreamLanguage } from \"@codemirror/language\";\nimport { keymap } from \"@codemirror/view\";\nimport CodeMirror from \"@uiw/react-codemirror\";\nimport { doc, getDoc, getFirestore } from \"firebase/firestore/lite\";\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { RouteComponentProps, useParams, withRouter } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport {\n  HighlightedNote,\n  playHighlightedNotes,\n} from \"../../../sampler/sampler\";\nimport { FirestoreEditDocument } from \"../../../types/firestore\";\nimport { ADMIN_USER_ID, VoiceMask } from \"../../App\";\nimport { AppContext } from \"../../AppContext\";\nimport { Analysis, ANALYSIS_STUB, PitchClass } from \"../analysis\";\nimport { TICKS_PER_QUARTER } from \"../forge/constants\";\nimport Rawl from \"../Rawl\";\nimport {\n  calculateGlobalBeatPosition,\n  calculateShiftedNote,\n  ExtendedCommandContext,\n  logicalNoteToMidi,\n  parseCommand,\n} from \"./commandParser\";\nimport {\n  activeLineGutterTheme,\n  characterBackgroundsPlugin,\n  customTheme,\n} from \"./EditorDecorations\";\nimport { generateMidiWithMetadata, SourceLocation } from \"./EditorMidi\";\nimport EditorSavingMenu from \"./EditorSavingMenu\";\nimport {\n  EditorPanel as BaseEditorPanel,\n  CodeMirrorWrapper,\n  EditorContainer,\n  EditorContent,\n  ErrorMessage,\n  RawlContainer,\n  ResizeHandle,\n  StatusBar,\n} from \"./EditorStyles\";\nimport { FoldButtonWithIcon } from \"./FoldButtonWithIcon\";\nimport { useBackup } from \"./hooks/useBackup\";\nimport Manual, { MidiWriterJsDisplay, ParseMidiDisplay } from \"./Manual\";\nimport { ManualContainer } from \"./ManualStyles\";\nimport { scores } from \"./scores\";\nimport { convertSourceToVersions } from \"./sourceConverter\";\nimport { Command, CommandContext, LogicalNote, ModeName } from \"./types\";\n\n// Define a simple language for the editor that supports % comments\nconst rawlLanguage = StreamLanguage.define({\n  name: \"rawl\",\n  languageData: {\n    commentTokens: { line: \"%\" },\n  },\n  // Basic token method required by StreamLanguage\n  token(stream) {\n    // Skip whitespace\n    if (stream.eatSpace()) return null;\n\n    // Handle comments\n    if (stream.match(\"%\")) {\n      stream.skipToEnd();\n      return \"comment\";\n    }\n\n    // Skip to next token\n    stream.next();\n    return null;\n  },\n});\n\n// Types for command handling\ndeclare global {\n  interface Window {\n    __disableGlobalShortcuts?: boolean;\n  }\n}\n\ntype MidiNote = {\n  pitch: number;\n  velocity: number;\n  startTime: number;\n  duration: number;\n  channel: number;\n};\n\ninterface EditorProps extends RouteComponentProps {\n  initialSource?: string;\n  disableEditing?: boolean;\n  showProgrammingManual?: boolean;\n  isDecompositionMode?: boolean;\n  customChild?: React.ReactNode;\n  setVoiceMask?: (voiceMask: VoiceMask) => void;\n  voiceMask?: VoiceMask;\n  voiceNames?: string[];\n  registerKeyboardHandler?: (\n    id: string,\n    handler: (e: KeyboardEvent) => void,\n  ) => void;\n  unregisterKeyboardHandler?: (id: string) => void;\n  savedAnalysis?: Analysis | null;\n  saveAnalysis?: (analysis: Analysis) => Promise<void>;\n  getCurrentPositionMs?: () => number;\n  seek?: (ms: number) => void;\n  latencyCorrectionMs?: number;\n  onEditorChange?: (code: string) => void;\n}\n\n// New styled components for tabs\nconst TabsContainer = styled.div`\n  display: flex;\n  border-bottom: 1px solid #444;\n  margin-bottom: 10px;\n`;\n\nconst Tab = styled.div<{ active: boolean }>`\n  padding: 8px 16px;\n  cursor: pointer;\n  background-color: ${({ active }) => (active ? \"#2a2a2a\" : \"transparent\")};\n  border-bottom: 2px solid\n    ${({ active }) => (active ? \"#4a8cff\" : \"transparent\")};\n  &:hover {\n    background-color: #333;\n  }\n`;\n\n// Add CSS for admin panels\nconst AdminContent = styled.div`\n  height: 100%;\n  overflow: auto;\n\n  /* Additional styling for manual */\n  .musical-term {\n    font-style: italic;\n    color: #ddd;\n  }\n\n  .keyboard-layout-image {\n    width: 100%;\n    height: auto;\n    object-fit: contain;\n    max-width: 250px;\n    display: block;\n    margin-bottom: 10px;\n    border-radius: 4px;\n  }\n\n  .key-layout img {\n    max-width: 100%;\n    display: block;\n    margin: 0 auto;\n  }\n\n  /* Essential grid styling */\n  .grid {\n    display: grid;\n    grid-template-columns: auto 1fr;\n    gap: 8px 16px;\n    align-items: center;\n  }\n\n  .note-col {\n    display: flex;\n    align-items: center;\n    height: 20px;\n  }\n\n  .section {\n    margin-bottom: 20px;\n  }\n\n  .section h3 {\n    margin-top: 16px;\n    margin-bottom: 12px;\n    color: #ddd;\n    font-size: 18px;\n  }\n\n  code {\n    font-family: monospace;\n    background-color: #2a2a2a;\n    padding: 2px 4px;\n    border-radius: 3px;\n  }\n`;\n\nconst CONTEXT_STUB: ExtendedCommandContext = {\n  currentKey: { tonic: 0, mode: \"major\" },\n  currentTrack: 1,\n  timeSignatures: [{ numerator: 4, measureStart: 1 }],\n  channelOctaves: {\n    0: 4, // RH default\n    1: 2, // LH default\n  },\n  commentToEndOfFile: false,\n  currentBpm: 120, // Default BPM\n  analysis: { ...ANALYSIS_STUB },\n};\n\nconst Editor: React.FC<EditorProps> = ({\n  history,\n  initialSource,\n  disableEditing,\n  showProgrammingManual = true,\n  isDecompositionMode = false,\n  customChild,\n  onEditorChange,\n}) => {\n  // Update useParams to handle both slug and id\n  const { slug, id, version } = useParams<{\n    slug?: string;\n    id?: string;\n    version?: string;\n  }>();\n  // Use either id or slug as the effective slug\n  const effectiveSlug = id ?? slug;\n  // Parse version parameter to number if present\n  const versionNum = version ? parseInt(version, 10) : undefined;\n\n  // Detect if user is on macOS to show Option vs Alt\n  const isMac = navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0;\n\n  const [error, setError] = useState<string | null>(null);\n  const [foldEditor, setFoldEditor] = useState(false);\n  const editorRef = useRef<any>(null);\n  const {\n    playSongBuffer,\n    rawlProps,\n    latencyCorrectionMs,\n    tempo,\n    togglePause,\n    eject,\n    user,\n  } = useContext(AppContext);\n  const [score, setScore] = useState(\"\");\n  const [isEditorFocused, setIsEditorFocused] = useState(false);\n  const [currentLine, setCurrentLine] = useState<number | null>(null);\n  const [currentColumn, setCurrentColumn] = useState<number | null>(null);\n  const [context, setContext] = useState<ExtendedCommandContext>(\n    structuredClone(CONTEXT_STUB),\n  );\n  const [panelHeight, setPanelHeight] = useState(() => {\n    const saved = localStorage.getItem(\"editorPanelHeight\");\n    return saved || \"50vh\";\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const dragStartY = useRef(0);\n  const dragStartHeight = useRef(0);\n  const [extractedMidiNotes, setExtractedMidiNotes] = useState<any>(null);\n  const [matchedParsingResult, setMatchedParsingResult] = useState<any>(null);\n  const [activeTab, setActiveTab] = useState<\n    \"manual\" | \"parseMidi\" | \"midiWriterJs\"\n  >(\"manual\");\n\n  // Add state to track previously highlighted notes\n  const [previouslyHighlightedNotes, setPreviouslyHighlightedNotes] = useState<\n    HighlightedNote[]\n  >([]);\n\n  // Add new state to track if we're in backup preview mode\n  const [isPreviewingBackup, setIsPreviewingBackup] = useState(false);\n  const tempScoreRef = useRef<string | null>(null);\n\n  // Add this near the top of the component with other state declarations\n  const [editorMountTime] = useState<number>(Date.now());\n\n  // Replace direct localStorage access with useBackup hook\n  const { setBackup } = useBackup(effectiveSlug);\n\n  // Redirect to /e/new if no slug is provided - using useEffect for proper hook ordering\n  useEffect(() => {\n    if (!effectiveSlug) {\n      history.push(\"/e/new\");\n    }\n  }, [effectiveSlug, history]);\n\n  // Use the analysis from context rather than a separate extraction\n  const analysis = context.analysis || ANALYSIS_STUB;\n\n  // Signal to App that this route should not have global shortcuts when editor is focused\n  useEffect(() => {\n    if (isEditorFocused) {\n      window.__disableGlobalShortcuts = true;\n    } else {\n      delete window.__disableGlobalShortcuts;\n    }\n  }, [isEditorFocused]);\n\n  // Add keyboard event handler for Shift+Space when the editor is focused\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Only handle keyboard shortcut when editor is focused\n      if (!isEditorFocused) return;\n\n      // Check for Shift+Space\n      if (e.code === \"Space\" && e.shiftKey) {\n        // Different check for Alt/Option key on Mac vs other platforms\n        const altOptionPressed = isMac ? e.metaKey || e.altKey : e.altKey;\n\n        // If this is Shift+Space, prevent default to avoid inserting space\n        e.preventDefault();\n\n        // If this is Shift+Alt/Option+Space, handle measure coordinate seeking\n        if (altOptionPressed && editorRef.current) {\n          try {\n            const view = editorRef.current.view;\n            if (!view) return;\n\n            const cursor = view.state.selection.main;\n            const currentLine = view.state.doc.lineAt(cursor.from);\n            const lineText = currentLine.text.trim();\n\n            // Check if the line starts with a measure coordinate pattern (number + optional 'b' + optional number)\n            const measureCoordMatch = lineText.match(/^(\\d+)(b\\d+)?(\\s+|$)/);\n\n            if (\n              measureCoordMatch &&\n              rawlProps?.parsingResult?.measuresAndBeats?.measures\n            ) {\n              // Extract the measure number\n              const measureNumber = parseInt(measureCoordMatch[1], 10);\n\n              // Account for renumbering if present\n              const absoluteMeasureNum =\n                measureNumber + ((analysis?.measureRenumbering?.[1] || 0) - 1);\n\n              // Get the time in seconds for this measure\n              const measureTime =\n                rawlProps.parsingResult.measuresAndBeats.measures[\n                  absoluteMeasureNum\n                ];\n\n              if (measureTime !== undefined) {\n                // Seek to slightly before the measure (200ms before)\n                const seekTime = Math.max(0, (measureTime - 0.2) * 1000);\n                rawlProps.seek(seekTime);\n              }\n            }\n          } catch (error) {\n            // Remove console.error for measure seek errors\n          }\n        }\n\n        // Toggle play/pause for both Shift+Space and Shift+Alt/Option+Space\n        if (togglePause) {\n          togglePause();\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [isEditorFocused, togglePause, rawlProps, analysis, isMac]);\n\n  const handleMouseDown = useCallback(\n    (e: React.MouseEvent) => {\n      setIsDragging(true);\n      dragStartY.current = e.clientY;\n      const currentHeight = window.innerHeight * (parseInt(panelHeight) / 100);\n      dragStartHeight.current = currentHeight;\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    [panelHeight],\n  );\n\n  const handleMouseMove = useCallback(\n    (e: MouseEvent) => {\n      if (!isDragging) return;\n\n      const delta = e.clientY - dragStartY.current;\n      const newHeight = Math.max(200, dragStartHeight.current - delta);\n      const heightVh = Math.min(\n        95,\n        Math.round((newHeight / window.innerHeight) * 100),\n      );\n      setPanelHeight(`${heightVh}vh`);\n      localStorage.setItem(\"editorPanelHeight\", `${heightVh}vh`);\n    },\n    [isDragging],\n  );\n\n  const handleMouseUp = useCallback(() => {\n    if (isDragging) {\n      setIsDragging(false);\n    }\n  }, [isDragging]);\n\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener(\"mousemove\", handleMouseMove, { capture: true });\n      window.addEventListener(\"mouseup\", handleMouseUp, { capture: true });\n      return () => {\n        window.removeEventListener(\"mousemove\", handleMouseMove, {\n          capture: true,\n        });\n        window.removeEventListener(\"mouseup\", handleMouseUp, { capture: true });\n      };\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp]);\n\n  // Create a debounced version of handleMelodyPlayback\n  const parseScore = useCallback(\n    (() => {\n      let timeoutId: NodeJS.Timeout;\n      return (text: string, autoplay: boolean) => {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(() => {\n          if (!text || text.trim() === \"\") {\n            console.log(\"DEBUG: Skipping parseScore for empty text\");\n            return;\n          }\n          try {\n            // First pass: find if there's a % on empty line and where it is\n            const allLines = text.split(\"\\n\");\n\n            const commentLineIndex = allLines.findIndex(\n              (line) => line.trim() === \"%\",\n            );\n\n            // Important: Don't filter out empty lines as they affect line numbering\n            // Instead, simply stop processing at the % if found\n            const lines =\n              commentLineIndex >= 0\n                ? allLines.slice(0, commentLineIndex)\n                : allLines;\n\n            if (lines.length === 0) {\n              setError(\"No valid notes found\");\n              return;\n            }\n\n            setError(null);\n            const newContext: ExtendedCommandContext =\n              structuredClone(CONTEXT_STUB);\n\n            // Use a map to store notes for each track\n            const scoreByTrack = new Map<number, LogicalNote[]>();\n\n            for (let lineIndex = 0; lineIndex < lines.length; lineIndex++) {\n              const line = lines[lineIndex];\n\n              // Pass 1-based line number to parseCommand\n              const command = parseCommand(line, newContext, lineIndex + 1);\n              if (!command) {\n                continue;\n              }\n\n              switch (command.type) {\n                case \"track\":\n                  newContext.currentTrack = command.track;\n                  if (command.baseOctave !== undefined) {\n                    const channel = command.track - 1;\n                    newContext.channelOctaves[channel] = command.baseOctave;\n                  }\n                  break;\n\n                case \"key\":\n                  newContext.currentKey = command.key;\n                  // Store first key in analysis\n                  if (\n                    !analysis?.modulations ||\n                    Object.keys(analysis.modulations).length === 0\n                  ) {\n                    const newModulations = {\n                      \"1\": command.key.tonic as PitchClass,\n                    };\n                    // Update the analysis state directly\n                    if (analysis) {\n                      analysis.modulations = newModulations;\n                    }\n                  }\n                  break;\n\n                case \"time\":\n                  newContext.timeSignatures = command.signatures;\n                  break;\n\n                case \"bpm\":\n                  newContext.currentBpm = command.tempo;\n                  break;\n\n                case \"insert\": {\n                  const currentTrackNotes =\n                    scoreByTrack.get(newContext.currentTrack) || [];\n\n                  scoreByTrack.set(newContext.currentTrack, [\n                    ...currentTrackNotes,\n                    ...command.notes,\n                  ]);\n                  break;\n                }\n\n                case \"copy\": {\n                  // Execute copy for just the current track\n                  executeCopyForChannels(\n                    command,\n                    [newContext.currentTrack],\n                    newContext,\n                    scoreByTrack,\n                    lineIndex + 1,\n                  );\n                  break;\n                }\n\n                case \"ac\": {\n                  // Get all non-empty channels\n                  const nonEmptyChannels = Array.from(scoreByTrack.keys());\n\n                  // Execute copy for all channels\n                  executeCopyForChannels(\n                    command,\n                    nonEmptyChannels,\n                    newContext,\n                    scoreByTrack,\n                    lineIndex + 1,\n                  );\n                  break;\n                }\n              }\n            }\n\n            if (scoreByTrack.size === 0) {\n              setError(\"No valid notes found\");\n              return;\n            }\n\n            // Update the context state with the new context that includes the analysis\n            setContext(newContext);\n\n            // Convert all tracks to MIDI notes\n            const allMidiNotes = Array.from(scoreByTrack.entries()).flatMap(\n              ([track, notes]) => {\n                const trackNotes = notes\n                  .map((n) => {\n                    const midiNote = logicalNoteToMidi(\n                      n,\n                      track,\n                      newContext.timeSignatures,\n                    );\n                    if (!midiNote) {\n                      return null;\n                    }\n\n                    const resultNote = {\n                      pitch: midiNote.midiNumber,\n                      velocity: track === 2 ? 70 : 100, // Set velocity to 70 for LH (track 2), 100 for others\n                      startTime: midiNote.startTick,\n                      duration: midiNote.durationTicks - 1,\n                      channel: track - 1, // Convert 1-based track number back to 0-based channel\n                      sourceLocation: midiNote.sourceLocation, // Preserve source location\n                    };\n                    return resultNote;\n                  })\n                  .filter(\n                    (n): n is typeof n & { sourceLocation?: SourceLocation } =>\n                      n !== null,\n                  );\n                return trackNotes;\n              },\n            );\n\n            const notesByChannel = new Map<number, MidiNote[]>();\n            allMidiNotes.forEach((note) => {\n              const channelNotes = notesByChannel.get(note.channel) || [];\n              channelNotes.push(note);\n              notesByChannel.set(note.channel, channelNotes);\n            });\n\n            const midiResult = generateMidiWithMetadata(\n              allMidiNotes,\n              `melody-${effectiveSlug}`,\n              newContext.currentBpm, // Use the current BPM from context\n              newContext.timeSignatures,\n            );\n\n            // Store the extracted notes\n            setExtractedMidiNotes(midiResult.extractedNotes);\n\n            if (playSongBuffer) {\n              // Disable autoplay specifically for the /e/new route\n              const isNewRoute = effectiveSlug === \"new\";\n              playSongBuffer(\n                midiResult.midiInfo.id,\n                midiResult.midiData,\n                !isNewRoute && autoplay, // Only autoplay if it's not /e/new and autoplay is true\n              );\n            }\n          } catch (e) {\n            // Remove console.error for playback errors\n            setError(\n              e instanceof Error ? e.message : \"Unknown error during playback\",\n            );\n          }\n        }, 0);\n      };\n    })(),\n    [playSongBuffer, effectiveSlug],\n  );\n\n  // Update handleTextChange to use the hook\n  const handleTextChange = useCallback(\n    (value: string) => {\n      console.log(\n        \"DEBUG: handleTextChange called, isPreviewingBackup:\",\n        isPreviewingBackup,\n      );\n      setScore(value);\n\n      // Always trigger MIDI playback with the new value\n      // Let parseScore handle both analysis and MIDI generation\n      parseScore(value, false);\n\n      // Only save backup if we're not in preview mode\n      if (!isPreviewingBackup && effectiveSlug && value !== initialSource) {\n        console.log(\"DEBUG: Setting backup in handleTextChange\");\n        setBackup({\n          score: value,\n          timestamp: Date.now(),\n          sessionTime: editorMountTime,\n        });\n      } else {\n        console.log(\n          \"DEBUG: Skipping backup in handleTextChange, isPreviewingBackup:\",\n          isPreviewingBackup,\n        );\n      }\n\n      if (onEditorChange) {\n        onEditorChange(value);\n      }\n    },\n    [\n      parseScore,\n      effectiveSlug,\n      initialSource,\n      onEditorChange,\n      isPreviewingBackup,\n      editorMountTime,\n      setBackup,\n    ],\n  );\n\n  // Update score when effectiveSlug changes\n  useEffect(() => {\n    const loadScore = async () => {\n      // If we're in decomposition mode and have an initial source, use that\n      if (isDecompositionMode && initialSource) {\n        setScore(initialSource);\n        // Trigger MIDI generation with the new initialSource\n        parseScore(initialSource, true);\n        return;\n      }\n\n      if (effectiveSlug) {\n        // Check if we're on the /e/new route and have a score in localStorage\n        if (effectiveSlug === \"new\") {\n          const newEditorScore = localStorage.getItem(\"new_editor_score\");\n          if (newEditorScore) {\n            // Clear the localStorage item to prevent it from being used again on refresh\n            localStorage.removeItem(\"new_editor_score\");\n\n            setScore(newEditorScore);\n\n            // Trigger MIDI generation after a delay but don't autoplay\n            setTimeout(() => {\n              parseScore(newEditorScore, false);\n            }, 500);\n            return;\n          }\n        }\n\n        if (id || effectiveSlug.startsWith(\"ef/\")) {\n          // For /ef/<id> URLs, fetch from Firebase edits collection\n          const editId = id || effectiveSlug.replace(\"ef/\", \"\");\n\n          try {\n            const db = getFirestore();\n            const docRef = doc(db, \"edits\", editId);\n            const docSnap = await getDoc(docRef);\n\n            if (docSnap.exists()) {\n              const data = docSnap.data() as FirestoreEditDocument;\n\n              if (data.source && !data.versions) {\n                convertSourceToVersions(data);\n              }\n\n              // Handle versions array if it exists\n              if (data.versions && Array.isArray(data.versions)) {\n                // Get the specific version or the latest if not specified\n                const versionIndex = versionNum\n                  ? Math.min(versionNum - 1, data.versions.length - 1)\n                  : data.versions.length - 1;\n\n                let newScore = data.versions[versionIndex] || \"\";\n\n                setScore(newScore);\n\n                // Trigger initial MIDI generation after a delay\n                setTimeout(() => {\n                  // Disable autoplay for /e/new route\n                  const isNewRoute = effectiveSlug === \"new\";\n                  parseScore(newScore, !isNewRoute);\n                }, 1000);\n              } else {\n                setError(\"No content found in edit\");\n                setScore(\"\");\n              }\n            } else {\n              setError(\"Edit not found\");\n              setScore(\"\");\n            }\n          } catch (error) {\n            console.error(\"Error fetching edit:\", error);\n            setError(\"Failed to load edit\");\n            setScore(\"\");\n          }\n        } else if (scores[effectiveSlug]) {\n          let newScore = scores[effectiveSlug];\n\n          setScore(newScore);\n          // Trigger initial MIDI generation after a delay\n          setTimeout(() => {\n            // Disable autoplay for /e/new route\n            const isNewRoute = effectiveSlug === \"new\";\n            parseScore(newScore, !isNewRoute);\n          }, 1000);\n        } else {\n          setScore(\"\");\n        }\n      }\n    };\n\n    loadScore();\n  }, [\n    effectiveSlug,\n    id,\n    isDecompositionMode,\n    initialSource,\n    parseScore,\n    versionNum,\n  ]);\n\n  // Track cursor position and trigger playback when cursor moves\n  const handleCursorChange = useCallback(\n    (viewUpdate: any) => {\n      const line = viewUpdate.state.selection.main.head;\n      const doc = viewUpdate.state.doc;\n      const lineObj = doc.lineAt(line);\n      const lineNumber = lineObj.number;\n      const colPosition = line - lineObj.from + 1; // +1 because columns are 1-indexed for user display\n      const hasSelection = !viewUpdate.state.selection.main.empty;\n\n      // Update cursor position\n      setCurrentLine(lineNumber);\n      setCurrentColumn(colPosition);\n\n      if (lineNumber !== currentLine && !hasSelection) {\n        // Play the current score when cursor position changes\n        parseScore(score, false);\n      }\n    },\n    [currentLine, score, parseScore],\n  );\n\n  // Cleanup when component unmounts\n  useEffect(() => {\n    return () => {\n      // Stop playback when component is unmounted\n      if (eject) {\n        eject();\n      }\n    };\n  }, [eject]);\n\n  useEffect(() => {\n    // No need to log raw props changes\n  }, [rawlProps?.parsingResult]);\n\n  // Function to match notes between ParseMidi and MidiWriterJs data\n  const matchNotesWithMidiWriter = useCallback(() => {\n    if (!rawlProps?.parsingResult?.notes || !extractedMidiNotes) {\n      return null;\n    }\n\n    // Verify that notes is an array before proceeding\n    if (!Array.isArray(rawlProps.parsingResult.notes)) {\n      return rawlProps.parsingResult;\n    }\n\n    // Clone the parsing result to avoid mutating the original\n    const clonedResult = JSON.parse(JSON.stringify(rawlProps.parsingResult));\n\n    // Extract the MidiWriter notes by channel\n    const { eventsByChannel } = extractedMidiNotes;\n\n    // Reset all noteUnderCursor flags to false first\n    clonedResult.notes.forEach((voiceNotes) => {\n      if (Array.isArray(voiceNotes)) {\n        voiceNotes.forEach((note) => {\n          if (note && typeof note === \"object\") {\n            note.noteUnderCursor = false;\n          }\n        });\n      }\n    });\n\n    // Find the exact note under cursor if it exists\n    let foundExactMatch = false;\n\n    // Process each note in the parsing result\n    clonedResult.notes.forEach((voiceNotes: any[], voiceIndex: number) => {\n      // Check if voiceNotes is actually an array\n      if (!Array.isArray(voiceNotes)) {\n        return; // Skip this voice\n      }\n\n      voiceNotes.forEach((note: any) => {\n        // Skip if note is null or not an object\n        if (!note || typeof note !== \"object\") {\n          return;\n        }\n\n        // MODIFICATION: Instead of only looking in the current voice's channel,\n        // search across all channels for a matching note\n        let matchingNote = null;\n        let matchFound = false;\n\n        // Get all channels and search through each one\n        const allChannels = Array.from(eventsByChannel.keys());\n\n        for (const channelIdx of allChannels) {\n          const channelEvents = eventsByChannel.get(channelIdx);\n\n          if (!channelEvents) continue;\n\n          // Look for a matching note in this channel\n          const foundNote = channelEvents.find((event: any) => {\n            // Match by pitch and start tick\n            // Add proper null checks to prevent TypeError\n            return (\n              event &&\n              event.pitches &&\n              Array.isArray(event.pitches) &&\n              note &&\n              note.note &&\n              note.note.midiNumber !== undefined &&\n              event.pitches.includes(note.note.midiNumber) &&\n              event.startTick !== undefined &&\n              event.duration !== undefined &&\n              // Match by duration too for more accuracy\n              ((note.tickSpan &&\n                Array.isArray(note.tickSpan) &&\n                note.tickSpan.length > 1 &&\n                Math.abs(event.startTick - note.tickSpan[0]) < 5 && // Allow a small tolerance for start\n                Math.abs(note.tickSpan[1] - note.tickSpan[0] - event.duration) <\n                  5) || // And for duration\n                // Fallback matching approach if tickSpan not available\n                (event.startTick !== undefined &&\n                  note.id !== undefined &&\n                  Math.abs(event.startTick - (note.id % 1000)) < 5)) // More flexible matching\n            );\n          });\n\n          if (foundNote) {\n            matchingNote = foundNote;\n            matchFound = true;\n            break; // Found a match, no need to check other channels\n          }\n        }\n\n        // Enhance the note with matching information\n        note.matchingMidiWriterNote = matchingNote || null;\n        note.hasMatch = matchFound;\n\n        // Transfer source location information from MidiWriter note to parsing result note\n        if (matchingNote) {\n          if (matchingNote.sourceLocation) {\n            note.sourceLocation = matchingNote.sourceLocation;\n          }\n\n          // If the note doesn't have a valid tickSpan, get it from the matching note\n          if (\n            !note.tickSpan ||\n            !Array.isArray(note.tickSpan) ||\n            note.tickSpan.length < 2\n          ) {\n            note.tickSpan = [\n              matchingNote.startTick,\n              matchingNote.startTick + matchingNote.duration,\n            ];\n          }\n        }\n      });\n    });\n\n    // Collect all source locations with their notes for each row\n    const notesByRow = new Map<number, { col: number; note: any }[]>();\n\n    // Collect all source locations with row and column info\n    clonedResult.notes.forEach((voiceNotes: any[]) => {\n      if (!Array.isArray(voiceNotes)) return;\n\n      voiceNotes.forEach((note: any) => {\n        if (\n          note &&\n          note.sourceLocation &&\n          typeof note.sourceLocation.row === \"number\" &&\n          typeof note.sourceLocation.col === \"number\"\n        ) {\n          const row = note.sourceLocation.row;\n          const rowNotes = notesByRow.get(row) || [];\n          rowNotes.push({ col: note.sourceLocation.col, note });\n          notesByRow.set(row, rowNotes);\n        }\n      });\n    });\n\n    // Apply highlighting logic based on current cursor position\n    if (currentLine !== null && currentColumn !== null) {\n      const rowNotes = notesByRow.get(currentLine);\n\n      if (rowNotes && rowNotes.length > 0) {\n        // Sort notes by column position\n        rowNotes.sort((a, b) => a.col - b.col);\n\n        const leftmostCol = rowNotes[0].col;\n        const rightmostCol = rowNotes[rowNotes.length - 1].col;\n\n        let targetSourceCol = null;\n\n        // If cursor is at or before leftmost note column\n        if (currentColumn <= leftmostCol) {\n          targetSourceCol = leftmostCol;\n        }\n        // If cursor is at or after rightmost note column\n        else if (currentColumn >= rightmostCol) {\n          targetSourceCol = rightmostCol;\n        }\n        // If cursor is between note columns, find nearest left\n        else {\n          // Find the rightmost column that's still to the left of or equal to cursor\n          for (let i = rowNotes.length - 1; i >= 0; i--) {\n            if (rowNotes[i].col <= currentColumn) {\n              targetSourceCol = rowNotes[i].col;\n              break;\n            }\n          }\n        }\n\n        // Now highlight ALL notes with the same source location (row and column)\n        if (targetSourceCol !== null) {\n          // Highlight all notes across all voices that match this exact source location\n          clonedResult.notes.forEach((voiceNotes: any[]) => {\n            if (!Array.isArray(voiceNotes)) return;\n\n            voiceNotes.forEach((note: any) => {\n              if (\n                note &&\n                note.sourceLocation &&\n                note.sourceLocation.row === currentLine &&\n                note.sourceLocation.col === targetSourceCol\n              ) {\n                note.noteUnderCursor = true;\n                foundExactMatch = true;\n              }\n            });\n          });\n        }\n      }\n    }\n\n    return clonedResult;\n  }, [\n    rawlProps?.parsingResult?.notes,\n    extractedMidiNotes,\n    currentLine,\n    currentColumn,\n  ]);\n\n  // Effect to update matched parsing result when either source changes\n  useEffect(() => {\n    try {\n      const matchedResult = matchNotesWithMidiWriter();\n      setMatchedParsingResult(matchedResult);\n    } catch (error) {\n      // Remove console.error for note matching\n      // Fall back to original parsing result if matching fails\n      setMatchedParsingResult(rawlProps?.parsingResult || null);\n    }\n  }, [rawlProps?.parsingResult, extractedMidiNotes, matchNotesWithMidiWriter]);\n\n  // Add a callback to navigate to source location\n  const navigateToSourceLocation = useCallback(\n    (sourceLocation: { row: number; col: number }) => {\n      if (!sourceLocation || !editorRef.current) return;\n\n      const { row, col } = sourceLocation;\n      const view = editorRef.current.view;\n\n      if (view) {\n        try {\n          // Calculate the position in the document from line and column\n          // CodeMirror is 0-indexed, but our row/col might be 1-indexed\n          const line = Math.max(0, row - 1);\n          const column = Math.max(0, col - 1);\n\n          // Get the position in the document\n          const lineObj = view.state.doc.line(line + 1);\n          const position = lineObj.from + column;\n\n          // Create a selection at the position\n          const selection = { anchor: position, head: position };\n\n          // Update the view with the new selection\n          view.dispatch({\n            selection,\n            // Scroll the position into view with some padding\n            scrollIntoView: true,\n          });\n\n          // Focus the editor\n          view.focus();\n\n          return true;\n        } catch (error) {\n          console.error(\"Error navigating to source location:\", error);\n          return false;\n        }\n      }\n      return false;\n    },\n    [],\n  );\n\n  // Effect to detect and play highlighted notes whenever matchedParsingResult changes\n  useEffect(() => {\n    if (!matchedParsingResult || !matchedParsingResult.notes) return;\n\n    // Extract highlighted notes from all voices/channels\n    const newHighlightedNotes: HighlightedNote[] = [];\n\n    // Verify notes is an array before processing\n    if (Array.isArray(matchedParsingResult.notes)) {\n      matchedParsingResult.notes.forEach((voiceNotes, voiceIndex) => {\n        // Check if voiceNotes is an array\n        if (Array.isArray(voiceNotes)) {\n          voiceNotes.forEach((note) => {\n            // Check if note is valid, has noteUnderCursor flag set, and has necessary properties\n            if (\n              note &&\n              typeof note === \"object\" &&\n              note.noteUnderCursor === true &&\n              note.matchingMidiWriterNote &&\n              typeof note.matchingMidiWriterNote.startTick === \"number\" &&\n              typeof note.matchingMidiWriterNote.duration === \"number\" &&\n              note.note &&\n              typeof note.note.midiNumber === \"number\"\n            ) {\n              // Extract required properties\n              newHighlightedNotes.push({\n                startTime: note.matchingMidiWriterNote.startTick,\n                duration: note.matchingMidiWriterNote.duration,\n                midiNumber: note.note.midiNumber,\n              });\n            }\n          });\n        }\n      });\n    }\n\n    // Check if highlighted notes have changed\n    const notesChanged =\n      newHighlightedNotes.length !== previouslyHighlightedNotes.length ||\n      newHighlightedNotes.some((note, index) => {\n        const prevNote = previouslyHighlightedNotes[index];\n        return (\n          !prevNote ||\n          note.midiNumber !== prevNote.midiNumber ||\n          note.startTime !== prevNote.startTime ||\n          note.duration !== prevNote.duration\n        );\n      });\n\n    // If notes have changed, play them with the current BPM from context\n    if (notesChanged && newHighlightedNotes.length > 0) {\n      playHighlightedNotes(newHighlightedNotes, context.currentBpm);\n      setPreviouslyHighlightedNotes(newHighlightedNotes);\n    }\n  }, [matchedParsingResult, previouslyHighlightedNotes]);\n\n  // In the Editor component, add these callback handlers\n  const handleRestoreBackup = (code: string) => {\n    console.log(\n      \"DEBUG: handleRestoreBackup called with code length:\",\n      code.length,\n    );\n    setScore(code);\n    // Also parse the code to update MIDI\n    parseScore(code, false);\n  };\n\n  const handlePreviewBackup = (code: string) => {\n    console.log(\n      \"DEBUG: handlePreviewBackup called, current score length:\",\n      score.length,\n      \"tempScoreRef:\",\n      tempScoreRef.current?.length,\n    );\n\n    // Store current score in ref\n    tempScoreRef.current = score;\n    // Update UI with backup code\n    setIsPreviewingBackup(true);\n    setScore(code);\n\n    console.log(\"DEBUG: After preview - isPreviewingBackup:\", true);\n  };\n\n  const handleRestorePreview = (code: string) => {\n    console.log(\n      \"DEBUG: handleRestorePreview called, isPreviewingBackup:\",\n      isPreviewingBackup,\n      \"code length:\",\n      code.length,\n    );\n\n    if (isPreviewingBackup) {\n      // Restore original code\n      setIsPreviewingBackup(false);\n      setScore(code);\n      console.log(\"DEBUG: Original score restored\");\n    } else {\n      console.log(\n        \"DEBUG: NOT restoring preview because isPreviewingBackup is false\",\n      );\n    }\n  };\n\n  return (\n    <EditorContainer\n      className={isDecompositionMode ? \"decomposition-mode\" : \"\"}\n    >\n      <div style={{ paddingBottom: \"100vh\", position: \"relative\" }}>\n        <RawlContainer>\n          {rawlProps && (\n            <Rawl\n              {...rawlProps}\n              savedAnalysis={analysis}\n              latencyCorrectionMs={latencyCorrectionMs * tempo}\n              parsingResult={matchedParsingResult || rawlProps.parsingResult}\n              editorRef={editorRef}\n              navigateToSourceLocation={navigateToSourceLocation}\n            />\n          )}\n        </RawlContainer>\n      </div>\n      <BaseEditorPanel isFolded={foldEditor} height={panelHeight}>\n        <ResizeHandle onMouseDown={handleMouseDown} />\n        <FoldButtonWithIcon\n          position=\"top\"\n          isFolded={foldEditor}\n          onClick={() => setFoldEditor(!foldEditor)}\n        />\n        <EditorContent>\n          {isDecompositionMode ? null : customChild}\n          <CodeMirrorWrapper className={foldEditor ? \"folded\" : \"\"}>\n            <CodeMirror\n              ref={editorRef}\n              value={score}\n              onChange={handleTextChange}\n              onUpdate={handleCursorChange}\n              theme={customTheme}\n              height=\"100%\" /* Remove the height adjustment since the bar is now absolute positioned */\n              style={{ flex: 1 }}\n              extensions={[\n                characterBackgroundsPlugin,\n                rawlLanguage,\n                activeLineGutterTheme,\n                keymap.of([\n                  {\n                    key: \"Mod-/\",\n                    run: toggleComment,\n                  },\n                ]),\n              ]}\n              basicSetup={{\n                lineNumbers: true,\n                highlightActiveLineGutter: true,\n                highlightActiveLine: true,\n                foldGutter: true,\n              }}\n              onFocus={() => setIsEditorFocused(true)}\n              onBlur={() => setIsEditorFocused(false)}\n              readOnly={disableEditing || false}\n            />\n            <StatusBar>\n              {currentLine !== null && currentColumn !== null\n                ? `${currentLine}, ${currentColumn}`\n                : \"\"}\n            </StatusBar>\n          </CodeMirrorWrapper>\n          {error && <ErrorMessage>{error}</ErrorMessage>}\n        </EditorContent>\n        {isDecompositionMode\n          ? customChild\n          : showProgrammingManual && (\n              <ManualContainer>\n                <EditorSavingMenu\n                  effectiveSlug={effectiveSlug}\n                  score={score}\n                  initialSource={initialSource || \"\"}\n                  id={id}\n                  slug={slug}\n                  version={versionNum}\n                  history={history}\n                  setError={setError}\n                  onRestoreBackup={handleRestoreBackup}\n                  onPreviewBackup={handlePreviewBackup}\n                  onRestorePreview={handleRestorePreview}\n                />\n\n                {/* Admin-only tabs */}\n                {user && user.uid === ADMIN_USER_ID && (\n                  <TabsContainer>\n                    <Tab\n                      active={activeTab === \"manual\"}\n                      onClick={() => setActiveTab(\"manual\")}\n                    >\n                      Manual\n                    </Tab>\n                    <Tab\n                      active={activeTab === \"parseMidi\"}\n                      onClick={() => setActiveTab(\"parseMidi\")}\n                    >\n                      ParseMidi\n                    </Tab>\n                    <Tab\n                      active={activeTab === \"midiWriterJs\"}\n                      onClick={() => setActiveTab(\"midiWriterJs\")}\n                    >\n                      MidiWriterJs\n                    </Tab>\n                  </TabsContainer>\n                )}\n\n                {/* Content area - show different content based on active tab */}\n                <AdminContent>\n                  {activeTab === \"manual\" && <Manual score={score} />}\n                  {user &&\n                    user.uid === ADMIN_USER_ID &&\n                    activeTab === \"parseMidi\" &&\n                    matchedParsingResult && (\n                      <ParseMidiDisplay\n                        matchedParsingResult={matchedParsingResult}\n                      />\n                    )}\n                  {user &&\n                    user.uid === ADMIN_USER_ID &&\n                    activeTab === \"midiWriterJs\" &&\n                    extractedMidiNotes && (\n                      <MidiWriterJsDisplay\n                        extractedMidiNotes={extractedMidiNotes}\n                      />\n                    )}\n                </AdminContent>\n              </ManualContainer>\n            )}\n      </BaseEditorPanel>\n    </EditorContainer>\n  );\n};\n\n// Helper function to execute copy command for given channels\nfunction executeCopyForChannels(\n  command: Command & { type: \"copy\" | \"ac\" },\n  channels: number[],\n  context: CommandContext,\n  scoreByTrack: Map<number, LogicalNote[]>,\n  lineNumber?: number,\n) {\n  // Save current track\n  const originalTrack = context.currentTrack;\n\n  // Convert all positions to absolute beats first\n  const sourceStartAbsBeat = calculateGlobalBeatPosition(\n    command.sourceStart,\n    command.sourceStartBeat,\n    context.timeSignatures,\n  );\n\n  const sourceEndAbsBeat = calculateGlobalBeatPosition(\n    command.sourceEnd,\n    command.sourceEndBeat,\n    context.timeSignatures,\n  );\n\n  const targetStartAbsBeat = calculateGlobalBeatPosition(\n    command.targetMeasure,\n    command.targetBeat,\n    context.timeSignatures,\n  );\n\n  const spanLengthInBeats = sourceEndAbsBeat - sourceStartAbsBeat;\n\n  // For each channel, execute the copy\n  for (const track of channels) {\n    // Set current track\n    context.currentTrack = track;\n\n    const currentTrackNotes = scoreByTrack.get(track) || [];\n    const sourceNotes = currentTrackNotes.filter((n) => {\n      return (\n        n.span.start >= sourceStartAbsBeat && n.span.start < sourceEndAbsBeat\n      );\n    });\n\n    if (sourceNotes.length === 0) {\n      continue;\n    }\n\n    const allCopies: LogicalNote[] = command.shifts\n      .map((shiftGroup, idx) => {\n        const copyStartBeat = targetStartAbsBeat + idx * spanLengthInBeats;\n\n        // Get the source positions for this shift group\n        const sourcePositions = shiftGroup.sourcePositions || [];\n\n        // If any shift in the group is 'x', the entire group becomes a rest\n        if (shiftGroup.shifts.includes(\"x\")) {\n          return [\n            {\n              scaleDegree: -Infinity,\n              duration: spanLengthInBeats * TICKS_PER_QUARTER,\n              span: {\n                start: copyStartBeat,\n                end: copyStartBeat + spanLengthInBeats,\n              },\n              midiNumber: null,\n              sourceLocation: sourcePositions[0] || {\n                row: lineNumber || 0,\n                col: 1,\n                command: command.type,\n              },\n            } as LogicalNote,\n          ];\n        }\n\n        // For each shift in the group, create a copy of all source notes with that shift\n        return shiftGroup.shifts.flatMap((shift, shiftIndex) => {\n          // Get the mode modifier for this shift, if any\n          const targetMode = shiftGroup.modes?.[shiftIndex];\n\n          // Get the source position for this specific shift\n          const sourcePosition = sourcePositions[shiftIndex] || {\n            row: lineNumber || 0,\n            col: 1,\n            command: command.type,\n          };\n\n          return sourceNotes.map((n) => {\n            // Calculate relative position from the start of the source\n            const relativePosition = n.span.start - sourceStartAbsBeat;\n            // Apply this relative position to the copy start\n            const targetPosition = copyStartBeat + relativePosition;\n\n            if (n.midiNumber === null) {\n              return {\n                ...n,\n                span: {\n                  start: targetPosition,\n                  end: targetPosition + (n.span.end - n.span.start),\n                },\n                sourceLocation: sourcePosition,\n              };\n            }\n\n            const { newDegree, newMidi } = calculateShiftedNote(\n              n.scaleDegree,\n              shift as number,\n              context.currentKey,\n              n.accidental || 0,\n              track,\n              context,\n              targetMode as ModeName,\n            );\n\n            return {\n              ...n,\n              span: {\n                start: targetPosition,\n                end: targetPosition + (n.span.end - n.span.start),\n              },\n              scaleDegree: newDegree,\n              midiNumber: newMidi,\n              accidental: n.accidental,\n              sourceLocation: sourcePosition,\n            };\n          });\n        });\n      })\n      .flat();\n\n    scoreByTrack.set(track, [...currentTrackNotes, ...allCopies]);\n  }\n\n  // Restore original track\n  context.currentTrack = originalTrack;\n}\n\nexport default withRouter(Editor);\n","import { Analysis, ANALYSIS_STUB, PitchClass } from \"../analysis\";\nimport { TICKS_PER_QUARTER } from \"../forge/constants\";\nimport { SourceLocation } from \"./EditorMidi\";\nimport {\n  BeatPosition,\n  Command,\n  CommandContext,\n  getScaleMapForMode,\n  KeySignature,\n  LogicalNote,\n  MeasureSpan,\n  MODE_SHORTHAND_MAP,\n  ModeName,\n  ModeShorthand,\n  normalizeModeName,\n  NOTE_LETTER_MAP,\n  TimeSignature,\n} from \"./types\";\n\nexport interface Note {\n  midiNumber: number;\n  startTick: number;\n  durationTicks: number;\n  channel: number;\n  sourceLocation?: SourceLocation;\n}\n\nexport interface TrackCommand {\n  type: \"track\";\n  track: number;\n  baseOctave: number;\n}\n\nexport const parseKey = (keyString: string): KeySignature | null => {\n  // Match key signature pattern e.g. \"C major\", \"Ab minor\", or \"F# phrygian\"\n  const match = keyString.match(\n    /^([A-G][b#]?)\\s+(major|minor|lydian|mixolydian|dorian|phrygian|harmonic\\s+minor|melodic\\s+minor)$/i,\n  );\n  if (!match) return null;\n\n  const [_, rootNote, modeString] = match;\n  const noteToNumber: { [key: string]: number } = {\n    C: 0,\n    \"C#\": 1,\n    Db: 1,\n    D: 2,\n    \"D#\": 3,\n    Eb: 3,\n    E: 4,\n    F: 5,\n    \"F#\": 6,\n    Gb: 6,\n    G: 7,\n    \"G#\": 8,\n    Ab: 8,\n    A: 9,\n    \"A#\": 10,\n    Bb: 10,\n    B: 11,\n  };\n\n  // Get the tonic number from the root note\n  const tonic = noteToNumber[rootNote];\n\n  // Get the mode\n  const mode = normalizeModeName(modeString);\n\n  return { tonic, mode };\n};\n\nexport const parseCopyCommand = (\n  line: string,\n  timeSignatures: TimeSignature[] = [],\n  lineNumber?: number,\n): Command | null => {\n  // Match the command format: coordinate c sourceMeasureSpan [sequenceOfShifts]\n  // Examples:\n  // \"2b1.5 c 1b1-8b4 0\" - explicit beat positions\n  // \"2 c 1-8 0\" - implicit beat positions (1b1-9b1)\n  // \"2 c 1 0\" - single measure (1b1-2b1)\n  // \"2 c 1\" - single measure with default shift of 0\n  // \"2 c 1 0 x 0\" - with rest marker 'x' to skip a copy\n  // \"2 c 1 -3 -2 -5 -4 -7 -4 -3\" - with negative shifts for Pachelbel's progression\n  // \"2 c 1 2&5\" - with & syntax to layer multiple shifts at same position\n  // \"2 c 1 2h\" - with modifier 'h' for harmonic minor\n  // \"2 c 1 2h 3e 4M 5m\" - with multiple modifiers for different modes\n  const match = line.match(\n    /^(\\d+)(?:b(\\d+(?:\\.\\d+)?))?\\s+(?:c|ac)\\s+(\\d+)(?:b(\\d+(?:\\.\\d+)?))?(?:-(\\d+)(?:b(\\d+(?:\\.\\d+)?))?)?\\s*((?:x|[+-]?\\d+(?:[heMm])?(?:&[+-]?\\d+(?:[heMm])?)*(?:\\s+(?:x|[+-]?\\d+(?:[heMm])?(?:&[+-]?\\d+(?:[heMm])?)*))*)*)$/,\n  );\n  if (!match) return null;\n\n  const [\n    _,\n    measureStr,\n    beatStr,\n    sourceStartStr,\n    sourceStartBeatStr,\n    sourceEndStr,\n    sourceEndBeatStr,\n    shiftsStr,\n  ] = match;\n\n  const targetMeasure = parseInt(measureStr);\n  const targetBeat = beatStr ? parseFloat(beatStr) : 1;\n\n  // Parse source measure(s)\n  const sourceStart = parseInt(sourceStartStr);\n  // If no beat specified for start, default to beat 1 of same measure\n  const sourceStartBeat = sourceStartBeatStr\n    ? parseFloat(sourceStartBeatStr)\n    : 1;\n\n  let sourceEnd: number;\n  let sourceEndBeat: number;\n\n  if (sourceEndStr) {\n    // If there's an explicit end measure\n    sourceEnd = parseInt(sourceEndStr);\n    if (sourceEndBeatStr) {\n      // If there's an explicit end beat, use it\n      sourceEndBeat = parseFloat(sourceEndBeatStr);\n    } else {\n      // If no explicit end beat, default to beat 1 of next measure\n      sourceEnd = sourceEnd + 1;\n      sourceEndBeat = 1;\n    }\n  } else {\n    // Single measure specified - default to beat 1 of next measure\n    sourceEnd = sourceStart + 1;\n    sourceEndBeat = 1;\n  }\n\n  // Validate all measures and beats\n  if (\n    targetMeasure < 1 ||\n    sourceStart < 1 ||\n    sourceEnd < sourceStart ||\n    targetBeat < 1 ||\n    sourceStartBeat < 1 ||\n    sourceEndBeat < 1\n  ) {\n    return null;\n  }\n\n  // Extract all shifts by matching numbers or 'x', supporting & syntax for layered shifts\n  // and mode modifiers (h, e, M, m)\n  // If no shifts provided, default to [\"0\"]\n  const shiftsStrTrimmed = (shiftsStr || \"0\").trim();\n  const shiftTokens = shiftsStrTrimmed.split(/\\s+/).filter(Boolean);\n\n  // Find the column positions for each shift token in the original line\n  const shiftStartPositions: number[] = [];\n\n  if (shiftTokens.length > 0) {\n    // Find each shift token's position in the original line\n    let currentPos = line.indexOf(shiftsStrTrimmed);\n\n    for (const token of shiftTokens) {\n      currentPos = line.indexOf(token, currentPos);\n      if (currentPos !== -1) {\n        // Convert to 1-based column position for consistency with source locations\n        const columnPosition = currentPos + 1;\n        shiftStartPositions.push(columnPosition);\n        currentPos += token.length;\n      } else {\n        // Fallback if we can't find the exact position\n        shiftStartPositions.push(1);\n      }\n    }\n  } else {\n    // Default position for implicit shift 0\n    shiftStartPositions.push(1);\n  }\n\n  // Use the exact line number passed in (1-based) instead of relying on array indices\n  const actualLineNumber = lineNumber || 1;\n\n  const shifts = shiftTokens.map(\n    (\n      token,\n      index,\n    ): { shift: number | \"x\"; mode?: ModeName; sourceCol: number }[] => {\n      const sourceCol = shiftStartPositions[index];\n\n      if (token === \"x\") return [{ shift: \"x\", sourceCol }];\n\n      // If token contains &, it represents layered shifts at the same position\n      if (token.includes(\"&\")) {\n        return token.split(\"&\").map((shiftToken) => {\n          // Parse shift and mode modifier\n          const match = shiftToken.match(/^([+-]?\\d+)([heMm])?$/);\n          if (!match) return { shift: Number(shiftToken), sourceCol };\n\n          const [_, shiftValue, modeModifier] = match;\n          const shift = Number(shiftValue);\n\n          let mode: ModeName | undefined;\n          if (modeModifier) {\n            mode = MODE_SHORTHAND_MAP[modeModifier as ModeShorthand];\n          }\n\n          return { shift, mode, sourceCol };\n        });\n      }\n\n      // Parse single shift with possible mode modifier\n      const match = token.match(/^([+-]?\\d+)([heMm])?$/);\n      if (!match) return [{ shift: Number(token), sourceCol }];\n\n      const [_, shiftValue, modeModifier] = match;\n      const shift = Number(shiftValue);\n\n      let mode: ModeName | undefined;\n      if (modeModifier) {\n        mode = MODE_SHORTHAND_MAP[modeModifier as ModeShorthand];\n      }\n\n      return [{ shift, mode, sourceCol }];\n    },\n  );\n\n  // Determine if this is a regular copy or an all-channels copy\n  const isAllChannels = line.trim().split(/\\s+/)[1] === \"ac\";\n  const commandType = isAllChannels ? \"ac\" : \"copy\";\n\n  return {\n    type: commandType,\n    targetMeasure,\n    targetBeat,\n    sourceStart,\n    sourceStartBeat,\n    sourceEnd,\n    sourceEndBeat,\n    shifts: shifts.map((shiftGroup) => ({\n      type: \"group\",\n      shifts: shiftGroup.map((s) => s.shift),\n      modes: shiftGroup.map((s) => s.mode),\n      sourcePositions: shiftGroup.map((s) => ({\n        row: actualLineNumber,\n        col: s.sourceCol,\n        command: commandType,\n      })),\n    })),\n  };\n};\n\nexport const parseTimeSignatures = (line: string): TimeSignature[] | null => {\n  const parts = line.trim().split(/\\s+/);\n  const signatures: TimeSignature[] = [];\n  let currentMeasure = 1;\n\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n\n    // Parse time signature format (numerator/4)\n    if (part.includes(\"/\")) {\n      const [numerator, denominator] = part.split(\"/\");\n      const num = parseInt(numerator);\n\n      // Validate format - only check that numerator is positive and denominator is 4\n      if (isNaN(num) || denominator !== \"4\" || num <= 0) {\n        return null;\n      }\n\n      signatures.push({\n        numerator: num,\n        measureStart: currentMeasure,\n      });\n    } else {\n      // Must be a measure number\n      const measure = parseInt(part);\n      if (isNaN(measure) || measure <= currentMeasure) {\n        return null;\n      }\n\n      // Next part must be a time signature\n      if (i + 1 >= parts.length || !parts[i + 1].includes(\"/\")) {\n        return null;\n      }\n\n      currentMeasure = measure;\n    }\n  }\n\n  return signatures.length > 0 ? signatures : null;\n};\n\nexport const getTimeSignatureAt = (\n  measure: number,\n  timeSignatures: TimeSignature[],\n): number => {\n  // Default to 4/4 if no time signatures defined\n  if (!timeSignatures.length) return 4;\n\n  // Find the last time signature that starts before or at this measure\n  for (let i = timeSignatures.length - 1; i >= 0; i--) {\n    if (timeSignatures[i].measureStart <= measure) {\n      return timeSignatures[i].numerator;\n    }\n  }\n\n  // If no time signature found before this measure, use the first one\n  return timeSignatures[0].numerator;\n};\n\n// Extend CommandContext to include analysis\nexport interface ExtendedCommandContext extends CommandContext {\n  analysis: Analysis;\n}\n\n// Add a new function to parse phrase patch information\n// Note: All analysis-related commands (like 'phrases') should be\n// styled with white italic text in the editor to distinguish them\n// from playback commands.\n// For phrases command arguments (e.g., \"1+1\", \"18+2\"), the measure numbers\n// are kept as normal text color while the +/- diff parts are styled as white bold.\nfunction parsePhrasesCommand(\n  cleanLine: string,\n  context: ExtendedCommandContext,\n): boolean {\n  const phrasesMatch = cleanLine.match(/^phrases\\s+(.+)$/i);\n  if (!phrasesMatch) return false;\n\n  // Parse the phrases data part\n  const phrasesData = phrasesMatch[1].trim();\n  const phrasePairs = phrasesData.split(/\\s+/);\n\n  // Create a new phrasePatch array\n  const phrasePatch: { measure: number; diff: number }[] = [];\n\n  // Process each phrase pair (e.g., \"1+1\", \"18+2\", \"10-1\")\n  for (const pair of phrasePairs) {\n    // Match for either +N or -N format\n    const pairMatch = pair.match(/^(\\d+)([+-])(\\d+)$/);\n    if (pairMatch) {\n      const measure = parseInt(pairMatch[1], 10);\n      const sign = pairMatch[2] === \"+\" ? 1 : -1;\n      const diff = parseInt(pairMatch[3], 10) * sign;\n\n      phrasePatch.push({ measure, diff });\n    }\n  }\n\n  // Update the analysis in the context\n  if (phrasePatch.length > 0) {\n    context.analysis.phrasePatch = phrasePatch;\n    return true;\n  }\n\n  return false;\n}\n\n// Add a new function to parse sections information\nfunction parseSectionsCommand(\n  cleanLine: string,\n  context: ExtendedCommandContext,\n): boolean {\n  const sectionsMatch = cleanLine.match(/^sections\\s+(.+)$/i);\n  if (!sectionsMatch) return false;\n\n  // Parse the sections data part\n  const sectionsData = sectionsMatch[1].trim();\n  const sectionNumbers = sectionsData.split(/\\s+/);\n\n  // Create a new sections array\n  const sections: number[] = [];\n\n  // Process each section number\n  for (const sectionStr of sectionNumbers) {\n    const section = parseInt(sectionStr, 10);\n    if (!isNaN(section)) {\n      sections.push(section);\n    }\n  }\n\n  // Update the analysis in the context\n  if (sections.length > 0) {\n    context.analysis.sections = [0, ...sections.map((section) => section - 1)];\n    return true;\n  }\n\n  return false;\n}\n\n// Find where ANALYSIS_STUB is imported and add more code to see its value\nconst ANALYSIS_STUB_WITH_SECTIONS: Analysis = {\n  ...ANALYSIS_STUB,\n  sections: [],\n};\n\nexport const parseCommand = (\n  line: string,\n  context: CommandContext,\n  lineNumber?: number,\n): Command | null => {\n  // Make sure context has an analysis object\n  const extendedContext = context as ExtendedCommandContext;\n  if (!extendedContext.analysis) {\n    extendedContext.analysis = { ...ANALYSIS_STUB_WITH_SECTIONS };\n  }\n\n  // If we're in comment-to-end-of-file mode, return null immediately\n  if (context.commentToEndOfFile) return null;\n\n  // Handle single % comment that comments out everything to end of file\n  if (line.trim() === \"%\") {\n    context.commentToEndOfFile = true;\n    return null;\n  }\n\n  // Remove comments but preserve the original line number\n  const cleanLine = line.split(\"%\")[0].trim();\n  if (!cleanLine) {\n    return null;\n  }\n\n  // Try parsing as phrases command first\n  if (parsePhrasesCommand(cleanLine, extendedContext)) {\n    return null; // Return null because it's an analysis command, not a playback command\n  }\n\n  // Try parsing as sections command\n  if (parseSectionsCommand(cleanLine, extendedContext)) {\n    return null; // Return null because it's an analysis command, not a playback command\n  }\n\n  // Try parsing as track command first\n  const trackCommand = parseTrackCommand(cleanLine, context);\n  if (trackCommand) {\n    return trackCommand;\n  }\n\n  // Try parsing as time signature command\n  if (cleanLine.includes(\"/4\")) {\n    const signatures = parseTimeSignatures(cleanLine);\n    if (signatures) {\n      return { type: \"time\", signatures };\n    }\n  }\n\n  // Try parsing as key command\n  const key = parseKey(cleanLine);\n  if (key) {\n    // Update the analysis with the key information\n    if (extendedContext.analysis) {\n      extendedContext.analysis.modulations = {\n        1: key.tonic as PitchClass,\n      };\n    }\n    return { type: \"key\", key };\n  }\n\n  // Try parsing as BPM command\n  const bpmMatch = cleanLine.match(/^bpm\\s+(\\d+)$/i);\n  if (bpmMatch) {\n    const tempo = parseInt(bpmMatch[1], 10);\n    if (tempo > 0) {\n      return { type: \"bpm\", tempo };\n    }\n    return null;\n  }\n\n  // Try parsing as copy command\n  const copyCmd = parseCopyCommand(\n    cleanLine,\n    context.timeSignatures,\n    lineNumber,\n  );\n  if (copyCmd) {\n    return copyCmd;\n  }\n\n  // Parse as note insert command\n  const match = cleanLine.match(/^\\s*(\\d+)(?:b(\\d+(?:\\.\\d+)?))?\\s+i\\s+(.+)$/);\n  if (match) {\n    const [_, measureStr, beatStr, melodyPart] = match;\n    const startMeasure = parseInt(measureStr);\n    const startBeat = beatStr ? parseFloat(beatStr) : 1;\n    const key = context.currentKey;\n\n    // Validate measure and beat\n    if (\n      isNaN(startMeasure) ||\n      startMeasure < 1 ||\n      isNaN(startBeat) ||\n      startBeat < 1\n    ) {\n      return null;\n    }\n\n    // Get time signature for this measure and validate beat\n    const beatsInMeasure = getTimeSignatureAt(\n      startMeasure,\n      context.timeSignatures,\n    );\n    const beatsPerMeasure = beatsInMeasure || 4; // Fallback to 4/4 if no time signature\n\n    const notes = parseMelodyString(\n      cleanLine,\n      {\n        ...context,\n        beatsPerMeasure,\n      },\n      lineNumber,\n    );\n\n    if (notes.length > 0) {\n      return { type: \"insert\", notes };\n    }\n  }\n\n  return null;\n};\n\n// Helper function to calculate MIDI number from scale degree and key\nexport const calculateMidiNumber = (\n  scaleDegree: number | string,\n  accidental: number | undefined,\n  octaveShift: number,\n  key: KeySignature,\n  track: number, // 1 for RH, 2 for LH\n  context: CommandContext,\n): number | null => {\n  if (scaleDegree === -Infinity) return null; // Rest\n\n  // Get absolute scale degree\n  const absoluteScaleDegree =\n    typeof scaleDegree === \"string\"\n      ? NOTE_LETTER_MAP[scaleDegree.toLowerCase()] || 0\n      : scaleDegree;\n\n  // Calculate which octave this scale degree belongs to\n  const baseDegree = absoluteScaleDegree % 7;\n  const octave = Math.floor(absoluteScaleDegree / 7);\n\n  // Get the semitone offset for this scale degree based on mode\n  const scaleMap = getScaleMapForMode(key.mode);\n  const semitoneOffset = scaleMap[baseDegree];\n\n  // Use the appropriate base octave from context\n  const baseOctave = getBaseOctaveForTrack(track, context);\n\n  // Calculate final MIDI number, now including the octaveShift\n  const midiNumber =\n    key.tonic +\n    semitoneOffset +\n    (baseOctave + octave + octaveShift) * 12 +\n    (accidental || 0);\n\n  // Ensure the note is within MIDI range (0-127)\n  if (midiNumber < 0 || midiNumber > 127) return null;\n\n  return midiNumber;\n};\n\n// Helper to calculate the global beat position for a measure and beat\nexport const calculateGlobalBeatPosition = (\n  measure: number,\n  beatInMeasure: number,\n  timeSignatures: TimeSignature[],\n): BeatPosition => {\n  let totalBeats = 0;\n  let currentMeasure = 1;\n\n  // Add up beats for all complete measures before the target measure\n  while (currentMeasure < measure) {\n    const beatsInMeasure = getTimeSignatureAt(currentMeasure, timeSignatures);\n    totalBeats += beatsInMeasure;\n    currentMeasure++;\n  }\n\n  // Add the beats within the target measure\n  // Ensure we don't exceed the measure's time signature\n  const measureBeats = getTimeSignatureAt(measure, timeSignatures);\n  const clampedBeatInMeasure = Math.min(beatInMeasure, measureBeats);\n  return totalBeats + (clampedBeatInMeasure - 1);\n};\n\n// Helper to convert a global beat position back to measure and beat\nexport const globalBeatToMeasureAndBeat = (\n  globalBeat: BeatPosition,\n  timeSignatures: TimeSignature[],\n): { measure: number; beatInMeasure: number } => {\n  let measure = 1;\n  let remainingBeats = globalBeat;\n\n  // Subtract complete measures until we can't anymore\n  while (remainingBeats >= getTimeSignatureAt(measure, timeSignatures)) {\n    remainingBeats -= getTimeSignatureAt(measure, timeSignatures);\n    measure++;\n  }\n\n  return {\n    measure,\n    beatInMeasure: remainingBeats + 1,\n  };\n};\n\nexport const parseMelodyString = (\n  melodyString: string,\n  context: CommandContext,\n  lineNumber?: number,\n): LogicalNote[] => {\n  // Keep track of all lines, including empty ones, to maintain correct line numbers\n  const lines = melodyString.split(\"\\n\");\n\n  // Keep track of active line numbers (1-based) properly\n  const result: LogicalNote[] = [];\n\n  // Process each line with proper line numbering\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    // Calculate the correct line number (1-based) for this line\n    const actualLineNumber = (lineNumber || 1) + i;\n\n    // Skip processing empty lines but maintain their count in line numbering\n    if (!line.trim()) {\n      continue;\n    }\n\n    const match = line.match(/^\\s*(\\d+)(?:b(\\d+(?:\\.\\d+)?))?\\s+i\\s+(.+)$/);\n    if (!match) {\n      continue;\n    }\n\n    const [_, measureStr, beatStr, melodyPart] = match;\n\n    const startMeasure = parseInt(measureStr);\n    const startBeat = beatStr ? parseFloat(beatStr) : 1;\n    const key = context.currentKey;\n\n    // Calculate the global beat position for the start\n    let currentPosition = calculateGlobalBeatPosition(\n      startMeasure,\n      startBeat,\n      context.timeSignatures,\n    );\n\n    // Find the start position of the melody part in the original line\n    const melodyPartStartIndex = line.indexOf(melodyPart);\n\n    // Process tokens with position information\n    const tokens = processTokens(melodyPart, melodyPartStartIndex);\n    const lineNotes: LogicalNote[] = [];\n\n    for (let j = 0; j < tokens.length; j++) {\n      const token = tokens[j];\n      if (!token.value.trim()) continue;\n\n      // Check if this token is a duration marker\n      const isDurationMarker = /^[+_\\-=,'\"][.:]?$/.test(token.value);\n\n      if (isDurationMarker) {\n        // Apply this duration to the previous note(s)\n        const duration = getDuration(token.value, context.beatsPerMeasure || 4);\n\n        // Find the last group of notes (could be a single note or chord)\n        let lastNoteIndex = lineNotes.length - 1;\n        while (\n          lastNoteIndex >= 0 &&\n          lineNotes[lastNoteIndex].span.start ===\n            lineNotes[lineNotes.length - 1].span.start\n        ) {\n          lineNotes[lastNoteIndex].duration = duration * TICKS_PER_QUARTER;\n          lineNotes[lastNoteIndex].span.end =\n            lineNotes[lastNoteIndex].span.start + duration;\n          lastNoteIndex--;\n        }\n\n        // Update position for next note\n        if (lineNotes.length > 0) {\n          currentPosition = lineNotes[lineNotes.length - 1].span.end;\n        }\n        continue;\n      }\n\n      // Handle note or chord\n      // First split into tokens by commas and whitespace\n      const rawNoteTokens = token.value.split(/[,\\s]+/);\n      const noteTokens = rawNoteTokens.filter(Boolean);\n\n      const span: MeasureSpan = {\n        start: currentPosition,\n        end: currentPosition + 1, // Default to one beat duration\n      };\n\n      // Process each token\n      for (const noteToken of noteTokens) {\n        // Skip duration markers\n        if (/^[+_\\-=,'\"][.:]?$/.test(noteToken)) continue;\n\n        // Extract octave shift and accidental prefixes\n        let accidental: -1 | 0 | 1 = 0;\n        let actualNote = noteToken;\n\n        // Count octave shifts (^ and v symbols)\n        const octaveUpMatches = noteToken.match(/\\^/g);\n        const octaveDownMatches = noteToken.match(/v/g);\n\n        // The scale degree offset is calculated as octaves * 7 (7 scale degrees per octave)\n        let scaleDegreeOffset = 0;\n\n        if (octaveUpMatches) {\n          scaleDegreeOffset += octaveUpMatches.length * 7;\n          actualNote = actualNote.replace(/\\^/g, \"\");\n        }\n\n        if (octaveDownMatches) {\n          scaleDegreeOffset -= octaveDownMatches.length * 7;\n          actualNote = actualNote.replace(/v/g, \"\");\n        }\n\n        // Handle accidentals after octave shifts\n        if (actualNote.startsWith(\"b\")) {\n          accidental = -1;\n          actualNote = actualNote.slice(1);\n        } else if (actualNote.startsWith(\"#\")) {\n          accidental = 1;\n          actualNote = actualNote.slice(1);\n        }\n\n        // Skip if not a valid note\n        if (!/^[a-zA-Z1-90x]$/.test(actualNote)) continue;\n\n        // Find the exact position of this note in the original melody string\n        // We need to find where in the token string this note appears\n        // Be careful not to double-count - the token.position is already 1-based\n        const noteIndex = token.value.lastIndexOf(actualNote);\n        const notePosition =\n          noteIndex !== -1 ? token.position + noteIndex : token.position;\n\n        // Create source location with the EXACT line number\n        const sourceLocation = {\n          row: actualLineNumber,\n          col: notePosition,\n          command: \"insert\",\n        };\n\n        // Handle rest\n        if (actualNote === \"x\") {\n          lineNotes.push({\n            scaleDegree: -Infinity,\n            duration: TICKS_PER_QUARTER,\n            span: { ...span },\n            midiNumber: null,\n            sourceLocation,\n          });\n          continue;\n        }\n\n        let absoluteScaleDegree = NOTE_LETTER_MAP[actualNote.toLowerCase()];\n        if (absoluteScaleDegree === undefined) continue;\n\n        // Apply the octave shift directly to the scale degree\n        absoluteScaleDegree += scaleDegreeOffset;\n\n        const midiNumber = calculateMidiNumber(\n          absoluteScaleDegree,\n          accidental,\n          0, // No separate octaveShift needed, already incorporated in scale degree\n          key,\n          context.currentTrack,\n          context,\n        );\n\n        if (midiNumber !== null) {\n          lineNotes.push({\n            scaleDegree: absoluteScaleDegree,\n            duration: TICKS_PER_QUARTER,\n            span: { ...span },\n            midiNumber,\n            accidental,\n            sourceLocation,\n          });\n        }\n      }\n\n      // If this is the last token and it's not a duration marker,\n      // advance the position by one beat\n      if (j === tokens.length - 1 && !isDurationMarker) {\n        currentPosition += 1;\n      }\n    }\n\n    // Add the notes from this line to the result\n    result.push(...lineNotes);\n  }\n\n  return result;\n};\n\nconst getDuration = (marker: string, beatsPerMeasure: number = 4): number => {\n  // Split marker into base duration and check for dot and triplet\n  const hasDot = marker.includes(\".\");\n  const hasTriplet = marker.includes(\":\");\n  const baseDuration = marker.split(/[.:]/, 1)[0];\n  let duration: number;\n\n  switch (baseDuration) {\n    case \"+\":\n      duration = 4; // Always 4 beats for whole note, regardless of time signature\n      break;\n    case \"_\":\n      duration = 2; // half note\n      break;\n    case \",\":\n      duration = 1; // quarter note (comma)\n      break;\n    case \"-\":\n      duration = 0.5; // eighth note\n      break;\n    case \"=\":\n      duration = 0.25; // sixteenth note\n      break;\n    case \"'\":\n      duration = 0.125; // thirty-second note\n      break;\n    case '\"':\n      duration = 0.0625; // sixty-fourth note\n      break;\n    default:\n      duration = 1; // default to quarter note\n  }\n\n  // If there's a dot, increase duration by half of the original duration\n  if (hasDot) {\n    duration = duration + duration / 2;\n  }\n\n  // If there's a triplet marker, multiply duration by 2/3\n  if (hasTriplet) {\n    duration = duration * (2 / 3);\n  }\n\n  return duration;\n};\n\n// Helper to process melody string into tokens, now with position tracking\ninterface PositionedToken {\n  value: string;\n  position: number; // Position in original string\n}\n\n// Updated to track positions more accurately\nconst processTokens = (\n  melodyPart: string,\n  startIndex: number = 0,\n): PositionedToken[] => {\n  const tokens: PositionedToken[] = [];\n  let currentToken = \"\";\n  let currentTokenStart = 0;\n\n  // IMPORTANT: Don't remove spaces from the melody part as it affects column positions\n  // Instead, track them properly while parsing\n\n  let i = 0;\n  while (i < melodyPart.length) {\n    const char = melodyPart[i];\n\n    // Skip whitespace but track its position\n    if (/\\s/.test(char)) {\n      // If we have a current token, push it before moving on\n      if (currentToken) {\n        tokens.push({\n          value: currentToken,\n          position: startIndex + currentTokenStart, // Already 0-based index, we'll add 1 later\n        });\n        currentToken = \"\";\n      }\n      i++;\n      continue;\n    }\n\n    if (/[+_\\-=,'\"]/.test(char)) {\n      // If we have accumulated a token, push it\n      if (currentToken) {\n        tokens.push({\n          value: currentToken,\n          position: startIndex + currentTokenStart, // Already 0-based index, we'll add 1 later\n        });\n        currentToken = \"\";\n      }\n\n      // Look ahead for modifiers (. or :)\n      let durationToken = char;\n      const durationTokenPos = i;\n      if (i + 1 < melodyPart.length && /[.:]/.test(melodyPart[i + 1])) {\n        durationToken += melodyPart[i + 1];\n        i++; // Skip the modifier in next iteration\n      }\n      tokens.push({\n        value: durationToken,\n        position: startIndex + durationTokenPos, // Already 0-based index, we'll add 1 later\n      });\n      i++;\n    } else if (/[.:]/.test(char)) {\n      // Skip standalone dots and colons (they should be handled with the duration markers)\n      i++;\n    } else if (/[#b\\^v]/.test(char)) {\n      // Handle accidentals and octave shifts - they should be part of the next note\n      if (currentToken) {\n        // If we have a token already, push it before starting new one with accidental or octave shift\n        tokens.push({\n          value: currentToken,\n          position: startIndex + currentTokenStart, // Already 0-based index, we'll add 1 later\n        });\n        currentToken = \"\";\n      }\n      currentToken = char;\n      currentTokenStart = i;\n      i++;\n\n      // Continue collecting ^ or v symbols for octave shifts\n      while (i < melodyPart.length && /[\\^v]/.test(melodyPart[i])) {\n        currentToken += melodyPart[i];\n        i++;\n      }\n\n      // If next character is an accidental, add it to the current token\n      if (i < melodyPart.length && /[#b]/.test(melodyPart[i])) {\n        currentToken += melodyPart[i];\n        i++;\n      }\n    } else if (/[a-zA-Z1-90x]/.test(char)) {\n      if (!currentToken) {\n        currentTokenStart = i;\n      }\n      currentToken += char;\n      i++;\n\n      // Check if we have a complete token to push\n      const hasOctaveOrAccidental = /^[#b\\^v]+/.test(currentToken);\n      const noteChar = currentToken.match(/[a-zA-Z1-90x]$/);\n\n      if (noteChar && (hasOctaveOrAccidental || currentToken.length === 1)) {\n        tokens.push({\n          value: currentToken,\n          position: startIndex + currentTokenStart, // Already 0-based index, we'll add 1 later\n        });\n        currentToken = \"\";\n      }\n    } else {\n      // Skip unrecognized characters\n      i++;\n    }\n  }\n\n  // Push any remaining token\n  if (currentToken) {\n    tokens.push({\n      value: currentToken,\n      position: startIndex + currentTokenStart, // Already 0-based index, we'll add 1 later\n    });\n  }\n\n  // Convert all positions to 1-based for source locations\n  return tokens.map((token) => ({\n    value: token.value,\n    position: token.position + 1, // Convert to 1-based column numbers for source locations\n  }));\n};\n\n// Helper to calculate scale degree shift and resulting MIDI number adjustment\nexport const calculateShiftedNote = (\n  originalDegree: number,\n  shift: number,\n  key: KeySignature,\n  accidental: number = 0,\n  track: number,\n  context: CommandContext,\n  targetMode?: ModeName,\n): { newDegree: number; newMidi: number } => {\n  const newDegree = originalDegree + shift;\n\n  // Implement proper modulo that always gives positive result\n  const properModulo = (n: number, m: number): number => {\n    return ((n % m) + m) % m;\n  };\n\n  // Get positive base degree (0-6) and adjust octave accordingly\n  const baseDegree = properModulo(newDegree, 7);\n  const octave = Math.floor(newDegree / 7);\n\n  // Create a copy of the key to avoid modifying the original\n  const effectiveKey = { ...key };\n\n  // If a target mode is specified, use it instead of the original key's mode\n  if (targetMode) {\n    effectiveKey.mode = targetMode;\n  }\n\n  // Get the scale map based on mode\n  const scaleMap = getScaleMapForMode(effectiveKey.mode);\n\n  // Use the appropriate base octave from context\n  const baseOctave = getBaseOctaveForTrack(track, context);\n\n  // Include baseOctave in calculation\n  const newMidi =\n    effectiveKey.tonic +\n    scaleMap[baseDegree] +\n    (baseOctave + octave) * 12 +\n    accidental;\n\n  return { newDegree, newMidi };\n};\n\n// Modify logicalNoteToMidi to include source location\nexport const logicalNoteToMidi = (\n  note: LogicalNote,\n  track: number,\n  timeSignatures: TimeSignature[],\n): Note | null => {\n  if (note.midiNumber === null) return null;\n\n  return {\n    midiNumber: note.midiNumber,\n    startTick: note.span.start * TICKS_PER_QUARTER,\n    durationTicks: note.duration,\n    channel: track - 1, // Convert 1-based track to 0-based channel\n    sourceLocation: note.sourceLocation, // Pass through the source location\n  };\n};\n\nfunction parseTrackCommand(\n  cleanLine: string,\n  context: CommandContext,\n): TrackCommand | null {\n  // Try new channel syntax first\n  const channelMatch = cleanLine.match(/^ch(\\d+)(?:\\s+(\\d+))?$/i);\n  if (channelMatch) {\n    const channel = parseInt(channelMatch[1], 10);\n    if (channel < 0 || channel > 15) {\n      throw new Error(\"MIDI channel must be between 0 and 15\");\n    }\n    const baseOctave = channelMatch[2]\n      ? parseInt(channelMatch[2], 10)\n      : channel === 1\n      ? 3\n      : 5;\n    context.channelOctaves[channel] = baseOctave;\n    const track = channel + 1; // Convert channel to 1-based track number\n    return {\n      type: \"track\",\n      track,\n      baseOctave,\n    };\n  }\n\n  // Backward compatibility for lh/rh\n  const trackMatch = cleanLine.match(/^(lh|rh)(?:\\s+(\\d+))?$/i);\n  if (trackMatch) {\n    const [, hand, octave] = trackMatch;\n    const track = hand.toLowerCase() === \"lh\" ? 2 : 1;\n    const channel = track - 1;\n    const baseOctave = octave ? parseInt(octave, 10) : track === 2 ? 2 : 4;\n    context.channelOctaves[channel] = baseOctave;\n    return {\n      type: \"track\",\n      track,\n      baseOctave,\n    };\n  }\n\n  return null;\n}\n\nfunction getBaseOctaveForTrack(track: number, context: CommandContext): number {\n  const channel = track - 1;\n  return context.channelOctaves[channel] ?? (channel === 1 ? 3 : 5);\n}\n","import { useEffect, useState } from \"react\";\n\nexport interface BackupData {\n  score: string;\n  timestamp: number;\n  sessionTime: number;\n}\n\nexport function useBackup(effectiveSlug: string) {\n  const backupKey = `rawl_backup_${effectiveSlug}`;\n\n  // Initialize state from localStorage or null\n  const [backup, setBackupState] = useState<BackupData | null>(() => {\n    try {\n      const item = localStorage.getItem(backupKey);\n      console.log(\n        `[Backup] Retrieving backup for ${effectiveSlug}:`,\n        item ? \"Found\" : \"Not found\",\n      );\n      return item ? JSON.parse(item) : null;\n    } catch (error) {\n      console.error(\"Error reading from localStorage:\", error);\n      return null;\n    }\n  });\n\n  // Update localStorage when backup changes\n  useEffect(() => {\n    if (backup) {\n      try {\n        // Check if localStorage already has the same score content\n        const existingBackup = localStorage.getItem(backupKey);\n        const existingData = existingBackup ? JSON.parse(existingBackup) : null;\n\n        if (!existingData || existingData.score !== backup.score) {\n          console.log(`[Backup] Saving backup for ${effectiveSlug}`, {\n            timestamp: new Date(backup.timestamp).toLocaleString(),\n            sessionTime: backup.sessionTime,\n            scoreLength: backup.score.length,\n          });\n          localStorage.setItem(backupKey, JSON.stringify(backup));\n        } else {\n          console.log(\n            `[Backup] Skipping localStorage save - score content unchanged`,\n          );\n        }\n      } catch (error) {\n        console.error(\"Error checking/saving backup to localStorage:\", error);\n      }\n    }\n  }, [backup, backupKey]);\n\n  // Wrapped setBackup function that only saves if the score is different\n  const setBackup = (newBackup: BackupData) => {\n    // Only update if we don't have a backup yet, or if the score content has changed\n    if (!backup || backup.score !== newBackup.score) {\n      console.log(\n        `[Backup] Updating backup for ${effectiveSlug} - content changed`,\n      );\n      setBackupState(newBackup);\n    } else {\n      console.log(\n        `[Backup] Skipping backup for ${effectiveSlug} - no content change`,\n      );\n    }\n  };\n\n  // Function to remove backup from state and localStorage\n  const removeBackup = () => {\n    console.log(`[Backup] Removing backup for ${effectiveSlug}`);\n    localStorage.removeItem(backupKey);\n    setBackupState(null);\n  };\n\n  return {\n    backup,\n    setBackup,\n    removeBackup,\n    backupKey,\n  };\n}\n","import styled from \"styled-components\";\n\nexport const ManualContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: #1e1e1e;\n  color: #ddd;\n  border-left: 1px solid #333;\n  font-size: 14px;\n`;\n\nexport const KeyboardLayout = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  background: #1e1e1e;\n  border-right: 1px solid #333;\n  height: 100%;\n  min-height: 0;\n  overflow-y: auto;\n  flex: 1 1 auto;\n  font-size: 12px;\n  color: #ccc;\n  line-height: 1.6;\n\n  .top-section {\n    display: flex;\n    flex-direction: row;\n    margin-bottom: 20px;\n  }\n\n  .left-column {\n    flex: 0 0 250px;\n    margin-right: 5px;\n    min-width: 200px;\n  }\n\n  .right-column {\n    flex: 1;\n  }\n`;\n\nexport const ButtonBar = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n\n  .left-section {\n    flex: 1;\n    display: flex;\n    justify-content: flex-start;\n  }\n\n  .center-section {\n    flex: 2;\n    display: flex;\n    justify-content: center;\n  }\n\n  .right-section {\n    flex: 1;\n    display: flex;\n    justify-content: flex-end;\n    gap: 8px;\n  }\n`;\n\nexport const RestoreButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background-color: #2a2a2a;\n  border: 1px solid #444;\n  color: #eee;\n  padding: 6px 12px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 12px;\n\n  &:hover {\n    background-color: #3a3a3a;\n  }\n\n  .icon {\n    margin-left: 4px;\n  }\n`;\n\nexport const ViewToggle = styled.div`\n  display: flex;\n  background-color: #2a2a2a;\n  border-radius: 4px;\n  overflow: hidden;\n`;\n\nexport const ToggleButton = styled.button<{ active: boolean }>`\n  background-color: ${(props) => (props.active ? \"#333\" : \"transparent\")};\n  color: ${(props) => (props.active ? \"#fff\" : \"#aaa\")};\n  border: 1px solid ${(props) => (props.active ? \"#555\" : \"#444\")};\n  border-radius: 4px;\n  padding: 8px 12px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n\n  &:hover:not([disabled]) {\n    background-color: ${(props) => (props.active ? \"#333\" : \"#222\")};\n    color: #fff;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background-color: ${(props) => (props.active ? \"#333\" : \"transparent\")};\n    color: ${(props) => (props.active ? \"#aaa\" : \"#666\")};\n  }\n\n  svg {\n    font-size: 12px;\n  }\n`;\n\nexport const TelegramInput = styled.input`\n  background-color: #2a2a2a;\n  border: 1px solid #444;\n  color: #eee;\n  padding: 6px 12px;\n  border-radius: 4px;\n  outline: none;\n\n  &:focus {\n    border-color: #666;\n  }\n`;\n\nexport const PublishedUrl = styled.div`\n  background-color: #2a2a2a;\n  border: 1px solid #444;\n  color: #eee;\n  padding: 6px 12px;\n  border-radius: 4px;\n  cursor: pointer;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 300px;\n  display: flex;\n  align-items: center;\n\n  .copy-button {\n    margin-left: 8px;\n    opacity: 0.6;\n  }\n\n  &:hover .copy-button {\n    opacity: 1;\n  }\n`;\n\nexport const PublishButton = styled.button<{\n  isPublishing: boolean;\n  hasChanges: boolean;\n}>`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background-color: ${(props) => (props.hasChanges ? \"#007bff\" : \"#333\")};\n  border: none;\n  color: white;\n  padding: 6px 12px;\n  border-radius: 4px;\n  cursor: ${(props) => (props.isPublishing ? \"wait\" : \"pointer\")};\n  opacity: ${(props) => (props.disabled ? 0.6 : 1)};\n\n  &:hover:not(:disabled) {\n    background-color: ${(props) => (props.hasChanges ? \"#0069d9\" : \"#444\")};\n  }\n\n  .spinner {\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n`;\n","interface FirestoreEditDocument {\n  source?: string;\n  versions?: string[];\n  [key: string]: any;\n}\n\n/**\n * Converts source code to a standardized format and sets it as the first version\n * - Swaps letter/number note pitches in insert commands\n * - Sets explicit octaves for lh/rh commands\n * - Converts \"anacrusis 4\" to sections and phrases notation\n *\n * @param data Firestore document containing source code\n */\nexport function convertSourceToVersions(data: FirestoreEditDocument): void {\n  // Return early if no source\n  if (!data.source) return;\n\n  // Create versions array if it doesn't exist\n  if (!data.versions) {\n    data.versions = [];\n  }\n\n  const lines = data.source.split(\"\\n\");\n  const convertedLines = lines.map((line) => {\n    // Skip empty lines\n    if (line.trim() === \"\") {\n      return line;\n    }\n\n    // Handle anacrusis 4 replacement\n    if (line.trim() === \"anacrusis 4\") {\n      return \"sections 2 6\\nphrases 1+1\";\n    }\n\n    // Handle lh/rh replacement - including lines with comments\n    // Match 'lh' at the beginning of the line or after whitespace,\n    // followed by whitespace, comment or end of line\n    if (/^lh(\\s|%|$)/.test(line.trim())) {\n      // Keep any comments that follow\n      const commentPart = line.includes(\"%\")\n        ? line.substring(line.indexOf(\"%\"))\n        : \"\";\n      const basePart = commentPart\n        ? line.substring(0, line.indexOf(\"%\")).trim()\n        : line.trim();\n\n      // If it already has a number after lh, don't modify\n      if (/^lh\\s+\\d+/.test(basePart)) {\n        return line;\n      }\n\n      return `lh 3${commentPart ? \" \" + commentPart : \"\"}`;\n    }\n\n    if (/^rh(\\s|%|$)/.test(line.trim())) {\n      // Keep any comments that follow\n      const commentPart = line.includes(\"%\")\n        ? line.substring(line.indexOf(\"%\"))\n        : \"\";\n      const basePart = commentPart\n        ? line.substring(0, line.indexOf(\"%\")).trim()\n        : line.trim();\n\n      // If it already has a number after rh, don't modify\n      if (/^rh\\s+\\d+/.test(basePart)) {\n        return line;\n      }\n\n      return `rh 5${commentPart ? \" \" + commentPart : \"\"}`;\n    }\n\n    // Skip processing comment-only lines\n    if (line.trim().startsWith(\"%\")) {\n      return line;\n    }\n\n    // Handle insert commands\n    if (/^\\s*\\d+(?:b\\d+(?:\\.\\d+)?)?\\s+i\\s+/.test(line)) {\n      // Find where the insert command starts\n      const insertIndex = line.indexOf(\"i \") + 2;\n      const beforeInsert = line.substring(0, insertIndex);\n      const insertPart = line.substring(insertIndex);\n\n      // Convert note pitches in the insert part\n      const convertedInsert = convertNotePitches(insertPart);\n\n      return beforeInsert + convertedInsert;\n    }\n\n    // No changes for other lines\n    return line;\n  });\n\n  // Handle the result of the anacrusis replacement (it adds a line)\n  const convertedSource = convertedLines\n    .join(\"\\n\")\n    .replace(\"sections 2 6\\nphrases 1+1\\n\", \"sections 2 6\\nphrases 1+1\\n\");\n\n  // Set as first version\n  data.versions[0] = convertedSource;\n}\n\n/**\n * Converts note pitches according to the specified swap rules\n * a <-> 1, s <-> 2, etc.\n *\n * @param text The text containing note pitches to convert\n * @returns Converted text\n */\nfunction convertNotePitches(text: string): string {\n  let result = \"\";\n  let inDurationMarker = false;\n\n  // Split by comment if present to avoid converting note names in comments\n  const parts = text.split(\"%\");\n  const notePart = parts[0];\n  const commentPart = parts.length > 1 ? \"%\" + parts.slice(1).join(\"%\") : \"\";\n\n  // Process character by character for the note part\n  for (let i = 0; i < notePart.length; i++) {\n    const char = notePart[i];\n\n    // Skip duration markers\n    if (/[+_\\-=,'\"]/.test(char)) {\n      inDurationMarker = true;\n      result += char;\n      continue;\n    }\n\n    // Check for dot or colon after duration marker\n    if (inDurationMarker && /[.:]/.test(char)) {\n      result += char;\n      inDurationMarker = false;\n      continue;\n    }\n\n    inDurationMarker = false;\n\n    // Apply the note pitch swap rules\n    switch (char) {\n      // Letters to numbers\n      case \"a\":\n        result += \"1\";\n        break;\n      case \"s\":\n        result += \"2\";\n        break;\n      case \"d\":\n        result += \"3\";\n        break;\n      case \"f\":\n        result += \"4\";\n        break;\n      case \"g\":\n        result += \"5\";\n        break;\n      case \"h\":\n        result += \"6\";\n        break;\n      case \"j\":\n        result += \"7\";\n        break;\n      case \"k\":\n        result += \"8\";\n        break;\n      case \"l\":\n        result += \"9\";\n        break;\n\n      // Numbers to letters\n      case \"1\":\n        result += \"a\";\n        break;\n      case \"2\":\n        result += \"s\";\n        break;\n      case \"3\":\n        result += \"d\";\n        break;\n      case \"4\":\n        result += \"f\";\n        break;\n      case \"5\":\n        result += \"g\";\n        break;\n      case \"6\":\n        result += \"h\";\n        break;\n      case \"7\":\n        result += \"j\";\n        break;\n      case \"8\":\n        result += \"k\";\n        break;\n      case \"9\":\n        result += \"l\";\n        break;\n      case \"0\":\n        result += \"e\";\n        break;\n\n      // Pass through all other characters unchanged\n      default:\n        result += char;\n    }\n  }\n\n  // Add back the comment part unchanged\n  return result + commentPart;\n}\n","import MIDIEvents from \"midievents\";\nimport { SecondsSpan } from \"./Rawl\";\nimport { MeasuresAndBeats } from \"./SystemLayout\";\n\nconst DRUM_CHANNEL = 9;\n\nexport interface SourceLocation {\n  row: number;\n  col: number;\n  command: string;\n}\n\nexport type Note = {\n  note: {\n    midiNumber: number;\n    relativeNumber?: number;\n  };\n  isDrum: boolean;\n  id: string;\n  span: SecondsSpan;\n  tickSpan?: [number, number]; // [startTick, endTick]\n  pitchBend?: PitchBendPoint[];\n  voiceIndex: number;\n  sourceLocation?: SourceLocation;\n  noteUnderCursor?: boolean;\n};\n\nexport type ColoredNote = Note & {\n  color: string;\n  isActive: boolean;\n  colorPitchClass: number | \"default\" | \"drum\";\n  sourceLocation?: SourceLocation;\n  noteUnderCursor?: boolean;\n};\n\nexport type PitchBendPoint = {\n  time: number;\n  value: number;\n};\n\nexport type NotesInVoices = Note[][];\n\nexport type ColoredNotesInVoices = ColoredNote[][];\n\nexport type MidiSource = {\n  events: any;\n  activeChannels: any;\n  timebase: any;\n  timeEvents: any;\n  ticksPerBeat: number;\n};\n\nexport type ParsingResult = {\n  notes: NotesInVoices;\n  measuresAndBeats?: MeasuresAndBeats;\n};\n\nconst getNotes = (events, channel, voiceIndex): Note[] => {\n  const notes: Note[] = [];\n  const noteOn = {};\n  let currentTick = 0;\n\n  events.forEach((event) => {\n    // Accumulate delta for tick tracking\n    currentTick += event.delta || 0;\n\n    if (event.channel === channel && event.type === MIDIEvents.EVENT_MIDI) {\n      const midiNumber = event.param1;\n      if (\n        event.subtype === MIDIEvents.EVENT_MIDI_NOTE_OFF ||\n        (event.subtype === MIDIEvents.EVENT_MIDI_NOTE_ON && noteOn[midiNumber])\n      ) {\n        if (channel === DRUM_CHANNEL && midiNumber > 87) {\n          return;\n          // probably a bug? can't be played by a default MIDI sound font\n        }\n        if (midiNumber in noteOn) {\n          if (channel !== DRUM_CHANNEL && noteOn[midiNumber].param2 === 0) {\n            return;\n          }\n          if (event.playTime >= noteOn[midiNumber].playTime) {\n            // Ensure we have a valid tickSpan\n            const startTick = noteOn[midiNumber].tickPosition || 0;\n            const endTick = currentTick;\n\n            notes.push({\n              note: {\n                midiNumber,\n              },\n              id: `${voiceIndex}_${startTick}_${\n                endTick - startTick\n              }_${midiNumber}`,\n              isDrum: channel === DRUM_CHANNEL,\n              span: [noteOn[midiNumber].playTime / 1000, event.playTime / 1000],\n              tickSpan: [startTick, endTick], // Always explicitly set the tickSpan\n              pitchBend: noteOn[midiNumber].pitchBend,\n              voiceIndex,\n              sourceLocation: noteOn[midiNumber].sourceLocation,\n              noteUnderCursor: noteOn[midiNumber].noteUnderCursor,\n            });\n          }\n          delete noteOn[midiNumber];\n        }\n      }\n      if (event.subtype === MIDIEvents.EVENT_MIDI_PITCH_BEND) {\n        // TODO: Process pitch bend range change messages.\n        // https://chat.openai.com/share/8332f454-6d52-4911-a40c-f11c251fea1b\n        for (const midiNumber in noteOn) {\n          (noteOn[midiNumber].pitchBend ||= []).push({\n            time: event.playTime / 1000,\n            value: (event.param2 << 7) + event.param1,\n          });\n        }\n      }\n      if (event.subtype === MIDIEvents.EVENT_MIDI_NOTE_ON) {\n        noteOn[midiNumber] = event;\n        // Store the current tick position with the note-on event\n        noteOn[midiNumber].tickPosition = currentTick;\n        noteOn[midiNumber].sourceLocation = event.sourceLocation;\n        noteOn[midiNumber].noteUnderCursor = event.noteUnderCursor;\n      }\n    }\n  });\n  if (channel === DRUM_CHANNEL) {\n    const uniqueMidiNumbers = [\n      ...new Set(notes.map((note) => note.note.midiNumber)),\n    ].sort((a, b) => a - b);\n\n    const midiToRelativeNumberMap = new Map();\n    uniqueMidiNumbers.forEach((midiNumber, index) => {\n      midiToRelativeNumberMap.set(midiNumber, index * 2);\n    });\n\n    notes.forEach((note) => {\n      note.note.relativeNumber = midiToRelativeNumberMap.get(\n        note.note.midiNumber,\n      );\n    });\n  }\n  return notes;\n};\n\n// We can also find key events:\n// key: 0,\n// scale: 0,\n// subtype: 89,\n// type: 255,\n// Except that in practice these events are always key=0 scale=0 (no one is setting them)\n// Although classical music MIDI might have it.\n\nfunction calculateMeasureAndBeats(timeEvents, timebase) {\n  const measures = [0];\n  const beats = [];\n  const measuresInTicks = [0];\n  let secondsPerQuarterNote = 0.5;\n  let numerator = 4;\n  let denominator = 4;\n  let lastBeatFractionGone = 0;\n  let constructedBeatsInLastMeasure = 0;\n  let lastBeatTime = 0; // either measures[-1] or beats[-1]\n  let lastTick = 0; // Track the last tick time\n\n  const createNewBeat = (timeUntil, tick) => {\n    const newBeatEndTime =\n      lastBeatTime +\n      (1 - lastBeatFractionGone) * ((secondsPerQuarterNote / denominator) * 4);\n\n    const newBeatEndTick =\n      lastTick + (1 - lastBeatFractionGone) * ((timebase / denominator) * 4);\n\n    if (newBeatEndTime - 0.005 <= timeUntil) {\n      if (constructedBeatsInLastMeasure + 1 >= numerator) {\n        measures.push(newBeatEndTime);\n        measuresInTicks.push(Math.round(newBeatEndTick)); // Push measure in ticks\n        constructedBeatsInLastMeasure = 0;\n      } else {\n        beats.push(newBeatEndTime);\n        constructedBeatsInLastMeasure++;\n      }\n      lastBeatFractionGone = 0;\n      lastBeatTime = newBeatEndTime;\n      lastTick = newBeatEndTick;\n      return true;\n    } else {\n      lastBeatFractionGone +=\n        (timeUntil - lastBeatTime) /\n        ((secondsPerQuarterNote / denominator) * 4);\n      lastBeatTime = timeUntil;\n      lastTick = tick; // Update the last tick position\n      return false;\n    }\n  };\n\n  timeEvents.forEach((event) => {\n    const { bpm, playTime, tick } = event;\n\n    while (createNewBeat(playTime / 1000, tick));\n\n    if (event.type === \"timeSignature\") {\n      numerator = event.numerator;\n      denominator = 2 ** event.denominatorPower;\n    } else {\n      secondsPerQuarterNote = 60 / bpm;\n    }\n  });\n\n  if (measures.length >= 2) {\n    measures.push(2 * measures.at(-1) - measures.at(-2));\n    measuresInTicks.push(2 * measuresInTicks.at(-1) - measuresInTicks.at(-2));\n  }\n\n  return { measures, beats, ticks: { measures: measuresInTicks } };\n}\n\nexport const parseNotes = ({\n  events,\n  activeChannels,\n  timeEvents,\n  timebase,\n}: MidiSource): ParsingResult => {\n  const measuresAndBeats = calculateMeasureAndBeats(timeEvents, timebase);\n  events.forEach((event) => {\n    if (event.subtype === MIDIEvents.EVENT_META_KEY_SIGNATURE) {\n      console.log(\"KEY SIGNATURE\" + JSON.stringify(event));\n    }\n  });\n\n  // Get notes for each voice\n  let notes = activeChannels.map((channel, index) =>\n    getNotes(events, channel, index),\n  );\n\n  // Filter out duplicate IDs, keeping only the first occurrence\n  notes = notes.map((voiceNotes) => {\n    const uniqueIds = new Set();\n    return voiceNotes.filter((note) => {\n      if (uniqueIds.has(note.id)) {\n        return false; // Skip this note as the ID already exists\n      }\n      uniqueIds.add(note.id);\n      return true;\n    });\n  });\n\n  // Remove last measure if second-to-last measure is empty\n  if (measuresAndBeats.measures.length > 2) {\n    const secondToLastMeasureStart =\n      measuresAndBeats.measures[measuresAndBeats.measures.length - 2];\n    const hasNotesInSecondToLastMeasure = notes.some((voiceNotes) =>\n      voiceNotes.some((note) => note.span[1] > secondToLastMeasureStart),\n    );\n\n    if (!hasNotesInSecondToLastMeasure) {\n      measuresAndBeats.measures.pop();\n      measuresAndBeats.ticks.measures.pop();\n      measuresAndBeats.beats = measuresAndBeats.beats.filter(\n        (beat) =>\n          beat <\n          measuresAndBeats.measures[measuresAndBeats.measures.length - 1],\n      );\n    }\n  }\n\n  return {\n    measuresAndBeats,\n    notes,\n  };\n};\n","import { User } from \"firebase/auth\";\nimport React from \"react\";\nimport { Analysis, MeasuresSpan } from \"./rawl/analysis\";\nimport { RawlProps } from \"./rawl/Rawl\";\n\nexport type CurrentMidi = {\n  id: string;\n  title: string;\n  slug: string;\n  sourceUrl: string | null;\n  isHiddenRoute: boolean;\n} | null;\n\nexport interface AppContextType {\n  handleSongClick: (slug: string, isHiddenRoute?: boolean) => Promise<void>;\n  rawlProps: RawlProps | null;\n  setRawlProps: (rawlProps: RawlProps | null) => void;\n  analyses: Record<string, Analysis>;\n  saveAnalysis: (analysis: Analysis) => void;\n  resetMidiPlayerState: () => void;\n  registerKeyboardHandler: (\n    id: string,\n    handler: (e: KeyboardEvent) => void,\n  ) => void;\n  unregisterKeyboardHandler: (id: string) => void;\n  currentMidi: CurrentMidi | null;\n  setCurrentMidi: (currentMidi: CurrentMidi | null) => void;\n  user: User | null;\n  seek: (seekMs: number) => void;\n  currentPlaybackTime: number | null;\n  eject: () => void;\n  currentMidiBuffer: ArrayBuffer | null;\n  hoveredMeasuresSpan: MeasuresSpan | null;\n  setHoveredMeasuresSpan: (span: MeasuresSpan | null) => void;\n  togglePause: () => void;\n  handleLogin: () => void;\n  handleLogout: () => void;\n  handleToggleManualRemeasuring: () => void;\n  enableManualRemeasuring: boolean;\n  playSongBuffer: (\n    filepath: string,\n    buffer: ArrayBuffer | Uint8Array,\n    shouldAutoPlay?: boolean,\n  ) => Promise<void>;\n  latencyCorrectionMs: number;\n  tempo: number;\n}\n\nexport const AppContext = React.createContext<AppContextType | undefined>(\n  undefined,\n);\n","'use strict';\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  require('promise/lib/rejection-tracking').enable();\n  window.Promise = require('promise/lib/es6-extensions.js');\n}\n\n// fetch() polyfill for making API calls.\nrequire('whatwg-fetch');\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = require('object-assign');\n\n// In tests, polyfill requestAnimationFrame since jsdom doesn't provide it yet.\n// We don't polyfill it in the browser--this is user's responsibility.\nif (process.env.NODE_ENV === 'test') {\n  require('raf').polyfill(global);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nReactDOM.render((\n  <Router basename={process.env.PUBLIC_URL}>\n    <App/>\n  </Router>\n), document.getElementById('root'));\n","/*eslint-disable*/\n\nvar CHIP_CORE = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  \n  return (\nfunction(moduleArg = {}) {\n\nvar Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=true;var ENVIRONMENT_IS_WORKER=false;var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=title=>document.title=title}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!=\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort(text)}}var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAP64,HEAPU64,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module[\"HEAP8\"]=HEAP8=new Int8Array(b);Module[\"HEAP16\"]=HEAP16=new Int16Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(b);Module[\"HEAP32\"]=HEAP32=new Int32Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(b);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(b);Module[\"HEAP64\"]=HEAP64=new BigInt64Array(b);Module[\"HEAPU64\"]=HEAPU64=new BigUint64Array(b)}var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;if(!Module[\"noFSInit\"]&&!FS.init.initialized)FS.init();FS.ignorePermissions=false;TTY.init();callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function getUniqueRunDependency(id){return id}function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}var wasmBinaryFile;wasmBinaryFile=\"chip-core.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+binaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(()=>getBinarySync(binaryFile))}}return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(instance=>instance).then(receiver,reason=>{err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(binaryFile)&&typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err(`wasm streaming compile failed: ${reason}`);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(binaryFile,imports,callback)})})}return instantiateArrayBuffer(binaryFile,imports,callback)}function createWasm(){var info={\"a\":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports[\"r\"];updateMemoryViews();wasmTable=wasmExports[\"pb\"];addOnInit(wasmExports[\"s\"]);removeRunDependency(\"wasm-instantiate\");return exports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}if(Module[\"instantiateWasm\"]){try{return Module[\"instantiateWasm\"](info,receiveInstance)}catch(e){err(`Module.instantiateWasm callback failed with error: ${e}`);readyPromiseReject(e)}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject);return{}}var ASM_CONSTS={510956:$0=>{console.log(\"Error during V2M conversion.\",$0)}};var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};function getValue(ptr,type=\"i8\"){if(type.endsWith(\"*\"))type=\"*\";switch(type){case\"i1\":return HEAP8[ptr>>0];case\"i8\":return HEAP8[ptr>>0];case\"i16\":return HEAP16[ptr>>1];case\"i32\":return HEAP32[ptr>>2];case\"i64\":return HEAP64[ptr>>3];case\"float\":return HEAPF32[ptr>>2];case\"double\":return HEAPF64[ptr>>3];case\"*\":return HEAPU32[ptr>>2];default:abort(`invalid type for getValue: ${type}`)}}function setValue(ptr,value,type=\"i8\"){if(type.endsWith(\"*\"))type=\"*\";switch(type){case\"i1\":HEAP8[ptr>>0]=value;break;case\"i8\":HEAP8[ptr>>0]=value;break;case\"i16\":HEAP16[ptr>>1]=value;break;case\"i32\":HEAP32[ptr>>2]=value;break;case\"i64\":HEAP64[ptr>>3]=BigInt(value);break;case\"float\":HEAPF32[ptr>>2]=value;break;case\"double\":HEAPF64[ptr>>3]=value;break;case\"*\":HEAPU32[ptr>>2]=value;break;default:abort(`invalid type for setValue: ${type}`)}}var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;var UTF8ArrayToString=(heapOrArray,idx,maxBytesToRead)=>{var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\";var ___assert_fail=(condition,filename,line,func)=>{abort(`Assertion failed: ${UTF8ToString(condition)}, at: `+[filename?UTF8ToString(filename):\"unknown filename\",line,func?UTF8ToString(func):\"unknown function\"])};function ExceptionInfo(excPtr){this.excPtr=excPtr;this.ptr=excPtr-24;this.set_type=function(type){HEAPU32[this.ptr+4>>2]=type};this.get_type=function(){return HEAPU32[this.ptr+4>>2]};this.set_destructor=function(destructor){HEAPU32[this.ptr+8>>2]=destructor};this.get_destructor=function(){return HEAPU32[this.ptr+8>>2]};this.set_caught=function(caught){caught=caught?1:0;HEAP8[this.ptr+12>>0]=caught};this.get_caught=function(){return HEAP8[this.ptr+12>>0]!=0};this.set_rethrown=function(rethrown){rethrown=rethrown?1:0;HEAP8[this.ptr+13>>0]=rethrown};this.get_rethrown=function(){return HEAP8[this.ptr+13>>0]!=0};this.init=function(type,destructor){this.set_adjusted_ptr(0);this.set_type(type);this.set_destructor(destructor)};this.set_adjusted_ptr=function(adjustedPtr){HEAPU32[this.ptr+16>>2]=adjustedPtr};this.get_adjusted_ptr=function(){return HEAPU32[this.ptr+16>>2]};this.get_exception_ptr=function(){var isPointer=___cxa_is_pointer_type(this.get_type());if(isPointer){return HEAPU32[this.excPtr>>2]}var adjusted=this.get_adjusted_ptr();if(adjusted!==0)return adjusted;return this.excPtr}}var exceptionLast=0;var uncaughtExceptionCount=0;var ___cxa_throw=(ptr,type,destructor)=>{var info=new ExceptionInfo(ptr);info.init(type,destructor);exceptionLast=ptr;uncaughtExceptionCount++;throw exceptionLast};var setErrNo=value=>{HEAP32[___errno_location()>>2]=value;return value};var PATH={isAbs:path=>path.charAt(0)===\"/\",splitPath:filename=>{var splitPathRe=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:(parts,allowAboveRoot)=>{var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last===\".\"){parts.splice(i,1)}else if(last===\"..\"){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift(\"..\")}}return parts},normalize:path=>{var isAbsolute=PATH.isAbs(path),trailingSlash=path.substr(-1)===\"/\";path=PATH.normalizeArray(path.split(\"/\").filter(p=>!!p),!isAbsolute).join(\"/\");if(!path&&!isAbsolute){path=\".\"}if(path&&trailingSlash){path+=\"/\"}return(isAbsolute?\"/\":\"\")+path},dirname:path=>{var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return\".\"}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:path=>{if(path===\"/\")return\"/\";path=PATH.normalize(path);path=path.replace(/\\/$/,\"\");var lastSlash=path.lastIndexOf(\"/\");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},join:function(){var paths=Array.prototype.slice.call(arguments);return PATH.normalize(paths.join(\"/\"))},join2:(l,r)=>PATH.normalize(l+\"/\"+r)};var initRandomFill=()=>{if(typeof crypto==\"object\"&&typeof crypto[\"getRandomValues\"]==\"function\"){return view=>crypto.getRandomValues(view)}else abort(\"initRandomDevice\")};var randomFill=view=>(randomFill=initRandomFill())(view);var PATH_FS={resolve:function(){var resolvedPath=\"\",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:FS.cwd();if(typeof path!=\"string\"){throw new TypeError(\"Arguments to path.resolve must be strings\")}else if(!path){return\"\"}resolvedPath=path+\"/\"+resolvedPath;resolvedAbsolute=PATH.isAbs(path)}resolvedPath=PATH.normalizeArray(resolvedPath.split(\"/\").filter(p=>!!p),!resolvedAbsolute).join(\"/\");return(resolvedAbsolute?\"/\":\"\")+resolvedPath||\".\"},relative:(from,to)=>{from=PATH_FS.resolve(from).substr(1);to=PATH_FS.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!==\"\")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!==\"\")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split(\"/\"));var toParts=trim(to.split(\"/\"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push(\"..\")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join(\"/\")}};var FS_stdin_getChar_buffer=[];var lengthBytesUTF8=str=>{var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++}else if(c<=2047){len+=2}else if(c>=55296&&c<=57343){len+=4;++i}else{len+=3}}return len};var stringToUTF8Array=(str,heap,outIdx,maxBytesToWrite)=>{if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx};function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1;var u8array=new Array(len);var numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);if(dontAddNull)u8array.length=numBytesWritten;return u8array}var FS_stdin_getChar=()=>{if(!FS_stdin_getChar_buffer.length){var result=null;if(typeof window!=\"undefined\"&&typeof window.prompt==\"function\"){result=window.prompt(\"Input: \");if(result!==null){result+=\"\\n\"}}else if(typeof readline==\"function\"){result=readline();if(result!==null){result+=\"\\n\"}}if(!result){return null}FS_stdin_getChar_buffer=intArrayFromString(result,true)}return FS_stdin_getChar_buffer.shift()};var TTY={ttys:[],init(){},shutdown(){},register(dev,ops){TTY.ttys[dev]={input:[],output:[],ops:ops};FS.registerDevice(dev,TTY.stream_ops)},stream_ops:{open(stream){var tty=TTY.ttys[stream.node.rdev];if(!tty){throw new FS.ErrnoError(43)}stream.tty=tty;stream.seekable=false},close(stream){stream.tty.ops.fsync(stream.tty)},fsync(stream){stream.tty.ops.fsync(stream.tty)},read(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.get_char){throw new FS.ErrnoError(60)}var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=stream.tty.ops.get_char(stream.tty)}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.put_char){throw new FS.ErrnoError(60)}try{for(var i=0;i<length;i++){stream.tty.ops.put_char(stream.tty,buffer[offset+i])}}catch(e){throw new FS.ErrnoError(29)}if(length){stream.node.timestamp=Date.now()}return i}},default_tty_ops:{get_char(tty){return FS_stdin_getChar()},put_char(tty,val){if(val===null||val===10){out(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},fsync(tty){if(tty.output&&tty.output.length>0){out(UTF8ArrayToString(tty.output,0));tty.output=[]}},ioctl_tcgets(tty){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(tty,optional_actions,data){return 0},ioctl_tiocgwinsz(tty){return[24,80]}},default_tty1_ops:{put_char(tty,val){if(val===null||val===10){err(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},fsync(tty){if(tty.output&&tty.output.length>0){err(UTF8ArrayToString(tty.output,0));tty.output=[]}}}};var zeroMemory=(address,size)=>{HEAPU8.fill(0,address,address+size);return address};var alignMemory=(size,alignment)=>Math.ceil(size/alignment)*alignment;var mmapAlloc=size=>{size=alignMemory(size,65536);var ptr=_emscripten_builtin_memalign(65536,size);if(!ptr)return 0;return zeroMemory(ptr,size)};var MEMFS={ops_table:null,mount(mount){return MEMFS.createNode(null,\"/\",16384|511,0)},createNode(parent,name,mode,dev){if(FS.isBlkdev(mode)||FS.isFIFO(mode)){throw new FS.ErrnoError(63)}if(!MEMFS.ops_table){MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}}}var node=FS.createNode(parent,name,mode,dev);if(FS.isDir(node.mode)){node.node_ops=MEMFS.ops_table.dir.node;node.stream_ops=MEMFS.ops_table.dir.stream;node.contents={}}else if(FS.isFile(node.mode)){node.node_ops=MEMFS.ops_table.file.node;node.stream_ops=MEMFS.ops_table.file.stream;node.usedBytes=0;node.contents=null}else if(FS.isLink(node.mode)){node.node_ops=MEMFS.ops_table.link.node;node.stream_ops=MEMFS.ops_table.link.stream}else if(FS.isChrdev(node.mode)){node.node_ops=MEMFS.ops_table.chrdev.node;node.stream_ops=MEMFS.ops_table.chrdev.stream}node.timestamp=Date.now();if(parent){parent.contents[name]=node;parent.timestamp=node.timestamp}return node},getFileDataAsTypedArray(node){if(!node.contents)return new Uint8Array(0);if(node.contents.subarray)return node.contents.subarray(0,node.usedBytes);return new Uint8Array(node.contents)},expandFileStorage(node,newCapacity){var prevCapacity=node.contents?node.contents.length:0;if(prevCapacity>=newCapacity)return;var CAPACITY_DOUBLING_MAX=1024*1024;newCapacity=Math.max(newCapacity,prevCapacity*(prevCapacity<CAPACITY_DOUBLING_MAX?2:1.125)>>>0);if(prevCapacity!=0)newCapacity=Math.max(newCapacity,256);var oldContents=node.contents;node.contents=new Uint8Array(newCapacity);if(node.usedBytes>0)node.contents.set(oldContents.subarray(0,node.usedBytes),0)},resizeFileStorage(node,newSize){if(node.usedBytes==newSize)return;if(newSize==0){node.contents=null;node.usedBytes=0}else{var oldContents=node.contents;node.contents=new Uint8Array(newSize);if(oldContents){node.contents.set(oldContents.subarray(0,Math.min(newSize,node.usedBytes)))}node.usedBytes=newSize}},node_ops:{getattr(node){var attr={};attr.dev=FS.isChrdev(node.mode)?node.id:1;attr.ino=node.id;attr.mode=node.mode;attr.nlink=1;attr.uid=0;attr.gid=0;attr.rdev=node.rdev;if(FS.isDir(node.mode)){attr.size=4096}else if(FS.isFile(node.mode)){attr.size=node.usedBytes}else if(FS.isLink(node.mode)){attr.size=node.link.length}else{attr.size=0}attr.atime=new Date(node.timestamp);attr.mtime=new Date(node.timestamp);attr.ctime=new Date(node.timestamp);attr.blksize=4096;attr.blocks=Math.ceil(attr.size/attr.blksize);return attr},setattr(node,attr){if(attr.mode!==undefined){node.mode=attr.mode}if(attr.timestamp!==undefined){node.timestamp=attr.timestamp}if(attr.size!==undefined){MEMFS.resizeFileStorage(node,attr.size)}},lookup(parent,name){throw FS.genericErrors[44]},mknod(parent,name,mode,dev){return MEMFS.createNode(parent,name,mode,dev)},rename(old_node,new_dir,new_name){if(FS.isDir(old_node.mode)){var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(new_node){for(var i in new_node.contents){throw new FS.ErrnoError(55)}}}delete old_node.parent.contents[old_node.name];old_node.parent.timestamp=Date.now();old_node.name=new_name;new_dir.contents[new_name]=old_node;new_dir.timestamp=old_node.parent.timestamp;old_node.parent=new_dir},unlink(parent,name){delete parent.contents[name];parent.timestamp=Date.now()},rmdir(parent,name){var node=FS.lookupNode(parent,name);for(var i in node.contents){throw new FS.ErrnoError(55)}delete parent.contents[name];parent.timestamp=Date.now()},readdir(node){var entries=[\".\",\"..\"];for(var key in node.contents){if(!node.contents.hasOwnProperty(key)){continue}entries.push(key)}return entries},symlink(parent,newname,oldpath){var node=MEMFS.createNode(parent,newname,511|40960,0);node.link=oldpath;return node},readlink(node){if(!FS.isLink(node.mode)){throw new FS.ErrnoError(28)}return node.link}},stream_ops:{read(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=stream.node.usedBytes)return 0;var size=Math.min(stream.node.usedBytes-position,length);if(size>8&&contents.subarray){buffer.set(contents.subarray(position,position+size),offset)}else{for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i]}return size},write(stream,buffer,offset,length,position,canOwn){if(buffer.buffer===HEAP8.buffer){canOwn=false}if(!length)return 0;var node=stream.node;node.timestamp=Date.now();if(buffer.subarray&&(!node.contents||node.contents.subarray)){if(canOwn){node.contents=buffer.subarray(offset,offset+length);node.usedBytes=length;return length}else if(node.usedBytes===0&&position===0){node.contents=buffer.slice(offset,offset+length);node.usedBytes=length;return length}else if(position+length<=node.usedBytes){node.contents.set(buffer.subarray(offset,offset+length),position);return length}}MEMFS.expandFileStorage(node,position+length);if(node.contents.subarray&&buffer.subarray){node.contents.set(buffer.subarray(offset,offset+length),position)}else{for(var i=0;i<length;i++){node.contents[position+i]=buffer[offset+i]}}node.usedBytes=Math.max(node.usedBytes,position+length);return length},llseek(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){position+=stream.node.usedBytes}}if(position<0){throw new FS.ErrnoError(28)}return position},allocate(stream,offset,length){MEMFS.expandFileStorage(stream.node,offset+length);stream.node.usedBytes=Math.max(stream.node.usedBytes,offset+length)},mmap(stream,length,position,prot,flags){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}var ptr;var allocated;var contents=stream.node.contents;if(!(flags&2)&&contents.buffer===HEAP8.buffer){allocated=false;ptr=contents.byteOffset}else{if(position>0||position+length<contents.length){if(contents.subarray){contents=contents.subarray(position,position+length)}else{contents=Array.prototype.slice.call(contents,position,position+length)}}allocated=true;ptr=mmapAlloc(length);if(!ptr){throw new FS.ErrnoError(48)}HEAP8.set(contents,ptr)}return{ptr:ptr,allocated:allocated}},msync(stream,buffer,offset,length,mmapFlags){MEMFS.stream_ops.write(stream,buffer,0,length,offset,false);return 0}}};var asyncLoad=(url,onload,onerror,noRunDep)=>{var dep=!noRunDep?getUniqueRunDependency(`al ${url}`):\"\";readAsync(url,arrayBuffer=>{assert(arrayBuffer,`Loading data file \"${url}\" failed (no arrayBuffer).`);onload(new Uint8Array(arrayBuffer));if(dep)removeRunDependency(dep)},event=>{if(onerror){onerror()}else{throw`Loading data file \"${url}\" failed.`}});if(dep)addRunDependency(dep)};var preloadPlugins=Module[\"preloadPlugins\"]||[];var FS_handledByPreloadPlugin=(byteArray,fullname,finish,onerror)=>{if(typeof Browser!=\"undefined\")Browser.init();var handled=false;preloadPlugins.forEach(plugin=>{if(handled)return;if(plugin[\"canHandle\"](fullname)){plugin[\"handle\"](byteArray,fullname,finish,onerror);handled=true}});return handled};var FS_createPreloadedFile=(parent,name,url,canRead,canWrite,onload,onerror,dontCreateFile,canOwn,preFinish)=>{var fullname=name?PATH_FS.resolve(PATH.join2(parent,name)):parent;var dep=getUniqueRunDependency(`cp ${fullname}`);function processData(byteArray){function finish(byteArray){if(preFinish)preFinish();if(!dontCreateFile){FS.createDataFile(parent,name,byteArray,canRead,canWrite,canOwn)}if(onload)onload();removeRunDependency(dep)}if(FS_handledByPreloadPlugin(byteArray,fullname,finish,()=>{if(onerror)onerror();removeRunDependency(dep)})){return}finish(byteArray)}addRunDependency(dep);if(typeof url==\"string\"){asyncLoad(url,byteArray=>processData(byteArray),onerror)}else{processData(url)}};var FS_modeStringToFlags=str=>{var flagModes={\"r\":0,\"r+\":2,\"w\":512|64|1,\"w+\":512|64|2,\"a\":1024|64|1,\"a+\":1024|64|2};var flags=flagModes[str];if(typeof flags==\"undefined\"){throw new Error(`Unknown file open mode: ${str}`)}return flags};var FS_getMode=(canRead,canWrite)=>{var mode=0;if(canRead)mode|=292|73;if(canWrite)mode|=146;return mode};var IDBFS={dbs:{},indexedDB:()=>{if(typeof indexedDB!=\"undefined\")return indexedDB;var ret=null;if(typeof window==\"object\")ret=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;assert(ret,\"IDBFS used, but indexedDB not supported\");return ret},DB_VERSION:21,DB_STORE_NAME:\"FILE_DATA\",mount:function(mount){return MEMFS.mount.apply(null,arguments)},syncfs:(mount,populate,callback)=>{IDBFS.getLocalSet(mount,(err,local)=>{if(err)return callback(err);IDBFS.getRemoteSet(mount,(err,remote)=>{if(err)return callback(err);var src=populate?remote:local;var dst=populate?local:remote;IDBFS.reconcile(src,dst,callback)})})},quit:()=>{Object.values(IDBFS.dbs).forEach(value=>value.close());IDBFS.dbs={}},getDB:(name,callback)=>{var db=IDBFS.dbs[name];if(db){return callback(null,db)}var req;try{req=IDBFS.indexedDB().open(name,IDBFS.DB_VERSION)}catch(e){return callback(e)}if(!req){return callback(\"Unable to connect to IndexedDB\")}req.onupgradeneeded=e=>{var db=e.target.result;var transaction=e.target.transaction;var fileStore;if(db.objectStoreNames.contains(IDBFS.DB_STORE_NAME)){fileStore=transaction.objectStore(IDBFS.DB_STORE_NAME)}else{fileStore=db.createObjectStore(IDBFS.DB_STORE_NAME)}if(!fileStore.indexNames.contains(\"timestamp\")){fileStore.createIndex(\"timestamp\",\"timestamp\",{unique:false})}};req.onsuccess=()=>{db=req.result;IDBFS.dbs[name]=db;callback(null,db)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},getLocalSet:(mount,callback)=>{var entries={};function isRealDir(p){return p!==\".\"&&p!==\"..\"}function toAbsolute(root){return p=>PATH.join2(root,p)}var check=FS.readdir(mount.mountpoint).filter(isRealDir).map(toAbsolute(mount.mountpoint));while(check.length){var path=check.pop();var stat;try{stat=FS.stat(path)}catch(e){return callback(e)}if(FS.isDir(stat.mode)){check.push.apply(check,FS.readdir(path).filter(isRealDir).map(toAbsolute(path)))}entries[path]={\"timestamp\":stat.mtime}}return callback(null,{type:\"local\",entries:entries})},getRemoteSet:(mount,callback)=>{var entries={};IDBFS.getDB(mount.mountpoint,(err,db)=>{if(err)return callback(err);try{var transaction=db.transaction([IDBFS.DB_STORE_NAME],\"readonly\");transaction.onerror=e=>{callback(e.target.error);e.preventDefault()};var store=transaction.objectStore(IDBFS.DB_STORE_NAME);var index=store.index(\"timestamp\");index.openKeyCursor().onsuccess=event=>{var cursor=event.target.result;if(!cursor){return callback(null,{type:\"remote\",db:db,entries:entries})}entries[cursor.primaryKey]={\"timestamp\":cursor.key};cursor.continue()}}catch(e){return callback(e)}})},loadLocalEntry:(path,callback)=>{var stat,node;try{var lookup=FS.lookupPath(path);node=lookup.node;stat=FS.stat(path)}catch(e){return callback(e)}if(FS.isDir(stat.mode)){return callback(null,{\"timestamp\":stat.mtime,\"mode\":stat.mode})}else if(FS.isFile(stat.mode)){node.contents=MEMFS.getFileDataAsTypedArray(node);return callback(null,{\"timestamp\":stat.mtime,\"mode\":stat.mode,\"contents\":node.contents})}else{return callback(new Error(\"node type not supported\"))}},storeLocalEntry:(path,entry,callback)=>{try{if(FS.isDir(entry[\"mode\"])){FS.mkdirTree(path,entry[\"mode\"])}else if(FS.isFile(entry[\"mode\"])){FS.writeFile(path,entry[\"contents\"],{canOwn:true})}else{return callback(new Error(\"node type not supported\"))}FS.chmod(path,entry[\"mode\"]);FS.utime(path,entry[\"timestamp\"],entry[\"timestamp\"])}catch(e){return callback(e)}callback(null)},removeLocalEntry:(path,callback)=>{try{var stat=FS.stat(path);if(FS.isDir(stat.mode)){FS.rmdir(path)}else if(FS.isFile(stat.mode)){FS.unlink(path)}}catch(e){return callback(e)}callback(null)},loadRemoteEntry:(store,path,callback)=>{var req=store.get(path);req.onsuccess=event=>{callback(null,event.target.result)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},storeRemoteEntry:(store,path,entry,callback)=>{try{var req=store.put(entry,path)}catch(e){callback(e);return}req.onsuccess=()=>{callback(null)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},removeRemoteEntry:(store,path,callback)=>{var req=store.delete(path);req.onsuccess=()=>{callback(null)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},reconcile:(src,dst,callback)=>{var total=0;var create=[];Object.keys(src.entries).forEach(function(key){var e=src.entries[key];var e2=dst.entries[key];if(!e2||e[\"timestamp\"].getTime()!=e2[\"timestamp\"].getTime()){create.push(key);total++}});var remove=[];Object.keys(dst.entries).forEach(function(key){if(!src.entries[key]){remove.push(key);total++}});if(!total){return callback(null)}var errored=false;var db=src.type===\"remote\"?src.db:dst.db;var transaction=db.transaction([IDBFS.DB_STORE_NAME],\"readwrite\");var store=transaction.objectStore(IDBFS.DB_STORE_NAME);function done(err){if(err&&!errored){errored=true;return callback(err)}}transaction.onerror=e=>{done(this.error);e.preventDefault()};transaction.oncomplete=e=>{if(!errored){callback(null)}};create.sort().forEach(path=>{if(dst.type===\"local\"){IDBFS.loadRemoteEntry(store,path,(err,entry)=>{if(err)return done(err);IDBFS.storeLocalEntry(path,entry,done)})}else{IDBFS.loadLocalEntry(path,(err,entry)=>{if(err)return done(err);IDBFS.storeRemoteEntry(store,path,entry,done)})}});remove.sort().reverse().forEach(path=>{if(dst.type===\"local\"){IDBFS.removeLocalEntry(path,done)}else{IDBFS.removeRemoteEntry(store,path,done)}})}};var FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:\"/\",initialized:false,ignorePermissions:true,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(path,opts={}){path=PATH_FS.resolve(path);if(!path)return{path:\"\",node:null};var defaults={follow_mount:true,recurse_count:0};opts=Object.assign(defaults,opts);if(opts.recurse_count>8){throw new FS.ErrnoError(32)}var parts=path.split(\"/\").filter(p=>!!p);var current=FS.root;var current_path=\"/\";for(var i=0;i<parts.length;i++){var islast=i===parts.length-1;if(islast&&opts.parent){break}current=FS.lookupNode(current,parts[i]);current_path=PATH.join2(current_path,parts[i]);if(FS.isMountpoint(current)){if(!islast||islast&&opts.follow_mount){current=current.mounted.root}}if(!islast||opts.follow){var count=0;while(FS.isLink(current.mode)){var link=FS.readlink(current_path);current_path=PATH_FS.resolve(PATH.dirname(current_path),link);var lookup=FS.lookupPath(current_path,{recurse_count:opts.recurse_count+1});current=lookup.node;if(count++>40){throw new FS.ErrnoError(32)}}}}return{path:current_path,node:current}},getPath(node){var path;while(true){if(FS.isRoot(node)){var mount=node.mount.mountpoint;if(!path)return mount;return mount[mount.length-1]!==\"/\"?`${mount}/${path}`:mount+path}path=path?`${node.name}/${path}`:node.name;node=node.parent}},hashName(parentid,name){var hash=0;for(var i=0;i<name.length;i++){hash=(hash<<5)-hash+name.charCodeAt(i)|0}return(parentid+hash>>>0)%FS.nameTable.length},hashAddNode(node){var hash=FS.hashName(node.parent.id,node.name);node.name_next=FS.nameTable[hash];FS.nameTable[hash]=node},hashRemoveNode(node){var hash=FS.hashName(node.parent.id,node.name);if(FS.nameTable[hash]===node){FS.nameTable[hash]=node.name_next}else{var current=FS.nameTable[hash];while(current){if(current.name_next===node){current.name_next=node.name_next;break}current=current.name_next}}},lookupNode(parent,name){var errCode=FS.mayLookup(parent);if(errCode){throw new FS.ErrnoError(errCode,parent)}var hash=FS.hashName(parent.id,name);for(var node=FS.nameTable[hash];node;node=node.name_next){var nodeName=node.name;if(node.parent.id===parent.id&&nodeName===name){return node}}return FS.lookup(parent,name)},createNode(parent,name,mode,rdev){var node=new FS.FSNode(parent,name,mode,rdev);FS.hashAddNode(node);return node},destroyNode(node){FS.hashRemoveNode(node)},isRoot(node){return node===node.parent},isMountpoint(node){return!!node.mounted},isFile(mode){return(mode&61440)===32768},isDir(mode){return(mode&61440)===16384},isLink(mode){return(mode&61440)===40960},isChrdev(mode){return(mode&61440)===8192},isBlkdev(mode){return(mode&61440)===24576},isFIFO(mode){return(mode&61440)===4096},isSocket(mode){return(mode&49152)===49152},flagsToPermissionString(flag){var perms=[\"r\",\"w\",\"rw\"][flag&3];if(flag&512){perms+=\"w\"}return perms},nodePermissions(node,perms){if(FS.ignorePermissions){return 0}if(perms.includes(\"r\")&&!(node.mode&292)){return 2}else if(perms.includes(\"w\")&&!(node.mode&146)){return 2}else if(perms.includes(\"x\")&&!(node.mode&73)){return 2}return 0},mayLookup(dir){var errCode=FS.nodePermissions(dir,\"x\");if(errCode)return errCode;if(!dir.node_ops.lookup)return 2;return 0},mayCreate(dir,name){try{var node=FS.lookupNode(dir,name);return 20}catch(e){}return FS.nodePermissions(dir,\"wx\")},mayDelete(dir,name,isdir){var node;try{node=FS.lookupNode(dir,name)}catch(e){return e.errno}var errCode=FS.nodePermissions(dir,\"wx\");if(errCode){return errCode}if(isdir){if(!FS.isDir(node.mode)){return 54}if(FS.isRoot(node)||FS.getPath(node)===FS.cwd()){return 10}}else{if(FS.isDir(node.mode)){return 31}}return 0},mayOpen(node,flags){if(!node){return 44}if(FS.isLink(node.mode)){return 32}else if(FS.isDir(node.mode)){if(FS.flagsToPermissionString(flags)!==\"r\"||flags&512){return 31}}return FS.nodePermissions(node,FS.flagsToPermissionString(flags))},MAX_OPEN_FDS:4096,nextfd(){for(var fd=0;fd<=FS.MAX_OPEN_FDS;fd++){if(!FS.streams[fd]){return fd}}throw new FS.ErrnoError(33)},getStreamChecked(fd){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}return stream},getStream:fd=>FS.streams[fd],createStream(stream,fd=-1){if(!FS.FSStream){FS.FSStream=function(){this.shared={}};FS.FSStream.prototype={};Object.defineProperties(FS.FSStream.prototype,{object:{get(){return this.node},set(val){this.node=val}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(val){this.shared.flags=val}},position:{get(){return this.shared.position},set(val){this.shared.position=val}}})}stream=Object.assign(new FS.FSStream,stream);if(fd==-1){fd=FS.nextfd()}stream.fd=fd;FS.streams[fd]=stream;return stream},closeStream(fd){FS.streams[fd]=null},chrdev_stream_ops:{open(stream){var device=FS.getDevice(stream.node.rdev);stream.stream_ops=device.stream_ops;if(stream.stream_ops.open){stream.stream_ops.open(stream)}},llseek(){throw new FS.ErrnoError(70)}},major:dev=>dev>>8,minor:dev=>dev&255,makedev:(ma,mi)=>ma<<8|mi,registerDevice(dev,ops){FS.devices[dev]={stream_ops:ops}},getDevice:dev=>FS.devices[dev],getMounts(mount){var mounts=[];var check=[mount];while(check.length){var m=check.pop();mounts.push(m);check.push.apply(check,m.mounts)}return mounts},syncfs(populate,callback){if(typeof populate==\"function\"){callback=populate;populate=false}FS.syncFSRequests++;if(FS.syncFSRequests>1){err(`warning: ${FS.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`)}var mounts=FS.getMounts(FS.root.mount);var completed=0;function doCallback(errCode){FS.syncFSRequests--;return callback(errCode)}function done(errCode){if(errCode){if(!done.errored){done.errored=true;return doCallback(errCode)}return}if(++completed>=mounts.length){doCallback(null)}}mounts.forEach(mount=>{if(!mount.type.syncfs){return done(null)}mount.type.syncfs(mount,populate,done)})},mount(type,opts,mountpoint){var root=mountpoint===\"/\";var pseudo=!mountpoint;var node;if(root&&FS.root){throw new FS.ErrnoError(10)}else if(!root&&!pseudo){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});mountpoint=lookup.path;node=lookup.node;if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}if(!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}}var mount={type:type,opts:opts,mountpoint:mountpoint,mounts:[]};var mountRoot=type.mount(mount);mountRoot.mount=mount;mount.root=mountRoot;if(root){FS.root=mountRoot}else if(node){node.mounted=mount;if(node.mount){node.mount.mounts.push(mount)}}return mountRoot},unmount(mountpoint){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});if(!FS.isMountpoint(lookup.node)){throw new FS.ErrnoError(28)}var node=lookup.node;var mount=node.mounted;var mounts=FS.getMounts(mount);Object.keys(FS.nameTable).forEach(hash=>{var current=FS.nameTable[hash];while(current){var next=current.name_next;if(mounts.includes(current.mount)){FS.destroyNode(current)}current=next}});node.mounted=null;var idx=node.mount.mounts.indexOf(mount);node.mount.mounts.splice(idx,1)},lookup(parent,name){return parent.node_ops.lookup(parent,name)},mknod(path,mode,dev){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);if(!name||name===\".\"||name===\"..\"){throw new FS.ErrnoError(28)}var errCode=FS.mayCreate(parent,name);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.mknod){throw new FS.ErrnoError(63)}return parent.node_ops.mknod(parent,name,mode,dev)},create(path,mode){mode=mode!==undefined?mode:438;mode&=4095;mode|=32768;return FS.mknod(path,mode,0)},mkdir(path,mode){mode=mode!==undefined?mode:511;mode&=511|512;mode|=16384;return FS.mknod(path,mode,0)},mkdirTree(path,mode){var dirs=path.split(\"/\");var d=\"\";for(var i=0;i<dirs.length;++i){if(!dirs[i])continue;d+=\"/\"+dirs[i];try{FS.mkdir(d,mode)}catch(e){if(e.errno!=20)throw e}}},mkdev(path,mode,dev){if(typeof dev==\"undefined\"){dev=mode;mode=438}mode|=8192;return FS.mknod(path,mode,dev)},symlink(oldpath,newpath){if(!PATH_FS.resolve(oldpath)){throw new FS.ErrnoError(44)}var lookup=FS.lookupPath(newpath,{parent:true});var parent=lookup.node;if(!parent){throw new FS.ErrnoError(44)}var newname=PATH.basename(newpath);var errCode=FS.mayCreate(parent,newname);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.symlink){throw new FS.ErrnoError(63)}return parent.node_ops.symlink(parent,newname,oldpath)},rename(old_path,new_path){var old_dirname=PATH.dirname(old_path);var new_dirname=PATH.dirname(new_path);var old_name=PATH.basename(old_path);var new_name=PATH.basename(new_path);var lookup,old_dir,new_dir;lookup=FS.lookupPath(old_path,{parent:true});old_dir=lookup.node;lookup=FS.lookupPath(new_path,{parent:true});new_dir=lookup.node;if(!old_dir||!new_dir)throw new FS.ErrnoError(44);if(old_dir.mount!==new_dir.mount){throw new FS.ErrnoError(75)}var old_node=FS.lookupNode(old_dir,old_name);var relative=PATH_FS.relative(old_path,new_dirname);if(relative.charAt(0)!==\".\"){throw new FS.ErrnoError(28)}relative=PATH_FS.relative(new_path,old_dirname);if(relative.charAt(0)!==\".\"){throw new FS.ErrnoError(55)}var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(old_node===new_node){return}var isdir=FS.isDir(old_node.mode);var errCode=FS.mayDelete(old_dir,old_name,isdir);if(errCode){throw new FS.ErrnoError(errCode)}errCode=new_node?FS.mayDelete(new_dir,new_name,isdir):FS.mayCreate(new_dir,new_name);if(errCode){throw new FS.ErrnoError(errCode)}if(!old_dir.node_ops.rename){throw new FS.ErrnoError(63)}if(FS.isMountpoint(old_node)||new_node&&FS.isMountpoint(new_node)){throw new FS.ErrnoError(10)}if(new_dir!==old_dir){errCode=FS.nodePermissions(old_dir,\"w\");if(errCode){throw new FS.ErrnoError(errCode)}}FS.hashRemoveNode(old_node);try{old_dir.node_ops.rename(old_node,new_dir,new_name)}catch(e){throw e}finally{FS.hashAddNode(old_node)}},rmdir(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,true);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.rmdir){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}parent.node_ops.rmdir(parent,name);FS.destroyNode(node)},readdir(path){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;if(!node.node_ops.readdir){throw new FS.ErrnoError(54)}return node.node_ops.readdir(node)},unlink(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;if(!parent){throw new FS.ErrnoError(44)}var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,false);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.unlink){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}parent.node_ops.unlink(parent,name);FS.destroyNode(node)},readlink(path){var lookup=FS.lookupPath(path);var link=lookup.node;if(!link){throw new FS.ErrnoError(44)}if(!link.node_ops.readlink){throw new FS.ErrnoError(28)}return PATH_FS.resolve(FS.getPath(link.parent),link.node_ops.readlink(link))},stat(path,dontFollow){var lookup=FS.lookupPath(path,{follow:!dontFollow});var node=lookup.node;if(!node){throw new FS.ErrnoError(44)}if(!node.node_ops.getattr){throw new FS.ErrnoError(63)}return node.node_ops.getattr(node)},lstat(path){return FS.stat(path,true)},chmod(path,mode,dontFollow){var node;if(typeof path==\"string\"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{mode:mode&4095|node.mode&~4095,timestamp:Date.now()})},lchmod(path,mode){FS.chmod(path,mode,true)},fchmod(fd,mode){var stream=FS.getStreamChecked(fd);FS.chmod(stream.node,mode)},chown(path,uid,gid,dontFollow){var node;if(typeof path==\"string\"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{timestamp:Date.now()})},lchown(path,uid,gid){FS.chown(path,uid,gid,true)},fchown(fd,uid,gid){var stream=FS.getStreamChecked(fd);FS.chown(stream.node,uid,gid)},truncate(path,len){if(len<0){throw new FS.ErrnoError(28)}var node;if(typeof path==\"string\"){var lookup=FS.lookupPath(path,{follow:true});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}if(FS.isDir(node.mode)){throw new FS.ErrnoError(31)}if(!FS.isFile(node.mode)){throw new FS.ErrnoError(28)}var errCode=FS.nodePermissions(node,\"w\");if(errCode){throw new FS.ErrnoError(errCode)}node.node_ops.setattr(node,{size:len,timestamp:Date.now()})},ftruncate(fd,len){var stream=FS.getStreamChecked(fd);if((stream.flags&2097155)===0){throw new FS.ErrnoError(28)}FS.truncate(stream.node,len)},utime(path,atime,mtime){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;node.node_ops.setattr(node,{timestamp:Math.max(atime,mtime)})},open(path,flags,mode){if(path===\"\"){throw new FS.ErrnoError(44)}flags=typeof flags==\"string\"?FS_modeStringToFlags(flags):flags;mode=typeof mode==\"undefined\"?438:mode;if(flags&64){mode=mode&4095|32768}else{mode=0}var node;if(typeof path==\"object\"){node=path}else{path=PATH.normalize(path);try{var lookup=FS.lookupPath(path,{follow:!(flags&131072)});node=lookup.node}catch(e){}}var created=false;if(flags&64){if(node){if(flags&128){throw new FS.ErrnoError(20)}}else{node=FS.mknod(path,mode,0);created=true}}if(!node){throw new FS.ErrnoError(44)}if(FS.isChrdev(node.mode)){flags&=~512}if(flags&65536&&!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}if(!created){var errCode=FS.mayOpen(node,flags);if(errCode){throw new FS.ErrnoError(errCode)}}if(flags&512&&!created){FS.truncate(node,0)}flags&=~(128|512|131072);var stream=FS.createStream({node:node,path:FS.getPath(node),flags:flags,seekable:true,position:0,stream_ops:node.stream_ops,ungotten:[],error:false});if(stream.stream_ops.open){stream.stream_ops.open(stream)}if(Module[\"logReadFiles\"]&&!(flags&1)){if(!FS.readFiles)FS.readFiles={};if(!(path in FS.readFiles)){FS.readFiles[path]=1}}return stream},close(stream){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(stream.getdents)stream.getdents=null;try{if(stream.stream_ops.close){stream.stream_ops.close(stream)}}catch(e){throw e}finally{FS.closeStream(stream.fd)}stream.fd=null},isClosed(stream){return stream.fd===null},llseek(stream,offset,whence){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(!stream.seekable||!stream.stream_ops.llseek){throw new FS.ErrnoError(70)}if(whence!=0&&whence!=1&&whence!=2){throw new FS.ErrnoError(28)}stream.position=stream.stream_ops.llseek(stream,offset,whence);stream.ungotten=[];return stream.position},read(stream,buffer,offset,length,position){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.read){throw new FS.ErrnoError(28)}var seeking=typeof position!=\"undefined\";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesRead=stream.stream_ops.read(stream,buffer,offset,length,position);if(!seeking)stream.position+=bytesRead;return bytesRead},write(stream,buffer,offset,length,position,canOwn){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.write){throw new FS.ErrnoError(28)}if(stream.seekable&&stream.flags&1024){FS.llseek(stream,0,2)}var seeking=typeof position!=\"undefined\";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesWritten=stream.stream_ops.write(stream,buffer,offset,length,position,canOwn);if(!seeking)stream.position+=bytesWritten;return bytesWritten},allocate(stream,offset,length){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(offset<0||length<=0){throw new FS.ErrnoError(28)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(!FS.isFile(stream.node.mode)&&!FS.isDir(stream.node.mode)){throw new FS.ErrnoError(43)}if(!stream.stream_ops.allocate){throw new FS.ErrnoError(138)}stream.stream_ops.allocate(stream,offset,length)},mmap(stream,length,position,prot,flags){if((prot&2)!==0&&(flags&2)===0&&(stream.flags&2097155)!==2){throw new FS.ErrnoError(2)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(2)}if(!stream.stream_ops.mmap){throw new FS.ErrnoError(43)}return stream.stream_ops.mmap(stream,length,position,prot,flags)},msync(stream,buffer,offset,length,mmapFlags){if(!stream.stream_ops.msync){return 0}return stream.stream_ops.msync(stream,buffer,offset,length,mmapFlags)},munmap:stream=>0,ioctl(stream,cmd,arg){if(!stream.stream_ops.ioctl){throw new FS.ErrnoError(59)}return stream.stream_ops.ioctl(stream,cmd,arg)},readFile(path,opts={}){opts.flags=opts.flags||0;opts.encoding=opts.encoding||\"binary\";if(opts.encoding!==\"utf8\"&&opts.encoding!==\"binary\"){throw new Error(`Invalid encoding type \"${opts.encoding}\"`)}var ret;var stream=FS.open(path,opts.flags);var stat=FS.stat(path);var length=stat.size;var buf=new Uint8Array(length);FS.read(stream,buf,0,length,0);if(opts.encoding===\"utf8\"){ret=UTF8ArrayToString(buf,0)}else if(opts.encoding===\"binary\"){ret=buf}FS.close(stream);return ret},writeFile(path,data,opts={}){opts.flags=opts.flags||577;var stream=FS.open(path,opts.flags,opts.mode);if(typeof data==\"string\"){var buf=new Uint8Array(lengthBytesUTF8(data)+1);var actualNumBytes=stringToUTF8Array(data,buf,0,buf.length);FS.write(stream,buf,0,actualNumBytes,undefined,opts.canOwn)}else if(ArrayBuffer.isView(data)){FS.write(stream,data,0,data.byteLength,undefined,opts.canOwn)}else{throw new Error(\"Unsupported data type\")}FS.close(stream)},cwd:()=>FS.currentPath,chdir(path){var lookup=FS.lookupPath(path,{follow:true});if(lookup.node===null){throw new FS.ErrnoError(44)}if(!FS.isDir(lookup.node.mode)){throw new FS.ErrnoError(54)}var errCode=FS.nodePermissions(lookup.node,\"x\");if(errCode){throw new FS.ErrnoError(errCode)}FS.currentPath=lookup.path},createDefaultDirectories(){FS.mkdir(\"/tmp\");FS.mkdir(\"/home\");FS.mkdir(\"/home/web_user\")},createDefaultDevices(){FS.mkdir(\"/dev\");FS.registerDevice(FS.makedev(1,3),{read:()=>0,write:(stream,buffer,offset,length,pos)=>length});FS.mkdev(\"/dev/null\",FS.makedev(1,3));TTY.register(FS.makedev(5,0),TTY.default_tty_ops);TTY.register(FS.makedev(6,0),TTY.default_tty1_ops);FS.mkdev(\"/dev/tty\",FS.makedev(5,0));FS.mkdev(\"/dev/tty1\",FS.makedev(6,0));var randomBuffer=new Uint8Array(1024),randomLeft=0;var randomByte=()=>{if(randomLeft===0){randomLeft=randomFill(randomBuffer).byteLength}return randomBuffer[--randomLeft]};FS.createDevice(\"/dev\",\"random\",randomByte);FS.createDevice(\"/dev\",\"urandom\",randomByte);FS.mkdir(\"/dev/shm\");FS.mkdir(\"/dev/shm/tmp\")},createSpecialDirectories(){FS.mkdir(\"/proc\");var proc_self=FS.mkdir(\"/proc/self\");FS.mkdir(\"/proc/self/fd\");FS.mount({mount(){var node=FS.createNode(proc_self,\"fd\",16384|511,73);node.node_ops={lookup(parent,name){var fd=+name;var stream=FS.getStreamChecked(fd);var ret={parent:null,mount:{mountpoint:\"fake\"},node_ops:{readlink:()=>stream.path}};ret.parent=ret;return ret}};return node}},{},\"/proc/self/fd\")},createStandardStreams(){if(Module[\"stdin\"]){FS.createDevice(\"/dev\",\"stdin\",Module[\"stdin\"])}else{FS.symlink(\"/dev/tty\",\"/dev/stdin\")}if(Module[\"stdout\"]){FS.createDevice(\"/dev\",\"stdout\",null,Module[\"stdout\"])}else{FS.symlink(\"/dev/tty\",\"/dev/stdout\")}if(Module[\"stderr\"]){FS.createDevice(\"/dev\",\"stderr\",null,Module[\"stderr\"])}else{FS.symlink(\"/dev/tty1\",\"/dev/stderr\")}var stdin=FS.open(\"/dev/stdin\",0);var stdout=FS.open(\"/dev/stdout\",1);var stderr=FS.open(\"/dev/stderr\",1)},ensureErrnoError(){if(FS.ErrnoError)return;FS.ErrnoError=function ErrnoError(errno,node){this.name=\"ErrnoError\";this.node=node;this.setErrno=function(errno){this.errno=errno};this.setErrno(errno);this.message=\"FS error\"};FS.ErrnoError.prototype=new Error;FS.ErrnoError.prototype.constructor=FS.ErrnoError;[44].forEach(code=>{FS.genericErrors[code]=new FS.ErrnoError(code);FS.genericErrors[code].stack=\"<generic error, no stack>\"})},staticInit(){FS.ensureErrnoError();FS.nameTable=new Array(4096);FS.mount(MEMFS,{},\"/\");FS.createDefaultDirectories();FS.createDefaultDevices();FS.createSpecialDirectories();FS.filesystems={\"MEMFS\":MEMFS,\"IDBFS\":IDBFS}},init(input,output,error){FS.init.initialized=true;FS.ensureErrnoError();Module[\"stdin\"]=input||Module[\"stdin\"];Module[\"stdout\"]=output||Module[\"stdout\"];Module[\"stderr\"]=error||Module[\"stderr\"];FS.createStandardStreams()},quit(){FS.init.initialized=false;for(var i=0;i<FS.streams.length;i++){var stream=FS.streams[i];if(!stream){continue}FS.close(stream)}},findObject(path,dontResolveLastLink){var ret=FS.analyzePath(path,dontResolveLastLink);if(!ret.exists){return null}return ret.object},analyzePath(path,dontResolveLastLink){try{var lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});path=lookup.path}catch(e){}var ret={isRoot:false,exists:false,error:0,name:null,path:null,object:null,parentExists:false,parentPath:null,parentObject:null};try{var lookup=FS.lookupPath(path,{parent:true});ret.parentExists=true;ret.parentPath=lookup.path;ret.parentObject=lookup.node;ret.name=PATH.basename(path);lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});ret.exists=true;ret.path=lookup.path;ret.object=lookup.node;ret.name=lookup.node.name;ret.isRoot=lookup.path===\"/\"}catch(e){ret.error=e.errno}return ret},createPath(parent,path,canRead,canWrite){parent=typeof parent==\"string\"?parent:FS.getPath(parent);var parts=path.split(\"/\").reverse();while(parts.length){var part=parts.pop();if(!part)continue;var current=PATH.join2(parent,part);try{FS.mkdir(current)}catch(e){}parent=current}return current},createFile(parent,name,properties,canRead,canWrite){var path=PATH.join2(typeof parent==\"string\"?parent:FS.getPath(parent),name);var mode=FS_getMode(canRead,canWrite);return FS.create(path,mode)},createDataFile(parent,name,data,canRead,canWrite,canOwn){var path=name;if(parent){parent=typeof parent==\"string\"?parent:FS.getPath(parent);path=name?PATH.join2(parent,name):parent}var mode=FS_getMode(canRead,canWrite);var node=FS.create(path,mode);if(data){if(typeof data==\"string\"){var arr=new Array(data.length);for(var i=0,len=data.length;i<len;++i)arr[i]=data.charCodeAt(i);data=arr}FS.chmod(node,mode|146);var stream=FS.open(node,577);FS.write(stream,data,0,data.length,0,canOwn);FS.close(stream);FS.chmod(node,mode)}return node},createDevice(parent,name,input,output){var path=PATH.join2(typeof parent==\"string\"?parent:FS.getPath(parent),name);var mode=FS_getMode(!!input,!!output);if(!FS.createDevice.major)FS.createDevice.major=64;var dev=FS.makedev(FS.createDevice.major++,0);FS.registerDevice(dev,{open(stream){stream.seekable=false},close(stream){if(output&&output.buffer&&output.buffer.length){output(10)}},read(stream,buffer,offset,length,pos){var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=input()}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write(stream,buffer,offset,length,pos){for(var i=0;i<length;i++){try{output(buffer[offset+i])}catch(e){throw new FS.ErrnoError(29)}}if(length){stream.node.timestamp=Date.now()}return i}});return FS.mkdev(path,mode,dev)},forceLoadFile(obj){if(obj.isDevice||obj.isFolder||obj.link||obj.contents)return true;if(typeof XMLHttpRequest!=\"undefined\"){throw new Error(\"Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.\")}else if(read_){try{obj.contents=intArrayFromString(read_(obj.url),true);obj.usedBytes=obj.contents.length}catch(e){throw new FS.ErrnoError(29)}}else{throw new Error(\"Cannot load without read() or XMLHttpRequest.\")}},createLazyFile(parent,name,url,canRead,canWrite){function LazyUint8Array(){this.lengthKnown=false;this.chunks=[]}LazyUint8Array.prototype.get=function LazyUint8Array_get(idx){if(idx>this.length-1||idx<0){return undefined}var chunkOffset=idx%this.chunkSize;var chunkNum=idx/this.chunkSize|0;return this.getter(chunkNum)[chunkOffset]};LazyUint8Array.prototype.setDataGetter=function LazyUint8Array_setDataGetter(getter){this.getter=getter};LazyUint8Array.prototype.cacheLength=function LazyUint8Array_cacheLength(){var xhr=new XMLHttpRequest;xhr.open(\"HEAD\",url,false);xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error(\"Couldn't load \"+url+\". Status: \"+xhr.status);var datalength=Number(xhr.getResponseHeader(\"Content-length\"));var header;var hasByteServing=(header=xhr.getResponseHeader(\"Accept-Ranges\"))&&header===\"bytes\";var usesGzip=(header=xhr.getResponseHeader(\"Content-Encoding\"))&&header===\"gzip\";var chunkSize=1024*1024;if(!hasByteServing)chunkSize=datalength;var doXHR=(from,to)=>{if(from>to)throw new Error(\"invalid range (\"+from+\", \"+to+\") or no bytes requested!\");if(to>datalength-1)throw new Error(\"only \"+datalength+\" bytes available! programmer error!\");var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);if(datalength!==chunkSize)xhr.setRequestHeader(\"Range\",\"bytes=\"+from+\"-\"+to);xhr.responseType=\"arraybuffer\";if(xhr.overrideMimeType){xhr.overrideMimeType(\"text/plain; charset=x-user-defined\")}xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error(\"Couldn't load \"+url+\". Status: \"+xhr.status);if(xhr.response!==undefined){return new Uint8Array(xhr.response||[])}return intArrayFromString(xhr.responseText||\"\",true)};var lazyArray=this;lazyArray.setDataGetter(chunkNum=>{var start=chunkNum*chunkSize;var end=(chunkNum+1)*chunkSize-1;end=Math.min(end,datalength-1);if(typeof lazyArray.chunks[chunkNum]==\"undefined\"){lazyArray.chunks[chunkNum]=doXHR(start,end)}if(typeof lazyArray.chunks[chunkNum]==\"undefined\")throw new Error(\"doXHR failed!\");return lazyArray.chunks[chunkNum]});if(usesGzip||!datalength){chunkSize=datalength=1;datalength=this.getter(0).length;chunkSize=datalength;out(\"LazyFiles on gzip forces download of the whole file when length is accessed\")}this._length=datalength;this._chunkSize=chunkSize;this.lengthKnown=true};if(typeof XMLHttpRequest!=\"undefined\"){if(!ENVIRONMENT_IS_WORKER)throw\"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc\";var lazyArray=new LazyUint8Array;Object.defineProperties(lazyArray,{length:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._length}},chunkSize:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._chunkSize}}});var properties={isDevice:false,contents:lazyArray}}else{var properties={isDevice:false,url:url}}var node=FS.createFile(parent,name,properties,canRead,canWrite);if(properties.contents){node.contents=properties.contents}else if(properties.url){node.contents=null;node.url=properties.url}Object.defineProperties(node,{usedBytes:{get:function(){return this.contents.length}}});var stream_ops={};var keys=Object.keys(node.stream_ops);keys.forEach(key=>{var fn=node.stream_ops[key];stream_ops[key]=function forceLoadLazyFile(){FS.forceLoadFile(node);return fn.apply(null,arguments)}});function writeChunks(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=contents.length)return 0;var size=Math.min(contents.length-position,length);if(contents.slice){for(var i=0;i<size;i++){buffer[offset+i]=contents[position+i]}}else{for(var i=0;i<size;i++){buffer[offset+i]=contents.get(position+i)}}return size}stream_ops.read=(stream,buffer,offset,length,position)=>{FS.forceLoadFile(node);return writeChunks(stream,buffer,offset,length,position)};stream_ops.mmap=(stream,length,position,prot,flags)=>{FS.forceLoadFile(node);var ptr=mmapAlloc(length);if(!ptr){throw new FS.ErrnoError(48)}writeChunks(stream,HEAP8,ptr,length,position);return{ptr:ptr,allocated:true}};node.stream_ops=stream_ops;return node}};var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt(dirfd,path,allowEmpty){if(PATH.isAbs(path)){return path}var dir;if(dirfd===-100){dir=FS.cwd()}else{var dirstream=SYSCALLS.getStreamFromFD(dirfd);dir=dirstream.path}if(path.length==0){if(!allowEmpty){throw new FS.ErrnoError(44)}return dir}return PATH.join2(dir,path)},doStat(func,path,buf){try{var stat=func(path)}catch(e){if(e&&e.node&&PATH.normalize(path)!==PATH.normalize(FS.getPath(e.node))){return-54}throw e}HEAP32[buf>>2]=stat.dev;HEAP32[buf+4>>2]=stat.mode;HEAPU32[buf+8>>2]=stat.nlink;HEAP32[buf+12>>2]=stat.uid;HEAP32[buf+16>>2]=stat.gid;HEAP32[buf+20>>2]=stat.rdev;HEAP64[buf+24>>3]=BigInt(stat.size);HEAP32[buf+32>>2]=4096;HEAP32[buf+36>>2]=stat.blocks;var atime=stat.atime.getTime();var mtime=stat.mtime.getTime();var ctime=stat.ctime.getTime();HEAP64[buf+40>>3]=BigInt(Math.floor(atime/1e3));HEAPU32[buf+48>>2]=atime%1e3*1e3;HEAP64[buf+56>>3]=BigInt(Math.floor(mtime/1e3));HEAPU32[buf+64>>2]=mtime%1e3*1e3;HEAP64[buf+72>>3]=BigInt(Math.floor(ctime/1e3));HEAPU32[buf+80>>2]=ctime%1e3*1e3;HEAP64[buf+88>>3]=BigInt(stat.ino);return 0},doMsync(addr,stream,len,flags,offset){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}if(flags&2){return 0}var buffer=HEAPU8.slice(addr,addr+len);FS.msync(stream,buffer,offset,len,flags)},varargs:undefined,get(){var ret=HEAP32[SYSCALLS.varargs>>2];SYSCALLS.varargs+=4;return ret},getp(){return SYSCALLS.get()},getStr(ptr){var ret=UTF8ToString(ptr);return ret},getStreamFromFD(fd){var stream=FS.getStreamChecked(fd);return stream}};function ___syscall_fcntl64(fd,cmd,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(cmd){case 0:{var arg=SYSCALLS.get();if(arg<0){return-28}while(FS.streams[arg]){arg++}var newStream;newStream=FS.createStream(stream,arg);return newStream.fd}case 1:case 2:return 0;case 3:return stream.flags;case 4:{var arg=SYSCALLS.get();stream.flags|=arg;return 0}case 5:{var arg=SYSCALLS.getp();var offset=0;HEAP16[arg+offset>>1]=2;return 0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:setErrNo(28);return-1;default:{return-28}}}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}function ___syscall_ioctl(fd,op,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(op){case 21509:{if(!stream.tty)return-59;return 0}case 21505:{if(!stream.tty)return-59;if(stream.tty.ops.ioctl_tcgets){var termios=stream.tty.ops.ioctl_tcgets(stream);var argp=SYSCALLS.getp();HEAP32[argp>>2]=termios.c_iflag||0;HEAP32[argp+4>>2]=termios.c_oflag||0;HEAP32[argp+8>>2]=termios.c_cflag||0;HEAP32[argp+12>>2]=termios.c_lflag||0;for(var i=0;i<32;i++){HEAP8[argp+i+17>>0]=termios.c_cc[i]||0}return 0}return 0}case 21510:case 21511:case 21512:{if(!stream.tty)return-59;return 0}case 21506:case 21507:case 21508:{if(!stream.tty)return-59;if(stream.tty.ops.ioctl_tcsets){var argp=SYSCALLS.getp();var c_iflag=HEAP32[argp>>2];var c_oflag=HEAP32[argp+4>>2];var c_cflag=HEAP32[argp+8>>2];var c_lflag=HEAP32[argp+12>>2];var c_cc=[];for(var i=0;i<32;i++){c_cc.push(HEAP8[argp+i+17>>0])}return stream.tty.ops.ioctl_tcsets(stream.tty,op,{c_iflag:c_iflag,c_oflag:c_oflag,c_cflag:c_cflag,c_lflag:c_lflag,c_cc:c_cc})}return 0}case 21519:{if(!stream.tty)return-59;var argp=SYSCALLS.getp();HEAP32[argp>>2]=0;return 0}case 21520:{if(!stream.tty)return-59;return-28}case 21531:{var argp=SYSCALLS.getp();return FS.ioctl(stream,op,argp)}case 21523:{if(!stream.tty)return-59;if(stream.tty.ops.ioctl_tiocgwinsz){var winsize=stream.tty.ops.ioctl_tiocgwinsz(stream.tty);var argp=SYSCALLS.getp();HEAP16[argp>>1]=winsize[0];HEAP16[argp+2>>1]=winsize[1]}return 0}case 21524:{if(!stream.tty)return-59;return 0}case 21515:{if(!stream.tty)return-59;return 0}default:return-28}}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}function ___syscall_openat(dirfd,path,flags,varargs){SYSCALLS.varargs=varargs;try{path=SYSCALLS.getStr(path);path=SYSCALLS.calculateAt(dirfd,path);var mode=varargs?SYSCALLS.get():0;return FS.open(path,flags,mode).fd}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}function ___syscall_stat64(path,buf){try{path=SYSCALLS.getStr(path);return SYSCALLS.doStat(FS.stat,path,buf)}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}var MAX_INT53=9007199254740992;var MIN_INT53=-9007199254740992;var bigintToI53Checked=num=>num<MIN_INT53||num>MAX_INT53?NaN:Number(num);function __munmap_js(addr,len,prot,flags,fd,offset){offset=bigintToI53Checked(offset);try{if(isNaN(offset))return 61;var stream=SYSCALLS.getStreamFromFD(fd);if(prot&2){SYSCALLS.doMsync(addr,stream,len,flags,offset)}FS.munmap(stream)}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}var _abort=()=>{abort(\"\")};var readEmAsmArgsArray=[];var readEmAsmArgs=(sigPtr,buf)=>{readEmAsmArgsArray.length=0;var ch;while(ch=HEAPU8[sigPtr++]){buf+=ch!=105&&buf%8?4:0;readEmAsmArgsArray.push(ch==106?HEAP64[buf>>3]:ch==105?HEAP32[buf>>2]:HEAPF64[buf>>3]);buf+=ch==105?4:8}return readEmAsmArgsArray};var runEmAsmFunction=(code,sigPtr,argbuf)=>{var args=readEmAsmArgs(sigPtr,argbuf);return ASM_CONSTS[code].apply(null,args)};var _emscripten_asm_const_int=(code,sigPtr,argbuf)=>runEmAsmFunction(code,sigPtr,argbuf);var _emscripten_memcpy_big=(dest,src,num)=>HEAPU8.copyWithin(dest,src,src+num);var getHeapMax=()=>2147483648;var growMemory=size=>{var b=wasmMemory.buffer;var pages=(size-b.byteLength+65535)/65536;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=requestedSize=>{var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false};var ENV={};var getExecutableName=()=>thisProgram||\"./this.program\";var getEnvStrings=()=>{if(!getEnvStrings.strings){var lang=(typeof navigator==\"object\"&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\";var env={\"USER\":\"web_user\",\"LOGNAME\":\"web_user\",\"PATH\":\"/\",\"PWD\":\"/\",\"HOME\":\"/home/web_user\",\"LANG\":lang,\"_\":getExecutableName()};for(var x in ENV){if(ENV[x]===undefined)delete env[x];else env[x]=ENV[x]}var strings=[];for(var x in env){strings.push(`${x}=${env[x]}`)}getEnvStrings.strings=strings}return getEnvStrings.strings};var stringToAscii=(str,buffer)=>{for(var i=0;i<str.length;++i){HEAP8[buffer++>>0]=str.charCodeAt(i)}HEAP8[buffer>>0]=0};var _environ_get=(__environ,environ_buf)=>{var bufSize=0;getEnvStrings().forEach((string,i)=>{var ptr=environ_buf+bufSize;HEAPU32[__environ+i*4>>2]=ptr;stringToAscii(string,ptr);bufSize+=string.length+1});return 0};var _environ_sizes_get=(penviron_count,penviron_buf_size)=>{var strings=getEnvStrings();HEAPU32[penviron_count>>2]=strings.length;var bufSize=0;strings.forEach(string=>bufSize+=string.length+1);HEAPU32[penviron_buf_size>>2]=bufSize;return 0};function _fd_close(fd){try{var stream=SYSCALLS.getStreamFromFD(fd);FS.close(stream);return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}var doReadv=(stream,iov,iovcnt,offset)=>{var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;var curr=FS.read(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr;if(curr<len)break;if(typeof offset!==\"undefined\"){offset+=curr}}return ret};function _fd_read(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=doReadv(stream,iov,iovcnt);HEAPU32[pnum>>2]=num;return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}function _fd_seek(fd,offset,whence,newOffset){offset=bigintToI53Checked(offset);try{if(isNaN(offset))return 61;var stream=SYSCALLS.getStreamFromFD(fd);FS.llseek(stream,offset,whence);HEAP64[newOffset>>3]=BigInt(stream.position);if(stream.getdents&&offset===0&&whence===0)stream.getdents=null;return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}var doWritev=(stream,iov,iovcnt,offset)=>{var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;var curr=FS.write(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr;if(typeof offset!==\"undefined\"){offset+=curr}}return ret};function _fd_write(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=doWritev(stream,iov,iovcnt);HEAPU32[pnum>>2]=num;return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}var ALLOC_NORMAL=0;var getCFunc=ident=>{var func=Module[\"_\"+ident];return func};var writeArrayToMemory=(array,buffer)=>{HEAP8.set(array,buffer)};var stringToUTF8=(str,outPtr,maxBytesToWrite)=>stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);var stringToUTF8OnStack=str=>{var size=lengthBytesUTF8(str)+1;var ret=stackAlloc(size);stringToUTF8(str,ret,size);return ret};var ccall=(ident,returnType,argTypes,args,opts)=>{var toC={\"string\":str=>{var ret=0;if(str!==null&&str!==undefined&&str!==0){ret=stringToUTF8OnStack(str)}return ret},\"array\":arr=>{var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType===\"string\"){return UTF8ToString(ret)}if(returnType===\"boolean\")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);function onDone(ret){if(stack!==0)stackRestore(stack);return convertReturnValue(ret)}ret=onDone(ret);return ret};var FSNode=function(parent,name,mode,rdev){if(!parent){parent=this}this.parent=parent;this.mount=parent.mount;this.mounted=null;this.id=FS.nextInode++;this.name=name;this.mode=mode;this.node_ops={};this.stream_ops={};this.rdev=rdev};var readMode=292|73;var writeMode=146;Object.defineProperties(FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(val){val?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(val){val?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}});FS.FSNode=FSNode;FS.createPreloadedFile=FS_createPreloadedFile;FS.staticInit();var wasmImports={a:___assert_fail,b:___cxa_throw,c:___syscall_fcntl64,h:___syscall_ioctl,i:___syscall_openat,o:___syscall_stat64,p:__munmap_js,e:_abort,k:_emscripten_asm_const_int,j:_emscripten_memcpy_big,n:_emscripten_resize_heap,l:_environ_get,m:_environ_sizes_get,d:_fd_close,g:_fd_read,q:_fd_seek,f:_fd_write};var wasmExports=createWasm();var ___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports[\"s\"])();var _cqt_init=Module[\"_cqt_init\"]=(a0,a1,a2,a3,a4,a5)=>(_cqt_init=Module[\"_cqt_init\"]=wasmExports[\"t\"])(a0,a1,a2,a3,a4,a5);var _cqt_calc=Module[\"_cqt_calc\"]=(a0,a1)=>(_cqt_calc=Module[\"_cqt_calc\"]=wasmExports[\"u\"])(a0,a1);var _cqt_render_line=Module[\"_cqt_render_line\"]=a0=>(_cqt_render_line=Module[\"_cqt_render_line\"]=wasmExports[\"v\"])(a0);var _cqt_bin_to_freq=Module[\"_cqt_bin_to_freq\"]=a0=>(_cqt_bin_to_freq=Module[\"_cqt_bin_to_freq\"]=wasmExports[\"w\"])(a0);var _fluid_synth_noteon=Module[\"_fluid_synth_noteon\"]=(a0,a1,a2,a3)=>(_fluid_synth_noteon=Module[\"_fluid_synth_noteon\"]=wasmExports[\"x\"])(a0,a1,a2,a3);var _fluid_synth_noteoff=Module[\"_fluid_synth_noteoff\"]=(a0,a1,a2)=>(_fluid_synth_noteoff=Module[\"_fluid_synth_noteoff\"]=wasmExports[\"y\"])(a0,a1,a2);var _fluid_synth_write_float=Module[\"_fluid_synth_write_float\"]=(a0,a1,a2,a3,a4,a5,a6,a7)=>(_fluid_synth_write_float=Module[\"_fluid_synth_write_float\"]=wasmExports[\"z\"])(a0,a1,a2,a3,a4,a5,a6,a7);var _fluid_synth_all_notes_off=Module[\"_fluid_synth_all_notes_off\"]=(a0,a1)=>(_fluid_synth_all_notes_off=Module[\"_fluid_synth_all_notes_off\"]=wasmExports[\"A\"])(a0,a1);var _adl_rt_noteOn=Module[\"_adl_rt_noteOn\"]=(a0,a1,a2,a3)=>(_adl_rt_noteOn=Module[\"_adl_rt_noteOn\"]=wasmExports[\"B\"])(a0,a1,a2,a3);var _adl_rt_noteOff=Module[\"_adl_rt_noteOff\"]=(a0,a1,a2)=>(_adl_rt_noteOff=Module[\"_adl_rt_noteOff\"]=wasmExports[\"C\"])(a0,a1,a2);var _adl_rt_patchChange=Module[\"_adl_rt_patchChange\"]=(a0,a1,a2)=>(_adl_rt_patchChange=Module[\"_adl_rt_patchChange\"]=wasmExports[\"D\"])(a0,a1,a2);var _adl_rt_pitchBend=Module[\"_adl_rt_pitchBend\"]=(a0,a1,a2)=>(_adl_rt_pitchBend=Module[\"_adl_rt_pitchBend\"]=wasmExports[\"E\"])(a0,a1,a2);var _adl_rt_controllerChange=Module[\"_adl_rt_controllerChange\"]=(a0,a1,a2,a3)=>(_adl_rt_controllerChange=Module[\"_adl_rt_controllerChange\"]=wasmExports[\"F\"])(a0,a1,a2,a3);var _adl_rt_channelAfterTouch=Module[\"_adl_rt_channelAfterTouch\"]=(a0,a1,a2)=>(_adl_rt_channelAfterTouch=Module[\"_adl_rt_channelAfterTouch\"]=wasmExports[\"G\"])(a0,a1,a2);var _adl_panic=Module[\"_adl_panic\"]=a0=>(_adl_panic=Module[\"_adl_panic\"]=wasmExports[\"H\"])(a0);var _adl_rt_resetState=Module[\"_adl_rt_resetState\"]=a0=>(_adl_rt_resetState=Module[\"_adl_rt_resetState\"]=wasmExports[\"I\"])(a0);var _tp_note_on=Module[\"_tp_note_on\"]=(a0,a1,a2)=>(_tp_note_on=Module[\"_tp_note_on\"]=wasmExports[\"J\"])(a0,a1,a2);var _tp_note_off=Module[\"_tp_note_off\"]=(a0,a1)=>(_tp_note_off=Module[\"_tp_note_off\"]=wasmExports[\"K\"])(a0,a1);var _tp_program_change=Module[\"_tp_program_change\"]=(a0,a1)=>(_tp_program_change=Module[\"_tp_program_change\"]=wasmExports[\"L\"])(a0,a1);var _tp_pitch_bend=Module[\"_tp_pitch_bend\"]=(a0,a1)=>(_tp_pitch_bend=Module[\"_tp_pitch_bend\"]=wasmExports[\"M\"])(a0,a1);var _tp_control_change=Module[\"_tp_control_change\"]=(a0,a1,a2)=>(_tp_control_change=Module[\"_tp_control_change\"]=wasmExports[\"N\"])(a0,a1,a2);var _tp_channel_pressure=Module[\"_tp_channel_pressure\"]=(a0,a1)=>(_tp_channel_pressure=Module[\"_tp_channel_pressure\"]=wasmExports[\"O\"])(a0,a1);var _tp_render=Module[\"_tp_render\"]=(a0,a1)=>(_tp_render=Module[\"_tp_render\"]=wasmExports[\"P\"])(a0,a1);var _tp_panic=Module[\"_tp_panic\"]=()=>(_tp_panic=Module[\"_tp_panic\"]=wasmExports[\"Q\"])();var _tp_panic_channel=Module[\"_tp_panic_channel\"]=a0=>(_tp_panic_channel=Module[\"_tp_panic_channel\"]=wasmExports[\"R\"])(a0);var _tp_reset=Module[\"_tp_reset\"]=()=>(_tp_reset=Module[\"_tp_reset\"]=wasmExports[\"S\"])();var _tp_init=Module[\"_tp_init\"]=a0=>(_tp_init=Module[\"_tp_init\"]=wasmExports[\"T\"])(a0);var _new_fluid_settings=Module[\"_new_fluid_settings\"]=()=>(_new_fluid_settings=Module[\"_new_fluid_settings\"]=wasmExports[\"U\"])();var _fluid_settings_setstr=Module[\"_fluid_settings_setstr\"]=(a0,a1,a2)=>(_fluid_settings_setstr=Module[\"_fluid_settings_setstr\"]=wasmExports[\"V\"])(a0,a1,a2);var _fluid_settings_setint=Module[\"_fluid_settings_setint\"]=(a0,a1,a2)=>(_fluid_settings_setint=Module[\"_fluid_settings_setint\"]=wasmExports[\"W\"])(a0,a1,a2);var _fluid_settings_setnum=Module[\"_fluid_settings_setnum\"]=(a0,a1,a2)=>(_fluid_settings_setnum=Module[\"_fluid_settings_setnum\"]=wasmExports[\"X\"])(a0,a1,a2);var _new_fluid_synth=Module[\"_new_fluid_synth\"]=a0=>(_new_fluid_synth=Module[\"_new_fluid_synth\"]=wasmExports[\"Y\"])(a0);var _fluid_synth_set_interp_method=Module[\"_fluid_synth_set_interp_method\"]=(a0,a1,a2)=>(_fluid_synth_set_interp_method=Module[\"_fluid_synth_set_interp_method\"]=wasmExports[\"Z\"])(a0,a1,a2);var _adl_init=Module[\"_adl_init\"]=a0=>(_adl_init=Module[\"_adl_init\"]=wasmExports[\"_\"])(a0);var _adl_setSoftPanEnabled=Module[\"_adl_setSoftPanEnabled\"]=(a0,a1)=>(_adl_setSoftPanEnabled=Module[\"_adl_setSoftPanEnabled\"]=wasmExports[\"$\"])(a0,a1);var _adl_setNumChips=Module[\"_adl_setNumChips\"]=(a0,a1)=>(_adl_setNumChips=Module[\"_adl_setNumChips\"]=wasmExports[\"aa\"])(a0,a1);var _tp_unload_soundfont=Module[\"_tp_unload_soundfont\"]=()=>(_tp_unload_soundfont=Module[\"_tp_unload_soundfont\"]=wasmExports[\"ba\"])();var _tp_load_soundfont=Module[\"_tp_load_soundfont\"]=a0=>(_tp_load_soundfont=Module[\"_tp_load_soundfont\"]=wasmExports[\"ca\"])(a0);var _fluid_synth_sfload=Module[\"_fluid_synth_sfload\"]=(a0,a1,a2)=>(_fluid_synth_sfload=Module[\"_fluid_synth_sfload\"]=wasmExports[\"da\"])(a0,a1,a2);var _tp_add_soundfont=Module[\"_tp_add_soundfont\"]=a0=>(_tp_add_soundfont=Module[\"_tp_add_soundfont\"]=wasmExports[\"ea\"])(a0);var _tp_set_reverb=Module[\"_tp_set_reverb\"]=a0=>(_tp_set_reverb=Module[\"_tp_set_reverb\"]=wasmExports[\"fa\"])(a0);var _fluid_synth_set_reverb_on=Module[\"_fluid_synth_set_reverb_on\"]=(a0,a1)=>(_fluid_synth_set_reverb_on=Module[\"_fluid_synth_set_reverb_on\"]=wasmExports[\"ga\"])(a0,a1);var _fluid_synth_set_reverb=Module[\"_fluid_synth_set_reverb\"]=(a0,a1,a2,a3,a4)=>(_fluid_synth_set_reverb=Module[\"_fluid_synth_set_reverb\"]=wasmExports[\"ha\"])(a0,a1,a2,a3,a4);var _tp_get_polyphony=Module[\"_tp_get_polyphony\"]=()=>(_tp_get_polyphony=Module[\"_tp_get_polyphony\"]=wasmExports[\"ia\"])();var _fluid_synth_get_polyphony=Module[\"_fluid_synth_get_polyphony\"]=a0=>(_fluid_synth_get_polyphony=Module[\"_fluid_synth_get_polyphony\"]=wasmExports[\"ja\"])(a0);var _tp_set_polyphony=Module[\"_tp_set_polyphony\"]=a0=>(_tp_set_polyphony=Module[\"_tp_set_polyphony\"]=wasmExports[\"ka\"])(a0);var _fluid_synth_set_polyphony=Module[\"_fluid_synth_set_polyphony\"]=(a0,a1)=>(_fluid_synth_set_polyphony=Module[\"_fluid_synth_set_polyphony\"]=wasmExports[\"la\"])(a0,a1);var _tp_get_channel_in_use=Module[\"_tp_get_channel_in_use\"]=a0=>(_tp_get_channel_in_use=Module[\"_tp_get_channel_in_use\"]=wasmExports[\"ma\"])(a0);var _tp_get_channel_program=Module[\"_tp_get_channel_program\"]=a0=>(_tp_get_channel_program=Module[\"_tp_get_channel_program\"]=wasmExports[\"na\"])(a0);var _tp_set_channel_mute=Module[\"_tp_set_channel_mute\"]=(a0,a1)=>(_tp_set_channel_mute=Module[\"_tp_set_channel_mute\"]=wasmExports[\"oa\"])(a0,a1);var _tp_set_bank=Module[\"_tp_set_bank\"]=a0=>(_tp_set_bank=Module[\"_tp_set_bank\"]=wasmExports[\"pa\"])(a0);var _adl_setBank=Module[\"_adl_setBank\"]=(a0,a1)=>(_adl_setBank=Module[\"_adl_setBank\"]=wasmExports[\"qa\"])(a0,a1);var _tp_set_synth_engine=Module[\"_tp_set_synth_engine\"]=a0=>(_tp_set_synth_engine=Module[\"_tp_set_synth_engine\"]=wasmExports[\"ra\"])(a0);var _tp_set_ch10_melodic=Module[\"_tp_set_ch10_melodic\"]=a0=>(_tp_set_ch10_melodic=Module[\"_tp_set_ch10_melodic\"]=wasmExports[\"sa\"])(a0);var _fluid_synth_bank_select=Module[\"_fluid_synth_bank_select\"]=(a0,a1,a2)=>(_fluid_synth_bank_select=Module[\"_fluid_synth_bank_select\"]=wasmExports[\"ta\"])(a0,a1,a2);var _tp_get_fluid_synth=Module[\"_tp_get_fluid_synth\"]=()=>(_tp_get_fluid_synth=Module[\"_tp_get_fluid_synth\"]=wasmExports[\"ua\"])();var _malloc=Module[\"_malloc\"]=a0=>(_malloc=Module[\"_malloc\"]=wasmExports[\"va\"])(a0);var _gme_open_data=Module[\"_gme_open_data\"]=(a0,a1,a2,a3)=>(_gme_open_data=Module[\"_gme_open_data\"]=wasmExports[\"wa\"])(a0,a1,a2,a3);var _gme_delete=Module[\"_gme_delete\"]=a0=>(_gme_delete=Module[\"_gme_delete\"]=wasmExports[\"xa\"])(a0);var _gme_track_count=Module[\"_gme_track_count\"]=a0=>(_gme_track_count=Module[\"_gme_track_count\"]=wasmExports[\"ya\"])(a0);var _gme_track_info=Module[\"_gme_track_info\"]=(a0,a1,a2)=>(_gme_track_info=Module[\"_gme_track_info\"]=wasmExports[\"za\"])(a0,a1,a2);var _gme_start_track=Module[\"_gme_start_track\"]=(a0,a1)=>(_gme_start_track=Module[\"_gme_start_track\"]=wasmExports[\"Aa\"])(a0,a1);var _gme_play=Module[\"_gme_play\"]=(a0,a1,a2)=>(_gme_play=Module[\"_gme_play\"]=wasmExports[\"Ba\"])(a0,a1,a2);var _gme_set_fade=Module[\"_gme_set_fade\"]=(a0,a1,a2)=>(_gme_set_fade=Module[\"_gme_set_fade\"]=wasmExports[\"Ca\"])(a0,a1,a2);var _gme_track_ended=Module[\"_gme_track_ended\"]=a0=>(_gme_track_ended=Module[\"_gme_track_ended\"]=wasmExports[\"Da\"])(a0);var _gme_tell_scaled=Module[\"_gme_tell_scaled\"]=a0=>(_gme_tell_scaled=Module[\"_gme_tell_scaled\"]=wasmExports[\"Ea\"])(a0);var _gme_seek_scaled=Module[\"_gme_seek_scaled\"]=(a0,a1)=>(_gme_seek_scaled=Module[\"_gme_seek_scaled\"]=wasmExports[\"Fa\"])(a0,a1);var _gme_voice_count=Module[\"_gme_voice_count\"]=a0=>(_gme_voice_count=Module[\"_gme_voice_count\"]=wasmExports[\"Ga\"])(a0);var _gme_ignore_silence=Module[\"_gme_ignore_silence\"]=(a0,a1)=>(_gme_ignore_silence=Module[\"_gme_ignore_silence\"]=wasmExports[\"Ha\"])(a0,a1);var _gme_set_tempo=Module[\"_gme_set_tempo\"]=(a0,a1)=>(_gme_set_tempo=Module[\"_gme_set_tempo\"]=wasmExports[\"Ia\"])(a0,a1);var _gme_mute_voices=Module[\"_gme_mute_voices\"]=(a0,a1)=>(_gme_mute_voices=Module[\"_gme_mute_voices\"]=wasmExports[\"Ja\"])(a0,a1);var _gme_voice_name=Module[\"_gme_voice_name\"]=(a0,a1)=>(_gme_voice_name=Module[\"_gme_voice_name\"]=wasmExports[\"Ka\"])(a0,a1);var _gme_get_chip_state=Module[\"_gme_get_chip_state\"]=a0=>(_gme_get_chip_state=Module[\"_gme_get_chip_state\"]=wasmExports[\"La\"])(a0);var _xmp_start_player=Module[\"_xmp_start_player\"]=(a0,a1,a2)=>(_xmp_start_player=Module[\"_xmp_start_player\"]=wasmExports[\"Ma\"])(a0,a1,a2);var _xmp_end_player=Module[\"_xmp_end_player\"]=a0=>(_xmp_end_player=Module[\"_xmp_end_player\"]=wasmExports[\"Na\"])(a0);var _xmp_play_buffer=Module[\"_xmp_play_buffer\"]=(a0,a1,a2,a3)=>(_xmp_play_buffer=Module[\"_xmp_play_buffer\"]=wasmExports[\"Oa\"])(a0,a1,a2,a3);var _xmp_get_frame_info=Module[\"_xmp_get_frame_info\"]=(a0,a1)=>(_xmp_get_frame_info=Module[\"_xmp_get_frame_info\"]=wasmExports[\"Pa\"])(a0,a1);var _xmp_get_module_info=Module[\"_xmp_get_module_info\"]=(a0,a1)=>(_xmp_get_module_info=Module[\"_xmp_get_module_info\"]=wasmExports[\"Qa\"])(a0,a1);var _xmp_create_context=Module[\"_xmp_create_context\"]=()=>(_xmp_create_context=Module[\"_xmp_create_context\"]=wasmExports[\"Ra\"])();var _xmp_stop_module=Module[\"_xmp_stop_module\"]=a0=>(_xmp_stop_module=Module[\"_xmp_stop_module\"]=wasmExports[\"Sa\"])(a0);var _xmp_restart_module=Module[\"_xmp_restart_module\"]=a0=>(_xmp_restart_module=Module[\"_xmp_restart_module\"]=wasmExports[\"Ta\"])(a0);var _xmp_seek_time=Module[\"_xmp_seek_time\"]=(a0,a1)=>(_xmp_seek_time=Module[\"_xmp_seek_time\"]=wasmExports[\"Ua\"])(a0,a1);var _xmp_channel_mute=Module[\"_xmp_channel_mute\"]=(a0,a1,a2)=>(_xmp_channel_mute=Module[\"_xmp_channel_mute\"]=wasmExports[\"Va\"])(a0,a1,a2);var _xmp_get_player=Module[\"_xmp_get_player\"]=(a0,a1)=>(_xmp_get_player=Module[\"_xmp_get_player\"]=wasmExports[\"Wa\"])(a0,a1);var _xmp_get_format_list=Module[\"_xmp_get_format_list\"]=()=>(_xmp_get_format_list=Module[\"_xmp_get_format_list\"]=wasmExports[\"Xa\"])();var _xmp_inject_event=Module[\"_xmp_inject_event\"]=(a0,a1,a2)=>(_xmp_inject_event=Module[\"_xmp_inject_event\"]=wasmExports[\"Ya\"])(a0,a1,a2);var _xmp_load_module_from_memory=Module[\"_xmp_load_module_from_memory\"]=(a0,a1,a2)=>(_xmp_load_module_from_memory=Module[\"_xmp_load_module_from_memory\"]=wasmExports[\"Za\"])(a0,a1,a2);var _lvgm_init=Module[\"_lvgm_init\"]=a0=>(_lvgm_init=Module[\"_lvgm_init\"]=wasmExports[\"_a\"])(a0);var _lvgm_load_data=Module[\"_lvgm_load_data\"]=(a0,a1,a2)=>(_lvgm_load_data=Module[\"_lvgm_load_data\"]=wasmExports[\"$a\"])(a0,a1,a2);var _lvgm_get_position_ms=Module[\"_lvgm_get_position_ms\"]=a0=>(_lvgm_get_position_ms=Module[\"_lvgm_get_position_ms\"]=wasmExports[\"ab\"])(a0);var _lvgm_get_duration_ms=Module[\"_lvgm_get_duration_ms\"]=a0=>(_lvgm_get_duration_ms=Module[\"_lvgm_get_duration_ms\"]=wasmExports[\"bb\"])(a0);var _lvgm_start=Module[\"_lvgm_start\"]=a0=>(_lvgm_start=Module[\"_lvgm_start\"]=wasmExports[\"cb\"])(a0);var _lvgm_render=Module[\"_lvgm_render\"]=(a0,a1,a2)=>(_lvgm_render=Module[\"_lvgm_render\"]=wasmExports[\"db\"])(a0,a1,a2);var _lvgm_stop=Module[\"_lvgm_stop\"]=a0=>(_lvgm_stop=Module[\"_lvgm_stop\"]=wasmExports[\"eb\"])(a0);var _lvgm_reset=Module[\"_lvgm_reset\"]=a0=>(_lvgm_reset=Module[\"_lvgm_reset\"]=wasmExports[\"fb\"])(a0);var _lvgm_set_playback_speed=Module[\"_lvgm_set_playback_speed\"]=(a0,a1)=>(_lvgm_set_playback_speed=Module[\"_lvgm_set_playback_speed\"]=wasmExports[\"gb\"])(a0,a1);var _lvgm_get_playback_speed=Module[\"_lvgm_get_playback_speed\"]=a0=>(_lvgm_get_playback_speed=Module[\"_lvgm_get_playback_speed\"]=wasmExports[\"hb\"])(a0);var _lvgm_seek_ms=Module[\"_lvgm_seek_ms\"]=(a0,a1)=>(_lvgm_seek_ms=Module[\"_lvgm_seek_ms\"]=wasmExports[\"ib\"])(a0,a1);var _lvgm_get_metadata=Module[\"_lvgm_get_metadata\"]=a0=>(_lvgm_get_metadata=Module[\"_lvgm_get_metadata\"]=wasmExports[\"jb\"])(a0);var _lvgm_get_voice_count=Module[\"_lvgm_get_voice_count\"]=a0=>(_lvgm_get_voice_count=Module[\"_lvgm_get_voice_count\"]=wasmExports[\"kb\"])(a0);var _lvgm_get_voice_name=Module[\"_lvgm_get_voice_name\"]=(a0,a1)=>(_lvgm_get_voice_name=Module[\"_lvgm_get_voice_name\"]=wasmExports[\"lb\"])(a0,a1);var _lvgm_get_chip_state=Module[\"_lvgm_get_chip_state\"]=a0=>(_lvgm_get_chip_state=Module[\"_lvgm_get_chip_state\"]=wasmExports[\"mb\"])(a0);var _lvgm_set_voice_mask=Module[\"_lvgm_set_voice_mask\"]=(a0,a1)=>(_lvgm_set_voice_mask=Module[\"_lvgm_set_voice_mask\"]=wasmExports[\"nb\"])(a0,a1);var _lvgm_get_voice_mask=Module[\"_lvgm_get_voice_mask\"]=a0=>(_lvgm_get_voice_mask=Module[\"_lvgm_get_voice_mask\"]=wasmExports[\"ob\"])(a0);var _fluid_synth_all_sounds_off=Module[\"_fluid_synth_all_sounds_off\"]=(a0,a1)=>(_fluid_synth_all_sounds_off=Module[\"_fluid_synth_all_sounds_off\"]=wasmExports[\"qb\"])(a0,a1);var _fluid_synth_set_chorus=Module[\"_fluid_synth_set_chorus\"]=(a0,a1,a2,a3,a4,a5)=>(_fluid_synth_set_chorus=Module[\"_fluid_synth_set_chorus\"]=wasmExports[\"rb\"])(a0,a1,a2,a3,a4,a5);var _fluid_synth_set_chorus_on=Module[\"_fluid_synth_set_chorus_on\"]=(a0,a1)=>(_fluid_synth_set_chorus_on=Module[\"_fluid_synth_set_chorus_on\"]=wasmExports[\"sb\"])(a0,a1);var _adl_getNumChips=Module[\"_adl_getNumChips\"]=a0=>(_adl_getNumChips=Module[\"_adl_getNumChips\"]=wasmExports[\"tb\"])(a0);var _adl_getBanksCount=Module[\"_adl_getBanksCount\"]=()=>(_adl_getBanksCount=Module[\"_adl_getBanksCount\"]=wasmExports[\"ub\"])();var _adl_getBankNames=Module[\"_adl_getBankNames\"]=()=>(_adl_getBankNames=Module[\"_adl_getBankNames\"]=wasmExports[\"vb\"])();var _adl_generate=Module[\"_adl_generate\"]=(a0,a1,a2)=>(_adl_generate=Module[\"_adl_generate\"]=wasmExports[\"wb\"])(a0,a1,a2);var _v2m_open=Module[\"_v2m_open\"]=(a0,a1,a2)=>(_v2m_open=Module[\"_v2m_open\"]=wasmExports[\"xb\"])(a0,a1,a2);var _v2m_write_audio=Module[\"_v2m_write_audio\"]=(a0,a1)=>(_v2m_write_audio=Module[\"_v2m_write_audio\"]=wasmExports[\"yb\"])(a0,a1);var _v2m_get_position_ms=Module[\"_v2m_get_position_ms\"]=()=>(_v2m_get_position_ms=Module[\"_v2m_get_position_ms\"]=wasmExports[\"zb\"])();var _v2m_get_duration_ms=Module[\"_v2m_get_duration_ms\"]=()=>(_v2m_get_duration_ms=Module[\"_v2m_get_duration_ms\"]=wasmExports[\"Ab\"])();var _v2m_seek_ms=Module[\"_v2m_seek_ms\"]=a0=>(_v2m_seek_ms=Module[\"_v2m_seek_ms\"]=wasmExports[\"Bb\"])(a0);var _v2m_set_speed=Module[\"_v2m_set_speed\"]=a0=>(_v2m_set_speed=Module[\"_v2m_set_speed\"]=wasmExports[\"Cb\"])(a0);var _v2m_close=Module[\"_v2m_close\"]=()=>(_v2m_close=Module[\"_v2m_close\"]=wasmExports[\"Db\"])();var ___errno_location=()=>(___errno_location=wasmExports[\"Eb\"])();var _n64_load_file=Module[\"_n64_load_file\"]=(a0,a1,a2,a3)=>(_n64_load_file=Module[\"_n64_load_file\"]=wasmExports[\"Fb\"])(a0,a1,a2,a3);var _n64_get_duration_ms=Module[\"_n64_get_duration_ms\"]=()=>(_n64_get_duration_ms=Module[\"_n64_get_duration_ms\"]=wasmExports[\"Gb\"])();var _n64_get_position_ms=Module[\"_n64_get_position_ms\"]=()=>(_n64_get_position_ms=Module[\"_n64_get_position_ms\"]=wasmExports[\"Hb\"])();var _n64_render_audio=Module[\"_n64_render_audio\"]=(a0,a1)=>(_n64_render_audio=Module[\"_n64_render_audio\"]=wasmExports[\"Ib\"])(a0,a1);var _n64_seek_ms=Module[\"_n64_seek_ms\"]=a0=>(_n64_seek_ms=Module[\"_n64_seek_ms\"]=wasmExports[\"Jb\"])(a0);var _n64_shutdown=Module[\"_n64_shutdown\"]=()=>(_n64_shutdown=Module[\"_n64_shutdown\"]=wasmExports[\"Kb\"])();var _mdx_open=Module[\"_mdx_open\"]=(a0,a1,a2)=>(_mdx_open=Module[\"_mdx_open\"]=wasmExports[\"Lb\"])(a0,a1,a2);var _mdx_set_dir=Module[\"_mdx_set_dir\"]=(a0,a1)=>(_mdx_set_dir=Module[\"_mdx_set_dir\"]=wasmExports[\"Mb\"])(a0,a1);var _mdx_set_rate=Module[\"_mdx_set_rate\"]=a0=>(_mdx_set_rate=Module[\"_mdx_set_rate\"]=wasmExports[\"Nb\"])(a0);var _mdx_set_max_loop=Module[\"_mdx_set_max_loop\"]=(a0,a1)=>(_mdx_set_max_loop=Module[\"_mdx_set_max_loop\"]=wasmExports[\"Ob\"])(a0,a1);var _mdx_next_frame=Module[\"_mdx_next_frame\"]=a0=>(_mdx_next_frame=Module[\"_mdx_next_frame\"]=wasmExports[\"Pb\"])(a0);var _mdx_frame_length=Module[\"_mdx_frame_length\"]=a0=>(_mdx_frame_length=Module[\"_mdx_frame_length\"]=wasmExports[\"Qb\"])(a0);var _mdx_calc_sample=Module[\"_mdx_calc_sample\"]=(a0,a1,a2)=>(_mdx_calc_sample=Module[\"_mdx_calc_sample\"]=wasmExports[\"Rb\"])(a0,a1,a2);var _mdx_calc_log=Module[\"_mdx_calc_log\"]=(a0,a1,a2)=>(_mdx_calc_log=Module[\"_mdx_calc_log\"]=wasmExports[\"Sb\"])(a0,a1,a2);var _mdx_get_title=Module[\"_mdx_get_title\"]=(a0,a1)=>(_mdx_get_title=Module[\"_mdx_get_title\"]=wasmExports[\"Tb\"])(a0,a1);var _mdx_get_length=Module[\"_mdx_get_length\"]=a0=>(_mdx_get_length=Module[\"_mdx_get_length\"]=wasmExports[\"Ub\"])(a0);var _mdx_get_tracks=Module[\"_mdx_get_tracks\"]=a0=>(_mdx_get_tracks=Module[\"_mdx_get_tracks\"]=wasmExports[\"Vb\"])(a0);var _mdx_get_current_notes=Module[\"_mdx_get_current_notes\"]=(a0,a1,a2)=>(_mdx_get_current_notes=Module[\"_mdx_get_current_notes\"]=wasmExports[\"Wb\"])(a0,a1,a2);var _mdx_close=Module[\"_mdx_close\"]=a0=>(_mdx_close=Module[\"_mdx_close\"]=wasmExports[\"Xb\"])(a0);var _mdx_create_context=Module[\"_mdx_create_context\"]=()=>(_mdx_create_context=Module[\"_mdx_create_context\"]=wasmExports[\"Yb\"])();var _mdx_get_position_ms=Module[\"_mdx_get_position_ms\"]=a0=>(_mdx_get_position_ms=Module[\"_mdx_get_position_ms\"]=wasmExports[\"Zb\"])(a0);var _mdx_set_speed=Module[\"_mdx_set_speed\"]=(a0,a1)=>(_mdx_set_speed=Module[\"_mdx_set_speed\"]=wasmExports[\"_b\"])(a0,a1);var _mdx_set_position_ms=Module[\"_mdx_set_position_ms\"]=(a0,a1)=>(_mdx_set_position_ms=Module[\"_mdx_set_position_ms\"]=wasmExports[\"$b\"])(a0,a1);var _mdx_get_pdx_filename=Module[\"_mdx_get_pdx_filename\"]=(a0,a1)=>(_mdx_get_pdx_filename=Module[\"_mdx_get_pdx_filename\"]=wasmExports[\"ac\"])(a0,a1);var _mdx_get_track_name=Module[\"_mdx_get_track_name\"]=(a0,a1)=>(_mdx_get_track_name=Module[\"_mdx_get_track_name\"]=wasmExports[\"bc\"])(a0,a1);var _mdx_get_track_mask=Module[\"_mdx_get_track_mask\"]=a0=>(_mdx_get_track_mask=Module[\"_mdx_get_track_mask\"]=wasmExports[\"cc\"])(a0);var _mdx_set_track_mask=Module[\"_mdx_set_track_mask\"]=(a0,a1)=>(_mdx_set_track_mask=Module[\"_mdx_set_track_mask\"]=wasmExports[\"dc\"])(a0,a1);var _emscripten_builtin_memalign=(a0,a1)=>(_emscripten_builtin_memalign=wasmExports[\"ec\"])(a0,a1);var stackSave=()=>(stackSave=wasmExports[\"fc\"])();var stackRestore=a0=>(stackRestore=wasmExports[\"gc\"])(a0);var stackAlloc=a0=>(stackAlloc=wasmExports[\"hc\"])(a0);var ___cxa_increment_exception_refcount=a0=>(___cxa_increment_exception_refcount=wasmExports[\"__cxa_increment_exception_refcount\"])(a0);var ___cxa_is_pointer_type=a0=>(___cxa_is_pointer_type=wasmExports[\"ic\"])(a0);var _xmp_version=Module[\"_xmp_version\"]=510632;var _xmp_vercode=Module[\"_xmp_vercode\"]=87556;Module[\"ccall\"]=ccall;Module[\"setValue\"]=setValue;Module[\"getValue\"]=getValue;Module[\"UTF8ToString\"]=UTF8ToString;Module[\"FS\"]=FS;Module[\"ALLOC_NORMAL\"]=ALLOC_NORMAL;var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();\n\n\n  return moduleArg.ready\n}\n\n);\n})();\nexport default CHIP_CORE;\n","export default {\n  apiKey: \"AIzaSyCgIxMCZDERKhgnKyr5FIEJVrKlYNbIA4k\",\n  authDomain: \"rawlrocks.firebaseapp.com\",\n  projectId: \"rawlrocks\",\n  storageBucket: \"rawlrocks.appspot.com\",\n  messagingSenderId: \"1068304431235\",\n  appId: \"1:1068304431235:web:7547aa7d9116376ccc03b6\",\n  measurementId: \"G-RMF5LJLXDG\",\n};\n","import { doc, getDoc, getFirestore } from \"firebase/firestore/lite\";\nimport keySlugMapping from \"../keySlugMapping\";\nimport { FirestoreMidiDocument, FirestoreMidiIndex } from \"../types/firestore\";\n\ntype HandleSongClickDependencies = {\n  setState: (state: any, callback?: () => void) => void;\n  loadMidi: (midiBlob: Blob, callback?: () => void) => void;\n  state: {\n    analyses: any;\n  };\n};\n\nexport const handleSongClick = async (\n  deps: HandleSongClickDependencies,\n  slug: string,\n  isHiddenRoute: boolean = false,\n): Promise<void> => {\n  const firestore = getFirestore();\n  try {\n    console.log(\"Fetching index document\");\n    const indexDoc = await getDoc(doc(firestore, \"indexes\", \"midis\"));\n    const indexData = indexDoc.data() as FirestoreMidiIndex;\n    console.log(\"Index document data:\", indexData);\n\n    if (!indexData) {\n      console.error(\"Index document not found\");\n      return;\n    }\n\n    let analysisKey;\n    let fSlug = slug;\n    if (isHiddenRoute) {\n      fSlug = keySlugMapping[slug] || slug;\n      analysisKey = `f/${fSlug}`;\n    } else {\n      analysisKey = `f/${slug}`;\n    }\n\n    console.log(\"Searching for MIDI info with slug:\", slug);\n    let midiInfo = indexData.midis.find(\n      (midi) => midi.slug === slug || midi.id === slug,\n    );\n    console.log(\"Found MIDI info:\", midiInfo);\n\n    if (!midiInfo) {\n      console.error(`No MIDI found for slug: ${slug}`);\n      return;\n    }\n\n    console.log(\"Fetching MIDI document with ID:\", midiInfo.id);\n    const midiDoc = await getDoc(doc(firestore, \"midis\", midiInfo.id));\n    if (midiDoc.exists()) {\n      const midiData = midiDoc.data() as FirestoreMidiDocument;\n      console.log(\"MIDI document data:\", midiData);\n\n      // Convert Firestore Bytes to Blob\n      const midiBlob = new Blob([midiData.blob.toUint8Array()], {\n        type: \"audio/midi\",\n      });\n      console.log(\"Created MIDI Blob:\", midiBlob);\n\n      const currentMidi = {\n        id: midiInfo.id,\n        title: midiData.title,\n        slug: fSlug,\n        sourceUrl: midiData.url,\n        isHiddenRoute: isHiddenRoute,\n      };\n      const savedAnalysis = deps.state.analyses[analysisKey];\n\n      return new Promise<void>((resolve) => {\n        deps.setState(\n          {\n            currentMidi,\n            rawlProps: {\n              savedAnalysis,\n              isHiddenRoute,\n            },\n          },\n          () => {\n            console.log(\"State updated with currentMidi:\", currentMidi);\n            console.log(\"State updated with rawlProps\");\n            // Create a promise that resolves when playback starts\n            const playbackPromise = new Promise<void>((playbackResolve) => {\n              deps.loadMidi(midiBlob, playbackResolve);\n            });\n            // Wait for playback to start before resolving the main promise\n            playbackPromise.then(() => {\n              resolve();\n            });\n          },\n        );\n      });\n    } else {\n      console.error(\"No such document!\");\n    }\n  } catch (error) {\n    console.error(\"Error loading MIDI:\", error);\n    throw error; // Re-throw to trigger the finally block in the click handler\n  }\n};\n","import MIDIEvents, { EVENT_MIDI, EVENT_MIDI_CONTROLLER } from \"midievents\";\nimport MIDIFile from \"midifile\";\n\nconst CC_102_TRACK_LOOP_START = 102;\nconst CC_103_TRACK_LOOP_END = 103;\nconst CC_123_ALL_NOTES_OFF = 123;\n\nclass EventIterator {\n  constructor(events) {\n    this.events = events;\n    this.curEvent = events[0];\n    this.pos = 0;\n    this.loopStartPos = null;\n    this.elapsedLoops = 0;\n    this.curTick = 0;\n  }\n\n  loop() {\n    // Sanity check\n    if (this.curTick < 1000000 && this.elapsedLoops < 1000) {\n      this.pos = this.loopStartPos;\n      console.debug(\n        \"Channel %d looped at tick %d (loop %d completed)\",\n        this.curEvent.channel,\n        this.curTick,\n        this.elapsedLoops,\n      );\n      this.elapsedLoops++;\n    }\n  }\n\n  next() {\n    const event = this.events[this.pos++];\n    if (!event) return null;\n\n    this.curTick += event.delta;\n\n    if (event.type === EVENT_MIDI && event.subtype === EVENT_MIDI_CONTROLLER) {\n      if (event.param1 === CC_102_TRACK_LOOP_START) {\n        // console.log('loop start ch %d id %d', event.channel, event.param2);\n        this.loopStartPos = this.pos;\n      }\n      if (event.param1 === CC_103_TRACK_LOOP_END) {\n        // console.log('loop end  ch %d id %d', event.channel, event.param2);\n        this.loop();\n      }\n    }\n\n    // Return a copy because track consolidation will mutate the events.\n    return { ...event };\n  }\n}\n\n// Monkey patch MIDIFile class.\nMIDIFile.prototype.getLoopedEvents = function (tracks, loopCount = 1) {\n  let event;\n  let playTime = 0;\n  const combinedEvents = [];\n  const format = this.header.getFormat();\n  let tickResolution = this.header.getTickResolution();\n  let i;\n  let j;\n  let smallestDelta;\n  let loopCountReached = false;\n  const type = null;\n  const subtype = null;\n\n  // Reading events\n  // if the read is sequential\n  if (1 !== format || 1 === this.tracks.length) {\n    for (i = 0, j = this.tracks.length; i < j; i++) {\n      // reset playtime if format is 2\n      playTime = 2 === format && playTime ? playTime : 0;\n      const eventIterator = new EventIterator(tracks[i]);\n      // loooping through events\n      event = eventIterator.next();\n      while (event) {\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n        }\n        // push the asked events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          combinedEvents.push(event);\n        }\n        event = eventIterator.next();\n      }\n    }\n    // the read is concurrent\n  } else {\n    smallestDelta = -1;\n\n    const trackIterators = [];\n\n    // Creating iterators\n    for (i = 0, j = tracks.length; i < j; i++) {\n      printTrack(i, tracks[i]);\n      trackIterators[i] = new EventIterator(tracks[i]);\n      trackIterators[i].curEvent = trackIterators[i].next();\n    }\n    // Filling events\n    do {\n      smallestDelta = -1;\n      // Find the shortest event\n      for (i = 0, j = trackIterators.length; i < j; i++) {\n        if (trackIterators[i].curEvent) {\n          if (\n            -1 === smallestDelta ||\n            trackIterators[i].curEvent.delta <\n              trackIterators[smallestDelta].curEvent.delta\n          ) {\n            smallestDelta = i;\n          } else if (\n            // Prioritize tracks that haven't caught up with the loop count\n            trackIterators[i].curEvent.delta ===\n              trackIterators[smallestDelta].curEvent.delta &&\n            trackIterators[i].elapsedLoops <\n              trackIterators[smallestDelta].elapsedLoops\n          ) {\n            smallestDelta = i;\n          }\n        }\n      }\n      if (-1 !== smallestDelta) {\n        // Subtract delta of previous events\n        for (i = 0, j = trackIterators.length; i < j; i++) {\n          if (i !== smallestDelta && trackIterators[i].curEvent) {\n            trackIterators[i].curEvent.delta -=\n              trackIterators[smallestDelta].curEvent.delta;\n          }\n        }\n        // filling values\n        event = trackIterators[smallestDelta].curEvent;\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n        }\n        // push midi events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          event.track = smallestDelta;\n          combinedEvents.push(event);\n        }\n        // get next event\n        trackIterators[smallestDelta].curEvent =\n          trackIterators[smallestDelta].next();\n\n        // check elapsed loops\n        loopCountReached = trackIterators.every(\n          (it) => it.curEvent == null || it.elapsedLoops >= loopCount,\n        );\n      }\n    } while (-1 !== smallestDelta && loopCountReached === false);\n\n    for (let i = 0; i < trackIterators.length; i++) {\n      if (trackIterators[i]?.curEvent) {\n        combinedEvents.push(\n          allNotesOff(i, trackIterators[i].curEvent.channel, playTime),\n        );\n      }\n    }\n  }\n  console.debug(combinedEvents);\n  return combinedEvents;\n};\n\n// Monkey patch MIDIFile class - for Chiptheory.\n// Probably there's no value in doing this filtering here - all these\n// events are available in noteParsers/midi.ts anyways\nMIDIFile.prototype.getTimeEvents = function (tracks) {\n  let event;\n  let playTime = 0;\n  const combinedEvents = [];\n  const format = this.header.getFormat();\n  let tickResolution = this.header.getTickResolution();\n  let i;\n  let j;\n  let smallestDelta;\n  // let loopCountReached = false;\n  const type = null;\n  const subtype = null;\n  const timeEvents = [];\n  let maxPlayTime = 0;\n  let tick = 0;\n\n  // Reading events\n  // if the read is sequential\n  console.log(\"MIDI format\", format);\n  if (1 !== format || 1 === this.tracks.length) {\n    for (i = 0, j = this.tracks.length; i < j; i++) {\n      // reset playtime if format is 2\n      playTime = 2 === format && playTime ? playTime : 0;\n      const eventIterator = new EventIterator(tracks[i]);\n      // loooping through events\n      event = eventIterator.next();\n      while (event) {\n        tick += event.delta ?? 0;\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            timeEvents.push({\n              type: \"bpm\",\n              bpm: event.tempoBPM,\n              playTime,\n              tick,\n            });\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n          if (event.subtype === MIDIEvents.EVENT_META_TIME_SIGNATURE) {\n            timeEvents.push({\n              type: \"timeSignature\",\n              numerator: event.param1,\n              denominatorPower: event.param2,\n              playTime,\n              tick,\n            });\n          }\n        }\n        // push the asked events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          event.tick = tick;\n          combinedEvents.push(event);\n        }\n        event = eventIterator.next();\n      }\n    }\n    // the read is concurrent\n  } else {\n    smallestDelta = -1;\n\n    const trackIterators = [];\n\n    // Creating iterators\n    for (i = 0, j = tracks.length; i < j; i++) {\n      printTrack(i, tracks[i]);\n      trackIterators[i] = new EventIterator(tracks[i]);\n      trackIterators[i].curEvent = trackIterators[i].next();\n    }\n    // Filling events\n    do {\n      smallestDelta = -1;\n      // Find the shortest event\n      for (i = 0, j = trackIterators.length; i < j; i++) {\n        if (trackIterators[i].curEvent) {\n          if (\n            -1 === smallestDelta ||\n            trackIterators[i].curEvent.delta <\n              trackIterators[smallestDelta].curEvent.delta\n          ) {\n            smallestDelta = i;\n          } else if (\n            // Prioritize tracks that haven't caught up with the loop count\n            trackIterators[i].curEvent.delta ===\n              trackIterators[smallestDelta].curEvent.delta &&\n            trackIterators[i].elapsedLoops <\n              trackIterators[smallestDelta].elapsedLoops\n          ) {\n            smallestDelta = i;\n          }\n        }\n      }\n      if (-1 !== smallestDelta) {\n        // Subtract delta of previous events\n        for (i = 0, j = trackIterators.length; i < j; i++) {\n          if (i !== smallestDelta && trackIterators[i].curEvent) {\n            trackIterators[i].curEvent.delta -=\n              trackIterators[smallestDelta].curEvent.delta;\n          }\n        }\n        // filling values\n        event = trackIterators[smallestDelta].curEvent;\n        tick += event.delta;\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            timeEvents.push({\n              type: \"bpm\",\n              bpm: event.tempoBPM,\n              playTime,\n              tick,\n            });\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n          if (event.subtype === MIDIEvents.EVENT_META_TIME_SIGNATURE) {\n            timeEvents.push({\n              type: \"timeSignature\",\n              numerator: event.param1,\n              denominatorPower: event.param2,\n              playTime,\n              tick,\n            });\n          }\n        }\n        // push midi events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          event.tick = tick;\n          event.track = smallestDelta;\n          combinedEvents.push(event);\n        }\n        // get next event\n        trackIterators[smallestDelta].curEvent =\n          trackIterators[smallestDelta].next();\n\n        // check elapsed loops\n        // loopCountReached = trackIterators.every(\n        //   (it) => it.curEvent == null || it.elapsedLoops >= loopCount,\n        // );\n      }\n    } while (-1 !== smallestDelta);\n\n    for (let i = 0; i < trackIterators.length; i++) {\n      if (trackIterators[i]?.curEvent) {\n        combinedEvents.push(\n          allNotesOff(i, trackIterators[i].curEvent.channel, playTime),\n        );\n      }\n    }\n  }\n  combinedEvents.forEach(({ playTime }) => {\n    if (playTime) maxPlayTime = Math.max(playTime, maxPlayTime);\n  });\n  timeEvents.push({\n    type: \"bpm\",\n    bpm: 120,\n    playTime: maxPlayTime,\n    tick: Math.max(...combinedEvents.map(({ tick }) => tick ?? 0)),\n  });\n  return timeEvents.sort((a, b) => a.playTime - b.playTime);\n};\n\nfunction isLoopStart(event) {\n  return (\n    event.param1 === CC_102_TRACK_LOOP_START &&\n    event.subtype === EVENT_MIDI_CONTROLLER &&\n    event.type === EVENT_MIDI\n  );\n}\n\nfunction isLoopEnd(event) {\n  return (\n    event.param1 === CC_103_TRACK_LOOP_END &&\n    event.subtype === EVENT_MIDI_CONTROLLER &&\n    event.type === EVENT_MIDI\n  );\n}\n\nfunction isAllNotesOff(event) {\n  return (\n    event.param1 === CC_123_ALL_NOTES_OFF &&\n    event.subtype === EVENT_MIDI_CONTROLLER &&\n    event.type === EVENT_MIDI\n  );\n}\n\nfunction allNotesOff(track, channel, playTime) {\n  return {\n    channel: channel,\n    track: track,\n    playTime: playTime,\n    type: EVENT_MIDI,\n    subtype: EVENT_MIDI_CONTROLLER,\n    param1: CC_123_ALL_NOTES_OFF,\n    delta: 0,\n  };\n}\n\nfunction printTrack(t, events) {\n  const ticksPerChar = 1000;\n  let charArr = [];\n  let tick = 0;\n  for (let i = 0; i < events.length; i++) {\n    const event = events[i];\n    tick += event.delta;\n    const j = Math.floor(tick / ticksPerChar);\n    if (isAllNotesOff(event)) {\n      charArr[j] = \"X\";\n      tick += ticksPerChar; // force next char so this doesn't get overwritten\n    } else if (isLoopStart(event)) {\n      charArr[j] = \">\";\n    } else if (isLoopEnd(event)) {\n      charArr[j] = \"<\";\n    } else if (charArr[j] == null) {\n      charArr[j] = \"\";\n    } else if (charArr[j] === \"\") {\n      charArr[j] = \"-\";\n    } else if (charArr[j] === \"-\") {\n      charArr[j] = \"=\";\n    }\n  }\n  t = (\"\" + t).padStart(2, \"0\");\n  const viz = [];\n  for (let k = 0; k < charArr.length; k++) {\n    viz[k] = charArr[k] || \" \";\n  }\n  console.debug(`Track ${t} |${viz.join(\"\")}|`);\n}\n","export default function promisify(xhr) {\n  const oldSend = xhr.send;\n  xhr.send = function () {\n    const xhrArguments = arguments;\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status < 200 || xhr.status >= 300) {\n          reject({\n            status: xhr.status,\n            statusText: xhr.statusText,\n          });\n        } else {\n          resolve(xhr);\n        }\n      };\n      xhr.onerror = function () {\n        reject({\n          status: xhr.status,\n          statusText: xhr.statusText,\n        });\n      };\n      try {\n        oldSend.apply(xhr, xhrArguments);\n      } catch (e) {}\n    });\n  };\n  return xhr;\n}\n","import React from \"react\";\n\nfunction Alert(props) {\n  const { handlePlayerError, playerError, showPlayerError } = props;\n\n  return (\n    <div hidden={!showPlayerError} className=\"error-box-outer\">\n      <div className=\"error-box\">\n        <div className=\"message\">Error: {playerError}</div>\n        <button onClick={() => handlePlayerError(null)}>Close</button>\n      </div>\n    </div>\n  );\n}\n\nexport default Alert;\n","import autoBindReact from \"auto-bind/react\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport Slider from \"./Slider\";\n\nconst TimeSliderContainer = styled.div`\n  flex-grow: 1;\n  margin-left: var(--charW2);\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  width: 95%;\n`;\n\nconst TimeLabel = styled.div`\n  margin-right: 15px;\n`;\n\nconst DurationLabel = styled.div`\n  margin-left: 20px;\n`;\n\n//  46 ms = 2048/44100 sec or 21.7 fps\n// 400 ms = 2.5 fps\nconst UPDATE_INTERVAL_MS = 100;\nconst pad = (n) => (n < 10 ? \"0\" + n : n);\n\nexport default class TimeSlider extends React.Component {\n  constructor(props) {\n    super(props);\n    autoBindReact(this);\n\n    this.state = {\n      draggedSongPositionMs: -1,\n      currentSongPositionMs: 0,\n    };\n    this.timer = null;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.paused === true && this.props.paused === false) {\n      this.timer = setInterval(() => {\n        const { getCurrentPositionMs, currentSongDurationMs } = this.props;\n        this.setState({\n          currentSongPositionMs: Math.min(\n            getCurrentPositionMs(),\n            currentSongDurationMs,\n          ),\n        });\n      }, UPDATE_INTERVAL_MS);\n    } else if (prevProps.paused === false && this.props.paused === true) {\n      clearInterval(this.timer);\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  getSongPos() {\n    return this.state.currentSongPositionMs / this.props.currentSongDurationMs;\n  }\n\n  getTimeLabel() {\n    const val =\n      this.state.draggedSongPositionMs >= 0\n        ? this.state.draggedSongPositionMs\n        : this.state.currentSongPositionMs;\n    return this.getTime(val);\n  }\n\n  getTime(ms) {\n    const sign = ms < 0 ? \"-\" : \"\";\n    ms = Math.abs(ms);\n    const min = Math.floor(ms / 60000);\n    const sec = (Math.floor((ms % 60000) / 100) / 10).toFixed(0);\n    return `${sign}${min}:${pad(sec)}`;\n  }\n\n  handlePositionDrag(event) {\n    const pos = event.target ? event.target.value : event;\n    // Update current time position label\n    this.setState({\n      draggedSongPositionMs: pos * this.props.currentSongDurationMs,\n    });\n  }\n\n  handlePositionDrop(event) {\n    this.setState({\n      draggedSongPositionMs: -1,\n      currentSongPositionMs: this.state.draggedSongPositionMs,\n    });\n    this.props.onChange(event);\n  }\n\n  render() {\n    return (\n      <TimeSliderContainer>\n        <TimeLabel>{this.getTimeLabel()}</TimeLabel>\n        <Slider\n          pos={this.getSongPos()}\n          onDrag={this.handlePositionDrag}\n          onChange={this.handlePositionDrop}\n        />\n        <DurationLabel id=\"duration-label\">\n          {this.getTime(this.props.currentSongDurationMs)}\n        </DurationLabel>\n      </TimeSliderContainer>\n    );\n  }\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { baseLinkStyles } from \"./AppHeader\";\n\nconst HeaderDiv = styled.div`\n  ${baseLinkStyles}\n  color: #888\n`;\n\nconst SignIn = ({\n  user,\n  handleLogin,\n  handleLogout,\n  handleToggleManualRemeasuring,\n  enableManualRemeasuring,\n  adminUserId,\n}) => {\n  // Only show checkbox for admin user\n  const isAdmin = user && user.uid === adminUserId;\n\n  return (\n    <HeaderDiv>\n      {isAdmin && (\n        <label className=\"inline\">\n          <input\n            onChange={handleToggleManualRemeasuring}\n            type=\"checkbox\"\n            checked={enableManualRemeasuring}\n            name=\"manual-remeasuring\"\n          />\n          Manual remeasuring\n        </label>\n      )}\n      {user ? (\n        <>\n          {isAdmin && \"  \"}\n          {user.email}\n          {\"   \"}\n          <a\n            href=\"#\"\n            onClick={handleLogout}\n            style={{\n              marginLeft: \"15px\",\n              textDecoration: \"underline dotted #444\",\n            }}\n          >\n            Sign out\n          </a>\n        </>\n      ) : (\n        <>\n          <a href=\"#\" onClick={handleLogin} style={{ color: \"#fff\" }}>\n            Sign in\n          </a>{\" \"}\n        </>\n      )}\n    </HeaderDiv>\n  );\n};\n\nexport default SignIn;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\n\nconst MessageBoxOuter = styled.div`\n  position: absolute;\n  z-index: 100;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  padding: var(--charH) var(--charW2);\n  box-sizing: border-box;\n\n  &[hidden] {\n    visibility: hidden;\n  }\n`;\n\nconst MessageBox = styled.div`\n  background-color: var(--button);\n  padding: var(--charH) var(--charW2);\n  box-shadow: var(--charW1) var(--charW1) var(--shadow);\n  box-sizing: border-box;\n  display: flex;\n  transition: all 250ms steps(5);\n  visibility: visible;\n  overflow: hidden;\n  max-height: 100%;\n  pointer-events: all;\n  flex-direction: column;\n  width: calc(90 * var(--charW1));\n  height: calc(40 * var(--charH));\n\n  &[hidden] {\n    width: 0;\n    height: 0;\n    visibility: hidden;\n\n    .message-box-inner {\n      overflow: hidden;\n    }\n  }\n\n  &.drop-message {\n    height: calc(9 * var(--charH) + 1px);\n    width: calc(60 * var(--charW1));\n    text-align: center;\n  }\n`;\n\nconst MessageBoxInner = styled.div`\n  color: var(--clickable);\n  border: 1px solid var(--clickable);\n  padding: var(--charH) var(--charW2);\n  overflow: auto;\n  scrollbar-gutter: stable;\n\n  &:hover {\n    scrollbar-gutter: stable;\n  }\n\n  .drop-message & {\n    overflow: hidden;\n    display: flex;\n    flex-grow: 1;\n    align-items: center;\n    justify-content: center;\n    white-space: nowrap;\n  }\n`;\n\nconst DropMessage: React.FC<{\n  dropzoneProps: {\n    isDragActive: boolean;\n  };\n}> = ({ dropzoneProps }) => (\n  <MessageBoxOuter hidden={!dropzoneProps.isDragActive}>\n    <MessageBox hidden={!dropzoneProps.isDragActive} className=\"drop-message\">\n      <MessageBoxInner>Drop a MIDI file to play.</MessageBoxInner>\n    </MessageBox>\n  </MessageBoxOuter>\n);\n\nexport default React.memo(DropMessage);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport {\n  formatComposerName,\n  GenreItem,\n  GenreList,\n  getEmojis,\n  getUniqueStyles,\n  HasMetadata,\n} from \"../utils/corpusUtils\";\nimport { corpora } from \"./rawl/corpora/corpora\";\n\nconst TimelineContainer = styled.div`\n  padding: 2rem;\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n\nconst TimelineWrapper = styled.div`\n  position: relative;\n  padding-left: 100px;\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    left: 80px;\n    top: 0;\n    bottom: 0;\n    width: 2px;\n    background: #666;\n  }\n`;\n\nconst TimelineYear = styled.div`\n  position: relative;\n  margin-bottom: 2rem;\n`;\n\nconst YearMarker = styled.div`\n  position: absolute;\n  left: -100px;\n  width: 80px;\n  text-align: right;\n`;\n\nconst YearLabel = styled.span`\n  padding: 4px 8px;\n  border-radius: 4px;\n  position: relative;\n  top: 0.2rem;\n  color: #999;\n  font-weight: bold;\n`;\n\nconst ComposersGroup = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n`;\n\nconst ComposerCard = styled.div`\n  cursor: default;\n  font-size: 0.9rem;\n`;\n\nconst ComposerLink = styled(Link)`\n  text-decoration: none;\n  color: inherit;\n  display: inline-block;\n`;\n\ntype Composer = HasMetadata & {\n  slug: string;\n  midis: string[];\n};\n\nconst ComposerHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  > a {\n    flex: 0 1 auto;\n  }\n`;\n\nconst ComposerName = styled.h3`\n  margin: 0;\n  color: #fff;\n`;\n\nconst CountryFlag = styled.span`\n  cursor: pointer;\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst FilterIndicator = styled.div`\n  position: fixed;\n  top: 50px;\n  right: 20px;\n  padding: 8px 16px;\n  border-radius: 4px;\n  background: #333;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst CloseFilter = styled.button`\n  background: none;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 4px;\n  font-size: 1.2rem;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst Timeline: React.FC = () => {\n  const [selectedCountry, setSelectedCountry] = React.useState<string | null>(\n    null,\n  );\n  const [selectedStyle, setSelectedStyle] = React.useState<string | null>(null);\n\n  const composers = corpora\n    .filter(\n      (composer): composer is Composer & { composerBirthYear: number } =>\n        typeof composer.composerBirthYear === \"number\",\n    )\n    .sort((a, b) => b.composerBirthYear - a.composerBirthYear);\n\n  const composersWithoutYear = corpora.filter(\n    (composer) => typeof composer.composerBirthYear !== \"number\",\n  );\n\n  const handleCountryClick = (country: string) => {\n    setSelectedStyle(null);\n    setSelectedCountry(country);\n  };\n\n  const handleStyleClick = (style: string) => {\n    setSelectedCountry(null);\n    setSelectedStyle(style);\n  };\n\n  const clearFilter = () => {\n    setSelectedCountry(null);\n    setSelectedStyle(null);\n  };\n\n  const filteredComposers = composers.filter((composer) => {\n    if (selectedCountry) {\n      return composer.country\n        ?.split(\",\")\n        .map((c) => c.trim())\n        .includes(selectedCountry);\n    }\n    if (selectedStyle) {\n      const styles = getUniqueStyles(composer.genre, composer.style);\n      return styles.includes(selectedStyle);\n    }\n    return true;\n  });\n\n  const filteredYears = [\n    ...new Set(filteredComposers.map((c) => c.composerBirthYear)),\n  ];\n\n  const ComposerCardContent = ({ composer }: { composer: Composer }) => {\n    const styles = getUniqueStyles(composer.genre, composer.style);\n\n    return (\n      <ComposerCard key={composer.slug}>\n        <ComposerHeader>\n          <ComposerLink to={`/corpus/${composer.slug}`}>\n            <ComposerName>{formatComposerName(composer.slug)}</ComposerName>\n          </ComposerLink>\n          {composer.country && (\n            <div>\n              {composer.country.split(\",\").map((c) => (\n                <CountryFlag\n                  key={c.trim()}\n                  onClick={() => handleCountryClick(c.trim())}\n                >\n                  {getEmojis(c.trim())}\n                </CountryFlag>\n              ))}\n            </div>\n          )}\n        </ComposerHeader>\n        {styles.length > 0 && (\n          <GenreList>\n            {styles.map((style, index) => (\n              <GenreItem\n                key={index}\n                onClick={() => handleStyleClick(style)}\n                style={{ cursor: \"pointer\" }}\n              >\n                {index === styles.length - 1 ? style : `${style},`}\n              </GenreItem>\n            ))}\n          </GenreList>\n        )}\n      </ComposerCard>\n    );\n  };\n\n  return (\n    <TimelineContainer>\n      <div style={{ color: \"#999\", marginBottom: 40 }}>\n        All years are approximate composer birth years.\n      </div>\n      {(selectedCountry || selectedStyle) && (\n        <FilterIndicator>\n          <span>\n            {selectedCountry && (\n              <>\n                {selectedCountry} {getEmojis(selectedCountry)}\n              </>\n            )}\n            {selectedStyle && selectedStyle}\n          </span>\n          <CloseFilter onClick={clearFilter}></CloseFilter>\n        </FilterIndicator>\n      )}\n      <TimelineWrapper>\n        {filteredYears.map((year) => (\n          <TimelineYear key={year}>\n            <YearMarker>\n              <YearLabel>{year}</YearLabel>\n            </YearMarker>\n            <ComposersGroup>\n              {filteredComposers\n                .filter((composer) => composer.composerBirthYear === year)\n                .map((composer) => (\n                  <ComposerCardContent\n                    key={composer.slug}\n                    composer={composer}\n                  />\n                ))}\n            </ComposersGroup>\n          </TimelineYear>\n        ))}\n      </TimelineWrapper>\n      {composersWithoutYear.length > 0 && (\n        <>\n          <ComposersGroup>\n            {composersWithoutYear\n              .filter((composer) => {\n                if (selectedCountry) {\n                  return composer.country\n                    ?.split(\",\")\n                    .map((c) => c.trim())\n                    .includes(selectedCountry);\n                }\n                if (selectedStyle) {\n                  const styles = getUniqueStyles(\n                    composer.genre,\n                    composer.style,\n                  );\n                  return styles.includes(selectedStyle);\n                }\n                return true;\n              })\n              .map((composer) => (\n                <ComposerCardContent key={composer.slug} composer={composer} />\n              ))}\n          </ComposersGroup>\n        </>\n      )}\n    </TimelineContainer>\n  );\n};\n\nexport default Timeline;\n","import * as React from \"react\";\nimport { ReadableTextBlock } from \"./Book\";\nimport { A } from \"./chapters\";\n\nconst AboutTop100Corpus = (\n  <ReadableTextBlock>\n    <h2>How did I pick the pieces?</h2>\n    <p>\n      I went through{\" \"}\n      <a\n        href=\"https://musescore.com/sheetmusic/non-official?sort=view_count\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        https://musescore.com/sheetmusic/non-official?sort=view_count\n      </a>\n      . My goal was to find 100 most popular composers and take the most popular\n      score from each of them.\n    </p>\n\n    <p>\n      I've gathered the corpus on Oct 31, 2024. The view count on the most\n      popular work doesn't equal the work's popularity even on MuseScore. Eg.\n      \"River flows in you\" has 7.3M on the most popular arrangement, but their\n      next top 5 arrangements (out of 687 community scores of this title) have\n      1.5M more view counts. I don't add up all view counts across all versions,\n      I purely use the top 1 - which makes a bit of a random selection at the\n      lower end of the top 100.\n    </p>\n\n    <p>\n      Some compositions which almost made it to top 100 by a very narrow margin\n      are BTS's \"I Need You\", as well as themes from \"Godfather\" and \"The Pink\n      Panther\". Next time!\n    </p>\n\n    <p>\n      I don't use the number of view counts (position within the top 100)\n      throughout the book on harmony. I care about the total range of harmonic\n      devices used, not about their relative popularity weighted by each work's\n      popularity.\n    </p>\n\n    <p>\n      Neither do I want it to be weighted by the number of distinct pieces of\n      the same composer which are popular. So, as a result of my method I\n      include \"Fr Elise\" and therefore I exclude \"Moonlight\" and \"Tempest\". Out\n      of the entire Bach heritage I include exactly a single WTC-1 C major\n      prelude. As a benefit, I don't get 7 works of Chopin into the top 100 as I\n      would otherwise. Also we cut on Liszt, Joe Hisaishi, Koji Kondo, Ed\n      Sheeran etc.\n    </p>\n\n    <p>\n      In most cases, I take the same arrangement that scored the most views.\n      Sometimes I find an arrangement that suits better to my narrative - maybe\n      by having less mistakes, original key, better MIDI sound or so.\n    </p>\n\n    <p>\n      I only take solo piano arrangements because I want to focus on harmony,\n      not on the arrangement. For \"We Are Number One\" the most popular version\n      is a band arrangement, and I represent this piece by its piano\n      arrangement. \"Solo piano\" doesn't guarantee that the arrangement is\n      actually playable by a mortal two-handed human  some of them incorporate\n      more lines like octave bass + chords + melody. Since we study structures\n      and harmony in general, rather that a piano-specific idiom, this is\n      acceptable.\n    </p>\n\n    <p>\n      In the special case of \"He's a Pirate\", I attribute it to Klaus Badelt to\n      avoid excluding it because of Hans Zimmer's \"Interstellar\". Call it data\n      manipulation, but they are even written in different minors (major V vs\n      natural).\n    </p>\n\n    <p>\n      I attribute \"Runaway\" to Kanye West, since the melody and the bass line\n      was probably created by him first and only later arranged by Ramin\n      Djawadi.\n    </p>\n\n    <p>\n      In the case of \"G Minor Bach\" the original harmony was modernized so much\n      (departing from {A(\"prelude-no.-2-bwv-847-in-c-minor\")}) that I include\n      this track under Luo Ni.\n    </p>\n\n    <p>\n      Also, I ignore Turkish tabs from Musa etiner's account. This is a great\n      material which I'd look into separately. I'm not sure these view counts\n      are coming from anywhere outside of the Turkish-speaking world.\n    </p>\n\n    <p>\n      For ABBA, I take \"The Winner Takes It All\" instead of \"Chiquitita\",\n      because \"Chiquitita\", although higher in view counts, is represented only\n      by its ending.\n    </p>\n\n    <p>\n      As I understand, the copyright takedowns of community scores didn't affect\n      my corpus - even John Williams got represented.\n    </p>\n  </ReadableTextBlock>\n);\n\nexport default AboutTop100Corpus;\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { components, Theme } from \"react-select\";\nimport CreatableSelect from \"react-select/creatable\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport {\n  Analysis,\n  CompressedNotes,\n  deltaCoding,\n  FrozenNotesType,\n  getPhraseStarts,\n  PitchClass,\n  rehydrateSnippet,\n  Snippet,\n  TIME_SCALE_FACTOR,\n} from \"./analysis\";\nimport { getModulations, SecondsSpan } from \"./Rawl\";\nimport SnippetItem from \"./SnippetItem\";\nimport SnippetList from \"./SnippetList\";\nimport { SystemLayoutProps } from \"./SystemLayout\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  background-color: black;\n  color: white;\n`;\n\nconst DebugContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n`;\n\nconst DebugColumn = styled.div`\n  width: 48%;\n`;\n\nconst FrozenNotesDisplay = styled.div`\n  margin-bottom: 20px;\n`;\n\nconst JsonDisplay = styled.pre`\n  white-space: pre-wrap;\n  word-break: break-all;\n  cursor: pointer;\n  &:active {\n    background-color: #333;\n  }\n  font-size: 8px;\n`;\n\nconst RangeInputs = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n\nconst NumberInput = styled.input`\n  width: 60px;\n  margin-right: 10px;\n`;\n\nconst CopyIndicator = styled.div<{ visible: boolean }>`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 10px 20px;\n  border-radius: 5px;\n  opacity: ${(props) => (props.visible ? 1 : 0)};\n  transition: opacity 0.3s;\n  z-index: 9999;\n`;\n\nconst SnippetListContainer = styled.div`\n  margin-top: 20px;\n  border-top: 1px solid #444;\n  padding-top: 20px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n`;\n\nconst ErrorMessage = styled.div`\n  color: #ff6b6b;\n  margin-top: 10px;\n`;\n\nconst StyledSelect = styled(CreatableSelect).attrs({\n  classNamePrefix: \"react-select\",\n})`\n  width: 600px;\n  margin-left: 10px;\n\n  .react-select__menu {\n    z-index: 9999;\n  }\n\n  .react-select__option--is-focused {\n    background-color: #deebff;\n  }\n`;\n\nconst SaveButton = styled.button<{ unsaved: boolean }>`\n  margin-top: 10px;\n  background-color: ${(props) => (props.unsaved ? \"#4CAF50\" : \"#808080\")};\n  color: white;\n  padding: 10px 20px;\n  border: none;\n  border-radius: 5px;\n  cursor: ${(props) => (props.unsaved ? \"pointer\" : \"default\")};\n  transition: background-color 0.3s;\n\n  &:hover {\n    background-color: ${(props) => (props.unsaved ? \"#45a049\" : \"#808080\")};\n  }\n`;\n\nconst FlashOverlay = styled.div<{ visible: boolean }>`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.5);\n  opacity: ${(props) => (props.visible ? 1 : 0)};\n  transition: opacity 0.3s;\n  pointer-events: none;\n  z-index: 9999;\n`;\n\n// Custom components for react-select\nconst customComponents = {\n  Option: (props) => (\n    <components.Option {...props}>\n      {props.isSelected ? \" \" : \"\"}\n      {props.label}\n    </components.Option>\n  ),\n};\n\n// Custom theme for react-select\nconst selectTheme = (theme: Theme) => ({\n  ...theme,\n  colors: {\n    ...theme.colors,\n    primary: \"#4a90e2\",\n    primary75: \"#4a90e2cc\",\n    primary50: \"#4a90e280\",\n    primary25: \"#4a90e240\",\n    danger: \"#de350b\",\n    dangerLight: \"#de350b40\",\n    neutral0: \"white\",\n    neutral5: \"#f2f2f2\",\n    neutral10: \"#e6e6e6\",\n    neutral20: \"#cccccc\",\n    neutral30: \"#b3b3b3\",\n    neutral40: \"#999999\",\n    neutral50: \"#808080\",\n    neutral60: \"#666666\",\n    neutral70: \"#4d4d4d\",\n    neutral80: \"#333333\",\n    neutral90: \"#1a1a1a\",\n  },\n});\n\n// Custom styles for react-select\nconst selectStyles = {\n  control: (provided) => ({\n    ...provided,\n    backgroundColor: \"white\",\n    borderColor: \"#cccccc\",\n  }),\n  menu: (provided) => ({\n    ...provided,\n    backgroundColor: \"white\",\n    zIndex: 9999,\n  }),\n  option: (provided, state) => ({\n    ...provided,\n    backgroundColor: state.isSelected ? \"#4a90e2\" : \"white\",\n    color: state.isSelected ? \"white\" : \"black\",\n    \"&:hover\": {\n      backgroundColor: \"#f0f0f0\",\n      color: \"black\",\n    },\n  }),\n  singleValue: (provided) => ({\n    ...provided,\n    color: \"black\",\n  }),\n  input: (provided) => ({\n    ...provided,\n    color: \"black\",\n  }),\n  placeholder: (provided) => ({\n    ...provided,\n    color: \"#808080\",\n  }),\n  indicatorSeparator: (provided) => ({\n    ...provided,\n    display: \"none\",\n  }),\n  dropdownIndicator: (provided) => ({\n    ...provided,\n    color: \"#666666\",\n    \"&:hover\": {\n      color: \"#333333\",\n    },\n  }),\n  clearIndicator: (provided) => ({\n    ...provided,\n    color: \"#666666\",\n    \"&:hover\": {\n      color: \"#333333\",\n    },\n  }),\n};\n\ninterface FrozenNotesLayoutProps extends SystemLayoutProps {\n  saveAnalysis: (analysis: Analysis) => void;\n}\n\n// Add this new function to count tag occurrences\nconst countTagOccurrences = (\n  analyses: Record<string, Analysis>,\n): Record<string, number> => {\n  const tagCounts: Record<string, number> = {};\n  Object.values(analyses).forEach((analysis) => {\n    if (analysis.snippets) {\n      analysis.snippets.forEach((snippet) => {\n        if (snippet.tag) {\n          tagCounts[snippet.tag] = (tagCounts[snippet.tag] || 0) + 1;\n        }\n      });\n    }\n  });\n  return tagCounts;\n};\n\nconst MeasureTimesContainer = styled.div`\n  margin-top: 20px;\n  padding-top: 20px;\n  border-top: 1px solid #444;\n`;\n\nconst MeasureTimesList = styled.pre`\n  font-size: 12px;\n  color: #888;\n  white-space: pre-wrap;\n  word-break: break-all;\n`;\n\nconst updateSnippetPhraseStarts = (\n  snippet: Snippet,\n  analysis: Analysis,\n  maxMeasures: number,\n): Snippet => {\n  if (!snippet.phraseStarts) {\n    const allPhraseStarts = getPhraseStarts(analysis, maxMeasures);\n    const snippetPhraseStarts = allPhraseStarts.filter(\n      (measure) =>\n        measure >= snippet.measuresSpan[0] &&\n        measure <= snippet.measuresSpan[1],\n    );\n    return {\n      ...snippet,\n      phraseStarts: snippetPhraseStarts,\n    };\n  }\n  return snippet;\n};\n\nconst FrozenNotesLayout: React.FC<FrozenNotesLayoutProps> = ({\n  frozenNotes,\n  measuresAndBeats,\n  analysis,\n  saveAnalysis,\n}) => {\n  const { analyses } = useContext(AppContext);\n  const [dataRange, setDataRange] = useState<[number, number]>([1, 4]);\n  const [inputRange, setInputRange] = useState<[string, string]>([\"1\", \"4\"]);\n  const [tagName, setTagName] = useState<{\n    value: string;\n    label: string;\n  } | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [copyIndicatorVisible, setCopyIndicatorVisible] = useState(false);\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n  const [tagError, setTagError] = useState<string | null>(null);\n  const [unsavedChanges, setUnsavedChanges] = useState(false);\n  const [flashVisible, setFlashVisible] = useState(false);\n  const [phraseStartsUpdated, setPhraseStartsUpdated] =\n    useState<boolean>(false);\n\n  const maxMeasure = measuresAndBeats?.measures.length || 1;\n\n  const validateAndUpdateRange = useCallback(\n    (newRange: [string, string]) => {\n      const [start, end] = newRange.map((val) => {\n        const num = parseInt(val, 10);\n        return isNaN(num) ? 0 : Math.max(1, Math.min(num, maxMeasure));\n      });\n\n      if (start > 0 && end > 0 && start <= end) {\n        setDataRange([start, end]);\n        setError(null);\n      } else {\n        setError(\"Please enter a valid measure range.\");\n      }\n    },\n    [maxMeasure],\n  );\n\n  const handleRangeChange = useCallback(\n    (index: number) => (e: React.ChangeEvent<HTMLInputElement>) => {\n      const newValue = e.target.value;\n      const newRange = [...inputRange] as [string, string];\n      newRange[index] = newValue;\n\n      // If measureStart > measureEnd, set measureEnd := measureStart\n      if (index === 0 && parseInt(newValue, 10) > parseInt(newRange[1], 10)) {\n        newRange[1] = newValue;\n      }\n\n      setInputRange(newRange);\n\n      if (newValue !== \"\") {\n        validateAndUpdateRange(newRange);\n      }\n      setUnsavedChanges(true);\n    },\n    [inputRange, validateAndUpdateRange],\n  );\n\n  const handleRangeBlur = useCallback(\n    (index: number) => () => {\n      const newRange = [...inputRange] as [string, string];\n      if (newRange[index] === \"\") {\n        newRange[index] = index === 0 ? \"1\" : maxMeasure.toString();\n      }\n      setInputRange(newRange);\n      validateAndUpdateRange(newRange);\n    },\n    [inputRange, maxMeasure, validateAndUpdateRange],\n  );\n\n  const createFrozenNotes = useCallback((): FrozenNotesType | null => {\n    if (!frozenNotes || !measuresAndBeats || !analysis) {\n      console.error(\"Missing required props in createFrozenNotes\");\n      return null;\n    }\n\n    const startMeasure = Math.max(0, dataRange[0] - 1);\n    const endMeasure = Math.min(dataRange[1], maxMeasure) - 1;\n\n    const startTime = measuresAndBeats.measures[startMeasure];\n    const endTime = measuresAndBeats.measures[endMeasure + 1];\n\n    const notesInVoices: FrozenNotesType[\"notesInVoices\"] = frozenNotes\n      // First filter out any voice that only contains drum notes\n      .filter((voiceNotes) => voiceNotes.some((note) => !note.isDrum))\n      .map((voiceNotes) => {\n        const lengthToNotes: CompressedNotes = {};\n        // Then filter out drum notes within each voice\n        voiceNotes\n          .filter((note) => !note.isDrum)\n          .forEach((note) => {\n            if (note.span[1] >= startTime && note.span[0] < endTime) {\n              const start = Math.round(\n                (note.span[0] - startTime) * TIME_SCALE_FACTOR,\n              );\n              const length = Math.round(\n                (note.span[1] - note.span[0]) * TIME_SCALE_FACTOR,\n              );\n              const midiNumber = note.note.midiNumber;\n\n              if (!lengthToNotes[length]) {\n                lengthToNotes[length] = {};\n              }\n              if (!lengthToNotes[length][midiNumber]) {\n                lengthToNotes[length][midiNumber] = [start];\n              } else {\n                (lengthToNotes[length][midiNumber] as number[]).push(start);\n              }\n            }\n          });\n\n        // Apply delta coding to the start times\n        Object.values(lengthToNotes).forEach((midiNumbers) => {\n          Object.keys(midiNumbers).forEach((midiNumber) => {\n            const starts = midiNumbers[midiNumber] as number[];\n            midiNumbers[midiNumber] = deltaCoding(starts.sort((a, b) => a - b));\n          });\n        });\n\n        return lengthToNotes;\n      });\n\n    const modulations = getModulations(analysis);\n    // Find the latest modulation that occurs before or at the start measure\n    const initialModulation = modulations\n      .filter((mod) => mod.measure <= startMeasure)\n      .reduce(\n        (latest, current) =>\n          current.measure > latest.measure ? current : latest,\n        { measure: -1, tonic: 0 as PitchClass }, // Default to C if no previous modulations\n      );\n\n    // Get all modulations within our slice, including the initial one\n    const relevantModulations = [\n      initialModulation,\n      ...modulations.filter(\n        (mod) => mod.measure > startMeasure && mod.measure <= endMeasure,\n      ),\n    ];\n\n    const frozenAnalysis: FrozenNotesType[\"analysis\"] = {\n      modulations: Object.fromEntries(\n        relevantModulations.map((mod) => [\n          mod.measure === initialModulation.measure\n            ? 1\n            : mod.measure - startMeasure + 1,\n          mod.tonic,\n        ]),\n      ),\n      measuresAndBeats: {\n        measures: deltaCoding(\n          measuresAndBeats.measures\n            .slice(startMeasure, endMeasure + 2)\n            .map((time) => Math.round((time - startTime) * TIME_SCALE_FACTOR)),\n        ),\n        beats: deltaCoding(\n          measuresAndBeats.beats\n            .filter((time) => time >= startTime && time < endTime)\n            .map((time) => Math.round((time - startTime) * TIME_SCALE_FACTOR)),\n        ),\n      },\n    };\n\n    return {\n      notesInVoices,\n      analysis: frozenAnalysis,\n    };\n  }, [frozenNotes, dataRange, measuresAndBeats, analysis, maxMeasure]);\n\n  const snippet: Snippet | null = useMemo(() => {\n    const frozenNotesData = createFrozenNotes();\n    if (!frozenNotesData) return null;\n\n    // Get phrase starts from the analysis for the current measure range\n    const allPhraseStarts = getPhraseStarts(\n      analysis,\n      measuresAndBeats.measures.length,\n    );\n    const snippetPhraseStarts = allPhraseStarts.filter(\n      (measure) => measure >= dataRange[0] && measure <= dataRange[1],\n    );\n\n    return {\n      tag: tagName?.value || \"\",\n      frozenNotes: frozenNotesData,\n      measuresSpan: dataRange,\n      phraseStarts: snippetPhraseStarts,\n    };\n  }, [\n    createFrozenNotes,\n    tagName,\n    dataRange,\n    analysis,\n    measuresAndBeats?.measures.length,\n  ]);\n\n  const exportString = useMemo(() => {\n    return snippet ? JSON.stringify(snippet) : \"\";\n  }, [snippet]);\n\n  const resetToDefaults = useCallback(() => {\n    setInputRange([\"1\", \"4\"]);\n    setDataRange([1, 4]);\n    setTagName(null);\n  }, []);\n\n  const saveSnippet = useCallback(() => {\n    if (!snippet) return;\n    if (!tagName || !tagName.value.trim()) {\n      setTagError(\"Please enter a tag name before saving.\");\n      return;\n    }\n    setTagError(null);\n    const updatedAnalysis: Analysis = {\n      ...analysis,\n      snippets: [...(analysis.snippets || []), snippet],\n    };\n    saveAnalysis(updatedAnalysis);\n    setUnsavedChanges(false);\n    setFlashVisible(true);\n    setTimeout(() => setFlashVisible(false), 300);\n\n    // Reset input fields to defaults\n    resetToDefaults();\n  }, [analysis, saveAnalysis, snippet, tagName, resetToDefaults]);\n\n  const deleteSnippet = useCallback(\n    (index: number) => {\n      const snippetToDelete = analysis.snippets?.[index];\n      const updatedAnalysis: Analysis = {\n        ...analysis,\n        snippets: (analysis.snippets || []).filter((_, i) => i !== index),\n      };\n      saveAnalysis(updatedAnalysis);\n\n      // Set the measure range of the deleted snippet into input fields\n      if (snippetToDelete && snippetToDelete.measuresSpan) {\n        const [start, end] = snippetToDelete.measuresSpan;\n        setInputRange([start.toString(), end.toString()]);\n        setDataRange([start, end]);\n      }\n\n      // Clear the tag name\n      setTagName(null);\n\n      // Set unsaved changes to true\n      setUnsavedChanges(true);\n\n      // Set focus to the tag input\n      setTimeout(() => {\n        if (selectRef.current) {\n          selectRef.current.focus();\n        }\n      }, 0);\n    },\n    [analysis, saveAnalysis, setInputRange, setDataRange],\n  );\n\n  const copyToClipboard = useCallback(() => {\n    if (!exportString) return;\n    navigator.clipboard.writeText(exportString).then(() => {\n      setCopyIndicatorVisible(true);\n      setTimeout(() => setCopyIndicatorVisible(false), 2000);\n    });\n  }, [exportString]);\n\n  const noteHeight = 3; // Match the initial value in StackedSystemLayout\n\n  const allTags = useMemo(() => {\n    const tagSet = new Set<string>();\n    const tagCounts = countTagOccurrences(analyses);\n    Object.values(analyses).forEach((analysis) => {\n      if (analysis.snippets) {\n        analysis.snippets.forEach((snippet) => {\n          if (snippet.tag) {\n            tagSet.add(snippet.tag);\n          }\n        });\n      }\n    });\n    return Array.from(tagSet).map((tag) => ({\n      value: tag,\n      label: `${tag} (${tagCounts[tag]})`,\n    }));\n  }, [analyses]);\n\n  const rehydratedSnippet = useMemo(() => {\n    if (!snippet) return null;\n    return rehydrateSnippet(snippet);\n  }, [snippet]);\n\n  const selectRef = useRef(null);\n\n  const saveButtonRef = useRef<HTMLButtonElement>(null);\n\n  const handleSelectChange = (selectedOption, actionMeta) => {\n    if (actionMeta.action === \"create-option\") {\n      setTagName({ value: selectedOption.value, label: selectedOption.value });\n    } else {\n      setTagName(selectedOption as { value: string; label: string } | null);\n    }\n    setMenuIsOpen(false);\n    setUnsavedChanges(true);\n\n    // Move focus to Save Snippet button after creating a new tag or selecting an existing one\n    setTimeout(() => {\n      saveButtonRef.current?.focus();\n    }, 0);\n  };\n\n  const measureStartRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (measureStartRef.current) {\n      measureStartRef.current.focus();\n      measureStartRef.current.select(); // Select the content\n    }\n  }, []);\n\n  // Add useEffect to handle book:index tag on entry\n  useEffect(() => {\n    if (!measuresAndBeats || !analysis?.snippets) return;\n\n    const bookIndexSnippets = analysis.snippets.filter((s) =>\n      s.tag.startsWith(\"book:index\"),\n    );\n\n    const needsUpdate = bookIndexSnippets.some((s) => !s.secondsSpan);\n    if (needsUpdate) {\n      // Update all book:index snippets with secondsSpan\n      const updatedSnippets = analysis.snippets.map((s) => {\n        if (\n          s.tag.startsWith(\"book:index\") &&\n          s.measuresSpan &&\n          !s.secondsSpan\n        ) {\n          const [startMeasure, endMeasure] = s.measuresSpan;\n          const startTime = measuresAndBeats.measures[startMeasure - 1];\n          const endTime = measuresAndBeats.measures[endMeasure];\n\n          return {\n            ...s,\n            secondsSpan: [startTime, endTime] as SecondsSpan,\n          };\n        }\n        return s;\n      });\n\n      // Save the updated analysis\n      saveAnalysis({\n        ...analysis,\n        snippets: updatedSnippets,\n      });\n\n      // Show toast notification\n      setCopyIndicatorVisible(true);\n      setTimeout(() => setCopyIndicatorVisible(false), 2000);\n    }\n  }, [analysis, measuresAndBeats, saveAnalysis]);\n\n  useEffect(() => {\n    if (phraseStartsUpdated || !analysis?.snippets || !measuresAndBeats) return;\n\n    const snippetsNeedingUpdate = analysis.snippets.filter(\n      (s) => !s.phraseStarts,\n    );\n\n    if (snippetsNeedingUpdate.length > 0) {\n      const maxMeasures = measuresAndBeats.measures.length;\n      const updatedSnippets = analysis.snippets.map((s) =>\n        updateSnippetPhraseStarts(s, analysis, maxMeasures),\n      );\n\n      // Only update if there are actual changes\n      if (\n        JSON.stringify(updatedSnippets) !== JSON.stringify(analysis.snippets)\n      ) {\n        saveAnalysis({\n          ...analysis,\n          snippets: updatedSnippets,\n        });\n\n        setCopyIndicatorVisible(true);\n        setTimeout(() => setCopyIndicatorVisible(false), 2000);\n        setPhraseStartsUpdated(true);\n      }\n    }\n  }, [analysis, measuresAndBeats, phraseStartsUpdated, saveAnalysis]);\n\n  // Add this check after all hooks have been called\n  if (!frozenNotes || !measuresAndBeats || !analysis) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <ErrorBoundary>\n      <Container>\n        <FlashOverlay visible={flashVisible} />\n        <FrozenNotesDisplay>\n          <h2>Frozen Notes</h2>\n          <RangeInputs>\n            <label>Measures:&nbsp;</label>\n            <NumberInput\n              ref={measureStartRef}\n              type=\"number\"\n              min=\"1\"\n              max={maxMeasure}\n              value={inputRange[0]}\n              onChange={handleRangeChange(0)}\n              onBlur={handleRangeBlur(0)}\n            />\n            <span>to&nbsp;</span>\n            <NumberInput\n              type=\"number\"\n              min=\"1\"\n              max={maxMeasure}\n              value={inputRange[1]}\n              onChange={handleRangeChange(1)}\n              onBlur={handleRangeBlur(1)}\n            />\n\n            <StyledSelect\n              ref={selectRef}\n              value={tagName}\n              onChange={(selectedOption, actionMeta) => {\n                handleSelectChange(selectedOption, actionMeta);\n                setUnsavedChanges(true);\n              }}\n              options={allTags}\n              isClearable\n              placeholder=\"Select or create a tag\"\n              theme={selectTheme}\n              styles={selectStyles}\n              components={customComponents}\n              menuIsOpen={menuIsOpen}\n              onMenuOpen={() => setMenuIsOpen(true)}\n              onMenuClose={() => setMenuIsOpen(false)}\n              onBlur={() => setMenuIsOpen(false)}\n            />\n          </RangeInputs>\n          {error && <ErrorMessage>{error}</ErrorMessage>}\n          {tagError && <ErrorMessage>{tagError}</ErrorMessage>}\n          {!error && snippet && (\n            <>\n              <h3>Rehydrated Notes</h3>\n              <SnippetItem\n                snippet={snippet}\n                index={-1}\n                noteHeight={noteHeight}\n              />\n              <JsonDisplay onClick={copyToClipboard}>\n                {exportString}\n              </JsonDisplay>\n              <SaveButton\n                ref={saveButtonRef}\n                onClick={saveSnippet}\n                unsaved={unsavedChanges}\n                disabled={!unsavedChanges}\n              >\n                {unsavedChanges ? \"Save Snippet\" : \"Snippet Saved\"}\n              </SaveButton>\n            </>\n          )}\n        </FrozenNotesDisplay>\n\n        <SnippetListContainer>\n          <h3>Saved Snippets</h3>\n          <SnippetList\n            snippets={analysis.snippets || []}\n            noteHeight={noteHeight}\n            onSnippetClick={() => {}}\n            deleteSnippet={deleteSnippet}\n          />\n        </SnippetListContainer>\n\n        <CopyIndicator visible={copyIndicatorVisible}>\n          {phraseStartsUpdated\n            ? `phraseStarts updated for ${analysis.snippets\n                ?.filter((s) => !s.phraseStarts || s.phraseStarts.length === 0)\n                .map((s) => s.tag)\n                .filter(Boolean)\n                .join(\", \")}`\n            : \"Copied to clipboard!\"}\n        </CopyIndicator>\n      </Container>\n    </ErrorBoundary>\n  );\n};\n\nexport default FrozenNotesLayout;\n","const API_BASE = \"https://corsproxy.io/?https://gifx.co/chip\";\nconst CATALOG_PREFIX = \"https://corsproxy.io/?https://gifx.co/music/\";\nconst SOUNDFONT_URL_PATH = \"https://rawl.rocks\";\nconst MAX_VOICES = 64;\nconst ERROR_FLASH_DURATION_MS = 6000;\nconst FORMATS = [\n  \"ay\",\n  \"gbs\",\n  \"it\",\n  \"mdx\",\n  \"mid\",\n  \"miniusf\",\n  \"mod\",\n  \"nsf\",\n  \"nsfe\",\n  \"sgc\",\n  \"spc\",\n  \"s3m\",\n  \"smf\",\n  \"v2m\",\n  \"vgm\",\n  \"vgz\",\n  \"xm\",\n];\nconst SOUNDFONT_MOUNTPOINT = \"/soundfonts\";\nconst SOUNDFONTS = [\n  {\n    label: \"User SoundFonts (Drop .sf2 to add)\",\n    items: [],\n  },\n  {\n    label: \"Small Soundfonts\",\n    items: [\n      { label: \"GMGSx Plus (6.2 MB)\", value: \"gmgsx-plus.sf2\" },\n      { label: \"Roland SC-55/SCC1 (3.3 MB)\", value: \"Scc1t2.sf2\" },\n      { label: \"Yamaha DB50XG (3.9 MB)\", value: \"Yamaha DB50XG.sf2\" },\n      {\n        label: \"Gravis Ultrasound (5.9 MB)\",\n        value: \"Gravis_Ultrasound_Classic_PachSet_v1.6.sf2\",\n      },\n      { label: \"Tim GM (6 MB)\", value: \"TimGM6mb.sf2\" },\n      { label: \"Alan Chan 5MBGMGS (4.9 MB)\", value: \"5MBGMGS.SF2\" },\n      { label: \"E-mu 2MBGMGS (2.1 MB)\", value: \"2MBGMGS.SF2\" },\n      { label: \"E-mu 8MBGMGS (8.2 MB)\", value: \"8MBGMGS.SF2\" },\n    ],\n  },\n  {\n    label: \"Large Soundfonts\",\n    items: [\n      { label: \"Masquerade 55 v006 (18.4 MB)\", value: \"masquerade55v006.sf2\" },\n      { label: \"GeneralUser GS v1.471 (31.3 MB)\", value: \"generaluser.sf2\" },\n      { label: \"Chorium Revision A (28.9 MB)\", value: \"choriumreva.sf2\" },\n      { label: \"Unison (29.3 MB)\", value: \"Unison.SF2\" },\n      { label: \"Creative 28MBGM (29.7 MB)\", value: \"28MBGM.sf2\" },\n      { label: \"Musica Theoria 2 (30.5 MB)\", value: \"mustheory2.sf2\" },\n      { label: \"Personal Copy Lite (31.4 MB)\", value: \"PCLite.sf2\" },\n      { label: \"AnotherXG (31.4 MB)\", value: \"bennetng_AnotherXG_v2-1.sf2\" },\n      { label: \"NTONYX 32Mb GM Stereo (32.5 MB)\", value: \"32MbGMStereo.sf2\" },\n      { label: \"Weeds GM 3 (54.9 MB)\", value: \"weedsgm3.sf2\" },\n    ],\n  },\n  {\n    label: \"Novelty Soundfonts\",\n    items: [\n      { label: \"PC Beep (31 KB)\", value: \"pcbeep.sf2\" },\n      { label: \"Nokia 6230i (227 KB)\", value: \"Nokia_6230i_RM-72_.sf2\" },\n      {\n        label: \"Kirby's Dream Land (271 KB)\",\n        value: \"Kirby's_Dream_Land_3.sf2\",\n      },\n      {\n        label: \"Vintage Waves v2 (315 KB)\",\n        value: \"Vintage Dreams Waves v2.sf2\",\n      },\n      {\n        label: \"Setzer's SPC Soundfont (1.2 MB)\",\n        value: \"Setzer's_SPC_Soundfont.sf2\",\n      },\n      {\n        label: \"SNES GM (1.9 MB)\",\n        value: \"Super_Nintendo_Unofficial_update.sf2\",\n      },\n      { label: \"Nokia 30 (2.2 MB)\", value: \"Nokia_30.sf2\" },\n      {\n        label: \"LG Wink/Motorola ROKR (3.3 MB)\",\n        value: \"LG_Wink_Style_T310_Soundfont.sf2\",\n      },\n      {\n        label: \"Diddy Kong Racing DS (13.7 MB)\",\n        value: \"Diddy_Kong_Racing_DS_Soundfont.sf2\",\n      },\n      {\n        label: \"Regression FM v1.99g (14.4 MB)\",\n        value: \"R_FM_v1.99g-beta.sf2\",\n      },\n      {\n        label: \"Ultimate Megadrive (63.2 MB)\",\n        value: \"The Ultimate Megadrive Soundfont.sf2\",\n      },\n    ],\n  },\n  {\n    label: \"Piano Soundfonts\",\n    items: [\n      {\n        label: \"Yamaha Grand Lite v1.1 (21.8 MB)\",\n        value: \"Yamaha-Grand-Lite-v1.1.sf2\",\n      },\n      {\n        label: \"Abbey Steinway D v1.9 (40.2 MB)\",\n        value: \"Abbey-Steinway-D-v1.9.sf2\",\n      },\n      {\n        label: \"Chateau Grand Lite v1.0 (49.1 MB)\",\n        value: \"Chateau Grand Lite-v1.0.sf2\",\n      },\n      {\n        label: \"Steinway Grand v1.0 (145 MB)\",\n        value: \"Steinway Grand-SF4U-v1.sf2\",\n      },\n    ],\n  },\n];\n\n// needs to be a CommonJS module - used in node.js server\nmodule.exports = {\n  API_BASE,\n  CATALOG_PREFIX,\n  ERROR_FLASH_DURATION_MS,\n  FORMATS,\n  MAX_VOICES,\n  SOUNDFONT_MOUNTPOINT,\n  SOUNDFONT_URL_PATH,\n  SOUNDFONTS,\n};\n","import React, { useCallback, useMemo } from \"react\";\nimport styled from \"styled-components\";\nimport { Analysis, MeasuresSpan } from \"./analysis\";\nimport { AnalysisGrid } from \"./AnalysisGrid\";\nimport { getNoteRectangles as getSystemNoteRectangles } from \"./getNoteRectangles\";\nimport { ColoredNote, Note } from \"./parseMidi\";\nimport { getNoteColorPitchClass, pitchClassToCssClass } from \"./Rawl\";\nimport { MeasuresAndBeats, MidiRange } from \"./SystemLayout\";\n\ninterface EnhancedFrozenNotesProps {\n  notes: Note[][];\n  toX: (seconds: number) => number;\n  midiNumberToY: (midiNumber: number) => number;\n  maxWidth: number;\n  noteHeight: number;\n  timeRange: [number, number];\n  analysis: Analysis;\n  measuresAndBeats: MeasuresAndBeats;\n  startMeasure: number;\n  phraseStarts?: number[];\n  isPreview?: boolean;\n  hoveredColors?: string[] | null;\n}\n\nconst FrozenNotesContainer = styled.div`\n  position: relative;\n  overflow: hidden;\n`;\n\nconst HeaderStaff = styled.div`\n  position: relative;\n  height: 16px;\n  margin-bottom: 0px;\n`;\n\nconst EnhancedFrozenNotes: React.FC<EnhancedFrozenNotesProps> = ({\n  notes,\n  midiNumberToY,\n  maxWidth,\n  analysis,\n  measuresAndBeats,\n  noteHeight,\n  startMeasure,\n  toX,\n  timeRange,\n  phraseStarts,\n  isPreview = false,\n  hoveredColors,\n}) => {\n  const midiRange = useMemo(() => {\n    let min = Infinity;\n    let max = -Infinity;\n    notes.forEach((voiceNotes) => {\n      voiceNotes.forEach((note) => {\n        const midiNumber = note.note.midiNumber;\n        min = Math.min(min, midiNumber);\n        max = Math.max(max, midiNumber);\n      });\n    });\n    return [min, max] as MidiRange;\n  }, [notes]);\n\n  const height = (midiRange[1] - midiRange[0] + 2) * noteHeight;\n\n  const adjustedNotes = useMemo(() => {\n    return notes.map((voiceNotes) =>\n      voiceNotes.map((note) => {\n        const pitchClass = getNoteColorPitchClass(\n          note,\n          analysis,\n          measuresAndBeats.measures,\n        );\n        return {\n          ...note,\n          color: pitchClassToCssClass(pitchClass),\n          colorPitchClass: pitchClass,\n          isActive: true,\n        };\n      }),\n    );\n  }, [notes, analysis, measuresAndBeats.measures]);\n\n  const getNoteRectangles = useCallback(\n    (notes: ColoredNote[]) =>\n      getSystemNoteRectangles(\n        notes,\n        midiNumberToY,\n        noteHeight,\n        null, // handleNoteClick\n        () => {}, // handleMouseEnter\n        () => {}, // handleMouseLeave\n        toX,\n        false, // enableManualRemeasuring\n        hoveredColors,\n      ),\n    [midiNumberToY, noteHeight, toX, hoveredColors],\n  );\n\n  const dummyMeasureSelection = useMemo(\n    () => ({\n      selectedMeasure: null,\n      selectMeasure: () => {},\n      splitAtMeasure: () => {},\n      mergeAtMeasure: () => {},\n      renumberMeasure: () => {},\n    }),\n    [],\n  );\n\n  const sectionSpan: MeasuresSpan = useMemo(() => {\n    const paddingLength = startMeasure - 1;\n    const endMeasure = measuresAndBeats.measures.length - 1;\n    return [paddingLength, endMeasure];\n  }, [startMeasure, measuresAndBeats.measures.length]);\n\n  const memoizedNoteRectangles = useMemo(() => {\n    return adjustedNotes.map((voiceNotes) =>\n      getNoteRectangles(voiceNotes as ColoredNote[]),\n    );\n  }, [adjustedNotes, getNoteRectangles]);\n\n  return (\n    <FrozenNotesContainer>\n      <HeaderStaff>\n        <AnalysisGrid\n          analysis={analysis}\n          measuresAndBeats={measuresAndBeats}\n          midiNumberToY={() => 0}\n          noteHeight={16}\n          phraseStarts={phraseStarts || []}\n          midiRange={[0, 0]}\n          measureSelection={dummyMeasureSelection}\n          showHeader={true}\n          showTonalGrid={false}\n          secondsToX={toX}\n          sectionSpan={sectionSpan}\n        />\n      </HeaderStaff>\n      <div\n        style={{\n          width: `${maxWidth}px`,\n          height: `${height}px`,\n          position: \"relative\",\n          overflow: \"hidden\",\n        }}\n      >\n        <AnalysisGrid\n          analysis={analysis}\n          measuresAndBeats={measuresAndBeats}\n          midiNumberToY={midiNumberToY}\n          noteHeight={noteHeight}\n          phraseStarts={phraseStarts || []}\n          midiRange={midiRange}\n          measureSelection={dummyMeasureSelection}\n          showHeader={false}\n          showTonalGrid={true}\n          secondsToX={toX}\n          sectionSpan={sectionSpan}\n        />\n        <div\n          style={{\n            position: \"relative\",\n            height: `${height}px`,\n            width: `${maxWidth}px`,\n            overflow: \"hidden\",\n          }}\n        >\n          {memoizedNoteRectangles.map((voiceRectangles, index) => (\n            <div key={index}>{voiceRectangles}</div>\n          ))}\n        </div>\n      </div>\n    </FrozenNotesContainer>\n  );\n};\n\nexport default EnhancedFrozenNotes;\n","import * as React from \"react\";\nimport {\n  ReactNode,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { DUMMY_CALLBACK, VoiceMask } from \"../App\";\nimport { Analysis, getPhraseStarts, MeasuresSpan } from \"./analysis\";\nimport { AnalysisGrid, Cursor, MeasureSelection } from \"./AnalysisGrid\";\nimport { getNoteRectangles, MouseHandlers } from \"./getNoteRectangles\";\nimport ControlPanel, { debounce } from \"./layouts/ControlPanel\";\nimport { MeasureNumbers } from \"./layouts/MeasureNumbers\";\nimport MergedVoicesLegend from \"./layouts/MergedVoicesLegend\";\nimport { VoiceName } from \"./layouts/VoiceName\";\nimport { ColoredNote, ColoredNotesInVoices, Note } from \"./parseMidi\";\nimport { SecondsConverter, SecondsSpan, SetVoiceMask } from \"./Rawl\";\n\nexport type MeasuresAndBeats = {\n  measures: number[];\n  beats: number[];\n  ticks?: { measures: number[] };\n};\n\nconst getAverageMidiNumber = (notes: Note[]) =>\n  notes.length > 0\n    ? notes[0].isDrum\n      ? 0\n      : notes.reduce((sum, note) => sum + note.note.midiNumber, 0) /\n        notes.length\n    : Infinity;\n\nexport type MidiRange = [number, number];\n\nconst getMidiRange = (notes: Note[], span?: SecondsSpan): MidiRange => {\n  let min = +Infinity;\n  let max = -Infinity;\n  for (const note of notes) {\n    if (span && (note.span[1] < span[0] || note.span[0] > span[1])) {\n      continue;\n    }\n    const { midiNumber, relativeNumber } = note.note;\n    const number = relativeNumber === undefined ? midiNumber : relativeNumber;\n    min = Math.min(min, number);\n    max = Math.max(max, number);\n  }\n  return [min, max];\n};\n\nexport type ScrollInfo = {\n  left: number;\n  right: number;\n};\n\nexport const Voice: React.FC<{\n  notes: ColoredNote[];\n  measuresAndBeats: MeasuresAndBeats;\n  analysis: Analysis;\n  cursor: ReactNode;\n  phraseStarts: number[];\n  mouseHandlers: MouseHandlers;\n  measureSelection: MeasureSelection;\n  scrollInfo: ScrollInfo;\n  voiceName: string;\n  setVoiceMask: SetVoiceMask;\n  voiceIndex: number;\n  voiceMask: VoiceMask;\n  showTonalGrid?: boolean;\n  noteHeight: number;\n  secondsToX: SecondsConverter;\n  xToSeconds: SecondsConverter;\n  sectionSpan?: MeasuresSpan;\n  enableManualRemeasuring: boolean;\n  hoveredColors: string[] | null;\n}> = ({\n  notes,\n  measuresAndBeats,\n  analysis,\n  mouseHandlers,\n  measureSelection,\n  cursor,\n  phraseStarts,\n  scrollInfo,\n  voiceName,\n  voiceIndex = -1,\n  setVoiceMask = (mask) => {},\n  voiceMask,\n  showTonalGrid = true,\n  noteHeight,\n  secondsToX,\n  xToSeconds,\n  sectionSpan,\n  enableManualRemeasuring,\n  hoveredColors,\n}) => {\n  // To restore it, we need to lock the calculation of frozenRange and frozenHeight\n  // and don't change it after loading the notes.\n\n  const localMidiRange = useMemo(\n    () =>\n      getMidiRange(notes, [\n        xToSeconds(scrollInfo.left),\n        xToSeconds(scrollInfo.right),\n      ]),\n    [notes, scrollInfo, xToSeconds],\n  );\n  const midiRange = useMemo(() => getMidiRange(notes), [notes]);\n\n  const { systemClickHandler, handleNoteClick, handleMouseEnter } =\n    mouseHandlers;\n\n  const height =\n    (midiRange[0] === +Infinity ? 0 : midiRange[1] - midiRange[0] + 1) *\n    noteHeight;\n\n  const midiNumberToY = useCallback(\n    (midiNumber) => height - (midiNumber - midiRange[0] + 1) * noteHeight,\n    [height, midiRange, noteHeight],\n  );\n\n  // The frozenHeight machinery was used when I experimented with smart\n  // collapse/expand of every Voice relative to its current range on a current screen.\n  // I'm not sure it's used anymore.\n  const { noteRectangles, frozenHeight, frozenMidiRange } = useMemo(\n    () => ({\n      noteRectangles: getNoteRectangles(\n        notes,\n        midiNumberToY,\n        noteHeight,\n        handleNoteClick,\n        handleMouseEnter,\n        DUMMY_CALLBACK,\n        secondsToX,\n        enableManualRemeasuring,\n        hoveredColors,\n      ),\n      frozenHeight: height,\n      frozenMidiRange: midiRange,\n    }),\n    [\n      notes,\n      analysis,\n      handleNoteClick,\n      handleMouseEnter,\n      voiceMask,\n      noteHeight,\n      secondsToX,\n      enableManualRemeasuring,\n      hoveredColors,\n    ],\n  );\n\n  const { measures } = measuresAndBeats;\n  // TODO: make smarter once Stacked is implemented\n  const hasVisibleNotes =\n    voiceMask[voiceIndex] &&\n    (!!sectionSpan || localMidiRange[1] >= localMidiRange[0]);\n\n  return (\n    <div\n      key={`voice_${voiceIndex}_${measuresAndBeats.measures.at(-1)}_parent`}\n      style={{\n        width: secondsToX(measures[sectionSpan?.[1] ?? measures.length - 1]),\n        height: hasVisibleNotes ? height : 1,\n        position: \"relative\",\n        marginTop: hasVisibleNotes ? \"15px\" : 0,\n        marginBottom: hasVisibleNotes ? \"0px\" : 0,\n        marginLeft: \"0px\",\n        // borderBottom: hasVisibleNotes ? \"1px solid #888\" : \"\",\n        zIndex: 1,\n        backgroundColor: \"black\",\n      }}\n      onClick={(e) => systemClickHandler(e, xToSeconds)}\n    >\n      <div\n        style={{\n          position: \"relative\",\n          top:\n            height -\n            frozenHeight +\n            (midiRange[0] - frozenMidiRange[0]) * noteHeight,\n        }}\n      >\n        {voiceMask[voiceIndex] ? noteRectangles : null}\n      </div>\n      {hasVisibleNotes ? (\n        <AnalysisGrid\n          analysis={analysis}\n          measuresAndBeats={measuresAndBeats}\n          midiNumberToY={midiNumberToY}\n          noteHeight={noteHeight}\n          measureSelection={measureSelection}\n          phraseStarts={phraseStarts}\n          midiRange={midiRange}\n          showHeader={false}\n          showTonalGrid={showTonalGrid && !notes[0]?.isDrum}\n          secondsToX={secondsToX}\n          sectionSpan={sectionSpan}\n        />\n      ) : null}\n      {cursor}\n      {hasVisibleNotes &&\n      voiceMask.length > 1 &&\n      (sectionSpan?.[0] ?? 0) === 0 &&\n      voiceName ? (\n        <VoiceName\n          voiceName={voiceName}\n          voiceMask={voiceMask}\n          setVoiceMask={setVoiceMask}\n          voiceIndex={voiceIndex}\n          scrollInfo={scrollInfo}\n          secondsToX={secondsToX}\n          midiNumberToY={midiNumberToY}\n        />\n      ) : null}\n    </div>\n  );\n};\n\ntype Section = {\n  sectionSpan: MeasuresSpan;\n  secondsToX: SecondsConverter;\n  xToSeconds: SecondsConverter;\n  voices: { voiceIndex: number; notes: ColoredNote[] }[];\n};\n\nexport type SystemLayoutProps = {\n  notes: ColoredNotesInVoices;\n  voiceNames: string[];\n  voiceMask: VoiceMask;\n  measuresAndBeats: MeasuresAndBeats;\n  positionSeconds: number;\n  analysis: Analysis;\n  mouseHandlers: MouseHandlers;\n  measureSelection: MeasureSelection;\n  setVoiceMask: SetVoiceMask;\n  frozenNotes: ColoredNote[][];\n  enableManualRemeasuring?: boolean;\n  measureStart?: number;\n  isHiddenRoute?: boolean;\n  slug?: string;\n  currentTonic: number;\n  togglePause?: () => void;\n  seek?: (ms: number) => void;\n  hoveredColors: string[] | null;\n  setHoveredColors: (colors: string[] | null) => void;\n};\n\nexport const StackedSystemLayout: React.FC<\n  SystemLayoutProps & { measureStart?: number; isEmbedded?: boolean }\n> = ({\n  notes,\n  voiceNames,\n  voiceMask,\n  measuresAndBeats,\n  positionSeconds,\n  analysis,\n  mouseHandlers,\n  measureSelection,\n  setVoiceMask,\n  enableManualRemeasuring = false,\n  measureStart,\n  isEmbedded = false,\n  isHiddenRoute = false,\n  slug,\n  currentTonic,\n  togglePause,\n  seek,\n  hoveredColors,\n  setHoveredColors,\n}) => {\n  const [noteHeight, setNoteHeight] = useState<number>(3);\n  const [secondWidth, setSecondWidth] = useState<number>(40);\n  const setSecondWidthCalled = useRef(false);\n\n  useEffect(() => {\n    setSecondWidthCalled.current = false;\n  }, [secondWidth]);\n\n  const prevPositionSeconds = useRef<number>(0);\n  useEffect(() => {\n    prevPositionSeconds.current = positionSeconds;\n  }, [positionSeconds]);\n\n  const voicesSortedByAverageMidiNumber = useMemo(\n    () =>\n      notes\n        .map((voice, voiceIndex) => ({\n          average: getAverageMidiNumber(voice),\n          voiceIndex,\n        }))\n        .sort((a, b) => b.average - a.average)\n        .map(({ voiceIndex }) => ({\n          voiceIndex,\n          notes: notes[voiceIndex],\n        })),\n    [notes],\n  );\n\n  const phraseStarts = useMemo(\n    () => getPhraseStarts(analysis, measuresAndBeats.measures.length),\n    [analysis, measuresAndBeats],\n  );\n\n  const sectionSpans = useMemo(() => {\n    return (analysis.sections ?? [0]).map((sectionStartInPhrases, index) => {\n      const { measures } = measuresAndBeats;\n      const start = phraseStarts[sectionStartInPhrases] - 1;\n      const end =\n        (index + 1 < (analysis.sections ?? [0]).length\n          ? phraseStarts[(analysis.sections ?? [0])[index + 1]]\n          : measures.length) - 1;\n      return [start, end] as MeasuresSpan;\n    });\n  }, [analysis.sections, measuresAndBeats, phraseStarts]);\n\n  const optimalSecondWidth = useMemo(() => {\n    const viewportWidth = window.innerWidth;\n    const targetWidthPercentage = 0.92;\n    const targetWidth = viewportWidth * targetWidthPercentage;\n\n    const annotatedSections = sectionSpans.filter(\n      (span) => span[1] - span[0] < 25,\n    );\n\n    const longestSection = annotatedSections.reduce((longest, current) => {\n      const currentLength =\n        measuresAndBeats.measures[current[1]] -\n        measuresAndBeats.measures[current[0]];\n      const longestLength =\n        measuresAndBeats.measures[longest[1]] -\n        measuresAndBeats.measures[longest[0]];\n      return currentLength > longestLength ? current : longest;\n    }, sectionSpans[0]);\n\n    if (longestSection && annotatedSections.length >= 1) {\n      const longestSectionLength =\n        measuresAndBeats.measures[longestSection[1]] -\n        measuresAndBeats.measures[longestSection[0]];\n\n      // Calculate optimal width for the section\n      let calculatedWidth = targetWidth / longestSectionLength;\n\n      // If we don't have too many measures (using the same filter as above: < 25 measures)\n      // and we're in single time mode, limit to max 300px per measure\n      if (longestSection[1] - longestSection[0] < 25) {\n        // Calculate how many pixels per measure with current width\n        const measureCount = longestSection[1] - longestSection[0];\n        const secondsPerMeasure = longestSectionLength / measureCount;\n        const pixelsPerMeasure = calculatedWidth * secondsPerMeasure;\n\n        // Limit to max 300px per measure\n        if (pixelsPerMeasure > 300) {\n          calculatedWidth = 300 / secondsPerMeasure;\n        }\n      }\n\n      return calculatedWidth;\n    }\n    return secondWidth;\n  }, [notes, measuresAndBeats, sectionSpans]); // Also depend on measuresAndBeats and sectionSpans\n\n  useEffect(() => {\n    setSecondWidth(optimalSecondWidth);\n  }, [optimalSecondWidth]);\n\n  const sections: Section[] = useMemo(() => {\n    return sectionSpans.map((sectionSpan) => {\n      const secondsToX = (seconds) =>\n        (seconds - measuresAndBeats.measures[sectionSpan[0]]) * secondWidth;\n      const xToSeconds = (x) =>\n        x / secondWidth + measuresAndBeats.measures[sectionSpan[0]];\n      return {\n        sectionSpan,\n        secondsToX,\n        xToSeconds,\n        voices: voicesSortedByAverageMidiNumber.map(\n          ({ voiceIndex, notes }) => ({\n            voiceIndex,\n            notes: notes.filter(\n              (note) =>\n                note.span[1] >= measuresAndBeats.measures[sectionSpan[0]] &&\n                note.span[0] + (note.isDrum ? -0.01 : 1e-2) <\n                  measuresAndBeats.measures[sectionSpan[1]],\n            ),\n          }),\n        ),\n      };\n    });\n  }, [\n    sectionSpans,\n    measuresAndBeats,\n    secondWidth,\n    voicesSortedByAverageMidiNumber,\n  ]);\n\n  const parentRef = useRef(null);\n  const sectionRefs = useRef<(HTMLDivElement | null)[]>([]);\n\n  const [scrollInfo, setScrollInfo] = useState<ScrollInfo>({\n    left: -1,\n    right: 100000,\n  });\n\n  const debouncedScroll = useCallback(\n    debounce(\n      (left, right) =>\n        setScrollInfo({\n          left,\n          right,\n        }),\n      50,\n    ),\n    [],\n  );\n\n  const handleScroll = () => {\n    const { scrollLeft, offsetWidth } = parentRef.current;\n    const scrollRight = scrollLeft + offsetWidth;\n\n    debouncedScroll(scrollLeft, scrollRight);\n  };\n\n  useEffect(() => {\n    const parentDiv = parentRef.current;\n    if (parentDiv) {\n      parentDiv.addEventListener(\"scroll\", handleScroll);\n      handleScroll();\n    }\n\n    return () => {\n      if (parentDiv) {\n        parentDiv.removeEventListener(\"scroll\", handleScroll);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (\n      measureStart !== undefined &&\n      parentRef.current &&\n      sectionRefs.current.length > 0\n    ) {\n      const sectionIndex = sections.findIndex(\n        ({ sectionSpan }) =>\n          measureStart >= sectionSpan[0] && measureStart <= sectionSpan[1],\n      );\n\n      if (sectionIndex !== -1) {\n        const sectionElement = sectionRefs.current[sectionIndex];\n        if (sectionElement) {\n          sectionElement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n        }\n      }\n    }\n  }, [measureStart, sections]);\n\n  return (\n    <>\n      <div\n        key=\"innerLeftPanel\"\n        style={{\n          margin: 0,\n          padding: 0,\n          position: \"relative\",\n          overflowX: \"scroll\",\n          overflowY: \"scroll\",\n          width: \"100%\",\n          backgroundColor: \"black\",\n        }}\n        ref={parentRef}\n        className=\"SplitLayout\"\n      >\n        {sections.map(\n          ({ sectionSpan, secondsToX, xToSeconds, voices }, order) => (\n            <div\n              style={{ paddingTop: 10 + noteHeight * 5 }}\n              key={order}\n              ref={(el) => (sectionRefs.current[order] = el)}\n            >\n              <MeasureNumbers\n                measuresAndBeats={measuresAndBeats}\n                analysis={analysis}\n                phraseStarts={phraseStarts}\n                measureSelection={measureSelection}\n                noteHeight={noteHeight}\n                secondsToX={secondsToX}\n                xToSeconds={xToSeconds}\n                sectionSpan={sectionSpan}\n                isHiddenRoute={isHiddenRoute}\n                mouseHandlers={mouseHandlers}\n                togglePause={togglePause}\n                seek={seek}\n              />\n              {voices.map(({ notes, voiceIndex }) => (\n                <div\n                  key={voiceIndex}\n                  style={{ display: \"flex\", flexDirection: \"row\" }}\n                >\n                  <Voice\n                    voiceName={voiceNames[voiceIndex]}\n                    notes={notes}\n                    measuresAndBeats={measuresAndBeats}\n                    analysis={analysis}\n                    mouseHandlers={mouseHandlers}\n                    measureSelection={measureSelection}\n                    cursor={\n                      positionSeconds <\n                        measuresAndBeats.measures[sectionSpan[1]] && (\n                        <Cursor\n                          key={\"cursor\"}\n                          style={{\n                            transition:\n                              !setSecondWidthCalled.current &&\n                              Math.abs(\n                                prevPositionSeconds.current - positionSeconds,\n                              ) < 2\n                                ? \"left 0.37s linear\"\n                                : \"\",\n                            left: secondsToX(positionSeconds),\n                          }}\n                        />\n                      )\n                    }\n                    phraseStarts={phraseStarts}\n                    scrollInfo={scrollInfo}\n                    voiceMask={voiceMask}\n                    setVoiceMask={setVoiceMask}\n                    voiceIndex={voiceIndex}\n                    noteHeight={noteHeight}\n                    secondsToX={secondsToX}\n                    xToSeconds={xToSeconds}\n                    sectionSpan={sectionSpan}\n                    enableManualRemeasuring={enableManualRemeasuring}\n                    hoveredColors={hoveredColors}\n                  />\n                </div>\n              ))}\n            </div>\n          ),\n        )}\n\n        <div style={{ height: 100 }} />\n\n        {!isEmbedded && (\n          <ControlPanel\n            noteHeight={noteHeight}\n            setNoteHeight={setNoteHeight}\n            secondWidth={secondWidth}\n            setSecondWidth={setSecondWidth}\n            setSecondWidthCalled={setSecondWidthCalled}\n            slug={slug}\n            currentTonic={currentTonic}\n            setHoveredColors={setHoveredColors}\n          />\n        )}\n      </div>\n    </>\n  );\n};\n\nconst MERGED_VOICE_NAMES = [\"merged\"];\nconst MERGED_VOICE_MASK = [true];\n\nexport const MergedSystemLayout: React.FC<\n  SystemLayoutProps & { isEmbedded?: boolean }\n> = (props) => {\n  const {\n    notes,\n    voiceNames,\n    voiceMask,\n    setVoiceMask,\n    enableManualRemeasuring = false,\n    isEmbedded = false,\n    slug,\n    currentTonic,\n    hoveredColors,\n    setHoveredColors,\n  } = props;\n\n  const flattenedNotes = useMemo(\n    () => [\n      notes\n        .filter((notes) => (notes && notes[0].isActive) || !notes[0].isDrum)\n        .flat(),\n    ],\n    [notes],\n  );\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <StackedSystemLayout\n        {...props}\n        notes={flattenedNotes}\n        voiceNames={MERGED_VOICE_NAMES}\n        voiceMask={MERGED_VOICE_MASK}\n        enableManualRemeasuring={enableManualRemeasuring}\n        isEmbedded={isEmbedded}\n        slug={slug}\n        hoveredColors={hoveredColors}\n        setHoveredColors={setHoveredColors}\n      />\n      {!isEmbedded && (\n        <MergedVoicesLegend\n          voiceNames={voiceNames}\n          voiceMask={voiceMask}\n          setVoiceMask={setVoiceMask}\n          slug={slug}\n          currentTonic={currentTonic}\n        />\n      )}\n    </div>\n  );\n};\n","import clamp from \"lodash/clamp\";\nimport React, { useCallback, useContext, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { StyledRangeInput } from \"../../Slider\";\nimport { FoldablePianoLegend } from \"../legends/PianoLegend\";\n\nconst TinyLetter = styled.span`\n  font-size: 10px;\n  color: #fff;\n`;\n\nexport const debounce = (func, delay) => {\n  let timer;\n  let frameId;\n\n  return (...args) => {\n    clearTimeout(timer);\n    cancelAnimationFrame(frameId);\n\n    timer = setTimeout(() => {\n      frameId = requestAnimationFrame(() => {\n        func.apply(this, args);\n      });\n    }, delay);\n  };\n};\n\ntype ControlPanelProps = {\n  noteHeight: number;\n  setNoteHeight: (height: number) => void;\n  secondWidth: number;\n  setSecondWidth: (width: number) => void;\n  setSecondWidthCalled?: React.MutableRefObject<boolean>;\n  slug?: string;\n  currentTonic?: number;\n  setHoveredColors: (colors: string[] | null) => void;\n};\n\nconst ControlPanel: React.FC<ControlPanelProps> = ({\n  noteHeight,\n  setNoteHeight,\n  secondWidth,\n  setSecondWidth,\n  setSecondWidthCalled,\n  slug,\n  currentTonic,\n  setHoveredColors,\n}) => {\n  const { registerKeyboardHandler, unregisterKeyboardHandler } =\n    useContext(AppContext);\n\n  const debounceSetNoteHeight = useCallback(debounce(setNoteHeight, 50), []);\n  const debounceSetSecondWidth = useCallback(debounce(setSecondWidth, 50), []);\n\n  const handleSecondWidthChange = useCallback(\n    (newWidth: number) => {\n      if (setSecondWidthCalled) {\n        setSecondWidthCalled.current = true;\n      }\n      setSecondWidth(clamp(newWidth, 2, 150));\n    },\n    [setSecondWidth, setSecondWidthCalled],\n  );\n\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      switch (e.key) {\n        case \"a\":\n          handleSecondWidthChange(secondWidth - 2);\n          break;\n        case \"d\":\n          handleSecondWidthChange(secondWidth + 2);\n          break;\n        case \"s\":\n          debounceSetNoteHeight(Math.min(noteHeight + 0.25, 10));\n          break;\n        case \"w\":\n          debounceSetNoteHeight(Math.max(noteHeight - 0.25, 1));\n          break;\n      }\n    };\n\n    registerKeyboardHandler(\"controlPanel\", handleKeyPress);\n\n    return () => {\n      unregisterKeyboardHandler(\"controlPanel\");\n    };\n  }, [\n    registerKeyboardHandler,\n    unregisterKeyboardHandler,\n    secondWidth,\n    handleSecondWidthChange,\n    noteHeight,\n    debounceSetNoteHeight,\n  ]);\n\n  return (\n    <>\n      <FoldablePianoLegend\n        slug={slug}\n        currentTonic={currentTonic}\n        setHoveredColors={setHoveredColors}\n      />\n      <div\n        style={{\n          position: \"fixed\",\n          bottom: 221,\n          right: -131,\n          zIndex: 100000,\n        }}\n      >\n        <span style={{ position: \"relative\", top: -3, left: 12 }}>\n          <TinyLetter>w</TinyLetter>\n        </span>\n        <span\n          style={{\n            position: \"relative\",\n            top: 169,\n            left: 6,\n          }}\n        >\n          <TinyLetter>s</TinyLetter>\n        </span>\n        <StyledRangeInput\n          min=\"1\"\n          max=\"10\"\n          value={noteHeight}\n          onChange={(e) => debounceSetNoteHeight(parseInt(e.target.value, 10))}\n          style={{\n            transform: \"rotate(90deg)\",\n            transformOrigin: \"bottom left\",\n            width: 160,\n          }}\n        />\n      </div>\n      <div\n        style={{\n          position: \"fixed\",\n          bottom: 35,\n          right: 33,\n          zIndex: 100000,\n        }}\n      >\n        <span style={{ position: \"relative\", top: 0, left: 0 }}>\n          <TinyLetter>a</TinyLetter>\n        </span>\n        <StyledRangeInput\n          min=\"2\"\n          max=\"150\"\n          value={secondWidth}\n          onChange={(e) => debounceSetSecondWidth(parseInt(e.target.value, 10))}\n          style={{\n            width: 240,\n          }}\n        />\n        <span style={{ position: \"relative\", top: 0, left: 0 }}>\n          <TinyLetter>d</TinyLetter>\n        </span>\n      </div>\n    </>\n  );\n};\n\nexport default ControlPanel;\n","import { PitchClass } from \"../analysis\";\n\nconst CHORD_TYPES: { [key: string]: string } = {\n  \"4 3\": \"\",\n  \"3 4\": \"m\",\n  \"3 4 3\": \"m7\",\n  \"4 3 3\": \"7\",\n  \"4 3 4\": \"maj7\",\n  \"3 3 4\": \"7\",\n};\n\nconst PITCH_CLASS_TO_GUITAR_LETTER = {\n  0: \"C\",\n  1: \"C#\",\n  2: \"D\",\n  3: \"D#\",\n  4: \"E\",\n  5: \"F\",\n  6: \"F#\",\n  7: \"G\",\n  8: \"G#\",\n  9: \"A\",\n  10: \"A#\",\n  11: \"B\",\n};\n\nexport const convertChordToGuitarChord = (\n  absoluteRoot: PitchClass,\n  chordType: string,\n): string | null => {\n  if (chordType in CHORD_TYPES) {\n    return `${PITCH_CLASS_TO_GUITAR_LETTER[absoluteRoot]}${CHORD_TYPES[chordType]}`;\n  }\n  return null;\n};\n","import * as React from \"react\";\nimport { useContext } from \"react\";\nimport { AppContext } from \"../../AppContext\";\nimport {\n  Analysis,\n  MeasuresSpan,\n  Snippet,\n  filterSnippetsByAccess,\n} from \"../analysis\";\nimport { AnalysisGrid, MeasureSelection } from \"../AnalysisGrid\";\nimport EXPLANATIONS from \"../corpora/explanations\";\nimport { MouseHandlers } from \"../getNoteRectangles\";\nimport { SecondsConverter } from \"../Rawl\";\nimport { SnippetLink } from \"../snippets/SnippetLink\";\nimport { MeasuresAndBeats } from \"../SystemLayout\";\n\nconst InlineSnippets: React.FC<{\n  measuresAndBeats: MeasuresAndBeats;\n  snippets: Snippet[];\n  secondsToX: SecondsConverter;\n  sectionSpan?: MeasuresSpan;\n  analysis: Analysis;\n  togglePause?: () => void;\n  seek?: (ms: number) => void;\n}> = ({\n  measuresAndBeats,\n  snippets,\n  secondsToX,\n  sectionSpan,\n  analysis,\n  togglePause,\n  seek,\n}) => {\n  const appContext = useContext(AppContext);\n  const { setHoveredMeasuresSpan } = appContext;\n  const [hoveredSnippetIndex, setHoveredSnippetIndex] = React.useState<\n    string | null\n  >(null);\n\n  const filteredSnippets = React.useMemo(() => {\n    return filterSnippetsByAccess(snippets);\n  }, [snippets]);\n\n  const [groupedItems, setGroupedItems] = React.useState<\n    Record<\n      number,\n      Array<{\n        type: \"snippet\" | \"formSection\" | \"explanation\";\n        content: any;\n        sourceSnippet?: Snippet;\n      }>\n    >\n  >({});\n  const itemRefs = React.useRef<(HTMLDivElement | null)[]>([]);\n\n  React.useEffect(() => {\n    // Group snippets, formSections, and explanations by measure\n    const grouped = {} as Record<\n      number,\n      Array<{\n        type: \"snippet\" | \"formSection\" | \"explanation\";\n        content: any;\n        sourceSnippet?: Snippet;\n      }>\n    >;\n\n    // Add formSections first\n    if (analysis.form) {\n      Object.entries(analysis.form).forEach(([measure, section]) => {\n        const measureNum = parseInt(measure);\n        if (!grouped[measureNum]) {\n          grouped[measureNum] = [];\n        }\n        grouped[measureNum].push({ type: \"formSection\", content: section });\n      });\n    }\n\n    // Add snippets and their explanations\n    filteredSnippets.forEach((snippet) => {\n      const measureStart = snippet.measuresSpan[0];\n      if (!grouped[measureStart]) {\n        grouped[measureStart] = [];\n      }\n      grouped[measureStart].push({ type: \"snippet\", content: snippet });\n\n      // If this snippet is hovered and has an explanation, add it\n      if (\n        hoveredSnippetIndex === `${measureStart}-${snippet.tag}` &&\n        EXPLANATIONS[snippet.tag]\n      ) {\n        grouped[measureStart].push({\n          type: \"explanation\",\n          content: EXPLANATIONS[snippet.tag],\n          sourceSnippet: snippet,\n        });\n      }\n    });\n\n    setGroupedItems(grouped);\n  }, [filteredSnippets, analysis.form, hoveredSnippetIndex]);\n\n  React.useEffect(() => {\n    const checkOverlaps = () => {\n      let prevRight = -Infinity;\n      let prevIndex = -1;\n\n      itemRefs.current.forEach((ref, index) => {\n        if (ref) {\n          const rect = ref.getBoundingClientRect();\n          if (rect.left < prevRight) {\n            // Overlap detected\n            const prevMeasure = parseInt(Object.keys(groupedItems)[prevIndex]);\n            const currentMeasure = parseInt(Object.keys(groupedItems)[index]);\n\n            setGroupedItems((prev) => {\n              const updated = { ...prev };\n              updated[prevMeasure] = [\n                ...updated[prevMeasure],\n                ...updated[currentMeasure],\n              ];\n              delete updated[currentMeasure];\n              return updated;\n            });\n          } else {\n            prevRight = rect.right;\n            prevIndex = index;\n          }\n        }\n      });\n    };\n\n    const timeoutId = setTimeout(checkOverlaps, 100);\n    return () => clearTimeout(timeoutId);\n  }, [groupedItems]);\n\n  return (\n    <>\n      {Object.entries(groupedItems).map(([measureStart, items], groupIndex) => {\n        const start = parseInt(measureStart);\n        if (\n          sectionSpan &&\n          (start <= sectionSpan[0] || start > sectionSpan[1])\n        ) {\n          return null;\n        }\n        const left = secondsToX(measuresAndBeats.measures[start - 1]);\n\n        return (\n          <div\n            key={start}\n            ref={(el) => (itemRefs.current[groupIndex] = el)}\n            style={{\n              position: \"absolute\",\n              top: \"-20px\",\n              left: `${left}px`,\n              textAlign: \"left\",\n              color: \"#777\",\n              fontSize: \"11px\",\n              display: \"flex\",\n              flexDirection: \"row\",\n              flexWrap: \"nowrap\",\n            }}\n          >\n            {items.map((item, index) => {\n              if (item.type === \"formSection\") {\n                return (\n                  <div\n                    key={`form_${index}`}\n                    style={{\n                      color: \"#bbb\",\n                      userSelect: \"none\",\n                      marginRight: \"10px\",\n                      fontSize: \"1.2em\",\n                      position: \"relative\",\n                      top: \"5px\",\n                      cursor: \"pointer\",\n                      transition: \"color 0.2s ease\",\n                    }}\n                    onClick={(e) => {\n                      if (seek && togglePause) {\n                        const seekTime =\n                          measuresAndBeats.measures[start - 1] * 1000 - 1000;\n                        seek(seekTime);\n                        // togglePause();\n                        e.stopPropagation();\n                      }\n                    }}\n                    onMouseEnter={(e) => {\n                      e.currentTarget.style.color = \"#fff\";\n                    }}\n                    onMouseLeave={(e) => {\n                      e.currentTarget.style.color = \"#bbb\";\n                    }}\n                  >\n                    {item.content}\n                  </div>\n                );\n              } else if (item.type === \"explanation\") {\n                return (\n                  <div\n                    key={`explanation_${index}`}\n                    style={{\n                      color: \"#fff\",\n                      marginRight: \"10px\",\n                      whiteSpace: \"nowrap\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                    }}\n                  >\n                     {item.content}\n                  </div>\n                );\n              } else {\n                const snippet = item.content;\n                const [chapter, topic] = snippet.tag.split(\":\");\n                const snippetKey = `${measureStart}-${snippet.tag}`;\n\n                return (\n                  <div style={{ marginRight: \"10px\" }}>\n                    <SnippetLink\n                      key={`snippet_${index}`}\n                      chapter={chapter}\n                      topic={topic}\n                      onMouseEnter={() => {\n                        setHoveredMeasuresSpan(snippet.measuresSpan);\n                        setHoveredSnippetIndex(snippetKey);\n                      }}\n                      onMouseLeave={() => {\n                        setHoveredMeasuresSpan(null);\n                        setHoveredSnippetIndex(null);\n                      }}\n                    />\n                  </div>\n                );\n              }\n            })}\n          </div>\n        );\n      })}\n    </>\n  );\n};\n\nexport const MeasureNumbers: React.FC<{\n  measuresAndBeats: MeasuresAndBeats;\n  analysis: Analysis;\n  phraseStarts: number[];\n  measureSelection: MeasureSelection;\n  noteHeight: number;\n  secondsToX: SecondsConverter;\n  xToSeconds: SecondsConverter;\n  sectionSpan?: MeasuresSpan;\n  isHiddenRoute?: boolean;\n  mouseHandlers: MouseHandlers;\n  togglePause?: () => void;\n  seek?: (ms: number) => void;\n}> = ({\n  measuresAndBeats,\n  analysis,\n  phraseStarts,\n  measureSelection,\n  noteHeight,\n  secondsToX,\n  xToSeconds,\n  sectionSpan,\n  isHiddenRoute = false,\n  mouseHandlers,\n  togglePause,\n  seek,\n}) => {\n  const { systemClickHandler } = mouseHandlers;\n\n  return (\n    <div\n      key=\"measure_header\"\n      style={{\n        width:\n          secondsToX(\n            Math.max(\n              measuresAndBeats.measures.at(-1),\n              measuresAndBeats.beats.at(-1),\n            ),\n          ) + 300,\n        height: 16,\n        marginBottom: \"-15px\",\n        marginLeft: \"0px\",\n        zIndex: 90000,\n        position: sectionSpan ? \"relative\" : \"sticky\",\n        top: 0,\n      }}\n      onClick={(e) => systemClickHandler(e, xToSeconds)}\n    >\n      {!isHiddenRoute && (\n        <InlineSnippets\n          measuresAndBeats={measuresAndBeats}\n          snippets={analysis.snippets || []}\n          secondsToX={secondsToX}\n          sectionSpan={sectionSpan}\n          analysis={analysis}\n          togglePause={togglePause}\n          seek={seek}\n        />\n      )}\n      <AnalysisGrid\n        analysis={analysis}\n        measuresAndBeats={measuresAndBeats}\n        midiNumberToY={() => 0}\n        noteHeight={noteHeight}\n        measureSelection={measureSelection}\n        phraseStarts={phraseStarts}\n        midiRange={[0, 0]}\n        showHeader={true}\n        showTonalGrid={false}\n        secondsToX={secondsToX}\n        sectionSpan={sectionSpan}\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useLocalStorage } from \"usehooks-ts\";\nimport { SongNarrative } from \"../SongNarrative\";\n\nexport const FORCED_PANNING_LABEL = \"\";\n\ntype MergedVoicesLegendProps = {\n  voiceNames: string[];\n  voiceMask: boolean[];\n  setVoiceMask: (mask: boolean[]) => void;\n  onForcedPanningChange?: (enabled: boolean) => void;\n  slug: string;\n  currentTonic?: number;\n};\n\nconst MergedVoicesLegend: React.FC<MergedVoicesLegendProps> = ({\n  voiceNames,\n  voiceMask,\n  setVoiceMask,\n  onForcedPanningChange,\n  slug,\n  currentTonic,\n}) => {\n  const [forcedPanning, setForcedPanning] = useLocalStorage(\n    \"forcedPanning\",\n    false,\n  );\n  const isSingleActive = voiceMask.filter((voice) => voice).length === 1;\n\n  const handlePanningToggle = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.checked;\n    setForcedPanning(newValue);\n    onForcedPanningChange?.(newValue);\n    window.location.reload();\n  };\n\n  return (\n    voiceNames.length > 1 && (\n      <div\n        style={{\n          position: \"fixed\",\n          top: 20,\n          right: 0,\n          zIndex: 90000,\n          backgroundColor: \"transparent\",\n          padding: 10,\n        }}\n      >\n        <div\n          style={{\n            marginBottom: 10,\n            borderBottom: \"0.5px solid #333\",\n            paddingBottom: 5,\n          }}\n        >\n          <input\n            type=\"checkbox\"\n            id=\"forcedPanning\"\n            checked={forcedPanning}\n            onChange={handlePanningToggle}\n          />\n          <label\n            htmlFor=\"forcedPanning\"\n            style={{\n              margin: \"0px 0px 0px 0px\",\n              height: 11,\n              display: \"inline\",\n            }}\n          >\n            {FORCED_PANNING_LABEL}\n          </label>\n        </div>\n        {voiceNames.map((voiceName, voiceIndex) => (\n          <div key={voiceIndex}>\n            <input\n              title=\"active\"\n              type=\"checkbox\"\n              onChange={(e) => {\n                e.stopPropagation();\n                let newVoiceMask = voiceMask.map((value, i) =>\n                  i === voiceIndex ? !value : value,\n                );\n                if (newVoiceMask.filter((voice) => voice).length === 0) {\n                  newVoiceMask = voiceMask.map(() => true);\n                }\n                setVoiceMask(newVoiceMask);\n              }}\n              checked={voiceMask[voiceIndex]}\n              style={{\n                margin: \"0px 0px 0px 17px\",\n                height: 11,\n                display: \"inline\",\n              }}\n            />{\" \"}\n            <span\n              style={{\n                cursor: \"pointer\",\n                userSelect: \"none\",\n              }}\n              onClick={(e) => {\n                e.stopPropagation();\n                isSingleActive && voiceMask[voiceIndex]\n                  ? setVoiceMask(voiceMask.map(() => true))\n                  : setVoiceMask(voiceMask.map((_, i) => i === voiceIndex));\n              }}\n            >\n              <span\n                className={`voiceShape-${voiceIndex}`}\n                style={{\n                  display: \"inline-block\",\n                  backgroundColor: voiceMask[voiceIndex] ? \"white\" : \"black\",\n                  padding: \"0px 6px\",\n                  fontSize: \"12px\",\n                  marginRight: 5,\n                  verticalAlign: \"middle\",\n                  color: voiceMask[voiceIndex] ? \"black\" : \"white\",\n                }}\n              >\n                {voiceName}\n              </span>\n            </span>\n          </div>\n        ))}\n        <div style={{ position: \"relative\" }}>\n          <SongNarrative slug={slug} currentTonic={currentTonic} />\n        </div>\n      </div>\n    )\n  );\n};\n\nexport default MergedVoicesLegend;\n","import { faQuoteRight } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Cite from \"citation-js\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { CITES } from \"./cites\";\n\nconst CitationContainer = styled.div`\n  position: relative;\n  display: inline-block;\n  width: 12px;\n`;\n\nconst CitationIcon = styled.span<{ hasUrl?: boolean }>`\n  position: relative;\n  left: -12px;\n  top: -8px;\n  cursor: pointer;\n  color: #666;\n  margin-left: 8px;\n\n  &:hover {\n    color: #999;\n  }\n`;\n\nconst CitationPopup = styled.div<{ position: \"right\" | \"below-left\" }>`\n  position: absolute;\n  ${(props) =>\n    props.position === \"right\"\n      ? `\n    left: calc(100% + 12px);\n    top: 50%;\n    transform: translateY(-50%);\n  `\n      : `\n    right: -12px;\n    top: calc(100% + 12px);\n    transform: none;\n  `}\n  background: rgba(0, 0, 0, 0.95);\n  padding: 20px;\n  border-radius: 8px;\n  border: 1px solid #444;\n  width: 300px;\n  color: #ddd;\n  font-size: 14px;\n  z-index: 1000;\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    ${(props) =>\n      props.position === \"right\"\n        ? `\n      left: -6px;\n      top: 50%;\n      transform: translateY(-50%);\n      border-right: 6px solid #444;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-left: none;\n    `\n        : `\n      top: -6px;\n      right: 12px;\n      transform: none;\n      border-bottom: 6px solid #444;\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-top: none;\n    `}\n    width: 0;\n    height: 0;\n  }\n`;\n\ninterface CitationProps {\n  citeKey: keyof typeof CITES;\n}\n\nexport const Citation: React.FC<CitationProps> = ({ citeKey }) => {\n  const [showCitation, setShowCitation] = React.useState(false);\n  const [formattedCitation, setFormattedCitation] = React.useState<string>(\"\");\n  const [citationUrl, setCitationUrl] = React.useState<string | undefined>();\n  const [position, setPosition] = React.useState<\"right\" | \"below-left\">(\n    \"right\",\n  );\n  const iconRef = React.useRef<HTMLSpanElement>(null);\n\n  React.useEffect(() => {\n    const cite = new Cite(CITES[citeKey].bibtex);\n    const data = cite.format(\"data\", { format: \"object\" })[0];\n\n    // Store URL if it exists\n    setCitationUrl(data.URL || undefined);\n\n    // Format authors/editors\n    let authors = \"\";\n    if (data.author) {\n      authors = data.author\n        .map((author) => `${author.given} ${author.family}`)\n        .join(\" and \");\n    } else if (data.editor) {\n      authors = data.editor\n        .map((editor) => `${editor.given} ${editor.family}`)\n        .join(\" and \");\n    }\n\n    const year = data.issued?.[\"date-parts\"]?.[0]?.[0] || \"\";\n    const title = data.title || \"\";\n\n    // Format where field with optional chaining\n    const whereText = CITES[citeKey]?.where\n      ? ` <span class=\"grey-text\">${CITES[citeKey].where}</span>`\n      : \"\";\n\n    // Combine with italics for authors and year\n    const formattedText = `<i>${authors}</i> (<i>${year}</i>). ${title}.${whereText}`;\n    setFormattedCitation(formattedText);\n  }, [citeKey]);\n\n  const handleMouseEnter = () => {\n    if (iconRef.current) {\n      const rect = iconRef.current.getBoundingClientRect();\n      const rightSpace = window.innerWidth - rect.right;\n      // If there's not enough space on the right (300px for tooltip + 32px padding), show below-left\n      setPosition(rightSpace < 332 ? \"below-left\" : \"right\");\n    }\n    setShowCitation(true);\n  };\n\n  const handleIconClick = (e: React.MouseEvent) => {\n    if (citationUrl) {\n      e.stopPropagation();\n      window.open(citationUrl, \"_blank\", \"noopener,noreferrer\");\n    }\n  };\n\n  return (\n    <CitationContainer>\n      <CitationIcon\n        ref={iconRef}\n        hasUrl={!!citationUrl}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={() => setShowCitation(false)}\n        onClick={handleIconClick}\n      >\n        <FontAwesomeIcon icon={faQuoteRight} size=\"sm\" />\n      </CitationIcon>\n\n      {showCitation && (\n        <CitationPopup position={position}>\n          <style>{`.grey-text { color: #888; }`}</style>\n          <span dangerouslySetInnerHTML={{ __html: formattedCitation }} />\n        </CitationPopup>\n      )}\n    </CitationContainer>\n  );\n};\n","interface Citation {\n  bibtex: string;\n  where?: string;\n}\n\nexport const CITES: Record<string, Citation> = {\n  rings_tuning: {\n    bibtex: `@book{book:2550186,\n   title =     {The Oxford handbook of critical concepts in music theory},\n   editor =    {Steven Rings and Alexander Rehding},\n   publisher = {},\n   isbn =      {9780190454746,0190454741},\n   year =      {2019},\n   series =    {},\n   edition =   {},\n   volume =    {},\n   url = {https://annas-archive.org/md5/e157064be938ddab29b4aab7633dd0a5}\n}`,\n    where: \"pp. 16-20\",\n  },\n  alf_aeolian: {\n    bibtex: `@misc{bjornberg1984aeolian,\n  author = {Alf Bjrnberg},\n  title = {On Aeolian Harmony in Contemporary Popular Music},\n  year = {1984},\n  url = {https://www.tagg.org/xpdfs/bjbgeol.pdf}\n}\n`,\n  },\n  tagg_loops: {\n    bibtex: `@book{tagg2017everyday,\n  title ={Everyday Tonality II: Towards a Tonal Theory of what Most People Hear},\n  author={Tagg, Philip},\n  year={2017},\n  publisher={Mass Media Music Scholars' Press},\n  url={https://hugoribeiro.com.br/area-restrita/Tagg-Everyday_tonality.pdf}\n}\n`,\n    where: \"ch. 13\",\n  },\n  nobile: {\n    bibtex: `@book{book:2586637,\n   title =     {Form as Harmony in Rock Music (Oxford Studies in Music Theory)},\n   author =    {Drew Nobile},\n   publisher = {},\n   isbn =      {2020932174,9780190948368,9780190948351},\n   year =      {2020},\n   series =    {},\n   edition =   {},\n   volume =    {},\n   url =       {https://annas-archive.org/md5/8e6e4c92afc8e11ac3ff486582c5d0c4}\n}\n`,\n  },\n  richards: {\n    bibtex: `@article{richards2017tonal,\n  title={Tonal Ambiguity in Popular Musics Axis Progressions},\n  author={Richards, Mark},\n  journal={Music Theory Online},\n  volume={23},\n  number={3},\n  year={2017},\n  publisher={Society for Music Theory},\n  url={https://mtosmt.org/issues/mto.17.23.3/mto.17.23.3.richards.html}\n}\n`,\n  },\n  vice_despacito: {\n    bibtex: `@online{vice_despacito,\n  author    = {Emily Bootle},\n  title     = {The Actual Science Behind Why Despacito Bangs So Damn Hard},\n  year      = {2017},\n  url       = {https://www.vice.com/en/article/why-despacito-is-so-catchy-music-theory},\n  urldate   = {2024-12-25},\n  note      = {Accessed: 2024-12-25}\n}\n`,\n  },\n} as const;\n","import { faMusic } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nconst DropBox = styled.div`\n  border: 4px dashed #0f0; /* Neon green dashed border */\n  padding: 20px;\n  border-radius: 10px;\n  text-align: center;\n  transition: all 0.2s ease-in-out;\n  background: #000; /* Black background */\n  box-shadow: 0 0 10px #0f0; /* Neon glow effect */\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  font-size: 48px;\n  color: #0f0; /* Neon green color */\n`;\n\nconst Text = styled.p`\n  margin-top: 15px;\n  font-size: 16px;\n  color: #0f0; /* Neon green text */\n`;\n\nexport const FileDropBox: React.FC = () => (\n  <DropBox>\n    <Icon icon={faMusic} />\n    <Text>Drag & Drop your MIDI files here (or anywhere really)</Text>\n  </DropBox>\n);\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst GradientText = styled.span`\n  font-weight: 900;\n  display: inline-block;\n  background-clip: text !important;\n  -webkit-background-clip: text !important;\n  -webkit-text-fill-color: transparent !important;\n  color: transparent !important;\n`;\n\nconst GradientGreen = styled(GradientText)`\n  background: linear-gradient(\n    to right,\n    white,\n    #007000,\n    #00fb47,\n    rgb(120, 120, 120)\n  );\n`;\n\nconst GradientCool = styled(GradientText)`\n  background: linear-gradient(\n    to right,\n    #9500b3,\n    #ea7eff,\n    #0000ff,\n    #03b9d5,\n    #007000,\n    #00fb47\n  );\n`;\n\nconst GradientWarm = styled(GradientText)`\n  background: linear-gradient(to right, #ff0, #ff7328, red, #9500b3);\n`;\n\nconst GradientBright = styled(GradientText)`\n  background: linear-gradient(to right, #00fb47, #03b9d5, #ff0);\n`;\n\nconst GradientDark = styled(GradientText)`\n  background: linear-gradient(to right, #007000, #0000ff, #ff7328);\n`;\n\nconst Container = styled.div`\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n  gap: 7px;\n`;\n\nconst TextLine = styled.span`\n  font-weight: 900;\n`;\n\nconst Metaphors = () => {\n  return (\n    <Container>\n      <span>\n        <TextLine>the tonic note is always white</TextLine>\n      </span>\n      <span>\n        <GradientGreen>tonic chords have a green pitch</GradientGreen>\n      </span>\n      <span>\n        <GradientCool>predominants are in cool colors</GradientCool>\n      </span>\n      <span>\n        <GradientWarm>dominants are in warm colors</GradientWarm>\n      </span>\n      <span>\n        <GradientBright>major mode is brighter</GradientBright>\n      </span>\n      <span>\n        <GradientDark>minor mode is darker</GradientDark>\n      </span>\n    </Container>\n  );\n};\n\nexport default Metaphors;\n","import * as React from \"react\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { VoiceMask } from \"../../App\";\nimport { SecondsConverter, SetVoiceMask } from \"../Rawl\";\nimport { ScrollInfo } from \"../SystemLayout\";\n\nexport const VoiceName: React.FC<{\n  voiceName: string;\n  voiceMask: VoiceMask;\n  setVoiceMask: SetVoiceMask;\n  voiceIndex: number;\n  scrollInfo: ScrollInfo;\n  secondsToX: SecondsConverter;\n  midiNumberToY: (number) => number;\n}> = ({\n  voiceName,\n  voiceMask,\n  setVoiceMask,\n  voiceIndex,\n  scrollInfo,\n  secondsToX,\n  midiNumberToY,\n}) => {\n  const isSingleActive =\n    voiceMask[voiceIndex] && voiceMask.filter((voice) => voice).length === 1;\n\n  const ref = useRef(null);\n  const [top, setTop] = useState(0);\n\n  const updatePosition = () => {\n    if (ref.current) {\n      const outerComponentRect =\n        ref.current.parentElement.getBoundingClientRect();\n      setTop(outerComponentRect.top + window.scrollY - 5);\n    }\n  };\n\n  useEffect(updatePosition, [scrollInfo, secondsToX, midiNumberToY]);\n\n  useEffect(() => {\n    ref.current\n      .closest(\".SplitLayout\")\n      ?.addEventListener(\"scroll\", updatePosition);\n\n    ref.current.closest(\".Rawl\")?.addEventListener(\"scroll\", updatePosition);\n\n    return () => {\n      ref.current\n        .closest(\".SplitLayout\")\n        ?.removeEventListener(\"scroll\", updatePosition);\n      ref.current\n        .closest(\".Rawl\")\n        ?.removeEventListener(\"scroll\", updatePosition);\n    };\n  }, []);\n\n  return (\n    <span\n      style={{\n        position: \"fixed\",\n        top,\n        left: 2,\n        marginLeft: 2,\n        marginTop: 7,\n        fontFamily: \"sans-serif\",\n        fontSize: 12,\n        textShadow: \"0 0 1px black, 0 0 3px black, 0 0 6px black\",\n        userSelect: \"none\",\n        zIndex: 100,\n      }}\n      ref={ref}\n      onClick={(e) => {\n        e.stopPropagation();\n      }}\n    >\n      <span>\n        <button\n          style={{\n            cursor: \"pointer\",\n            userSelect: \"none\",\n            fontFamily: \"sans-serif\",\n            fontSize: 12,\n          }}\n          onClick={(e) => {\n            e.stopPropagation();\n            isSingleActive\n              ? setVoiceMask(voiceMask.map(() => true))\n              : setVoiceMask(voiceMask.map((_, i) => i === voiceIndex));\n          }}\n        >\n          {isSingleActive ? \"Unsolo All\" : \"Solo\"}\n        </button>\n\n        <input\n          title=\"active\"\n          type=\"checkbox\"\n          onChange={(e) => {\n            e.stopPropagation();\n            setVoiceMask(\n              voiceMask.map((value, i) => (i === voiceIndex ? !value : value)),\n            );\n          }}\n          checked={voiceMask[voiceIndex]}\n          style={{\n            margin: \"0px 0px 0px 17px\",\n            height: 11,\n            display: isSingleActive ? \"none\" : \"inline\",\n          }}\n        />\n      </span>\n      <span\n        style={{\n          color: voiceMask[voiceIndex] ? \"white\" : \"#444\",\n          marginLeft: \"10px\",\n          zIndex: 100,\n        }}\n      >\n        {voiceName}\n      </span>\n    </span>\n  );\n};\n","// The simplest possible algorithm:\n// Count all pitched midi events, find a fifth where min count of two notes\n// will be the highest\n\nimport { MeasuresAndBeats } from \"./SystemLayout\";\nimport { PitchClass } from \"./analysis\";\nimport { Note } from \"./parseMidi\";\n\nexport const findTonic = (notes: Note[]): PitchClass | -1 => {\n  const countPitchClasses = [];\n  for (let i = 0; i < 12; ++i) {\n    countPitchClasses.push(0);\n  }\n  notes.forEach(\n    (note) =>\n      (countPitchClasses[note.note.midiNumber % 12] +=\n        note.span[1] - note.span[0]),\n  );\n  let bestTonic = -1;\n  let bestValue = -Infinity;\n  const scores = [];\n  for (let i = 0; i < 12; ++i) {\n    const currentValue =\n      1.5 * countPitchClasses[i] +\n      0.7 * countPitchClasses[(i + 4) % 12] +\n      countPitchClasses[(i + 7) % 12] -\n      5 *\n        Math.min(\n          countPitchClasses[(i + 3) % 12],\n          countPitchClasses[(i + 4) % 12],\n        ) -\n      20 * countPitchClasses[(i + 1) % 12] -\n      7 * countPitchClasses[(i + 6) % 12];\n\n    scores.push(currentValue);\n    if (currentValue > bestValue) {\n      bestTonic = i;\n      bestValue = currentValue;\n    }\n  }\n  console.log(\"count\", countPitchClasses);\n  console.log(\"scores\", scores);\n  console.log(\"bestValue\", bestValue);\n  console.log(\"bestTonic\", bestTonic);\n  return bestTonic as PitchClass | -1;\n};\n\nexport const findFirstPhraseStart = (\n  notes: Note[],\n  measuresAndBeats: MeasuresAndBeats,\n): number => {\n  let result = -1;\n  const { measures, beats } = measuresAndBeats;\n  // Find left-most note with pitch. If it's on beat 1, that's the measure. Otherwise it's anacrusis.\n  let earliestOnset = Math.min(\n    ...notes.filter((note) => !note.isDrum).map((note) => note.span[0]),\n  );\n\n  while (result + 1 < measures.length) {\n    if (earliestOnset < measures[result + 1]) {\n      break;\n    }\n    result++;\n  }\n  if (\n    earliestOnset > measures[result] * 0.75 + measures[result + 1] * 0.25 ||\n    beats.filter(\n      (beat) => beat > measures[result] && beat < measures[result + 1],\n    ).length <\n      beats.filter(\n        (beat) => beat > measures[result + 1] && beat < measures[result + 2],\n      ).length\n  ) {\n    result++;\n  }\n  return result;\n};\n","import React, { useContext, useEffect } from \"react\";\nimport { AppContext } from \"../../AppContext\";\n\nexport type SystemLayout = \"merged\" | \"frozen\";\n\ninterface LayoutSelectorProps {\n  setSystemLayout: React.Dispatch<React.SetStateAction<SystemLayout>>;\n}\n\nconst LayoutSelector: React.FC<LayoutSelectorProps> = ({ setSystemLayout }) => {\n  const { registerKeyboardHandler, unregisterKeyboardHandler } =\n    useContext(AppContext);\n\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (e.key === \"f\") {\n        setSystemLayout((prevLayout) => {\n          if (prevLayout === \"frozen\") return \"merged\";\n          return \"frozen\";\n        });\n      }\n    };\n\n    registerKeyboardHandler(\"frozenLayoutSwitch\", handleKeyPress);\n    return () => {\n      unregisterKeyboardHandler(\"frozenLayoutSwitch\");\n    };\n  }, [registerKeyboardHandler, unregisterKeyboardHandler, setSystemLayout]);\n\n  return <></>;\n};\n\nexport default LayoutSelector;\n","import minBy from \"lodash/minBy\";\nimport { MeasuresAndBeats } from \"./SystemLayout\";\nimport { ManualMeasures } from \"./analysis\";\nimport { Note } from \"./parseMidi\";\n\nconst snap = (time: number, notes: Note[]) =>\n  minBy(notes, ({ span: [start] }) => Math.abs(time - start)).span[0];\n\nexport const buildManualMeasuresAndBeats = (\n  manualMeasures: ManualMeasures,\n  notes: Note[],\n): MeasuresAndBeats => {\n  const { measureStarts, beatsPerMeasure } = manualMeasures;\n  const measures = [measureStarts[1] ?? 0];\n  const beats = [];\n  let currentBeatsPerMeasure = beatsPerMeasure[1] ?? 4;\n  let previousBeatsPerMeasure = currentBeatsPerMeasure;\n  let measureIndex = 1;\n  let currentMeasureLength = 1.0;\n  while (true) {\n    measureIndex++;\n    let newMeasure =\n      measureStarts[measureIndex] ??\n      snap(\n        measures.at(-1) +\n          (currentMeasureLength * currentBeatsPerMeasure) /\n            previousBeatsPerMeasure,\n        notes,\n      );\n    if (newMeasure - measures.at(-1) < 0.01) {\n      newMeasure = measures.at(-1) + 2;\n    }\n    for (let i = 1; i < currentBeatsPerMeasure; ++i) {\n      beats.push(\n        (measures.at(-1) * (currentBeatsPerMeasure - i)) /\n          currentBeatsPerMeasure +\n          (newMeasure * i) / currentBeatsPerMeasure,\n      );\n    }\n    previousBeatsPerMeasure = currentBeatsPerMeasure;\n    currentBeatsPerMeasure =\n      beatsPerMeasure[measureIndex] ?? currentBeatsPerMeasure;\n    currentMeasureLength = newMeasure - measures.at(-1);\n    measures.push(newMeasure);\n    if (notes.every((note) => note.span[1] < newMeasure)) {\n      break;\n    }\n  }\n  return { measures, beats };\n};\n","import cloneDeep from \"lodash/cloneDeep\";\nimport { Note } from \"./parseMidi\";\nimport { SecondsSpan } from \"./Rawl\";\nimport { MeasuresAndBeats } from \"./SystemLayout\";\n\nexport const TIME_SCALE_FACTOR = 100;\n\nexport type PitchClass = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11;\n\nexport type MeasuresSpan = [number, number]; // one-based numbering, last measure inclusive. [1, 8] is the first eight measures\n\nexport type Modulations = { [oneIndexedMeasureStart: number]: PitchClass };\n\nexport type MeasureRenumbering = {\n  [oneIndexedMeasureStart: number]: PitchClass;\n};\n\nexport type ManualMeasures = {\n  measureStarts: { [oneIndexedMeasureStart: number]: number };\n  beatsPerMeasure: { [oneIndexedMeasureStart: number]: number };\n};\n\n// Add this new type for delta-coded arrays\nexport type DeltaCoded<T extends number> = [T, ...number[]];\n\nexport interface CompressedNotes {\n  [length: number]: {\n    [midiNumber: number]: DeltaCoded<number>;\n  };\n}\n\nexport interface FrozenNotesType {\n  notesInVoices: CompressedNotes[];\n  analysis: FrozenAnalysis;\n}\n\nexport interface Snippet {\n  tag: string;\n  frozenNotes: FrozenNotesType;\n  measuresSpan: [number, number];\n  secondsSpan?: SecondsSpan;\n  phraseStarts?: number[];\n}\n\nexport type MidiNumberToNoteSpans = {\n  [midiNumber: number]: SecondsSpan[];\n};\n\nexport type FrozenAnalysis = {\n  modulations: Modulations;\n  measuresAndBeats: {\n    measures: DeltaCoded<number>;\n    beats: DeltaCoded<number>;\n  };\n};\n\nexport type FrozenNotes = {\n  notesInVoices: MidiNumberToNoteSpans[]; // first dimension is voice\n  analysis: FrozenAnalysis;\n};\n\nexport type Analysis = {\n  modulations: Modulations;\n  phrasePatch?: { measure: number; diff: number }[];\n  sections?: number[];\n  measureRenumbering?: MeasureRenumbering;\n  measures?: ManualMeasures;\n  snippets?: Snippet[];\n\n  // outdated, was used in winter 2023..24 for rock prototype\n  comment: string;\n  tags: string[];\n  form: { [oneIndexedMeasureStart: number]: string };\n};\n\nexport type Analyses = {\n  [path: string]: Analysis;\n};\n\nexport const ANALYSIS_STUB: Analysis = {\n  modulations: { 1: null },\n  comment: \"\",\n  tags: [],\n  form: {},\n  phrasePatch: [],\n  sections: [0], // in phrases\n};\n\nconst removeIdleModulations = (modulations: Modulations): Modulations => {\n  const sortedMeasures = Object.keys(modulations)\n    .map(Number)\n    .sort((a, b) => a - b);\n\n  let lastValue = modulations[sortedMeasures[0]];\n  const result: Modulations = { 1: lastValue };\n\n  for (const measure of sortedMeasures.slice(1)) {\n    const currentValue = modulations[measure];\n    if (currentValue !== lastValue) {\n      result[measure] = currentValue;\n      lastValue = currentValue;\n    }\n  }\n\n  return result;\n};\n\nexport const getNewAnalysis = (\n  note: Note | null,\n  selectedMeasure: number | null,\n  enableManualRemeasuring: boolean,\n  analysis: Analysis,\n): Analysis => {\n  let update: Partial<Analysis> = {};\n\n  if (note) {\n    if (enableManualRemeasuring) {\n      if (selectedMeasure) {\n        update.measures = cloneDeep(analysis.measures) ?? {\n          measureStarts: {},\n          beatsPerMeasure: {},\n        };\n        update.measures.measureStarts[selectedMeasure] = note.span[0];\n      }\n    } else {\n      // TODO: if !selectedMeasure, then only apply modulation if we're inside\n      // the very first modulatory region (if there's already two)\n      // This probably has a circular dependency since we probably need to\n      // build measures to know where exactly our note falls.\n      if (!selectedMeasure) {\n        return analysis;\n      }\n      let newModulations = {\n        ...(analysis.modulations || []),\n        [selectedMeasure]: (note.note.midiNumber % 12) as PitchClass,\n      };\n      update.modulations = removeIdleModulations(newModulations);\n    }\n  }\n\n  return { ...analysis, ...update };\n};\n\nexport const advanceAnalysis = (\n  note: Note | null,\n  selectedMeasure: number | null,\n  enableManualRemeasuring: boolean,\n  selectMeasure: (_: null) => void,\n  analysis: Analysis,\n  commitAnalysisUpdate: (analysisUpdate: Partial<Analysis>) => void,\n) => {\n  const newAnalysis = getNewAnalysis(\n    note,\n    selectedMeasure,\n    enableManualRemeasuring,\n    analysis,\n  );\n\n  selectMeasure(null);\n  commitAnalysisUpdate(newAnalysis);\n};\n\n// Add these utility functions for delta coding and decoding\nexport function deltaCoding(arr: number[]): DeltaCoded<number> {\n  if (arr.length === 0) return [0];\n  const result: DeltaCoded<number> = [arr[0]];\n  for (let i = 1; i < arr.length; i++) {\n    result.push(arr[i] - arr[i - 1]);\n  }\n  return result;\n}\n\nexport function deltaDecoding(encoded: DeltaCoded<number>): number[] {\n  const result: number[] = [encoded[0]];\n  for (let i = 1; i < encoded.length; i++) {\n    result.push(result[i - 1] + encoded[i]);\n  }\n  return result;\n}\n\nexport function undeltaCoding(encoded: DeltaCoded<number>): number[] {\n  return deltaDecoding(encoded);\n}\n\nexport function adjustModulations(\n  modulations: Modulations,\n  measureStart: number,\n): Modulations {\n  return Object.fromEntries(\n    Object.entries(modulations).map(([measure, tonic]) => [\n      parseInt(measure) + measureStart - 1,\n      tonic,\n    ]),\n  );\n}\n\nexport const rehydrateNotes = (snippet: Snippet): Note[][] => {\n  const { frozenNotes } = snippet;\n\n  return frozenNotes.notesInVoices.map((voice, voiceIndex) => {\n    const notes: Note[] = [];\n    Object.entries(voice).forEach(([length, midiNumbers]) => {\n      Object.entries(midiNumbers).forEach(([midiNumber, starts]) => {\n        const decodedStarts = deltaDecoding(starts as DeltaCoded<number>);\n        decodedStarts.forEach((start) => {\n          const startTime = start / TIME_SCALE_FACTOR;\n          const lengthTime = parseInt(length) / TIME_SCALE_FACTOR;\n          const absoluteSpan: [number, number] = [\n            startTime,\n            startTime + lengthTime,\n          ];\n          notes.push({\n            note: { midiNumber: parseInt(midiNumber) },\n            id: `${voiceIndex}_${startTime}_${lengthTime}_${midiNumber}`,\n            isDrum: false,\n            span: absoluteSpan,\n            voiceIndex,\n          });\n        });\n      });\n    });\n    return notes;\n  });\n};\n\nexport function rehydrateAnalysis(\n  frozenAnalysis: FrozenNotesType[\"analysis\"],\n  measureStart: number = 1,\n): {\n  analysis: Analysis;\n  measuresAndBeats: MeasuresAndBeats;\n} {\n  return {\n    analysis: {\n      modulations: adjustModulations(frozenAnalysis.modulations, measureStart),\n      comment: \"\",\n      tags: [],\n      form: {},\n    },\n    measuresAndBeats: {\n      measures: undeltaCoding(frozenAnalysis.measuresAndBeats.measures).map(\n        (time) => time / TIME_SCALE_FACTOR,\n      ),\n      beats: undeltaCoding(frozenAnalysis.measuresAndBeats.beats).map(\n        (time) => time / TIME_SCALE_FACTOR,\n      ),\n    },\n  };\n}\n\nexport function rehydrateSnippet(snippet: Snippet): {\n  rehydratedNotes: Note[][];\n  rehydratedAnalysis: Analysis;\n  rehydratedMeasuresAndBeats: MeasuresAndBeats;\n} {\n  const rehydratedNotes = rehydrateNotes(snippet);\n  const {\n    analysis: rehydratedAnalysis,\n    measuresAndBeats: rehydratedMeasuresAndBeats,\n  } = rehydrateAnalysis(snippet.frozenNotes.analysis, snippet.measuresSpan[0]);\n\n  // Ensure modulations are properly adjusted\n  rehydratedAnalysis.modulations = adjustModulations(\n    snippet.frozenNotes.analysis.modulations,\n    snippet.measuresSpan[0],\n  );\n\n  return {\n    rehydratedNotes,\n    rehydratedAnalysis,\n    rehydratedMeasuresAndBeats,\n  };\n}\n\nexport function getSnippetTags(analysis: Analysis): string[] {\n  return analysis.snippets?.flatMap((snippet) => snippet.tag.split(\" \")) || [];\n}\n\nexport const getPhraseStarts = (\n  analysis: Analysis,\n  numMeasures: number,\n): number[] => {\n  const result = [];\n  let i;\n  for (i = 1; i < numMeasures; i += 4) {\n    result.push(i);\n  }\n  result.push(i);\n  for (const { measure, diff } of analysis.phrasePatch || []) {\n    if (result.indexOf(measure) === -1) {\n      console.log(`bad phrasePatch, measure ${measure} not found`);\n      break;\n    }\n    for (let j = result.indexOf(measure); j < result.length; ++j) {\n      result[j] += diff;\n    }\n    while (result.at(-1) + 4 < numMeasures) {\n      result.push(result.at(-1) + 4);\n    }\n    if (result[0] !== 1) {\n      result.unshift(1);\n    }\n  }\n\n  return result;\n};\n\nexport function getSnippetsStartingAtMeasure(\n  snippets: Snippet[],\n  measure: number,\n): string[] {\n  return snippets\n    .filter((snippet) => snippet.measuresSpan[0] === measure)\n    .map((snippet) => snippet.tag);\n}\n\nexport function filterSnippetsByAccess(snippets: Snippet[]): Snippet[] {\n  return snippets.filter((snippet) => {\n    const [chapter] = snippet.tag.split(\":\");\n    return chapter.trim() !== \"book\";\n  });\n}\n","import { Analysis } from \"./analysis\";\nimport { MAJOR_SCALE_MAP, MINOR_SCALE_MAP } from \"./editor/types\";\nimport { ColoredNote, ColoredNotesInVoices, Note } from \"./parseMidi\";\n\nconst PITCH_CLASS_TO_NOTE_NAME: { [key: number]: string } = {\n  0: \"C\",\n  1: \"C#\", // or Db\n  2: \"D\",\n  3: \"D#\", // or Eb\n  4: \"E\",\n  5: \"F\",\n  6: \"F#\", // or Gb\n  7: \"G\",\n  8: \"G#\", // or Ab\n  9: \"A\",\n  10: \"A#\", // or Bb\n  11: \"B\",\n};\n\nconst FLAT_NOTE_NAMES: { [key: number]: string } = {\n  1: \"Db\",\n  3: \"Eb\",\n  6: \"Gb\",\n  8: \"Ab\",\n  10: \"Bb\",\n};\n\n/**\n * Get the measure start and end times in seconds\n */\nconst getMeasureSpan = (\n  measureIndex: number,\n  measures: number[],\n): [number, number] => {\n  const measureStart = measures[measureIndex];\n  const measureEnd =\n    measures[measureIndex + 1] ||\n    measures[measureIndex] +\n      (measures[measureIndex] - measures[measureIndex - 1] || 0);\n  return [measureStart, measureEnd];\n};\n\n/**\n * Get all beats within a measure\n */\nconst getBeatsInMeasure = (\n  measureIndex: number,\n  measures: number[],\n  beats: number[],\n): number[] => {\n  if (measures.length <= measureIndex + 1) {\n    return [];\n  }\n\n  // Get the time span of the measure\n  const measureSpan = getMeasureSpan(measureIndex, measures);\n\n  // Find all beats that fall within this measure\n  const beatsInMeasure = beats.filter(\n    (beat) => beat >= measureSpan[0] && beat < measureSpan[1],\n  );\n\n  return beatsInMeasure;\n};\n\n/**\n * Get the measure index for a note\n */\nconst getNoteMeasure = (note: Note, measures: number[] | null): number => {\n  if (!measures) {\n    return -1;\n  }\n\n  // Get the note start time\n  const noteStart = note.span[0];\n\n  // If we have fewer than 2 measures, assign to the first measure\n  if (measures.length < 2) {\n    return 0;\n  }\n\n  // Define EPSILON in seconds by estimating the duration of a 64th note\n  // based on the tempo implied by the measure durations\n  // Estimate seconds per beat from the first two measures (assuming 4 beats per measure)\n  const firstMeasureDuration = measures[1] - measures[0];\n  const secondsPerBeat = firstMeasureDuration / 4; // Assuming 4/4 time signature\n\n  // A 64th note is 0.0625 beats, convert to seconds\n  const EPSILON = 0.0625 * secondsPerBeat;\n\n  // Find the leftmost measure for which noteStart < measureEnd - EPSILON\n  for (let i = 0; i < measures.length - 1; i++) {\n    const measureEnd = measures[i + 1];\n\n    // If the note starts before measureEnd - EPSILON, assign it to this measure\n    if (noteStart < measureEnd - EPSILON) {\n      return i;\n    }\n  }\n\n  // If we haven't found a measure yet, assign to the last measure\n  return measures.length - 2;\n};\n\n/**\n * Get all notes in the same measure and voice as the clicked note\n */\nconst getNotesInSameMeasureAndVoice = (\n  note: Note,\n  coloredNotes: ColoredNotesInVoices,\n  measuresAndBeats: { measures: number[]; beats: number[] },\n): {\n  notesInMeasure: ColoredNote[];\n  measureSpan: [number, number];\n  beatsInMeasure: number[];\n  measureIndex: number;\n} => {\n  const voiceIndex = note.voiceIndex;\n  const measureIndex = getNoteMeasure(note, measuresAndBeats.measures);\n\n  // Get all notes in the same voice and measure\n  const notesInMeasure = coloredNotes[voiceIndex].filter(\n    (otherNote) =>\n      getNoteMeasure(otherNote, measuresAndBeats.measures) === measureIndex,\n  );\n\n  // Get measure span (start and end time)\n  const measureSpan = getMeasureSpan(measureIndex, measuresAndBeats.measures);\n\n  // Get all beats within this measure\n  const beatsInMeasure = getBeatsInMeasure(\n    measureIndex,\n    measuresAndBeats.measures,\n    measuresAndBeats.beats,\n  );\n\n  return {\n    notesInMeasure,\n    measureSpan,\n    beatsInMeasure,\n    measureIndex,\n  };\n};\n\n/**\n * Get all notes in a specific measure and voice\n */\nconst getNotesInMeasureAndVoice = (\n  voiceIndex: number,\n  measureIndex: number,\n  coloredNotes: ColoredNotesInVoices,\n  measuresAndBeats: { measures: number[]; beats: number[] },\n): {\n  notesInMeasure: ColoredNote[];\n  measureSpan: [number, number];\n  beatsInMeasure: number[];\n} => {\n  // Make sure voice index is valid\n  if (voiceIndex < 0 || voiceIndex >= coloredNotes.length) {\n    return { notesInMeasure: [], measureSpan: [0, 0], beatsInMeasure: [] };\n  }\n\n  // Make sure measure index is valid\n  if (\n    measureIndex < 0 ||\n    measureIndex >= measuresAndBeats.measures.length - 1\n  ) {\n    return { notesInMeasure: [], measureSpan: [0, 0], beatsInMeasure: [] };\n  }\n\n  // Get all notes in the specified voice and measure\n  const notesInMeasure = coloredNotes[voiceIndex].filter(\n    (note) => getNoteMeasure(note, measuresAndBeats.measures) === measureIndex,\n  );\n\n  // Get measure span (start and end time)\n  const measureSpan = getMeasureSpan(measureIndex, measuresAndBeats.measures);\n\n  // Get all beats within this measure\n  const beatsInMeasure = getBeatsInMeasure(\n    measureIndex,\n    measuresAndBeats.measures,\n    measuresAndBeats.beats,\n  );\n\n  return {\n    notesInMeasure,\n    measureSpan,\n    beatsInMeasure,\n  };\n};\n\n/**\n * Split notes in a measure into multiple non-overlapping lines\n * Notes are considered part of the same line if they don't overlap (except chords)\n *\n * @param notes Array of colored notes in a measure\n * @param secondsPerBeat Duration of one beat in seconds (used for EPSILON calculation)\n * @returns Array of note arrays, where each array represents a non-overlapping line\n */\nconst splitNotesIntoLines = (\n  notes: ColoredNote[],\n  secondsPerBeat: number,\n): ColoredNote[][] => {\n  if (!notes || notes.length === 0) {\n    return [];\n  }\n\n  // Sort notes by start time\n  const sortedNotes = [...notes].sort((a, b) => a.span[0] - b.span[0]);\n\n  // Calculate EPSILON as 1/64th note or 0.015625 beats\n  const EPSILON = 0.015625 * secondsPerBeat;\n\n  // Array to hold each line of non-overlapping notes\n  const lines: ColoredNote[][] = [];\n  let currentLine: ColoredNote[] = [];\n\n  // Keep processing until all notes are assigned to a line\n  const remainingNotes = [...sortedNotes];\n\n  while (remainingNotes.length > 0) {\n    currentLine = [];\n    let previousNoteEnd = -Infinity;\n\n    // Try to assign as many non-overlapping notes as possible to the current line\n    for (let i = 0; i < remainingNotes.length; i++) {\n      const note = remainingNotes[i];\n\n      // Check if this note can be added to the current line\n      // Either it starts after the previous note ends (non-overlapping)\n      // Or it's part of a chord (same start and end times within EPSILON)\n      if (\n        previousNoteEnd === -Infinity || // First note in the line\n        note.span[0] >= previousNoteEnd - EPSILON || // Non-overlapping\n        (currentLine.length > 0 &&\n          Math.abs(currentLine[currentLine.length - 1].span[0] - note.span[0]) <\n            EPSILON &&\n          Math.abs(currentLine[currentLine.length - 1].span[1] - note.span[1]) <\n            EPSILON)\n      ) {\n        // Part of chord\n\n        // Add this note to the current line\n        currentLine.push(note);\n        // Update the previous note end time\n        previousNoteEnd = note.span[1];\n        // Remove it from remaining notes\n        remainingNotes.splice(i, 1);\n        // Adjust index since we removed an element\n        i--;\n      }\n    }\n\n    // If we managed to add notes to the current line, add it to our lines array\n    if (currentLine.length > 0) {\n      lines.push(currentLine);\n    } else {\n      // Safety check: if we couldn't add any notes, break to avoid infinite loop\n      break;\n    }\n  }\n\n  return lines;\n};\n\n/**\n * Log information about notes in a specific measure and voice\n * Now returns an array of rawl insert commands for multiple lines\n */\nconst logMeasureNotesInformation = (\n  voiceIndex: number,\n  measureIndex: number,\n  coloredNotes: ColoredNotesInVoices,\n  measuresAndBeats: { measures: number[]; beats: number[] },\n  globalKeyInfo?: {\n    isMinor: boolean;\n    rootPitchClass: number;\n    baseMidiNumber?: number;\n  },\n): string[] => {\n  const { notesInMeasure, measureSpan, beatsInMeasure } =\n    getNotesInMeasureAndVoice(\n      voiceIndex,\n      measureIndex,\n      coloredNotes,\n      measuresAndBeats,\n    );\n\n  // If no notes found in this measure, return empty array\n  if (notesInMeasure.length === 0) {\n    return [];\n  }\n\n  // Calculate seconds per beat for EPSILON determination\n  const measureDuration = measureSpan[1] - measureSpan[0];\n  const totalBeats = beatsInMeasure.length + 1;\n  const secondsPerBeat = measureDuration / totalBeats;\n\n  // Split notes into multiple non-overlapping lines\n  const lines = splitNotesIntoLines(notesInMeasure, secondsPerBeat);\n\n  // Process each line separately\n  const commands: string[] = [];\n\n  for (const line of lines) {\n    // Convert line to beat timing\n    const beatBasedTiming = convertNotesToBeatTiming(\n      line,\n      measureSpan,\n      beatsInMeasure,\n      globalKeyInfo,\n    );\n\n    // Prepare the Rawl syntax with \"i \" prefix\n    const rawlSyntaxWithI = \"i \" + beatBasedTiming.rawlSyntaxRepresentation;\n\n    // Only add non-empty commands\n    if (beatBasedTiming.rawlSyntaxRepresentation.trim().length > 0) {\n      commands.push(rawlSyntaxWithI);\n    }\n  }\n\n  return commands;\n};\n\n/**\n * Convert notes in a measure to a linear textual format\n *\n * This finds the lowest MIDI number note and uses its pitch class as a reference point.\n * All MIDI numbers are made relative to this base value (lowestMidi - basePitchClass).\n *\n * @param notes - Array of colored notes in a measure\n * @returns A JSON string representation of the notes\n */\nconst convertNotesToLinearFormat = (notes: ColoredNote[]): string => {\n  if (!notes || notes.length === 0) {\n    return \"[]\";\n  }\n\n  // Find the lowest MIDI number note\n  const notesWithMidi = notes.filter(\n    (note) => !note.isDrum && note.note.midiNumber !== undefined,\n  );\n  if (notesWithMidi.length === 0) {\n    return \"[]\"; // No valid notes found\n  }\n\n  const lowestMidiNote = notesWithMidi.reduce(\n    (lowest, current) =>\n      current.note.midiNumber < lowest.note.midiNumber ? current : lowest,\n    notesWithMidi[0],\n  );\n\n  const lowestMidi = lowestMidiNote.note.midiNumber;\n\n  // Get the colorPitchClass of the lowest note\n  const basePitchClass =\n    typeof lowestMidiNote.colorPitchClass === \"number\"\n      ? lowestMidiNote.colorPitchClass % 12\n      : lowestMidi % 12;\n\n  // Calculate the base value to subtract from all MIDI numbers\n  const baseValue = lowestMidi - basePitchClass;\n\n  // Create a serializable representation of each note\n  const serializedNotes = notes\n    .map((note) => {\n      // Skip drum notes or notes without MIDI numbers\n      if (note.isDrum || note.note.midiNumber === undefined) {\n        return null;\n      }\n\n      const relativeMidiNumber = note.note.midiNumber - baseValue;\n\n      return {\n        span: [\n          parseFloat(note.span[0].toFixed(2)),\n          parseFloat(note.span[1].toFixed(2)),\n        ],\n        colorPitchClass:\n          typeof note.colorPitchClass === \"number\"\n            ? note.colorPitchClass % 12\n            : note.note.midiNumber % 12,\n        relativeMidiNumber,\n      };\n    })\n    .filter(Boolean); // Remove null entries\n\n  return JSON.stringify(serializedNotes);\n};\n\n/**\n * Interface for a chord - a group of notes that should be played simultaneously\n */\ninterface Chord {\n  notes: ColoredNote[];\n  span: [number, number]; // Combined span [start, end]\n}\n\n/**\n * Group notes into chords based on their timing\n *\n * @param notes - Array of colored notes sorted by start time\n * @param secondsPerBeat - Duration of one beat in seconds\n * @returns Array of chords (groups of notes)\n */\nconst groupNotesIntoChords = (\n  notes: ColoredNote[],\n  secondsPerBeat: number,\n): Chord[] => {\n  if (!notes || notes.length === 0) {\n    return [];\n  }\n\n  // Calculate the chord threshold as 0.125 * 2/3 * beat length in seconds\n  // This is about a triplet 32nd note duration - allows for slight variation in chord note timings\n  const chordThreshold = 0.125 * (2 / 3) * secondsPerBeat;\n\n  const chords: Chord[] = [];\n  let currentChord: Chord | null = null;\n\n  // Process each note in order (they're already sorted by start time)\n  for (const note of notes) {\n    // Skip drum notes or notes without MIDI numbers\n    if (note.isDrum || note.note.midiNumber === undefined) {\n      continue;\n    }\n\n    const noteStart = note.span[0];\n    const noteEnd = note.span[1];\n\n    if (!currentChord) {\n      // Start a new chord with this note\n      currentChord = {\n        notes: [note],\n        span: [noteStart, noteEnd],\n      };\n    } else {\n      // Get the current chord's end time\n      const currentChordEnd = currentChord.span[1];\n\n      // If this note starts after the current chord has ended (accounting for a small threshold),\n      // start a new chord. Otherwise, add it to the current chord.\n      if (noteStart >= currentChordEnd - chordThreshold) {\n        // Finalize the current chord\n        chords.push(currentChord);\n\n        // Start a new chord with this note\n        currentChord = {\n          notes: [note],\n          span: [noteStart, noteEnd],\n        };\n      } else {\n        // Add this note to the current chord\n        currentChord.notes.push(note);\n\n        // Update the end time of the chord if this note ends later\n        if (noteEnd > currentChord.span[1]) {\n          currentChord.span[1] = noteEnd;\n        }\n      }\n    }\n  }\n\n  // Add the last chord if it exists\n  if (currentChord) {\n    chords.push(currentChord);\n  }\n\n  return chords;\n};\n\n/**\n * Convert notes from seconds-based timing to measure-dependent beat-based timing\n *\n * @param notes - Array of colored notes in a measure\n * @param measureSpan - Start and end time of the measure in seconds [start, end]\n * @param beatsInMeasure - Array of beat times in seconds within the measure\n * @param globalKeyInfo - Optional global key information to override per-measure detection\n * @returns An object containing both the array of processed notes and a JSON string representation\n */\nconst convertNotesToBeatTiming = (\n  notes: ColoredNote[],\n  measureSpan: [number, number],\n  beatsInMeasure: number[],\n  globalKeyInfo?: {\n    isMinor: boolean;\n    rootPitchClass: number;\n    baseMidiNumber?: number; // Added baseMidiNumber parameter\n  },\n): {\n  notesArray: Array<{\n    relativeMidiNumber: number;\n    beatPosition: number;\n    beatDuration: number;\n    distanceFromPrevious: number;\n    colorPitchClass: number | string;\n    isChord?: boolean;\n    chordNotes?: number[];\n  }>;\n  linearRepresentation: string;\n  rawlSyntaxRepresentation: string;\n  timeSignature?: string; // Add time signature to output\n  estimatedBpm?: number; // Add estimated BPM to output\n  debugInfo?: any;\n} => {\n  if (!notes || notes.length === 0) {\n    return {\n      notesArray: [],\n      linearRepresentation: \"[]\",\n      rawlSyntaxRepresentation: \"\",\n    };\n  }\n\n  // Debug info collection\n  const debugInfo: {\n    measureSpan: [number, number];\n    beatsInMeasure: number[];\n    totalBeats: number;\n    inputNotes: string;\n    calculations: any[];\n    secondsPerBeat?: number;\n    measureDuration?: number;\n    chords?: any[];\n    globalKeyInfo?: any;\n    baseMidiNumber?: number; // Added for debugging\n  } = {\n    measureSpan,\n    beatsInMeasure,\n    totalBeats: beatsInMeasure.length + 1,\n    inputNotes: JSON.stringify(\n      notes.map((n) => ({\n        midiNum: n.note.midiNumber,\n        span: n.span,\n        colorPitchClass: n.colorPitchClass,\n      })),\n    ),\n    calculations: [],\n    globalKeyInfo: globalKeyInfo,\n    baseMidiNumber: globalKeyInfo?.baseMidiNumber, // Added for debugging\n  };\n\n  // Sort notes by start time\n  const sortedNotes = [...notes].sort((a, b) => a.span[0] - b.span[0]);\n\n  // Get measure start time and duration in seconds\n  const [measureStart, measureEnd] = measureSpan;\n  const measureDuration = measureEnd - measureStart;\n\n  // Compute total number of beats in the measure\n  const totalBeats = beatsInMeasure.length + 1;\n\n  // Calculate seconds per beat based on the total measure duration\n  const secondsPerBeat = measureDuration / totalBeats;\n\n  debugInfo.secondsPerBeat = secondsPerBeat;\n  debugInfo.measureDuration = measureDuration;\n\n  // Group notes into chords\n  const chords = groupNotesIntoChords(sortedNotes, secondsPerBeat);\n  debugInfo.chords = chords.map((chord) => ({\n    notes: chord.notes.map((n) => n.note.midiNumber),\n    span: chord.span,\n  }));\n\n  // Simplified helper function for direct proportional conversion - ZERO-BASED\n  const secondsToBeatPosition = (timeInSeconds: number): number => {\n    // Ensure the time is within the measure bounds\n    const clampedTime = Math.max(\n      measureStart,\n      Math.min(timeInSeconds, measureEnd),\n    );\n\n    // Calculate the beat number directly based on the proportion of the measure\n    // Now ZERO-BASED (removed the +1)\n    const proportionComplete = (clampedTime - measureStart) / measureDuration;\n    const beatPosition = proportionComplete * totalBeats;\n\n    // Log information for debugging\n    debugInfo.calculations.push({\n      timeInSeconds,\n      clampedTime,\n      proportionComplete,\n      beatPosition,\n      secondsPerBeat,\n      totalBeats,\n      notes: `Zero-based: ${\n        clampedTime - measureStart\n      }s / ${measureDuration}s * ${totalBeats} beats`,\n    });\n\n    return beatPosition;\n  };\n\n  // If a global base MIDI number is provided, use it instead of calculating per-measure\n  let baseValue: number;\n\n  if (globalKeyInfo?.baseMidiNumber !== undefined) {\n    // Use the voice-specific base MIDI number provided from the global key info\n    baseValue = globalKeyInfo.baseMidiNumber;\n  } else {\n    // Find the lowest MIDI number note for reference (legacy approach)\n    const notesWithMidi = sortedNotes.filter(\n      (note) => !note.isDrum && note.note.midiNumber !== undefined,\n    );\n\n    if (notesWithMidi.length === 0) {\n      return {\n        notesArray: [],\n        linearRepresentation: \"[]\",\n        rawlSyntaxRepresentation: \"\",\n      };\n    }\n\n    const lowestMidiNote = notesWithMidi.reduce(\n      (lowest, current) =>\n        current.note.midiNumber < lowest.note.midiNumber ? current : lowest,\n      notesWithMidi[0],\n    );\n\n    const lowestMidi = lowestMidiNote.note.midiNumber;\n\n    // Use colorPitchClass when available, calculating modulo 12\n    const basePitchClass =\n      typeof lowestMidiNote.colorPitchClass === \"number\"\n        ? lowestMidiNote.colorPitchClass % 12\n        : lowestMidi % 12;\n\n    baseValue = lowestMidi - basePitchClass;\n  }\n\n  debugInfo.baseMidiNumber = baseValue;\n\n  // Process each chord\n  const result = [];\n  let previousChordEnd = measureStart; // The sentinel chord ends at measure start\n\n  for (const chord of chords) {\n    const startTime = chord.span[0];\n    const endTime = chord.span[1];\n\n    // Calculate beat position and duration with detailed logging\n    const beatPosition = secondsToBeatPosition(startTime);\n    const beatEnd = secondsToBeatPosition(endTime);\n    const beatDuration = beatEnd - beatPosition;\n\n    // Debug the duration calculation\n    debugInfo.calculations.push({\n      chord: chord.notes.map((n) => n.note.midiNumber),\n      startTime,\n      endTime,\n      durationSeconds: endTime - startTime,\n      beatPosition,\n      beatEnd,\n      beatDuration,\n      expectedBeatDuration: (endTime - startTime) / secondsPerBeat,\n      span: chord.span,\n    });\n\n    // Calculate distance from previous chord in beats\n    const distanceFromPrevious =\n      (startTime - previousChordEnd) / secondsPerBeat;\n\n    // Update the previous chord end for the next iteration\n    previousChordEnd = endTime;\n\n    // If this is a single-note chord, process it normally\n    if (chord.notes.length === 1) {\n      const note = chord.notes[0];\n      // Skip drum notes or notes without MIDI numbers (safety check)\n      if (note.isDrum || note.note.midiNumber === undefined) {\n        continue;\n      }\n\n      // Calculate relative MIDI number using the base value\n      const relativeMidiNumber = note.note.midiNumber - baseValue;\n\n      result.push({\n        relativeMidiNumber,\n        beatPosition: parseFloat(beatPosition.toFixed(3)),\n        beatDuration: parseFloat(beatDuration.toFixed(3)),\n        distanceFromPrevious: parseFloat(distanceFromPrevious.toFixed(3)),\n        colorPitchClass:\n          typeof note.colorPitchClass === \"number\"\n            ? note.colorPitchClass % 12\n            : note.note.midiNumber % 12,\n        isChord: false,\n      });\n    } else {\n      // For multi-note chords, collect the relative MIDI numbers of all notes\n      const chordNotes = chord.notes\n        .filter((note) => !note.isDrum && note.note.midiNumber !== undefined)\n        .map((note) => note.note.midiNumber - baseValue)\n        .sort((a, b) => a - b); // Sort from lowest to highest\n\n      // Use the lowest note's MIDI number as the primary value\n      const relativeMidiNumber = chordNotes[0];\n\n      result.push({\n        relativeMidiNumber,\n        beatPosition: parseFloat(beatPosition.toFixed(3)),\n        beatDuration: parseFloat(beatDuration.toFixed(3)),\n        distanceFromPrevious: parseFloat(distanceFromPrevious.toFixed(3)),\n        colorPitchClass:\n          typeof chord.notes[0].colorPitchClass === \"number\"\n            ? chord.notes[0].colorPitchClass % 12\n            : chord.notes[0].note.midiNumber % 12,\n        isChord: true,\n        chordNotes: chordNotes,\n      });\n    }\n  }\n\n  // Generate Rawl syntax representation with proper pitch encoding\n  // Use global key info if provided, otherwise detect from this measure\n  const isMinor = globalKeyInfo\n    ? globalKeyInfo.isMinor\n    : determineIfMinorKey(notes);\n  const rawlSyntaxRepresentation = convertNotesToRawlSyntax(\n    result,\n    undefined,\n    isMinor,\n  );\n\n  // If we have measures and beats, calculate time signature and BPM\n  if (notes.length > 0 && beatsInMeasure.length > 0) {\n    // Calculate time signature using the provided measureSpan and beatsInMeasure\n    const timeSignature = emitTimeSignature(\n      [measureSpan[0], measureSpan[1]],\n      beatsInMeasure,\n    );\n\n    // Calculate estimated BPM based on user's formula\n    // In this context we use the beatsInMeasure.length + 2 for measures\n    // (representing the start and end points of a measure)\n    const totalBeats = 2 + beatsInMeasure.length;\n    const lastMeasureTime = measureSpan[1];\n    const estimatedBpm = Math.round(lastMeasureTime / totalBeats / 60);\n\n    return {\n      notesArray: result,\n      linearRepresentation: JSON.stringify(result),\n      rawlSyntaxRepresentation: rawlSyntaxRepresentation,\n      timeSignature: timeSignature,\n      estimatedBpm: estimatedBpm,\n      debugInfo,\n    };\n  }\n\n  return {\n    notesArray: result,\n    linearRepresentation: JSON.stringify(result),\n    rawlSyntaxRepresentation: rawlSyntaxRepresentation,\n    debugInfo,\n  };\n};\n\n/**\n * Map a duration value to the appropriate syntax character in Rawl\n * Always selects the closest matching duration from the available options\n * @param duration - Duration in beats\n * @returns The corresponding syntax character\n */\nconst getDurationCharacter = (duration: number): string => {\n  // Define all possible durations and their symbols\n  const allDurations = [\n    { value: 0, symbol: \"\" }, // Zero duration (used as reference point)\n    { value: 0.0625, symbol: '\"' }, // Sixty-fourth note\n    { value: 0.125, symbol: \"'\" }, // Thirty-second note\n    { value: 0.25, symbol: \"=\" }, // Sixteenth note\n    { value: 0.5, symbol: \"-\" }, // Eighth note\n    { value: 1, symbol: \",\" }, // Quarter note\n    { value: 2, symbol: \"_\" }, // Half note\n    { value: 4, symbol: \"+\" }, // Whole note\n    { value: 0.1875, symbol: \"'.\" }, // Dotted thirty-second note\n    { value: 0.375, symbol: \"=.\" }, // Dotted sixteenth note\n    { value: 0.75, symbol: \"-.\" }, // Dotted eighth note\n    { value: 1.5, symbol: \",.\" }, // Dotted quarter note\n    { value: 3, symbol: \"_.\" }, // Dotted half note\n    { value: 6, symbol: \"+.\" }, // Dotted whole note\n    { value: (0.125 * 2) / 3, symbol: \"':\" }, // Triplet thirty-second note\n    { value: (0.25 * 2) / 3, symbol: \"=:\" }, // Triplet sixteenth note\n    { value: (0.5 * 2) / 3, symbol: \"-:\" }, // Triplet eighth note\n    { value: (1 * 2) / 3, symbol: \",:\" }, // Triplet quarter note\n    { value: (2 * 2) / 3, symbol: \"_:\" }, // Triplet half note\n    { value: (4 * 2) / 3, symbol: \"+:\" }, // Triplet whole note\n  ];\n\n  // Special case for zero duration\n  if (duration === 0) return \"\";\n\n  // Find the duration with the minimum absolute difference\n  let closest = allDurations[1]; // Start with the first non-zero duration\n  let minDiff = Math.abs(duration - closest.value);\n\n  for (let i = 1; i < allDurations.length; i++) {\n    const diff = Math.abs(duration - allDurations[i].value);\n    if (diff < minDiff) {\n      minDiff = diff;\n      closest = allDurations[i];\n    }\n  }\n\n  return closest.symbol;\n};\n\n/**\n * Convert notes from beat-based timing to Rawl editor syntax\n *\n * @param notes - Array of processed notes with beat timing\n * @param restThreshold - Minimum duration (in beats) to output a rest\n * @param isMinor - Whether to use minor scale mapping (from global analysis)\n * @returns A string in Rawl syntax format\n */\nconst convertNotesToRawlSyntax = (\n  notes: Array<{\n    relativeMidiNumber: number;\n    beatPosition: number;\n    beatDuration: number;\n    distanceFromPrevious: number;\n    colorPitchClass: number | string;\n    isChord?: boolean;\n    chordNotes?: number[];\n  }>,\n  restThreshold: number = 0.125,\n  isMinorOverride?: boolean,\n): string => {\n  if (!notes || notes.length === 0) {\n    return \"\";\n  }\n\n  // For debug logging\n  const debugDetails: any[] = [];\n\n  let result = \"\";\n  let previousNoteEnd = 0;\n\n  // Determine if the notes are in a minor key, unless overridden\n  let isMinor = isMinorOverride;\n\n  if (isMinor === undefined) {\n    // Count occurrences of each pitch class for key determination\n    const pitchClassCounts: { [key: number]: number } = {};\n\n    // Count occurrences of each pitch class using colorPitchClass when available\n    for (const note of notes) {\n      const pitchClass =\n        typeof note.colorPitchClass === \"number\"\n          ? note.colorPitchClass % 12\n          : note.relativeMidiNumber % 12;\n\n      pitchClassCounts[pitchClass] = (pitchClassCounts[pitchClass] || 0) + 1;\n    }\n\n    // Check for minor third vs major third\n    const minorThirdCount = pitchClassCounts[3] || 0;\n    const majorThirdCount = pitchClassCounts[4] || 0;\n\n    // Check for minor sixth vs major sixth\n    const minorSixthCount = pitchClassCounts[8] || 0;\n    const majorSixthCount = pitchClassCounts[9] || 0;\n\n    // Calculate total evidence for minor vs major according to user's requirements\n    const minorEvidence = minorThirdCount + minorSixthCount;\n    const majorEvidence = majorThirdCount + majorSixthCount;\n\n    isMinor = minorEvidence > majorEvidence;\n  }\n\n  // Helper to find actual duration value from symbol\n  const getDurationValue = (symbol: string): number => {\n    const durationMap: { [key: string]: number } = {\n      '\"': 0.0625, // Sixty-fourth note\n      \"'\": 0.125, // Thirty-second note\n      \"=\": 0.25, // Sixteenth note\n      \"-\": 0.5, // Eighth note\n      \",\": 1, // Quarter note\n      _: 2, // Half note\n      \"+\": 4, // Whole note\n      \"'.\": 0.1875, // Dotted thirty-second note\n      \"=.\": 0.375, // Dotted sixteenth note\n      \"-.\": 0.75, // Dotted eighth note\n      \",.\": 1.5, // Dotted quarter note\n      \"_.\": 3, // Dotted half note\n      \"+.\": 6, // Dotted whole note\n      \"':\": (0.125 * 2) / 3, // Triplet thirty-second note\n      \"=:\": (0.25 * 2) / 3, // Triplet sixteenth note\n      \"-:\": (0.5 * 2) / 3, // Triplet eighth note\n      \",:\": (1 * 2) / 3, // Triplet quarter note\n      \"_:\": (2 * 2) / 3, // Triplet half note\n      \"+:\": (4 * 2) / 3, // Triplet whole note\n    };\n    return durationMap[symbol] || 0;\n  };\n\n  // Get all duration symbols sorted by duration value (longest first)\n  const getAllDurationSymbolsSorted = (): {\n    symbol: string;\n    value: number;\n  }[] => {\n    const allSymbols = [\n      { symbol: \"+.\", value: 6 }, // Dotted whole note\n      { symbol: \"+\", value: 4 }, // Whole note\n      { symbol: \"_.\", value: 3 }, // Dotted half note\n      { symbol: \"_\", value: 2 }, // Half note\n      { symbol: \",.\", value: 1.5 }, // Dotted quarter note\n      { symbol: \",\", value: 1 }, // Quarter note\n      { symbol: \"-.\", value: 0.75 }, // Dotted eighth note\n      { symbol: \"-\", value: 0.5 }, // Eighth note\n      { symbol: \"=.\", value: 0.375 }, // Dotted sixteenth note\n      { symbol: \"=\", value: 0.25 }, // Sixteenth note\n      { symbol: \"'.\", value: 0.1875 }, // Dotted thirty-second note\n      { symbol: \"'\", value: 0.125 }, // Thirty-second note\n      { symbol: '\"', value: 0.0625 }, // Sixty-fourth note\n      { symbol: \"+:\", value: (4 * 2) / 3 }, // Triplet whole note\n      { symbol: \"_:\", value: (2 * 2) / 3 }, // Triplet half note\n      { symbol: \",:\", value: (1 * 2) / 3 }, // Triplet quarter note\n      { symbol: \"-:\", value: (0.5 * 2) / 3 }, // Triplet eighth note\n      { symbol: \"=:\", value: (0.25 * 2) / 3 }, // Triplet sixteenth note\n      { symbol: \"':\", value: (0.125 * 2) / 3 }, // Triplet thirty-second note\n    ];\n    return allSymbols.sort((a, b) => b.value - a.value); // Sort by duration value, longest first\n  };\n\n  // Function to emit multiple rests to achieve a more precise gap duration\n  const emitRests = (\n    gap: number,\n  ): { restString: string; actualDuration: number } => {\n    // If gap is below threshold, don't emit any rests\n    if (gap < restThreshold) {\n      return { restString: \"\", actualDuration: 0 };\n    }\n\n    let remainingDuration = gap;\n    let restString = \"\";\n    let actualTotalDuration = 0;\n    const sortedDurations = getAllDurationSymbolsSorted();\n\n    // First, try to emit the largest available rest (1 beat)\n    const largeRestDurations = sortedDurations.filter((d) => d.value >= 1);\n\n    // Then follow with smaller rests if needed\n    const smallRestDurations = sortedDurations.filter((d) => d.value < 1);\n\n    // Combine them with large durations first\n    const allDurations = [...largeRestDurations, ...smallRestDurations];\n\n    // Add rests until we've used up the gap (or got close enough)\n    while (remainingDuration >= restThreshold) {\n      // Find the largest duration that fits in the remaining gap\n      const bestFit = allDurations.find((d) => d.value <= remainingDuration);\n\n      if (!bestFit) {\n        // If no duration fits, use the smallest available\n        const smallestDuration = allDurations[allDurations.length - 1];\n        restString += \"x\" + smallestDuration.symbol + \" \";\n        actualTotalDuration += smallestDuration.value;\n        break; // Exit, we can't get more precise than this\n      } else {\n        // Add this rest\n        restString += \"x\" + bestFit.symbol + \" \";\n        remainingDuration -= bestFit.value;\n        actualTotalDuration += bestFit.value;\n      }\n\n      // Safety check to prevent infinite loops\n      if (remainingDuration < 0.001) break;\n    }\n\n    return { restString, actualDuration: actualTotalDuration };\n  };\n\n  // Helper to convert relative MIDI number to Rawl pitch notation\n  const getPitchNotation = (\n    relativeMidiNumber: number,\n    isChord: boolean = false,\n  ): string => {\n    // Get the scale map for major/minor\n    const scaleMap = isMinor ? MINOR_SCALE_MAP : MAJOR_SCALE_MAP;\n\n    // Convert relative MIDI number to semitones from the reference pitch\n    const semitones = relativeMidiNumber;\n\n    // Get the pitch class (0-11) using modulo 12\n    const pitchClass = semitones % 12;\n\n    // Calculate octave based on integer division by 12\n    const octave = Math.floor(semitones / 12);\n\n    // Define mapping arrays for each octave\n    const octaveNotations = [\n      // First octave: a-j\n      [\"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\"],\n      // Second octave: q-u\n      [\"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\"],\n      // Third octave: 1-7\n      [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"],\n    ];\n\n    // Helper function to get notation for a diatonic note\n    const getDiatonicNotation = (scaleIndex: number, oct: number): string => {\n      if (oct >= 0 && oct < octaveNotations.length) {\n        return octaveNotations[oct][scaleIndex];\n      } else if (oct >= octaveNotations.length) {\n        // For higher octaves, use the ^ prefix notation with base letters from third octave\n        const baseNoteLetter = octaveNotations[2][scaleIndex];\n        const octavesAboveThird = oct - 2;\n        return \"^\".repeat(octavesAboveThird) + baseNoteLetter;\n      } else {\n        // For octaves below the first, use numeric notation as before\n        return scaleIndex + 1 + \"(\" + oct + \")\";\n      }\n    };\n\n    // First check if this is a diatonic note\n    for (let i = 0; i < 7; i++) {\n      if (pitchClass === scaleMap[i]) {\n        return getDiatonicNotation(i, octave);\n      }\n    }\n\n    // This is a chromatic note\n    // Find the next higher diatonic pitch class\n    let found = false;\n    let nextDiatonicIndex = -1;\n    let actualOctave = octave;\n\n    // First look within the same octave\n    for (let i = 0; i < 7; i++) {\n      if (scaleMap[i] > pitchClass) {\n        nextDiatonicIndex = i;\n        found = true;\n        break;\n      }\n    }\n\n    // If not found in this octave, it's the first degree of next octave\n    if (!found) {\n      nextDiatonicIndex = 0;\n      actualOctave = octave + 1;\n    }\n\n    // Get the notation for the diatonic note and prepend with \"b\"\n    return \"b\" + getDiatonicNotation(nextDiatonicIndex, actualOctave);\n  };\n\n  for (const note of notes) {\n    // Calculate gap between previous note end and current note start\n    const gap = note.beatPosition - previousNoteEnd;\n\n    debugDetails.push({\n      noteValue: note.relativeMidiNumber,\n      isChord: note.isChord,\n      chordNotes: note.chordNotes,\n      beatPosition: note.beatPosition,\n      previousNoteEnd,\n      gap,\n      beatDuration: note.beatDuration,\n    });\n\n    // If there's a significant gap, emit rests using the new function\n    if (gap >= restThreshold) {\n      const { restString, actualDuration } = emitRests(gap);\n      result += restString;\n\n      // Update previousNoteEnd based on the actual emitted rest durations\n      previousNoteEnd += actualDuration;\n\n      debugDetails[debugDetails.length - 1].emittedRest = true;\n      debugDetails[debugDetails.length - 1].restString = restString;\n      debugDetails[debugDetails.length - 1].actualRestDuration = actualDuration;\n      debugDetails[debugDetails.length - 1].newPreviousNoteEnd =\n        previousNoteEnd;\n    }\n\n    // Get the discretized duration for the note\n    const durationSymbol = getDurationCharacter(note.beatDuration);\n    const actualNoteDuration = getDurationValue(durationSymbol);\n\n    // If this is a chord, output all notes together with encoded pitch notation\n    if (note.isChord && note.chordNotes && note.chordNotes.length > 0) {\n      // Convert each chord note to its proper pitch notation\n      const encodedChordNotes = note.chordNotes\n        .map((n) => getPitchNotation(n, true))\n        .join(\"\");\n\n      // Add all encoded notes in the chord with no spaces between them\n      result += encodedChordNotes + durationSymbol + \" \";\n    } else {\n      // Add a single note with its encoded pitch and duration\n      const encodedPitch = getPitchNotation(note.relativeMidiNumber);\n      result += encodedPitch + durationSymbol + \" \";\n    }\n\n    // Update the previous note end position with the DISCRETIZED duration\n    // This is the key change - we use the actual emitted duration, not the original\n    previousNoteEnd = note.beatPosition + actualNoteDuration;\n\n    debugDetails[debugDetails.length - 1].emittedNote = true;\n    debugDetails[debugDetails.length - 1].durationSymbol = durationSymbol;\n    debugDetails[debugDetails.length - 1].actualNoteDuration =\n      actualNoteDuration;\n    debugDetails[debugDetails.length - 1].newPreviousNoteEnd = previousNoteEnd;\n  }\n\n  return result.trim();\n};\n\n/**\n * Determine if a collection of notes is likely in a minor key based on the frequency of scale degrees\n * @param notes - Array of colored notes to analyze\n * @returns True if likely in minor, false if likely in major\n */\nconst determineIfMinorKey = (notes: ColoredNote[]): boolean => {\n  // Filter out drum notes and notes without MIDI numbers\n  const notesWithMidi = notes.filter(\n    (note) => !note.isDrum && note.note.midiNumber !== undefined,\n  );\n\n  if (notesWithMidi.length === 0) return false;\n\n  // Count the occurrences of each pitch class\n  const pitchClassCounts: { [key: number]: number } = {};\n\n  notesWithMidi.forEach((note) => {\n    // Use colorPitchClass when available, otherwise fallback to midiNumber % 12\n    const pitchClass =\n      typeof note.colorPitchClass === \"number\"\n        ? note.colorPitchClass % 12\n        : note.note.midiNumber! % 12;\n\n    pitchClassCounts[pitchClass] = (pitchClassCounts[pitchClass] || 0) + 1;\n  });\n\n  // In minor keys, the third scale degree (pitch class 3 in a natural minor scale) occurs more frequently\n  // than the major third (pitch class 4)\n  const minorThirdCount = pitchClassCounts[3] || 0;\n  const majorThirdCount = pitchClassCounts[4] || 0;\n\n  // Check for minor sixth vs major sixth\n  const minorSixthCount = pitchClassCounts[8] || 0;\n  const majorSixthCount = pitchClassCounts[9] || 0;\n\n  // Calculate total evidence for minor vs major according to user's requirements\n  const minorEvidence = minorThirdCount + minorSixthCount;\n  const majorEvidence = majorThirdCount + majorSixthCount;\n\n  return minorEvidence > majorEvidence;\n};\n\n/**\n * Analyze notes from all voices together to determine if the key is major or minor\n * Using the tonic from analysis.modulations[1] rather than detecting it\n * @param coloredNotes - All notes in all voices\n * @param rootPitchClass - The root pitch class from analysis.modulations[1]\n * @returns An object with the detected key information\n */\nconst determineGlobalKey = (\n  coloredNotes: ColoredNotesInVoices,\n  rootPitchClass: number = 0, // Default to C if not provided\n): {\n  isMinor: boolean;\n  rootPitchClass: number;\n  keyName: string;\n  voiceOctaves: { [key: number]: number };\n  voiceBaseMidiNumbers: { [key: number]: number }; // Added: Store base MIDI numbers for each voice\n} => {\n  // Process each voice separately for octave determination\n  const voiceOctaves: { [key: number]: number } = {};\n  const voiceBaseMidiNumbers: { [key: number]: number } = {}; // Added: Store base MIDI for each voice\n\n  // Collect all notes across all voices for combined key analysis\n  const allNotes: ColoredNote[] = [];\n\n  // Process each voice for octave determination and collect all notes\n  for (let voiceIndex = 0; voiceIndex < coloredNotes.length; voiceIndex++) {\n    const voiceNotes = coloredNotes[voiceIndex];\n\n    // Add all valid notes to the combined pool\n    allNotes.push(\n      ...voiceNotes.filter(\n        (note) => !note.isDrum && note.note.midiNumber !== undefined,\n      ),\n    );\n\n    // Skip empty voices for octave calculation\n    const notesWithMidi = voiceNotes.filter(\n      (note) => !note.isDrum && note.note.midiNumber !== undefined,\n    );\n\n    if (notesWithMidi.length === 0) {\n      continue;\n    }\n\n    // MODIFIED: Find the lowest MIDI note in this voice for base MIDI number calculation\n    const lowestMidiNote = notesWithMidi.reduce(\n      (lowest, current) =>\n        current.note.midiNumber < lowest.note.midiNumber ? current : lowest,\n      notesWithMidi[0],\n    );\n\n    const lowestMidi = lowestMidiNote.note.midiNumber;\n\n    // Get the colorPitchClass of the lowest note\n    const basePitchClass =\n      typeof lowestMidiNote.colorPitchClass === \"number\"\n        ? lowestMidiNote.colorPitchClass % 12\n        : lowestMidi % 12;\n\n    // Calculate the base MIDI number by subtracting colorPitchClass from the lowest MIDI number\n    const baseMidiNumber = lowestMidi - basePitchClass;\n\n    // Store this base MIDI number for consistent use across all measures of this voice\n    voiceBaseMidiNumbers[voiceIndex] = baseMidiNumber;\n\n    // Calculate octave where \"1\" will be mapped (derived from base MIDI number)\n    const baseOctave = Math.floor(baseMidiNumber / 12);\n\n    // Use the calculated baseOctave for all voices consistently\n    voiceOctaves[voiceIndex] = baseOctave;\n  }\n\n  // If no valid notes were found across all voices\n  if (allNotes.length === 0) {\n    return {\n      isMinor: false,\n      rootPitchClass: rootPitchClass,\n      keyName: `${PITCH_CLASS_TO_NOTE_NAME[rootPitchClass]} major`,\n      voiceOctaves: { 0: 5, 1: 3 },\n      voiceBaseMidiNumbers: {}, // Added empty object for base MIDI numbers\n    };\n  }\n\n  // Now analyze all notes together for key determination\n  // Count occurrences of each pitch class using colorPitchClass\n  const pitchClassCounts: { [key: number]: number } = {};\n\n  allNotes.forEach((note) => {\n    // Use colorPitchClass when available\n    const pitchClass =\n      typeof note.colorPitchClass === \"number\"\n        ? note.colorPitchClass % 12\n        : note.note.midiNumber! % 12;\n\n    pitchClassCounts[pitchClass] = (pitchClassCounts[pitchClass] || 0) + 1;\n  });\n\n  // Estimate if it's minor or major based on counting specific scale degrees\n  // - Count pitches where %12==3 and %12==8 (minor third and minor sixth)\n  // - Count pitches where %12==4 and %12==9 (major third and major sixth)\n  const minorThirdCount = pitchClassCounts[3] || 0;\n  const minorSixthCount = pitchClassCounts[8] || 0;\n  const majorThirdCount = pitchClassCounts[4] || 0;\n  const majorSixthCount = pitchClassCounts[9] || 0;\n\n  // Calculate total evidence for minor vs major\n  const minorEvidence = minorThirdCount + minorSixthCount;\n  const majorEvidence = majorThirdCount + majorSixthCount;\n  const isMinor = minorEvidence > majorEvidence;\n\n  // Get the note name, preferring flats for minor keys\n  let noteName =\n    isMinor && FLAT_NOTE_NAMES[rootPitchClass]\n      ? FLAT_NOTE_NAMES[rootPitchClass]\n      : PITCH_CLASS_TO_NOTE_NAME[rootPitchClass];\n\n  const keyName = `${noteName} ${isMinor ? \"minor\" : \"major\"}`;\n\n  return {\n    isMinor,\n    rootPitchClass,\n    keyName,\n    voiceOctaves,\n    voiceBaseMidiNumbers, // Added: Return the base MIDI numbers\n  };\n};\n\n/**\n * Generate a complete formatted score with all voices and analysis information\n * @param coloredNotes - All notes in all voices\n * @param measuresAndBeats - Measure and beat information\n * @param analysis - Analysis object with sections, phrasePatch, etc.\n * @returns Formatted string with complete score\n */\nexport const generateFormattedScore = (\n  coloredNotes: ColoredNotesInVoices,\n  measuresAndBeats: { measures: number[]; beats: number[] },\n  analysis: Analysis,\n): string => {\n  // Get time signature from measures and beats\n  const timeSignature = emitTimeSignature(\n    measuresAndBeats.measures,\n    measuresAndBeats.beats,\n  );\n\n  // Initialize output\n  let outputLines: string[] = [];\n  let result = \"\";\n\n  // Get the rootPitchClass from analysis.modulations\n  const rootPitchClass =\n    analysis.modulations && analysis.modulations[1]\n      ? analysis.modulations[1]\n      : 0;\n\n  // Determine the global key once for the entire score, passing the rootPitchClass from analysis\n  const globalKeyInfo = determineGlobalKey(coloredNotes, rootPitchClass);\n\n  // Add key information\n  const keyName = getKeyName(rootPitchClass, globalKeyInfo.isMinor);\n  outputLines.push(keyName);\n\n  // Add time signature right after key\n  outputLines.push(timeSignature);\n\n  // Add sections if available - keep them as phrase indices, exclude 0 and 1\n  if (analysis.sections && analysis.sections.length > 0) {\n    const filteredSections = analysis.sections\n      .filter((section) => section > 0) // Exclude 0 and 1\n      .sort((a, b) => a - b)\n      .map((section) => section + 1);\n\n    if (filteredSections.length > 0) {\n      outputLines.push(`sections ${filteredSections.join(\" \")}`);\n    }\n  }\n\n  // Calculate and add estimated BPM after time signature\n  if (\n    measuresAndBeats.measures.length > 0 &&\n    measuresAndBeats.beats.length > 0\n  ) {\n    // Detailed logging for BPM calculation\n    console.log(\"BPM Calculation Debug:\");\n    console.log(\"- Measures array:\", measuresAndBeats.measures);\n    console.log(\"- Beats array:\", measuresAndBeats.beats);\n\n    // Total beats = beats.length + measures.length as specified\n    const totalBeats =\n      measuresAndBeats.measures.length + measuresAndBeats.beats.length;\n    console.log(\"- Total beats:\", totalBeats);\n\n    const lastMeasureTime =\n      measuresAndBeats.measures[measuresAndBeats.measures.length - 1];\n    console.log(\"- Last measure time (seconds):\", lastMeasureTime);\n\n    const timePerBeat = lastMeasureTime / totalBeats;\n    console.log(\"- Time per beat (seconds):\", timePerBeat);\n\n    const beatsPerSecond = 1 / timePerBeat;\n    console.log(\"- Beats per second:\", beatsPerSecond);\n\n    const beatsPerMinute = beatsPerSecond * 60;\n    console.log(\"- Beats per minute (before rounding):\", beatsPerMinute);\n\n    const estimatedBpm = Math.round(beatsPerMinute);\n    console.log(\"- Final estimated BPM (rounded):\", estimatedBpm);\n    console.log(\n      \"- Is BPM in reasonable range (50-300)?\",\n      estimatedBpm >= 50 && estimatedBpm <= 300,\n    );\n\n    // Alternative calculation that might be more accurate for debugging\n    const altBpm = Math.round(60 / (lastMeasureTime / totalBeats));\n    console.log(\"- Alternative BPM calculation:\", altBpm);\n\n    // Only add a reasonable BPM (between 50 and 300)\n    if (estimatedBpm >= 50 && estimatedBpm <= 300) {\n      outputLines.push(`bpm ${estimatedBpm}`);\n    } else {\n      console.log(\n        \"WARNING: Calculated BPM outside reasonable range (50-300), not adding to output\",\n      );\n\n      // Log raw inputs that might be causing issues\n      console.log(\"- Raw measures.length:\", measuresAndBeats.measures.length);\n      console.log(\"- Raw beats.length:\", measuresAndBeats.beats.length);\n      console.log(\"- First measure time:\", measuresAndBeats.measures[0]);\n      console.log(\"- Last measure time:\", lastMeasureTime);\n      console.log(\n        \"- Measure time span:\",\n        lastMeasureTime - measuresAndBeats.measures[0],\n      );\n    }\n  } else {\n    console.log(\"Cannot calculate BPM: Not enough measures or beats\");\n  }\n\n  // Add phrases if available\n  if (analysis.phrasePatch && analysis.phrasePatch.length > 0) {\n    const phrasePairs: string[] = [];\n\n    // Format appropriately and skip zero diffs\n    analysis.phrasePatch.forEach((patch) => {\n      // Skip if diff is zero\n      if (patch.diff === 0) return;\n\n      // Format as measure+diff or measure{diff} depending on sign\n      const formatted =\n        patch.diff > 0\n          ? `${patch.measure}+${patch.diff}`\n          : `${patch.measure}${patch.diff}`; // No need to add + for negative numbers\n\n      phrasePairs.push(formatted);\n    });\n\n    if (phrasePairs.length > 0) {\n      outputLines.push(`phrases ${phrasePairs.join(\" \")}`);\n    }\n  }\n\n  // Add blank line between header and voice definitions\n  if (outputLines.length > 0) {\n    result = outputLines.join(\"\\n\") + \"\\n\\n\";\n  }\n\n  // Process each voice\n  for (let voiceIndex = 0; voiceIndex < coloredNotes.length; voiceIndex++) {\n    // Skip empty voices\n    if (coloredNotes[voiceIndex].length === 0) continue;\n\n    // Add appropriate voice label with octave\n    const octave =\n      globalKeyInfo.voiceOctaves[voiceIndex] ||\n      (voiceIndex === 0 ? 5 : voiceIndex === 1 ? 3 : 4);\n\n    if (voiceIndex === 0) {\n      result += `rh ${octave}\\n`;\n    } else if (voiceIndex === 1) {\n      result += `\\n\\nlh ${octave}\\n`;\n    } else if (voiceIndex === 2) {\n      result += `\\n\\nch2 ${octave}\\n`;\n    } else {\n      result += `\\n\\nch${voiceIndex} ${octave}\\n`;\n    }\n\n    // First, gather all measure commands for this voice\n    // Now each measure can have multiple commands (one per line)\n    const measureCommands: { [measureIndex: number]: string[] } = {};\n    const measureCount = measuresAndBeats.measures.length - 1;\n\n    // Use the global key info for all measure conversions to ensure consistency\n    for (let measureIndex = 0; measureIndex < measureCount; measureIndex++) {\n      try {\n        const rawlSyntaxCommands = logMeasureNotesInformation(\n          voiceIndex,\n          measureIndex,\n          coloredNotes,\n          measuresAndBeats,\n          {\n            isMinor: globalKeyInfo.isMinor,\n            rootPitchClass: globalKeyInfo.rootPitchClass,\n            baseMidiNumber: globalKeyInfo.voiceBaseMidiNumbers[voiceIndex],\n          },\n        );\n\n        if (rawlSyntaxCommands.length > 0) {\n          measureCommands[measureIndex] = rawlSyntaxCommands;\n        }\n      } catch (error) {\n        console.error(\n          `Error processing voice ${voiceIndex}, measure ${measureIndex + 1}:`,\n          error,\n        );\n      }\n    }\n\n    // For measures with a single line, we can use compression\n    // For measures with multiple lines, we'll output them as separate insert commands\n\n    // First, identify which measures have single lines (candidates for compression)\n    const singleLineCommandsMap: { [measureIndex: number]: string } = {};\n    const multiLineCommandsMap: { [measureIndex: number]: string[] } = {};\n\n    for (const [measureIndexStr, commands] of Object.entries(measureCommands)) {\n      const measureIndex = parseInt(measureIndexStr);\n\n      if (commands.length === 1) {\n        // Measure with single line - candidate for compression\n        singleLineCommandsMap[measureIndex] = commands[0];\n      } else {\n        // Measure with multiple lines - will be output directly\n        multiLineCommandsMap[measureIndex] = commands;\n      }\n    }\n\n    // Apply compression only to single-line measures\n    const insertToMeasureMap: { [insertCommand: string]: number } = {};\n    const compressedCommands: { [measureIndex: number]: string } = {};\n\n    for (let measureIndex = 0; measureIndex < measureCount; measureIndex++) {\n      if (!(measureIndex in singleLineCommandsMap)) continue;\n\n      const rawlSyntax = singleLineCommandsMap[measureIndex];\n\n      // Check if we've seen this exact insert before\n      if (rawlSyntax in insertToMeasureMap) {\n        // We've seen this exact command before - use a copy instead\n        const originalMeasureIndex = insertToMeasureMap[rawlSyntax];\n        compressedCommands[measureIndex] = `c ${originalMeasureIndex + 1}`;\n      } else {\n        // This is the first time we've seen this command - store it\n        insertToMeasureMap[rawlSyntax] = measureIndex;\n        compressedCommands[measureIndex] = rawlSyntax;\n      }\n    }\n\n    // Apply a second compression step to find consecutive copy commands\n    // that reference consecutive measures, and combine them into ranges\n    const rangeCompressedOutput: string[] = [];\n    let currentIndex = 0;\n\n    while (currentIndex < measureCount) {\n      // Skip measures without commands\n      if (!(currentIndex in compressedCommands)) {\n        currentIndex++;\n        continue;\n      }\n\n      const currentCommand = compressedCommands[currentIndex];\n      // Check if this is a copy command\n      const copyMatch = currentCommand.match(/^c (\\d+)$/);\n\n      if (!copyMatch) {\n        // Not a copy command, just add it as is\n        rangeCompressedOutput.push(`${currentIndex + 1} ${currentCommand}`);\n        currentIndex++;\n        continue;\n      }\n\n      // This is a copy command - check if we can find a consecutive sequence\n      const startCopiedMeasure = parseInt(copyMatch[1]);\n      let rangeLength = 1;\n      let nextIndex = currentIndex + 1;\n\n      while (nextIndex < measureCount && nextIndex in compressedCommands) {\n        const nextCommand = compressedCommands[nextIndex];\n        const nextCopyMatch = nextCommand.match(/^c (\\d+)$/);\n\n        // Break if not a copy command\n        if (!nextCopyMatch) break;\n\n        const nextCopiedMeasure = parseInt(nextCopyMatch[1]);\n\n        // Check if this continues the sequence (next measure copies next consecutive source)\n        if (nextCopiedMeasure !== startCopiedMeasure + rangeLength) break;\n\n        // This is part of the sequence\n        rangeLength++;\n        nextIndex++;\n      }\n\n      // If we found a sequence of at least 2 copies, use range notation\n      if (rangeLength > 1) {\n        rangeCompressedOutput.push(\n          `${currentIndex + 1} c ${startCopiedMeasure}-${\n            startCopiedMeasure + rangeLength - 1\n          }`,\n        );\n        currentIndex = nextIndex;\n      } else {\n        // Just a single copy, add as is\n        rangeCompressedOutput.push(`${currentIndex + 1} ${currentCommand}`);\n        currentIndex++;\n      }\n    }\n\n    // Add the range-compressed output for single lines\n    result += rangeCompressedOutput.join(\"\\n\") + \"\\n\";\n\n    // Now add all multi-line commands directly without compression\n    for (const [measureIndexStr, commands] of Object.entries(\n      multiLineCommandsMap,\n    )) {\n      const measureIndex = parseInt(measureIndexStr);\n      for (const command of commands) {\n        result += `${measureIndex + 1} ${command}\\n`;\n      }\n    }\n  }\n\n  return result;\n};\n\n/**\n * Calculates and emits the time signature based on the number of beats in measure 2\n * @param measures Array of measure boundary positions\n * @param beats Array of beat positions\n * @returns Time signature string in the format '{numBeats}/4'\n */\nconst emitTimeSignature = (measures: number[], beats: number[]): string => {\n  // Use measure index 2 (third measure, index starts at 0)\n  const measureIndex = 2;\n\n  // Check if we have enough measures\n  if (measures.length <= measureIndex + 1) {\n    // Default to 4/4 if we don't have enough measures\n    return \"4/4\";\n  }\n\n  // Get beats in measure 2\n  const beatsInMeasure = getBeatsInMeasure(measureIndex, measures, beats);\n\n  // Number of beats is the length of beatsInMeasure array + 1 (as specified)\n  const numBeats = beatsInMeasure.length + 1;\n\n  // Return the time signature in the format 'numBeats/4'\n  return `${numBeats}/4`;\n};\n\n/**\n * Converts a pitch class to a key name\n * @param pitchClass Pitch class (0-11, where 0 is C)\n * @param isMinor Whether the key is minor\n * @returns Key name in the format like \"C major\" or \"Eb minor\"\n */\nconst getKeyName = (pitchClass: number, isMinor: boolean): string => {\n  // Use flat notation for keys that traditionally use flats\n  const useFlat = [1, 3, 6, 8, 10].includes(pitchClass);\n\n  // Get the key name\n  const keyLetter = useFlat\n    ? FLAT_NOTE_NAMES[pitchClass]\n    : PITCH_CLASS_TO_NOTE_NAME[pitchClass];\n\n  // Return formatted key name\n  return `${keyLetter} ${isMinor ? \"minor\" : \"major\"}`;\n};\n","import * as React from \"react\";\nimport styled from \"styled-components\";\nimport { CorpusLink } from \"../corpora/CorpusLink\";\nimport { Chord } from \"../legends/chords\";\nimport { A, c, ct, Mode, P, rnc, s, UL } from \"./chapters\";\n\nconst H2 = styled.h2`\n  color: #fff;\n`;\n\nexport const BEYOND_CHAPTER_GROUPS: Record<string, [number, number]> = {\n  intro: [1, 10],\n};\n\nexport const BEYOND_CHAPTERS: Array<{\n  title: string;\n  titleChords?: Chord[];\n  mode?: Mode | Mode[];\n  pretext?: () => React.JSX.Element;\n  composers: string[];\n}> = [\n  {\n    title: \"Blues\",\n    titleChords: [\"I7\"],\n    composers: [],\n    pretext: () => (\n      <>\n        <H2>Blues</H2>\n        <P>\n          Surprisingly, there is no instance of {s`form:12-bar_blues`} inside\n          the top 100.\n        </P>\n        <P>\n          The main harmonic ideas in the blues is the usage of three main\n          dominant seventh chords: {rnc`I7`}, {rnc`IV7`}, and {rnc`V7`}.\n        </P>\n        <P>There are several forms of a 12-bar blues progression:</P>\n        <P>\n          <UL>\n            <li>\n              {c`I7 I7 I7 I7 IV7 IV7 I7 I7 V7 V7 I7 I7`} - simple, ancient\n            </li>\n            <li>{c`I7 I7 I7 I7 IV7 IV7 I7 I7 V7 IV7 I7 I7`} - most common</li>\n            <li>\n              {c`Imaj7 Imaj7 Imaj7 I7 IV7 IV7 Imaj7 V7/ii ii7 V7 Imaj7 V7`} - a\n              possible blues in jazz\n            </li>\n            <li>{c`i7 i7 i7 i7 iv7 iv7 i7 i7 v7 iv7 i7 i7`} - a minor blues</li>\n          </UL>\n        </P>\n        <P>\n          <UL>\n            <li>{s`scale:blues`}</li>\n            <li>{s`chord_scale:IV7`}</li>\n            <li>{s`form:8-bar_blues`}</li>\n            <li>\n              <CorpusLink slug={\"boogie_woogie\"} />\n            </li>\n          </UL>\n        </P>\n      </>\n    ),\n  },\n  {\n    title: \"Constant structures\",\n    titleChords: [\"I\", \"bII\", \"II\", \"bIII\", \"III\"],\n    composers: [],\n    pretext: () => (\n      <>\n        <H2>Constant structures</H2>\n        <P>{s`constant_structures:major_chords`}</P>\n      </>\n    ),\n  },\n  {\n    title: \"Neo-Riemannian\",\n    titleChords: [\"i\", \"bvi\"],\n    composers: [],\n    pretext: () => (\n      <>\n        <H2>Two minor triads</H2>\n        <P></P>\n        <P>\n          There are 11 ways to follow a minor triad with a minor triad. Some of\n          these ways have a diatonic interpretation, some others - sorta tonal\n          interpretation, yet another ones are picant, modern, VGMy.\n        </P>\n        <P>\n          <UL>\n            <li>{c`i bii`}</li>\n            <li>{c`i ii`}</li>\n            <li>{c`i biii`}</li>\n            <li>{c`i iii`}</li>\n            <li>\n              {c`i iv`} is native to natural minor,{\" \"}\n              {A(\"still-dre---variation-composition\")}\n            </li>\n            <li>{c`i #iv`}</li>\n            <li>{c`i v`}</li>\n            <li>\n              {c`i bvi`} {s`chromatic_chords:minor_bvi`}\n            </li>\n            <li>{c`i vi`}</li>\n            <li>{c`i bvii`}</li>\n            <li>{c`i vii`}</li>\n          </UL>\n        </P>\n      </>\n    ),\n  },\n  {\n    title: \"Parallel symmetry\",\n    titleChords: [\"V7\", \"i\", \"V7\", \"I\"],\n    composers: [],\n    pretext: () => (\n      <>\n        <H2>Parallel symmetry</H2>\n        <P>{s`parallel:symmetry`}</P>\n        <P>{s`parallel:picardy_third`}</P>\n      </>\n    ),\n  },\n  {\n    title: \"Greek b2 natural 3\",\n    titleChords: [\"bvii\", \"I\"],\n    composers: [],\n    pretext: () => (\n      <>\n        <H2>Greek b2</H2>\n        <P>\n          Let's consider the corpus <CorpusLink slug={\"greek_music\"} />. Some\n          songs in it are quite standard Western. However, there are others\n          which exploit a scale specific to the Balkans: {c`1 b2 3 4 5 b6 b7 1`}\n          . For a lack of better universal name, let's call it a C phrygian\n          dominant.\n        </P>\n        <P>\n          Technically, it's a rotation of a {ct(\"1 2 b3 4 5 b6 7 1\", 5)}:{\" \"}\n          {ct(\"5 b6 7 1 2 b3 4 5\", -7)}. However, due to the positioning of\n          chords within the section, due to cadential formulas (like {c`bvii I`}\n          ) and the structure of melodies another note is tonicized in it, and\n          therefore I recolor. The most common first and last chord in those\n          pieces is {c`I`}.\n        </P>\n        <P>\n          {c`iv I bvii I`}, {c`bII I bvii I`}\n        </P>\n        <P>{s`b2:3`}</P>\n        <P>\n          {A(\"a.-kaldaras---nyhtose-horis-feggari---greek-music-037\")},{\" \"}\n          {A(\"s.-xarhakos---stoy-thoma---greek-music-055\")},{\" \"}\n          {A(\"s.-xarhakos---mpoyrnovalia---greek-music-079\")}\n        </P>\n      </>\n    ),\n  },\n];\n","import * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { formatComposerName, getEmojis } from \"../../utils/corpusUtils\";\nimport { corpora } from \"./corpora/corpora\";\nimport { TOP_100_COMPOSERS } from \"./top100Composers\";\n\nconst highlightMatch = (text: string, term: string) => {\n  if (!term) return text;\n  const regex = new RegExp(\n    `(${term.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\")})`,\n    \"gi\",\n  );\n  const parts = text.split(regex);\n  return parts.map((part, index) =>\n    regex.test(part) ? <mark key={index}>{part}</mark> : part,\n  );\n};\n\n// Get nice name for a MIDI slug if it exists in TOP_100_COMPOSERS\nconst getNiceName = (slug: string) => {\n  const composerInfo = TOP_100_COMPOSERS.find(\n    (composer) => composer.slug === slug,\n  );\n  if (composerInfo) {\n    return `${composerInfo.composer} - ${composerInfo.displayTitle}`;\n  }\n  return slug.replace(/---/g, \"  \").replace(/-/g, \" \").replace(/_/g, \" \");\n};\n\nconst SearchContainer = styled.div`\n  max-width: 100%;\n`;\n\nconst SearchInputContainer = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n\nconst SearchInput = styled.input`\n  flex-grow: 1;\n  padding: 10px;\n  box-sizing: border-box;\n`;\n\nconst TotalCount = styled.span`\n  margin-left: 10px;\n  color: #888;\n  font-size: 0.9em;\n`;\n\nconst ResultsContainer = styled.div`\n  width: 100%;\n  overflow-y: auto;\n  text-align: left;\n`;\n\nconst CorpusSearch: React.FC = () => {\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\n  const searchInputRef = React.useRef<HTMLInputElement>(null);\n  const [totalMidis, setTotalMidis] = React.useState(0);\n\n  React.useEffect(() => {\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n\n    const uniqueMidis = new Set(corpora.flatMap((corpus) => corpus.midis));\n    setTotalMidis(uniqueMidis.size);\n  }, []);\n\n  const filteredCorpora = corpora.filter((corpus) => {\n    if (searchTerm === \"\") return corpus.midis.length >= 1;\n\n    const searchTerms = searchTerm.toLowerCase().split(/\\s+/);\n    const corpusWords = corpus.slug.toLowerCase().split(/[-_\\s]+/);\n\n    // Include nice names in the search for midis\n    const midiWords = corpus.midis.flatMap((midi) => {\n      const niceName = getNiceName(midi).toLowerCase();\n      return [...midi.toLowerCase().split(/[-_\\s]+/), ...niceName.split(/\\s+/)];\n    });\n\n    return searchTerms.every(\n      (term) =>\n        corpusWords.some((word) => word.includes(term)) ||\n        midiWords.some((word) => word.includes(term)),\n    );\n  });\n\n  const renderEmptySearchResults = () => {\n    const sortedCorpora = filteredCorpora.sort(\n      (a, b) => b.midis.length - a.midis.length,\n    );\n\n    // Group corpora by country\n    const groupedCorpora = sortedCorpora.reduce(\n      (acc, corpus) => {\n        const group = corpus.country || \"Styles\";\n        if (!acc[group]) {\n          acc[group] = [];\n        }\n        acc[group].push(corpus);\n        return acc;\n      },\n      {} as Record<string, typeof corpora>,\n    );\n\n    // Sort countries by number of corpora (not pieces)\n    const sortedGroups = Object.entries(groupedCorpora).sort((a, b) => {\n      if (a[0] === \"Styles\") return -1;\n      if (b[0] === \"Styles\") return 1;\n      return b[1].length - a[1].length;\n    });\n\n    // Separate single-corpus countries\n    const multiCorpusGroups = sortedGroups.filter(\n      ([country, corpora]) => corpora.length > 1 || country === \"Styles\",\n    );\n    const singleCorpusEntries = sortedGroups\n      .filter(\n        ([country, corpora]) => corpora.length === 1 && country !== \"Styles\",\n      )\n      .flatMap(([country, corpora]) =>\n        corpora.map((corpus) => ({ country, corpus })),\n      )\n      .sort((a, b) => b.corpus.midis.length - a.corpus.midis.length);\n\n    return (\n      <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"50px\" }}>\n        {/* Multi-corpus countries */}\n        {multiCorpusGroups.map(([country, corpora]) => (\n          <div key={country} style={{ textAlign: \"left\" }}>\n            <h3 style={{ marginBottom: \"10px\" }}>\n              {country} {country !== \"Styles\" && getEmojis(country)}\n              <span\n                style={{\n                  fontSize: \"0.6em\",\n                  color: \"gray\",\n                  marginLeft: \"8px\",\n                }}\n              >\n                {corpora.reduce((sum, corpus) => sum + corpus.midis.length, 0)}\n              </span>\n            </h3>\n            <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"10px\" }}>\n              {corpora.map(({ slug, midis }) => (\n                <div key={slug} style={{ marginRight: \"20px\" }}>\n                  <Link to={`/corpus/${slug}`}>\n                    {formatComposerName(slug)}{\" \"}\n                    <span style={{ fontSize: \"0.6em\", color: \"gray\" }}>\n                      {midis.length}\n                    </span>\n                  </Link>\n                </div>\n              ))}\n            </div>\n          </div>\n        ))}\n\n        {/* Single-corpus countries */}\n        {singleCorpusEntries.length > 0 && (\n          <div style={{ textAlign: \"left\" }}>\n            <h3 style={{ marginBottom: \"10px\" }}>Single Composers</h3>\n            <div\n              style={{\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                gap: \"16px\",\n                alignItems: \"center\",\n              }}\n            >\n              {singleCorpusEntries.map(({ country, corpus }) => (\n                <div\n                  key={corpus.slug}\n                  style={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: \"8px\",\n                    minWidth: \"200px\",\n                  }}\n                >\n                  {getEmojis(country)}\n                  <Link to={`/corpus/${corpus.slug}`}>\n                    {formatComposerName(corpus.slug)}\n                    <span\n                      style={{\n                        fontSize: \"0.6em\",\n                        color: \"gray\",\n                      }}\n                    >\n                      {corpus.midis.length}\n                    </span>\n                  </Link>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <SearchContainer>\n      <SearchInputContainer>\n        <SearchInput\n          ref={searchInputRef}\n          type=\"text\"\n          placeholder=\"Search composers or songs, eg. 'nocturne', 'entertainer', 'jaws', 'autumn leaves', 'succession', 'bts', 'chopin', 'mario'\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n        />\n        <TotalCount>{totalMidis} MIDIs</TotalCount>\n      </SearchInputContainer>\n      <ResultsContainer>\n        {searchTerm === \"\"\n          ? renderEmptySearchResults()\n          : filteredCorpora.map(({ slug, midis }) => {\n              const searchTerms = searchTerm.toLowerCase().split(/\\s+/);\n              const composerMatched = searchTerms.every((term) =>\n                slug\n                  .toLowerCase()\n                  .split(/[-_\\s]+/)\n                  .some((word) => word.includes(term)),\n              );\n\n              // Update the matching logic to also check nice names\n              const matchingMidis = midis.filter((midi) => {\n                const niceName = getNiceName(midi).toLowerCase();\n                const niceNameWords = niceName.split(/\\s+/);\n\n                return searchTerms.every(\n                  (term) =>\n                    midi\n                      .toLowerCase()\n                      .split(/[-_\\s]+/)\n                      .some((word) => word.includes(term)) ||\n                    niceNameWords.some((word) => word.includes(term)),\n                );\n              });\n\n              return (\n                <div\n                  key={slug}\n                  style={{\n                    borderLeft: composerMatched ? \"3px solid yellow\" : \"none\",\n                    paddingLeft: composerMatched ? \"10px\" : \"0\",\n                    marginBottom: \"15px\",\n                    textAlign: \"left\",\n                  }}\n                >\n                  <Link to={`/corpus/${slug}`}>\n                    {highlightMatch(slug.replace(/_/g, \" \"), searchTerm)}{\" \"}\n                    <span style={{ color: \"white\", fontSize: \"0.6em\" }}>\n                      {midis.length}\n                    </span>\n                  </Link>\n                  {(composerMatched || searchTerm) &&\n                    matchingMidis.map((midi) => (\n                      <div\n                        key={`${slug}_${midi}`}\n                        style={{ paddingLeft: \"20px\" }}\n                      >\n                        <a\n                          href={`/f/${midi}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                        >\n                          {highlightMatch(getNiceName(midi), searchTerm)}\n                        </a>\n                      </div>\n                    ))}\n                </div>\n              );\n            })}\n      </ResultsContainer>\n    </SearchContainer>\n  );\n};\n\nexport default CorpusSearch;\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport { corpora } from \"./corpora/corpora\";\nimport InlineRawlPlayer from \"./InlineRawlPlayer\";\n\n// Styled components\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  padding: 20px;\n  box-sizing: border-box;\n`;\n\nconst ProgressSection = styled.div`\n  flex: 1;\n  margin-bottom: 20px;\n  overflow-y: auto;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  padding: 20px;\n`;\n\nconst RawlSection = styled.div`\n  flex: 2;\n  position: relative;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n`;\n\nconst Stats = styled.div`\n  margin-bottom: 20px;\n`;\n\nconst ProgressBar = styled.div`\n  height: 20px;\n  background-color: #f0f0f0;\n  border-radius: 10px;\n  margin: 10px 0;\n  overflow: hidden;\n`;\n\nconst ProgressFill = styled.div<{ percent: number }>`\n  height: 100%;\n  width: ${(props) => props.percent}%;\n  background-color: #4a90e2;\n  transition: width 0.3s ease;\n`;\n\nconst HistogramList = styled.div`\n  max-height: 300px;\n  overflow-y: auto;\n  margin-bottom: 20px;\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n`;\n\nconst Button = styled.button`\n  padding: 10px 15px;\n  background-color: #4a90e2;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  font-weight: bold;\n\n  &:hover {\n    background-color: #3a7bc8;\n  }\n\n  &:disabled {\n    background-color: #cccccc;\n    cursor: not-allowed;\n  }\n`;\n\nconst PlayPauseButton = styled(Button)<{ isPlaying: boolean }>`\n  background-color: ${(props) => (props.isPlaying ? \"#e74c3c\" : \"#2ecc71\")};\n\n  &:hover {\n    background-color: ${(props) => (props.isPlaying ? \"#c0392b\" : \"#27ae60\")};\n  }\n`;\n\nconst SkipButton = styled(Button)`\n  background-color: #f39c12;\n\n  &:hover {\n    background-color: #e67e22;\n  }\n`;\n\n// Helper function to flatten all midis\nconst getAllMidis = () => {\n  const allMidis = [];\n  const seenSlugs = new Set<string>(); // Track seen slugs to avoid duplicates\n\n  corpora.forEach((corpus) => {\n    corpus.midis.forEach((midi) => {\n      // Only add the midi if we haven't seen it before\n      if (!seenSlugs.has(midi)) {\n        allMidis.push({ slug: midi, corpusSlug: corpus.slug });\n        seenSlugs.add(midi); // Mark this slug as seen\n      }\n    });\n  });\n\n  console.log(\n    `Total unique midis: ${allMidis.length} (filtered from ${seenSlugs.size} total)`,\n  );\n  return allMidis;\n};\n\nconst Histograms: React.FC = () => {\n  const { handleSongClick, rawlProps, currentMidi, eject } =\n    useContext(AppContext);\n\n  // State\n  const [calculatedCount, setCalculatedCount] = useState<number>(0);\n  const [recentHistograms, setRecentHistograms] = useState<\n    Array<{ slug: string; data: number[] }>\n  >([]);\n  const [allMidis] = useState(getAllMidis());\n  const [currentIndex, setCurrentIndex] = useState<number>(0);\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [autoBatchEnabled, setAutoBatchEnabled] = useState<boolean>(false);\n  const [lastCalculationTime, setLastCalculationTime] = useState<number>(0);\n  const [skippedSongs, setSkippedSongs] = useState<Array<string>>([]);\n\n  // Refs\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const loadingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Skip to the next song without loading\n  const skipSong = useCallback(() => {\n    // Clear any loading timeout\n    if (loadingTimeoutRef.current) {\n      clearTimeout(loadingTimeoutRef.current);\n      loadingTimeoutRef.current = null;\n    }\n\n    if (currentIndex < allMidis.length) {\n      const skippedSlug = allMidis[currentIndex].slug;\n      console.log(`Skipping song: ${skippedSlug}`);\n\n      // Add to skipped songs list\n      setSkippedSongs((prev) => [...prev, skippedSlug]);\n\n      // Move to next index\n      setCurrentIndex((prev) => prev + 1);\n      setIsLoading(false);\n    }\n  }, [currentIndex, allMidis]);\n\n  // Load next song\n  const loadNextSong = useCallback(async () => {\n    if (currentIndex >= allMidis.length) {\n      // We've gone through all midis\n      alert(\"All midis have been processed!\");\n      setAutoBatchEnabled(false); // Stop auto mode when done\n      return;\n    }\n\n    // Clear any existing loading timeout\n    if (loadingTimeoutRef.current) {\n      clearTimeout(loadingTimeoutRef.current);\n    }\n\n    setIsLoading(true);\n    try {\n      const nextMidi = allMidis[currentIndex];\n      console.log(\n        `Loading midi: ${nextMidi.slug} from corpus: ${nextMidi.corpusSlug}`,\n      );\n\n      // Set a timeout to auto-skip if loading takes too long (15 seconds)\n      loadingTimeoutRef.current = setTimeout(() => {\n        console.error(`Loading timeout for ${nextMidi.slug}. Auto-skipping.`);\n        skipSong();\n      }, 3000);\n\n      await handleSongClick(nextMidi.slug);\n\n      // Clear timeout if loading succeeds\n      if (loadingTimeoutRef.current) {\n        clearTimeout(loadingTimeoutRef.current);\n        loadingTimeoutRef.current = null;\n      }\n\n      setCurrentIndex((prev) => prev + 1);\n    } catch (error) {\n      console.error(\"Error loading next song:\", error);\n      // If loading fails, skip to the next song\n      skipSong();\n    } finally {\n      setIsLoading(false);\n    }\n  }, [currentIndex, allMidis, handleSongClick, skipSong]);\n\n  // Toggle auto batch mode\n  const toggleAutoBatch = useCallback(() => {\n    setAutoBatchEnabled((prev) => !prev);\n  }, []);\n\n  // Copy histograms to clipboard\n  const copyHistogramsToClipboard = useCallback(() => {\n    try {\n      const histogramsJSON = localStorage.getItem(\"NOTE_HISTOGRAMS\") || \"{}\";\n      navigator.clipboard.writeText(histogramsJSON);\n      alert(\"Histograms copied to clipboard!\");\n    } catch (error) {\n      console.error(\"Error copying to clipboard:\", error);\n      alert(\"Failed to copy to clipboard\");\n    }\n  }, []);\n\n  // Load current progress from localStorage on initial render\n  useEffect(() => {\n    try {\n      // Get current index from localStorage\n      const savedIndex = localStorage.getItem(\"HISTOGRAM_CURRENT_INDEX\");\n      if (savedIndex) {\n        setCurrentIndex(parseInt(savedIndex, 10));\n      }\n\n      // Count calculated histograms\n      const histogramsJSON = localStorage.getItem(\"NOTE_HISTOGRAMS\") || \"{}\";\n      const histograms = JSON.parse(histogramsJSON);\n      setCalculatedCount(Object.keys(histograms).length);\n\n      // Get recent histograms\n      const recent = Object.entries(histograms)\n        .slice(-10)\n        .map(([slug, data]) => ({ slug, data: data as number[] }));\n      setRecentHistograms(recent);\n    } catch (error) {\n      console.error(\"Error loading progress from localStorage:\", error);\n    }\n  }, []);\n\n  // Update localStorage when currentIndex changes\n  useEffect(() => {\n    localStorage.setItem(\"HISTOGRAM_CURRENT_INDEX\", currentIndex.toString());\n  }, [currentIndex]);\n\n  // Effect to monitor histogram changes and trigger auto-loading\n  useEffect(() => {\n    const checkHistogramUpdates = () => {\n      try {\n        const histogramsJSON = localStorage.getItem(\"NOTE_HISTOGRAMS\") || \"{}\";\n        const histograms = JSON.parse(histogramsJSON);\n        const count = Object.keys(histograms).length;\n\n        if (count !== calculatedCount) {\n          setCalculatedCount(count);\n          setLastCalculationTime(Date.now());\n\n          const recent = Object.entries(histograms)\n            .slice(-10)\n            .map(([slug, data]) => ({ slug, data: data as number[] }));\n          setRecentHistograms(recent);\n        }\n      } catch (error) {\n        console.error(\"Error checking histogram updates:\", error);\n      }\n    };\n\n    const intervalId = setInterval(checkHistogramUpdates, 2000);\n    return () => clearInterval(intervalId);\n  }, [calculatedCount]);\n\n  // Effect to handle automatic loading of next song\n  useEffect(() => {\n    // Clear any existing timeout\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n\n    // If auto batch is enabled and we've recently calculated a histogram\n    if (autoBatchEnabled && lastCalculationTime > 0 && !isLoading) {\n      timeoutRef.current = setTimeout(() => {\n        // Only proceed if we're still in auto mode and not already loading\n        if (autoBatchEnabled && !isLoading) {\n          loadNextSong();\n        }\n      }, 1000); // 1 second delay after histogram calculation\n    }\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [autoBatchEnabled, lastCalculationTime, isLoading, loadNextSong]);\n\n  // Effect to clean up timeouts on unmount\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n      if (loadingTimeoutRef.current) {\n        clearTimeout(loadingTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return (\n    <Container>\n      <ProgressSection>\n        <h1>Histogram Calculator</h1>\n\n        <Stats>\n          <h2>Progress</h2>\n          <p>\n            Calculated: {calculatedCount} / {allMidis.length} midis (\n            {Math.round((calculatedCount / allMidis.length) * 100)}%)\n          </p>\n          <ProgressBar>\n            <ProgressFill percent={(calculatedCount / allMidis.length) * 100} />\n          </ProgressBar>\n          <p>\n            Current index: {currentIndex} / {allMidis.length}\n          </p>\n          {currentMidi && <p>Current midi: {currentMidi.slug}</p>}\n          <p>Auto batch mode: {autoBatchEnabled ? \"ON\" : \"OFF\"}</p>\n          <p>Skipped songs: {skippedSongs.length}</p>\n        </Stats>\n\n        <ButtonContainer>\n          <PlayPauseButton\n            isPlaying={autoBatchEnabled}\n            onClick={toggleAutoBatch}\n            disabled={currentIndex >= allMidis.length}\n          >\n            {autoBatchEnabled ? \"Pause Batch\" : \"Play Batch\"}\n          </PlayPauseButton>\n          <Button\n            onClick={loadNextSong}\n            disabled={\n              isLoading || currentIndex >= allMidis.length || autoBatchEnabled\n            }\n          >\n            {isLoading ? \"Loading...\" : \"Load Next Song\"}\n          </Button>\n          <SkipButton\n            onClick={skipSong}\n            disabled={currentIndex >= allMidis.length}\n          >\n            Skip Song\n          </SkipButton>\n          <Button onClick={copyHistogramsToClipboard}>\n            Copy All Histograms to Clipboard\n          </Button>\n        </ButtonContainer>\n\n        <h2>Recent Histograms</h2>\n        <HistogramList>\n          {recentHistograms.map((item, index) => (\n            <div key={index}>\n              <strong>{item.slug}:</strong> {JSON.stringify(item.data)}\n            </div>\n          ))}\n        </HistogramList>\n\n        {skippedSongs.length > 0 && (\n          <>\n            <h2>Skipped Songs ({skippedSongs.length})</h2>\n            <HistogramList>\n              {skippedSongs.map((slug, index) => (\n                <div key={index}>{slug}</div>\n              ))}\n            </HistogramList>\n          </>\n        )}\n      </ProgressSection>\n\n      <RawlSection>\n        {rawlProps && currentMidi && (\n          <InlineRawlPlayer {...rawlProps}>\n            <div style={{ padding: 20 }}>\n              <h3>Currently Loading: {currentMidi.slug}</h3>\n              <p>\n                This Rawl player is automatically calculating and saving\n                histograms.\n              </p>\n            </div>\n          </InlineRawlPlayer>\n        )}\n      </RawlSection>\n    </Container>\n  );\n};\n\nexport default Histograms;\n","import * as React from \"react\";\nimport { ReactNode } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { InlinePianoLegend } from \"./legends/PianoLegend\";\n\nconst NeonLink = styled.a`\n  display: inline-block;\n  padding: 2px 6px; // Adjust padding as needed\n  color: #fff; // White text color for the neon effect\n  font-size: 17px;\n  font-family: \"Helvetica Neue\", Arial, sans-serif; // Sexy sans-serif font\n  text-decoration: none;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-right: 40px;\n\n  &:hover,\n  &:visited:hover {\n    color: #fff; // Lighter pink color on hover for added interaction\n    text-shadow:\n      0 0 5px #660,\n      0 0 15px #660;\n  }\n`;\n\nconst Example: React.FC<{ name: string; pathname: string; bad?: boolean }> = ({\n  name,\n  pathname,\n  bad = false,\n}) => (\n  <NeonLink key={pathname} href={pathname} target=\"_blank\">\n    <span style={bad ? { textDecoration: \"line-through\" } : {}}>{name}</span>\n  </NeonLink>\n);\n\nconst Container = styled.div`\n  display: flex;\n  width: 100vw; // Set container width to 100% of the viewport width\n  justify-content: center; // Center the children horizontally\n`;\n\nconst Side = styled.div<{ sideImage: string }>`\n  flex-grow: 1;\n  background-size: cover;\n  background-position: center;\n  // Basic structure for the background-image, actual gradient will be defined in LeftSide and RightSide\n  background-image: url(${(props) => props.sideImage});\n`;\n\nconst LeftSide = styled(Side)`\n  margin-right: 20px;\n  background-image: linear-gradient(\n      to right,\n      rgba(0, 0, 0, 0) 0%,\n      rgba(0, 0, 0, 1) 100%\n    ),\n    url(${(props) => props.sideImage});\n`;\n\nconst RightSide = styled(Side)`\n  margin-left: 20px;\n  background-image: linear-gradient(\n      to left,\n      rgba(0, 0, 0, 0) 0%,\n      rgba(0, 0, 0, 1) 100%\n    ),\n    url(${(props) => props.sideImage});\n`;\n\nconst Content = styled.div`\n  width: 900px; // Set a fixed width for the content\n  margin: auto; // Center the content block horizontally within its container\n\n  display: flex; // Enable flexbox for this container\n  flex-direction: column; // Stack children vertically\n  justify-content: center; // Center children vertically in the container\n  align-items: center; // Center children horizontally in the container\n\n  text-align: center; // Center text inside the content (if needed)\n\n  @media (max-width: 900px) {\n    width: 100%; // Make width 100% on smaller screens\n    padding: 0 20px; // Add padding to avoid touching the screen edges\n  }\n`;\n\nexport const ChordStairsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 100px;\n  margin-top: 30px;\n  margin-bottom: 30px;\n\n  @media (max-width: 900px) {\n    flex-direction: column;\n  }\n`;\n\nconst LegendAndMetaphorsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 100px;\n  margin-top: 30px;\n  margin-bottom: 30px;\n\n  @media (max-width: 900px) {\n    gap: 20px;\n  }\n`;\n\nconst Section: React.FC<{\n  title: string;\n  children: ReactNode;\n  scale?: number[];\n}> = ({ title, children, scale }) => {\n  return (\n    <div\n      style={{\n        marginTop: 50,\n        textAlign: \"left\",\n        width: \"100%\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        gap: 5,\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: 5,\n        }}\n      >\n        <span style={{ color: \"gray\", width: 120 }}>{title} </span>\n        {scale && <InlinePianoLegend enabledPitches={scale} />}\n      </div>\n      <div>{children}</div>\n    </div>\n  );\n};\n\nconst OldLandingPage = () => (\n  <Container>\n    <Content>\n      <div style={{ margin: \"100px 0 100px 0\" }}>\n        <iframe\n          width=\"560\"\n          height=\"315\"\n          src=\"https://www.youtube.com/embed/uW7r-nehi7o?si=zjR312K-CGekpBwU\"\n          title=\"YouTube video player\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n          allowFullScreen\n          style={{ border: \"0px\" }}\n        />\n      </div>\n\n      <Section title=\"EdMAC 2024\">\n        <div style={{ color: \"gray\" }}>Gavottes</div>\n        <Example\n          name={\"Mozart, Piano Sonata in D, K. 284\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%206,%20K284.mid\"\n          }\n        />\n        <Example\n          name={\"Hndel HWV 491\"}\n          pathname={\"f/gavotte_in_g_major_hwv_491_handel_george_frideric\"}\n        />\n        <Example name={\"F. J. Gossec\"} pathname={\"f/gavotte_f_j_gossec\"} />\n        {/* <Example\n          name={\"Mahler, Symphony #4, mov. 3\"}\n          pathname={\"f/mahler_4_3\"}\n          bad={true}\n        /> */}\n        <div style={{ color: \"gray\" }}>Bruckner</div>\n        <Example name={\"8/1\"} pathname={\"f/bruckner_8\"} />\n        <Example name={\"8/1 (another file)\"} pathname={\"f/symphony_8_1\"} />\n        <Example name={\"7/1\"} pathname={\"f/bruckner_7_1\"} />\n        <Example name={\"7/2\"} pathname={\"f/bruckner_7_2\"} />\n        <div style={{ color: \"gray\" }}>\n          Structural Versus Rhetorical Musical Borrowing\n        </div>\n        <Example\n          name={\"Ravel, Pavane pour une infante dfunte\"}\n          pathname={\"f/pavane_pour_une_infante_defunte_ravel_recorder\"}\n        />\n        <Example name={\"The Lamp is Low\"} pathname={\"f/the_lamp_is_low\"} />\n        <Example name={\"Debussy, Rverie\"} pathname={\"f/reverie_galimberti\"} />\n        <div style={{ color: \"gray\" }}>Energetic Overflow</div>\n        <Example\n          name={\"Chopin, Ballade in F minor, op. 52\"}\n          pathname={\"f/chopin_ballade_no_4_piano_solo\"}\n        />\n        <Example\n          name={\"Brahms, Intermezzo op. 118 no. 1 in A minor\"}\n          pathname={\"f/brahms_op118_1\"}\n        />\n        <div style={{ color: \"gray\" }}>Eleanor Rigby</div>\n        <Example\n          name={\"The Beatles\"}\n          pathname={\"c/MIDI/The%20Beatles/Eleanor%20Rigby.4.mid\"}\n        />\n        <Example\n          name={\"Cody Fry\"}\n          pathname={\"/f/eleanor_rigby_cody_fry_no_perc1\"}\n        />\n\n        <div style={{ color: \"gray\" }}>Piazzolla, Histoire du Tango:</div>\n        <Example\n          name={\"Bordel 1900\"}\n          pathname={\"f/piazzolla_histoire_du_tango_bordel_1900\"}\n        />\n        <Example\n          name={\"Cafe 1930\"}\n          pathname={\"f/piazzolla_histoire_du_tango_cafe_1930\"}\n        />\n        <Example\n          name={\"Nightclub 1960\"}\n          pathname={\"f/piazzolla_histoire_du_tango_nightclub_1960\"}\n        />\n        <Example\n          name={\"Concert d'aujourd'hui\"}\n          pathname={\"f/piazzolla_histoire_du_tango_concert_aujourdhui\"}\n        />\n        {/* <div style={{ color: \"gray\" }}>Tigran Hamasyan:</div>\n        <Example name={\"Kars 1\"} pathname={\"f/kars_1_tigran_hamasyan\"} /> */}\n        <div style={{ color: \"gray\" }}>Max Steiner</div>\n        <Example\n          name={\"Now Voyager Suite (choose  in top-right, mute chords)\"}\n          pathname={\"f/now_voyager_suite_max_steiner\"}\n        />\n        <div style={{ color: \"gray\" }}>Rachmaninoff, piano concert #4:</div>\n        <Example name={\"1\"} pathname={\"f/rachmaninoff_piano_concerto_4_1\"} />\n        <Example\n          name={\"2\"}\n          pathname={\"f/piano_concerto_no_4_op_40_sergei_rachmaninoff_ii_largo\"}\n          bad={true}\n        />\n        <Example\n          name={\"3\"}\n          pathname={\n            \"f/piano_concerto_no_4_op_40_sergei_rachmaninoff_iii_allegro_vivace\"\n          }\n          bad={true}\n        />\n      </Section>\n      <Section title=\"Yoel Greenberg, How Sonata Forms (2022)\">\n        <Example\n          name={\"2.1. Scarlatti, K. 159\"}\n          pathname={\"f/sonata_k159_scarlatti\"}\n        />\n        <Example\n          name={\"4.1. Corelli, op. 1 no. 8, II\"}\n          pathname={\"f/corelli_op1_no8_ii\"}\n        />\n      </Section>\n      <Section title=\"Third school\">\n        <Example name={\"ABBA, SOS\"} pathname={\"c/MIDI/ABBA/S.O.S.mid\"} />\n        <Example\n          name={\"Ed Sheeran, Shivers\"}\n          pathname={\"f/shivers_ed_sheeran_shivers_ed_sheeran_mixed_ensemble\"}\n        />\n        <Example\n          name={\"Earth, Wind & Fire, September\"}\n          pathname={\"f/earth_wind_fire_september\"}\n        />\n        <Example\n          name={\"Michael Jackson Rock With You\"}\n          pathname={\"c/MIDI/Michael%20Jackson/Rock%20With%20You.mid\"}\n        />\n        <Example\n          name={\"The Korgis, Everybodys Got to Learn Sometime\"}\n          pathname={\n            \"c/MIDI/Korgis/Everybody%27s%20Got%20to%20Learn%20Sometime.mid\"\n          }\n        />\n        <Example\n          name={\"Simply Red, If You Dont Know Me By Now\"}\n          pathname={\n            \"c/MIDI/Simply%20Red/If%20You%20Don%27t%20Know%20Me%20By%20Now.mid\"\n          }\n        />\n        <Example\n          name={\"Gotye (feat. Kimbra), Somebody That I Used to Know\"}\n          pathname={\"f/gotye_feat_kimbra_somebody_that_i_used_to_know\"}\n        />\n        <Example\n          name={\"Peter Gabriel, Solsbury Hill\"}\n          pathname={\"c/MIDI/Peter%20Gabriel/Solsbury%20Hill.mid\"}\n        />\n        <Example\n          name={\"Bjrk, Hyperballad\"}\n          pathname={\"c/MIDI/Bjork/Hyper-Ballad.mid\"}\n        />\n        <Example\n          name={\"Coldplay, Viva la Vida\"}\n          pathname={\"f/Viva_La_Vida_Coldplay\"}\n        />\n      </Section>\n      <Section title=\"major\" scale={[0, 2, 4, 5, 7, 9, 11]}>\n        <Example name={\"Feliz Navidad\"} pathname={\"f/Feliz_Navidad\"} />\n        <Example\n          name={\"John Lennon  Imagine\"}\n          pathname={\"f/John_Lennon_Imagine\"}\n        />\n        <Example\n          name={\"Ed Sheeran  Perfect\"}\n          pathname={\"f/Ed_Sheeran_Perfect\"}\n        />\n        <Example name={\"Jingle Bell Rock\"} pathname={\"f/Jingle_Bell_Rock\"} />\n        <Example\n          name={\"Joe Hisaishi  Summer\"}\n          pathname={\"f/Summer_Joe_Hisaishi\"}\n        />\n        <Example\n          name={\"Super Mario Bros\"}\n          pathname={\"f/Super_Mario_Bros_Main_Theme\"}\n        />\n        <Example name={\"Disney  Up\"} pathname={\"f/Disney_Pixar_Up_Theme\"} />\n        <Example\n          name={\"Yiruma  Kiss the Rain\"}\n          pathname={\n            \"f/Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\"\n          }\n        />\n        <Example\n          name={\"Julius Fuk  Entrance of the Gladiators\"}\n          pathname={\"f/Entry_of_the_Gladiators_-_Julius_Fuk_-_1897\"}\n        />\n      </Section>\n      <Section title=\"natural minor\" scale={[0, 2, 3, 5, 7, 8, 10]}>\n        <Example\n          name={\"Game of Thrones\"}\n          pathname={\"f/Game_of_Thrones_Easy_piano\"}\n        />\n        <Example name={\"Hallelujah\"} pathname={\"f/Hallelujah\"} />\n        <Example name={\"Jolene\"} pathname={\"f/Jolene\"} />\n        <Example\n          name={\"John Legend  All of Me\"}\n          pathname={\"f/All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\"}\n        />\n        <Example name={\"Minecraft  Sweden\"} pathname={\"f/Sweden_Minecraft\"} />\n        <Example\n          name={\"Yann Tiersen  Amlie\"}\n          pathname={\"f/Yann_Tiersen_Amelie\"}\n        />\n        <Example name={\"Despacito\"} pathname={\"f/Despacito\"} />\n      </Section>\n      <Section title=\"harmonic minor\" scale={[0, 2, 3, 5, 7, 8, 11]}>\n        <Example\n          name={\"Imagine Dragons  Believer\"}\n          pathname={\"f/Believer_-_Imagine_Dragons\"}\n        />\n        <Example name={\"Bella Ciao\"} pathname={\"f/Bella_Ciao\"} />\n        <Example\n          name={\"Requiem for a Dream\"}\n          pathname={\"f/Requiem_for_a_Dream\"}\n        />\n      </Section>\n      <Section title=\"mixed minor\" scale={[0, 2, 3, 5, 7, 8, 10, 11]}>\n        <Example name={\"Tetris\"} pathname={\"f/Tetris_Theme\"} />\n        <Example\n          name={\"Tetris (arr. Kyle Landry)\"}\n          pathname={\n            \"f/Kyle_Landrys_Tetris_Theme_Variations_for_Piano_SoloKorobeiniki\"\n          }\n        />\n        <Example\n          name={\"Pirates of the Caribbean\"}\n          pathname={\"f/Pirates_of_the_Caribbean_-_Hes_a_Pirate\"}\n        />\n        <Example\n          name={\"Carol of the Bells\"}\n          pathname={\"f/Carol_of_the_Bells\"}\n        />\n        <Example name={\"Godfather\"} pathname={\"f/Godfather\"} />\n        <Example name={\"Pokmon\"} pathname={\"f/Pokemon_Theme_Song\"} />\n        <Example name={\"Gravity Falls\"} pathname={\"f/Gravity_Falls_Opening\"} />\n      </Section>\n      <Section title=\"blues scale\" scale={[0, 3, 5, 6, 7, 10]}>\n        <Example name={\"Pink Panther\"} pathname={\"f/Pink_Panther\"} />\n        <Example\n          name={\"Megalovania\"}\n          pathname={\"f/Undertale_-_Megalovania_Piano_ver._3\"}\n        />\n        <Example name={\"Hit the Road Jack\"} pathname={\"f/Hit_the_Road_Jack\"} />\n      </Section>\n      <Section title=\"hijaz\" scale={[0, 1, 4, 5, 7, 8, 10]}>\n        <Example name={\"Underground Cocek\"} pathname={\"f/underground-cocek\"} />\n        <Example name={\"Tetris\"} pathname={\"f/korobeiniki-tetris\"} />\n        <Example\n          name={\"Dunavsko horo\"}\n          pathname={\"f/dunavsko-horo---diko-iliev-diko-iliev\"}\n        />\n      </Section>\n      <Section title=\"relative keys\">\n        <Example\n          name={\"Fly Me to the Moon\"}\n          pathname={\"f/Fly_Me_to_the_Moon\"}\n        />\n        <Example name={\"Titanic\"} pathname={\"f/Titanic\"} />\n      </Section>\n      <Section title=\"parallel keys\">\n        <Example\n          name={\"George Bizet  Habanera (from Carmen)\"}\n          pathname={\"f/Habanera_-_Piano_Solo_-_Georges_Bizet\"}\n        />\n        <Example name={\"Gymnopedie\"} pathname={\"f/Gymnopdie_No._1__Satie\"} />\n        <Example\n          name={\"Mozart  Piano Sonata No. 11, mov. 1 (variations)\"}\n          pathname={\"f/mozart_sonata_11_1st\"}\n        />\n      </Section>\n      <Section title=\"modulations\">\n        <Example\n          name={\"Michel Legrand  Umbrellas\"}\n          pathname={\n            \"c/Classical%20MIDI/Legrand/Michel%20Legrand%20-%20Umbrellas%201.mid\"\n          }\n        />\n        <Example\n          name={\"Attack on Titan\"}\n          pathname={\"f/Attack_on_Titan_Shinzou_wo_Sasageyo\"}\n        />\n        <Example\n          name={\"Disney  Frozen\"}\n          pathname={\"f/Let_It_Go_Disney_Frozen\"}\n        />\n        <Example\n          name={\"Chopin  Military Polonaise\"}\n          pathname={\"f/chopin_military_polonaise\"}\n        />\n\n        <Example\n          name={\"Beethoven  Sonata No. 5, mov. 1\"}\n          pathname={\"f/beethoven_sonate_5_1st\"}\n        />\n        <Example\n          name={\"George Bizet  Prelude to Act 1 of Carmen\"}\n          pathname={\"f/Prlude_to_Act_1_of_Carmen_-_Piano_Solo_-_Bizet\"}\n        />\n      </Section>\n      <Section title=\"chromatic\">\n        <Example\n          name={\"Tchaikovsky. Sugar Plum Fairy\"}\n          pathname={\n            \"c/Classical%20MIDI/Tchaikovsky/The%20Nutcracker%20(Suite%20from%20the%20Ballet),%20Op.%2071a%20%203.%20Dance%20of%20the%20Sugar-Plum%20Fairy%20(D.%20Ganetz).mid\"\n          }\n        />\n      </Section>\n      <Section title=\"Balkan brass\">\n        <Example name={\"Underground Cocek\"} pathname={\"f/underground-cocek\"} />\n        <Example name={\"Bubamara\"} pathname={\"f/bubamara\"} />\n        <Example name={\"Ederlezi\"} pathname={\"f/ederlezi\"} />\n        <Example name={\"Hava Nagila\"} pathname={\"f/hava-nagila\"} />\n        <Example name={\"Kalashnjikov\"} pathname={\"f/kalasnjikov\"} />\n        <Example name={\"Tetris\"} pathname={\"f/korobeiniki-tetris\"} />\n        <Example name={\"Mesecina\"} pathname={\"f/mesecina\"} />\n      </Section>\n      <Section title=\"preludes by Chopin\">\n        <Example\n          name={\"4 (E minor)\"}\n          pathname={\n            \"c/Classical%20MIDI/Chopin/24%20Preludes,%20Op.%2028%20%20No.%204%20in%20E%20minor%20('Suffocation')%20(J.%20Sirulnikoff).mid\"\n          }\n        />\n      </Section>\n      <Section title=\"symphonies\">\n        <Example\n          name={\"Rachmaninoff 1/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Rachmaninoff/Symphony%20No.%201%20in%20D%20minor,%20Op.%2013%20for%20piano%20duet%20-%20I.%20Grave,%20Allegro%20ma%20non%20troppo.mid\"\n          }\n        />\n        <Example\n          name={\"Shostakovich 5/ii (solo piano)\"}\n          pathname={\"f/shostakovich_symphony_no5_2nd_movement_for_piano_solo\"}\n        />\n      </Section>\n      <Section title=\"John Williams\">\n        <Example\n          name={\"Double Trouble\"}\n          pathname={\n            \"c/Classical%20MIDI/Williams/Harry%20Potter/Prisoner%20of%20Azkaban%20-%20Double%20Trouble.mid\"\n          }\n        />\n      </Section>\n      <Section title=\"ragtimes by Scott Joplin\">\n        <Example\n          name={\"The Entertainer\"}\n          pathname={\"f/the_entertainer_scott_joplin\"}\n        />\n        <Example\n          name={\"Maple Leaf Rag\"}\n          pathname={\"f/Maple_Leaf_Rag_Scott_Joplin\"}\n        />\n        <Example\n          name={\"Pine Apple Rag\"}\n          pathname={\"f/Pine_Apple_Rag_-_Scott_Joplin_-_1908.mscz\"}\n        />\n        <Example\n          name={\"The Ragtime Dance\"}\n          pathname={\"f/the_ragtime_dance_scott_joplin_1906_arrangement\"}\n        />\n        <Example\n          name={\"Country Club\"}\n          pathname={\"f/country_club_ragtime_two_step_scott_joplin_1909\"}\n        />\n      </Section>\n      <Section title=\"jazz\">\n        <Example name={\"Misty\"} pathname={\"f/Misty_piano_solo\"} />\n        <Example name={\"White Christmas\"} pathname={\"f/white_christmas\"} />\n        <Example name={\"Tams Dek  Vzis\"} pathname={\"f/vizisi\"} />\n        <Example\n          name={\"George Gershwin  Rhapsody in Blue\"}\n          pathname={\"f/Gershwin_Rhapsody_in_Blue_Piano_solo\"}\n        />\n      </Section>\n      <Section title=\"sheet music\">\n        <Example\n          name={\"Scott Joplin  The Entertainer\"}\n          pathname=\"https://musescore.com/user/39031562/scores/15664612\"\n        />\n        <Example\n          name={\"Jingle Bell Rock (arr. John Herbert)\"}\n          pathname=\"https://musescore.com/user/39031562/scores/15670804\"\n        />\n        <Example\n          name={\"Jingle Bell Rock (arr. SkyRecon, in D)\"}\n          pathname=\"https://musescore.com/user/39031562/scores/15671017\"\n        />\n      </Section>\n      <Section title=\"James Hepokoski. A&nbsp;Sonata Theory Handbook (2020)\">\n        <Example\n          name={\"Mozart, Piano Sonata in B-flat, K. 333/i (Allegro)\"}\n          pathname={\"f/sonata_no_13_1st_movement_k_333\"}\n        />\n        <Example\n          name={\n            \"Mozart, Symphony No. 34 in C, K. 338/ii (Andante di molto pi tosto Allegretto)\"\n          }\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2034,%20K338%20%20II.%20Andante%20di%20molto.mid\"\n          }\n        />\n        <Example\n          name={`Haydn, Symphony No. 100 in G, \"Military,\" first movement (Adagio-Allegro)`}\n          pathname={\"f/haydn_100_1\"}\n        />\n        <Example\n          name={`Haydn, String Quartet in G, op. 76 no. 1/i (Allegro con spirito)`}\n          pathname={\n            \"f/string_quartet_in_g_major_hob_iii_75_op_76_no_1_joseph_haydn\"\n          }\n        />\n        <Example\n          name={`Beethoven, Symphony No. 2 in D, op. 36/i (Adagio molto - Allegro con brio)`}\n          pathname={\n            \"c/Classical%20MIDI/Beethoven/Symphony%20No.%202%20(Lucarelli)%20-%201.mid\"\n          }\n        />\n        <Example\n          name={`Beethoven, String Quartet in E Minor, op. 59 no. 2/i (Allegro)`}\n          pathname={\"f/string_quartet_no_8_in_e_minor_opus_59_rasumovsky_no_2\"}\n        />\n        <Example\n          name={`Schubert, String Quartet No. 14 in D Minor, D. 810/i (Allegro)`}\n          pathname={\"f/schubert_death_and_maiden_string_quartet\"}\n        />\n        <div style={{ color: \"gray\" }}>also mentioned:</div>\n        <Example\n          name={`Mozart, Symphony No. 28 in C, K. 200/i (Allegro)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2028,%20K200%20%20I.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={`Mozart, Symphony No. 30 in D, K. 202/i (Allegro)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2030,%20K202%20%20I.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={`Mozart, Piano Sonata in F, K. 332/i (Allegro)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2013,%20K332%20%20I.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={`Mozart, Symphony No. 39 in E-flat, K. 543/iv (Finale, Allegro Molto)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2039,%20K543%20%20IV.%20Finale%20(Allegro%20molto).mid\"\n          }\n        />\n      </Section>\n      <Section title=\"William E.&nbsp;Caplin. Analyzing Classical Form (2013)\">\n        <div>\n          <a\n            href=\"https://www.music.mcgill.ca/acf/\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            the original companion website\n          </a>\n        </div>\n        <Example\n          name={\"2.1. Beethoven, Piano Sonata in F minor, Op. 2, No. 1\"}\n          pathname={\"f/beethoven_sonata_in_f_minor_op_2_no_1_movement_i\"}\n        />\n        <Example\n          name={\"2.2. Mozart, Rondo in D, K. 485\"}\n          pathname={\n            \"f/mozart_rondo_in_d_major_k_485_professional_production_score\"\n          }\n        />\n        <Example\n          name={\"2.3. Beethoven, Piano Sonata in G, Op. 14, No. 2/i\"}\n          pathname={\"f/beethoven_sonata_in_g_op_14_no_2_movement_i\"}\n        />\n        <Example\n          name={\"2.6. Mozart, Piano Sonata in C, K. 330/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2011,%20K330%20%20I.%20Allegro%20moderato.mid\"\n          }\n        />\n        <Example\n          name={\"2.7. Beethoven, Bagatelle in G minor, Op. 119, No. 1\"}\n          pathname={\n            \"f/bagatelle_in_g_minor_op_119_no_1_ludwig_van_beethoven_16_07_1770_26_03_1827_piano_solo\"\n          }\n        />\n        <Example\n          name={\"2.9. Mozart, Piano Sonata in G, K. 283/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%205,%20K283.mid\"\n          }\n        />\n        <Example\n          name={`2.10. Mozart, String Quartet in C (\"Dissonance\"), K. 465/i`}\n          pathname={\"f/mozart_string_quartet_no_19_in_c_major_k465_dissonance\"}\n        />\n        <Example\n          name={`2.11. Mozart, Piano Sonata in C, K. 309/iii`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2010,%20K309%20%20III.%20Presto.mid\"\n          }\n        />\n        <Example\n          name={\"2.13. Beethoven, Piano Sonata in G, Op. 14, No. 2/i\"}\n          pathname={\"f/beethoven_sonata_in_g_op_14_no_2_movement_i\"}\n        />\n        <Example\n          name={\"2.14. Mozart, Piano Sonata in C, K. 330/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2011,%20K330%20%20I.%20Allegro%20moderato.mid\"\n          }\n        />\n        <Example\n          name={`2.15. Mozart, Piano Sonata in C, K. 309/iii`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2010,%20K309%20%20III.%20Presto.mid\"\n          }\n        />\n        <Example\n          name={`2.16. Mozart, Piano Sonata in D, K. 311/iii`}\n          pathname={\"f/sonata_no_9_3rd_movement_k_311\"}\n        />\n        <Example\n          name={`2.17. Mozart, String Quartet in C (\"Dissonance\"), K. 465/i`}\n          pathname={\"f/mozart_string_quartet_no_19_in_c_major_k465_dissonance\"}\n        />\n        <Example\n          name={\"2.18. Beethoven, Bagatelle in G minor, Op. 119, No. 1\"}\n          pathname={\n            \"f/bagatelle_in_g_minor_op_119_no_1_ludwig_van_beethoven_16_07_1770_26_03_1827_piano_solo\"\n          }\n        />\n        <Example\n          name={\"2.23. Beethoven, Piano Sonata in C, Op. 2, No. 3/i\"}\n          pathname={\n            \"f/piano_sonata_no_3_in_c_major_op_2_no_3_ludwig_van_beethoven_piano_sonata_no_3_in_c_major_op_2_no_3_complete\"\n          }\n        />\n        <Example\n          name={\"2.25. Mozart, String Quartet in A, K. 464/ii (from m. 546)\"}\n          pathname={\"f/mozart_string_quartet_no_18_in_a_major_k464\"}\n        />\n        <Example\n          name={\"2.26. Mozart, Piano Sonata in F, K. 332/ii\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2013,%20K332%20%20II.%20Menuetto.mid\"\n          }\n        />\n        <Example\n          name={\"2.27. Beethoven, Symphony No. 5 in C minor, Op. 67/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Beethoven/Symphony%20No.%205%20(Galimberti)%20-%201.mid\"\n          }\n        />\n        <Example\n          name={\"2.29. Beethoven (?), Piano Sonatina in G, Anh. 5/i\"}\n          pathname={\"f/sonatina_in_g_beethoven_anh_5_no_1_beethoven\"}\n        />\n        <Example\n          name={\"2.30. Mozart, Fantasy for Piano in D minor, K. 397\"}\n          pathname={\"f/fantasia_in_d_minor_k_397_385g_wolfgang_amadeus_mozart\"}\n        />\n        <Example\n          name={\"2.33. Mozart, Piano Sonata in F, K. 332/iii\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2013,%20K332%20%20III.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={\"2.34. Beethoven, Piano Trio in B-flat, Op. 11/ii\"}\n          pathname={\n            \"f/beethoven_trio_for_clarinet_cello_and_piano_no_4_op_11_2nd_movement\"\n          }\n        />\n        <Example\n          name={\"2.35. Haydn, Piano Sonata in E minor, H. 34/ii\"}\n          pathname={\n            \"f/sonata_in_e_minor_hob_xvi_34_joseph_haydn_piano_sonata_hob_xvi_34_2_adagio\"\n          }\n        />\n      </Section>\n\n      <Section title=\"Barbershop\">\n        <Example\n          name={\"Kristofer Maddigan, Cuphead  A Quick Break\"}\n          pathname={\"f/cuphead_a_quick_break\"}\n        />\n        <Example\n          name={\n            \"Kristofer Maddigan, Cuphead  Don't Deal With The Devil (incomplete arrangement)\"\n          }\n          pathname={\"f/don_t_deal_with_the_devil_barbershop_quartet_cuphead\"}\n        />\n        <Example\n          name={\"God Only Knows, arr. Clay Hine (OST 'Bioshock Infinite')\"}\n          pathname={\"f/god_only_knows_bioshock_infinite_2013\"}\n        />\n        <Example\n          name={\"Chauncey Olcott, My Wild Irish Rose (polecat)\"}\n          pathname={\"f/my_wild_irish_rose\"}\n        />\n        <Example\n          name={\n            \"Never Gonna Give You Up (Rick Roll) - not a barbershop harmony\"\n          }\n          pathname={\"f/never_gunna_give_you_up_barbershop\"}\n        />\n      </Section>\n\n      {/* <Section title=\"Drew Nobile. Form as Harmony in Rock Music\">\n        <Example\n          name={\"2.1. Beethoven, Piano Sonata in F minor, Op. 2, No. 1\"}\n          pathname={\"f/beethoven_sonata_in_f_minor_op_2_no_1_movement_i\"}\n        />\n      </Section> */}\n\n      {/* <Example\n          name={\"Fr Elise\"}\n          pathname={\"f/Fr_Elise\"}\n        /> */}\n\n      {/* <Example\n          name={\"Interstellar\"}\n          pathname={\"f/Interstellar\"}\n        />\n        <Example\n          name={\"Moonlight Sonata\"}\n          pathname={\n            \"f/Sonate_No._14_Moonlight_1st_Movement\"\n          }\n        /> */}\n\n      {/* <Example\n          name={\"Minecraft  Wet Hands\"}\n          pathname={\n            \"f/Wet_Hands_Minecraft\"\n          }\n        /> */}\n\n      {/* <Example\n          name={\"Ed Sheeran  Shape of You\"}\n          pathname={\n            \"f/Ed_Sheeran_Shape_of_you\"\n          }\n        /> */}\n      {/* <Example\n          name={\"Ed Sheeran  Photograph\"}\n          pathname={\n            \"f/Photograph_Ed_Sheeran\"\n          }\n        /> */}\n\n      {/* <Example\n          name={\"Billie Eilish  Bad Guy\"}\n          pathname={\n            \"f/Billie_Eilish_Bad_Guy\"\n          }\n        /> */}\n\n      <div style={{ marginTop: 100 }}>\n        <Link to={{ pathname: \"/course\" }} style={{ fontSize: 26 }}>\n          A course on rock harmony and arrangement\n        </Link>\n      </div>\n      <div style={{ marginTop: 100 }}>\n        I'm{\" \"}\n        <a href=\"mailto:cxielamiko@gmail.com\" target=\"_blank\" rel=\"noreferrer\">\n          Vitaly Pavlenko\n        </a>\n        . I explain my approach in{\" \"}\n        <a\n          href=\"https://twitter.com/vitalypavlenko/status/1771820942680830417\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          39 tweets\n        </a>\n        . The code is{\" \"}\n        <a\n          href=\"https://github.com/vpavlenko/rawl\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          on Github\n        </a>\n        . I also collect{\" \"}\n        <a\n          href=\"https://github.com/vpavlenko/study-music\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          resources on music theory\n        </a>\n      </div>\n    </Content>\n  </Container>\n);\n\nexport default OldLandingPage;\n","import React from \"react\";\n\nconst shortcuts = {\n  Global: {\n    h: \"Toggle this help modal\",\n    Space: \"Play/Pause\",\n    \"-\": \"Decrease speed by 0.1\",\n    _: \"Decrease speed by 0.01\",\n    \"=\": \"Increase speed by 0.1\",\n    \"+\": \"Increase speed by 0.01\",\n    ArrowLeft: \"Seek backward 5 seconds\",\n    ArrowRight: \"Seek forward 5 seconds\",\n    f: \"Switch to frozen layout\",\n  },\n};\n\nconst styles = {\n  container: {\n    fontFamily: \"Arial, sans-serif\",\n    color: \"#ffffff\",\n    padding: \"20px\",\n    maxWidth: \"600px\",\n    margin: \"0 auto\",\n  },\n  h2: {\n    borderBottom: \"1px solid #444\",\n    paddingBottom: \"10px\",\n    marginBottom: \"20px\",\n  },\n  category: {\n    marginBottom: \"20px\",\n  },\n  h3: {\n    color: \"#bb86fc\",\n    marginBottom: \"10px\",\n  },\n  table: {\n    width: \"100%\",\n    borderCollapse: \"collapse\" as const,\n  },\n  tr: {\n    borderBottom: \"1px solid #333\",\n  },\n  td: {\n    padding: \"8px 0\",\n  },\n  kbd: {\n    backgroundColor: \"#333\",\n    color: \"#fff\",\n    padding: \"2px 5px\",\n    borderRadius: \"3px\",\n    fontFamily: \"monospace\",\n    fontSize: \"0.9em\",\n  },\n};\n\nexport const ShortcutHelp: React.FC = () => (\n  <div style={styles.container}>\n    <h2 style={styles.h2}>Keyboard Shortcuts</h2>\n    {Object.entries(shortcuts).map(([category, categoryShortcuts]) => (\n      <div key={category} style={styles.category}>\n        <h3 style={styles.h3}>{category}</h3>\n        <table style={styles.table}>\n          <tbody>\n            {Object.entries(categoryShortcuts).map(([key, description]) => (\n              <tr key={key} style={styles.tr}>\n                <td style={styles.td}>\n                  <kbd style={styles.kbd}>{key}</kbd>\n                </td>\n                <td style={styles.td}>{description}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    ))}\n  </div>\n);\n","import React, { useEffect } from \"react\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { slugify } from \"transliteration\";\nimport { Chord } from \"../legends/chords\";\nimport ChordStairs from \"../legends/ChordStairs\";\nimport { BLOG_POSTS, extractTextFromJsx } from \"./blogPosts\";\n\nconst DATE_COLOR = \"#666\";\n\n// Styled components for the blog\nconst BlogContainer = styled.div`\n  padding: 20px;\n  max-width: 800px;\n  margin: 0 auto;\n  color: #fff;\n  position: relative;\n`;\n\nconst BlogTitle = styled.h1`\n  color: #fff;\n  margin-bottom: 30px;\n`;\n\nconst BlogPostList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 25px;\n`;\n\n// Define BlogPostTitle before using it in BlogPostPreview\nconst BlogPostTitle = styled.div`\n  color: #fff;\n  font-size: 1.5rem;\n  // font-weight: 100;\n  min-width: 40em;\n  max-width: 100%;\n  text-align: left;\n  white-space: nowrap;\n\n  @media (max-width: 768px) {\n    min-width: unset;\n    white-space: normal;\n  }\n`;\n\n// Constants for chord visualization width calculation\nconst NOTE_WIDTH = 30; // From ChordStairs.tsx\nconst CHORD_SCALE = 0.85; // Scale factor used in the ChordStairs component\nconst MAX_CHORD_COUNT = Math.max(\n  ...BLOG_POSTS.map((post) => post.titleChords?.length || 0),\n);\nconst CHORD_COLUMN_WIDTH = MAX_CHORD_COUNT * NOTE_WIDTH * CHORD_SCALE;\n\n// New BlogPostItem component to replace the inline div style\nconst BlogPostItem = styled.div`\n  display: grid;\n  grid-template-columns: ${CHORD_COLUMN_WIDTH}px 1fr;\n  align-items: center;\n  margin-bottom: 1.5em;\n  gap: 15px;\n`;\n\n// Redefine BlogPostChords to align with grid\nconst BlogPostChords = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  height: 100%;\n  cursor: pointer;\n  width: 100%; /* Take up all available space in the column */\n`;\n\n// Updated BlogPostPreview to fit the new grid layout\nconst BlogPostPreview = styled(Link)`\n  display: flex;\n  flex-direction: column;\n  text-decoration: none;\n  color: inherit;\n\n  &:hover {\n    ${BlogPostTitle} {\n      color: #ffffff;\n    }\n  }\n`;\n\n// Updated BlogPostDate to go under the title and be left-aligned\nconst BlogPostDate = styled.div`\n  color: ${DATE_COLOR};\n  font-size: 0.9rem;\n  font-weight: 100;\n  margin-top: 7px;\n`;\n\nconst BlogPostContent = styled.div`\n  line-height: 1.6;\n  color: #fff;\n`;\n\nconst BlogPostContainer = styled.div`\n  margin-bottom: 200px;\n`;\n\n// Updated sidebar component for horizontal alignment\nconst BlogPostDateSidebar = styled.div`\n  color: ${DATE_COLOR};\n  font-size: 0.9rem;\n  width: 120px;\n  text-align: right;\n  margin-right: 30px;\n  margin-left: -150px; // Keeps it hanging to the left\n`;\n\nconst SidebarDate = styled.div`\n  width: 100%;\n`;\n\n// New wrapper for title to provide positioning context\nconst TitleContainer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: baseline;\n`;\n\n// Add a new styled component for title chords\nconst TitleChords = styled.div`\n  margin-top: 100px;\n  margin-bottom: 130px;\n  display: flex;\n`;\n\n// Utility function to format dates\nconst formatDisplayDate = (dateString: string) => {\n  const date = new Date(dateString);\n  return date.toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  });\n};\n\n// Updated interface for URL parameters\ninterface BlogParams {\n  postId?: string;\n  slug?: string;\n}\n\n// Updated BlogPost interface to accommodate JSX titles\nexport interface BlogPost {\n  id: number;\n  title: string | React.ReactNode;\n  date: string;\n  titleChords?: Chord[];\n  content: () => React.ReactNode;\n}\n\n// Utility function to handle title rendering\nconst renderTitle = (title: string | React.ReactNode) => {\n  if (typeof title === \"string\") {\n    // For backward compatibility with string titles\n    return title;\n  }\n  // If it's already JSX, just return it\n  return title;\n};\n\n// Blog component\nconst Blog: React.FC = () => {\n  const { postId, slug } = useParams<BlogParams>();\n  const history = useHistory();\n\n  // Update redirect logic to always ensure correct slug\n  useEffect(() => {\n    if (postId) {\n      const id = parseInt(postId, 10);\n      const post = BLOG_POSTS.find((p) => p.id === id);\n\n      if (post) {\n        const correctSlug = slugify(\n          typeof post.title === \"string\"\n            ? post.title\n            : extractTextFromJsx(post.title),\n        );\n\n        // Redirect if slug is missing or doesn't match the correct one\n        if (!slug || slug !== correctSlug) {\n          history.replace(`/blog/${postId}/${correctSlug}`);\n        }\n      }\n    }\n  }, [postId, slug, history]);\n\n  // If postId is provided, show that post, otherwise show the index\n  if (postId) {\n    const id = parseInt(postId, 10);\n    const post = BLOG_POSTS.find((post) => post.id === id);\n\n    if (post) {\n      return (\n        <BlogContainer>\n          <TitleContainer>\n            <BlogPostDateSidebar>\n              <SidebarDate>{formatDisplayDate(post.date)}</SidebarDate>\n            </BlogPostDateSidebar>\n            <BlogTitle>{renderTitle(post.title)}</BlogTitle>\n          </TitleContainer>\n          {post.titleChords && (\n            <TitleChords className=\"title-chords\">\n              <ChordStairs\n                mode={{ title: \"\", chords: post.titleChords }}\n                scale={2}\n                playbackMode=\"together\"\n              />\n            </TitleChords>\n          )}\n          <BlogPostContainer>\n            <BlogPostContent>{post.content()}</BlogPostContent>\n          </BlogPostContainer>\n        </BlogContainer>\n      );\n    }\n  }\n\n  // Sort posts by date (newest first)\n  const sortedPosts = [...BLOG_POSTS].sort(\n    (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime(),\n  );\n\n  return (\n    <BlogContainer>\n      <BlogTitle>Structures and Styles in Western Music</BlogTitle>\n      <BlogPostList>\n        {sortedPosts.map((post) => (\n          <BlogPostItem key={post.id}>\n            <BlogPostChords>\n              {post.titleChords && (\n                <ChordStairs\n                  mode={{ title: \"\", chords: post.titleChords }}\n                  scale={0.85}\n                  playbackMode=\"together\"\n                />\n              )}\n            </BlogPostChords>\n            <BlogPostPreview\n              to={`/blog/${post.id}/${slugify(\n                typeof post.title === \"string\"\n                  ? post.title\n                  : extractTextFromJsx(post.title),\n              )}`}\n            >\n              <BlogPostTitle>\n                {renderTitle(post.title)}\n                <BlogPostDate>{formatDisplayDate(post.date)}</BlogPostDate>\n              </BlogPostTitle>\n            </BlogPostPreview>\n          </BlogPostItem>\n        ))}\n      </BlogPostList>\n    </BlogContainer>\n  );\n};\n\nexport default Blog;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { A, c, E, k, s } from \"../book/chapters\";\nimport { CorpusLink } from \"../corpora/CorpusLink\";\nimport { BlogPost } from \"./Blog\";\n\n// Reuse styling components\n\nconst SPAN = styled.span`\n  line-height: 1.3;\n  font-size: 12pt;\n  color: #c8c8c8;\n`;\n\nconst P = styled.p`\n  margin-bottom: 1.5em;\n  line-height: 1.3;\n  font-size: 12pt;\n  color: #c8c8c8;\n`;\n\nconst H = styled.h2`\n  margin-top: 70px;\n  font-family: \"Inter\", sans-serif;\n`;\n\nconst a = (href: string, text: string) => (\n  <a\n    href={href}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    style={{ textDecoration: \"underline\" }}\n  >\n    {text}\n  </a>\n);\n\n// Template string proxy for CorpusLink\nconst CL = (strings: TemplateStringsArray, ...values: any[]) => {\n  // Combine the strings and values to get the full slug\n  const slug = strings.reduce((result, str, i) => {\n    return result + str + (values[i] || \"\");\n  }, \"\");\n  return <CorpusLink slug={slug} />;\n};\n\nconst Direct = styled.span`\n  color: #fff;\n  font-weight: 700;\n  font-size: 14pt;\n  letter-spacing: 0.03em;\n  // font-family: \"Playfair Display\", serif;\n  font-family: \"Alegreya\", serif;\n  // font-family: \"Merriweather\", serif;\n  // font-family: 'Crimson Text', serif;\n  // font-family: 'Bitter', serif;\n  // font-family: 'Roboto Mono', monospace;\n  // font-family: \"Josefin Slab\", serif;\n  // font-family: \"Cormorant Garamond\", serif;\n  // font-family: \"DM Serif Display\", serif;\n  // font-family: 'Source Code Pro', monospace;\n`;\n\nconst DirectMe = styled.span`\n  color: #fff;\n  font-weight: 700;\n  font-size: 14pt;\n  letter-spacing: 0.05em;\n  font-family: \"Times New Roman\", serif;\n`;\n\n// Utility function to extract text content from JSX\nconst extractTextFromJsx = (element: React.ReactNode): string => {\n  if (element === null || element === undefined) {\n    return \"\";\n  }\n\n  if (typeof element === \"string\" || typeof element === \"number\") {\n    return String(element);\n  }\n\n  if (typeof element === \"boolean\") {\n    return \"\";\n  }\n\n  if (Array.isArray(element)) {\n    return element.map(extractTextFromJsx).join(\"\");\n  }\n\n  if (React.isValidElement(element)) {\n    // Extract text from children\n    const children = element.props.children;\n    return extractTextFromJsx(children);\n  }\n\n  return \"\";\n};\n\n// Blog posts collection\nexport const BLOG_POSTS: BlogPost[] = [\n  {\n    id: 1,\n    title: (\n      <>\n        I gathered a corpus of <i>Stevie Wonder</i>\n      </>\n    ),\n    date: \"2025-03-17\",\n    titleChords: [\"Imaj9\", \"I7\", \"i7\"],\n    content: () => (\n      <>\n        <H>Hooked</H>\n        <P>\n          <Direct>\n             Stevie Wonder composed in a unique way, he used his own special{\" \"}\n            <i>wonderful</i> mode. I'm not sure exactly which one, but I hear\n            it.\n          </Direct>{\" \"}\n           Natasha told me over coffee earlier today as we were sitting in\n          Pulp, an expat coffee shop in Tbilisi. (There was no pun in Russian.)\n        </P>\n        <P>\n          I had very poor resolution in my memory around that part of musical\n          culture, so I tried to come up with a speculative stub answer:\n        </P>\n        <P>\n          <DirectMe>\n             Well, if I play {A(\"superstition\")} in my head, it uses{\" \"}\n            {s`scale:minor_pentatonic`}. Plus I'd expect {s`dorian:IV`}, like in\n            soul on average.\n          </DirectMe>{\" \"}\n           I replied.\n        </P>\n        <P>\n          \"Maybe also a {s`V:soul_dominant`}, as Mark Spicer cleverly{\" \"}\n          {a(\n            \"https://mtosmt.org/issues/mto.17.23.2/mto.17.23.2.spicer.html\",\n            \"christened it\",\n          )}\n          .\" I've thought that but I didn't say that because Natasha got a\n          degree in Soviet music theory long ago, and people haven't talked\n          about soul dominants back then yet.\n        </P>\n        <P>\n          <Direct>\n             No, there's something deeper. He has some simple tracks, right,\n            but in some others he's doing idiosyncratic complex harmonies which\n            I couldn't indentify by ear yet.\n          </Direct>\n        </P>\n        <P>\n          I didn't believe it. I've never heard of Stevie Wonder being as unique\n          as {CL`tom_jobim`} or Frank Zappa. I was without a laptop, so I\n          coulnd't start investigating on the spot.\n        </P>\n        <P>\n          <DirectMe> How would you approach this puzzle?</DirectMe>  I asked\n          her.\n        </P>\n        <P>\n          <Direct>\n             Well, I'll listen to his tracks and start transcribing them on a\n            piano.\n          </Direct>\n        </P>\n        <P>\n          I was hooked. These tasks are exactly what I can easily snipe with my\n          machinery.\n        </P>\n        <P>\n          <DirectMe>\n             I can answer that in 10 minutes, if we have MIDI files.\n          </DirectMe>{\" \"}\n           I said. Well, maybe it'll take three hours or a day, but\n          energetically it would feel like 10 minutes, like the most pleasant\n          activity I can imagine. And like something certainly doable.\n        </P>\n        <P>\n          I didn't remember how much tracks we have for him on{\" \"}\n          {a(\"https://colinraffel.com/projects/lmd/\", \"Lakh MIDI dataset\")} -\n          one or fifty? Was he as popular as The Beatles?\n        </P>\n        <P>\n          I opened{\" \"}\n          {a(\n            \"https://chiptune.app/browse/MIDI/Stevie%20Wonder/\",\n            \"Stevie Wonder on Chiptune\",\n          )}\n          . Luckily, I've found 25 songs. Therefore, by the end of today I will\n          know what's going on.\n        </P>\n        <H>Building the corpus</H>\n        <P>\n          Lakh has several versions for many songs. I speculate that in the 90s\n          and 2000s many karaoke arrangers encoded music in MIDI. One of them\n          was even teaching me computer arrangement in 2022 in MCIM. The more\n          popular the track was, the more versions of it were circulating in the\n          early internet.\n        </P>\n        <P>\n          Ideally I should pick the best file overall by listening to them all\n          and comparing to the original recordings. But I don't even have time\n          to listen original recordings. And if The Mode actually exists, it\n          should be so pronounced that I will see it even in dirty data.\n        </P>\n        <P>\n          So for each song I've simply picked a file with the biggest size. I\n          considered that it's a good proxy metric for transcription accuracy.\n          Much like when I trust a chord transcriber more if they notate\n          something like Am7b5 or Csus2  over the one who only uses Am and Dm.\n        </P>\n        <P>\n          I've uploaded 25 tracks to Rawl. Next I've annotated them:\n          <ul>\n            <li>marked tonicizations/modulations (\"colorized the notes\")</li>\n            <li>\n              marked phrases (moved white four-bar vertical lines here and\n              there)\n            </li>\n            <li>marked sections (vertically stacked repeating chunks).</li>\n          </ul>\n        </P>\n        <P>\n          Here's what I've got: {CL`stevie_wonder`}. As you open each track,\n          uncheck (mute) the \"Std Drum Kit\" / \"Drums\" in the top right - drum\n          parts are very noisy and unrelated to our quest of describing the\n          wonderful mode. Also disable the \"Bird Tweet\" track if you find one -\n          it isn't as equally temperamental.\n        </P>\n        <H>No Wonder</H>\n        <P>\n          As the very first step, I asked{\" \"}\n          {a(\n            \"https://chatgpt.com/share/67d85b2d-af54-8005-bae8-3c1f8ad7a2ba\",\n            \"GPT\",\n          )}{\" \"}\n          and{\" \"}\n          {a(\n            \"https://claude.ai/share/860a44ca-0946-4292-9e32-ba3c4145cf18\",\n            \"Claude\",\n          )}{\" \"}\n          to exclude covers. It may be that Natasha specifically loves his\n          covers  as I haven't asked her to name any tracks that are\n          particularly wonderful. But for the sake of time, to make the corpus\n          as stylistically coherent as possible, I'm gonna exclude what's not\n          coming directly from his harmonic brain.\n        </P>\n        <P>\n          I've excluded {A(\"a-place-in-the-sun\")}, {A(\"ebony-ivory\")},{\" \"}\n          {A(\"for-once-in-my-life.2\")}, {A(\"heaven-help-us-all\")} and{\" \"}\n          {A(\"that-s-what-friends-are-for\")}.\n        </P>\n        <P>\n          We can also think of them as hold-outs: we can later validate that\n          excluded tracks are stylistically far from Stevie Wonder's own tracks.\n          This way we can check if our findings present discoveries of Stevie\n          Wonder's style rather than of soul in general.\n        </P>\n        <H>Modes</H>\n        <P>As the very second step, I've listed tonic chords for each track:</P>\n\n        <div style={{ position: \"relative\", width: \"100%\", margin: \"2em 0\" }}>\n          <table\n            style={{\n              position: \"relative\",\n              left: \"50%\",\n              transform: \"translateX(-50%)\",\n              width: \"100vw\",\n              maxWidth: \"100vw\",\n              borderCollapse: \"collapse\",\n              marginBottom: \"1.5em\",\n            }}\n          >\n            <thead>\n              <tr>\n                <th\n                  style={{ textAlign: \"left\", padding: \"8px\" }}\n                >{c`Imaj9`}</th>\n                <th\n                  style={{ textAlign: \"left\", padding: \"8px\" }}\n                >{c`Imaj7`}</th>\n                <th style={{ textAlign: \"left\", padding: \"8px\" }}>{c`I`}</th>\n                <th style={{ textAlign: \"left\", padding: \"8px\" }}>{c`I7`}</th>\n                <th style={{ textAlign: \"left\", padding: \"8px\" }}>{c`i7`}</th>\n                <th style={{ textAlign: \"left\", padding: \"8px\" }}>{c`i`}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr style={{ verticalAlign: \"top\" }}>\n                <td style={{ textAlign: \"left\", padding: \"8px\" }}>\n                  <div>{A(\"do-i-do\")}</div>\n                  <div>{A(\"golden-lady.1\")}</div>\n                  <div>{A(\"you-are-the-sunshine-of-my-life.5\")}</div>\n                </td>\n                <td style={{ textAlign: \"left\", padding: \"8px\" }}>\n                  <div>{A(\"for-your-love\")}</div>\n                  <div>{A(\"my-cherie-amour.1\")}</div>\n                  <div>{A(\"send-one-your-love\")}</div>\n                </td>\n                <td style={{ textAlign: \"left\", padding: \"8px\" }}>\n                  <div>{A(\"happy-birthday-stevie-wonder\")}</div>\n                  <div>{A(\"i-just-called-to-say-i-love-you.6\")}</div>\n                  <div>{A(\"isn-t-she-lovely-2\")}</div>\n                  <div>{A(\"overjoyed.1\")}</div>\n                  <div>{A(\"ribbon-in-the-sky.1\")}</div>\n                  <div>{A(\"sir-duke\")}</div>\n                </td>\n                <td style={{ textAlign: \"left\", padding: \"8px\" }}>\n                  <div>{A(\"boogie-on-reggae-woman.1\")}</div>\n                  <div>{A(\"signed-sealed-delivered-i-m-yours.1\")}</div>\n                  <div>{A(\"uptight-everything-s-alright\")}</div>\n                </td>\n                <td style={{ textAlign: \"left\", padding: \"8px\" }}>\n                  <div>{A(\"higher-ground.2\")}</div>\n                  <div>{A(\"i-wish.1\")}</div>\n                  <div>{A(\"part-time-lover.3\")}</div>\n                  <div>{A(\"superstition\")}</div>\n                </td>\n                <td style={{ textAlign: \"left\", padding: \"8px\" }}>\n                  <div>{A(\"don-t-you-worry-bout-a-thing\")}</div>\n                  <div>{A(\"master-blaster\")}</div>\n                  <div>{A(\"golden-lady.1\")} (last section)</div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <P>\n          Maybe looking at these modes will be fruitful eventually. For now I\n          want to group together some harmonic devices that Stevie Wonder uses\n          throughout: {s`blog_1:line_clichee`} {s`blog_1:mario_cadence`}\n        </P>\n\n        <H>One-liner analyses</H>\n\n        <P>\n          Next I want to briefly analyse harmony of each track. I'll go from\n          easiest to trickiest. The easiest group is {c`I7`}:\n        </P>\n        <P>\n          {A(\"boogie-on-reggae-woman.1\")}: {c`II7 V7 I7 IV7 bVII7`}  mostly\n          dominant seventh chords\n        </P>\n        <P>\n          {A(\"uptight-everything-s-alright\")}: {s`shuttle:mixolydian`}{\" \"}\n          throughout\n        </P>\n        <P>\n          {A(\"signed-sealed-delivered-i-m-yours.1\")}:{\" \"}\n          {c`I I7 vi7 ii7 IV Vsoulii I`}, diatonic major with {c`b7`} instead of{\" \"}\n          {c`7`}\n        </P>\n\n        <H>Conclusion</H>\n\n        <P>\n          This turned out to be a longer project than I expected. I've spent a\n          day gathering a corpus, but it'll take more days to process all\n          harmonies in it and make detailed descriptions on what Stevie Wonder\n          does.\n        </P>\n      </>\n    ),\n  },\n  {\n    id: 2,\n    title: \"Types of dominant V\",\n    date: \"2025-03-18\",\n    titleChords: [\"Vsus4\", \"V\", \"V7\", \"V9\", \"Vb9\", \"V+\", \"V+s9\", \"Vsoul\"],\n    content: () => (\n      <>\n        <H>Dominant V</H>\n        <P>\n          The most common harmonic motion observed by any Western music\n          theoriests is dominant to tonic: {c`V I`} and {c`V7 I`} in major,{\" \"}\n          {c`V i`} and {c`V7 i`} in minor. It usually happens at the end of the\n          phrase or a section.\n        </P>\n        <P>\n          There are various extra notes that can be stacked upon {c`V`} in this\n          context. In common practice harmony, it's either {c`V`} or {c`V7`}, in\n          Romantic style {s`V:9`} and {s`V:b9`} is frequent, in jazz harmony\n          various tension tones are added: {s`V:augmented`}, {s`V:aug_s9`}. Plus\n          there's a ubiquitous voice-leading-turned-chord {s`V:sus4`} which, in\n          last decades, can be left {s`V:sus4_unresolved`}. In soul there's{\" \"}\n          {s`V:soul_dominant`}.\n        </P>\n      </>\n    ),\n  },\n\n  {\n    id: 3,\n    title: \"Whole-tone scale\",\n    date: \"2025-03-19\",\n    titleChords: [\"WT1\", \"WT2\"],\n    content: () => (\n      <>\n        <H>Two variants</H>\n        <P>\n          If a chromatic scale is the alphabet of Western music, whole-tone\n          scale is the easiest object to build on it. You should simply omit all\n          even notes. Or, equivalently, omit all odd notes.\n        </P>\n        <P>\n          So, from {c`1 b2 2 b3 3 4 #4 5 b6 6 b7 7`} we get two scales:\n          <ul>\n            <li>{c`1 2 3 #4 b6 b7`}</li>\n            <li>{c`b2 b3 4 5 6 7`}</li>\n          </ul>\n        </P>\n        <P>Try it: {k(\"major-seconds\")}</P>\n        <P>\n          The most important property of it is its complete symmetry. All\n          intervals are the same. Therefore, out of context there's no way to\n          decide, which of its six notes should be chosen as the main, {c`1`}{\" \"}\n          note. This happens for{\" \"}\n          {a(\n            \"https://en.wikipedia.org/wiki/Mode_of_limited_transposition\",\n            \"Modes of limited transposition\",\n          )}\n        </P>\n        <P>\n          This isn't a typical object in Western functional harmony. Therefore,\n          in my color scheme both scales look like random sets of colors. That's\n          because they are used rarely - mostly in 20th century. A modern,\n          fresh, spicy beast.\n        </P>\n        <P>Examples in my corpus: {s`scale:whole-tone`}</P>\n        <P>\n          In jazz, it can be played over a {c`V7`} chord:{\" \"}\n          <ul>\n            <li>{A(\"coconut-mall---mario-kart-wii\")}</li>\n            <li>\n              {A(\"oscar-peterson---jazz-exercises-for-piano---exercise-4\")}\n            </li>\n            <li>{A(\"magic-waltz\")}</li>\n            <li>\n              {A(\"vizisi\")} over an applied {c`V7/ii`}\n            </li>\n          </ul>\n        </P>\n\n        <P>It's usually used once in a piece.</P>\n      </>\n    ),\n  },\n  {\n    id: 4,\n    title: (\n      <>\n        <i>Schubert</i>, Two chords in major\n      </>\n    ),\n    date: \"2025-02-23\",\n    titleChords: [\"V7\", \"I\", \"V7\", \"I\"],\n    content: () => (\n      <>\n        <H>Schubert's Originaltnze op. 9</H>\n        <P>\n          In 1821, when Schubert was 24, he published a set of 36 waltzes known\n          as Originaltnze op. 9 (D 365). Most of them are here:{\" \"}\n          {CL`schubert_op9_d365`}\n        </P>\n        <P>\n          I've hand-picked four of them which have the simplest organization:\n          they consist of just two chords: {c`I`} and {c`V7`}.\n        </P>\n        <P>\n          Here they are:\n          <ul>\n            <li>{A(\"schubert_d365_09\")}</li>\n            <li>{A(\"wima.e480-schubert_de.-tanz-d.365.25\")}</li>\n            <li>{A(\"wima.1124-schubert_de.-tanz-d.365.26\")}</li>\n            <li>{A(\"wima.4be9-schubert_de.-tanz-d.365.28\")}</li>\n          </ul>\n        </P>\n        <H>Analysis</H>\n        <P>\n          These waltzes are remarkable for their simplicity, yet they remain\n          charming and musically interesting. Schubert manages to create melodic\n          variety while restricting himself to just two chords: the tonic (I)\n          and dominant seventh (V7).\n        </P>\n        <P>\n          Waltz #25 is particularly interesting in how it establishes a clear\n          rhythmic pattern in the left hand while the right hand melody dances\n          above it with grace.\n        </P>\n        <P>\n          For composers, these pieces demonstrate how much can be achieved with\n          minimal harmonic material when combined with thoughtful melodic\n          writing and rhythmic consistency.\n        </P>\n        <P>\n          I recommend studying waltz #25{\" \"}\n          {A(\"wima.e480-schubert_de.-tanz-d.365.25\")} in detail. The left hand\n          provides a steady rhythmic foundation while the melody contains both\n          stepwise motion and elegant leaps.\n        </P>\n        <P>\n          For another example in a similar style, check out \"Les Cloches du\n          Monastre\" by Alfred Lefbure-Wly.\n        </P>\n      </>\n    ),\n  },\n  {\n    id: 5,\n    title: (\n      <>\n        <i>Gibran Alcocer</i>, Four-chord Loops of Triads in Natural Minor\n      </>\n    ),\n    date: \"2025-03-02\",\n    titleChords: [\"iv\", \"bVI\", \"i\", \"bVII\"],\n    content: () => (\n      <>\n        <H>The Modern Sound of Looping Minor Triads</H>\n        <P>\n          {CL`gibran_alcocer`}'s compositions sound distinctly modern. They\n          evoke the same feeling as {CL`yann_tiersen`}'s music for Amlie or{\" \"}\n          {CL`evgeny_grinko`}'s compositions. But what makes this style so\n          recognizable?\n        </P>\n        <P>\n          After analyzing several pieces, I've identified some key\n          characteristics that define this modern piano style.\n        </P>\n        <H>Musical Analysis</H>\n        <P>\n          Two pieces in particular showcase these elements clearly:\n          <ul>\n            <li>{E(\"idea-15---gibran-alcocer\")}</li>\n            <li>{E(\"idea-n.10---gibran-alcocer\")}</li>\n          </ul>\n        </P>\n        <P>\n          The harmonic foundation of these pieces lies in natural minor triads:\n        </P>\n        <P>\n          These compositions rely on a limited selection of chords from the\n          natural minor scale:\n        </P>\n        <P>\n          <ul>\n            <li>{c`i`} - minor tonic</li>\n            <li>{c`iio`} - diminished supertonic</li>\n            <li>{c`bIII`} - flat mediant</li>\n            <li>{c`iv`} - minor subdominant</li>\n            <li>{c`v`} - minor dominant</li>\n            <li>{c`bVI`} - flat submediant</li>\n            <li>{c`bVII`} - flat subtonic</li>\n          </ul>\n        </P>\n        <P>\n          What's particularly distinctive is Alcocer's use of{\" \"}\n          {s`progression:four_chords`} as the structural foundation. This\n          approach creates a hypnotic, repeating framework that's both\n          predictable and emotionally evocative.\n        </P>\n        <H>Rhythmic Structure</H>\n        <P>\n          Another distinctive feature in Alcocer's work is his use of{\" \"}\n          {s`hypermeter:extra_bar_last_chord_in_loop`}. This technique adds a\n          slight asymmetry to what would otherwise be perfectly square phrases,\n          creating a sense of gentle forward momentum.\n        </P>\n        <P>\n          For those interested in exploring similar sounds, I recommend studying\n          these additional examples from other composers:\n        </P>\n        <P>\n          <ul>\n            <li>{A(\"i-wanted-to-leave---syml\")}</li>\n            <li>{A(\"fabrizio-paterlini---snow\")}</li>\n          </ul>\n        </P>\n        <P>\n          These pieces share a similar emotional quality and harmonic approach,\n          though each composer brings their own unique voice to the style.\n        </P>\n      </>\n    ),\n  },\n  {\n    id: 6,\n    title: <>Chord scales iii, v and melodic minor</>,\n    date: \"2025-03-28\",\n    titleChords: [\"iii\", \"3\", \"#4\", \"5\", \"v\", \"5\", \"6\", \"b7\"],\n    content: () => (\n      <>\n        <P>\n          {s`chord_scale:iii`} - a chromatic pitch {c`#4`} is used as a single\n          chromatic pitch melodically in a diatonic major context. It happens\n          over {c`iii`} chord.\n        </P>\n        <P>In relative minor we observe the same for {s`chord_scale:v`}</P>\n        <P>\n          I suspect that this can be linked to {s`chord_scale:melodic_minor`}.\n          In there we have {c`6`} chromatic pitch that is only played over{\" \"}\n          {c`V`} in a diatonic minor context.\n        </P>\n        <P>\n          All three cases have the single explanation: the diatonic context has\n          a pitch which is b2 ({c`b2`}) relative to chord's root. {c`b2`} isn't\n          a standard pitch (that's why we label it with a center dot): both\n          minor scale {c`1 2 b3`} and major scale {c`1 2 3`} don't have it.\n        </P>\n        <P>\n          So, both chords rectify b2 {c`b2`} to 2 {c`2`} (relative to their\n          roots) to make a smallest melodic tonicization:\n          <ul>\n            <li>\n              During {c`1 2 3 4 5 6 7 1`} the {c`iii`} changes {c`3 4 5`} to{\" \"}\n              {c`3 #4 5`}\n            </li>\n            <li>\n              During {c`1 2 b3 4 5 b6 b7 1`} the {c`v`} changes {c`5 b6 b7`} to{\" \"}\n              {c`5 6 b7`}\n            </li>\n            <li>\n              During {c`1 2 b3 4 5 b6 b7 1`} the {c`V`} changes {c`5 b6 7`} to{\" \"}\n              {c`5 6 7`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          I suspect that a melodic minor scale {c`1 2 b3 4 5 6 7 1`} isn't\n          observed anywhere outside the {c`V`} chord.\n        </P>\n      </>\n    ),\n  },\n];\n\n// Export the utility function so it can be used in Blog.tsx\nexport { extractTextFromJsx };\n","import React, { useState } from \"react\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { slugify } from \"transliteration\";\nimport ChordStairs from \"../legends/ChordStairs\";\nimport { STYLES_CHAPTERS } from \"./stylesChapters\";\n\nconst NAV_HORIZONTAL_GAP = 15;\nconst NAV_CHORD_STAIRS_SCALE = 0.6;\n\nconst EditorIndexContainer = styled.div`\n  padding: 20px;\n  max-width: 800px;\n  margin: 0 auto;\n`;\n\nconst EditorIndexTitle = styled.h1`\n  color: #fff;\n  margin-bottom: 20px;\n`;\n\n// New lighter link style\nconst ScoreLink = styled(Link)`\n  color: #fff;\n  text-decoration: none;\n  padding: 6px 2px;\n  border-radius: 2px;\n  display: block;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  margin-bottom: 4px;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n    color: #fff;\n  }\n`;\n\nconst ChapterSection = styled.div`\n  margin-bottom: 30px;\n`;\n\nconst ChapterContent = styled.div`\n  padding: 20px 0;\n`;\n\nconst ChapterTitle = styled.h2`\n  color: #fff;\n  margin: 0 0 15px 0;\n`;\n\nconst ChapterDescription = styled.div`\n  color: #fff;\n  margin: 15px 0 25px 0;\n  line-height: 1.5;\n  max-width: 700px;\n`;\n\nconst ChapterSelector = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 10px ${NAV_HORIZONTAL_GAP}px;\n  padding: 0;\n  margin: 0 0 30px 0;\n  overflow: visible;\n`;\n\nconst ChapterTitleTooltip = styled.div<{\n  isSelected?: boolean;\n  isHovered?: boolean;\n}>`\n  background: rgba(0, 0, 0, 0.9);\n  padding: 0px 8px;\n  white-space: nowrap;\n  pointer-events: none;\n  z-index: ${(props) => {\n    return props.isHovered ? 20000 : 10000;\n  }};\n  opacity: ${(props) => {\n    return props.isSelected || props.isHovered ? 1 : 0;\n  }};\n  color: #fff;\n`;\n\nconst ChapterButton = styled.button<{ isSelected: boolean }>`\n  background: black;\n  color: white;\n  cursor: pointer;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  padding: 0;\n  border-radius: 0;\n  overflow: visible;\n  height: 80px;\n  border: none;\n\n  ${ChapterTitleTooltip} {\n    position: absolute;\n    top: 55px;\n    left: 50%;\n    transform: translateX(-50%);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 25px;\n    white-space: nowrap;\n  }\n\n  &:hover {\n    ${ChapterTitleTooltip} {\n      display: flex;\n    }\n  }\n`;\n\nconst NavChordWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: black;\n  position: relative;\n  height: 60px;\n  width: 100%;\n`;\n\nconst ScoresList = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  gap: 15px;\n`;\n\n// Helper function to get chapter slug\nconst getChapterSlug = (chapter: string) => slugify(chapter.toLowerCase());\n\nconst BookOnStyles: React.FC = () => {\n  const { slug } = useParams<{ slug?: string }>();\n  const history = useHistory();\n  const [hoveredChapter, setHoveredChapter] = useState<string | null>(null);\n\n  // Find selected chapter based on slug or default to first chapter\n  const selectedChapter = React.useMemo(() => {\n    if (!slug) return STYLES_CHAPTERS[0].title;\n    return (\n      STYLES_CHAPTERS.find(\n        (chapter) => getChapterSlug(chapter.title) === slug.toLowerCase(),\n      )?.title || STYLES_CHAPTERS[0].title\n    );\n  }, [slug]);\n\n  // Handle chapter selection\n  const handleChapterSelect = (chapter: string) => {\n    const newSlug = getChapterSlug(chapter);\n    history.push(`/book/${newSlug}`);\n  };\n\n  const renderChapterContent = () => {\n    const currentChapter = STYLES_CHAPTERS.find(\n      (chapter) => chapter.title === selectedChapter,\n    );\n\n    if (!currentChapter) {\n      return <p>Select a chapter to view its content.</p>;\n    }\n\n    return (\n      <ChapterContent>\n        <ChapterDescription>\n          {currentChapter.pretext ? (\n            currentChapter.pretext()\n          ) : (\n            <p>No description available.</p>\n          )}\n        </ChapterDescription>\n      </ChapterContent>\n    );\n  };\n\n  return (\n    <EditorIndexContainer>\n      <EditorIndexTitle>\n        Structures and Styles of Western composers\n      </EditorIndexTitle>\n\n      <ChapterSelector>\n        {STYLES_CHAPTERS.map((chapter) => (\n          <ChapterButton\n            key={chapter.title}\n            isSelected={selectedChapter === chapter.title}\n            onClick={() => handleChapterSelect(chapter.title)}\n            onMouseEnter={() => setHoveredChapter(chapter.title)}\n            onMouseLeave={() => setHoveredChapter(null)}\n          >\n            <NavChordWrapper>\n              {chapter.titleChords && (\n                <ChordStairs\n                  mode={{ title: \"\", chords: chapter.titleChords }}\n                  scale={NAV_CHORD_STAIRS_SCALE}\n                  playbackMode=\"no\"\n                />\n              )}\n            </NavChordWrapper>\n            <ChapterTitleTooltip\n              isSelected={selectedChapter === chapter.title}\n              isHovered={hoveredChapter === chapter.title}\n            >\n              {chapter.title}\n            </ChapterTitleTooltip>\n          </ChapterButton>\n        ))}\n      </ChapterSelector>\n\n      {renderChapterContent()}\n    </EditorIndexContainer>\n  );\n};\n\nexport default BookOnStyles;\n","import React from \"react\";\nimport { CorpusLink } from \"../corpora/CorpusLink\";\nimport { Chord } from \"../legends/chords\";\nimport ChordStairs from \"../legends/ChordStairs\";\nimport { Mode, P } from \"./chapters\";\n\n// Define the e() custom tag for scores\nexport const e = (slug: string) => (\n  <a\n    href={`/e/${slug}`}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    style={{\n      display: \"inline-block\",\n      color: \"cyan\",\n      whiteSpace: \"nowrap\",\n    }}\n  >\n    {slug}\n  </a>\n);\n\n// Define the corpus() custom tag for corpus links\nexport const corpus = (slug: string) => <CorpusLink slug={slug} />;\n\n// Define the chapter groups (how they're organized in the UI)\nexport const STYLES_CHAPTER_GROUPS: Record<string, [number, number]> = {\n  all: [1, 3], // All 3 chapters are in a single group\n};\n\n// Define the editor chapters\nexport const STYLES_CHAPTERS: Array<{\n  title: string;\n  titleChords?: Chord[];\n  mode?: Mode | Mode[];\n  pretext?: () => React.JSX.Element;\n}> = [\n  {\n    title: \"Introduction\",\n    titleChords: [\"I\"],\n    pretext: () => (\n      <>\n        <P>\n          I'll teach you composition by pastiche. In each chapter I'm gonna show\n          you several pieces in a similar style and ask you to compose something\n          of the same vibe.\n        </P>\n        <P>\n          You won't need any previous knowledge of music theory or sheet music\n          reading. However, right from the beginning we're going to analyze\n          scores of real composers, classical and modern - Schubert, Gibran\n          Alcocer, TheFatRat etc. And we'll build our path towards more\n          sophisticated styles like that of Koji Kondo, Joe Hisaishi, Scott\n          Joplin etc.\n        </P>\n        <P>\n          I'll show you all scores in my 12-colored piano-roll-based relative\n          notation. I'll teach you how to see chords and how to see patterns in\n          melodies. We're going to extract the relevant music theory right from\n          the scores and reuse it.\n        </P>\n        <P>\n          Check out this example:\n          <ul>\n            <li>{e(\"wima.e480-schubert_de.-tanz-d.365.25\")}</li>\n          </ul>\n        </P>\n      </>\n    ),\n  },\n  {\n    title: \"Triadic minor with V\",\n    titleChords: [\"V\", \"i\"],\n    pretext: () => (\n      <>\n        <P>\n          <ChordStairs\n            mode={{\n              title: \"\",\n              chords: [\"V\", \"i\"],\n            }}\n          />\n        </P>\n        <P>\n          <ul>\n            <li>{e(\"papers-please\")}</li>\n          </ul>\n        </P>\n      </>\n    ),\n  },\n  {\n    title: \"Miscellaneous\",\n    titleChords: [\"Imaj7\", \"i7\"],\n    pretext: () => (\n      <>\n        <P>A collection of various musical pieces</P>\n        <P>\n          Check out these examples:\n          <ul>\n            <li>{e(\"der-flohwalzer\")}</li>\n            <li>{e(\"Gravity_Falls_Opening\")}</li>\n            <li>\n              {e(\n                \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\",\n              )}\n            </li>\n            <li>{e(\"chopsticks\")}</li>\n            <li>{e(\"the-two-happy-coons---theodore-h.-northrup-1891\")}</li>\n            <li>{e(\"passacaglia---handel-halvorsen\")}</li>\n            <li>{e(\"boogie-woogie-jump---pete-johnson\")}</li>\n          </ul>\n        </P>\n      </>\n    ),\n  },\n];\n","import * as React from \"react\";\nimport { AppContext } from \"../../AppContext\";\nimport { filterSnippetsByAccess, getSnippetTags } from \"../analysis\";\nimport { ComposerTitle } from \"../book/Book\";\nimport { TOP_100_COMPOSERS, type Top100Composer } from \"../top100Composers\";\nimport { corpora } from \"./corpora\";\nimport { beautifySlug } from \"./utils\";\n\ninterface ComposerInfo {\n  slug: string;\n  composer: string;\n  order?: number;\n}\n\nconst Corpus: React.FC<{\n  slug: string;\n  composers?: ComposerInfo[];\n}> = ({ slug, composers }) => {\n  const { analyses } = React.useContext(AppContext);\n  const searchInputRef = React.useRef<HTMLInputElement>(null);\n\n  React.useEffect(() => {\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }, []);\n\n  const getTagsForMidi = (midiSlug: string) => {\n    const analysis = analyses[`f/${midiSlug}`];\n    if (analysis) {\n      const filteredAnalysis = {\n        ...analysis,\n        snippets: filterSnippetsByAccess(analysis.snippets || []),\n      };\n      const tags = getSnippetTags(filteredAnalysis);\n      return tags.length > 0 ? tags : null;\n    }\n    return null;\n  };\n\n  const getComposerOrder = (midiSlug: string) => {\n    if (!composers) return undefined;\n    const composer = composers.find((c) => c.slug === midiSlug);\n    return composer?.order;\n  };\n\n  const getComposerInfo = (midiSlug: string): Top100Composer | undefined => {\n    return TOP_100_COMPOSERS.find((c) => c.slug === midiSlug);\n  };\n\n  const corpus = corpora.filter((corpus) => corpus.slug === slug)?.[0];\n  if (!corpus) {\n    return <div>Corpus {slug} not found</div>;\n  }\n\n  return (\n    <div style={{ marginBottom: \"100px\" }}>\n      <h1>{beautifySlug(slug)}</h1>\n      {corpus.posttext}\n      {corpus.midis.map((midiSlug, index) => {\n        const order = getComposerOrder(midiSlug);\n        const hasOrder = order !== undefined;\n        const composerInfo = getComposerInfo(midiSlug);\n\n        return (\n          <div\n            key={midiSlug}\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              marginBottom: \"10px\",\n            }}\n          >\n            <span style={{ marginRight: \"0.3em\", color: \"gray\" }}>{`${\n              index + 1\n            }. `}</span>\n            <a\n              href={`/f/${midiSlug}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              style={{\n                textDecoration: hasOrder ? \"line-through\" : \"none\",\n                color: hasOrder ? \"gray\" : \"#ffaa00\",\n              }}\n            >\n              {composerInfo ? (\n                <ComposerTitle\n                  composer={composerInfo.composer}\n                  displayTitle={composerInfo.displayTitle}\n                  style={{\n                    color: hasOrder ? \"gray\" : \"inherit\",\n                  }}\n                />\n              ) : (\n                beautifySlug(midiSlug)\n              )}\n              {hasOrder && <span style={{ marginLeft: \"5px\" }}>({order})</span>}\n            </a>\n            {getTagsForMidi(midiSlug) && (\n              <div\n                style={{\n                  marginLeft: \"50px\",\n                  display: \"flex\",\n                  flexWrap: \"wrap\",\n                }}\n              >\n                {getTagsForMidi(midiSlug).map((tag, index) => {\n                  const [chapter, topic] = tag.split(\":\");\n                  return (\n                    <div\n                      key={index}\n                      style={{\n                        color: hasOrder ? \"gray\" : \"inherit\",\n                        fontSize: \"0.7em\",\n                        marginRight: \"10px\",\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        alignItems: \"left\",\n                        lineHeight: \"1.2\",\n                      }}\n                    >\n                      <span style={{ color: \"gray\" }}>\n                        {chapter?.replace(/_/g, \" \")}\n                      </span>\n                      <span style={{ color: \"white\" }}>\n                        {topic?.replace(/_/g, \" \")}\n                      </span>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Corpus;\n","import { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { Analysis, filterSnippetsByAccess, Snippet } from \"../analysis\";\nimport InlineRawlPlayer from \"../InlineRawlPlayer\";\nimport SnippetList from \"../SnippetList\";\nimport EXPLANATIONS from \"./explanations\";\n\nconst PathContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  margin: 10px 0 0 0;\n  padding: 0;\n`;\n\nconst MenuContainer = styled.div<{ isRawlVisible?: boolean }>`\n  width: 100%;\n  height: ${(props) =>\n    props.isRawlVisible ? \"calc(50vh - 30px)\" : \"calc(100vh - 55px)\"};\n  overflow-y: auto;\n  background-color: black;\n  transition: height 0.3s ease-in-out;\n`;\n\nconst ChapterRow = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: black;\n  width: 100%;\n`;\n\nconst ScrollableContent = styled.div`\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden; // Remove horizontal scrolling\n  padding-top: 0; // Adjust padding to account for fixed menus\n  padding-bottom: 100px; // Add padding at the bottom to avoid content being hidden behind the footer\n`;\n\nconst ChapterButton = styled.button<{ active: boolean }>`\n  padding: 0px 5px;\n  text-align: left;\n  background-color: ${(props) => (props.active ? \"white\" : \"black\")};\n  color: ${(props) => (props.active ? \"black\" : \"white\")};\n  border: none;\n  cursor: pointer;\n  white-space: nowrap;\n  font-size: 14px;\n  border-radius: 4px;\n  width: fit-content;\n  user-select: none;\n\n  &:hover {\n    background-color: ${(props) => (props.active ? \"white\" : \"#333\")};\n  }\n`;\n\nconst CategorySection = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 16px;\n  width: fit-content;\n`;\n\nconst CategoryHeader = styled.div`\n  padding-left: 5px;\n  color: #999;\n  font-size: 14px;\n  letter-spacing: 0.5px;\n  text-align: left;\n  user-select: none;\n`;\n\nconst ChaptersContainer = styled.div<{ twoColumns?: boolean }>`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  width: fit-content;\n\n  ${(props) =>\n    props.twoColumns &&\n    `\n    flex-direction: row;\n    gap: 0px;\n    \n    > div {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n    }\n  `}\n`;\n\nconst TopicContainer = styled.div`\n  padding: 0; // Remove padding since we don't need spacing between topics anymore\n`;\n\nconst TopicCard = styled.div`\n  background-color: #000000;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  width: 100%;\n  box-sizing: border-box;\n`;\n\nconst ErrorMessage = styled.div`\n  color: red;\n  margin-bottom: 10px;\n`;\n\nconst HomeChapter = styled.div`\n  font-size: 24px;\n  color: white;\n  text-align: center;\n  padding: 20px;\n`;\n\nconst TopicMenu = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  padding: 0px 16px 16px 16px;\n  background-color: black;\n  position: sticky;\n  top: 0;\n  z-index: 100000;\n`;\n\nconst TopicBubble = styled.span<{ active: boolean }>`\n  cursor: pointer;\n  background-color: ${(props) => (props.active ? \"white\" : \"black\")};\n  color: ${(props) => (props.active ? \"black\" : \"white\")};\n  padding: 6px 12px;\n  border-radius: 16px;\n  font-size: 14px;\n  text-decoration: none;\n  user-select: none;\n\n  &:hover {\n    background-color: ${(props) => (props.active ? \"white\" : \"#333\")};\n  }\n`;\n\nconst EjectButton = styled.button`\n  position: fixed;\n  bottom: 50vh; // Position it just above the RawlContainer which is 50vh tall\n  right: 0;\n  background: #333;\n  color: white;\n  border: none;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  padding: 8px 16px;\n  cursor: pointer;\n  z-index: 200001; // Higher than RawlContainer to ensure it's clickable\n  transition: background-color 0.2s;\n  font-size: 16px;\n\n  &:hover {\n    background: #444;\n  }\n`;\n\nconst ChapterCategories = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 24px;\n  padding: 8px;\n`;\n\ntype ChapterCategories = {\n  [category: string]: string[];\n};\n\nconst CHAPTER_CATEGORIES: ChapterCategories = {\n  order_of_chords: [\n    \"major_cadence\",\n    \"progression\",\n    \"cycle_root_motion\",\n    \"shuttle\",\n    \"stasis\",\n    \"chunks\",\n    \"minor_cadence\",\n    \"last_chords\",\n  ],\n  texture: [\n    \"bass\",\n    \"voicing\",\n    \"LH\",\n    \"RH\",\n    \"doubling\",\n    \"arpeggio\",\n    \"texture\",\n    \"voice-leading\",\n    \"interval\",\n    \"inversion\",\n  ],\n  melody: [\"melody\", \"nonchord_tone\", \"ornament\", \"reharmonization\"],\n  chromaticism: [\n    \"applied\",\n    \"6_b6\",\n    \"chromatic_chords\",\n    \"cto7\",\n    \"rare_functional\",\n    \"chord_scale\",\n    \"b2\",\n    \"constant_structures\",\n    \"symmetric_chords\",\n    \"vgm_chromatic\",\n  ],\n  modulation: [\"modulation\", \"relative\", \"parallel\"],\n  scale: [\n    \"scale\",\n    \"dorian\",\n    \"mixolydian\",\n    \"modal_interchange\",\n    \"steady_scale\",\n    \"minor\",\n    \"predominants\",\n    \"pure_major\",\n    \"root_motion\",\n  ],\n  chord_types: [\n    \"chords\",\n    \"seventh_chords\",\n    \"V\",\n    \"extensions\",\n    \"ninth_chords\",\n    \"jazz\",\n  ],\n  rhythm_and_meter: [\"meter\", \"rhythm\", \"hypermeter\", \"harmonic_rhythm\"],\n  misc: [],\n};\n\nexport interface StructuresProps {\n  analyses: { [key: string]: Analysis };\n  initialChapter?: string;\n  initialTopic?: string;\n}\n\ninterface SnippetWithSlug {\n  snippet: Snippet;\n  slug: string;\n}\n\ninterface ChapterData {\n  chapter: string;\n  topics: {\n    topic: string;\n    snippets: SnippetWithSlug[];\n  }[];\n}\n\nconst formatCategoryLabel = (category: string) => {\n  return category\n    .split(\"_\")\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(\" \");\n};\n\nconst getMiscChapters = (\n  chapterData: ChapterData[],\n  categories: ChapterCategories,\n) => {\n  const allCategorizedChapters = new Set<string>();\n\n  Object.values(categories).forEach((contents) => {\n    contents.forEach((chapter) => allCategorizedChapters.add(chapter));\n  });\n\n  return chapterData.filter(\n    (chapter) => !allCategorizedChapters.has(chapter.chapter),\n  );\n};\n\n// Add this new component to render topic content\nconst TopicContent = React.memo<{\n  activeTopic: string;\n  activeChapter: number;\n  chapterData: ChapterData[];\n  snippets: { topic: string; snippets: SnippetWithSlug[] }[];\n  handleSnippetClick: (\n    slug: string,\n    measureStart: number,\n    topic: string,\n  ) => void;\n  loadingSnippets: Set<string>;\n}>(\n  ({\n    activeTopic,\n    activeChapter,\n    chapterData,\n    snippets,\n    handleSnippetClick,\n    loadingSnippets,\n  }) => {\n    return (\n      <ScrollableContent>\n        {activeTopic &&\n          snippets\n            .filter(({ topic }) => topic === activeTopic)\n            .map(({ topic, snippets }) => {\n              const fullTag = `${chapterData[activeChapter].chapter}:${topic}`;\n              const explanation = EXPLANATIONS[fullTag];\n\n              return (\n                <TopicContainer key={topic}>\n                  {explanation && (\n                    <div\n                      style={{\n                        color: \"white\",\n                        fontSize: \"16px\",\n                        padding: \"16px 16px\",\n                      }}\n                    >\n                      {explanation}\n                    </div>\n                  )}\n                  <TopicCard>\n                    <SnippetList\n                      snippets={snippets.map(({ snippet }) => snippet)}\n                      slugs={snippets.map(({ slug }) => {\n                        return slug;\n                      })}\n                      onSnippetClick={(snippet) => {\n                        const matchingSnippet = snippets.find(\n                          (s) => s.snippet === snippet,\n                        );\n                        if (matchingSnippet) {\n                          handleSnippetClick(\n                            matchingSnippet.slug,\n                            snippet.measuresSpan[0],\n                            topic,\n                          );\n                        }\n                      }}\n                      isPreview={true}\n                      noteHeight={3}\n                      loadingSnippets={loadingSnippets}\n                    />\n                  </TopicCard>\n                </TopicContainer>\n              );\n            })}\n      </ScrollableContent>\n    );\n  },\n  (prevProps, nextProps) => {\n    return (\n      prevProps.activeTopic === nextProps.activeTopic &&\n      prevProps.activeChapter === nextProps.activeChapter &&\n      prevProps.loadingSnippets === nextProps.loadingSnippets\n    );\n  },\n);\n\nconst BreadcrumbContainer = styled.div`\n  background-color: black;\n  color: white;\n  padding: 8px 16px;\n  display: flex;\n  align-items: center;\n  font-size: 14px;\n  border-bottom: 1px solid #333;\n`;\n\nconst BreadcrumbItem = styled.span`\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst BreadcrumbSeparator = styled.span`\n  margin: 0 8px;\n  color: #666;\n`;\n\nconst Structures: React.FC<StructuresProps> = ({\n  analyses,\n  initialChapter,\n  initialTopic,\n}) => {\n  const { handleSongClick, currentMidi, rawlProps, eject, togglePause } =\n    useContext(AppContext);\n  const location = useLocation();\n  const history = useHistory();\n  const [loading, setLoading] = useState(true);\n  const [errorMessages, setErrorMessages] = useState<string[]>([]);\n  const [chapterData, setChapterData] = useState<ChapterData[]>([]);\n  const [activeChapter, setActiveChapter] = useState(0);\n  const [selectedMeasureStart, setSelectedMeasureStart] = useState<\n    number | undefined\n  >(undefined);\n  const [isRawlVisible, setIsRawlVisible] = useState(false);\n  const [activeTopic, setActiveTopic] = useState<string | undefined>(() => {\n    return initialTopic;\n  });\n  const [loadingSnippets, setLoadingSnippets] = useState<Set<string>>(\n    new Set(),\n  );\n\n  // Add this function to select first topic\n  const selectFirstTopicFromChapter = useCallback(\n    (chapterIndex: number) => {\n      if (chapterData[chapterIndex]?.topics.length > 0) {\n        const firstTopic = chapterData[chapterIndex].topics[0].topic;\n        setActiveTopic(firstTopic);\n\n        // Use the raw topic without encoding\n        history.push(`/s/${chapterData[chapterIndex].chapter}/${firstTopic}`);\n      }\n    },\n    [chapterData, history],\n  );\n\n  // Modify the chapter selection handler\n  const handleChapterSelect = useCallback(\n    (index: number) => {\n      eject(); // Eject current playback when changing chapter\n      setIsRawlVisible(false); // Hide the InlineRawl\n      setActiveChapter(index);\n      selectFirstTopicFromChapter(index);\n    },\n    [selectFirstTopicFromChapter, eject],\n  );\n\n  const processAnalyses = useCallback(() => {\n    const data: { [chapter: string]: ChapterData } = {};\n    const errors: string[] = [];\n\n    Object.entries(analyses).forEach(([path, analysis]) => {\n      const slug = path.startsWith(\"f/\") ? path.slice(2) : path;\n\n      if (analysis.snippets && analysis.snippets.length > 0) {\n        filterSnippetsByAccess(analysis.snippets).forEach((snippet) => {\n          const snippetWithSlug = {\n            ...snippet,\n            composerSlug: slug,\n          };\n\n          const [chapter, topic] = snippet.tag.split(\":\");\n          if (!chapter || !topic) {\n            errors.push(`Invalid tag format: ${snippet.tag}`);\n            return;\n          }\n\n          if (!data[chapter]) {\n            data[chapter] = {\n              chapter,\n              topics: [],\n            };\n          }\n\n          let topicData = data[chapter].topics.find((t) => t.topic === topic);\n          if (!topicData) {\n            topicData = {\n              topic,\n              snippets: [],\n            };\n            data[chapter].topics.push(topicData);\n          }\n\n          topicData.snippets.push({\n            snippet: snippetWithSlug,\n            slug,\n          });\n        });\n      }\n    });\n\n    setErrorMessages(errors);\n    setChapterData(Object.values(data));\n    setLoading(false);\n  }, [analyses]);\n\n  useEffect(() => {\n    processAnalyses();\n  }, [processAnalyses]);\n\n  useEffect(() => {\n    if (initialChapter) {\n      const chapterIndex = chapterData.findIndex(\n        (c) => c.chapter === initialChapter,\n      );\n\n      if (chapterIndex !== -1) {\n        setActiveChapter(chapterIndex);\n        if (initialTopic) {\n          setActiveTopic(initialTopic);\n        } else {\n          selectFirstTopicFromChapter(chapterIndex);\n        }\n      }\n    } else if (chapterData.length > 0) {\n      // If no initialChapter is provided and we have chapters, select the first one\n      setActiveChapter(0);\n      selectFirstTopicFromChapter(0);\n    }\n  }, [initialChapter, initialTopic, chapterData, selectFirstTopicFromChapter]);\n\n  useEffect(() => {\n    setIsRawlVisible(!!currentMidi);\n  }, [currentMidi]);\n\n  // Modify handleTopicClick to eject current playback\n  const handleTopicClick = (topic: string) => {\n    eject(); // Eject current playback when changing topic\n    setIsRawlVisible(false); // Hide the InlineRawl\n    setActiveTopic(topic);\n\n    // Use the raw topic without encoding for cleaner URLs\n    history.push(`/s/${chapterData[activeChapter].chapter}/${topic}`);\n  };\n\n  const handleSnippetClick = useCallback(\n    async (slug: string, measureStart: number, topic: string) => {\n      console.log(\"[Structures] handleSnippetClick - Starting with:\", {\n        slug,\n        measureStart,\n        topic,\n      });\n\n      // Eject current playback before loading new snippet\n      if (currentMidi && currentMidi.slug !== slug) {\n        eject();\n      }\n\n      setLoadingSnippets((prev) => {\n        const next = new Set([...prev, slug]);\n        console.log(\"[Structures] Setting loadingSnippets to:\", next);\n        return next;\n      });\n\n      try {\n        console.log(\"[Structures] Calling handleSongClick...\");\n        await handleSongClick(slug);\n        console.log(\"[Structures] handleSongClick completed\");\n\n        setSelectedMeasureStart(measureStart);\n        console.log(\"[Structures] Set measure start to:\", measureStart);\n\n        // Don't call handleTopicClick here since it ejects the playback\n        if (topic && topic !== activeTopic) {\n          setActiveTopic(topic);\n        }\n\n        // Force playback to start\n        if (currentMidi?.slug === slug) {\n          console.log(\"[Structures] Starting playback for:\", slug);\n          togglePause();\n        }\n      } finally {\n        setLoadingSnippets((prev) => {\n          const next = new Set(prev);\n          next.delete(slug);\n          console.log(\"[Structures] Removing from loadingSnippets:\", next);\n          return next;\n        });\n      }\n    },\n    [handleSongClick, activeTopic, currentMidi, togglePause, eject],\n  );\n\n  // Add useEffect to handle initial navigation into Structures\n  useEffect(() => {\n    const path = location.pathname;\n    if (!path.startsWith(\"/s/\")) {\n      eject();\n      setIsRawlVisible(false); // Hide the InlineRawl\n    }\n  }, [location, eject]);\n\n  // Add cleanup effect to eject when unmounting\n  useEffect(() => {\n    return () => {\n      // Stop playback when component is unmounted\n      if (eject) {\n        eject();\n      }\n    };\n  }, [eject]);\n\n  // Function to find category of current chapter\n  const getCategoryForChapter = useCallback((chapterName: string) => {\n    for (const [category, chapters] of Object.entries(CHAPTER_CATEGORIES)) {\n      if (chapters.includes(chapterName)) {\n        return category;\n      }\n    }\n    return \"misc\";\n  }, []);\n\n  // Function to close breadcrumbs and return to full menu\n  const handleBreadcrumbClick = useCallback(() => {\n    if (isRawlVisible) {\n      eject();\n      setIsRawlVisible(false);\n    }\n  }, [isRawlVisible, eject]);\n\n  return (\n    <PathContainer>\n      {isRawlVisible ? (\n        // Breadcrumb navigation when Rawl is visible\n        <div\n          style={{\n            display: \"flex\",\n            backgroundColor: \"black\",\n            padding: \"8px 16px\",\n            alignItems: \"center\",\n            gap: \"8px\",\n          }}\n        >\n          <CategoryHeader\n            onClick={handleBreadcrumbClick}\n            style={{ cursor: \"pointer\" }}\n          >\n            {formatCategoryLabel(\n              getCategoryForChapter(chapterData[activeChapter]?.chapter || \"\"),\n            )}\n          </CategoryHeader>\n          <ChapterButton active={true} onClick={handleBreadcrumbClick}>\n            {(chapterData[activeChapter]?.chapter || \"\").replace(/_/g, \" \")}\n          </ChapterButton>\n          {activeTopic && (\n            <TopicBubble active={true} onClick={handleBreadcrumbClick}>\n              {activeTopic.replace(/_/g, \" \")}\n            </TopicBubble>\n          )}\n        </div>\n      ) : (\n        // Regular menu when Rawl is not visible\n        <MenuContainer isRawlVisible={isRawlVisible}>\n          <ChapterRow>\n            <ChapterCategories>\n              {Object.entries(CHAPTER_CATEGORIES).map(\n                ([category, contents]) => {\n                  let categoryChapters = chapterData.filter((chapter) => {\n                    if (category === \"misc\") {\n                      return getMiscChapters(\n                        chapterData,\n                        CHAPTER_CATEGORIES,\n                      ).some((c) => c.chapter === chapter.chapter);\n                    }\n                    return contents.includes(chapter.chapter);\n                  });\n\n                  // Sort chapters alphabetically\n                  categoryChapters.sort((a, b) =>\n                    a.chapter.localeCompare(b.chapter),\n                  );\n\n                  if (categoryChapters.length === 0) return null;\n\n                  const shouldUseTwoColumns = categoryChapters.length > 5;\n                  const midPoint = Math.ceil(categoryChapters.length / 2);\n\n                  return (\n                    <CategorySection key={category}>\n                      <CategoryHeader>\n                        {formatCategoryLabel(category)}\n                      </CategoryHeader>\n                      <ChaptersContainer twoColumns={shouldUseTwoColumns}>\n                        {shouldUseTwoColumns ? (\n                          <>\n                            <div>\n                              {categoryChapters\n                                .slice(0, midPoint)\n                                .map((chapter) => {\n                                  const index = chapterData.findIndex(\n                                    (c) => c.chapter === chapter.chapter,\n                                  );\n                                  return (\n                                    <ChapterButton\n                                      key={chapter.chapter}\n                                      active={activeChapter === index}\n                                      onClick={() => handleChapterSelect(index)}\n                                    >\n                                      {chapter.chapter.replace(/_/g, \" \")}\n                                    </ChapterButton>\n                                  );\n                                })}\n                            </div>\n                            <div>\n                              {categoryChapters\n                                .slice(midPoint)\n                                .map((chapter) => {\n                                  const index = chapterData.findIndex(\n                                    (c) => c.chapter === chapter.chapter,\n                                  );\n                                  return (\n                                    <ChapterButton\n                                      key={chapter.chapter}\n                                      active={activeChapter === index}\n                                      onClick={() => handleChapterSelect(index)}\n                                    >\n                                      {chapter.chapter.replace(/_/g, \" \")}\n                                    </ChapterButton>\n                                  );\n                                })}\n                            </div>\n                          </>\n                        ) : (\n                          categoryChapters.map((chapter) => {\n                            const index = chapterData.findIndex(\n                              (c) => c.chapter === chapter.chapter,\n                            );\n                            return (\n                              <ChapterButton\n                                key={chapter.chapter}\n                                active={activeChapter === index}\n                                onClick={() => handleChapterSelect(index)}\n                              >\n                                {chapter.chapter.replace(/_/g, \" \")}\n                              </ChapterButton>\n                            );\n                          })\n                        )}\n                      </ChaptersContainer>\n                    </CategorySection>\n                  );\n                },\n              )}\n            </ChapterCategories>\n          </ChapterRow>\n          {!loading && chapterData[activeChapter] && (\n            <TopicMenu>\n              {chapterData[activeChapter].topics\n                .slice()\n                .sort((a, b) => a.topic.localeCompare(b.topic))\n                .map(({ topic }) => (\n                  <TopicBubble\n                    key={topic}\n                    active={activeTopic === topic}\n                    onClick={() => {\n                      handleTopicClick(topic);\n                    }}\n                  >\n                    {topic.replace(/_/g, \" \")}\n                  </TopicBubble>\n                ))}\n            </TopicMenu>\n          )}\n          <ScrollableContent>\n            {loading ? (\n              <HomeChapter>Loading...</HomeChapter>\n            ) : errorMessages.length > 0 ? (\n              errorMessages.map((error, index) => (\n                <ErrorMessage key={index}>{error}</ErrorMessage>\n              ))\n            ) : (\n              <CategorySection>\n                <TopicContent\n                  activeTopic={activeTopic}\n                  activeChapter={activeChapter}\n                  chapterData={chapterData}\n                  snippets={chapterData[activeChapter]?.topics || []}\n                  handleSnippetClick={handleSnippetClick}\n                  loadingSnippets={loadingSnippets}\n                />\n              </CategorySection>\n            )}\n          </ScrollableContent>\n        </MenuContainer>\n      )}\n\n      {isRawlVisible && currentMidi && (\n        <>\n          <EjectButton\n            onClick={() => {\n              eject();\n              setIsRawlVisible(false);\n            }}\n          >\n            <FontAwesomeIcon icon={faTimes} size=\"lg\" />\n          </EjectButton>\n          <InlineRawlPlayer {...rawlProps} measureStart={selectedMeasureStart}>\n            <TopicContent\n              activeTopic={activeTopic}\n              activeChapter={activeChapter}\n              chapterData={chapterData}\n              snippets={chapterData[activeChapter]?.topics || []}\n              handleSnippetClick={handleSnippetClick}\n              loadingSnippets={loadingSnippets}\n            />\n          </InlineRawlPlayer>\n        </>\n      )}\n    </PathContainer>\n  );\n};\n\nexport default Structures;\n","import {\n  faArrowLeft,\n  faArrowRight,\n  faCopy,\n  faPlus,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { VoiceMask } from \"../../App\";\nimport { AppContext } from \"../../AppContext\";\nimport { Analysis } from \"../analysis\";\nimport Editor from \"../editor/Editor\";\nimport { DecomposedScore, decomposeScores } from \"./decomposeScores\";\n\n// Styled components for the guide UI\nconst GuideContainer = styled.div`\n  color: #e0e0e0;\n  padding: 20px;\n  height: 100%;\n  overflow-y: auto;\n  background-color: #181818;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\n    Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\n`;\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 24px;\n`;\n\nconst StepTitle = styled.h2`\n  color: #e0e0e0;\n  margin: 0;\n  font-size: 24px;\n`;\n\nconst NavigationControls = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst NavigationButton = styled.button`\n  background-color: #3a3a3a;\n  color: #e0e0e0;\n  border: none;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background-color 0.2s;\n\n  &:disabled {\n    background-color: #2a2a2a;\n    color: #606060;\n    cursor: not-allowed;\n  }\n\n  &:hover:not(:disabled) {\n    background-color: #4a4a4a;\n  }\n`;\n\nconst StepInfo = styled.div`\n  text-align: center;\n  font-size: 14px;\n  font-weight: bold;\n  color: #a0a0a0;\n  margin: 0 10px;\n`;\n\nconst ExplanationContainer = styled.div`\n  background-color: #232323;\n  border-radius: 4px;\n  padding: 20px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  margin-bottom: 20px;\n`;\n\nconst ExplanationText = styled.div`\n  margin: 0;\n  line-height: 1.6;\n  color: #cccccc;\n  white-space: pre-line;\n`;\n\nconst ExplanationTextArea = styled.textarea`\n  width: 100%;\n  min-height: 150px;\n  padding: 12px;\n  background-color: #2c2c2c;\n  color: #e0e0e0;\n  border: 1px solid #3a3a3a;\n  border-radius: 4px;\n  font-family: inherit;\n  font-size: 14px;\n  line-height: 1.6;\n  resize: vertical;\n\n  &:focus {\n    outline: none;\n    border-color: #4a90e2;\n  }\n`;\n\nconst ActionsContainer = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 16px;\n  gap: 8px;\n`;\n\nconst ActionButton = styled.button`\n  background-color: #3a3a3a;\n  color: #e0e0e0;\n  border: none;\n  border-radius: 4px;\n  padding: 8px 12px;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: #4a4a4a;\n  }\n\n  &.primary {\n    background-color: #4a90e2;\n\n    &:hover {\n      background-color: #3a80d2;\n    }\n  }\n`;\n\nconst CopySuccess = styled.div`\n  position: fixed;\n  top: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #4a90e2;\n  color: white;\n  padding: 10px 16px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  z-index: 1000;\n`;\n\ninterface DecompositionProps extends RouteComponentProps {\n  slug: string;\n  step: number;\n  setVoiceMask: (voiceMask: VoiceMask) => void;\n  voiceMask: VoiceMask;\n  voiceNames: string[];\n  registerKeyboardHandler: (\n    id: string,\n    handler: (e: KeyboardEvent) => void,\n  ) => void;\n  unregisterKeyboardHandler: (id: string) => void;\n  savedAnalysis: Analysis | null;\n  saveAnalysis: (analysis: Analysis) => Promise<void>;\n  getCurrentPositionMs?: () => number;\n  seek?: (ms: number) => void;\n  latencyCorrectionMs: number;\n}\n\nconst STORAGE_KEY = \"decompositionData\";\n\nconst Decomposition: React.FC<DecompositionProps> = ({\n  history,\n  slug,\n  step,\n  setVoiceMask,\n  voiceMask,\n  voiceNames,\n  registerKeyboardHandler,\n  unregisterKeyboardHandler,\n  savedAnalysis,\n  saveAnalysis,\n  getCurrentPositionMs,\n  seek,\n  latencyCorrectionMs,\n}) => {\n  const { user } = useContext(AppContext);\n  const [currentStep, setCurrentStep] = useState(step);\n  const [currentCode, setCurrentCode] = useState(\"\");\n  const [localScoreData, setLocalScoreData] = useState<DecomposedScore | null>(\n    null,\n  );\n  const [explanation, setExplanation] = useState(\"\");\n  const [copySuccess, setCopySuccess] = useState(false);\n\n  // Handler for explanation textarea focus\n  const handleExplanationFocus = () => {\n    if (window) {\n      window.__disableGlobalShortcuts = true;\n    }\n  };\n\n  // Handler for explanation textarea blur\n  const handleExplanationBlur = () => {\n    if (window) {\n      window.__disableGlobalShortcuts = false;\n    }\n  };\n\n  // Single function to handle all localStorage operations\n  const updateLocalStorage = useCallback(\n    (updatedData: DecomposedScore) => {\n      try {\n        console.log(`[Decomposition] Updating localStorage for slug: ${slug}`);\n        // Get current stored data\n        const storedData = localStorage.getItem(STORAGE_KEY) || \"{}\";\n        const parsedData = JSON.parse(storedData);\n\n        // Update with new data\n        parsedData[slug] = updatedData;\n\n        // Save back to localStorage\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(parsedData));\n\n        // Update local state\n        setLocalScoreData(updatedData);\n        console.log(\n          `[Decomposition] Successfully updated localStorage and local state`,\n        );\n      } catch (error) {\n        console.error(\"Error updating localStorage:\", error);\n      }\n    },\n    [slug],\n  );\n\n  // Load data from localStorage or fall back to decomposeScores\n  useEffect(() => {\n    try {\n      const storedData = localStorage.getItem(STORAGE_KEY);\n      if (storedData) {\n        const parsedData = JSON.parse(storedData);\n        if (parsedData[slug]) {\n          setLocalScoreData(parsedData[slug]);\n          return;\n        }\n      }\n    } catch (error) {\n      console.error(\n        \"Error loading decomposition data from localStorage:\",\n        error,\n      );\n    }\n\n    // Fall back to default data if not in localStorage\n    setLocalScoreData(decomposeScores[slug] || null);\n  }, [slug]);\n\n  // Update URL when step changes\n  useEffect(() => {\n    // Only update URL if the current step in state doesn't match the URL step\n    // and avoid navigation when a step was just added\n    if (currentStep !== step) {\n      console.log(`[Decomposition] Updating URL to step ${currentStep}`);\n      // Use replace instead of push to avoid adding to browser history stack\n      history.replace(`/d/${slug}/${currentStep}`);\n    }\n  }, [currentStep, step, slug, history]);\n\n  // Handle step validation\n  useEffect(() => {\n    if (localScoreData) {\n      const maxSteps = localScoreData.steps.length;\n\n      if (step < 1 || step > maxSteps) {\n        console.log(\n          `[Decomposition] Step ${step} out of bounds (max: ${maxSteps}), redirecting to step 1`,\n        );\n        setCurrentStep(1);\n      } else {\n        setCurrentStep(step);\n      }\n    }\n  }, [localScoreData, step]);\n\n  // Update currentCode when step changes\n  useEffect(() => {\n    if (localScoreData && currentStep <= localScoreData.steps.length) {\n      setCurrentCode(localScoreData.steps[currentStep - 1].score);\n    }\n  }, [localScoreData, currentStep]);\n\n  // Update explanation state when step changes\n  useEffect(() => {\n    if (localScoreData && currentStep <= localScoreData.steps.length) {\n      setExplanation(localScoreData.steps[currentStep - 1].explanation || \"\");\n    } else {\n      setExplanation(\"\");\n    }\n  }, [localScoreData, currentStep]);\n\n  if (!localScoreData) {\n    return <div>Score not found: {slug}</div>;\n  }\n\n  const maxSteps = localScoreData.steps.length;\n  const currentStepData =\n    currentStep <= localScoreData.steps.length\n      ? localScoreData.steps[currentStep - 1]\n      : null;\n\n  // Handle previous step navigation\n  const handlePrevStep = () => {\n    if (currentStep > 1) {\n      // Use history.replace for navigation to avoid state update cycles\n      history.replace(`/d/${slug}/${currentStep - 1}`);\n      // Update the state to match\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  // Handle next step navigation\n  const handleNextStep = () => {\n    if (currentStep <= maxSteps) {\n      // If we're at the last step, create a new one\n      if (currentStep === maxSteps && user) {\n        console.log(\n          `[handleNextStep] On last step (${currentStep}/${maxSteps}), duplicating...`,\n        );\n        const lastStep = localScoreData.steps[maxSteps - 1];\n        console.log(`[handleNextStep] Last step data:`, lastStep);\n\n        // Add a new step\n        handleAddStep(lastStep.score, lastStep.explanation || \"\");\n      } else {\n        console.log(\n          `[handleNextStep] Not on last step, moving to step ${\n            currentStep + 1\n          }`,\n        );\n        // Use history.replace for navigation to avoid state update cycles\n        history.replace(`/d/${slug}/${currentStep + 1}`);\n        // Update the state to match\n        setCurrentStep(currentStep + 1);\n      }\n    }\n  };\n\n  // Handle editor content change\n  const handleEditorChange = (newCode: string) => {\n    setCurrentCode(newCode);\n\n    // If we have current step data, update the score in localStorage\n    if (user && localScoreData && currentStep <= localScoreData.steps.length) {\n      const updatedScoreData = { ...localScoreData };\n      updatedScoreData.steps[currentStep - 1].score = newCode;\n      updateLocalStorage(updatedScoreData);\n    }\n  };\n\n  // Add a new step\n  const handleAddStep = (score: string, explanation: string) => {\n    if (!user || !localScoreData) return;\n\n    console.log(`[Decomposition] Adding new step with score and explanation`);\n\n    const updatedScoreData = { ...localScoreData };\n    updatedScoreData.steps.push({\n      score,\n      explanation,\n    });\n\n    // Update localStorage with new step\n    updateLocalStorage(updatedScoreData);\n\n    // Navigate to the new step directly using history.replace instead of setState\n    // This prevents multiple re-renders and potential infinite loops\n    const newStep = updatedScoreData.steps.length;\n    console.log(`[Decomposition] Navigating directly to new step ${newStep}`);\n    history.replace(`/d/${slug}/${newStep}`);\n\n    // Set the current step state *after* navigation to match the URL\n    setCurrentStep(newStep);\n  };\n\n  // Handle explanation text changes\n  const handleExplanationChange = (\n    e: React.ChangeEvent<HTMLTextAreaElement>,\n  ) => {\n    const newExplanation = e.target.value;\n    setExplanation(newExplanation);\n\n    if (user && localScoreData && currentStep <= localScoreData.steps.length) {\n      const updatedScoreData = { ...localScoreData };\n      updatedScoreData.steps[currentStep - 1].explanation = newExplanation;\n      updateLocalStorage(updatedScoreData);\n    }\n  };\n\n  // Handle copy to clipboard\n  const copyToClipboard = () => {\n    // Format the data as TypeScript code\n    const formattedData = `export const decomposeScores: { [key: string]: DecomposedScore } = ${JSON.stringify(\n      { [slug]: localScoreData },\n      null,\n      2,\n    )}`;\n\n    // Use the clipboard API to copy the formatted data\n    navigator.clipboard\n      .writeText(formattedData)\n      .then(() => {\n        setCopySuccess(true);\n        setTimeout(() => setCopySuccess(false), 2000);\n      })\n      .catch((err) => console.error(\"Failed to copy to clipboard:\", err));\n  };\n\n  // Render the guide UI\n  const renderGuide = () => {\n    return (\n      <GuideContainer>\n        <HeaderContainer>\n          <StepTitle>{localScoreData.title}</StepTitle>\n          <NavigationControls>\n            <NavigationButton\n              onClick={handlePrevStep}\n              disabled={currentStep === 1}\n            >\n              <FontAwesomeIcon icon={faArrowLeft} />\n            </NavigationButton>\n            <StepInfo>\n              {currentStep}/{maxSteps}\n            </StepInfo>\n            <NavigationButton\n              onClick={handleNextStep}\n              disabled={currentStep === maxSteps && !user}\n            >\n              <FontAwesomeIcon\n                icon={currentStep === maxSteps && user ? faPlus : faArrowRight}\n              />\n            </NavigationButton>\n          </NavigationControls>\n        </HeaderContainer>\n\n        <ExplanationContainer>\n          {user ? (\n            <ExplanationTextArea\n              value={explanation}\n              onChange={handleExplanationChange}\n              placeholder=\"Enter explanation for this step...\"\n              onFocus={handleExplanationFocus}\n              onBlur={handleExplanationBlur}\n            />\n          ) : (\n            <ExplanationText>\n              {currentStepData?.explanation || \"\"}\n            </ExplanationText>\n          )}\n        </ExplanationContainer>\n\n        {user && (\n          <ActionsContainer>\n            <ActionButton onClick={copyToClipboard}>\n              <FontAwesomeIcon icon={faCopy} />\n              Copy Code\n            </ActionButton>\n          </ActionsContainer>\n        )}\n\n        {copySuccess && <CopySuccess>Copied to clipboard!</CopySuccess>}\n      </GuideContainer>\n    );\n  };\n\n  return (\n    <div>\n      <Editor\n        initialSource={currentStepData?.score || \"\"}\n        setVoiceMask={setVoiceMask}\n        voiceMask={voiceMask}\n        voiceNames={voiceNames}\n        registerKeyboardHandler={registerKeyboardHandler}\n        unregisterKeyboardHandler={unregisterKeyboardHandler}\n        savedAnalysis={savedAnalysis}\n        saveAnalysis={saveAnalysis}\n        getCurrentPositionMs={getCurrentPositionMs}\n        seek={seek}\n        disableEditing={false}\n        latencyCorrectionMs={latencyCorrectionMs}\n        showProgrammingManual={false}\n        isDecompositionMode={true}\n        onEditorChange={handleEditorChange}\n        customChild={renderGuide()}\n      />\n    </div>\n  );\n};\n\nexport default withRouter(Decomposition);\n","import { RangeSetBuilder } from \"@codemirror/state\";\nimport {\n  Decoration,\n  DecorationSet,\n  EditorView,\n  ViewPlugin,\n  ViewUpdate,\n} from \"@codemirror/view\";\nimport { tags } from \"@lezer/highlight\";\nimport { createTheme } from \"@uiw/codemirror-themes\";\nimport { parseCommand } from \"./commandParser\";\nimport {\n  CommandContext,\n  getScaleMapForMode,\n  KeySignature,\n  normalizeModeName,\n  NOTE_LETTER_MAP,\n} from \"./types\";\n\n/**\n * EDITOR STYLING GUIDELINES\n *\n * Command styling:\n * - Regular playback commands (c, ac, i, etc.) use the 'command-name' class (bold)\n * - Analysis-related commands (phrases, etc.) use the 'analysis-command' class (white + italic)\n *\n * Command argument styling:\n * - For phrases command: measure numbers remain standard color, +/- diff values are white bold\n *   Example: In \"phrases 1+1 18+2\", the numbers 1, 18 are standard color, while \"+1\", \"+2\" are white bold\n *\n * This distinction helps users differentiate between commands that affect playback\n * and commands that only affect analysis/visualization.\n *\n * When adding new commands:\n * - If it's a playback command, style it with 'command-name'\n * - If it's an analysis command, style it with 'analysis-command'\n * - Consider special styling for command arguments if it improves readability\n */\n\n// Types for the new architecture\ninterface ParsedNote {\n  pitch: string;\n  accidental?: \"b\" | \"#\";\n  duration?: string;\n  position: {\n    start: number;\n    end: number;\n    durationStart?: number; // Optional to indicate if this note is part of a chord\n  };\n  degree: number;\n  isPartOfChord?: boolean;\n}\n\ninterface NoteColor {\n  colorIndex: number;\n  dotClass: string;\n}\n\n// Function to get background colors for each character in a line\nexport const getBackgroundsForLine = (\n  line: string,\n  currentKey: KeySignature,\n  allLines: string[],\n  lineIndex: number,\n) => {\n  // Get the base decorations first (for backgrounds)\n  let baseDecorations = Array.from(line).map(() => ({ class: null }));\n\n  // Check if any previous line is just '%' (handle commented section first)\n  for (let i = 0; i < lineIndex; i++) {\n    if (allLines[i].trim() === \"%\") {\n      return Array.from(line).map(() => ({ class: \"comment\" }));\n    }\n  }\n\n  // Check for comments in current line early\n  const commentIndex = line.indexOf(\"%\");\n\n  // If the entire line is a comment, return immediately\n  if (commentIndex === 0) {\n    return Array.from(line).map(() => ({ class: \"comment\" }));\n  }\n\n  // Skip empty lines\n  const cleanLine =\n    commentIndex !== -1 ? line.substring(0, commentIndex).trim() : line.trim();\n  if (!cleanLine) return baseDecorations;\n\n  // Create a context for command parsing\n  const context: CommandContext = {\n    currentKey,\n    currentTrack: 1,\n    timeSignatures: [{ numerator: 4, measureStart: 1 }],\n    channelOctaves: {\n      0: 5,\n      1: 3,\n    },\n    currentBpm: 120,\n  };\n\n  // Try to parse the line as a command\n  const isValidCommand = parseCommand(cleanLine, context) !== null;\n\n  // If the line is not a valid command, apply strikethrough to all non-whitespace characters\n  if (!isValidCommand) {\n    let inWhitespace = true;\n    baseDecorations = Array.from(line).map((char, index) => {\n      // Don't style content after a comment marker\n      if (commentIndex !== -1 && index >= commentIndex) {\n        return { class: \"comment\" };\n      }\n\n      if (char.trim() === \"\") {\n        inWhitespace = true;\n        return { class: null };\n      }\n      if (inWhitespace) {\n        inWhitespace = false;\n      }\n      return { class: \"invalid-command\" };\n    });\n  }\n\n  // Check for analysis-related commands first (e.g., 'phrases', 'sections')\n  // Note: Analysis commands should be styled with white and italic text\n  // to distinguish them from playback-related commands\n\n  // Check for phrases command\n  const phrasesMatch = line.match(/^\\s*phrases\\s+(.+)$/i);\n  if (phrasesMatch && phrasesMatch.index !== undefined) {\n    const cmdMatch = line.match(/\\bphrases\\b/i);\n    if (cmdMatch && cmdMatch.index !== undefined) {\n      // Style the 'phrases' command word\n      const phrasesWord = line.substring(cmdMatch.index, cmdMatch.index + 7); // \"phrases\"\n      for (\n        let i = cmdMatch.index;\n        i < cmdMatch.index + phrasesWord.length;\n        i++\n      ) {\n        baseDecorations[i] = { class: \"analysis-command\" };\n      }\n\n      // Style the arguments\n      // Extract the arguments part after \"phrases\"\n      const argsStr = phrasesMatch[1];\n      const argsStartIndex = line.indexOf(argsStr);\n\n      // Process each phrase argument (e.g., \"1+1\", \"18+2\", \"10-1\")\n      // Use a manual approach to find and style each argument since matchAll might not support all browsers\n      const argPattern = /(\\d+)([+-])(\\d+)/g;\n      let argMatch;\n      let searchStartIndex = argsStartIndex;\n\n      while ((argMatch = argPattern.exec(argsStr)) !== null) {\n        const [fullArg, measure, sign, diff] = argMatch;\n\n        // Calculate the absolute position in the line\n        const relativeArgIndex = argMatch.index;\n        const absoluteArgIndex = argsStartIndex + relativeArgIndex;\n\n        // Apply bold styling to the +/- diff part\n        const signIndex = absoluteArgIndex + measure.length;\n        const diffLength = sign.length + diff.length;\n\n        for (let i = signIndex; i < signIndex + diffLength; i++) {\n          baseDecorations[i] = { class: \"phrase-diff\" };\n        }\n      }\n    }\n  }\n\n  // Check for sections command\n  const sectionsMatch = line.match(/^\\s*sections\\s+(.+)$/i);\n  if (sectionsMatch && sectionsMatch.index !== undefined) {\n    const cmdMatch = line.match(/\\bsections\\b/i);\n    if (cmdMatch && cmdMatch.index !== undefined) {\n      // Style the 'sections' command word\n      const sectionsWord = line.substring(cmdMatch.index, cmdMatch.index + 8); // \"sections\"\n      for (\n        let i = cmdMatch.index;\n        i < cmdMatch.index + sectionsWord.length;\n        i++\n      ) {\n        baseDecorations[i] = { class: \"analysis-command\" };\n      }\n\n      // The section numbers are kept as normal white text so no additional styling is needed\n    }\n  }\n\n  // Process key signature and note colors first\n  if (\n    line.match(\n      /^([A-G][b#]?)\\s+(major|minor|lydian|mixolydian|dorian|phrygian|harmonic\\s+minor|melodic\\s+minor)$/i,\n    )\n  ) {\n    baseDecorations = processKeySignature(line, currentKey);\n  } else if (line.match(/^\\s*(\\d+(?:b\\d+(?:\\.\\d+)?)?)\\s+i\\s+/)) {\n    // Handle 'i' command with more flexible measure format\n    const match = line.match(/^\\s*(\\d+(?:b\\d+(?:\\.\\d+)?)?)\\s+(i)\\s+/);\n    if (match) {\n      // Use word boundary matching for 'i' command\n      const cmdMatch = line.match(/\\bi\\b/);\n      if (cmdMatch && cmdMatch.index !== undefined) {\n        baseDecorations[cmdMatch.index] = { class: \"command-name\" };\n      }\n    }\n    // Process note colors but preserve command styling\n    const noteDecorations = processNoteColors(\n      line,\n      currentKey,\n      allLines,\n      lineIndex,\n    );\n    baseDecorations = baseDecorations.map((dec, i) => {\n      // Apply comment styling over any other styling\n      if (commentIndex !== -1 && i >= commentIndex) {\n        return { class: \"comment\" };\n      }\n\n      const result = {\n        class: dec.class ? dec.class : noteDecorations[i].class,\n      };\n      return result;\n    });\n  } else {\n    // Handle 'c' and 'ac' commands with more flexible patterns\n    // Match patterns like:\n    // \"19  c 18    0 x x 0 0\"\n    // \"21b2 c 17b2-20b3 7\"\n    // \"7   c 6-6b3 0\"\n    // \"9    ac 1-9     0\"\n    // \"2    c 1\" - with default shift of 0\n    const copyMatch = line.match(\n      /^\\s*(\\d+(?:b\\d+(?:\\.\\d+)?)?)\\s+(c|ac)\\s+(\\d+(?:b\\d+)?(?:-\\d+(?:b\\d+)?)?)\\s*/,\n    );\n\n    if (copyMatch) {\n      const [fullMatch, targetMeasure, cmd, sourceSpan] = copyMatch;\n\n      // Find exact indices to handle var\n      const cmdMatch = line.match(new RegExp(`\\\\b${cmd}\\\\b`));\n\n      if (cmdMatch && cmdMatch.index !== undefined) {\n        // Style the command\n        for (let i = cmdMatch.index; i < cmdMatch.index + cmd.length; i++) {\n          baseDecorations[i] = { class: \"command-name\" };\n        }\n\n        // Find the source span after the command token\n        const afterCmd = line.slice(cmdMatch.index + cmd.length);\n        const spanMatch = afterCmd.match(new RegExp(`\\\\b${sourceSpan}\\\\b`));\n\n        if (spanMatch && spanMatch.index !== undefined) {\n          // Adjust the index to be relative to the full line\n          const spanStartIndex = cmdMatch.index + cmd.length + spanMatch.index;\n          // Style the source span\n          for (\n            let i = spanStartIndex;\n            i < spanStartIndex + sourceSpan.length;\n            i++\n          ) {\n            baseDecorations[i] = { class: \"source-span\" };\n          }\n        }\n      }\n    }\n  }\n\n  // Apply comment styling at the end to override any other styling\n  if (commentIndex !== -1) {\n    for (let i = commentIndex; i < line.length; i++) {\n      baseDecorations[i] = { class: \"comment\" };\n    }\n  }\n\n  return baseDecorations;\n};\n\n// Main function to process key signature styling\nconst processKeySignature = (line: string, currentKey: KeySignature) => {\n  const [_, root, modeStr] = line.match(\n    /^([A-G][b#]?)\\s+(major|minor|lydian|mixolydian|dorian|phrygian|harmonic\\s+minor|melodic\\s+minor)$/i,\n  )!;\n\n  const modeStartIndex = line.toLowerCase().indexOf(modeStr.toLowerCase());\n\n  // Convert mode string to the format used internally using our utility\n  const mode = normalizeModeName(modeStr);\n\n  const scaleMap = getScaleMapForMode(mode);\n  const UNSTABLE_PITCHES = [1, 2, 3, 5, 6];\n\n  return Array.from(line).map((char, index) => {\n    if (index >= modeStartIndex && index < modeStartIndex + modeStr.length) {\n      const letterIndex = index - modeStartIndex;\n      const unstablePitch = UNSTABLE_PITCHES[letterIndex];\n      const colorIndex = scaleMap[unstablePitch];\n      return { class: `noteColor_${colorIndex}_colors` };\n    }\n    return { class: null };\n  });\n};\n\n// Parse a single note from a position in the melody string\nconst parseNote = (\n  melody: string,\n  startIndex: number,\n  isPartOfChord: boolean = false,\n): { note: ParsedNote | null; nextIndex: number; hasDuration: boolean } => {\n  let i = startIndex;\n\n  // Skip any whitespace\n  while (i < melody.length && /\\s/.test(melody[i])) i++;\n  if (i >= melody.length)\n    return { note: null, nextIndex: i, hasDuration: false };\n\n  // Stop if we hit a comment marker\n  if (melody[i] === \"%\")\n    return { note: null, nextIndex: i, hasDuration: false };\n\n  const noteStart = i;\n\n  // Parse octave shift prefixes (^ for up, v for down)\n  let scaleDegreeOffset = 0;\n  while (i < melody.length && (melody[i] === \"^\" || melody[i] === \"v\")) {\n    if (melody[i] === \"^\") {\n      scaleDegreeOffset += 7; // Each ^ adds one octave (7 scale degrees)\n    } else if (melody[i] === \"v\") {\n      scaleDegreeOffset -= 7; // Each v subtracts one octave (7 scale degrees)\n    }\n    i++;\n  }\n\n  // Check for accidental\n  let accidental: \"b\" | \"#\" | undefined;\n  if (i < melody.length && (melody[i] === \"b\" || melody[i] === \"#\")) {\n    accidental = melody[i] as \"b\" | \"#\";\n    i++;\n  }\n\n  // Get pitch\n  if (i >= melody.length)\n    return { note: null, nextIndex: i, hasDuration: false };\n\n  // Stop if we hit a comment marker\n  if (melody[i] === \"%\")\n    return { note: null, nextIndex: i, hasDuration: false };\n\n  const pitch = melody[i];\n  let degree = NOTE_LETTER_MAP[pitch.toLowerCase()];\n  if (degree === undefined)\n    return { note: null, nextIndex: startIndex + 1, hasDuration: false };\n\n  // Apply the octave shift directly to the degree\n  degree += scaleDegreeOffset;\n\n  i++;\n\n  // Look for duration\n  let duration = \"\";\n  let durationStart: number | undefined;\n  let hasDuration = false;\n\n  while (i < melody.length) {\n    // Stop if we hit a comment marker\n    if (melody[i] === \"%\") break;\n\n    // Check for duration marker\n    if (/[+_\\-=,'\"]/.test(melody[i])) {\n      hasDuration = true;\n      durationStart = i;\n      duration += melody[i];\n      i++;\n      // Check for dot or triplet\n      if (i < melody.length && (melody[i] === \".\" || melody[i] === \":\")) {\n        duration += melody[i];\n        i++;\n      }\n      break;\n    }\n    // If we see another note or accidental, stop\n    if (/[a-zA-Z1-90x]|[b#]|[\\^v]/.test(melody[i])) {\n      break;\n    }\n    i++;\n  }\n\n  const note: ParsedNote = {\n    pitch,\n    accidental,\n    duration: duration || undefined,\n    position: {\n      start: noteStart,\n      end: i, // Now includes duration for single notes\n      durationStart,\n    },\n    degree,\n    isPartOfChord,\n  };\n\n  return { note, nextIndex: i, hasDuration };\n};\n\n// Parse all notes from a melody string\nconst parseMelody = (melody: string): ParsedNote[] => {\n  const notes: ParsedNote[] = [];\n  let i = 0;\n\n  // Check for comment marker and ignore everything after it\n  const commentIndex = melody.indexOf(\"%\");\n  const effectiveLength = commentIndex !== -1 ? commentIndex : melody.length;\n\n  while (i < effectiveLength) {\n    // Try to parse as a chord first\n    let chordNotes: ParsedNote[] = [];\n    let currentIndex = i;\n    let isChord = false;\n    let lastNextIndex = i;\n\n    // Look ahead for multiple consecutive notes without duration markers\n    while (currentIndex < effectiveLength) {\n      const { note, nextIndex, hasDuration } = parseNote(\n        melody,\n        currentIndex,\n        true,\n      );\n      if (!note) break;\n\n      chordNotes.push(note);\n      lastNextIndex = nextIndex;\n\n      if (hasDuration) {\n        isChord = chordNotes.length > 1;\n        break;\n      }\n      currentIndex = nextIndex;\n    }\n\n    if (isChord) {\n      // Add all chord notes without the duration styling\n      notes.push(...chordNotes);\n      // Move past the last note and its duration\n      i = lastNextIndex;\n    } else {\n      // Parse as a single note\n      const { note, nextIndex } = parseNote(melody, i, false);\n      if (note) {\n        notes.push(note);\n      }\n      i = nextIndex;\n    }\n  }\n\n  return notes;\n};\n\n// Calculate color for a note based on its properties and key\nconst calculateNoteColor = (note: ParsedNote, key: KeySignature): NoteColor => {\n  const scaleDegree = note.degree % 7;\n  const scaleMap = getScaleMapForMode(key.mode);\n  const accidentalValue =\n    note.accidental === \"b\" ? -1 : note.accidental === \"#\" ? 1 : 0;\n  const colorIndex = (scaleMap[scaleDegree] + accidentalValue + 12) % 12;\n\n  let dotClass = \"\";\n  // The octave shift is now directly incorporated in the degree\n  if (note.degree >= 14) {\n    // This threshold is still correct, but now refers to numeric keys\n    dotClass = \" dotAbove\";\n  } else if (note.degree <= 6) {\n    // This threshold is still correct, but now refers to letter keys\n    dotClass = \" dotBelow\";\n  }\n\n  return { colorIndex, dotClass };\n};\n\n// Apply colors to create decorations\nconst applyNoteColors = (\n  notes: ParsedNote[],\n  colors: NoteColor[],\n  melodyStartIndex: number,\n  lineLength: number,\n): Array<{ class: string | null }> => {\n  // Validate input parameters\n  if (melodyStartIndex < 0 || lineLength <= 0) {\n    return [];\n  }\n\n  const decorations = Array(lineLength).fill({ class: null });\n\n  // First, identify chord groups\n  const chordGroups = new Set<number>();\n  let currentChordStart = -1;\n\n  for (let i = 0; i < notes.length; i++) {\n    if (notes[i].isPartOfChord) {\n      if (currentChordStart === -1) {\n        currentChordStart = i;\n      }\n      chordGroups.add(i);\n    } else if (currentChordStart !== -1) {\n      // End of chord group\n      currentChordStart = -1;\n    }\n  }\n\n  notes.forEach((note, index) => {\n    const color = colors[index];\n    const colorClass = `noteColor_${color.colorIndex}_colors${color.dotClass}`;\n\n    // Calculate the absolute positions in the line\n    const absoluteStart = melodyStartIndex + note.position.start;\n    const absoluteEnd = melodyStartIndex + note.position.end;\n    const absoluteDurationStart =\n      note.position.durationStart !== undefined\n        ? melodyStartIndex + note.position.durationStart\n        : absoluteEnd;\n\n    // Ensure we don't exceed array bounds\n    if (absoluteStart >= lineLength) {\n      return;\n    }\n\n    if (chordGroups.has(index)) {\n      // For chord notes, only color the pitch and accidental\n      const end = Math.min(absoluteDurationStart, lineLength);\n      for (let i = absoluteStart; i < end; i++) {\n        decorations[i] = { class: colorClass };\n      }\n    } else {\n      // For single notes, color the entire span including duration\n      const end = Math.min(absoluteEnd, lineLength);\n      for (let i = absoluteStart; i < end; i++) {\n        decorations[i] = { class: colorClass };\n      }\n    }\n  });\n\n  return decorations;\n};\n\n// Main function to process note colors\nconst processNoteColors = (\n  line: string,\n  currentKey: KeySignature,\n  allLines: string[],\n  lineIndex: number,\n) => {\n  // Update current key based on previous lines\n  for (let i = 0; i < lineIndex; i++) {\n    const prevLine = allLines[i].trim();\n    const keyMatch = prevLine.match(\n      /^([A-G][b#]?)\\s+(major|minor|lydian|mixolydian|dorian|phrygian|harmonic\\s+minor|melodic\\s+minor)$/i,\n    );\n    if (keyMatch) {\n      const [_, root, modeStr] = keyMatch;\n      const noteToNumber: { [key: string]: number } = {\n        C: 0,\n        \"C#\": 1,\n        Db: 1,\n        D: 2,\n        \"D#\": 3,\n        Eb: 3,\n        E: 4,\n        F: 5,\n        \"F#\": 6,\n        Gb: 6,\n        G: 7,\n        \"G#\": 8,\n        Ab: 8,\n        A: 9,\n        \"A#\": 10,\n        Bb: 10,\n        B: 11,\n      };\n\n      // Use our utility function to normalize the mode name\n      const mode = normalizeModeName(modeStr);\n\n      currentKey = {\n        tonic: noteToNumber[root],\n        mode: mode,\n      };\n    }\n  }\n\n  const match = line.match(/^\\s*(\\d+)(?:b(\\d+(?:\\.\\d+)?))?\\s+i\\s+(.+)$/);\n  if (!match) {\n    return Array.from(line).map(() => ({ class: null }));\n  }\n\n  const [_, measureStr, beatStr, melodyPart] = match;\n\n  // Remove any comment parts from the melody string\n  const commentIndex = melodyPart.indexOf(\"%\");\n  const cleanMelodyPart =\n    commentIndex !== -1 ? melodyPart.substring(0, commentIndex) : melodyPart;\n\n  // Get the start index of the cleaned melody part\n  const melodyStartIndex = line.indexOf(melodyPart);\n\n  // Parse melody into structured notes\n  const notes = parseMelody(cleanMelodyPart);\n\n  // Calculate colors for each note\n  const colors = notes.map((note) => calculateNoteColor(note, currentKey));\n\n  // Apply colors to create decorations\n  return applyNoteColors(notes, colors, melodyStartIndex, line.length);\n};\n\n// CodeMirror theme\nexport const customTheme = createTheme({\n  theme: \"dark\",\n  settings: {\n    background: \"#080808\",\n    foreground: \"#ffffff\",\n    caret: \"#ffa500\",\n    selection: \"rgba(255, 255, 255, 0.2)\",\n    selectionMatch: \"rgba(255, 255, 255, 0.2)\",\n    lineHighlight: \"#8a91991a\",\n    gutterBackground: \"#1e1e1e\",\n    gutterForeground: \"#8a919966\",\n  },\n  styles: [{ tag: tags.comment, color: \"#666666\", fontStyle: \"italic\" }],\n});\n\n// Additional theme extension for the active line gutter\nexport const activeLineGutterTheme = EditorView.theme({\n  \".cm-gutterElement.cm-activeLineGutter\": {\n    color: \"#fff !important\",\n    fontWeight: \"bold\",\n  },\n});\n\n// CodeMirror plugin for character backgrounds\nexport const characterBackgroundsPlugin = ViewPlugin.fromClass(\n  class {\n    decorations: DecorationSet;\n    lastValidDecorations: DecorationSet | null = null;\n\n    constructor(view: EditorView) {\n      try {\n        this.decorations = this.buildDecorations(view);\n        this.lastValidDecorations = this.decorations;\n      } catch (error) {\n        this.decorations = this.lastValidDecorations || Decoration.none;\n      }\n    }\n\n    update(update: ViewUpdate) {\n      try {\n        if (update.docChanged || update.viewportChanged) {\n          const newDecorations = this.buildDecorations(update.view);\n          this.lastValidDecorations = newDecorations;\n          this.decorations = newDecorations;\n        }\n      } catch (error) {\n        this.decorations = this.lastValidDecorations || Decoration.none;\n      }\n    }\n\n    buildDecorations(view: EditorView) {\n      try {\n        const builder = new RangeSetBuilder<Decoration>();\n        const doc = view.state.doc;\n        const allLines = doc.toString().split(\"\\n\");\n\n        // Start with C major as default\n        let currentKey: KeySignature = { tonic: 0, mode: \"major\" };\n\n        // Iterate through visible lines\n        for (let { from, to } of view.visibleRanges) {\n          let pos = from;\n          while (pos <= to && pos < doc.length) {\n            try {\n              const line = view.state.doc.lineAt(pos);\n              const lineIndex = line.number - 1;\n\n              const backgrounds = getBackgroundsForLine(\n                line.text,\n                currentKey,\n                allLines,\n                lineIndex,\n              );\n\n              // Update current key if this is a key signature line\n              const keyMatch = line.text.match(\n                /^([A-G][b#]?)\\s+(major|minor|lydian|mixolydian|dorian|phrygian|harmonic\\s+minor|melodic\\s+minor)$/i,\n              );\n              if (keyMatch) {\n                const [_, root, modeStr] = keyMatch;\n                const noteToNumber: { [key: string]: number } = {\n                  C: 0,\n                  \"C#\": 1,\n                  Db: 1,\n                  D: 2,\n                  \"D#\": 3,\n                  Eb: 3,\n                  E: 4,\n                  F: 5,\n                  \"F#\": 6,\n                  Gb: 6,\n                  G: 7,\n                  \"G#\": 8,\n                  Ab: 8,\n                  A: 9,\n                  \"A#\": 10,\n                  Bb: 10,\n                  B: 11,\n                };\n                currentKey = {\n                  tonic: noteToNumber[root],\n                  mode: normalizeModeName(modeStr),\n                };\n              }\n\n              // Apply background to each character with bounds checking\n              for (let i = 0; i < line.length && i < backgrounds.length; i++) {\n                const charPos = line.from + i;\n                if (charPos < line.to && charPos < doc.length) {\n                  const decoration = backgrounds[i];\n                  if (decoration && decoration.class) {\n                    builder.add(\n                      charPos,\n                      charPos + 1,\n                      Decoration.mark({ class: decoration.class }),\n                    );\n                  }\n                }\n              }\n              pos = line.to + 1;\n            } catch (error) {\n              pos++; // Move to next position on error\n              continue;\n            }\n          }\n        }\n\n        return builder.finish();\n      } catch (error) {\n        return this.lastValidDecorations || Decoration.none;\n      }\n    }\n  },\n  {\n    decorations: (v) => v.decorations,\n    // Add plugin event handlers for error recovery\n    eventHandlers: {\n      focus(event: FocusEvent, view: EditorView) {\n        try {\n          // Attempt to rebuild decorations on focus\n          if (this.lastValidDecorations === null) {\n            this.decorations = this.buildDecorations(view);\n            this.lastValidDecorations = this.decorations;\n          }\n        } catch (error) {\n          console.error(\"Error handling focus event:\", error);\n        }\n      },\n    },\n  },\n);\n","import MidiWriter from \"midi-writer-js\";\nimport { Analysis, PitchClass } from \"../analysis\";\nimport { Note } from \"../forge/ForgeGenerator\";\n\n// Define TimeSignature type locally since we can't import it\ntype TimeSignature = {\n  numerator: number;\n  measureStart: number;\n};\n\n// Define Track type with time signature method\ntype Track = {\n  addTrackName(name: string): void;\n  setTempo(tempo: number): void;\n  addEvent(event: any): void;\n  setTimeSignature(\n    numerator: number,\n    denominator: number,\n    midiclockspertick: number,\n    notespermidiclock: number,\n  ): Track;\n};\n\n// Source map information to track where a note came from in the original code\nexport interface SourceLocation {\n  row: number; // 1-based line number\n  col: number; // 1-based column position\n  command: string; // 'insert', 'copy', or 'ac'\n}\n\n// Type assertion for the imported MidiWriter\nconst { Track: MidiTrack, NoteEvent, Writer } = MidiWriter;\n\n// Mid-level representation of musical events\ninterface MusicalEvent {\n  pitches: number[];\n  startTick: number;\n  duration: number;\n  velocity: number;\n  channel: number;\n  sourceLocation?: SourceLocation; // Where this note originated in the source code\n}\n\nexport interface MidiGenerationResult {\n  midiData: Uint8Array;\n  midiInfo: {\n    id: string;\n    title: string;\n    slug: string;\n    sourceUrl: null;\n    isHiddenRoute: boolean;\n  };\n  analysis: Analysis;\n  extractedNotes?: {\n    eventsByChannel: Map<number, MusicalEvent[]>;\n    trackNames: Map<number, string>;\n  };\n}\n\n// Main MIDI generation function now uses the two-step process\nexport const generateMidiFile = (\n  notes: (Note & { sourceLocation?: SourceLocation })[],\n  bpm: number,\n  timeSignatures: TimeSignature[],\n): {\n  midiData: Uint8Array;\n  extractedNotes: {\n    eventsByChannel: Map<number, MusicalEvent[]>;\n    trackNames: Map<number, string>;\n  };\n} => {\n  // Sort the notes by start time for processing\n  const sortedNotes = [...notes].sort((a, b) => a.startTime - b.startTime);\n\n  // First, group notes by start time, duration, and channel to identify chords\n  const groupedNotes = new Map<\n    string,\n    {\n      startTime: number;\n      duration: number;\n      channel: number;\n      pitches: number[];\n      velocity: number;\n      sourceLocation?: SourceLocation;\n    }\n  >();\n\n  sortedNotes.forEach((note) => {\n    // Create a key from the note properties that should be identical for chord notes\n    const key = `${note.startTime}-${note.duration}-${note.channel || 0}`;\n\n    if (!groupedNotes.has(key)) {\n      groupedNotes.set(key, {\n        startTime: note.startTime,\n        duration: note.duration,\n        channel: note.channel || 0,\n        pitches: [note.pitch],\n        velocity: note.velocity || 100,\n        sourceLocation: note.sourceLocation,\n      });\n    } else {\n      // If we already have a group with this key, add the pitch to it (it's part of a chord)\n      const group = groupedNotes.get(key)!;\n      group.pitches.push(note.pitch);\n\n      // Keep the source location from the first note in the group\n      // or update if this note has source location and the group doesn't\n      if (note.sourceLocation && !group.sourceLocation) {\n        group.sourceLocation = note.sourceLocation;\n      }\n    }\n  });\n\n  // Convert the grouped notes to events\n  const events: MusicalEvent[] = Array.from(groupedNotes.values()).map(\n    (group) => ({\n      pitches: group.pitches,\n      startTick: group.startTime,\n      duration: group.duration,\n      velocity: group.velocity,\n      channel: group.channel,\n      sourceLocation: group.sourceLocation,\n    }),\n  );\n\n  // Inline implementation of generateMidiFromEvents\n  const eventsByChannel = new Map<number, MusicalEvent[]>();\n  const trackNames = new Map<number, string>();\n\n  // Group events by channel\n  events.forEach((event) => {\n    const channelEvents = eventsByChannel.get(event.channel) || [];\n    channelEvents.push(event);\n    eventsByChannel.set(event.channel, channelEvents);\n  });\n\n  // Create separate tracks for each channel\n  const tracks = new Map<number, Track>();\n\n  // Create a tempo/time signature track (track 0)\n  const tempoTrack = new MidiTrack() as Track;\n  const tempoTrackName = \"Tempo and Time Signatures\";\n  tempoTrack.addTrackName(tempoTrackName);\n  trackNames.set(-1, tempoTrackName);\n  tempoTrack.setTempo(bpm);\n\n  // Add time signatures using the official API\n  timeSignatures.forEach((ts) => {\n    tempoTrack.setTimeSignature(ts.numerator, 4, 24, 8);\n  });\n\n  tracks.set(-1, tempoTrack); // Special track for tempo/time sig\n\n  events.forEach((event) => {\n    if (!tracks.has(event.channel)) {\n      const track = new MidiTrack() as Track;\n      // Give each track a name based on its channel\n      const trackName =\n        event.channel === 0\n          ? \"Right Hand (Channel 0)\"\n          : event.channel === 1\n          ? \"Left Hand (Channel 1)\"\n          : `Channel ${event.channel}`;\n\n      track.addTrackName(trackName);\n      trackNames.set(event.channel, trackName);\n      tracks.set(event.channel, track);\n    }\n\n    const track = tracks.get(event.channel)!;\n\n    // Create the note event, preserving source location metadata\n    const noteEvent = new NoteEvent({\n      pitch: event.pitches, // This now contains multiple pitches for chords\n      duration: \"T\" + event.duration,\n      velocity: event.velocity,\n      startTick: event.startTick,\n      channel: event.channel, // Ensure channel number is preserved\n    });\n\n    // Manually attach source location to the note event\n    // This is the only way to ensure it's preserved through the MIDI writer\n    (noteEvent as any).sourceLocation = event.sourceLocation;\n\n    track.addEvent(noteEvent);\n  });\n\n  // Sort tracks by channel number to ensure consistent order\n  const sortedTracks = Array.from(tracks.entries())\n    .sort(([a], [b]) => a - b)\n    .map(([channel, track]) => ({ channel, track }));\n\n  const writer = new Writer(sortedTracks.map(({ track }) => track));\n  const base64Data = writer.dataUri().split(\",\")[1];\n\n  // Convert base64 to Uint8Array\n  const binaryString = window.atob(base64Data);\n  const bytes = new Uint8Array(binaryString.length);\n  for (let i = 0; i < binaryString.length; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n\n  // Log final event count by channel\n  eventsByChannel.forEach((events, channel) => {\n    // Remove console logs for channel events count and source locations\n  });\n\n  return {\n    midiData: bytes,\n    extractedNotes: {\n      eventsByChannel,\n      trackNames,\n    },\n  };\n};\n\nexport const generateInitialAnalysis = (title: string): Analysis => {\n  return {\n    modulations: {\n      1: 0 as PitchClass,\n    },\n    comment: title,\n    tags: [\"generated\", \"melody\"],\n    form: {},\n    phrasePatch: [],\n    sections: [0],\n  };\n};\n\nexport const generateMidiWithMetadata = (\n  notes: Note[],\n  title: string,\n  bpm: number,\n  timeSignatures: TimeSignature[],\n): MidiGenerationResult => {\n  const { midiData, extractedNotes } = generateMidiFile(\n    notes,\n    bpm,\n    timeSignatures,\n  );\n\n  return {\n    midiData,\n    midiInfo: {\n      id: title,\n      title,\n      slug: title,\n      sourceUrl: null,\n      isHiddenRoute: false,\n    },\n    analysis: generateInitialAnalysis(title),\n    extractedNotes,\n  };\n};\n","import {\n  addDoc,\n  collection,\n  doc,\n  getDoc,\n  getFirestore,\n  serverTimestamp,\n  updateDoc,\n} from \"firebase/firestore/lite\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { FirestoreEditDocument } from \"../../../types/firestore\"; // Import the type definition\nimport { AppContext } from \"../../AppContext\";\nimport { Analysis } from \"../analysis\";\nimport { useBackup } from \"./hooks/useBackup\"; // Import the new hook\n\ninterface EditorSavingMenuProps {\n  effectiveSlug: string;\n  score: string;\n  initialSource: string;\n  id?: string;\n  slug?: string;\n  version?: number;\n  history: any;\n  setError: (error: string | null) => void;\n  analysis?: Analysis;\n  onRestoreBackup?: (code: string) => void;\n  onPreviewBackup?: (code: string) => void;\n  onRestorePreview?: (code: string) => void;\n}\n\n// Styled components\nconst SavingMenuContainer = styled.div`\n  margin-bottom: 15px;\n  padding: 10px;\n  border-bottom: 1px solid #444;\n`;\n\nconst MenuRow = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n`;\n\nconst Button = styled.button`\n  background-color: #2a2a2a;\n  color: white;\n  border: 1px solid #444;\n  padding: 5px 10px;\n  margin-right: 10px;\n  cursor: pointer;\n  font-size: 14px;\n  &:hover {\n    background-color: #444;\n  }\n`;\n\nconst Input = styled.input`\n  background-color: #1e1e1e;\n  color: white;\n  border: 1px solid #444;\n  padding: 5px 10px;\n  margin-right: 10px;\n  flex: 1;\n`;\n\nconst Label = styled.span`\n  color: white;\n  margin-right: 8px;\n`;\n\nconst BackupInfo = styled.div`\n  font-size: 12px;\n  color: #888;\n  margin-bottom: 10px;\n  display: flex;\n  align-items: center;\n`;\n\n// Add new styled component for version links\nconst VersionLinks = styled.div`\n  display: flex;\n  gap: 10px;\n  margin-bottom: 10px;\n`;\n\nconst VersionLink = styled.a<{ isActive: boolean }>`\n  color: ${(props) => (props.isActive ? \"white\" : \"gray\")};\n  text-decoration: ${(props) => (props.isActive ? \"none\" : \"underline\")};\n  font-weight: ${(props) => (props.isActive ? \"bold\" : \"normal\")};\n  cursor: pointer;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\n// Add these new styled components\nconst ClickableLink = styled.div`\n  color: #4a9eff;\n  cursor: pointer;\n  text-decoration: underline;\n  display: inline-block;\n  margin-bottom: 10px;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst ToastNotification = styled.div`\n  background-color: #333;\n  color: white;\n  padding: 6px 12px;\n  border-radius: 4px;\n  font-size: 12px;\n  position: absolute;\n  margin-top: 5px;\n  animation: fadeIn 0.3s;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n`;\n\n// Add a new styled component for the sign-in message\nconst SignInMessage = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  font-size: 14px;\n  color: #888;\n`;\n\nconst SignInLink = styled.a`\n  color: #fff;\n  cursor: pointer;\n  margin-left: 5px;\n  text-decoration: none;\n\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\n// Add new styled component for the interactive backup text\nconst BackupText = styled.span`\n  color: #4a9eff;\n  cursor: pointer;\n  display: inline-block;\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst EditorSavingMenu: React.FC<EditorSavingMenuProps> = ({\n  score,\n  initialSource,\n  id,\n  slug,\n  effectiveSlug,\n  version,\n  history,\n  setError,\n  onRestoreBackup,\n  onPreviewBackup,\n  onRestorePreview,\n}) => {\n  // Replace the direct use of getBackupKey and useLocalStorage with the custom hook\n  const { backup, removeBackup } = useBackup(effectiveSlug);\n\n  const [shortLink, setShortLink] = useState<string | null>(null);\n  // Initialize publishTitle from localStorage if available\n  const [publishTitle, setPublishTitle] = useState(() => {\n    // If there's a title in localStorage, use it\n    const storedTitle = localStorage.getItem(\"new_editor_title\");\n    if (storedTitle) {\n      // Remove the title from localStorage after retrieving it\n      localStorage.removeItem(\"new_editor_title\");\n      return storedTitle;\n    }\n    return \"\";\n  });\n  const [isPublishing, setIsPublishing] = useState(false);\n  const [versions, setVersions] = useState<number>(version || 0);\n  const [allVersionsContent, setAllVersionsContent] = useState<string[]>([]);\n  const [documentUpdatedAt, setDocumentUpdatedAt] = useState<Date | null>(null);\n  const [showToast, setShowToast] = useState(false);\n  const [isHoveringBackup, setIsHoveringBackup] = useState(false);\n  const [originalScore, setOriginalScore] = useState<string | null>(null);\n  const [editorMountTime, setEditorMountTime] = useState<number | null>(null);\n\n  // Get user from context instead of directly from Firebase\n  const appContext = useContext(AppContext);\n  const user = appContext?.user;\n\n  // Initialize short link based on current ID and version\n  useEffect(() => {\n    if (id && version) {\n      setShortLink(`/ef/${id}/${version}`);\n    } else if (id) {\n      setShortLink(`/ef/${id}`);\n    } else if (slug) {\n      setShortLink(`/e/${slug}`);\n    }\n  }, [id, slug, version]);\n\n  // Initialize component and fetch document details\n  useEffect(() => {\n    if (id) {\n      // If we have an ID, fetch the document to get versions count, updatedAt and all versions content\n      const fetchDocumentDetails = async () => {\n        try {\n          const db = getFirestore();\n          const docRef = doc(db, \"edits\", id);\n          const docSnap = await getDoc(docRef);\n\n          if (docSnap.exists()) {\n            const data = docSnap.data() as FirestoreEditDocument;\n            // Set the versions count and the title from the existing document\n            setVersions(data.versions?.length || 0);\n            setPublishTitle(data.title || \"\");\n\n            // Store all versions content for comparison with backup\n            if (data.versions && Array.isArray(data.versions)) {\n              setAllVersionsContent(data.versions);\n            }\n\n            // Store document's updatedAt timestamp\n            if (data.updatedAt) {\n              setDocumentUpdatedAt(data.updatedAt.toDate());\n            }\n          }\n        } catch (error) {\n          console.error(\"Error fetching document details:\", error);\n        }\n      };\n\n      fetchDocumentDetails();\n    }\n  }, [id]);\n\n  // Listen for the editor mount time event\n  useEffect(() => {\n    const handleEditorMounted = (e: CustomEvent<{ mountTime: number }>) => {\n      if (e.detail && e.detail.mountTime) {\n        setEditorMountTime(e.detail.mountTime);\n      }\n    };\n\n    window.addEventListener(\n      \"rawl-editor-mounted\",\n      handleEditorMounted as EventListener,\n    );\n\n    return () => {\n      window.removeEventListener(\n        \"rawl-editor-mounted\",\n        handleEditorMounted as EventListener,\n      );\n    };\n  }, []);\n\n  // Update the backup check logic to use the hook and respect preview mode\n  useEffect(() => {\n    // Skip backup checks while we're hovering/previewing\n    if (isHoveringBackup) {\n      console.log(\"DEBUG: Skipping backup removal check during hover preview\");\n      return;\n    }\n\n    // Don't show backup if it's identical to initial source or current code\n    if (backup && (backup.score === initialSource || backup.score === score)) {\n      console.log(\n        \"DEBUG: Removing backup - matches current code or initial source\",\n      );\n      removeBackup();\n      return;\n    }\n\n    // Don't show backup if it matches any version of the document\n    if (\n      backup &&\n      allVersionsContent.some((version) => version === backup.score)\n    ) {\n      console.log(\"DEBUG: Removing backup - matches a saved version\");\n      removeBackup();\n      return;\n    }\n\n    // Don't show backup if it was saved before document was last updated\n    if (\n      backup &&\n      documentUpdatedAt &&\n      backup.timestamp < documentUpdatedAt.getTime()\n    ) {\n      console.log(\"DEBUG: Removing backup - older than document update time\");\n      removeBackup();\n      return;\n    }\n\n    // Don't show backup if it was created in this editing session\n    if (\n      backup &&\n      editorMountTime &&\n      backup.sessionTime &&\n      backup.sessionTime >= editorMountTime\n    ) {\n      console.log(\"DEBUG: Removing backup - created in current session\");\n      removeBackup();\n      return;\n    }\n  }, [\n    backup,\n    removeBackup,\n    initialSource,\n    score,\n    documentUpdatedAt,\n    allVersionsContent,\n    editorMountTime,\n    isHoveringBackup,\n  ]);\n\n  // Handle restore from backup\n  const handleRestore = () => {\n    if (backup && backup.score) {\n      // Use callback instead of dispatching event\n      if (onRestoreBackup) {\n        onRestoreBackup(backup.score);\n      }\n\n      // Clear the backup after restoration\n      removeBackup();\n    }\n  };\n\n  // Update handleDiscardBackup to use removeBackup\n  const handleDiscardBackup = () => {\n    removeBackup();\n  };\n\n  // Add handlers for hover events\n  const handleBackupMouseEnter = () => {\n    if (backup && backup.score) {\n      console.log(\"DEBUG: Backup mouse enter triggered\");\n      setIsHoveringBackup(true);\n      setOriginalScore(score);\n\n      // Use callback instead of dispatching event\n      if (onPreviewBackup) {\n        console.log(\"DEBUG: Calling onPreviewBackup with backup score\");\n        onPreviewBackup(backup.score);\n      }\n    }\n  };\n\n  const handleBackupMouseLeave = () => {\n    console.log(\"DEBUG: Backup mouse leave triggered\", {\n      isHoveringBackup,\n      hasOriginalScore: Boolean(originalScore),\n    });\n\n    if (isHoveringBackup) {\n      setIsHoveringBackup(false);\n\n      // Only restore preview if we have an original score saved\n      if (originalScore && onRestorePreview) {\n        console.log(\"DEBUG: Calling onRestorePreview with original score\");\n        onRestorePreview(originalScore);\n        setOriginalScore(null);\n      }\n    }\n  };\n\n  // Calculate diff length between current score and backup\n  const calculateDiffLength = () => {\n    if (!backup || !backup.score) return 0;\n\n    const backupLength = backup.score.length;\n    const currentLength = score.length;\n\n    return backupLength - currentLength;\n  };\n\n  // Format diff length as a string\n  const formatDiffLength = () => {\n    const diff = calculateDiffLength();\n    if (diff === 0) return \"same length\";\n    return diff > 0 ? `+${diff} chars` : `${diff} chars`;\n  };\n\n  // Handle publish button click - renamed to handleSaveClick\n  const handleSaveClick = () => {\n    // Remove validation that requires a title\n    handleSave();\n  };\n\n  // Handle saving to firestore with versions\n  const handleSave = async () => {\n    if (!score.trim()) {\n      setError(\"Cannot save empty score\");\n      return;\n    }\n\n    setIsPublishing(true);\n    try {\n      const db = getFirestore();\n      const editsCollection = collection(db, \"edits\");\n\n      if (id) {\n        // Update existing document with new version\n        const docRef = doc(db, \"edits\", id);\n        const docSnap = await getDoc(docRef);\n\n        if (docSnap.exists()) {\n          const data = docSnap.data() as FirestoreEditDocument;\n          const versions = data.versions || [];\n\n          // Add the new version\n          versions.push(score);\n\n          // Update the document - use title or empty string\n          await updateDoc(docRef, {\n            title: publishTitle.trim(), // This can be empty now\n            versions,\n            updatedAt: serverTimestamp(),\n          });\n\n          // Redirect to the new version URL\n          const newVersionNumber = versions.length;\n          const newShortLink = `/ef/${id}/${newVersionNumber}`;\n          setShortLink(newShortLink);\n          setVersions(newVersionNumber);\n          history.push(newShortLink); // never remove this statement\n        }\n      } else {\n        // Create new document with first version\n        const newDoc: Omit<FirestoreEditDocument, \"createdAt\" | \"updatedAt\"> = {\n          title: publishTitle.trim(), // This can be empty now\n          versions: [score], // Initialize versions array with current score\n          owner: user ? user.uid : null, // Use user from context\n        };\n\n        const docRef = await addDoc(editsCollection, {\n          ...newDoc,\n          createdAt: serverTimestamp(),\n          updatedAt: serverTimestamp(),\n        });\n\n        // Redirect to the new version URL\n        const newShortLink = `/ef/${docRef.id}/1`;\n        setShortLink(newShortLink);\n        setVersions(1);\n        history.push(newShortLink); // never remove this statement\n      }\n\n      setError(null);\n    } catch (error) {\n      console.error(\"Error saving score:\", error);\n      setError(\"Failed to save score\");\n    } finally {\n      setIsPublishing(false);\n    }\n  };\n\n  // Handle key down for publish input\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") {\n      handleSaveClick();\n    }\n  };\n\n  // New function to handle version navigation\n  const handleVersionClick = (versionNumber: number) => {\n    if (id) {\n      const versionLink = `/ef/${id}/${versionNumber}`;\n      history.push(versionLink);\n    }\n  };\n\n  // Handle copy URL to clipboard\n  const handleCopyUrl = () => {\n    if (shortLink) {\n      const fullUrl = window.location.origin + shortLink;\n      navigator.clipboard.writeText(fullUrl);\n      setShowToast(true);\n\n      // Hide toast after 1 second\n      setTimeout(() => {\n        setShowToast(false);\n      }, 1000);\n    }\n  };\n\n  // Format backup time\n  const formatBackupTime = (timestamp: number | null) => {\n    if (!timestamp) return \"unknown time\";\n\n    const date = new Date(timestamp);\n    const now = new Date();\n\n    // Format the time part (3:12am)\n    const hours = date.getHours();\n    const minutes = date.getMinutes();\n    const ampm = hours >= 12 ? \"pm\" : \"am\";\n    const formattedHours = hours % 12 || 12; // Convert 0 to 12 for 12am\n    const formattedMinutes = minutes < 10 ? `0${minutes}` : minutes;\n    const timeStr = `${formattedHours}:${formattedMinutes}${ampm}`;\n\n    // Calculate relative date\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / (1000 * 60));\n    const diffHours = Math.floor(diffMins / 60);\n    const diffDays = Math.floor(diffHours / 24);\n\n    // Determine relative date text\n    const isToday =\n      now.getDate() === date.getDate() &&\n      now.getMonth() === date.getMonth() &&\n      now.getFullYear() === date.getFullYear();\n\n    const isYesterday =\n      now.getDate() - 1 === date.getDate() &&\n      now.getMonth() === date.getMonth() &&\n      now.getFullYear() === date.getFullYear();\n\n    let relativeDate = \"\";\n\n    if (isToday) {\n      if (diffHours < 1) {\n        relativeDate = diffMins < 2 ? \"just now\" : `${diffMins}m ago`;\n      } else {\n        relativeDate = `${diffHours}h ago`;\n      }\n    } else if (isYesterday) {\n      relativeDate = \"yesterday\";\n    } else if (diffDays < 7) {\n      relativeDate = `${diffDays}d ago`;\n    } else {\n      relativeDate = date.toLocaleDateString();\n    }\n\n    return `${timeStr} ${relativeDate}`;\n  };\n\n  return (\n    <SavingMenuContainer>\n      {backup && backup.timestamp !== null && (\n        <BackupInfo>\n          <BackupText\n            onMouseEnter={handleBackupMouseEnter}\n            onMouseLeave={handleBackupMouseLeave}\n          >\n            Backup\n          </BackupText>\n          &nbsp;\n          {\" from \"}\n          {formatBackupTime(backup.timestamp)} ({formatDiffLength()})\n          <Button onClick={handleRestore}>Restore</Button>\n          <Button onClick={handleDiscardBackup}>Discard</Button>\n        </BackupInfo>\n      )}\n\n      {user ? (\n        <MenuRow>\n          <Label>Title:</Label>\n          <Input\n            type=\"text\"\n            placeholder=\"(optional)\"\n            value={publishTitle}\n            onChange={(e) => setPublishTitle(e.target.value)}\n            onKeyDown={handleKeyDown}\n          />\n          <Button onClick={handleSaveClick} disabled={isPublishing}>\n            {isPublishing ? \"Saving...\" : \"Save\"}\n          </Button>\n        </MenuRow>\n      ) : (\n        <SignInMessage>\n          <SignInLink href=\"#\" onClick={() => appContext?.handleLogin()}>\n            Sign in\n          </SignInLink>\n          &nbsp;to save scores\n        </SignInMessage>\n      )}\n\n      {id && versions > 1 && (\n        <VersionLinks>\n          Versions:\n          {Array.from({ length: versions }, (_, i) => i + 1).map(\n            (versionNumber) => (\n              <VersionLink\n                key={versionNumber}\n                isActive={version === versionNumber}\n                onClick={() => handleVersionClick(versionNumber)}\n              >\n                {versionNumber}\n              </VersionLink>\n            ),\n          )}\n        </VersionLinks>\n      )}\n\n      {shortLink && id && versions > 0 && (\n        <div style={{ position: \"relative\" }}>\n          <ClickableLink onClick={handleCopyUrl}>\n            {window.location.origin + shortLink}\n          </ClickableLink>\n          {showToast && (\n            <ToastNotification>Copied to clipboard</ToastNotification>\n          )}\n        </div>\n      )}\n    </SavingMenuContainer>\n  );\n};\n\nexport default EditorSavingMenu;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport editorMajorLayout from \"../../../images/editor_major_layout.png\";\nimport editorMinorLayout from \"../../../images/editor_minor_layout.png\";\nimport { NoteColorLetter } from \"./EditorStyles\";\nimport { ButtonBar, KeyboardLayout, ManualContainer } from \"./ManualStyles\";\nimport { getScaleMapForMode } from \"./types\";\n\n// Detect if user is on macOS to show Option vs Alt\nconst isMac = navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0;\nconst altKey = isMac ? \"\" : \"Alt\";\n\n// Constants for common terms\nconst UNSTABLE_PITCHES = [1, 2, 3, 5, 6];\n\n// Helper for styling musical terms\nconst mt = (term: string) => <span className=\"musical-term\">{term}</span>;\n\n// MIDI note name conversion utility\nconst getNoteNameFromMidi = (midiNumber: number): string => {\n  const noteNames = [\n    \"C\",\n    \"C#\",\n    \"D\",\n    \"D#\",\n    \"E\",\n    \"F\",\n    \"F#\",\n    \"G\",\n    \"G#\",\n    \"A\",\n    \"A#\",\n    \"B\",\n  ];\n  const octave = Math.floor(midiNumber / 12) - 1;\n  const noteIndex = midiNumber % 12;\n  return `${noteNames[noteIndex]}${octave}`;\n};\n\n// Function to detect if the first key signature is minor\nconst isMinorKey = (score: string): boolean => {\n  const lines = score.split(\"\\n\");\n  for (const line of lines) {\n    const cleanLine = line.split(\"%\")[0].trim();\n    if (cleanLine.match(/^[A-G][b#]?\\s+minor$/i)) {\n      return true;\n    }\n    if (cleanLine.match(/^[A-G][b#]?\\s+major$/i)) {\n      return false;\n    }\n  }\n  return false;\n};\n\n// Helper function to decorate scale names with color and monospace\nconst decorateScale = (scaleName: string) => {\n  const scaleMap = getScaleMapForMode(scaleName.toLowerCase() as any);\n\n  // Create colored spans for each letter\n  const styledLetters = Array.from(scaleName).map((letter, index) => {\n    if (index < 5) {\n      const unstablePitch = UNSTABLE_PITCHES[index];\n      const colorIndex = scaleMap?.[unstablePitch] || 0;\n      // Use the shared styled component with proper color contrasting\n      return (\n        <NoteColorLetter\n          key={index}\n          className={`noteColor_${colorIndex}_colors`}\n        >\n          {letter}\n        </NoteColorLetter>\n      );\n    }\n    return <span key={index}>{letter}</span>;\n  });\n\n  // Wrap everything in monospace\n  return <code className=\"scale-name\">{styledLetters}</code>;\n};\n\nconst BeatMarker = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  background: gray;\n`;\n\n// Interface for backup object\ninterface BackupData {\n  code: string;\n  timestamp: number;\n}\n\ninterface NoteExampleProps {\n  beats: number;\n  style?: { width: string };\n}\n\nconst NoteExample: React.FC<NoteExampleProps> = ({ beats, style }) => {\n  return (\n    <div\n      style={{\n        height: \"4px\",\n        background: \"#ccc\",\n        borderRadius: \"4px\",\n        ...style,\n      }}\n    />\n  );\n};\n\ninterface ManualProps {\n  score: string;\n}\n\n// Add styled components for ParseMidi and MidiWriterJs displays\nconst DisplayContainer = styled.div`\n  padding: 16px;\n  background-color: #1f1f1f;\n  border-radius: 4px;\n  max-height: 600px;\n  overflow-y: auto;\n  margin-top: 10px;\n\n  h3 {\n    margin-top: 0;\n    margin-bottom: 16px;\n    color: #ddd;\n    border-bottom: 1px solid #333;\n    padding-bottom: 8px;\n  }\n\n  h4 {\n    margin-top: 20px;\n    margin-bottom: 12px;\n    color: #bbb;\n  }\n\n  .voice-notes,\n  .channel-notes {\n    margin-bottom: 24px;\n  }\n\n  .notes-grid,\n  .events-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n    gap: 12px;\n  }\n\n  .note-item,\n  .event-item {\n    padding: 8px;\n    background-color: #2a2a2a;\n    border-radius: 4px;\n    border-left: 3px solid #444;\n    font-family: monospace;\n    font-size: 13px;\n    word-break: break-word;\n  }\n\n  .note-under-cursor {\n    border-left-color: #4a8cff;\n    background-color: #2a3a4a;\n  }\n\n  .has-match {\n    border-left-color: #4caf50;\n  }\n\n  .no-match {\n    border-left-color: #ff5252;\n    opacity: 0.7;\n  }\n\n  .source-location {\n    color: #4a8cff;\n    margin-top: 5px;\n    font-style: italic;\n  }\n`;\n\n// Define the interfaces for the display components\ninterface ParseMidiDisplayProps {\n  matchedParsingResult: any;\n}\n\ninterface MidiWriterJsDisplayProps {\n  extractedMidiNotes: any;\n}\n\nconst ParseMidiDisplay: React.FC<ParseMidiDisplayProps> = ({\n  matchedParsingResult,\n}) => {\n  if (!matchedParsingResult || !matchedParsingResult.notes) return null;\n\n  // Function to format note objects\n  const formatNote = (note: any) => {\n    // Check if note or essential properties are missing\n    if (!note || !note.note) {\n      return (\n        <div className=\"parsed-note unmatched\" key={`invalid-${Math.random()}`}>\n          Invalid note data\n        </div>\n      );\n    }\n\n    // Safely get MIDI note name\n    const baseName =\n      note.note.midiNumber !== undefined\n        ? getNoteNameFromMidi(note.note.midiNumber)\n        : \"Unknown\";\n\n    // Safely get timing information with fallbacks\n    const startTick =\n      note.tickSpan && Array.isArray(note.tickSpan) && note.tickSpan.length > 0\n        ? note.tickSpan[0]\n        : note.matchingMidiWriterNote?.startTick || \"?\";\n    const endTick =\n      note.tickSpan && Array.isArray(note.tickSpan) && note.tickSpan.length > 1\n        ? note.tickSpan[1]\n        : startTick !== \"?\" && note.matchingMidiWriterNote?.duration\n        ? startTick + note.matchingMidiWriterNote.duration\n        : \"?\";\n    const durationTicks =\n      startTick !== \"?\" && endTick !== \"?\" ? endTick - startTick : \"?\";\n\n    // Get span information for seconds display\n    const startSec =\n      note.span && Array.isArray(note.span) && note.span.length > 0\n        ? note.span[0].toFixed(2)\n        : \"?\";\n    const endSec =\n      note.span && Array.isArray(note.span) && note.span.length > 1\n        ? note.span[1].toFixed(2)\n        : \"?\";\n    const durationSec =\n      startSec !== \"?\" && endSec !== \"?\"\n        ? (parseFloat(endSec) - parseFloat(startSec)).toFixed(2)\n        : \"?\";\n\n    return (\n      <div\n        className={`parsed-note ${note.hasMatch ? \"matched\" : \"unmatched\"}`}\n        key={`${note.note.midiNumber || \"unknown\"}-${\n          startTick || Math.random()\n        }`}\n      >\n        <div>\n          <strong>{baseName}</strong> (\n          {note.note.midiNumber !== undefined ? note.note.midiNumber : \"?\"})\n        </div>\n        <div>\n          <span className=\"note-timing-info\">\n            <strong>Ticks:</strong> Start: {startTick}, End: {endTick},\n            Duration: {durationTicks}\n          </span>\n        </div>\n        <div>\n          <span className=\"note-timing-info\">\n            <strong>Seconds:</strong> Start: {startSec}s, End: {endSec}s,\n            Duration: {durationSec}s\n          </span>\n        </div>\n        {note.matchingMidiWriterNote && (\n          <div className=\"match-info\">\n            Matched with MidiWriter note\n            {note.matchingMidiWriterNote.sourceLocation && (\n              <div className=\"source-location\">\n                Source: Line {note.matchingMidiWriterNote.sourceLocation.row},\n                Col {note.matchingMidiWriterNote.sourceLocation.col}(\n                {note.matchingMidiWriterNote.sourceLocation.command})\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <DisplayContainer className=\"parse-midi-display\">\n      <h3>ParseMidi Notes</h3>\n      {matchedParsingResult.notes.map(\n        (voiceNotes: any[], voiceIndex: number) => {\n          // Check if voiceNotes is actually an array\n          if (!Array.isArray(voiceNotes)) {\n            return (\n              <div key={`voice-${voiceIndex}`} className=\"voice-notes\">\n                <h4>Voice {voiceIndex}</h4>\n                <div>Invalid voice data</div>\n              </div>\n            );\n          }\n\n          return (\n            <div key={`voice-${voiceIndex}`} className=\"voice-notes\">\n              <h4>Voice {voiceIndex}</h4>\n              <div className=\"notes-grid\">{voiceNotes.map(formatNote)}</div>\n            </div>\n          );\n        },\n      )}\n    </DisplayContainer>\n  );\n};\n\nconst MidiWriterJsDisplay: React.FC<MidiWriterJsDisplayProps> = ({\n  extractedMidiNotes,\n}) => {\n  if (!extractedMidiNotes) return null;\n\n  // Extract the data we need\n  const { eventsByChannel, trackNames } = extractedMidiNotes || {};\n\n  // Check if eventsByChannel exists\n  if (!eventsByChannel || typeof eventsByChannel.keys !== \"function\") {\n    return <div>No valid MIDI event data available</div>;\n  }\n\n  // Get all channel numbers and sort them\n  const channels = Array.from(eventsByChannel.keys()).sort();\n\n  // Find the earliest start tick to help with relative positioning\n  let earliestTick = Infinity;\n  channels.forEach((channel) => {\n    const events = eventsByChannel.get(channel) || [];\n    events.forEach((event: any) => {\n      if (\n        event &&\n        typeof event.startTick === \"number\" &&\n        event.startTick < earliestTick\n      ) {\n        earliestTick = event.startTick;\n      }\n    });\n  });\n\n  return (\n    <DisplayContainer className=\"midi-writer-display\">\n      <h3>MidiWriter.js Events</h3>\n      {channels.length === 0 ? (\n        <div>No channel data available</div>\n      ) : (\n        channels.map((channel: number) => {\n          const events = eventsByChannel.get(channel) || [];\n          const trackName =\n            trackNames && trackNames.get\n              ? trackNames.get(channel) || `Channel ${channel}`\n              : `Channel ${channel}`;\n\n          return (\n            <div key={`channel-${channel}`} className=\"channel-events\">\n              <h4>{trackName}</h4>\n              {events.length === 0 ? (\n                <div>No events in this channel</div>\n              ) : (\n                <table className=\"events-table\">\n                  <thead>\n                    <tr>\n                      <th>Start Tick</th>\n                      <th>Pitches</th>\n                      <th>Duration</th>\n                      <th>Velocity</th>\n                      <th>Source Location</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {events.map((event: any, idx: number) => {\n                      // Check if event has required properties\n                      if (!event) {\n                        return (\n                          <tr key={idx}>\n                            <td colSpan={5}>Invalid event data</td>\n                          </tr>\n                        );\n                      }\n\n                      return (\n                        <tr key={idx}>\n                          <td>\n                            {event.startTick !== undefined\n                              ? event.startTick\n                              : \"N/A\"}\n                          </td>\n                          <td>\n                            {event.pitches && Array.isArray(event.pitches)\n                              ? event.pitches\n                                  .map((p: number) => {\n                                    const noteName =\n                                      typeof p === \"number\"\n                                        ? getNoteNameFromMidi(p)\n                                        : \"Unknown\";\n                                    return `${noteName} (${p})`;\n                                  })\n                                  .join(\", \")\n                              : \"No pitch data\"}\n                          </td>\n                          <td>\n                            {event.duration !== undefined\n                              ? event.duration\n                              : \"N/A\"}\n                          </td>\n                          <td>\n                            {event.velocity !== undefined\n                              ? event.velocity\n                              : \"N/A\"}\n                          </td>\n                          <td>\n                            {event.sourceLocation ? (\n                              <div className=\"source-location\">\n                                Line {event.sourceLocation.row}, Col{\" \"}\n                                {event.sourceLocation.col}(\n                                {event.sourceLocation.command})\n                              </div>\n                            ) : (\n                              \"No source info\"\n                            )}\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              )}\n            </div>\n          );\n        })\n      )}\n    </DisplayContainer>\n  );\n};\n\nconst Manual: React.FC<ManualProps> = ({ score }) => {\n  return (\n    <ManualContainer>\n      <KeyboardLayout>\n        <ButtonBar>\n          <div className=\"left-section\">\n            {/* Left section content can be empty now */}\n          </div>\n          <div className=\"right-section\">\n            {/* Right section content can be empty now */}\n          </div>\n        </ButtonBar>\n\n        <div className=\"top-section\">\n          <div className=\"left-column\">\n            <img\n              src={isMinorKey(score) ? editorMinorLayout : editorMajorLayout}\n              alt={`${\n                isMinorKey(score) ? \"Minor\" : \"Major\"\n              } Scale Keyboard Layout`}\n              className=\"keyboard-layout-image\"\n            />\n            <div className=\"image-caption\">\n              Prepend note pitch with b and # to lower/raise by semitone, eg.\n              b2, #r\n            </div>\n            <div style={{ marginTop: \"12px\", color: \"#aaa\", padding: \"0 4px\" }}>\n              <code>Shift+Space</code> Play/Pause while in editor\n            </div>\n            <div style={{ marginTop: \"8px\", color: \"#aaa\", padding: \"0 4px\" }}>\n              <code>Shift+{altKey}+Space</code> Play from current target measure\n            </div>\n          </div>\n          <div className=\"right-column\">\n            <div className=\"section\">\n              <div className=\"grid\">\n                <div className=\"note-col\">\n                  <NoteExample beats={4} style={{ width: \"120px\" }} />\n                </div>\n                <span>\n                  <code>+</code> 4 beats (whole note)\n                </span>\n\n                <div className=\"note-col\">\n                  <NoteExample beats={3} style={{ width: \"90px\" }} />\n                </div>\n                <span>\n                  <code>_.</code> 2  3/2 = 3 beats (<code>.</code> elongates by\n                  half)\n                </span>\n\n                <div className=\"note-col\">\n                  <NoteExample beats={2} style={{ width: \"60px\" }} />\n                </div>\n                <span>\n                  <code>_</code> 2 beats (half note)\n                </span>\n\n                <div className=\"note-col\">\n                  <NoteExample beats={1.33} style={{ width: \"40px\" }} />\n                </div>\n                <span>\n                  <code>_:</code> 2    1.33 beats (for triplets,{\" \"}\n                  <code>:</code> reduces by 1/3)\n                </span>\n\n                <div className=\"note-col\">\n                  <NoteExample beats={1} style={{ width: \"30px\" }} />\n                </div>\n                <span>\n                  <code>,</code> 1 beat (quarter note)\n                </span>\n\n                <div className=\"note-col\">\n                  <NoteExample beats={0.5} style={{ width: \"15px\" }} />\n                </div>\n                <span>\n                  <code>-</code>  beat (eighth note)\n                </span>\n\n                <div className=\"note-col\">\n                  <NoteExample beats={0.25} style={{ width: \"7.5px\" }} />\n                </div>\n                <span>\n                  <code>=</code>  beat (sixteenth note)\n                </span>\n\n                <div className=\"note-col\">\n                  <NoteExample beats={0.125} style={{ width: \"3.75px\" }} />\n                </div>\n                <span>\n                  <code>'</code>  beat (thirty-second note)\n                </span>\n\n                <div className=\"note-col\">\n                  <NoteExample beats={0.0625} style={{ width: \"1.875px\" }} />\n                </div>\n                <span>\n                  <code>\"</code> 1/16 beat (sixty-fourth note)\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"full-width-section\">\n          <div className=\"section\">\n            <h3>Insert/copy</h3>\n            <div className=\"grid\">\n              <code>2b2 i q,.x-eti,</code>\n              <span>\n                Insert at measure 2 beat 2: 1+1/2 beats (,.) of scale degree one\n                (tonic) in middle octave, then a rest (x) of 1/2 beats, then a\n                beat of a chord 3-5-1, where 1 is in upper octave. Several note\n                pitches under one duration is a chord\n              </span>\n              <code>5&nbsp;&nbsp;&nbsp;c 1-4&nbsp;&nbsp;&nbsp;0 -4 x 7</code>\n              <span>\n                Copy measures 1..4 to measure 5 several times. 0 means \"verbatim\n                copy, don't shift note pitches\", -4 means \"shift down 4 scale\n                degrees\", x means \"rest for the duration of slice\", 7 means\n                \"shift up 7 scale degrees, i.e. one octave\"\n              </span>\n              <code>2&nbsp;&nbsp;&nbsp;c 1&nbsp;&nbsp;&nbsp;0 4h 4e</code>\n              <span>\n                Mode modifiers (after shift numbers): {mt(\"h\")} = harmonic\n                minor,\n                {mt(\"e\")} = melodic minor,\n                {mt(\"M\")} = major,\n                {mt(\"m\")} = natural minor. These change the mode while\n                preserving the tonic.\n              </span>\n              <code>2b2 c 1b2-1b4</code>\n              <span>\n                Copy two beats (measure 1 beats 2 to 3), no target defaults to\n                \"0\" (one verbatim copy)\n              </span>\n              <code>9&nbsp;&nbsp;&nbsp;ac 1-8</code>\n              <span>All Copy: copy notes in all channels</span>\n              <code>1&nbsp;&nbsp;&nbsp;c 1&nbsp;&nbsp;&nbsp;2&5</code>\n              <span>\n                Layer multiple shifts at same position - for doubling in\n                thirds/sixths etc.\n              </span>\n            </div>\n          </div>\n          <div className=\"section\">\n            <h3>Other commands</h3>\n            <div className=\"grid\">\n              <code>C major, Ab minor</code>\n              <span>\n                Key signature. Modes:\n                <ul>\n                  <li>{decorateScale(\"lydian\")}</li>\n                  <li>{decorateScale(\"major\")} (M)</li>\n                  <li>{decorateScale(\"mixolydian\")}</li>\n                  <li>{decorateScale(\"dorian\")}</li>\n                  <li>{decorateScale(\"minor\")} (m)</li>\n                  <li>{decorateScale(\"phrygian\")}</li>\n                  <li>{decorateScale(\"harmonic_minor\")} (h)</li>\n                  <li>{decorateScale(\"melodic_minor\")} (e)</li>\n                </ul>\n              </span>\n              <code>3/4</code> <span>Time signature</span>\n              <code>bpm 120</code> <span>Tempo</span>\n              <code>lh</code>{\" \"}\n              <span>Left hand (ch1, velocity 70), octave range 2-4</span>\n              <code>rh</code>{\" \"}\n              <span>Right hand (ch0, velocity 100), octave range 4-6</span>\n              <code>ch2, ch3, ...</code>\n              <span>Channels 2 to 15 (velocity 100), octave range 4-6</span>\n              <code>rh 3</code>{\" \"}\n              <span>\n                Change octave range to 3-5, can apply to lh, rh or ch2..15\n              </span>\n              <code>% line</code>{\" \"}\n              <span>\n                Comment using %. Select several lines and press Cmd+/ (Ctrl+/)\n                to toggle\n              </span>\n            </div>\n          </div>\n\n          <div className=\"section\">\n            <h3>Analysis commands</h3>\n            <div className=\"grid\">\n              <code>phrases 1+1 18+2 36-1</code>\n              <span>\n                Hypermeter adjustments: moves white bar of four-measure phrase\n                defaults left or right. <code>1+1</code> is handy for anacrusis,\n                <code>18+2</code> moves the phrase vertical bar two measures to\n                the right from measure 18 (to measure 20), <code>36-1</code>{\" \"}\n                moves the bar from measure 36 one measure to the left (to\n                measure 35).\n              </span>\n            </div>\n          </div>\n        </div>\n      </KeyboardLayout>\n\n      {/* Add styles for the manual component */}\n      <style>\n        {`\n          /* Manual layout styles */\n          .top-section {\n            display: flex;\n            gap: 20px;\n            margin-bottom: 20px;\n          }\n          \n          .left-column {\n            flex: 1;\n          }\n          \n          .right-column {\n            flex: 2;\n          }\n          \n          .image-caption {\n            font-size: 12px;\n            color: #888;\n            margin-top: 8px;\n          }\n          \n          .keyboard-layout-image {\n            width: 100%;\n            height: auto;\n            object-fit: contain;\n            max-width: 250px;\n            display: block;\n            margin-bottom: 10px;\n            border-radius: 4px;\n          }\n          \n          .section {\n            margin-bottom: 20px;\n          }\n          \n          .section h3 {\n            margin-top: 16px;\n            margin-bottom: 12px;\n            color: #ddd;\n          }\n          \n          .grid {\n            display: grid;\n            grid-template-columns: auto 1fr;\n            gap: 8px 16px;\n            align-items: center;\n          }\n          \n          .note-col {\n            display: flex;\n            align-items: center;\n            height: 20px;\n          }\n          \n          .full-width-section {\n            margin-top: 20px;\n          }\n          \n          .musical-term {\n            font-style: italic;\n            color: #ddd;\n          }\n        `}\n      </style>\n    </ManualContainer>\n  );\n};\n\nexport { MidiWriterJsDisplay, ParseMidiDisplay };\nexport default Manual;\n","module.exports = __webpack_public_path__ + \"static/media/editor_major_layout.75188da2.png\";","module.exports = __webpack_public_path__ + \"static/media/editor_minor_layout.7f4b832e.png\";","export const scores: { [key: string]: string } = {\n  new: `% Hello, world!\n% This is a sample code: feel free to erase it or comment it out.\n% Currently there's a bug: notes only show up if there are\n% at least two measures of music written.\n\nC major\n4/4\nbpm 120\n\nlh  % notes below are put in the left hand, which sounds softer than the right hand\n1 i q,. 135,. 135,  % each note or chord is pitch(es)+duration\n2 c 1 3 4 0  % this copies notes from measure 1 applying scale-wise shifts to 3, 4 and 0 scale degrees\n\nrh\n1 i x-q-w,e-r,t,\n2 c 1 1 2  % this copies notes only in the right hand\n4 i x,1_.\n\n5 ac 1-4  % this copies notes in both hands`,\n  schubert_d365_09: `Ab major\n3/4\nbpm 180\nsections 2 6\nphrases 1+1\n\nlh 3\n2   i g,wtu,wtu,\n3   c 2     0 x x 0\n7   c 6-6b3\n7b3 i rtu,\n18  i g,rtu,rtu,\n19  c 18    0 x x 0 0\n\n4   i g,eti,eti,\n5   c 4\n8   i q,\n8b2 c 4b2\n9   i q,eti-\n20  c 8     0 0 x x 0\n25  c 9\n\n\nrh 5\n1b2 i x-k'l'k=j-k-\n2   i w,f,f,\n3   i f_h-g-\n4   i f,d,g-k-g,.\n5   c 1\n6   i e-w-f,f,\n7   i f,.r-e-w-\n8   i w,q,d-g-d,.\n\n17b2 i x-g-bg-g-\n18   i h,s,s,\n19   i w,.q-j-h-\n20   i g,e,d,q,.\n21b2 c 17b2-20b3 7\n24b3 i e-t-i,.\n\n\n9    ac 1-9\n25b2 ac 17b2-25\n`,\n  \"wima.e480-schubert_de.-tanz-d.365.25\": `3/4\nE major\nbpm 160\nsections 2 6\n\nlh\n2   i g,rtu,rtu, q,eti,eti,\n4   c 2-3 0 0\n8   c 2\n9   i qeti_\n18  c 2-9\n\n\nrh\n1b3  i e,\n2    i j-y-r-w-\n3    i q-i-t-e-\n4    i t-f-s-u-\n5    i q_\n5    c 1-5\n\n17b3 i e,\n18   i y-j-w-r-\n19   i a-q-e-t-\n20   i s-t-u-o-\n21   i d,\n21   c 17-20\n25   i a,\n\n\nch2\n2b3 i g'h'g-.\n3   c 2     0 2 x 2 3 2\n18  c 2     11 12 14\n22  c 18-21 0 0 0 \n\n\n9    ac 1-9\n25b3 ac 17b3-25\n`,\n  \"wima.1124-schubert_de.-tanz-d.365.26\": `3/4\nE major\nbpm 180\nsections 2 6\n\nlh\n2   i g,rtu,rtu,\n3   i q,eti,eti,\n4   c 2       0 x 0 x 0\n5   c 3       0 x 0\n9   i qeti_\n18  c 2-9\n\n\nrh\n1b3 i g=t-. \n2   i bw=w-.g-,e=r-.\n3   i j=k-.g,e'r'e-.\n4   i j-w-r-y-o-u-\n5   i t=g-.d-\n5   c 1-4\n9   i a_\n\n17b3 i t,\n18   i   f-h-l-j-g-\n19   i   q-e-y-t-e-\n20   c 18      7\n21   i a=k=g-d-a-t-\n22   c 18-20b3\n24b3 i t=g-.a,\n\n\n9b3  ac 1b3-9\n25b3 ac 17b3-25`,\n  \"wima.4be9-schubert_de.-tanz-d.365.28\": `A major\nbpm 160\n3/4\nsections 2 6\n\nlh\n2 i x,et,et, x,rt,rt, x,et,et, x,rt,rt, x,wrt,wrt, x,et,e, x,wr,wr, qe,\n2 i q_.      w_.      q_.      w_.      g_.        q_.     g_.      \n18 c 6    0 0 x x 0\n20 c 4        0 0 x 0 \n24 c 8-9\n\nrh 4\n8b2  i j-:w-:r-:\n18   c 8        2 9 x x 9 8 0\n20b2 i e-:t-:i-:\n21   c 20 7\n17b3 i q, j,x,j-x- x_j-x- q,x,q-x- x_a-x- u,x,u-x- t,x,t-x- g,x,g,q,\n\n1b3 i t'y't-. q,t-a-q, j_\n3   c 1-3\n5b3 i t'y't-. j,r-s-j, q,e-a-g_x,g,q,\n\n\n9    ac 1-9\n25b2 ac 17b2-25\n`,\n  \"idea-22---gibran-alcocer\": `3/4\nC minor\n\nlh\n99 i jwr_.\n100 c 99 0 0\n\n1   i h,yad,\n1b3 c 1b2-1b3 0 0 0 0\n3   i q,tip,\n3b3 c 3b2-3b3 0 0 0 0\n5   c 1-4\n\n9   c 1 -2 x x 0\n10  c 3 0 -1\n13  c 9-12\n17  c 16b2-16b3 0 0 0\n18  i yip_.\n\n19  c 9 2 0\n21  c 10-11\n23  c 19-22 0 0 0\n35  c 34b2-34b3 0 0 0\n36  i ruo_.\n\n37  c 19\n38  c 19b1-19b2 7\n38b2 c 37b2-37b3 0 0\n39  c 21\n40  i t,\n40b2 c 39b2-39b3 0 0\n41  c 37-40 0 0\n49  c 37-39\n52  i t_.\n\n53  c 9-18\n\n64  c 19-35\n\n81  c 19-34`,\n  \"idea-n.10---gibran-alcocer\": `G minor\nbpm 170\n3/4\nsections 2 6 10 14 18 22 26\nphrases 1+1 18+2 36+2 54+2 72+2 90+2 116+2\n\n\nlh 2\n2 i r,fh,fh, a,fh,fh,\n4 i q,dg,dg, a,dg,dg,\n6 i j,sg,sg, j,sg,sg,\n8 c 4-5 -2\n\n10 c 2-8\n17 i y,af,af, y,gd,dg-x-dg_.\n\n74 c 2-3\n76 i j,sf,sf, u,sf,sf,\n78 i q,dg,dg, e,dg,dg,\n\n80 c 8-9\n82 c 74-79\n88 ac 16-19\n\n92 c 2-9 0 0\n\n108 i afh+. adg+. usf+.\n\n114 i hqe+.\n\n20 c 2-19 0 0 0\n\n\nrh 4\n16 i q_.w_.e+.\n34 c 16-19 7\n52 c 16-19 7\n70 c 16-17 7\n72 i d+x,a-d-\n88 c 16-19 7\n\n1 i x,.q-q-e-r-e-r_.\n3 i x,.q-q-w-e-w-e_. \n5 i x,.q-q-e-w_x-q-q,q,.j-q+\n9 i x,.q-q-e-r-e-r_\n11 i x-t-r-e-q-w-e-w-e_.\n13 i x,e-e-e-r-w_x-q-w-q_j-\n\n38 i y_.x-t=y= t-r-e-r-t+x,e, w_t+ q_.x-q-w-e-r-t-\n46 c 38-40\n49b3 i t,u_s_d_\n\n74 i f_.x-g-f-d-s-a-s+s-s-s-s-d_.s_.a+x-a-a-d-\n82 c 74-77\n86 i d_.f_g,\n\n20 i f-a-y- f-a-y- f-a-y-\n22 i d-s-t- d-s-t- d-s-t- d-s-a-\n24 i s-u-t- s-u-t- s-u-t- \n28 c 20-25\n33b2 i x-u-s-g-\n\n92 c 20-33\n\n21b2 i x-f-d-s-\n25b2 i x-s-a-u-\n29b2 i x-g-d-s-\n\n56 c 20-33\n108 c 56-61\n\n26 i a+x-t-a-s-\n\n62 i a_. x-s=d=s-a-s-d-\n98 c 62-63\n\nch2 4\n93b2 i x-f=g=f-d-\n97 c 93 -3\n101 c 93\n\n106 i a+.\n114 i a_.s_.d+.\n`,\n  \"idea-20---gibran-alcocer\": `C minor\n3/4\nbpm 170\n\nphrases 9+2 43+2 69+2\nsections 3 7 11 15 17 21 25\n\nlh\n1 i h,yi,yi,e,yi,yi\n3 i f,yi,yi,r,yi,yi,\n5 c 1-2 2 1\n9 i t#u+.\n\n11 c 1-2\n13 c 5-6\n15 c 7-8\n17 c 3-4\n\nrh\n1 i q+x,q,r+t-y-t--r-e+r,e,w_.e_.r+.\n11 i e-q-h- r-q-h- t-q-h- u-q-h-\n13 i e-q-g- r-q-g- t-q-g- u-q-g-\n15 i w-j-f-w-j-f-w-j-e-j-w-j-q-h-f-q-h-f-\n18 c 17\n\n19 ac 11-18\n\nlh\n27 c 1-4\n31 i g,us,us,t,us,us, g,#us,#us, t,#us,#us,\n\nrh\n27 i t-e-q- y-e-q-\n28 c 27 0 0 0\n31 i t-w-j-t-w-j- \n32 c 31\n33 i t-w-#j-t-w-#j-\n34 c 33\n42 i tw#j_.\n\n35 ac 27-33\n\nlh\n42 c 34 0 0 0\n45 c 11-14 0 x 0\n49 c 31-34\n57 c 39-40\n59 i usg+.\n\n61 ac 35-44\n87 ac 11-18\n95 ac 23-42`,\n  \"idea-15---gibran-alcocer\": `3/4\nbpm 180\nDb minor\n\nphrases 1+1 18+2 36+2 54+2 72+2 90+2 108+2\nsections 2 6 10 14 18 22\n\nlh\n2 i fr,ry,ry,q,ry,ry,\n4 c 2-3 2 4 3\n10 c 2-9\n18 i uo+.\n20 c 2-19 0 0 0\n74 c 2-7\n80 c 78-79 2\n82 c 10-19\n92 i h-d-a-h-d-a-\n93 c 92 0 0 0\n96 i g-d-a-g-d-a- g-d-a-g-d-a- f-s-u-f-s-u- g-s-u-g-s-u-\n100 c 92-99\n\nlh 4\n108 i yh_.tg_.\n\nrh\n16 i w_.e_.y_.t_.\n38 c 2-19 0 x 0\n1 i x,x-k-k-j-h+ x-q-q-w-e+ x,.q-t,t,t,t,e,e-w+ \n9 i x,x-w-e-w-j+x-j-j-k-q_.t,. x-r-.r=t_e_r_\n\n20 i y-e-q- y-e-q- u-e-q- y-e-q-\n22 c 20-21\n24 i t-e-q- t-e-q-\n25 c 21\n26 c 24 -1\n27 c 22 -1\n28 c 20-27\n36 i y_.t_.\n56 c 20-37\n\n38 i q_.y_t,\n40 c 38-39\n42 i e_e,e_r,w_w,w,e,w,h_.\n47 c 39-43\n92 c 38-55 7\n\n74 i e,q,r,q,t,q\n76 c 74-75 \n86 i e,q,r,q,t,e,\n78b2 i u,u,u,y,t-r,x-e,.\n80b3 i x-e-y-t-r,e,q_\n82b3 i x-e-y-t-r,e-.e=r_\n84b3 i x-e-y-t-r,e,\n`,\n  \"der-flohwalzer\": `4/4\nGb major\nlh 3\n60 i a_\nrh 3\n1b4 i y-t-\n2 c 1 0 0 x 0 \n6 c 2-5\n21 c 1\n22 c 18-21\n42 c 2-17\n`,\n\n  Gravity_Falls_Opening: `D minor\nlh\nbpm 170\nsections 2 4 6\n\n1 i a+d+g+g_g_\n1 c 1-4 7\n5 i a-g-q-g-e-q-g-q-\n\n6 c 5 0 2 2 5 5\n11 c 5-5b4 6\n11b4 i r-j-#j-w-t-w-#u-t-w-g-\n13 i a-g-q-g-\n13b3 c 13-13b3 0 0 x 2 2 2 2 5 5 5 5 6 x 4 4 0 x 2 2 5 5 6 6 4 4\n14b3 i a-q-s-q-\n\nrh\n5 i d,d,:d-:\n5b3 c 5-5b3 2 5 x x x x x 5 4 2\n\n37 i q,e-:q-:x-: q,:q-:\n37b4 c 37b2-37b3\n38 c 37-37b3 1 1 2 2 -2 -1\n41 c 37-40\n\nch2\n21b4 i x,:g-:\n22 c 21 0 0 0 0 0 0 0\n29 c 21-28 0 0\n36b3 c 21-28`,\n  \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\": `C minor\n3/4\n\nlh 2\n1 i q,x_g,x_\n3 c 1-2 0 0 0 0\n11 i w,x_g,x_\n13 c 11-12 0 0 0\n\n\n\n1 c 1-77 7\n221 i aq\n\n\nrh 4\n5 i t_.e_w,q+q,w,e,q,e,t_y,t_.r_.\n13 c 5-6 -1 x x x 0 x -1\n\nch2 3\n1b2 i qet,\n1b3 c 1b2-1b3\n2 c 1 0 0 0\n\nEb major\nrh 4 \n79 i q_.q_.q,j,h,g,\n95 c 79-82 2 1`,\n\n  chopsticks: `C major\nbpm 184\n3/4\n\nlh\n1 i t,us,us,\n3 i t,da,da,\n4 c 3\n2 c 1 0 x x 0 0 -4 -4\n9 c 1-7\n16 i q,\n17 c 5-8 0 0 0 \n29 c 13-16\n49 i t,usf,usf,\n50 c 49\n51 i q,tad,tad,\n52 c 51\n53 c 49-52 0 0 \n61 c 49-51\n64 i q,\n33 c 17-32 0 x 0\n\nrh\n16b3 i d,s,x,a,u,x,y,t,x+t,r,\n22b3 i r,e,\n16 c 16-23 -2\n24 c 16-21\n48 c 16-32\n51b2 i t=y-:u=i-:s=d-:f=g\n\n\n`,\n  \"the-two-happy-coons---theodore-h.-northrup-1891\": `G major\n\nrh\n3 i j,q,w,e\n3 c 3 2&5\n\n\n\nlh 2\n5 i q,tad,q,yaf,\n6 c 5\n7 c 5-5b3\n\n\nC major\n93 i a\n\n\n`,\n\n  \"passacaglia---handel-halvorsen\": `A minor\nlh\n1 i a-q-t-e-a-e-t-e-\n2 c 1 0 0 3 -1 2 -2 -4 -3 0\n11 c 3-10 0 0 0 0 0 0 0\n74 i qa+\nrh\n3 i d-e-w-e-q-e-j-e-h-e-g-e-f-e-d-e-\n5 c 3-4 -1 -2\n19 c 3-8 7`,\n  \"boogie-woogie-jump---pete-johnson\": `F major\nbpm 200\nF major\n\nlh\n\n\n13 i a-q-d-e-g-t-d-e-\n14 c 13 3 0 0 3 3 0 0 4 4 0 0\n5 c 17-24\n25 c 13-23\n41 c 5-35\n77 c 41-60\n97 c 85-96 0 0 0\n133 c 13-23\n\n\nrh\n9b3 i x-a-s-bd- a-s-u-i-t-bt-r-be- e-t-y-i-by-r-w-be- eti-\n25 c 1-12 0 0 0 0 0 0 0 0 0 0\n3 i bj-:j-:k-:\n3b2 c 3-3b2 0 0 0 0 0 0 0 0 0 0 0\n13 i  etyi- x_  etyi,\n14 i betyi- x_ betyi,\n15 c 13 0 0 x x 0 0 \n17 c 14 0 0\n21 i rtuo-\n22 c 5-5b3\n22b3 i r-:bt-:t-: be-:e-:r-:\n23 i q-bey-et-q-bebt-g-wr-g-qe-g-\n6 c 22-23\n  \n\n145 ac 1-8\n  \n  `,\n  \"papers-please\": `D minor\n\nsections 4 7 9 11 14 16 18\nphrases 5-2 15-2 49-2 67-2\n\nlh 2\n1 i qa, x, gt, x, \n2 c 1 0 0 0 0 0 2 2 2 2\n11 c 1-10\n21 c 1-1b3 0 -3 0 -3 1 -3 1 -3 2 -3 2 -3 -2 -4 -1 -3\n29 c 21-28\n37 c 1-1b2 -7 0 -7 0 \n38 c 37-37b3 1 1 2 2 -2 -1\n41 c 37-40\n47 c 37-44 0 0\n63 c 1-2\n65 i qa+.\n\nrh\n5 i d,d,:d-:\n5b3 c 5-5b3 2 5 x x x x x 5 4 2\n\n37 i q,e-:q-:x-: q,:q-:\n37b4 c 37b2-37b3\n38 c 37-37b3 1 1 2 2 -2 -1\n41 c 37-40\n\nch2\n21b4 i x,:g-:\n22 c 21 0 0 0 0 0 0 0\n29 c 21-28 0 0\n36b3 c 21-28`,\n};\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { convertSourceToVersions } from \"./sourceConverter\";\n\nconst ConverterContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n\nconst Title = styled.h1`\n  font-size: 24px;\n  margin-bottom: 20px;\n  color: #fff;\n`;\n\nconst TextareasContainer = styled.div`\n  display: flex;\n  gap: 20px;\n  height: 70vh;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst TextareaColumn = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Label = styled.label`\n  margin-bottom: 8px;\n  font-size: 16px;\n  color: #fff;\n`;\n\nconst StyledTextarea = styled.textarea`\n  flex: 1;\n  padding: 12px;\n  font-family: monospace;\n  font-size: 14px;\n  line-height: 1.5;\n  background-color: #1e1e1e;\n  color: #e0e0e0;\n  border: 1px solid #444;\n  border-radius: 4px;\n  resize: none;\n`;\n\nconst ButtonsContainer = styled.div`\n  display: flex;\n  gap: 10px;\n  margin-top: 20px;\n`;\n\nconst Button = styled.button`\n  padding: 8px 16px;\n  background-color: #3a3a3a;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n\n  &:hover {\n    background-color: #4a4a4a;\n  }\n`;\n\n// Helper function to convert source text without modifying a document\nconst convertSourceText = (source: string): string => {\n  // Create a temporary document object\n  const tempDoc: { source: string; versions: string[] } = {\n    source,\n    versions: [],\n  };\n\n  // Convert the source\n  convertSourceToVersions(tempDoc);\n\n  // Return the first version (the converted text)\n  return tempDoc.versions[0] || \"\";\n};\n\nconst Converter: React.FC = () => {\n  const [inputText, setInputText] = useState(\"\");\n  const [outputText, setOutputText] = useState(\"\");\n\n  // Convert input text whenever it changes\n  useEffect(() => {\n    if (inputText) {\n      setOutputText(convertSourceText(inputText));\n    } else {\n      setOutputText(\"\");\n    }\n  }, [inputText]);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setInputText(e.target.value);\n  };\n\n  const handleClearClick = () => {\n    setInputText(\"\");\n    setOutputText(\"\");\n  };\n\n  const handleCopyClick = () => {\n    if (outputText) {\n      navigator.clipboard\n        .writeText(outputText)\n        .then(() => {\n          alert(\"Converted text copied to clipboard!\");\n        })\n        .catch((err) => {\n          console.error(\"Failed to copy text: \", err);\n        });\n    }\n  };\n\n  return (\n    <ConverterContainer>\n      <Title>Notation Converter</Title>\n      <TextareasContainer>\n        <TextareaColumn>\n          <Label>Old Notation (Input)</Label>\n          <StyledTextarea\n            value={inputText}\n            onChange={handleInputChange}\n            placeholder=\"Paste your old notation here...\"\n          />\n        </TextareaColumn>\n\n        <TextareaColumn>\n          <Label>New Notation (Output)</Label>\n          <StyledTextarea\n            value={outputText}\n            readOnly\n            placeholder=\"Converted notation will appear here...\"\n          />\n        </TextareaColumn>\n      </TextareasContainer>\n\n      <ButtonsContainer>\n        <Button onClick={handleClearClick}>Clear</Button>\n        <Button onClick={handleCopyClick} disabled={!outputText}>\n          Copy to Clipboard\n        </Button>\n      </ButtonsContainer>\n    </ConverterContainer>\n  );\n};\n\nexport default Converter;\n","import { formatDistanceToNow } from \"date-fns\";\nimport {\n  collection,\n  getDocs,\n  getFirestore,\n  query,\n  where,\n} from \"firebase/firestore/lite\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { FirestoreEditDocument } from \"../../../types/firestore\";\nimport { AppContext } from \"../../AppContext\";\nimport { beautifySlug } from \"../corpora/utils\";\n\nexport const StyledButton = styled.button`\n  padding: 15px 30px;\n  font-size: 18px;\n  background: black;\n  color: white;\n  border: 1px solid white;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background 0.2s;\n\n  &:hover {\n    background: #444;\n  }\n`;\n\n// Link version of the same button\nconst StyledButtonLink = styled(Link)`\n  padding: 15px 30px;\n  font-size: 18px;\n  background: black;\n  color: white;\n  border: 1px solid white;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background 0.2s;\n  text-decoration: none;\n  display: inline-block;\n\n  &:hover {\n    background: #444;\n    color: white;\n    text-decoration: none;\n  }\n`;\n\nconst LandingContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  padding: 50px 20px;\n  margin-top: 30px;\n  min-height: calc(100vh - 30px);\n  box-sizing: border-box;\n`;\n\n// Two column layout\nconst LeftColumn = styled.div`\n  flex: 1;\n  margin-right: 20px;\n  max-width: 350px;\n`;\n\nconst RightColumn = styled.div`\n  flex: 2;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\n// Styling for the user's scores\nconst UserScoresContainer = styled.div`\n  width: 100%;\n  margin-bottom: 30px;\n`;\n\n// Styled components for the scores list\nconst ScoresContainer = styled.div`\n  width: 100%;\n  max-width: 600px;\n  text-align: left;\n`;\n\nconst ScoresTitle = styled.h2`\n  color: white;\n  margin-bottom: 15px;\n`;\n\nconst ScoresList = styled.ul`\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n`;\n\nconst ScoreItem = styled.li`\n  margin: 12px 0;\n`;\n\nconst ScoreLink = styled(Link)`\n  color: white;\n  text-decoration: none;\n  font-size: 16px;\n  display: block;\n\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst ScoreTimestamp = styled.span`\n  color: #888;\n  font-size: 12px;\n  display: block;\n  margin-top: 2px;\n`;\n\nconst VersionBadge = styled.span`\n  display: inline-block;\n  background-color: transparent;\n  color: #888;\n  font-size: 11px;\n  margin-left: 8px;\n`;\n\ninterface UserScore {\n  id: string;\n  title: string;\n  updatedAt: Date;\n  versions: number;\n}\n\nconst EditorLandingPage: React.FC = () => {\n  const [userScores, setUserScores] = useState<UserScore[]>([]);\n  const appContext = useContext(AppContext);\n  const user = appContext?.user;\n\n  // Hard-coded list of featured scores\n  const featuredScores = [\n    \"schubert_d365_09\",\n    // \"Gravity_Falls_Opening\",\n    // \"passacaglia---handel-halvorsen\",\n    // \"papers-please\",\n    // \"idea-15---gibran-alcocer\",\n    // \"idea-n.10---gibran-alcocer\",\n  ];\n\n  // Fetch user scores when component mounts and user is available\n  useEffect(() => {\n    const fetchUserScores = async () => {\n      if (!user) {\n        setUserScores([]);\n        return;\n      }\n\n      try {\n        const db = getFirestore();\n        const editsCollection = collection(db, \"edits\");\n        const q = query(editsCollection, where(\"owner\", \"==\", user.uid));\n        const querySnapshot = await getDocs(q);\n\n        const scores: UserScore[] = [];\n        querySnapshot.forEach((doc) => {\n          const data = doc.data() as FirestoreEditDocument;\n          scores.push({\n            id: doc.id,\n            title: data.title || \"\",\n            updatedAt: data.updatedAt?.toDate() || new Date(),\n            versions: data.versions?.length || 0,\n          });\n        });\n\n        // Sort by most recently updated\n        scores.sort((a, b) => b.updatedAt.getTime() - a.updatedAt.getTime());\n        setUserScores(scores);\n      } catch (error) {\n        console.error(\"Error fetching user scores:\", error);\n      }\n    };\n\n    fetchUserScores();\n  }, [user]);\n\n  return (\n    <LandingContainer>\n      <LeftColumn>\n        {user && (\n          <UserScoresContainer>\n            <ScoresTitle>My Scores</ScoresTitle>\n            <ScoresList>\n              {userScores.length > 0 ? (\n                userScores.map((score) => (\n                  <ScoreItem key={score.id}>\n                    <ScoreLink to={`/ef/${score.id}/${score.versions}`}>\n                      {score.title || score.id}\n                      <VersionBadge>v{score.versions}</VersionBadge>\n                    </ScoreLink>\n                    <ScoreTimestamp>\n                      {formatDistanceToNow(score.updatedAt, {\n                        addSuffix: true,\n                      })}\n                    </ScoreTimestamp>\n                  </ScoreItem>\n                ))\n              ) : (\n                <ScoreItem>No saved scores yet</ScoreItem>\n              )}\n            </ScoresList>\n          </UserScoresContainer>\n        )}\n        <StyledButtonLink to=\"/e/new\">New Score</StyledButtonLink>\n      </LeftColumn>\n\n      <RightColumn>\n        <ScoresContainer>\n          <ScoresTitle>Examples</ScoresTitle>\n          <ScoresList>\n            {featuredScores.map((name) => (\n              <ScoreItem key={name}>\n                <ScoreLink to={`/e/${name}`}>{beautifySlug(name)}</ScoreLink>\n              </ScoreItem>\n            ))}\n          </ScoresList>\n        </ScoresContainer>\n      </RightColumn>\n    </LandingContainer>\n  );\n};\n\nexport default EditorLandingPage;\n","import { isEqual } from \"lodash\";\nimport * as React from \"react\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { PITCH_CLASS_TO_LETTER } from \"../AnalysisGrid\";\nimport Rawl from \"../Rawl\";\nimport {\n  ForgeConfig,\n  generateNotes,\n  PATTERNS,\n  PlaybackStyle,\n  PROGRESSIONS,\n  ProgressionType,\n  SCALE_CHORDS,\n} from \"./ForgeGenerator\";\nimport { generateMidiWithMetadata } from \"./ForgeMidi\";\n\nconst ForgeContainer = styled.div`\n  padding: 20px;\n  width: 100vw;\n  color: white;\n  box-sizing: border-box;\n`;\n\nconst SelectorContainer = styled.div`\n  display: flex;\n  gap: 24px;\n  margin: 20px 0;\n  padding: 8px;\n`;\n\nconst CategorySection = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 16px;\n  width: fit-content;\n`;\n\nconst HorizontalCategorySection = styled(CategorySection)`\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: center;\n  width: auto;\n\n  > button {\n    width: auto;\n    margin: 0;\n  }\n`;\n\nconst CategoryHeader = styled.div`\n  padding-left: 5px;\n  color: #999;\n  font-size: 14px;\n  letter-spacing: 0.5px;\n  text-align: left;\n  user-select: none;\n  margin-bottom: 4px;\n`;\n\nconst Button = styled.button<{ active: boolean }>`\n  padding: 8px 12px;\n  text-align: left;\n  background-color: ${(props) => (props.active ? \"white\" : \"black\")};\n  color: ${(props) => (props.active ? \"black\" : \"white\")};\n  border: none;\n  cursor: pointer;\n  white-space: nowrap;\n  font-size: 14px;\n  user-select: none;\n\n  &:hover {\n    background-color: ${(props) => (props.active ? \"white\" : \"#333\")};\n  }\n\n  ${CategorySection}:not(${HorizontalCategorySection}) & {\n    width: 100%;\n    border-radius: 0;\n\n    &:first-of-type {\n      border-top-left-radius: 4px;\n      border-top-right-radius: 4px;\n    }\n\n    &:last-child {\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n    }\n  }\n\n  ${HorizontalCategorySection} & {\n    display: inline-flex;\n    border-radius: 0;\n    margin: 0;\n    width: auto;\n\n    &:first-child {\n      border-top-left-radius: 4px;\n      border-bottom-left-radius: 4px;\n    }\n\n    &:last-child {\n      border-top-right-radius: 4px;\n      border-bottom-right-radius: 4px;\n    }\n  }\n`;\n\nconst TopControls = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 24px;\n  margin-bottom: 20px;\n  align-items: flex-start;\n`;\n\nconst BPMSlider = styled.input`\n  width: 200px;\n  margin: 0 10px;\n`;\n\nconst BPMLabel = styled.span`\n  font-family: monospace;\n  color: #999;\n  font-size: 14px;\n  letter-spacing: 0.5px;\n`;\n\nconst BPMValue = styled.span`\n  font-family: monospace;\n  color: white;\n  width: 40px;\n  display: inline-block;\n  text-align: right;\n`;\n\ninterface ForgeButtonProps<T extends keyof ForgeUIState> {\n  propName: T;\n  value: ForgeUIState[T];\n  children: React.ReactNode;\n  description: string;\n  className?: string;\n}\n\nconst ForgeButton = <T extends keyof ForgeUIState>({\n  propName,\n  value,\n  children,\n  description,\n  className,\n}: ForgeButtonProps<T>) => {\n  const { state, handleStyleInteraction } = useForgeContext();\n  return (\n    <Button\n      className={className}\n      active={state[propName] === value}\n      onClick={() =>\n        handleStyleInteraction({ [propName]: value }, description, \"click\")\n      }\n      onMouseEnter={() =>\n        handleStyleInteraction({ [propName]: value }, description, \"hover\")\n      }\n      onMouseLeave={() =>\n        handleStyleInteraction(\n          { [propName]: state[propName] },\n          description,\n          \"leave\",\n        )\n      }\n    >\n      {children}\n    </Button>\n  );\n};\n\nconst ProgressionButton = styled(ForgeButton)`\n  font-family: monospace;\n`;\n\nconst PatternButton = styled(ForgeButton)`\n  font-family: monospace;\n`;\n\n// Add pattern type\nexport type PatternIndex = 0 | 1 | 2 | 3 | 4 | 5 | 6;\n\nconst INITIAL_STATE: ForgeUIState = {\n  mode: \"major\",\n  patternIndex: 0,\n  progression: \"CLASSIC\",\n  playbackStyle: \"arpeggio\",\n  wholeNoteStyle: \"triad\",\n  alternationStyle: \"half\",\n  tonic: 0,\n  melodyRhythm: \"eighth\",\n  melodyType: \"static\",\n  bpm: 120,\n};\n\ninterface ForgeUIState {\n  mode: ForgeConfig[\"mode\"];\n  patternIndex: PatternIndex;\n  progression: ProgressionType;\n  playbackStyle: PlaybackStyle;\n  wholeNoteStyle: ForgeConfig[\"wholeNoteStyle\"];\n  alternationStyle: ForgeConfig[\"alternationStyle\"];\n  tonic: number;\n  melodyRhythm: ForgeConfig[\"melodyRhythm\"];\n  melodyType: ForgeConfig[\"melodyType\"];\n  bpm: number;\n}\n\nconst MODE_OPTIONS: Array<{ value: ForgeUIState[\"mode\"]; label: string }> = [\n  { value: \"major\", label: \"Major\" },\n  { value: \"minor\", label: \"Minor\" },\n  { value: \"natural_minor\", label: \"Natural Minor\" },\n];\n\nconst PLAYBACK_STYLES: Array<{\n  value: ForgeUIState[\"playbackStyle\"];\n  label: string;\n}> = [\n  { value: \"arpeggio\", label: \"Arpeggio\" },\n  { value: \"whole_notes\", label: \"Whole Notes\" },\n  { value: \"root_chord_alternation\", label: \"Root-Chord Alternation\" },\n];\n\nconst WHOLE_NOTE_STYLES: Array<{\n  value: ForgeUIState[\"wholeNoteStyle\"];\n  label: string;\n}> = [\n  { value: \"root\", label: \"Root\" },\n  { value: \"octave\", label: \"Octave\" },\n  { value: \"power\", label: \"Power\" },\n  { value: \"triad\", label: \"Triad\" },\n  { value: \"triad_octave\", label: \"Triad Octave\" },\n];\n\nconst ALTERNATION_STYLES: Array<{\n  value: ForgeUIState[\"alternationStyle\"];\n  label: string;\n}> = [\n  { value: \"half\", label: \"Half Notes\" },\n  { value: \"quarter\", label: \"Quarter Notes\" },\n  { value: \"quarter_fifth\", label: \"Quarter Notes with Fifth\" },\n];\n\nconst MELODY_RHYTHMS: Array<{\n  value: ForgeUIState[\"melodyRhythm\"];\n  label: string;\n}> = [\n  { value: \"quarter\", label: \"Quarter Notes\" },\n  { value: \"eighth\", label: \"Eighth Notes\" },\n  { value: \"sixteenth\", label: \"Sixteenth Notes\" },\n];\n\nconst MELODY_TYPES: Array<{\n  value: ForgeUIState[\"melodyType\"];\n  label: string;\n}> = [\n  { value: \"static\", label: \"Static Scale\" },\n  { value: \"chord_based\", label: \"Chord Based\" },\n];\n\ninterface ForgeContextType {\n  state: ForgeUIState;\n  handleStyleInteraction: (\n    updates: Partial<ForgeUIState>,\n    description: string,\n    eventType?: \"click\" | \"hover\" | \"leave\",\n  ) => void;\n}\n\nconst ForgeContext = React.createContext<ForgeContextType | null>(null);\n\nconst useForgeContext = () => {\n  const context = useContext(ForgeContext);\n  if (!context) {\n    throw new Error(\n      \"useForgeContext must be used within a ForgeContextProvider\",\n    );\n  }\n  return context;\n};\n\ninterface ButtonOption<T> {\n  value: T;\n  label: string;\n}\n\ninterface ButtonSectionProps<T extends keyof ForgeUIState> {\n  title: string;\n  options: ButtonOption<ForgeUIState[T]>[];\n  propName: T;\n  customButton?: React.ComponentType<ForgeButtonProps<T>>;\n  horizontal?: boolean;\n}\n\nconst ButtonSection = <T extends keyof ForgeUIState>({\n  title,\n  options,\n  propName,\n  customButton: CustomButton,\n  horizontal = false,\n}: ButtonSectionProps<T> & { horizontal?: boolean }) => {\n  const ButtonComponent = CustomButton || ForgeButton;\n  const SectionComponent = horizontal\n    ? HorizontalCategorySection\n    : CategorySection;\n  return (\n    <SectionComponent>\n      <CategoryHeader>{title}</CategoryHeader>\n      {options.map(({ value, label }) => (\n        <ButtonComponent\n          key={value.toString()}\n          propName={propName}\n          value={value}\n          description={`${title} ${label}`}\n        >\n          {label}\n        </ButtonComponent>\n      ))}\n    </SectionComponent>\n  );\n};\n\nconst TONIC_OPTIONS = Object.entries(PITCH_CLASS_TO_LETTER).map(\n  ([pitchClass, letter]) => ({\n    value: parseInt(pitchClass),\n    label: letter,\n  }),\n);\n\nconst ForgeUI: React.FC = () => {\n  const [state, setState] = useState<ForgeUIState>(INITIAL_STATE);\n  const [lastClickedState, setLastClickedState] =\n    useState<ForgeUIState>(INITIAL_STATE);\n  const [lastGeneratedConfig, setLastGeneratedConfig] =\n    useState<ForgeUIState>(INITIAL_STATE);\n  const [isDraggingBPM, setIsDraggingBPM] = useState(false);\n\n  const {\n    currentMidi,\n    setCurrentMidi,\n    playSongBuffer,\n    rawlProps,\n    setRawlProps,\n  } = useContext(AppContext);\n\n  // Add ref to track if change is from click\n  const isClickPending = useRef(false);\n\n  // Pattern sequences for display - derived directly from PATTERNS\n  const patternSequences = PATTERNS.map((pattern) => pattern.join(\" \"));\n\n  const handleStyleInteraction = async (\n    updates: Partial<ForgeUIState>,\n    description: string,\n    eventType: \"click\" | \"hover\" | \"leave\" = \"click\",\n  ) => {\n    console.log(`[Forge] ${description} ${eventType}`);\n    const shouldAutoPlay = eventType === \"click\";\n\n    if (eventType === \"click\") {\n      isClickPending.current = true;\n      const newState = { ...state, ...updates };\n      setState(newState);\n      setLastClickedState(newState);\n    } else if (eventType === \"hover\") {\n      setState((prev) => ({ ...prev, ...updates }));\n    } else if (eventType === \"leave\") {\n      setState(lastClickedState);\n    }\n\n    const newConfig =\n      eventType === \"leave\" ? lastClickedState : { ...state, ...updates };\n    await prepareMidi(newConfig, shouldAutoPlay);\n  };\n\n  const prepareMidi = async (\n    newConfig: ForgeUIState,\n    shouldAutoPlay: boolean = false,\n  ) => {\n    // Compare against last generated config using lodash isEqual\n    if (!shouldAutoPlay && isEqual(newConfig, lastGeneratedConfig)) {\n      console.log(\n        \"[Forge] Skipping MIDI generation - values match last generated config\",\n      );\n      return null;\n    }\n\n    console.log(\"[Forge] Preparing MIDI generation for:\", newConfig);\n\n    try {\n      // Convert ForgeUIState to ForgeConfig\n      const config: ForgeConfig = {\n        ...newConfig,\n        pattern: newConfig.patternIndex,\n      };\n\n      // Generate notes using the configuration\n      const { melody, chords } = generateNotes(config);\n      const notes = { melody, chords };\n      console.log(\"[Forge] Generated notes:\", notes);\n\n      // Generate MIDI with metadata\n      const { midiData, midiInfo, analysis } = generateMidiWithMetadata(\n        notes,\n        config.mode,\n        config.tonic,\n        config,\n      );\n      console.log(\"[Forge] Generated MIDI data:\", midiData.length, \"bytes\");\n\n      // Update last generated config\n      setLastGeneratedConfig(newConfig);\n\n      // Set the current MIDI info in global context with download-friendly title\n      const downloadableInfo = {\n        ...midiInfo,\n        title: `${PROGRESSIONS[config.progression].join(\"-\")} ${\n          config.playbackStyle === \"arpeggio\"\n            ? `arpeggio-${config.pattern + 1}`\n            : config.playbackStyle === \"whole_notes\"\n            ? config.wholeNoteStyle\n            : config.alternationStyle\n        } ${config.melodyType}-${config.melodyRhythm}`,\n      };\n      console.log(\"[Forge] Setting currentMidi:\", downloadableInfo);\n      setCurrentMidi(downloadableInfo);\n\n      // Set rawlProps with the generated analysis\n      if (rawlProps) {\n        setRawlProps({\n          ...rawlProps,\n          savedAnalysis: analysis,\n        });\n      }\n\n      // Use playSongBuffer to load the MIDI data globally, with autoplay parameter\n      console.log(\"[Forge] Calling playSongBuffer with:\", {\n        filename: downloadableInfo.title + \".mid\",\n        midiDataLength: midiData.length,\n        shouldAutoPlay,\n      });\n      await playSongBuffer(\n        downloadableInfo.title + \".mid\",\n        midiData,\n        shouldAutoPlay,\n      );\n\n      return { midiData, midiInfo: downloadableInfo };\n    } catch (error) {\n      console.error(\"[Forge] Error preparing MIDI:\", error);\n      return null;\n    }\n  };\n\n  // Prepare MIDI on state change\n  useEffect(() => {\n    if (!isClickPending.current) {\n      prepareMidi(state, false);\n    }\n    isClickPending.current = false;\n  }, [state]);\n\n  const getProgressionDisplay = (prog: ProgressionType) => {\n    const chords = PROGRESSIONS[prog].map(\n      (degree) =>\n        SCALE_CHORDS[state.mode][\n          degree as keyof (typeof SCALE_CHORDS)[typeof state.mode]\n        ],\n    );\n    return chords.join(\" \");\n  };\n\n  const getInteractionProps = (\n    updates: Partial<ForgeUIState>,\n    description: string,\n  ) => ({\n    onClick: () => handleStyleInteraction(updates, description),\n  });\n\n  const handleBPMChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newBPM = parseInt(event.target.value);\n    setState((prev) => ({ ...prev, bpm: newBPM }));\n  };\n\n  const handleBPMDragStart = () => {\n    setIsDraggingBPM(true);\n  };\n\n  const handleBPMDragEnd = () => {\n    setIsDraggingBPM(false);\n    setLastClickedState(state);\n    prepareMidi(state, true);\n  };\n\n  const contextValue = {\n    state,\n    handleStyleInteraction,\n  };\n\n  return (\n    <ForgeContext.Provider value={contextValue}>\n      <ForgeContainer>\n        <TopControls>\n          <ButtonSection\n            title=\"Tonic\"\n            options={TONIC_OPTIONS}\n            propName=\"tonic\"\n            horizontal\n          />\n          <ButtonSection\n            title=\"Mode\"\n            options={MODE_OPTIONS}\n            propName=\"mode\"\n            horizontal\n          />\n          <div style={{ display: \"flex\", alignItems: \"center\" }}>\n            <BPMLabel>BPM</BPMLabel>\n            <BPMSlider\n              type=\"range\"\n              min=\"60\"\n              max=\"240\"\n              value={state.bpm}\n              onChange={handleBPMChange}\n              onMouseDown={handleBPMDragStart}\n              onMouseUp={handleBPMDragEnd}\n            />\n            <BPMValue>{state.bpm}</BPMValue>\n          </div>\n        </TopControls>\n\n        <SelectorContainer>\n          <ButtonSection\n            title=\"Progression\"\n            options={Object.keys(PROGRESSIONS).map((prog) => ({\n              value: prog as ProgressionType,\n              label: getProgressionDisplay(prog as ProgressionType),\n            }))}\n            propName=\"progression\"\n            customButton={ProgressionButton}\n          />\n\n          <ButtonSection\n            title=\"Playback Style\"\n            options={PLAYBACK_STYLES}\n            propName=\"playbackStyle\"\n          />\n\n          {state.playbackStyle === \"whole_notes\" && (\n            <ButtonSection\n              title=\"Whole Note Style\"\n              options={WHOLE_NOTE_STYLES}\n              propName=\"wholeNoteStyle\"\n            />\n          )}\n\n          {state.playbackStyle === \"root_chord_alternation\" && (\n            <ButtonSection\n              title=\"Alternation Style\"\n              options={ALTERNATION_STYLES}\n              propName=\"alternationStyle\"\n            />\n          )}\n\n          {state.playbackStyle === \"arpeggio\" && (\n            <ButtonSection\n              title=\"Pattern\"\n              options={patternSequences.map((seq, idx) => ({\n                value: idx as PatternIndex,\n                label: seq,\n              }))}\n              propName=\"patternIndex\"\n              customButton={PatternButton}\n            />\n          )}\n\n          <ButtonSection\n            title=\"Melody Rhythm\"\n            options={MELODY_RHYTHMS}\n            propName=\"melodyRhythm\"\n          />\n\n          <ButtonSection\n            title=\"Melody Type\"\n            options={MELODY_TYPES}\n            propName=\"melodyType\"\n          />\n        </SelectorContainer>\n        {currentMidi && rawlProps && rawlProps.parsingResult && (\n          <Rawl {...rawlProps} />\n        )}\n      </ForgeContainer>\n    </ForgeContext.Provider>\n  );\n};\n\nexport default ForgeUI;\n","import { Chord, rehydrateChords } from \"../legends/chords\";\nimport {\n  C3,\n  DEFAULT_NOTE_DURATION_PADDING,\n  DEFAULT_VELOCITY,\n  MEASURE_LENGTH,\n  TICKS_PER_QUARTER,\n} from \"./constants\";\nimport { getBaseNoteParams } from \"./noteUtils\";\n\n// Constants\nexport const SCALE_CHORDS = {\n  major: {\n    1: \"I\",\n    2: \"ii\",\n    3: \"iii\",\n    4: \"IV\",\n    5: \"V\",\n    6: \"vi\",\n    7: \"viio\",\n  },\n  minor: {\n    1: \"i\",\n    2: \"iio\",\n    3: \"bIII\",\n    4: \"iv\",\n    5: \"V\",\n    6: \"bVI\",\n    7: \"viio\",\n  },\n  natural_minor: {\n    1: \"i\",\n    2: \"iio\",\n    3: \"bIII\",\n    4: \"iv\",\n    5: \"v\",\n    6: \"bVI\",\n    7: \"bVII\",\n  },\n} as const;\n\nexport const PROGRESSIONS = {\n  CLASSIC: [1, 6, 4, 5] as number[],\n  ALTERNATE_1: [1, 5, 6, 4] as number[],\n  ALTERNATE_2: [1, 3, 4, 5] as number[],\n  DESCENDING: [4, 3, 2, 1] as number[],\n  MINOR_RISE: [6, 5, 1, 3] as number[],\n};\n\nexport type ProgressionType = keyof typeof PROGRESSIONS;\n\n// Types\nexport interface Note {\n  pitch: number; // MIDI note number\n  velocity: number;\n  startTime: number; // in ticks (128 per quarter note)\n  duration: number; // in ticks\n  channel?: number; // MIDI channel (0-15)\n}\n\nexport type PlaybackStyle =\n  | \"arpeggio\"\n  | \"whole_notes\"\n  | \"root_chord_alternation\";\n\nexport interface ForgeConfig {\n  mode: \"major\" | \"minor\" | \"natural_minor\";\n  pattern: number;\n  progression: ProgressionType;\n  playbackStyle: PlaybackStyle;\n  wholeNoteStyle?: \"root\" | \"octave\" | \"power\" | \"triad\" | \"triad_octave\";\n  alternationStyle?: \"half\" | \"quarter\" | \"quarter_fifth\";\n  tonic: number;\n  melodyRhythm: \"eighth\" | \"quarter\" | \"sixteenth\";\n  melodyType: \"static\" | \"chord_based\";\n  bpm: number;\n}\n\n// Convert scale degree to chord\nconst getChord = (scaleDegree: number, mode: ForgeConfig[\"mode\"]): Chord => {\n  return SCALE_CHORDS[mode][\n    scaleDegree as keyof (typeof SCALE_CHORDS)[typeof mode]\n  ] as Chord;\n};\n\n// Adjust base pitch based on tonic\nconst getAdjustedBasePitch = (basePitch: number, tonic: number): number => {\n  return basePitch + tonic;\n};\n\n// Patterns defined as sequences where:\n// 0 is root, 1 is next chord tone up, 2 is next up, etc.\n// Negative numbers go down from root (-1 is fifth below root)\n// Numbers > 2 access next octave (3 is root octave up)\nexport const PATTERNS = [\n  [0, 1, 2, 1, 2, 1, 2, 1], // Classic r m u m u m u m\n  [0, 1, 2, 1, 0, 1, 2, 1], // Alternate r m u m r m u m\n  [0, 2, 3, 2, 3, 2, 3, 2], // New pattern 1\n  [0, 2, 3, 2, 4, 2, 3, 2], // New pattern 2\n  [0, 2, 4, 2, 4, 2, 4, 2], // New pattern 3\n  [0, 2, 3, 2, 0, 2, 3, 2], // New pattern 4\n  [0, 3, 5, 4, 6, 4, 5, 4], // New pattern 5\n] as const;\n\n// Helper to create a note with common parameters\nconst createNote = (\n  basePitch: number,\n  pitchOffset: number,\n  tonic: number,\n  startTime: number,\n  duration: number,\n  channel: number = 1,\n): Note => ({\n  pitch: getAdjustedBasePitch(basePitch + pitchOffset, tonic),\n  velocity:\n    channel === 1 ? Math.floor(DEFAULT_VELOCITY * 0.4) : DEFAULT_VELOCITY,\n  startTime,\n  duration: duration - DEFAULT_NOTE_DURATION_PADDING,\n  channel,\n});\n\n// Find index of a pitch in scale degrees\nconst findPitchInScale = (pitch: number, scaleDegrees: number[]): number => {\n  const normalizedPitch = pitch % 12;\n  return scaleDegrees.findIndex((deg) => deg % 12 === normalizedPitch);\n};\n\n// Generate melody notes going up the scale from each chord's root\nconst generateMelody = (\n  progression: number[],\n  mode: ForgeConfig[\"mode\"],\n  melodyRhythm: ForgeConfig[\"melodyRhythm\"],\n  melodyType: ForgeConfig[\"melodyType\"],\n  tonic: number = 0,\n): Note[] => {\n  const notes: Note[] = [];\n  const chords = progression.map((degree) => getChord(degree, mode));\n  const rehydratedChords = rehydrateChords(chords);\n  const chordPitches = rehydratedChords.map((chord) => chord.pitches);\n  const scaleDegrees = getScaleDegrees(mode);\n\n  const notesPerMeasure =\n    melodyRhythm === \"sixteenth\" ? 16 : melodyRhythm === \"eighth\" ? 8 : 4;\n  const noteDuration = TICKS_PER_QUARTER / (notesPerMeasure / 4);\n\n  for (let repeat = 0; repeat < 2; repeat++) {\n    for (let measure = 0; measure < 4; measure++) {\n      const chord = chordPitches[measure];\n      const currentChord = chords[measure];\n\n      const { baseTime, basePitch } = getBaseNoteParams(\n        measure,\n        repeat,\n        currentChord,\n        C3 + 12, // Move melody up one octave\n      );\n\n      if (melodyType === \"static\") {\n        // Generate notes going up the scale from tonic, same pattern each measure\n        for (let i = 0; i < notesPerMeasure; i++) {\n          const octaveOffset = Math.floor(i / 7) * 12;\n          const currentDegree = scaleDegrees[i % 7];\n\n          notes.push(\n            createNote(\n              basePitch,\n              currentDegree + octaveOffset,\n              tonic,\n              baseTime + i * noteDuration,\n              noteDuration,\n              0,\n            ),\n          );\n        }\n      } else {\n        // Generate notes based on chord root\n        const rootPitch = chord[0] % 12;\n        let scaleIndex = findPitchInScale(rootPitch, scaleDegrees);\n\n        for (let i = 0; i < notesPerMeasure; i++) {\n          const octaveOffset = Math.floor((scaleIndex + i) / 7) * 12;\n          const currentDegree = scaleDegrees[(scaleIndex + i) % 7];\n\n          notes.push(\n            createNote(\n              basePitch,\n              currentDegree + octaveOffset,\n              tonic,\n              baseTime + i * noteDuration,\n              noteDuration,\n              0,\n            ),\n          );\n        }\n      }\n    }\n  }\n  return notes;\n};\n\n// Generate whole notes with different voicings\nconst generateWholeNotes = (\n  progression: number[],\n  mode: ForgeConfig[\"mode\"],\n  style: ForgeConfig[\"wholeNoteStyle\"] = \"triad\",\n  tonic: number = 0,\n): Note[] => {\n  const notes: Note[] = [];\n  const chords = progression.map((degree) => getChord(degree, mode));\n  const rehydratedChords = rehydrateChords(chords);\n  const chordPitches = rehydratedChords.map((chord) => chord.pitches);\n\n  for (let repeat = 0; repeat < 2; repeat++) {\n    for (let measure = 0; measure < 4; measure++) {\n      const chord = chordPitches[measure];\n      const currentChord = chords[measure];\n\n      const { baseTime, basePitch } = getBaseNoteParams(\n        measure,\n        repeat,\n        currentChord,\n        C3,\n      );\n\n      // Base note is always the root\n      notes.push(\n        createNote(basePitch, chord[0], tonic, baseTime, MEASURE_LENGTH),\n      );\n\n      // Add additional notes based on style\n      switch (style) {\n        case \"octave\":\n          notes.push(\n            createNote(\n              basePitch,\n              chord[0] + 12,\n              tonic,\n              baseTime,\n              MEASURE_LENGTH,\n            ),\n          );\n          break;\n        case \"power\":\n          notes.push(\n            createNote(\n              basePitch,\n              chord[0] + 7,\n              tonic,\n              baseTime,\n              MEASURE_LENGTH,\n            ),\n          );\n          break;\n        case \"triad\":\n        case \"triad_octave\":\n          notes.push(\n            createNote(basePitch, chord[1], tonic, baseTime, MEASURE_LENGTH),\n            createNote(basePitch, chord[2], tonic, baseTime, MEASURE_LENGTH),\n          );\n          if (style === \"triad_octave\") {\n            notes.push(\n              createNote(\n                basePitch,\n                chord[0] + 12,\n                tonic,\n                baseTime,\n                MEASURE_LENGTH,\n              ),\n            );\n          }\n          break;\n      }\n    }\n  }\n  return notes;\n};\n\n// Generate root-chord alternation patterns\nconst generateRootChordAlternation = (\n  progression: number[],\n  mode: ForgeConfig[\"mode\"],\n  style: ForgeConfig[\"alternationStyle\"] = \"half\",\n  tonic: number = 0,\n): Note[] => {\n  const notes: Note[] = [];\n  const chords = progression.map((degree) => getChord(degree, mode));\n  const rehydratedChords = rehydrateChords(chords);\n  const chordPitches = rehydratedChords.map((chord) => chord.pitches);\n\n  for (let repeat = 0; repeat < 2; repeat++) {\n    for (let measure = 0; measure < 4; measure++) {\n      const chord = chordPitches[measure];\n      const currentChord = chords[measure];\n\n      const { baseTime, basePitch } = getBaseNoteParams(\n        measure,\n        repeat,\n        currentChord,\n        C3,\n      );\n\n      switch (style) {\n        case \"half\":\n          notes.push(\n            createNote(\n              basePitch,\n              chord[0],\n              tonic,\n              baseTime,\n              MEASURE_LENGTH / 2,\n            ),\n          );\n          chord.forEach((pitch) => {\n            notes.push(\n              createNote(\n                basePitch,\n                pitch,\n                tonic,\n                baseTime + MEASURE_LENGTH / 2,\n                MEASURE_LENGTH / 2,\n              ),\n            );\n          });\n          break;\n        case \"quarter\":\n          for (let quarter = 0; quarter < 4; quarter++) {\n            if (quarter % 2 === 0) {\n              notes.push(\n                createNote(\n                  basePitch,\n                  chord[0],\n                  tonic,\n                  baseTime + quarter * TICKS_PER_QUARTER,\n                  TICKS_PER_QUARTER,\n                ),\n              );\n            } else {\n              chord.forEach((pitch) => {\n                notes.push(\n                  createNote(\n                    basePitch,\n                    pitch,\n                    tonic,\n                    baseTime + quarter * TICKS_PER_QUARTER,\n                    TICKS_PER_QUARTER,\n                  ),\n                );\n              });\n            }\n          }\n          break;\n        case \"quarter_fifth\":\n          for (let quarter = 0; quarter < 4; quarter++) {\n            if (quarter % 2 === 0) {\n              notes.push(\n                createNote(\n                  basePitch,\n                  quarter === 0 ? chord[0] : chord[2] - 12,\n                  tonic,\n                  baseTime + quarter * TICKS_PER_QUARTER,\n                  TICKS_PER_QUARTER,\n                ),\n              );\n            } else {\n              chord.forEach((pitch) => {\n                notes.push(\n                  createNote(\n                    basePitch,\n                    pitch,\n                    tonic,\n                    baseTime + quarter * TICKS_PER_QUARTER,\n                    TICKS_PER_QUARTER,\n                  ),\n                );\n              });\n            }\n          }\n          break;\n      }\n    }\n  }\n  return notes;\n};\n\n// Convert chord to pattern in IR\nexport const generateAlbertiPattern = (\n  progression: number[],\n  mode: ForgeConfig[\"mode\"],\n  patternIndex: number,\n  tonic: number = 0,\n): Note[] => {\n  const EIGHTH_NOTE = TICKS_PER_QUARTER / 2;\n  const selectedPattern = PATTERNS[patternIndex] || PATTERNS[0];\n  const notes: Note[] = [];\n\n  const chords = progression.map((degree) => getChord(degree, mode));\n  const rehydratedChords = rehydrateChords(chords);\n  const chordPitches = rehydratedChords.map((chord) => chord.pitches);\n\n  for (let repeat = 0; repeat < 2; repeat++) {\n    for (let measure = 0; measure < 4; measure++) {\n      const chord = chordPitches[measure];\n      const currentChord = chords[measure];\n\n      const { baseTime, basePitch } = getBaseNoteParams(\n        measure,\n        repeat,\n        currentChord,\n        C3,\n      );\n\n      for (let i = 0; i < 8; i++) {\n        const patternValue = selectedPattern[i];\n        const octaveOffset =\n          Math.floor(Math.abs(patternValue) / 3) * 12 * Math.sign(patternValue);\n        const chordIndex = ((patternValue % 3) + 3) % 3;\n\n        notes.push(\n          createNote(\n            basePitch,\n            chord[chordIndex] + octaveOffset,\n            tonic,\n            baseTime + i * EIGHTH_NOTE,\n            EIGHTH_NOTE,\n          ),\n        );\n      }\n    }\n  }\n  return notes;\n};\n\n// Get scale degrees based on mode\nconst getScaleDegrees = (mode: ForgeConfig[\"mode\"]): number[] => {\n  switch (mode) {\n    case \"minor\":\n      // Harmonic minor: W H W W H WH H\n      return [0, 2, 3, 5, 7, 8, 11, 12];\n    case \"natural_minor\":\n      // Natural minor: W H W W H W W\n      return [0, 2, 3, 5, 7, 8, 10, 12];\n    case \"major\":\n    default:\n      // Major scale: W W H W W W H\n      return [0, 2, 4, 5, 7, 9, 11, 12];\n  }\n};\n\nexport const generateNotes = (\n  config: ForgeConfig,\n): { melody: Note[]; chords: Note[] } => {\n  const progression = PROGRESSIONS[config.progression];\n  const chordNotes = (() => {\n    let notes: Note[];\n    switch (config.playbackStyle) {\n      case \"whole_notes\":\n        notes = generateWholeNotes(\n          progression,\n          config.mode,\n          config.wholeNoteStyle,\n          config.tonic,\n        );\n        break;\n      case \"root_chord_alternation\":\n        notes = generateRootChordAlternation(\n          progression,\n          config.mode,\n          config.alternationStyle,\n          config.tonic,\n        );\n        break;\n      case \"arpeggio\":\n      default:\n        notes = generateAlbertiPattern(\n          progression,\n          config.mode,\n          config.pattern,\n          config.tonic,\n        );\n    }\n    // Move accompaniment down an octave only for scale degrees 4-7\n    return notes.map((note) => ({\n      ...note,\n      channel: 1,\n      pitch:\n        note.pitch -\n        (progression[Math.floor(note.startTime / MEASURE_LENGTH) % 4] >= 4\n          ? 12\n          : 0),\n    }));\n  })();\n\n  const melodyNotes = generateMelody(\n    progression,\n    config.mode,\n    config.melodyRhythm,\n    config.melodyType,\n    config.tonic,\n  );\n\n  return {\n    melody: melodyNotes,\n    chords: chordNotes,\n  };\n};\n","import { Chord } from \"../legends/chords\";\nimport { CHORD_OCTAVE_ADJUSTMENTS, MEASURE_LENGTH } from \"./constants\";\n\nexport interface BaseNoteParams {\n  baseTime: number;\n  basePitch: number;\n}\n\nexport const getBaseNoteParams = (\n  measure: number,\n  repeat: number,\n  currentChord: Chord,\n  basePitch: number,\n): BaseNoteParams => ({\n  baseTime: (repeat * 4 + measure) * MEASURE_LENGTH,\n  basePitch:\n    basePitch +\n    (CHORD_OCTAVE_ADJUSTMENTS[\n      currentChord as keyof typeof CHORD_OCTAVE_ADJUSTMENTS\n    ] || 0),\n});\n","import MidiWriter from \"midi-writer-js\";\nimport { Analysis, PitchClass } from \"../analysis\";\nimport { DEFAULT_VELOCITY } from \"./constants\";\nimport { ForgeConfig, Note } from \"./ForgeGenerator\";\n\ntype Track = {\n  addTrackName(name: string): void;\n  setTempo(tempo: number): void;\n  addEvent(event: any): void;\n};\n\ntype NoteEventParams = {\n  pitch: number[];\n  duration: string;\n  velocity: number;\n  startTick: number;\n  channel: number;\n};\n\n// Type assertion for the imported MidiWriter\nconst { Track, NoteEvent, Writer } = MidiWriter as {\n  Track: new () => Track;\n  NoteEvent: new (params: NoteEventParams) => any;\n  Writer: new (tracks: Track[]) => { dataUri(): string };\n};\n\nexport const FORGE_MOCK_ID = \"forge_mock\";\n\n// Mid-level representation of musical events\ninterface MusicalEvent {\n  pitches: number[];\n  startTick: number;\n  duration: number;\n  velocity: number;\n  channel: number;\n}\n\nexport interface MidiGenerationResult {\n  midiData: Uint8Array;\n  midiInfo: {\n    id: string;\n    title: string;\n    slug: string;\n    sourceUrl: null;\n    isHiddenRoute: boolean;\n  };\n  analysis: Analysis;\n}\n\n// Convert raw notes to musical events (mid-level representation)\nconst convertToMusicalEvents = (notes: Note[]): MusicalEvent[] => {\n  const sortedNotes = [...notes].sort((a, b) => a.startTime - b.startTime);\n  const events: MusicalEvent[] = [];\n\n  let currentStartTime = -1;\n  let currentChannel = -1;\n  let currentPitches: number[] = [];\n\n  const addEvent = (\n    startTime: number,\n    pitches: number[],\n    duration: number,\n    channel: number,\n  ) => {\n    events.push({\n      pitches,\n      startTick: startTime,\n      duration,\n      velocity: DEFAULT_VELOCITY,\n      channel,\n    });\n  };\n\n  sortedNotes.forEach((note, index) => {\n    if (\n      note.startTime !== currentStartTime ||\n      note.channel !== currentChannel\n    ) {\n      // Add previous group if it exists\n      if (currentPitches.length > 0) {\n        addEvent(\n          currentStartTime,\n          currentPitches,\n          sortedNotes[index - 1].duration,\n          sortedNotes[index - 1].channel || 0,\n        );\n      }\n      // Start new group\n      currentStartTime = note.startTime;\n      currentChannel = note.channel || 0;\n      currentPitches = [note.pitch];\n    } else {\n      // Add to current group\n      currentPitches.push(note.pitch);\n    }\n  });\n\n  // Add the last group\n  if (currentPitches.length > 0) {\n    addEvent(\n      currentStartTime,\n      currentPitches,\n      sortedNotes[sortedNotes.length - 1].duration,\n      sortedNotes[sortedNotes.length - 1].channel || 0,\n    );\n  }\n\n  return events;\n};\n\n// Convert musical events to MIDI file\nconst generateMidiFromEvents = (\n  events: MusicalEvent[],\n  config: ForgeConfig,\n): Uint8Array => {\n  // Create separate tracks for each channel\n  const tracks = new Map<number, Track>();\n\n  events.forEach((event) => {\n    if (!tracks.has(event.channel)) {\n      const track = new Track();\n      if (event.channel === 0) {\n        track.addTrackName(\"Melody\");\n      } else if (event.channel === 1) {\n        track.addTrackName(\"Chords\");\n      }\n      track.setTempo(config.bpm);\n      tracks.set(event.channel, track);\n    }\n\n    const track = tracks.get(event.channel)!;\n    track.addEvent(\n      new NoteEvent({\n        pitch: event.pitches,\n        duration: \"T\" + event.duration,\n        velocity: event.velocity,\n        startTick: event.startTick,\n        channel: event.channel,\n      }),\n    );\n  });\n\n  const writer = new Writer(Array.from(tracks.values()));\n  const base64Data = writer.dataUri().split(\",\")[1];\n\n  // Convert base64 to Uint8Array\n  const binaryString = window.atob(base64Data);\n  const bytes = new Uint8Array(binaryString.length);\n  for (let i = 0; i < binaryString.length; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n\n  return bytes;\n};\n\n// Main MIDI generation function now uses the two-step process\nexport const generateMidiFile = (\n  notes: Note[],\n  config: ForgeConfig,\n): Uint8Array => {\n  const musicalEvents = convertToMusicalEvents(notes);\n  return generateMidiFromEvents(musicalEvents, config);\n};\n\nexport const generateInitialAnalysis = (\n  mode: ForgeConfig[\"mode\"],\n  tonic: number,\n): Analysis => {\n  return {\n    modulations: {\n      1: tonic as PitchClass,\n    },\n    comment: `Generated ${mode} Alberti pattern - eight measures in 4/4 time`,\n    tags: [\"generated\", \"alberti\", mode],\n    form: {},\n    phrasePatch: [],\n    sections: [0],\n  };\n};\n\nexport const generateMidiWithMetadata = (\n  { melody, chords }: { melody: Note[]; chords: Note[] },\n  mode: ForgeConfig[\"mode\"],\n  tonic: number,\n  config: ForgeConfig,\n): MidiGenerationResult => {\n  const midiData = generateMidiFile([...melody, ...chords], config);\n\n  return {\n    midiData,\n    midiInfo: {\n      id: FORGE_MOCK_ID,\n      title: `Generated ${mode} Pattern with Melody`,\n      slug: FORGE_MOCK_ID,\n      sourceUrl: null,\n      isHiddenRoute: false,\n    },\n    analysis: generateInitialAnalysis(mode, tonic),\n  };\n};\n","import {\n  Bytes,\n  addDoc,\n  arrayUnion,\n  collection,\n  doc,\n  getDocs,\n  getFirestore,\n  query,\n  updateDoc,\n  where,\n} from \"firebase/firestore/lite\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { slugify } from \"transliteration\";\nimport { FOOTER_HEIGHT } from \"../AppFooter\";\n\nconst saveMidi = async (\n  title: string,\n  sourceUrl: string,\n  midi: ArrayBuffer,\n) => {\n  let slug = slugify(title);\n  // Ensure slug ends with an alphanumeric character by removing trailing special characters\n  slug = slug.replace(/[^a-zA-Z0-9]+$/, \"\");\n  const firestore = getFirestore();\n\n  // Check if the slug already exists\n  const checkSlugExists = async (slugToCheck: string) => {\n    const q = query(\n      collection(firestore, \"midis\"),\n      where(\"slug\", \"==\", slugToCheck),\n    );\n    const querySnapshot = await getDocs(q);\n    return !querySnapshot.empty;\n  };\n\n  // If slug exists, append random characters\n  if (await checkSlugExists(slug)) {\n    const randomChars = Math.random().toString(16).substring(2, 8);\n    slug = `${slug}-${randomChars}`;\n  }\n\n  const firestoreBlob = Bytes.fromUint8Array(new Uint8Array(midi));\n\n  const docRef = await addDoc(collection(firestore, \"midis\"), {\n    blob: firestoreBlob,\n    url: sourceUrl, // This is correct, we're storing it as 'url' in Firestore\n    title,\n    slug,\n  });\n  console.log(\"Document written with ID:\", docRef.id);\n\n  const indexRef = doc(firestore, \"indexes\", \"midis\");\n  await updateDoc(indexRef, {\n    midis: arrayUnion({ title, slug, id: docRef.id }),\n  });\n  window.location.href = `/f/${slug}`;\n};\n\nexport const saveMidiFromLink = async (link: string) => {\n  try {\n    const params = new URLSearchParams(window.location.search);\n\n    const link = atob(params.get(\"link\") || \"\");\n    const url = atob(params.get(\"pageUrl\") || \"\");\n    const title = decodeURIComponent(\n      atob(decodeURIComponent(params.get(\"title\") || \"\"))\n        .split(\"\")\n        .map((char) => \"%\" + (\"00\" + char.charCodeAt(0).toString(16)).slice(-2))\n        .join(\"\"),\n    );\n\n    const response = await fetch(`${link}`, {\n      method: \"GET\",\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error. Status: ${response.status}`);\n    }\n\n    const midi = await (await response.blob()).arrayBuffer();\n    saveMidi(title, url, midi);\n  } catch (error) {\n    alert(`Fetching binary file failed: ${JSON.stringify(error)}`);\n  }\n};\n\nexport const DropSaveForm: React.FC<{\n  midi: ArrayBuffer;\n  filename: string;\n}> = ({ midi, filename }) => {\n  const [title, setTitle] = useState<string>(filename);\n  const [sourceUrl, setSourceUrl] = useState<string>(\"\");\n  const titleInputRef = React.useRef<HTMLInputElement>(null);\n\n  // Add useEffect hook to focus and select the title input\n  React.useEffect(() => {\n    if (titleInputRef.current) {\n      titleInputRef.current.focus();\n      titleInputRef.current.select();\n    }\n  }, []);\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setTitle(event.target.value);\n  };\n\n  const handleUrlChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSourceUrl(event.target.value);\n  };\n\n  const handleSave = () => {\n    if (title.trim() !== \"\") {\n      saveMidi(title, sourceUrl || \"drop\", midi);\n    } else {\n      if (titleInputRef.current) {\n        titleInputRef.current.style.backgroundColor = \"red\";\n        setTimeout(() => {\n          if (titleInputRef.current) {\n            titleInputRef.current.style.backgroundColor = \"\";\n          }\n        }, 1000);\n      }\n    }\n  };\n\n  const handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === \"Enter\") {\n      handleSave();\n    }\n  };\n\n  return (\n    <div style={{ position: \"fixed\", bottom: FOOTER_HEIGHT }}>\n      <input\n        ref={titleInputRef}\n        type=\"text\"\n        placeholder=\"Enter a title\"\n        value={title}\n        onChange={handleInputChange}\n        onKeyDown={handleKeyPress}\n        style={{ width: \"30em\" }}\n      />\n      <input\n        type=\"text\"\n        placeholder=\"Enter a source URL (optional)\"\n        value={sourceUrl}\n        onChange={handleUrlChange}\n        onKeyDown={handleKeyPress}\n        style={{ width: \"30em\", marginTop: \"10px\" }}\n      />\n      <button onClick={handleSave} style={{ marginTop: \"10px\" }}>\n        Save\n      </button>\n    </div>\n  );\n};\n","import * as React from \"react\";\nimport reaperImage from \"../../../assets/images/reaper_colormap.png\";\n\nconst DAW = () => {\n  return (\n    <div style={{ marginLeft: 250, width: 600 }}>\n      <h2>DAWs with 12 colors</h2>\n      <h3>REAPER</h3>\n      <h4>How to use</h4>\n      <ul>\n        <li>\n          <a href={reaperImage} download=\"reaper_colormap.png\">\n            <img src={reaperImage} alt=\"Reaper\" style={{ maxWidth: \"100%\" }} />\n          </a>\n        </li>\n        <li>\n          Preferences - Editing behavior - MIDI Editor - Default note color map\n        </li>\n        <li>\n          Issue: will only work for C major / C minor, needs to be shifted for\n          other keys.\n        </li>\n      </ul>\n      <h4>How to update</h4>\n      <ul>\n        <li>\n          <a\n            href=\"https://reaper-midi-colormap-tool.netlify.app/\"\n            target=\"_blank\"\n          >\n            https://reaper-midi-colormap-tool.netlify.app/\n          </a>\n        </li>\n        <li>\n          <a\n            href=\"https://chat.openai.com/share/eb2b635a-0c55-414a-bfb0-830dbde0aba4\"\n            target=\"_blank\"\n          >\n            https://chat.openai.com/share/eb2b635a-0c55-414a-bfb0-830dbde0aba4\n          </a>\n        </li>\n      </ul>\n      <h3>Signal</h3>\n      <ul>\n        <li>\n          <a href=\"https://signal-jy5a-two.vercel.app/edit\" target=\"_blank\">\n            https://signal-jy5a-two.vercel.app/edit\n          </a>\n        </li>\n        <li>\n          <a\n            href=\"https://github.com/vpavlenko/signal/commits/12colors/\"\n            target=\"_blank\"\n          >\n            https://github.com/vpavlenko/signal/commits/12colors/\n          </a>{\" \"}\n          - anyone wants to debug WebGL-React?\n        </li>\n      </ul>\n      <h3>Cubase</h3>\n      Cubase has{\" \"}\n      <a\n        href=\"https://steinberg.help/cubase_pro/v12/en/cubase_nuendo/topics/midi_editors/midi_editors_pitch_colors_r.html\"\n        target=\"_blank\"\n      >\n        Pitch Colors Setup\n      </a>\n      , it may be{\" \"}\n      <a\n        href=\"https://chat.openai.com/share/14e28957-610e-4a3e-a5b5-d4cf47c149be\"\n        target=\"_blank\"\n      >\n        shareable\n      </a>\n      .<h3>MuseScore</h3>\n      <a\n        href=\"https://youtu.be/Eq3bUFgEcb4?si=IhXpNtcvvqtQhCv1&t=4470\"\n        target=\"_blank\"\n      >\n        Promised\n      </a>\n      <h3>Studio One</h3>\n      <a\n        href=\"https://answers.presonus.com/45430/want-change-the-color-for-each-pitch-of-midi-note-shown-below\"\n        target=\"_blank\"\n      >\n        https://answers.presonus.com/45430/want-change-the-color-for-each-pitch-of-midi-note-shown-below\n      </a>\n      <h3>Logic Pro</h3>\n      <a\n        href=\"https://logicpro.skydocu.com/en/preferences-project-settings-and-key-commands/project-settings/score-settings/colors-settings/\"\n        target=\"_blank\"\n      >\n        https://logicpro.skydocu.com/en/preferences-project-settings-and-key-commands/project-settings/score-settings/colors-settings/\n      </a>\n    </div>\n  );\n};\n\nexport default DAW;\n","module.exports = \"data:image/png;base64,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\"","import {\n  MidiData,\n  MidiEvent,\n  MidiNoteOffEvent,\n  MidiNoteOnEvent,\n  MidiPitchBendEvent,\n  parseMidi,\n  writeMidi,\n} from \"midi-file\";\n\ntype EnhancedMidiEvent = MidiEvent & {\n  absoluteTime: number;\n  originalTrack: number;\n};\n\nfunction isNoteOrPitchBendEvent(\n  event: MidiEvent,\n): event is MidiNoteOnEvent | MidiNoteOffEvent | MidiPitchBendEvent {\n  return (\n    event.type === \"noteOn\" ||\n    event.type === \"noteOff\" ||\n    event.type === \"pitchBend\"\n  );\n}\n\nfunction isGlobalMetaEvent(event: MidiEvent): boolean {\n  return (\n    \"subtype\" in event &&\n    typeof event.subtype === \"string\" &&\n    [\"setTempo\", \"timeSignature\", \"keySignature\"].includes(event.subtype)\n  );\n}\n\nfunction getTrackName(track: MidiEvent[]): string | undefined {\n  const nameEvent = track.find(\n    (event) => event.type === \"trackName\" && \"text\" in event,\n  );\n  if (nameEvent && \"text\" in nameEvent) {\n    return nameEvent.text;\n  }\n  return undefined;\n}\n\nfunction createTrackNameEvent(name: string, deltaTime: number = 0): MidiEvent {\n  return {\n    deltaTime,\n    type: \"trackName\",\n    text: name,\n  };\n}\n\nfunction createEndOfTrackEvent(deltaTime: number = 0): MidiEvent {\n  return {\n    deltaTime,\n    type: \"endOfTrack\",\n  };\n}\n\nfunction ensureTrackEnding(track: MidiEvent[]): MidiEvent[] {\n  // Remove any existing end of track events\n  const eventsWithoutEnd = track.filter((event) => event.type !== \"endOfTrack\");\n\n  // Add a new end of track event\n  return [...eventsWithoutEnd, createEndOfTrackEvent()];\n}\n\nfunction findUnusedChannel(\n  midi: MidiData,\n  usedChannels: Set<number>,\n): number | null {\n  // Find the first unused channel number between 0-15\n  for (let channel = 0; channel < 16; channel++) {\n    if (!usedChannels.has(channel)) {\n      return channel;\n    }\n  }\n  return null;\n}\n\nfunction getUsedChannels(midi: MidiData): Set<number> {\n  const usedChannels = new Set<number>();\n  midi.tracks.forEach((track) => {\n    track.forEach((event) => {\n      if (\"channel\" in event) {\n        usedChannels.add(event.channel);\n      }\n    });\n  });\n  return usedChannels;\n}\n\nfunction pushEventWithDeltaTime(\n  event: EnhancedMidiEvent,\n  events: EnhancedMidiEvent[],\n  lastEventTime: number,\n  targetChannel?: number,\n): number {\n  const deltaTime = event.absoluteTime - lastEventTime;\n  events.push({\n    ...event,\n    deltaTime,\n    ...(targetChannel !== undefined && { channel: targetChannel }),\n  } as EnhancedMidiEvent);\n  return event.absoluteTime;\n}\n\nfunction transformMidi(\n  inputData: Uint8Array,\n  _forcedPanning?: boolean,\n): Uint8Array {\n  // Read forcedPanning directly from localStorage, fallback to false if not set\n  const forcedPanning = localStorage.getItem(\"forcedPanning\") === \"true\";\n\n  const midi: MidiData = parseMidi(inputData);\n  const usedChannels = getUsedChannels(midi);\n\n  // Group tracks by channel\n  const channelTracks: Map<number, number[]> = new Map();\n  midi.tracks.forEach((track, trackIndex) => {\n    track.forEach((event) => {\n      if (isNoteOrPitchBendEvent(event)) {\n        const tracks = channelTracks.get(event.channel) || [];\n        if (!tracks.includes(trackIndex)) {\n          tracks.push(trackIndex);\n        }\n        channelTracks.set(event.channel, tracks);\n      }\n    });\n  });\n\n  // If no multi-track channels found, return original\n  const hasMultiTrackChannels = Array.from(channelTracks.values()).some(\n    (tracks) => tracks.length > 1,\n  );\n  if (!hasMultiTrackChannels) {\n    console.log(\"[transformMidi] skipping - no multi-track channels\");\n    return inputData;\n  }\n\n  // Step 1: Convert all tracks to absolute time and separate global meta events\n  const mergedEvents: EnhancedMidiEvent[] = [];\n  const globalMetaEvents: EnhancedMidiEvent[] = [];\n\n  midi.tracks.forEach((track, trackIndex) => {\n    let absoluteTime = 0;\n    track.forEach((event) => {\n      if (event.type === \"endOfTrack\") return;\n      absoluteTime += event.deltaTime;\n\n      const enhancedEvent = {\n        ...event,\n        absoluteTime,\n        originalTrack: trackIndex,\n      } as EnhancedMidiEvent;\n\n      if (isGlobalMetaEvent(event)) {\n        globalMetaEvents.push(enhancedEvent);\n      } else {\n        mergedEvents.push(enhancedEvent);\n      }\n    });\n  });\n\n  mergedEvents.sort((a, b) => a.absoluteTime - b.absoluteTime);\n  globalMetaEvents.sort((a, b) => a.absoluteTime - b.absoluteTime);\n\n  // Step 2: Split into new tracks\n  const newTracks: MidiEvent[][] = [];\n  const processedChannels = new Set<number>();\n\n  // Process multi-track channels\n  for (const [channel, trackIndices] of channelTracks.entries()) {\n    if (trackIndices.length <= 1) continue;\n\n    // Find an unused channel for the left hand\n    const leftHandChannel = findUnusedChannel(midi, usedChannels);\n    if (leftHandChannel === null) {\n      // Skip splitting this channel if no unused channels available\n      continue;\n    }\n\n    processedChannels.add(channel);\n    usedChannels.add(leftHandChannel); // Reserve this channel\n\n    const baseTrackName =\n      trackIndices\n        .map((idx) => getTrackName(midi.tracks[idx]))\n        .find((name) => name !== undefined) || \"\";\n\n    // Create left/right hand tracks\n    const leftHandEvents: EnhancedMidiEvent[] = [];\n    const rightHandEvents: EnhancedMidiEvent[] = [];\n\n    // Add track names\n    const leftName = baseTrackName\n      ? `${baseTrackName}: left hand`\n      : \"left hand\";\n    const rightName = baseTrackName\n      ? `${baseTrackName}: right hand`\n      : \"right hand\";\n    rightHandEvents.push({\n      ...createTrackNameEvent(rightName),\n      absoluteTime: 0,\n      originalTrack: trackIndices[0],\n    } as EnhancedMidiEvent);\n    leftHandEvents.push({\n      ...createTrackNameEvent(leftName),\n      absoluteTime: 0,\n      originalTrack: trackIndices[1],\n    } as EnhancedMidiEvent);\n\n    // Add global meta events to both tracks\n    let lastMetaTime = 0;\n    globalMetaEvents.forEach((event) => {\n      const deltaTime = event.absoluteTime - lastMetaTime;\n      rightHandEvents.push({ ...event, deltaTime } as EnhancedMidiEvent);\n      leftHandEvents.push({ ...event, deltaTime } as EnhancedMidiEvent);\n      lastMetaTime = event.absoluteTime;\n    });\n\n    if (forcedPanning) {\n      // Add pan right (CC #10 = 127) for right hand\n      rightHandEvents.push({\n        type: \"controller\",\n        controllerType: 10,\n        value: 127,\n        deltaTime: 0,\n        channel: channel,\n        originalTrack: trackIndices[0],\n        absoluteTime: 0,\n      } as EnhancedMidiEvent);\n\n      // Add pan left (CC #10 = 0) for left hand\n      leftHandEvents.push({\n        type: \"controller\",\n        controllerType: 10,\n        value: 0,\n        deltaTime: 0,\n        channel: leftHandChannel,\n        originalTrack: trackIndices[1],\n        absoluteTime: 0,\n      } as EnhancedMidiEvent);\n    }\n\n    let rightHandLastEventTime = 0;\n    let leftHandLastEventTime = 0;\n\n    // Split events between hands\n    mergedEvents.forEach((event) => {\n      if (!(\"channel\" in event)) {\n        // Handle non-channel events (except global meta events which were handled earlier)\n        if (!isGlobalMetaEvent(event)) {\n          rightHandLastEventTime = pushEventWithDeltaTime(\n            event,\n            rightHandEvents,\n            rightHandLastEventTime,\n          );\n          leftHandLastEventTime = pushEventWithDeltaTime(\n            event,\n            leftHandEvents,\n            leftHandLastEventTime,\n          );\n        }\n        return;\n      }\n\n      if (event.channel !== channel) return;\n\n      const isFirstTrack = event.originalTrack === trackIndices[0];\n      if (isNoteOrPitchBendEvent(event)) {\n        if (isFirstTrack || event.type === \"noteOff\") {\n          rightHandLastEventTime = pushEventWithDeltaTime(\n            event,\n            rightHandEvents,\n            rightHandLastEventTime,\n            channel,\n          );\n        }\n        if (!isFirstTrack || event.type === \"noteOff\") {\n          leftHandLastEventTime = pushEventWithDeltaTime(\n            event,\n            leftHandEvents,\n            leftHandLastEventTime,\n            leftHandChannel,\n          );\n        }\n      } else if (event.type === \"programChange\") {\n        // Copy program changes to both hands to maintain the same instrument\n        rightHandLastEventTime = pushEventWithDeltaTime(\n          event,\n          rightHandEvents,\n          rightHandLastEventTime,\n          channel,\n        );\n        leftHandLastEventTime = pushEventWithDeltaTime(\n          event,\n          leftHandEvents,\n          leftHandLastEventTime,\n          leftHandChannel,\n        );\n      } else {\n        // Skip existing pan control messages when forced panning is enabled\n        if (\n          forcedPanning &&\n          event.type === \"controller\" &&\n          event.controllerType === 10\n        ) {\n          return;\n        }\n\n        // Copy other channel events to both tracks\n        rightHandLastEventTime = pushEventWithDeltaTime(\n          event,\n          rightHandEvents,\n          rightHandLastEventTime,\n          channel,\n        );\n        leftHandLastEventTime = pushEventWithDeltaTime(\n          event,\n          leftHandEvents,\n          leftHandLastEventTime,\n          leftHandChannel,\n        );\n      }\n    });\n\n    // Clean up events and ensure track endings\n    const cleanedRightHandEvents = rightHandEvents.map(\n      ({ absoluteTime, originalTrack, ...event }) => event,\n    );\n    const cleanedLeftHandEvents = leftHandEvents.map(\n      ({ absoluteTime, originalTrack, ...event }) => event,\n    );\n\n    newTracks.push(\n      ensureTrackEnding(cleanedRightHandEvents),\n      ensureTrackEnding(cleanedLeftHandEvents),\n    );\n  }\n\n  // Add remaining tracks unchanged, ensuring they have end markers\n  midi.tracks.forEach((track, trackIndex) => {\n    const hasProcessedChannel = track.some(\n      (event) => \"channel\" in event && processedChannels.has(event.channel),\n    );\n    if (!hasProcessedChannel) {\n      newTracks.push(ensureTrackEnding(track));\n    }\n  });\n\n  // Create new MIDI file\n  const newMidiData: MidiData = {\n    header: midi.header,\n    tracks: newTracks,\n  };\n\n  // Write the modified MIDI data\n  const outputData = writeMidi(newMidiData);\n  return new Uint8Array(outputData);\n}\n\nexport default transformMidi;\n","export const GM_INSTRUMENTS = [\n  'Piano         ',\n  'Bright Piano  ',\n  'Electric Piano',\n  'Honky-tonk    ',\n  'Rhodes Piano  ',\n  'FM Piano      ',\n  'Harpsichord   ',\n  'Clavinet      ',\n  'Celesta       ',\n  'Glockenspiel  ',\n  'Music Box     ',\n  'Vibraphone    ',\n  'Marimba       ',\n  'Xylophone     ',\n  'Tubular Bells ',\n  'Dulcimer      ',\n  'Drawbar Organ ',\n  'Perc Organ    ',\n  'Rock Organ    ',\n  'Church Organ  ',\n  'Reed Organ    ',\n  'Accordion     ',\n  'Harmonica     ',\n  'Accordion     ',\n  'Steel Guitar  ',\n  'Nylon Guitar  ',\n  'Jazz Guitar   ',\n  'Clean Guitar  ',\n  'Muted Guitar  ',\n  'Overdrive Guit',\n  'Distort Guitar',\n  'Guit Harmonics',\n  'Acoustic Bass ',\n  'Finger Bass   ',\n  'Picked Bass   ',\n  'Fretless Bass ',\n  'Slap Bass 1   ',\n  'Slap Bass 2   ',\n  'Synth Bass 1  ',\n  'Synth Bass 2  ',\n  'Violin        ',\n  'Viola         ',\n  'Cello         ',\n  'Contrabass    ',\n  'Trem Strings  ',\n  'Pizz Strings  ',\n  'Harp          ',\n  'Timpani       ',\n  'String Ens 1  ',\n  'String Ens 2  ',\n  'Syn Strings 1 ',\n  'Syn Strings 2 ',\n  'Choir Aahs    ',\n  'Voice Oohs    ',\n  'Synth Voice   ',\n  'Orch Hit      ',\n  'Trumpet       ',\n  'Trombone      ',\n  'Tuba          ',\n  'Muted Trumpet ',\n  'French Horn   ',\n  'Brass Section ',\n  'SynthBrass 1  ',\n  'SynthBrass 2  ',\n  'Soprano Sax   ',\n  'Alto Sax      ',\n  'Tenor Sax     ',\n  'Baritone Sax  ',\n  'Oboe          ',\n  'English Horn  ',\n  'Bassoon       ',\n  'Clarinet      ',\n  'Piccolo       ',\n  'Flute         ',\n  'Recorder      ',\n  'Pan Flute     ',\n  'Blown Bottle  ',\n  'Shakuhachi    ',\n  'Whistle       ',\n  'Ocarina       ',\n  'Lead: Square  ',\n  'Lead: Sawtooth',\n  'Lead: Calliope',\n  'Lead: Chiff   ',\n  'Lead: Charang ',\n  'Lead: Voice   ',\n  'Lead: Fifths  ',\n  'Lead: Bass    ',\n  'Pad: New Age  ',\n  'Pad: Warm     ',\n  'Pad: Polysynth',\n  'Pad: Choir    ',\n  'Pad: Bowed    ',\n  'Pad: Metallic ',\n  'Pad: Halo     ',\n  'Pad: Sweep    ',\n  'FX: Rain      ',\n  'FX: Soundtrack',\n  'FX: Crystal   ',\n  'FX: Atmosphere',\n  'FX: Brightness',\n  'FX: Goblins   ',\n  'FX: Echoes    ',\n  'FX: Sci-fi    ',\n  'Sitar         ',\n  'Banjo         ',\n  'Shamisen      ',\n  'Koto          ',\n  'Kalimba       ',\n  'Bag pipe      ',\n  'Fiddle        ',\n  'Shanai        ',\n  'Tinkle Bell   ',\n  'Agogo         ',\n  'Steel Drums   ',\n  'Woodblock     ',\n  'Taiko Drum    ',\n  'Melodic Tom   ',\n  'Synth Drum    ',\n  'Reverse Cymbal',\n  'Fret Noise    ',\n  'Breath Noise  ',\n  'Seashore      ',\n  'Bird Tweet    ',\n  'Telephone Ring',\n  'Helicopter    ',\n  'Applause      ',\n  'Gunshot       ',\n];\n\nexport const GM_DRUM_KITS = {\n  0:  'Std Drum Kit  ',\n  8:  'Room Drum Kit ',\n  16: 'Power Drum Kit',\n  24: 'Elec Drum Kit ',\n  25: 'TR808 Drum Kit',\n  32: 'Jazz Drum Kit ',\n  40: 'Brush Drum Kit',\n};\n","import autoBind from \"auto-bind\";\nimport chardet from \"chardet\";\nimport iconv from \"iconv-lite\";\nimport { parseNotes } from \"../components/rawl/parseMidi\";\n\nconst MIDIEvents = require(\"midievents\");\nrequire(\"./midi/midi-helpers\");\n\n/**\n * The MIDIFilePlayer is the engine that parses MIDI file data, and fires\n * appropriate methods on a MIDI softsynth (noteOn, noteOff, etc.) or forwards\n * MIDI messages to Web MIDI devices.\n *\n * A lot of complexity was introduced in the MIDIFilePlayer in an effort to\n * play nicely with hardware MIDI devices. Behaviors that are deterministic\n * in a softsynth can be nondeterministic on a hardware device, such as\n * skipping silence at the beginning of a MIDI file, or seeking through the\n * file. Non-note events must be replayed in these cases, and throttled for\n * hardware devices, especially in the case of sysex commands that might make\n * the hardware busy for 0.5 seconds, such as a GM reset command sent to a\n * Roland SC-55. The time allowed for these events is a best-guess - so your\n * mileage may vary.\n */\n\n// Constants\nconst BUFFER_AHEAD = 33;\nconst DELAY_MS_PER_CC_EVENT = 2;\n// const DELAY_MS_PER_SYSEX_EVENT = 15;\nconst DELAY_MS_PER_SYSEX_BYTE = 0.5;\nconst DELAY_MS_PER_XG_SYSTEM_EVENT = 500;\n\nconst CC_SUSTAIN_PEDAL = 64;\nconst CC_ALL_SOUND_OFF = 120;\nconst CC_RESET_ALL_CONTROLLERS = 121;\nconst SYSEX_GM_RESET = [0x7e, 0x7f, 0x09, 0x01, 0xf7];\nconst SEQUENCED_CONTROLLERS = [6, 38, 96, 97, 98, 99, 100, 101];\nconst META_LABELS = {\n  [MIDIEvents.EVENT_META_TEXT]: \"Text\",\n  [MIDIEvents.EVENT_META_COPYRIGHT_NOTICE]: \"Copyright\",\n  [MIDIEvents.EVENT_META_TRACK_NAME]: \"Track\",\n  [MIDIEvents.EVENT_META_INSTRUMENT_NAME]: \"Instrument\",\n  [MIDIEvents.EVENT_META_LYRICS]: \"Lyrics\",\n  [MIDIEvents.EVENT_META_MARKER]: \"Marker\",\n  [MIDIEvents.EVENT_META_CUE_POINT]: \"Cue point\",\n};\n\nfunction printSysex(data) {\n  return (\n    \"[F0 \" +\n    data.map((n) => (\"0\" + n.toString(16)).slice(-2)).join(\" \") +\n    \"]\"\n  ).toUpperCase();\n}\n\n// MIDIPlayer constructor\nfunction MIDIPlayer(options) {\n  autoBind(this);\n  options = options || {};\n  this.output = options.output || null; // Web MIDI output device (has a .send() method)\n  this.synth = options.synth || null; // MIDI synth (has .noteOn(), .noteOff(), render()...)\n  this.programChangeCb = options.programChangeCb;\n  this.speed = 1;\n  this.skipSilence = options.skipSilence || false; // skip silence at beginning of file\n  this.lastProcessPlayTimestamp = 0;\n  this.lastSendTimestamp = 0;\n  this.events = [];\n  this.paused = true;\n  this.useWebMIDI = false;\n  this.sampleRate = options.sampleRate || 44100;\n\n  this.channelsInUse = [];\n  this.channelMask = [];\n  this.channelProgramNums = [];\n  this.textInfo = [];\n  this.setChipStateDump = options.setChipStateDump;\n  this.trackNames = {};\n  this.channelToTrack = {};\n\n  window.addEventListener(\"unload\", this.stop);\n}\n\n// Parsing all tracks and add their events in a single event queue\nMIDIPlayer.prototype.load = function (midiFile, useTrackLoops = false) {\n  this.stop();\n  this.position = 0;\n  this.elapsedTime = 0;\n\n  const tracks = midiFile.tracks.map((_, i) => midiFile.getTrackEvents(i));\n  if (useTrackLoops) {\n    console.debug(\"Processing MIDI track loops...\");\n    this.events = midiFile.getLoopedEvents(tracks, 2);\n  } else {\n    this.events = midiFile.getEvents();\n  }\n  const timeEvents = midiFile.getTimeEvents(tracks);\n  this.summarizeMidiEvents();\n\n  const activeChannels = [];\n  for (let i = 0; i < 16; i++) {\n    if (this.channelsInUse[i]) {\n      activeChannels.push(i);\n    }\n  }\n\n  const result = parseNotes({\n    events: this.events,\n    activeChannels,\n    timebase: midiFile.header.datas.getUint16(12),\n    timeEvents,\n  });\n\n  this.setChipStateDump?.(result);\n\n  return result;\n};\n\nMIDIPlayer.prototype.doSkipSilence = function () {\n  let firstNoteDelay = 0;\n  let messageDelay = 0;\n  let numSysexEvents = 0;\n  const firstNote = this.events.find(\n    (e) => e.subtype === MIDIEvents.EVENT_MIDI_NOTE_ON,\n  );\n  if (firstNote && firstNote.playTime > 0) {\n    // Accelerated playback of all events prior to first note\n    if (this.useWebMIDI) {\n      let message;\n      const eventList = [];\n      while (this.events[this.position] !== firstNote) {\n        const event = this.events[this.position];\n        this.position++;\n\n        // Throttle sysex events\n        // (In some cases this may actually increase the time to first note)\n        if (\n          event.type === MIDIEvents.EVENT_SYSEX ||\n          event.type === MIDIEvents.EVENT_DIVSYSEX\n        ) {\n          console.debug(\n            \"Sysex event at %s ms:\",\n            Math.floor(event.playTime),\n            printSysex(event.data),\n          );\n          if (event.data && event.data[3] === 0 && event.data[4] === 0) {\n            firstNoteDelay += DELAY_MS_PER_XG_SYSTEM_EVENT;\n            messageDelay += DELAY_MS_PER_XG_SYSTEM_EVENT;\n          } else {\n            const delay = DELAY_MS_PER_SYSEX_BYTE * event.length;\n            firstNoteDelay += delay;\n            messageDelay += delay;\n          }\n          numSysexEvents++;\n          message = [event.type, ...event.data];\n        } else if (\n          MIDIEvents.MIDI_1PARAM_EVENTS.indexOf(event.subtype) !== -1\n        ) {\n          firstNoteDelay += DELAY_MS_PER_CC_EVENT;\n          messageDelay += DELAY_MS_PER_CC_EVENT;\n          message = [(event.subtype << 4) + event.channel, event.param1];\n        } else if (\n          MIDIEvents.MIDI_2PARAMS_EVENTS.indexOf(event.subtype) !== -1\n        ) {\n          firstNoteDelay += DELAY_MS_PER_CC_EVENT;\n          messageDelay += DELAY_MS_PER_CC_EVENT;\n          message = [\n            (event.subtype << 4) + event.channel,\n            event.param1,\n            event.param2 || 0x00,\n          ];\n        } else {\n          continue;\n        }\n        eventList.push({\n          message: message,\n          timestamp: this.lastProcessPlayTimestamp + messageDelay,\n        });\n      }\n\n      eventList.forEach(({ message, timestamp }) => {\n        this.send(message, timestamp);\n      });\n      // Set lastProcessPlayTimestamp to a point in the past so that the first note event plays immediately.\n      console.log(\n        \"Time to first note %s ms was updated to %s ms; %s sysex events\",\n        Math.round(firstNote.playTime),\n        firstNoteDelay,\n        numSysexEvents,\n      );\n      this.lastProcessPlayTimestamp += firstNoteDelay - firstNote.playTime;\n    } else {\n      this.setPosition(firstNote.playTime - 1500);\n    }\n  }\n};\n\nMIDIPlayer.prototype.play = function (endCallback, playbackStartedCallback) {\n  if (0 === this.position) {\n    this.endCallback = endCallback;\n    this.reset();\n\n    this.lastProcessPlayTimestamp = performance.now();\n    if (this.skipSilence) {\n      this.doSkipSilence();\n    }\n\n    this.resume();\n    if (playbackStartedCallback) {\n      // Call the callback on the next tick to ensure playback has started\n      setTimeout(playbackStartedCallback, 0);\n    }\n    return 1;\n  }\n  return 0;\n};\n\nMIDIPlayer.prototype.processPlaySynth = function (buffer, bufferSize) {\n  this.lastProcessPlayTimestamp = performance.now();\n  const bufferStart = buffer;\n  let bytesWritten = 0;\n  let batchSize = 64;\n  let event = null;\n  const synth = this.synth;\n  const msPerBatch = (this.speed * 1000 * (batchSize / this.sampleRate)) / 2;\n\n  for (\n    let samplesRemaining = bufferSize * 2;\n    samplesRemaining > 0;\n    samplesRemaining -= batchSize\n  ) {\n    if (batchSize > samplesRemaining) batchSize = samplesRemaining;\n\n    if (!this.paused) {\n      let pos = this.position;\n      for (\n        this.elapsedTime += msPerBatch;\n        this.events[pos] && this.elapsedTime >= this.events[pos].playTime;\n        pos++\n      ) {\n        event = this.events[pos];\n        switch (event.subtype) {\n          case MIDIEvents.EVENT_MIDI_NOTE_ON:\n            if (!this.channelMask[event.channel]) break;\n            if (event.param2 === 0)\n              // velocity\n              synth.noteOff(event.channel, event.param1);\n            else synth.noteOn(event.channel, event.param1, event.param2);\n            break;\n          case MIDIEvents.EVENT_MIDI_NOTE_OFF:\n            synth.noteOff(event.channel, event.param1);\n            break;\n          case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n            this.handleProgramChange(event.channel, event.param1);\n            synth.programChange(event.channel, event.param1);\n            break;\n          case MIDIEvents.EVENT_MIDI_PITCH_BEND:\n            synth.pitchBend(event.channel, (event.param2 << 7) + event.param1);\n            break;\n          case MIDIEvents.EVENT_MIDI_CONTROLLER:\n            synth.controlChange(event.channel, event.param1, event.param2);\n            break;\n          // case MIDIEvents.EVENT_MIDI_CHANNEL_AFTERTOUCH:\n          //   synth.channelAftertouch(event.channel, event.param1);\n          //   break;\n          // case MIDIEvents.EVENT_MIDI_NOTE_AFTERTOUCH:\n          //   synth.noteAftertouch(event.channel, event.param1, event.param2);\n          //   break;\n          default:\n            break;\n        }\n      }\n      this.position = pos;\n    }\n\n    // Render the block of audio samples in float format\n    synth.render(buffer, batchSize);\n    buffer += batchSize * 4; // sizeof(float)\n    bytesWritten += batchSize;\n  }\n\n  if (this.position >= this.events.length) {\n    // Last MIDI event has been processed.\n    // Continue synthesis until silence is detected.\n    // This allows voices with a long release tail to complete.\n    // Fast method: when entire buffer is below threshold, consider it silence.\n    let synthStillActive = 0;\n    const threshold = 0.001;\n    for (let i = 0; i < bufferSize; i += 8) {\n      if (synth.getValue(bufferStart + i, \"float\") > threshold) {\n        // Check left channel only\n        synthStillActive = 1; // Exit early\n        break;\n      }\n    }\n    if (synthStillActive === 0) {\n      this.position = 0;\n      this.paused = true;\n      return 0;\n    }\n  }\n\n  return bytesWritten;\n};\n\nMIDIPlayer.prototype.processPlay = function () {\n  const now = performance.now();\n  const deltaTime = (now - this.lastProcessPlayTimestamp) * this.speed;\n  this.lastProcessPlayTimestamp = now;\n\n  if (this.paused) return;\n\n  let throttleDelayMs = 0;\n  let delay = 0;\n  let message = null;\n\n  this.elapsedTime += deltaTime;\n  let event = this.events[this.position];\n  while (\n    this.events[this.position] &&\n    event.playTime < this.elapsedTime + BUFFER_AHEAD\n  ) {\n    message = null;\n    delay = 0;\n    if (\n      event.type === MIDIEvents.EVENT_SYSEX ||\n      event.type === MIDIEvents.EVENT_DIVSYSEX\n    ) {\n      // Spread out scheduling of sysex messages. Example: Predator (XG).mid\n      message = [event.type, ...event.data];\n      if (event.data && event.data[3] === 0 && event.data[4] === 0) delay = 50;\n      else delay = event.data.length / 2;\n      if (throttleDelayMs > 0)\n        console.debug(\n          \"Sysex event at %s ms delayed %s ms:\",\n          Math.floor(event.playTime),\n          throttleDelayMs,\n          printSysex(event.data),\n        );\n      else\n        console.debug(\n          \"Sysex event at %s ms:\",\n          Math.floor(event.playTime),\n          printSysex(event.data),\n        );\n    } else {\n      switch (event.subtype) {\n        case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n          this.handleProgramChange(event.channel, event.param1);\n          message = [(event.subtype << 4) + event.channel, event.param1];\n          break;\n        case MIDIEvents.EVENT_MIDI_CHANNEL_AFTERTOUCH:\n          message = [(event.subtype << 4) + event.channel, event.param1];\n          break;\n        case MIDIEvents.EVENT_MIDI_NOTE_OFF:\n        case MIDIEvents.EVENT_MIDI_NOTE_ON:\n        case MIDIEvents.EVENT_MIDI_NOTE_AFTERTOUCH:\n        case MIDIEvents.EVENT_MIDI_CONTROLLER:\n        case MIDIEvents.EVENT_MIDI_PITCH_BEND:\n          if (!this.channelMask[event.channel]) break;\n          message = [\n            (event.subtype << 4) + event.channel,\n            event.param1,\n            event.param2 || 0x00,\n          ];\n          break;\n        default:\n      }\n    }\n    if (message) {\n      const scaledPlayTime =\n        (event.playTime - this.elapsedTime) / this.speed +\n        this.lastProcessPlayTimestamp;\n      this.send(message, scaledPlayTime + throttleDelayMs);\n      throttleDelayMs += delay;\n      this.lastSendTimestamp = scaledPlayTime;\n    }\n    this.position++;\n    event = this.events[this.position];\n  }\n\n  if (this.position >= this.events.length) {\n    setTimeout(this.endCallback, BUFFER_AHEAD + 100);\n    this.position = 0;\n    this.paused = true;\n  }\n};\n\nMIDIPlayer.prototype.handleProgramChange = function (channel, program) {\n  this.channelProgramNums[channel] = program;\n  this.programChangeCb?.();\n};\n\nMIDIPlayer.prototype.togglePause = function () {\n  this.paused = !this.paused;\n  if (this.paused === true) {\n    this.panic(this.lastSendTimestamp + 10);\n  }\n  return this.paused;\n};\n\nMIDIPlayer.prototype.resume = function () {\n  this.paused = false;\n};\n\nMIDIPlayer.prototype.stop = function () {\n  this.paused = true;\n  this.panic();\n};\n\nMIDIPlayer.prototype.send = function (message, timestamp) {\n  try {\n    this.output.send(message, timestamp);\n  } catch (e) {\n    console.warn(e);\n    console.warn(message);\n  }\n};\n\n// TODO: fix confusion between reset and panic\nMIDIPlayer.prototype.panic = function (timestamp) {\n  if (this.useWebMIDI) {\n    for (let ch = 0; ch < 16; ch++) {\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_SUSTAIN_PEDAL, 0],\n        timestamp,\n      );\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_ALL_SOUND_OFF, 0],\n        timestamp,\n      );\n      this.send(\n        [\n          (MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch,\n          CC_RESET_ALL_CONTROLLERS,\n          0,\n        ],\n        timestamp,\n      );\n    }\n  } else {\n    // Release sustain pedal on all channels\n    for (let ch = 0; ch < 16; ch++) {\n      this.synth?.controlChange(ch, CC_SUSTAIN_PEDAL, 0);\n    }\n    this.synth?.panic();\n  }\n};\n\nMIDIPlayer.prototype.reset = function (timestamp) {\n  if (this.useWebMIDI) {\n    this.send([MIDIEvents.EVENT_SYSEX, ...SYSEX_GM_RESET]);\n    for (let ch = 0; ch < 16; ch++) {\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_SUSTAIN_PEDAL, 0],\n        timestamp,\n      );\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_ALL_SOUND_OFF, 0],\n        timestamp,\n      );\n      this.send(\n        [\n          (MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch,\n          CC_RESET_ALL_CONTROLLERS,\n          0,\n        ],\n        timestamp,\n      );\n    }\n  } else {\n    this.synth.reset();\n  }\n  this.position = 0;\n  this.paused = true;\n};\n\n// --- Chip Player JS support ---\n\nMIDIPlayer.prototype.getDuration = function () {\n  if (this.events && this.events.length > 0) {\n    return this.events[this.events.length - 1].playTime;\n  }\n  return 0;\n};\n\nMIDIPlayer.prototype.getPosition = function () {\n  return this.elapsedTime;\n};\n\nMIDIPlayer.prototype.setOutput = function (output) {\n  this.panic(this.lastSendTimestamp + 10);\n  this.output = output;\n  // Trigger replay of all program change events\n  this.setPosition(this.getPosition() - 10);\n};\n\nMIDIPlayer.prototype.getSpeed = function () {\n  return this.speed;\n};\n\nMIDIPlayer.prototype.setSpeed = function (speed) {\n  this.speed = Math.max(0.1, Math.min(4, speed));\n};\n\nMIDIPlayer.prototype.setPositionSynth = function (eventList) {\n  const synth = this.synth;\n  eventList.forEach((event) => {\n    switch (event.subtype) {\n      case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n        // handleProgramChange() is called in setPosition()\n        synth.programChange(event.channel, event.param1);\n        break;\n      case MIDIEvents.EVENT_MIDI_CONTROLLER:\n      default:\n        synth.controlChange(event.channel, event.param1, event.param2);\n        break;\n    }\n  });\n};\n\nMIDIPlayer.prototype.setPositionWebMidi = function (ms, eventList) {\n  const wasPaused = this.paused;\n  this.paused = true;\n\n  let message;\n  eventList.forEach((event, i) => {\n    if (event.subtype === MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE) {\n      // handleProgramChange() is called in setPosition()\n      message = [(event.subtype << 4) + event.channel, event.param1];\n    } else if (event.subtype === MIDIEvents.EVENT_MIDI_CONTROLLER) {\n      message = [\n        (event.subtype << 4) + event.channel,\n        event.param1,\n        event.param2,\n      ];\n    }\n    this.send(message, this.lastSendTimestamp + 20 + i * DELAY_MS_PER_CC_EVENT);\n  });\n\n  const numEvents = eventList.length;\n  const messageDelay = numEvents * DELAY_MS_PER_CC_EVENT;\n  console.log(\n    \"Scheduled %s events. Resuming playback in %s ms...\",\n    numEvents,\n    messageDelay,\n  );\n  if (!wasPaused) {\n    setTimeout(this.resume, messageDelay);\n  }\n};\n\nMIDIPlayer.prototype.setPosition = function (ms) {\n  if (ms < 0 || ms > this.getDuration()) return;\n\n  this.lastProcessPlayTimestamp = performance.now();\n  this.panic(this.lastSendTimestamp + 10);\n  let eventMap = {};\n  let eventList = [];\n  let pos = this.position;\n\n  if (ms < this.elapsedTime) {\n    pos = 0;\n  }\n\n  for (const channel in this.channelsInUse) {\n    this.synth.pitchBend(channel, 8192);\n  }\n\n  // TODO: if we seek inside some notes, it's best to retrigger their noteOn, eg. for string pads.\n\n  while (this.events[pos] && this.events[pos].playTime < ms) {\n    const event = this.events[pos];\n    if (event.subtype === MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE) {\n      this.handleProgramChange(event.channel, event.param1);\n      eventMap[`${event.subtype}-${event.channel}`] = event;\n    } else if (event.subtype === MIDIEvents.EVENT_MIDI_CONTROLLER) {\n      // These controllers (RPN, NRPN, Data Entry) must be sequenced in order\n      if (SEQUENCED_CONTROLLERS.includes(event.param1)) {\n        // console.log('Sequenced event: ch %d -- %d - %d -- %d ms', event.channel, event.param1, event.param2, event.playTime);\n        eventList.push(event);\n      } else {\n        // All others, we only care about the last event\n        eventMap[`${event.subtype}-${event.channel}-${event.param1}`] = event;\n      }\n    }\n    pos++;\n  }\n\n  eventList = Object.values(eventMap).concat(eventList);\n\n  if (this.useWebMIDI) {\n    this.setPositionWebMidi(ms, eventList);\n  } else {\n    this.setPositionSynth(eventList);\n  }\n\n  this.elapsedTime = ms;\n  this.position = pos;\n};\n\nMIDIPlayer.prototype.getChannelInUse = function (ch) {\n  return !!this.channelsInUse[ch];\n};\n\nMIDIPlayer.prototype.getChannelProgramNum = function (ch) {\n  return this.channelProgramNums[ch];\n};\n\nMIDIPlayer.prototype.summarizeMidiEvents = function () {\n  this.textInfo = [];\n  const channelsInUse = this.channelsInUse;\n  const channelProgramNums = this.channelProgramNums;\n  const channelMask = this.channelMask;\n  for (let i = 0; i < 16; i++) {\n    channelsInUse[i] = 0;\n    channelProgramNums[i] = 0;\n    channelMask[i] = true;\n  }\n\n  for (let j = 0; j < this.events.length; j++) {\n    const event = this.events[j];\n    const { channel, track } = event;\n    if (typeof channel !== \"undefined\" && typeof track !== \"undefined\") {\n      this.channelToTrack[channel] = track;\n    }\n    switch (event.subtype) {\n      case MIDIEvents.EVENT_MIDI_NOTE_ON:\n        channelsInUse[channel] = 1;\n        break;\n      case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n        if (!channelProgramNums[channel])\n          this.handleProgramChange(channel, event.param1);\n        break;\n      case MIDIEvents.EVENT_META_TEXT:\n      case MIDIEvents.EVENT_META_COPYRIGHT_NOTICE:\n      case MIDIEvents.EVENT_META_TRACK_NAME:\n      // case MIDIEvents.EVENT_META_INSTRUMENT_NAME:\n      case MIDIEvents.EVENT_META_LYRICS:\n      case MIDIEvents.EVENT_META_MARKER:\n      case MIDIEvents.EVENT_META_CUE_POINT:\n        const text = event.data\n          .map((c) => String.fromCharCode(c))\n          .join(\"\")\n          .trim();\n        if (text && !text.match(/nstd/i))\n          this.textInfo.push(`${META_LABELS[event.subtype]}: ${text}`);\n        if (event.subtype === MIDIEvents.EVENT_META_TRACK_NAME) {\n          this.trackNames[track] = iconv.decode(\n            event.data,\n            chardet.detect(event.data),\n          );\n        }\n        break;\n      default:\n        break;\n    }\n  }\n};\n\nMIDIPlayer.prototype.setChannelMute = function (ch, isMuted) {\n  this.channelMask[ch] = !isMuted;\n  if (isMuted) {\n    // TODO separate synth from webMidi\n    const timestamp = this.lastSendTimestamp + 10;\n    this.send(\n      [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_SUSTAIN_PEDAL, 0],\n      timestamp,\n    );\n    this.send(\n      [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_ALL_SOUND_OFF, 0],\n      timestamp,\n    );\n    this.synth.panicChannel(ch);\n  }\n};\n\nMIDIPlayer.prototype.setUseWebMIDI = function (useWebMIDI) {\n  this.useWebMIDI = useWebMIDI;\n  // Trigger replay of all program change events\n  this.setPosition(this.getPosition() - 10);\n};\n\nexport default MIDIPlayer;\n","import EventEmitter from \"events\";\n//\n// Player can be viewed as a state machine with\n// 3 states (playing, paused, stopped) and 5 transitions\n// (open, pause, unpause, seek, stop).\n// If the player has reached end of the song,\n// it is in the terminal \"stopped\" state and is\n// no longer playable:\n//                          (seek) \n//                         ^          v\n//                           \n//   stopped (open)>     playing     (stop)> stopped \n//                            \n//                        |  ^\n//                (pause) > paused  (unpause)\n//                          \n//\n// In the \"open\" transition, the audioNode is connected.\n// In the \"stop\" transition, it is disconnected.\n// \"stopped\" is synonymous with closed/empty.\n//\nexport default class Player extends EventEmitter {\n  /**\n   * @param {object} core - Emscripten module\n   * @param {number} sampleRate - Audio sample rate\n   * @param {number} [bufferSize=2048] - Audio buffer size\n   * @param {boolean} [debug=false] - Enable debug logging\n   */\n  constructor(\n    core,\n    sampleRate,\n    bufferSize = 2048,\n    debug = false,\n    setChipStateDump,\n    appTogglePause,\n  ) {\n    super();\n\n    this.core = core;\n    this.paused = true;\n    this.stopped = true;\n    this.fileExtensions = [];\n    this.metadata = null;\n    this.sampleRate = sampleRate;\n    this.bufferSize = bufferSize;\n    this.debug = debug;\n    this.timeCount = 0;\n    this.renderTime = 0;\n    this.perfLoggingInterval = 100;\n    this.paramDefs = [];\n    this.params = {};\n    this.setChipStateDump = setChipStateDump;\n    this.appTogglePause = appTogglePause;\n  }\n\n  togglePause() {\n    this.paused = !this.paused;\n    return this.paused;\n  }\n\n  isPaused() {\n    return this.paused;\n  }\n\n  resume() {\n    this.stopped = false;\n    this.paused = false;\n  }\n\n  canPlay(fileExtension) {\n    return this.fileExtensions.indexOf(fileExtension.toLowerCase()) !== -1;\n  }\n\n  /**\n   * @param {ArrayBuffer} data - File contents\n   * @param {string} filename - Filename for metadata fallback\n   */\n  loadData(data, filename) {\n    throw Error(\"Player.loadData() must be implemented.\");\n  }\n\n  stop() {\n    throw Error(\"Player.stop() must be implemented.\");\n  }\n\n  isPlaying() {\n    throw Error(\"Player.isPlaying() must be implemented.\");\n  }\n\n  getTempo() {\n    // TODO: rename all tempo to speed\n    console.warn(\"Player.getTempo() not implemented for this player.\");\n    return 1;\n  }\n\n  setTempo() {\n    console.warn(\"Player.setTempo() not implemented for this player.\");\n  }\n\n  setFadeout(startMs) {\n    console.warn(\"Player.setFadeout() not implemented for this player.\");\n  }\n\n  getDurationMs() {\n    console.warn(\"Player.getDurationMs() not implemented for this player.\");\n    return 5000;\n  }\n\n  getPositionMs() {\n    console.warn(\"Player.getPositionMs() not implemented for this player.\");\n    return 0;\n  }\n\n  seekMs(ms) {\n    console.warn(\"Player.seekMs() not implemented for this player.\");\n  }\n\n  getVoiceName(index) {\n    console.warn(\"Player.getVoiceName() not implemented for this player.\");\n  }\n\n  getVoiceMask() {\n    console.warn(\"Player.getVoiceMask() not implemented for this player.\");\n    return [];\n  }\n\n  setVoiceMask() {\n    console.warn(\"Player.setVoiceMask() not implemented for this player.\");\n  }\n\n  getNumVoices() {\n    return 0;\n  }\n\n  getMetadata() {\n    return {\n      title: null,\n      author: null,\n    };\n  }\n\n  getParamDefs() {\n    return this.paramDefs;\n  }\n\n  getBasePlayerState() {\n    return {\n      metadata: this.getMetadata(),\n      durationMs: this.getDurationMs(),\n      positionMs: this.getPositionMs(),\n      numVoices: this.getNumVoices(),\n      paramDefs: this.getParamDefs(),\n      tempo: this.getTempo(),\n      voiceMask: this.getVoiceMask(),\n      voiceNames: [...Array(this.getNumVoices())].map((_, i) =>\n        this.getVoiceName(i),\n      ),\n      isStopped: this.stopped,\n      isPaused: this.paused,\n    };\n  }\n\n  suspend() {\n    // // this.stopped = true;\n    this.paused = true;\n    this.appTogglePause();\n    this.seekMs(0);\n  }\n\n  processAudio(output) {\n    const start = performance.now();\n    this.processAudioInner(output);\n    const end = performance.now();\n\n    if (this.debug) {\n      this.renderTime += end - start;\n      this.timeCount++;\n      if (this.timeCount >= this.perfLoggingInterval) {\n        const cost = this.renderTime / this.timeCount;\n        const budget = (1000 * this.bufferSize) / this.sampleRate;\n        console.log(\n          \"[%s] %s ms to render %d frames (%s ms) (%s% utilization)\",\n          this.constructor.name,\n          cost.toFixed(2),\n          this.bufferSize,\n          budget.toFixed(1),\n          ((100 * cost) / budget).toFixed(1),\n        );\n        this.renderTime = 0.0;\n        this.timeCount = 0;\n      }\n    }\n  }\n\n  processAudioInner() {\n    throw Error(\"Player.processAudioInner() must be implemented.\");\n  }\n\n  muteAudioDuringCall(audioNode, fn) {\n    if (\n      audioNode &&\n      audioNode.context.state === \"running\" &&\n      this.paused === false\n    ) {\n      const audioprocess = audioNode.onaudioprocess;\n      // Workaround to eliminate stuttering:\n      // Temporarily swap the audio process callback, and do the\n      // expensive operation only after buffer is filled with silence\n      audioNode.onaudioprocess = function (e) {\n        for (let i = 0; i < e.outputBuffer.numberOfChannels; i++) {\n          e.outputBuffer.getChannelData(i).fill(0);\n        }\n        fn();\n        audioNode.onaudioprocess = audioprocess;\n      };\n    } else {\n      fn();\n    }\n  }\n\n  handleFileSystemReady() {}\n\n  static metadataFromFilepath(filepath) {\n    // Guess metadata from path/filename for MIDI files.\n    // Assumes structure:  /Game MIDI/{game}/**/{title}\n    //             ...or:  /MIDI/{artist}/**/{title}\n    const parts = filepath.split(\"/\");\n    const meta = {};\n    meta.title = parts.pop();\n    meta.system = parts.shift();\n    if (meta.system === \"Game MIDI\") {\n      meta.game = parts.shift();\n    } else {\n      meta.artist = parts.shift();\n    }\n    return meta;\n  }\n}\n","import debounce from \"lodash/debounce\";\nimport MIDIFile from \"midifile\";\n\nimport autoBind from \"auto-bind\";\nimport range from \"lodash/range\";\nimport { DUMMY_CALLBACK } from \"../components/App\";\nimport {\n  SOUNDFONTS,\n  SOUNDFONT_MOUNTPOINT,\n  SOUNDFONT_URL_PATH,\n} from \"../config\";\nimport { GM_DRUM_KITS, GM_INSTRUMENTS } from \"../gm-patch-map\";\nimport { ensureEmscFileWithUrl, remap01 } from \"../util\";\nimport MIDIFilePlayer from \"./MIDIFilePlayer\";\nimport Player from \"./Player\";\n\n// Define the progressive soundfont loading sequence\nconst PROGRESSIVE_SOUNDFONTS = [\n  // { name: \"pcbeep.sf2\", size: \"31 KB\", qualityLevel: 1 },\n  { name: \"2MBGMGS.SF2\", size: \"2.1 MB\", qualityLevel: 2 },\n  { name: \"masquerade55v006.sf2\", size: \"18.4 MB\", qualityLevel: 3 },\n  // { name: \"Abbey-Steinway-D-v1.9.sf2\", size: \"40.2 MB\", qualityLevel: 4 },\n];\n\nlet core = null;\n\nconst dummyMidiOutput = {\n  send: DUMMY_CALLBACK,\n};\n\nconst midiDevices = [dummyMidiOutput];\n\nconst fileExtensions = [\"mid\", \"midi\", \"smf\"];\n\nconst MIDI_ENGINE_LIBFLUIDLITE = 0;\nconst MIDI_ENGINE_LIBADLMIDI = 1;\nconst MIDI_ENGINE_WEBMIDI = 2;\n\nexport default class MIDIPlayer extends Player {\n  paramDefs = [\n    {\n      id: \"synthengine\",\n      label: \"Synth Engine\",\n      type: \"enum\",\n      options: [\n        {\n          label: \"MIDI Synthesis Engine\",\n          items: [\n            {\n              label: \"SoundFont (libFluidLite)\",\n              value: MIDI_ENGINE_LIBFLUIDLITE,\n            },\n            {\n              label: \"Adlib/OPL3 FM (libADLMIDI)\",\n              value: MIDI_ENGINE_LIBADLMIDI,\n            },\n            { label: \"MIDI Device (Web MIDI)\", value: MIDI_ENGINE_WEBMIDI },\n          ],\n        },\n      ],\n      defaultValue: 0,\n    },\n    {\n      id: \"soundfont\",\n      label: \"Soundfont\",\n      type: \"enum\",\n      options: SOUNDFONTS,\n      defaultValue: SOUNDFONTS[2].items[0].value,\n      // defaultValue: SOUNDFONTS[1].items[0].value,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"reverb\",\n      label: \"Reverb\",\n      type: \"number\",\n      min: 0.0,\n      max: 1.0,\n      step: 0.01,\n      defaultValue: 0.0,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"chorus\",\n      label: \"Chorus\",\n      type: \"number\",\n      min: 0.0,\n      max: 1.0,\n      step: 0.01,\n      defaultValue: 0.0,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"fluidpoly\",\n      label: \"Polyphony\",\n      type: \"number\",\n      min: 4,\n      max: 256,\n      step: 4,\n      defaultValue: 128,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"opl3bank\",\n      label: \"OPL3 Bank\",\n      type: \"enum\",\n      options: [],\n      defaultValue: 58, // Windows 95 bank\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBADLMIDI,\n      },\n    },\n    {\n      id: \"mididevice\",\n      label: \"MIDI Device\",\n      type: \"enum\",\n      options: [\n        {\n          label: \"MIDI Output Devices\",\n          items: [{ label: \"Dummy device\", value: 0 }],\n        },\n      ],\n      defaultValue: 0,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_WEBMIDI,\n      },\n    },\n    {\n      id: \"autoengine\",\n      label: \"Auto Synth Engine Switching\",\n      hint: 'Switch synth engine based on filenames. Files containing \"FM\" will play through Adlib/OPL3 synth.',\n      type: \"toggle\",\n      defaultValue: true,\n    },\n    {\n      id: \"gmreset\",\n      label: \"GM Reset\",\n      hint: \"Send a GM Reset sysex and reset all controllers on all channels.\",\n      type: \"button\",\n    },\n  ];\n\n  constructor(...args) {\n    super(...args);\n    autoBind(this);\n\n    core = this.core;\n    core._tp_init(this.sampleRate);\n\n    // Initialize Soundfont filesystem\n    core.FS.mkdir(SOUNDFONT_MOUNTPOINT);\n    core.FS.mount(core.FS.filesystems.IDBFS, {}, SOUNDFONT_MOUNTPOINT);\n\n    this.name = \"MIDI Player\";\n    this.fileExtensions = fileExtensions;\n    this.activeChannels = [];\n    this.buffer = core._malloc(this.bufferSize * 4 * 2); // f32 * 2 channels\n    this.filepathMeta = {};\n    this.midiFilePlayer = new MIDIFilePlayer({\n      // playerStateUpdate is debounced to prevent flooding program change events\n      programChangeCb: debounce(\n        () =>\n          this.emit(\"playerStateUpdate\", {\n            voiceNames: range(this.getNumVoices()).map(this.getVoiceName),\n          }),\n        200,\n      ),\n      output: dummyMidiOutput,\n      skipSilence: true,\n      sampleRate: this.sampleRate,\n      synth: {\n        // TODO: Consider removing the tiny player (tp), since a lot of MIDI is now implemented in JS.\n        //       All it's really doing is hiding the FluidSynth and libADLMIDI insances behind a singleton.\n        //       C object (\"context\") pointers could also be hidden at the JS layer, if those are annoying.\n        //       The original benefit was to tie in tml.h (MIDI file reader) which is not used any more.\n        //       Besides, MIDIPlayer.js already calls directly into libADLMIDI functions.\n        //       see also ../../scripts/build-chip-core.js:29\n        noteOn: core._tp_note_on,\n        noteOff: core._tp_note_off,\n        pitchBend: core._tp_pitch_bend,\n        controlChange: core._tp_control_change,\n        programChange: core._tp_program_change,\n        panic: core._tp_panic,\n        panicChannel: core._tp_panic_channel,\n        render: core._tp_render,\n        reset: core._tp_reset,\n        getValue: core.getValue,\n      },\n      setChipStateDump: this.setChipStateDump,\n    });\n\n    // Populate OPL3 banks\n    const numBanks = core._adl_getBanksCount();\n    const ptr = core._adl_getBankNames();\n    const oplBanks = [];\n    for (let i = 0; i < numBanks; i++) {\n      oplBanks.push({\n        label: core.UTF8ToString(core.getValue(ptr + i * 4, \"*\")),\n        value: i,\n      });\n    }\n    this.paramDefs.find((def) => def.id === \"opl3bank\").options = [\n      { label: \"OPL3 Bank\", items: oplBanks },\n    ];\n\n    this.webMidiIsInitialized = false;\n    // this.midiFilePlayer = new MIDIFilePlayer({ output: dummyMidiOutput });\n\n    // Initialize parameters\n    this.params = {};\n    // Transient parameters hold a parameter that is valid only for the current song.\n    // They are reset when another song is loaded.\n    this.transientParams = {};\n    this.paramDefs\n      .filter((p) => p.id !== \"soundfont\")\n      .forEach((p) => this.setParameter(p.id, p.defaultValue));\n\n    // Track the currently loaded soundfont quality level\n    this.soundfontQualityLevel = 0; // 0=none, 1=pcbeep, 2=2MBGMGS, 3=masquerade\n\n    // Track which soundfonts are currently loading\n    this.loadingSoundfonts = new Set();\n\n    // Track the highest quality soundfont that has been loaded\n    this.highestLoadedSoundfontIndex = -1;\n  }\n\n  handleFileSystemReady() {\n    // Start with the lowest quality soundfont for fast initial loading\n    const initialSoundfont = PROGRESSIVE_SOUNDFONTS[0].name;\n    this.setParameter(\"soundfont\", initialSoundfont);\n\n    // Begin the progressive loading sequence\n    this.startProgressiveSoundfontLoading();\n\n    this.updateSoundfontParamDefs();\n  }\n\n  // Start the progressive loading of better quality soundfonts\n  startProgressiveSoundfontLoading() {\n    // If nothing has been loaded yet, start from the beginning\n    if (this.highestLoadedSoundfontIndex < 0) {\n      this.highestLoadedSoundfontIndex = 0;\n    }\n\n    // Load the next soundfont in the sequence if we haven't loaded them all\n    this.loadNextSoundfont();\n  }\n\n  // Load the next soundfont in the sequence\n  loadNextSoundfont() {\n    const nextIndex = this.highestLoadedSoundfontIndex + 1;\n\n    // Check if there are more soundfonts to load\n    if (nextIndex < PROGRESSIVE_SOUNDFONTS.length) {\n      const nextSoundfont = PROGRESSIVE_SOUNDFONTS[nextIndex];\n\n      // Skip if already loading this soundfont\n      if (this.loadingSoundfonts.has(nextSoundfont.name)) {\n        return;\n      }\n\n      // Mark this soundfont as loading\n      this.loadingSoundfonts.add(nextSoundfont.name);\n\n      console.log(\n        `Starting to load ${nextSoundfont.name} (${nextSoundfont.size})`,\n      );\n\n      // Start loading the next soundfont\n      this.preloadSoundfont(nextSoundfont.name, () => {\n        // Update the highest loaded soundfont index\n        this.highestLoadedSoundfontIndex = nextIndex;\n\n        // Update the quality level\n        this.soundfontQualityLevel = nextSoundfont.qualityLevel;\n\n        // Remove from loading set\n        this.loadingSoundfonts.delete(nextSoundfont.name);\n\n        // Load the next one in sequence\n        this.loadNextSoundfont();\n      });\n    }\n  }\n\n  processAudioInner(channels) {\n    const useWebMIDI = this.params[\"synthengine\"] === MIDI_ENGINE_WEBMIDI;\n\n    // No early return or zero-fill during pause.\n    // Notes are allowed to ring out, and the MIDI synth behaves more like external hardware.\n\n    if (useWebMIDI) {\n      this.midiFilePlayer.processPlay();\n    } else {\n      if (this.midiFilePlayer.processPlaySynth(this.buffer, this.bufferSize)) {\n        for (let ch = 0; ch < channels.length; ch++) {\n          for (let i = 0; i < this.bufferSize; i++) {\n            channels[ch][i] = core.getValue(\n              this.buffer + // Interleaved channel format\n                i * 4 * 2 + // frame offset   * bytes per sample * num channels +\n                ch * 4, // channel offset * bytes per sample\n              \"float\",\n            );\n          }\n        }\n      } else {\n        this.stop();\n      }\n    }\n  }\n\n  metadataFromFilepath(filepath) {\n    filepath = decodeURIComponent(filepath); // unescape, %25 -> %\n    const parts = filepath.split(\"/\");\n    const len = parts.length;\n    const meta = {};\n    // HACK: MIDI metadata is guessed from filepath\n    // based on the directory structure of Chip Player catalog.\n    // Ideally, this data should be embedded in the MIDI files.\n    if (parts.length >= 3) {\n      meta.formatted = {\n        title: `${parts[1]} - ${parts[len - 1]}`,\n        subtitle: parts[0],\n      };\n    } else if (parts.length === 2) {\n      meta.formatted = {\n        title: parts[1],\n        subtitle: parts[0],\n      };\n    } else {\n      meta.formatted = {\n        title: parts[0],\n        subtitle: \"MIDI\",\n      };\n    }\n    return meta;\n  }\n\n  ensureWebMidiInitialized() {\n    if (this.webMidiIsInitialized === true) return;\n    this.webMidiIsInitialized = true;\n\n    // Initialize MIDI output devices\n    console.debug(\"Requesting MIDI output devices.\");\n    // if (typeof navigator.requestMIDIAccess === \"function\") {\n    //   navigator.requestMIDIAccess({ sysex: true }).then((access) => {\n    //     if (access.outputs.length === 0) {\n    //       console.warn(\"No MIDI output devices found.\");\n    //     } else {\n    //       [...access.outputs.values()].forEach((midiOutput) => {\n    //         console.debug(\"MIDI Output:\", midiOutput);\n    //         midiDevices.push(midiOutput);\n    //         this.paramDefs\n    //           .find((def) => def.id === \"mididevice\")\n    //           .options[0].items.push({\n    //             label: midiOutput.name,\n    //             value: midiDevices.length - 1,\n    //           });\n    //       });\n\n    //       // TODO: remove if removing Dummy Device\n    //       this.setParameter(\"mididevice\", 1);\n    //     }\n    //   });\n    // } else {\n    //   console.warn(\n    //     \"Web MIDI API not supported. Try Chrome if you want to use external MIDI output devices.\",\n    //   );\n    // }\n  }\n\n  async loadData(data, filepath, shouldAutoPlay = true) {\n    this.ensureWebMidiInitialized();\n    this.filepathMeta = this.metadataFromFilepath(filepath);\n\n    const newTransientParams = {};\n\n    // Transient params: synthengine, opl3bank, soundfont.\n    if (this.getParameter(\"autoengine\")) {\n      newTransientParams[\"synthengine\"] =\n        this.getSynthengineBasedOnFilename(filepath);\n      newTransientParams[\"opl3bank\"] =\n        this.getOpl3bankBasedOnFilename(filepath);\n    }\n\n    // Load custom Soundfont if present in the metadata response.\n    if (\n      this.getParameter(\"synthengine\") === MIDI_ENGINE_LIBFLUIDLITE &&\n      !filepath.startsWith(\"f:\")\n    ) {\n      core._tp_set_ch10_melodic(false);\n\n      // Use the best available soundfont based on current loading state\n      const currentSoundfont = this.params[\"soundfont\"];\n\n      // Find the best loaded soundfont\n      if (this.highestLoadedSoundfontIndex >= 0) {\n        const bestSoundfont =\n          PROGRESSIVE_SOUNDFONTS[this.highestLoadedSoundfontIndex].name;\n\n        // If we're not already using the best available soundfont, switch to it\n        if (currentSoundfont !== bestSoundfont) {\n          console.log(\n            `Switching to best available soundfont: ${bestSoundfont}`,\n          );\n          this.setParameter(\"soundfont\", bestSoundfont);\n        }\n\n        // If we haven't started loading sequence or it stopped, restart it\n        if (\n          this.loadingSoundfonts.size === 0 &&\n          this.highestLoadedSoundfontIndex < PROGRESSIVE_SOUNDFONTS.length - 1\n        ) {\n          this.loadNextSoundfont();\n        }\n      }\n      // If no soundfonts have been loaded yet, start the sequence\n      else {\n        const initialSoundfont = PROGRESSIVE_SOUNDFONTS[0].name;\n        console.log(`Starting with ${initialSoundfont} for fast loading`);\n        this.setParameter(\"soundfont\", initialSoundfont);\n        this.highestLoadedSoundfontIndex = 0;\n        this.startProgressiveSoundfontLoading();\n      }\n    }\n\n    // Apply transient params. Avoid thrashing of params that haven't changed.\n    Object.keys(this.params).forEach((key) => {\n      if (newTransientParams[key] !== this.transientParams[key]) {\n        this.setTransientParameter(key, newTransientParams[key]);\n      }\n    });\n\n    const midiFile = new MIDIFile(data);\n    const useTrackLoops = filepath.includes(\"SoundFont MIDI\");\n    const result = this.midiFilePlayer.load(midiFile, useTrackLoops);\n\n    // Only start playback if shouldAutoPlay is true\n    if (shouldAutoPlay) {\n      this.midiFilePlayer.play(\n        () =>\n          this.emit(\"playerStateUpdate\", { isStopped: true, isPlaying: false }),\n        () => {\n          this.emit(\"playerStateUpdate\", { isPlaying: true });\n          if (this.playbackStartedCallback) {\n            this.playbackStartedCallback();\n            this.playbackStartedCallback = null;\n          }\n        },\n      );\n    } else {\n      // Just load but don't start playing\n      this.midiFilePlayer.paused = true;\n      this.emit(\"playerStateUpdate\", { isPlaying: false });\n    }\n\n    this.activeChannels = [];\n    for (let i = 0; i < 16; i++) {\n      if (this.midiFilePlayer.getChannelInUse(i)) this.activeChannels.push(i);\n    }\n\n    this.resume();\n    this.emit(\"playerStateUpdate\", {\n      ...this.getBasePlayerState(),\n      isStopped: false,\n    });\n    return result;\n  }\n\n  getSynthengineBasedOnFilename(filepath) {\n    // Switch to OPL3 engine if filepath contains 'FM'\n    const fp = filepath.toLowerCase().replace(\"_\", \" \");\n    if (fp.match(/(\\bfm|fm\\b)/i)) {\n      return MIDI_ENGINE_LIBADLMIDI;\n    }\n    return null;\n  }\n\n  getOpl3bankBasedOnFilename(filepath) {\n    // Crude bank matching for a few specific games. :D\n    const fp = filepath.toLowerCase().replace(\"_\", \" \");\n    const opl3def = this.paramDefs.find((def) => def.id === \"opl3bank\");\n    if (opl3def) {\n      const opl3banks = opl3def.options[0].items;\n      const findBank = (str) =>\n        opl3banks.findIndex((bank) => bank.label.indexOf(str) > -1);\n      let bankId = opl3def.defaultValue;\n      if (fp.indexOf(\"[rick]\") > -1) {\n        bankId = findBank(\"Descent:: Rick\");\n      } else if (fp.indexOf(\"[ham]\") > -1) {\n        bankId = findBank(\"Descent:: Ham\");\n      } else if (fp.indexOf(\"[int]\") > -1) {\n        bankId = findBank(\"Descent:: Int\");\n      } else if (fp.indexOf(\"descent 2\") > -1) {\n        bankId = findBank(\"Descent 2\");\n      } else if (fp.indexOf(\"magic carpet\") > -1) {\n        bankId = findBank(\"Magic Carpet\");\n      } else if (fp.indexOf(\"duke nukem\") > -1) {\n        bankId = findBank(\"Duke Nukem\");\n      } else if (fp.indexOf(\"wacky wheels\") > -1) {\n        bankId = findBank(\"Apogee IMF\");\n      } else if (fp.indexOf(\"warcraft 2\") > -1) {\n        bankId = findBank(\"Warcraft 2\");\n      } else if (fp.indexOf(\"warcraft\") > -1) {\n        bankId = findBank(\"Warcraft\");\n      } else if (fp.indexOf(\"system shock\") > -1) {\n        bankId = findBank(\"System Shock\");\n      } else if (fp.indexOf(\"/hexen\") > -1 || fp.indexOf(\"/heretic\") > -1) {\n        bankId = findBank(\"Hexen\");\n      } else if (fp.indexOf(\"/raptor\") > -1) {\n        bankId = findBank(\"Raptor\");\n      } else if (fp.indexOf(\"/doom 2\") > -1) {\n        bankId = findBank(\"Doom 2\");\n      } else if (fp.indexOf(\"/doom\") > -1) {\n        bankId = findBank(\"DOOM\");\n      }\n      if (bankId > -1) {\n        return bankId;\n      }\n    }\n    return null;\n  }\n\n  isPlaying() {\n    return !this.midiFilePlayer.paused;\n  }\n\n  suspend() {\n    super.suspend();\n    this.midiFilePlayer.stop();\n  }\n\n  stop() {\n    this.suspend();\n    console.debug(\"MIDIPlayer.stop()\");\n    this.emit(\"playerStateUpdate\", { isStopped: true, isPlaying: false });\n  }\n\n  togglePause() {\n    return this.midiFilePlayer.togglePause();\n  }\n\n  getDurationMs() {\n    return this.midiFilePlayer.getDuration();\n  }\n\n  getPositionMs() {\n    return this.midiFilePlayer.getPosition();\n  }\n\n  seekMs(ms) {\n    return this.midiFilePlayer.setPosition(ms);\n  }\n\n  getTempo() {\n    return this.midiFilePlayer.getSpeed();\n  }\n\n  setTempo(tempo) {\n    this.midiFilePlayer.setSpeed(tempo);\n  }\n\n  getNumVoices() {\n    return this.activeChannels.length;\n  }\n\n  getVoiceName(index) {\n    const ch = this.activeChannels[index];\n    const pgm = this.midiFilePlayer.channelProgramNums[ch];\n    const instrumentName =\n      ch === 9 ? GM_DRUM_KITS[pgm] || GM_DRUM_KITS[0] : GM_INSTRUMENTS[pgm];\n    const areFirstTrackNamesDistinct =\n      new Set(\n        Object.values(this.midiFilePlayer.channelToTrack)\n          .map((track) => this.midiFilePlayer.trackNames[track])\n          .slice(0, 2),\n      ).size === 2;\n    const trackName = areFirstTrackNamesDistinct\n      ? this.midiFilePlayer.trackNames[this.midiFilePlayer.channelToTrack[ch]]\n      : null;\n    return trackName ?? instrumentName;\n  }\n\n  getVoiceMask() {\n    return this.activeChannels.map((ch) => this.midiFilePlayer.channelMask[ch]);\n  }\n\n  setVoiceMask(voiceMask) {\n    voiceMask.forEach((isEnabled, i) => {\n      const ch = this.activeChannels[i];\n      this.midiFilePlayer.setChannelMute(ch, !isEnabled);\n    });\n  }\n\n  getMetadata() {\n    return {\n      ...this.filepathMeta,\n    };\n  }\n\n  getParameter(id) {\n    if (id === \"fluidpoly\") return core._tp_get_polyphony();\n    if (this.transientParams[id] != null) return this.transientParams[id];\n    return this.params[id];\n  }\n\n  updateSoundfontParamDefs() {\n    this.paramDefs = this.paramDefs.map((paramDef) => {\n      if (paramDef.id === \"soundfont\") {\n        const userSoundfonts = paramDef.options[0];\n        const userSoundfontPath = `${SOUNDFONT_MOUNTPOINT}/user/`;\n        if (core.FS.analyzePath(userSoundfontPath).exists) {\n          userSoundfonts.items = core.FS.readdir(userSoundfontPath)\n            .filter((f) => f.match(/\\.sf2$/i))\n            .map((f) => ({\n              label: f,\n              value: `user/${f}`,\n            }));\n        }\n      }\n      return paramDef;\n    });\n  }\n\n  setTransientParameter(id, value) {\n    if (value == null) {\n      // Unset the transient parameter.\n      this.setParameter(id, this.params[id]);\n    } else {\n      this.setParameter(id, value, true);\n    }\n  }\n\n  setFluidChorus(value) {\n    const fluidSynth = core._tp_get_fluid_synth();\n    if (value === 0) {\n      core._fluid_synth_set_chorus_on(fluidSynth, false);\n    } else {\n      core._fluid_synth_set_chorus_on(fluidSynth, true);\n      // FLUID_CHORUS_DEFAULT_N 3 (0 to 99)\n      const nr = 3;\n      // FLUID_CHORUS_DEFAULT_LEVEL 2.0f (0 to 10)\n      const level = Math.round(remap01(value, 0, 4));\n      // FLUID_CHORUS_DEFAULT_SPEED 0.3f (0.29 to 5)\n      const speed = 0.3;\n      // FLUID_CHORUS_DEFAULT_DEPTH 8.0f (0 to ~100)\n      const depthMs = Math.round(remap01(value, 2, 14));\n      // FLUID_CHORUS_DEFAULT_TYPE FLUID_CHORUS_MOD_SINE\n      //   FLUID_CHORUS_MOD_SINE = 0,\n      //   FLUID_CHORUS_MOD_TRIANGLE = 1\n      const type = 0;\n      // (fluid_synth_t* synth, int nr, double level, double speed, double depth_ms, int type)\n      core._fluid_synth_set_chorus(fluidSynth, nr, level, speed, depthMs, type);\n    }\n  }\n\n  setParameter(id, value, isTransient = false) {\n    switch (id) {\n      case \"synthengine\":\n        value = parseInt(value, 10);\n        this.midiFilePlayer.panic();\n        if (value === MIDI_ENGINE_WEBMIDI) {\n          this.midiFilePlayer.setUseWebMIDI(true);\n        } else {\n          this.midiFilePlayer.setUseWebMIDI(false);\n          core._tp_set_synth_engine(value);\n        }\n        break;\n      case \"soundfont\":\n        // Handle soundfont quality level tracking\n        const sfIndex = PROGRESSIVE_SOUNDFONTS.findIndex(\n          (sf) => sf.name === value,\n        );\n        if (sfIndex >= 0) {\n          // If this is one of our progressive soundfonts, update quality level\n          this.soundfontQualityLevel =\n            PROGRESSIVE_SOUNDFONTS[sfIndex].qualityLevel;\n\n          // Update the highest loaded index if this is a higher quality soundfont\n          if (sfIndex > this.highestLoadedSoundfontIndex) {\n            this.highestLoadedSoundfontIndex = sfIndex;\n          }\n        } else {\n          // If user explicitly selects another soundfont, mark as custom\n          this.soundfontQualityLevel = 0;\n          this.highestLoadedSoundfontIndex = -1;\n        }\n\n        const url = `${SOUNDFONT_URL_PATH}/${value}`;\n        ensureEmscFileWithUrl(\n          core,\n          `${SOUNDFONT_MOUNTPOINT}/${value}`,\n          url,\n        ).then((filename) => this._loadSoundfont(filename));\n        break;\n      case \"reverb\":\n        // TODO: call fluidsynth directly from JS, similar to chorus\n        value = parseFloat(value);\n        core._tp_set_reverb(value);\n        break;\n      case \"chorus\":\n        value = parseFloat(value);\n        this.setFluidChorus(value);\n        break;\n      case \"fluidpoly\":\n        // TODO: call fluidsynth directly from JS, similar to chorus\n        value = parseInt(value, 10);\n        core._tp_set_polyphony(value);\n        break;\n      case \"opl3bank\":\n        value = parseInt(value, 10);\n        core._tp_set_bank(value);\n        break;\n      case \"autoengine\":\n        value = !!value;\n        break;\n      case \"mididevice\":\n        this.midiFilePlayer.setOutput(midiDevices[value]);\n        break;\n      case \"gmreset\":\n        this.midiFilePlayer.reset();\n        break;\n      default:\n        console.warn('MIDIPlayer has no parameter with id \"%s\".', id);\n    }\n    // This should be the only place we modify transientParams.\n    if (isTransient) {\n      this.transientParams[id] = value;\n    } else {\n      delete this.transientParams[id];\n      this.params[id] = value;\n    }\n  }\n\n  _loadSoundfont(filename) {\n    console.log(\"Loading soundfont %s...\", filename);\n    this.muteAudioDuringCall(this.audioNode, () => {\n      const err = core.ccall(\n        \"tp_load_soundfont\",\n        \"number\",\n        [\"string\"],\n        [filename],\n      );\n      if (err !== -1) console.log(\"Loaded soundfont.\");\n    });\n  }\n\n  eject() {\n    this.stop();\n    this.midiFilePlayer.reset();\n    this.emit(\"playerStateUpdate\", { isStopped: true, isPlaying: false });\n  }\n\n  setPlaybackStartedCallback(callback) {\n    this.playbackStartedCallback = callback;\n  }\n\n  pause() {\n    this.midiFilePlayer.paused = true;\n    this.emit(\"playerStateUpdate\", { isPlaying: false });\n  }\n\n  // Preload a soundfont in the background and switch to it when ready\n  preloadSoundfont(soundfontName, onLoadCallback) {\n    const url = `${SOUNDFONT_URL_PATH}/${soundfontName}`;\n    console.log(`Preloading soundfont ${soundfontName} in background...`);\n\n    ensureEmscFileWithUrl(core, `${SOUNDFONT_MOUNTPOINT}/${soundfontName}`, url)\n      .then((filename) => {\n        console.log(`Preloaded soundfont ${soundfontName}, switching to it...`);\n\n        // Only switch if we're using the FluidLite engine\n        if (this.getParameter(\"synthengine\") === MIDI_ENGINE_LIBFLUIDLITE) {\n          // Find quality level of the new soundfont\n          const sfIndex = PROGRESSIVE_SOUNDFONTS.findIndex(\n            (sf) => sf.name === soundfontName,\n          );\n\n          // Check if this is a progressive soundfont and if it has a higher or equal quality level\n          // than the current one before applying it\n          const newQualityLevel =\n            sfIndex >= 0 ? PROGRESSIVE_SOUNDFONTS[sfIndex].qualityLevel : 0;\n          if (newQualityLevel >= this.soundfontQualityLevel) {\n            // Save current playback state\n            const wasPlaying = this.isPlaying();\n            const currentPositionMs = this.getPositionMs();\n\n            // Load the new soundfont\n            this.muteAudioDuringCall(this.audioNode, () => {\n              const err = core.ccall(\n                \"tp_load_soundfont\",\n                \"number\",\n                [\"string\"],\n                [filename],\n              );\n              if (err !== -1) {\n                console.log(`Switched to soundfont ${soundfontName}`);\n                // Update the parameter value without triggering another load\n                this.params[\"soundfont\"] = soundfontName;\n\n                // If we were playing, seek to the previous position\n                if (wasPlaying) {\n                  this.seekMs(currentPositionMs);\n                }\n\n                // Call the callback if provided\n                if (onLoadCallback) {\n                  onLoadCallback();\n                }\n              } else {\n                console.error(`Failed to load soundfont ${soundfontName}`);\n              }\n            });\n          } else {\n            console.log(\n              `Not switching to soundfont ${soundfontName} because it has lower quality (${newQualityLevel}) than current (${this.soundfontQualityLevel})`,\n            );\n            // Still call the callback to continue the loading sequence\n            if (onLoadCallback) {\n              onLoadCallback();\n            }\n          }\n        } else {\n          // Not using FluidLite engine, just call the callback\n          if (onLoadCallback) {\n            onLoadCallback();\n          }\n        }\n      })\n      .catch((error) => {\n        console.error(`Failed to preload soundfont ${soundfontName}:`, error);\n        // Still call the callback to continue the loading sequence\n        if (onLoadCallback) {\n          onLoadCallback();\n        }\n      });\n  }\n}\n","// Metadata filled in using 4o on Dec 6, 2024.\n\nimport AboutTop100Corpus from \"../book/AboutTop100Corpus\";\n\nexport type CorpusEntry = {\n  slug: string;\n  midis: string[];\n  composerBirthYear?: number;\n  genre?: string;\n  style?: string;\n  country?: string;\n  posttext?: React.ReactNode;\n  similarTo?: string[];\n};\n\nexport const MUSESCORE_TOP_100_SLUG = \"top_100_musescore_composers\";\n\nexport const corpora: CorpusEntry[] = [\n  {\n    slug: \"yiruma_misc\",\n    midis: [\n      \"yiruma_27_may\",\n      \"yiruma_chaconne\",\n      \"yiruma_do_you\",\n      \"yiruma_fairy_tale\",\n      \"yiruma_if_i_could_see_you_again\",\n      \"yiruma_its_your_day\",\n      \"yiruma_kiss_the_rain_easy\",\n      \"yiruma_love_me\",\n      \"yiruma_love_me_easy\",\n      \"yiruma_maybe\",\n      \"yiruma_prelude_in_g_minor\",\n      \"yiruma_reason\",\n      \"yiruma_reminiscent\",\n      \"yiruma_river_flows_in_you_easy\",\n      \"River_Flows_In_You\",\n      \"yiruma_room_with_a_view\",\n      \"yiruma_spring_time\",\n      \"yiruma_wait_there\",\n      \"yiruma_when_the_love_falls\",\n      \"Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\",\n    ],\n    composerBirthYear: 1978, // Yiruma\n    style: \"21st Century Piano\",\n    country: \"South Korea\",\n    similarTo: [\"yiruma_first_love\"],\n  },\n\n  {\n    slug: \"yiruma_first_love\",\n    midis: [\n      \"river-flows-in-you\",\n      \"it-s-your-day---yiruma\",\n      \"may-be---yiruma\",\n      \"yiruma---love-me\",\n      \"farewell---yiruma\",\n      \"time-forgets---yiruma\",\n      \"if-i-could-see-you-again---yiruma\",\n      \"i---yiruma\",\n      \"on-the-way---yiruma\",\n      \"till-i-find-you---yiruma\",\n      \"passing-by---yiruma\",\n      \"left-my-hearts---yiruma\",\n      \"dream-a-little-dream-of-me---yiruma\", // cover\n      \"when-the-love-falls---yiruma\", // cover\n    ],\n    composerBirthYear: 1978, // Same as above.\n    style: \"21st Century Piano\",\n    country: \"South Korea\",\n  },\n  {\n    slug: \"milan_dvorak\",\n    midis: [\n      \"jazz-piano-etudes-book-2-no.-12---milan-dvorak\",\n      \"etude-1\",\n      \"jazz-piano-etudes-book-2-no.-2---milan-dvorak\",\n      \"jazz-etude-no.6---milan-dvorak-book-2\",\n    ],\n    composerBirthYear: 1934,\n    genre: \"Teacher Music\",\n    similarTo: [\"manfred_schmitz\"],\n  },\n  {\n    slug: \"stephen_heller\",\n    midis: [\n      \"prelude-in-c-minor---stephen-heller-prelude-in-c-sharp-minor---stephen-heller\",\n      \"25-etudes-melodiques-op.-45-no.-2-avalanche-by-stephen-heller\",\n      \"prelude-opus-81-no.-2-in-a-minor---heller\",\n      \"prelude-opus-81-no.-3-in-g-major---heller\",\n    ],\n    composerBirthYear: 1813,\n    style: \"Romantic\",\n    country: \"Hungary\",\n    similarTo: [\"john_field\"],\n  },\n  {\n    slug: \"greg_joy\",\n    midis: [\n      \"greg-joy---wind-dance-of-the-fairies\",\n      \"greg-joy---breton-dance---douce-dame-jolie\",\n      \"greg-joy---lovely-joan---the-spirit-flies-free\",\n      \"greg-joy---sovay\",\n      \"greg-joy---ancient-sojourn\",\n      \"greg-joy---the-trees-they-do-grow\",\n      \"greg-joy---all-things-are-quite-silent\",\n      \"greg-joy---unquiet-grave\",\n    ],\n    style: \"Guitar\",\n    composerBirthYear: 1954,\n    similarTo: [\"enya\"],\n  },\n  {\n    slug: \"suzanne_ciani\",\n    midis: [\n      \"simple-song-~-suzanne-ciani\",\n      \"summer-s-day---suzanne-ciani\",\n      \"anthem---suzanne-ciani\",\n      \"turning\",\n      \"sargasso-sea-by-suzanne-ciani\",\n    ],\n    style: \"New Age\",\n    composerBirthYear: 1946,\n    similarTo: [\"enya\"],\n  },\n  {\n    slug: \"aram_khachaturian\",\n    midis: [\n      \"masquerade-waltz---khachaturian\",\n      \"khachaturian---album-for-children-kinderalbum-no.-1-andantino\",\n    ],\n    composerBirthYear: 1903,\n    similarTo: [\"prokofiev\"],\n  },\n  {\n    slug: \"darius_milhaud\",\n    midis: [\n      \"darius-milhaud---scaramouche-op.-165b-iii.-brazileira\",\n      \"mazurka---darius-milhaud-1914\",\n    ],\n    composerBirthYear: 1892,\n    genre: \"Classical, Jazz\",\n    style: \"Jazz, Classical\",\n    country: \"France\",\n    similarTo: [\"debussy\", \"zequinha_de_abreu\"],\n  },\n  {\n    slug: \"jim_brickman\",\n    midis: [\n      \"valentine---jim-brickman-with-martina-mcbride\",\n      \"beautiful\",\n      \"jim-brickman---night-prayer-uoc-gi\",\n      \"angel-eyes---jim-brickman\",\n      \"tsunami---jim-brickman\",\n    ],\n    composerBirthYear: 1961, // Jim Brickman\n    genre: \"Adult Contemporary, Pop\", // Focuses on contemporary ballads and easy-listening music.\n    style: \"Pop Piano, Contemporary Classical\",\n    country: \"USA\", // Jim Brickman is American.\n    similarTo: [\"michael_giacchino\"],\n  },\n  {\n    slug: \"ryan_elder\",\n    midis: [\"rick-and-morty-main-theme---ryan-elder\"],\n    composerBirthYear: 1978, // Ryan Elder\n    genre: \"Television Music, Comedy\",\n    style: \"Electronic, Orchestral, Comedy Music\",\n    country: \"USA\", // Ryan Elder is American.\n    similarTo: [\"derek_fiechter\"],\n  },\n  {\n    slug: \"james_p_johnson\",\n    midis: [\n      \"james-p.-johnson---caprice-rag-1917\",\n      \"carolina-shout\",\n      \"charleston-james-johnson\",\n    ],\n    composerBirthYear: 1894,\n    similarTo: [\"eubie_blake\", \"scott_joplin\"],\n  },\n  {\n    slug: \"eubie_blake\",\n    midis: [\n      \"charleston-rag-sounds-of-africa---james-hubert-eubie-blake-1899----copr.-1917\",\n    ],\n    composerBirthYear: 1887,\n    genre: \"Jazz, Ragtime\",\n  },\n  {\n    slug: \"matyas_seiber\",\n    midis: [\n      \"beast-of-england-animal-farm-1954---matyas-seiber-piano-transcription\",\n      \"dance-suite\",\n      \"jazz-etudiette\",\n      \"tango-ii-habanera---tango-ii-habanera\",\n    ],\n    composerBirthYear: 1905,\n    country: \"Hungary, UK\",\n    similarTo: [\"milan_dvorak\"],\n  },\n  {\n    slug: \"garry_schyman\",\n    midis: [\n      \"bioshock-cohen-s-masterpiece-cohen-s-scherzo-no.-7---andante-con-passionato\",\n      \"bioshock-infinite---lighter-than-air\",\n      \"bioshock-2-how-she-sees-the-world\",\n    ],\n    composerBirthYear: 1955,\n    genre: \"Video Game Music, Film Score\",\n    country: \"USA\",\n    similarTo: [\"nikolai_medtner\"],\n  },\n  {\n    slug: \"giovanni_allevi\",\n    midis: [\n      \"amor-sacro---giovanni-allevi\",\n      \"la-stanza-dei-giochi---giovanni-allevi\",\n      \"come-sei-veramente-~-giovani-allevi\",\n      \"flowers---giovanni-allevi\",\n      \"aria-~-giovanni-allevi\",\n    ],\n    composerBirthYear: 1969, // Giovanni Allevi\n    genre: \"Classical, Contemporary Classical\",\n    style: \"Minimalism, Piano-driven Classical\",\n    country: \"Italy\", // Giovanni Allevi is Italian.\n    similarTo: [\"yiruma_first_love\"],\n  },\n\n  {\n    slug: \"daisuke_kikuta\",\n    midis: [\n      \"michishirube---violet-evergarden-ed\",\n      \"theishter-arr.-sincerely---violet-evergarden-op\",\n    ],\n    composerBirthYear: 1982,\n    genre: \"J-Pop, Anime Song\",\n    country: \"Japan\",\n    similarTo: [\"bts\"],\n  },\n  {\n    slug: \"yuji_ohno\",\n    midis: [\n      \"lupin-iii-jazz-version-~-yuji-ohno\",\n      \"theme-from-lupin-the-third-78-2002version\",\n      \"a-rose-tattoo---yuji-ohno---from-stolen-lupin\",\n    ],\n    similarTo: [\"jule_styne\"],\n  },\n  {\n    slug: \"hiroki_kikuta\",\n    midis: [\n      \"phantom-and-...-a-rose---hiroki-kikuta-phantom-and-a-rose---hiroki-kikuta\",\n      \"angel-s-fear-secret-of-mana-soundtrack\",\n    ],\n    composerBirthYear: 1962,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n    similarTo: [\"taro_umebayashi\"],\n  },\n  {\n    slug: \"george_winston\",\n    midis: [\n      \"thanksgiving\",\n      \"colors-dance---george-winston\",\n      \"february-sea---george-winston-771567dfea6219c668f882216e7f8c356a9b6bc5\",\n      \"longing-love---george-winston\",\n      \"variations-on-the-canon-qia-nong-bian-zou-qu\",\n    ],\n    composerBirthYear: 1949, // George Winston\n    genre: \"New Age, Instrumental\",\n    style: \"Solo Piano, Minimalism\",\n    country: \"USA\", // George Winston is American.\n    similarTo: [\"yiruma_first_love\"],\n  },\n  {\n    slug: \"jun_ishikawa\",\n    midis: [\n      \"marx-theme-from-kirby-super-star---jun-ishikawa\",\n      \"gourmet-race---kirby-super-star-ultra-solo-piano-arrangement\",\n      \"pitch-black-horror---jun-ishikawa---kirby-and-the-forgotten-land\",\n      \"masked-dedede-kirby-triple-deluxe\",\n      \"sand-canyon-1---kirby-s-dreamland-3\",\n      \"green-greens---jun-ishikawa\",\n      \"elfilin-from-kirby-and-the-forgotten-land---hirokazu-ando-jun-ishikawa\",\n    ],\n    composerBirthYear: 1964,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n    similarTo: [\"grant_kirkhope\"],\n  },\n  {\n    slug: \"george_l_cobb\",\n    midis: [\n      \"russian-rag-by-george-cobb-1918\",\n      \"the-new-russian-rag\",\n      \"hawaiian-sunset-1919\",\n      \"calcutta-1918\",\n\n      // a night in india\n      \"twilight-in-benares-1923\",\n      \"the-fakirs-1923\",\n      \"dance-of-the-flower-girls-1923\",\n      \"by-the-temple-of-siva-1923\",\n      \"march-of-the-brahman-priests-1923\",\n    ],\n    composerBirthYear: 1886,\n    country: \"USA\",\n    genre: \"Ragtime\",\n    similarTo: [\"debussy\", \"scott_joplin\"],\n  },\n  {\n    slug: \"tomohito_nishiura\",\n    midis: [\"professor-layton-s-theme---piano\"],\n    composerBirthYear: 1982, // Tomohito Nishiura\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Japan\", // Tomohito Nishiura is Japanese.\n    similarTo: [\"koji_kondo\"],\n  },\n  {\n    slug: \"juergen_moser\",\n    midis: [\n      \"the-groover---jurgen-moser\",\n      \"new-orleans-blues-extended-version---jurgen-moser\",\n      \"latin-special---jurgen-moser\",\n      \"the-snow-is-falling---jurgen-moser\",\n    ],\n    composerBirthYear: 1949,\n    genre: \"Teacher Music\",\n    style: \"Classical, Contemporary\",\n    country: \"Germany\",\n    similarTo: [\"martha_mier\", \"elissa_milne\"],\n  },\n  { slug: \"isaac_shepard\", midis: [\"letting-go-isaac-shepard\"] },\n  {\n    slug: \"david_lanz\",\n    midis: [\n      \"cristofari-s-dream\",\n      \"moonlight-lake-by-david-lanz\",\n      \"angels-falling-by-david-lanz\",\n      \"wonder-wave-by-david-lanz\",\n      \"variations-on-a-theme-from-pachelbel-s-canon-in-d-major---david-lanz\",\n      \"a-whiter-shade-of-pale-~-david-lanz\",\n      \"what-child-is-this-~-david-lanz\",\n      \"david-lanz---lost_in_paradise\",\n      \"rain-dancer-returns-by-david-lanz\",\n      \"winter-sonata---david-lanz\",\n      \"as-rivers-flow-by-david-lanz\",\n      \"dream-of-the-forgotten-child---david-lanz\",\n      \"dark-horse---david-lanz-dark-horse\",\n\n      // Valentine Hill (2024)\n      \"david-lanz---the-bittersweet\",\n      \"david-lanz---and-again-more\",\n      \"david-lanz---a-valentine-moon\",\n    ],\n    composerBirthYear: 1950, // David Lanz\n    genre: \"New Age, Instrumental\",\n    style: \"Piano Solo, Contemporary Classical\",\n    country: \"USA\", // David Lanz is American.\n    similarTo: [\"george_winston\", \"paul_de_senneville\"],\n  },\n  {\n    slug: \"philip_glass\",\n    midis: [\n      \"glassworks-opening-1---philip-glass-opening-1---philip-glass\",\n      \"tales-from-the-loop\",\n      \"walk-to-school-tales-from-the-loop\",\n      \"it-was-always-you-helen-from-the-classic-horror-movie-candyman\",\n      \"philip-glass---prophecies\",\n      \"philip-glass---facades\",\n      \"night-train---philip-glass-arr.-for-solo-piano\",\n      \"philip-glass---spaceship\",\n      \"philip-glass---pruit-igoe\",\n      \"philip-glass---islands\",\n      \"akhnaten-prelude---philip-glass\",\n      \"dead-things\",\n      \"candyman\",\n      \"philip-glass---floe\",\n      \"philip-glass---satyagraha-act-3-ending\",\n    ],\n    composerBirthYear: 1937, // Philip Glass\n    genre: \"Minimalism, Classical\",\n    style: \"Minimalism, Avant-garde\",\n    country: \"USA\", // Philip Glass is American.\n    similarTo: [\"hania_rani\"],\n  },\n  {\n    slug: \"machaut\",\n    midis: [\"machaut---messe-de-nostre-dame---kyrie\"],\n    composerBirthYear: 1300, // Guillaume de Machaut (estimated)\n    genre: \"Medieval, Sacred\",\n    style: \"Polyphonic Choral Music\",\n    country: \"France\", // Machaut was French.\n  },\n  {\n    slug: \"bela_bartok\",\n    midis: [\n      \"six-dances-in-bulgarian-rhythm-no.6-from-mikrokosmos-sz.107-bb-105---bela-bartok\",\n      \"an-evening-at-the-village---bartok-bela\",\n      \"b.-bartok-for-children-vol-1-nr-1-children-at-play\",\n      \"b.-bartok-for-children-vol.-1-nr-38-winter-solstice-song-sz42\",\n      \"b.-bartok-for-children-vol.-1-nr.3--quasi-adagio\",\n      \"b.-bartok-for-children-vol.-1-nr.29-pentatonic-tune-sz42\",\n    ],\n    composerBirthYear: 1881,\n    genre: \"Folk, Traditional\",\n    country: \"Hungary\",\n    similarTo: [\"manfred_schmitz\"],\n  },\n  {\n    slug: \"habanera\",\n    midis: [\n      \"la-cubana-danza-habanera-1850-de-florencio-lahoz\",\n      \"habanera---pascual-roch-1864---1921\",\n      \"la-paloma-habanera\",\n      \"habanera---bartolome-calatayud\",\n      \"soledad-.-habanera-par-ignazio-cervantes\",\n      \"emilia-habanera-pour-guitare-a.alba\",\n\n      \"piece-en-forme-de-habanera\",\n    ],\n    genre: \"Latin, Traditional\",\n    style: \"Habanera, Dance\",\n    country: \"Spain\", // The Habanera is a Spanish genre.\n    similarTo: [\"sebastian_yradier\", \"ernesto_nazareth\"],\n  },\n  {\n    slug: \"ernesto_nazareth\",\n    midis: [\n      \"brejeiro---ernesto-nazareth\",\n      \"tango-habanera-vers-1925-by-ernesto-nazareth\",\n      \"apanhei-te-cavanquinho---ernesto-nazareth\",\n    ],\n    composerBirthYear: 1863, // Ernesto Nazareth\n    genre: \"Brazilian, Choro\",\n    style: \"Choro, Tango\",\n    country: \"Brazil\", // Ernesto Nazareth is Brazilian.\n  },\n  {\n    slug: \"georgian\",\n    midis: [\n      \"moxevis-k-alo-t-inao\",\n      \"c-angala-da-gogona\",\n      \"t-u-ase-turp-a-iqavi\",\n      \"nu-giqors-k-alav\",\n      \"mival-guriashi\",\n      \"kintouri\",\n    ],\n    composerBirthYear: undefined, // Traditional Georgian folk music\n    genre: \"Folk, Traditional\",\n    style: \"Georgian Polyphonic Singing\",\n    country: \"Georgia\", // The music is from Georgia (Caucasus region).\n  },\n  {\n    slug: \"elissa_milne\",\n    midis: [\n      \"mozzie---elissa-milne\",\n      \"cockatoo---elissa-milne\",\n      \"indigo-moon---elissa-milne\",\n      \"deadline---elissa-milne\",\n    ],\n    genre: \"Teacher Music\",\n    country: \"Australia\",\n    composerBirthYear: 1967,\n  },\n  {\n    slug: \"chris_zabriskie\",\n    midis: [\"preludes-by-chris-zabriskie-full-album\"],\n    composerBirthYear: 1982,\n    similarTo: [\"brian_crain\"],\n  },\n  {\n    slug: \"pam_wedgwood\",\n    midis: [\n      \"hungarian-stomp---pam-wedgwood-hungarian-stomp\",\n      \"the-detective---pam-wedgwood\",\n      \"ragamuffin-by-pamela-wedgwood-for-brass-quintet\",\n    ],\n    composerBirthYear: 1947,\n    genre: \"Teacher Music\",\n    country: \"UK\",\n    similarTo: [\"catherine_rollin\"],\n  },\n  {\n    slug: \"big_maceo_merriweather\",\n    midis: [\"chicago-breakup\"],\n    composerBirthYear: 1905,\n    genre: \"Chicago Blues\",\n    country: \"USA\",\n    similarTo: [\"boogie_woogie\"],\n  },\n  {\n    // also https://musescore.com/sheetmusic?text=%D1%82%D0%B0%D0%BD%D0%B3%D0%BE&type=non-official\n    // also https://musescore.com/sheetmusic?text=%E3%82%BF%E3%83%B3%E3%82%B4&type=non-official\n    // also https://musescore.com/sheetmusic?text=%E6%8E%A2%E6%88%88&type=non-official\n    slug: \"tango\",\n    midis: [\n      \"la-cumparsita\",\n      \"sankarin-tango-finnish-tango---petri-alanko-and-martti-suosalo\",\n      \"tango---traditionnel-paraguayen\",\n      \"catherine-s-tango---dustin-o-halloran\",\n      \"mi-noche-triste-tango---castriota-arr.-domingo-prat\",\n\n      \"spanish-tango\",\n      \"tango-to-evora\",\n      \"a-la-gran-muneca---tango\",\n      \"tango-ndeg3-op.50---jose-ferrer-y-esteve-1835---1916\", // ideal V/bIII\n      \"happy-birthday-tango\",\n      \"to-ostatnia-niedziela-last-sunday---polish-tango\",\n      \"ojos-negros-tango-by-vicente-greco\", // V-I compared to parallel V-i\n      \"shovel-knight-plague-of-shadows---tango-of-the-troupple-king\",\n      \"tango-habanera-vers-1925-by-ernesto-nazareth\",\n      \"ole-guapa-by-a.malando\",\n\n      \"saladillo-tango-pour-piano-de-vicente-greco-1888-1924\",\n      \"escorregando---tango-brasileiro\",\n      \"tango---isaac-albeniz\",\n      \"tango-flamenco---luis-de-soria-1851---1935\", // pure major\n\n      \"lagrima---tango---joao-teixeira-guimaraes-1883---1947\",\n      \"moon-tango---r.-clayderman\",\n      \"assassin-s_tango\",\n      \"tango-for-piano\",\n      \"tango-of-the-roses\",\n\n      \"carioca-1913\",\n      \"tango-el-choclo---angel-gregorio-villoldo\",\n      \"tango-por-una-cabeza\",\n      \"the-masochism-tango---tom-lehrer-the-masochism-tango---tom-lehrer-the-masochism-tango\",\n\n      \"tango-jealousy---jacob-gade\",\n      \"beleet-moy-parus-a.-mironov---gennadiy-gladkov\",\n      \"chicago---cell-block-tango---misc-soundtrack\",\n\n      \"tango-de-la-muerte\",\n      \"tango-pour-claude---richard-galliano\",\n      \"tango-from-schnittke-s-concerto-grosso-1\",\n\n      \"malena---tango\", // exercise\n      \"tango-la-cumparsita---piano-solo-tutorial-parte-a\",\n      \"tango-till-you-drop-abrsm-grade-5-saxophone-b-3\", // melody for harmonization\n      \"Habanera_-_Piano_Solo_-_Georges_Bizet\",\n      \"tango-lyubvi\", // el tango de roxanne\n      \"tango-do-k-f-12-stulev---o.-zacepin\",\n      \"underground_tango_goran_bregovic_string_quartet\",\n\n      \"satumaa-fairytale-land-volshebnaya-strana\",\n      \"punatukkaiselle-tytolleni\",\n    ],\n    similarTo: [\"habanera\"],\n  },\n  {\n    slug: \"richard_galliano\",\n    midis: [\n      \"tango-pour-claude---richard-galliano\",\n      \"la-valse-a-margaux---richard-galliano-7eac27\",\n      \"french-touch\",\n    ],\n    similarTo: [\"tango\", \"musette\"],\n  },\n  {\n    slug: \"charles_ancliffe\",\n    midis: [\n      \"the-valley-of-poppies---charles-ancliffe\",\n      \"nights-of-gladness---charles-ancliffe-1912\",\n    ],\n    composerBirthYear: 1880,\n    country: \"Ireland\",\n    similarTo: [\"stephen_foster\"],\n  },\n  {\n    slug: \"astor_piazzolla\",\n    midis: [\n      \"piazzolla_histoire_du_tango_bordel_1900\",\n      \"piazzolla_histoire_du_tango_cafe_1930\",\n      \"piazzolla_histoire_du_tango_nightclub_1960\",\n      \"piazzolla_histoire_du_tango_concert_aujourdhui\",\n      \"astor-piazzolla---prologue-tango-apasionado\",\n      \"astor-piazzolla-adios-nonino-tango\",\n      \"street-tango-for-clarinet-and-piano\",\n      \"triunfal-tango-by-astor-piazzolla-in-edition-for-classical-guitar-from-victor-villadangos\",\n      \"calambre-tango-piazzolla\",\n      \"libertango\",\n    ],\n    composerBirthYear: 1921,\n    similarTo: [\"carlos_gardel\", \"tango\"],\n  },\n  {\n    slug: \"musette\",\n    midis: [\n      \"sous-le-ciel-de-paris\",\n      \"la-vie-en-rose-solo-accordion\",\n      \"dolby---valse-marcel-azzola-joss-baselli\",\n    ],\n    composerBirthYear: 1920,\n  },\n  {\n    slug: \"klezmer\",\n    midis: [\n      \"odessa-bulgar-no.3\",\n      \"der-heyser-bulgar---misc-tunes-der-heyser-bulgar\",\n      \"freylekhe-mekhutonim\",\n      \"shloymke-s_freylekhs\",\n      \"freylekhs-2\",\n      \"freylekh-de-reconciliation\",\n      \"odessa-bulgarish-new-york-psycho-freylekhs\",\n      \"mr-zvonsky-s-freylekhs\",\n      \"freylekh-zain---frohlich-sein\",\n      \"lebedikh-un-freylekh---trad.-klezmer-for-flute-clarinet\",\n      \"varshaver-freylekhs-klezmer-tune\",\n      \"hava-nagila\",\n    ],\n    similarTo: [\"boban_markovic\", \"horo\"],\n  },\n  {\n    slug: \"fado\",\n    midis: [\n      \"fado-da-mouraria---anonimo\",\n      \"lisboa-antiga---fado-marcha---raul-portela\",\n      \"fado---alfredo-mantua\",\n      \"fado-dos-passarinhos---antonio-menano\",\n      \"fado---maria-se-fores-ao-baile\",\n      \"fado-bohemio---reinaldo-varella\",\n      \"fado-menina-e-moca\",\n      \"fado---villa-franca-4-piano\",\n      \"fado-saudade---adelino-d-almeida-couto\",\n      \"fado-nacional---anonimo\",\n      \"amor-eterno---l.-serra-e-moura\",\n      \"fado-de-monchique---alberto-de-vasconcelos-moraes\",\n      \"fado-portugues\",\n      \"fado-freo\",\n      \"fado-monte-estoril---reynaldo-varella\",\n      \"meu-fado-meu---mariza-meu-fado-meu\",\n      \"fado-lisboa---raul-ferrao\",\n      \"fado-de-coimbra---anonimo\",\n      \"fado---helena-rolim-g.-barba\",\n      \"fado---rosinha-dos-limoes-4-piano\",\n      \"fado---cancao-do-mar-solidao---recorder\",\n    ],\n    similarTo: [\"ernesto_nazareth\"],\n  },\n  {\n    slug: \"bach_chorales\",\n    midis: [\n      \"ach-bleib-bei-uns-herr-jesu-christ\",\n      \"ach-bleib-bei-uns-herr-jesu-christ---j.-s.-bach---german-phrasing\",\n      \"ach-gott-erhor-mein-seufzen-bwv-254-and-original-setting\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque, Sacred\",\n    style: \"Choral, Sacred Music\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"heitor_villa-lobos\",\n    midis: [\"heitor-villa-lobos-prelude-no-1\", \"choros-ndeg1-h.-villa-lobos\"],\n    composerBirthYear: 1887, // Heitor Villa-Lobos\n    genre: \"Classical, Brazilian Music\",\n    style: \"Choro, Modern Classical\",\n    country: \"Brazil\", // Villa-Lobos was Brazilian.\n    similarTo: [\"astor_piazzolla\"],\n  },\n  {\n    slug: \"peter_mcconnell\",\n    midis: [\n      \"plants-vs-zombies-2-modern-day-piano-transcription\",\n      \"heartstone-pull-up-a-chair-piano\",\n      \"pvz2-ancient-egypt\",\n      \"pvz2-modern-day---ultimate-battle---peter-mcconnell\",\n      \"wild-west-main-theme\",\n      \"wip-plants-vs-zombies-garden-warfare-2---infinity-time-ost-only-piano---peter-mcconnell\",\n      \"neon-mixtape-tour---choose-your-seeds\",\n      \"swanky-maximo---grim-fandango\",\n      \"plants-vs-zombies-2-ballad-jam\",\n    ],\n    composerBirthYear: 1969, // Peter McConnell\n    genre: \"Video Game Music, Film Score\",\n    style: \"Orchestral, Cinematic, Jazz\",\n    country: \"USA\", // Peter McConnell is American.\n    similarTo: [\"yoko_shimomura\"],\n  },\n  {\n    slug: \"ari_pulkkinen\",\n    midis: [\n      \"angry-birds-theme---ari-pulkkinen-angry-birds-theme\",\n      \"throne-of-the-lost-king-trine-ost\",\n      \"waltz-of-the-temple-forest-elves-trine-2-soundtrack\",\n      \"trine-4-moonlit-forest\",\n      \"brambelstoke-village---trine---ari-pulkkinen\",\n      \"academy-hallways\",\n    ],\n    composerBirthYear: 1976, // Ari Pulkkinen\n    genre: \"Video Game Music\",\n    style: \"Cinematic, Orchestral, Electronic\",\n    country: \"Finland\", // Ari Pulkkinen is Finnish.\n    similarTo: [\"pedro_silva\", \"lena_raine\"],\n  },\n  { slug: \"katamari\", midis: [\"fugue-7777---katamari-damacy\"] },\n  {\n    slug: \"masayoshi_soken\",\n    midis: [\n      \"each-drop-flow-piano-arrangement-ffxiv-endwalker---masayoshi-soken\",\n      \"finality-ffxiv-endwalker-dungeon-final-boss-theme---masayoshi-soken-ffxiv-endwalker---dungeon-final-boss-theme---masayoshi-soken\",\n    ],\n    composerBirthYear: 1976, // Masayoshi Soken\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Rock, Cinematic\",\n    country: \"Japan\", // Masayoshi Soken is Japanese.\n  },\n  {\n    slug: \"koichi_sugiyama\",\n    midis: [\n      \"dragon-quest-overture-piano\",\n      \"heaven-s-prayer---dragon-quest-ix\",\n      \"adventure---dragon-quest-iii\",\n      \"dragon-quest-viii-bar-theme\",\n      \"unflinching-courage---dragon-quest-xi-battle-theme-solo-piano-original-arrangement\",\n    ],\n  },\n  {\n    slug: \"masashi_hamauzu\",\n    midis: [\n      \"besaid-island-final-fantasy-x-piano-collection---masashi-hamauzu\",\n      \"wish---masashi-hamauzu-final-fantasy-xiii-2-piano\",\n    ],\n    composerBirthYear: 1971, // Masashi Hamauzu\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Piano, Cinematic\",\n    country: \"Japan\", // Masashi Hamauzu is Japanese.\n  },\n  {\n    slug: \"nobuo_uematsu\",\n    midis: [\n      \"final-fantasy-i-matoya-s-cave---nobuo-uematsu\",\n      \"final-fantasy-prelude---nobuo-uematsu\",\n      \"ffiv-theme-of-love-piano-collections-by-nobuo-uematsu\",\n      \"dragonsong---nobuo-uematsu-advanced-solo-piano\",\n      \"super-smash-bros.-brawl-main-theme-piano-transcription\",\n      \"dou-uzhe-da-fighting-those-who-fight---final-fantasy-vii-ps1---nobuo-uematsu\",\n    ],\n    composerBirthYear: 1959, // Nobuo Uematsu\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Rock, Cinematic\",\n    country: \"Japan\", // Nobuo Uematsu is Japanese.\n  },\n  {\n    slug: \"elgar\",\n    midis: [\n      \"elgar_cello_concerto_1_adagio_moderato\",\n      \"salut-d-amour-op.12---edward-elgar\",\n      \"elgar---enigma-variations---xi.-nimrod\",\n      \"elgar-pomp-and-circumstance-march-no.-1-piano-solo-with-choral-finale\",\n    ],\n    composerBirthYear: 1857, // Edward Elgar\n    genre: \"Classical\",\n    style: \"Romantic, Orchestral\",\n    country: \"United Kingdom\", // Edward Elgar was British.\n  },\n\n  {\n    slug: \"toshio_kai\",\n    midis: [\"pacman\"],\n    composerBirthYear: 1943,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"masato_nakamura\",\n    midis: [\n      \"marble-zone-from-sonic-the-hedgehog\",\n      \"arrangement-special-stage-sonic-the-hedgehog---masato-nakamura\",\n      \"starlight-zone---sonic-the-hedgehog-1---masato-nakamura-sth-6-starlight-zone\",\n      \"sonic-the-hedgehog-2---chemical-plant-zone\",\n    ],\n    composerBirthYear: 1958,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"kotaro_nakagawa\",\n    midis: [\"the-master---code-geass\"],\n    composerBirthYear: 1969, // Kotaro Nakagawa\n    genre: \"Anime Music, Video Game Music\",\n    style: \"Orchestral, Electronic, Cinematic\",\n    country: \"Japan\", // Kotaro Nakagawa is Japanese.\n  },\n  {\n    slug: \"mike_morasky\",\n    midis: [\n      \"your-precious-moon---mike-morasky-wheatley-boss-fight-ending\",\n      \"thirty-seven-after-six\",\n      \"team-fortress---upgrade-station-piano---mike-morasky\",\n      \"rocket-jump-waltz-piano-solo\",\n      \"cara-mia-addio---full-piano-cover\",\n      \"soldier-of-dance\",\n      \"team-fortress---rise-of-the-living-bread---mike-morasky\",\n      \"team-fortress-2-main-theme---mike-morasky-team-fortress-2-piano-solo\", // blues scale\n      \"saxton-s-dilemma-sax-quartet---mike-morasky\",\n      \"machiavellian-bach\",\n      \"the-parish---mike-morasky\",\n      \"tf2---mannrobics---piano\",\n      \"counter-strike-2---main-menu-theme---mike-morasky-counter-strike-2---main-menu-theme-for-solo-piano\",\n      \"music-of-the-spheres\", // augmented vibes\n      \"half-life-alyx---ending-triumph\",\n      \"you-are-not-part-of-the-control-group\",\n      \"the-calm---valve-for-brass-quintet\",\n      \"medic\",\n      \"misfortune-teller---valve-studio-orchestra-.\",\n    ],\n    composerBirthYear: 1974, // Mike Morasky\n    genre: \"Video Game Music\",\n    style: \"Electronic, Cinematic, Experimental\",\n    country: \"USA\", // Mike Morasky is American.\n  },\n  {\n    slug: \"bach_misc\",\n    midis: [\n      \"bach-goldberg-variation-00-aria\",\n      \"bwv0565-toccata-and-fugue-in-dm-c\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque\",\n    style: \"Keyboard, Organ Music\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"olafur_arnalds\",\n    midis: [\n      \"saman---olafur-arnalds\",\n      \"happiness-does-not-wait---olafur-arnalds\",\n      \"olafur-arnalds---tomorrow-s-song\",\n      \"olafur-arnalds---raein\",\n      \"erla-s-waltz-olafur-arnalds\",\n    ],\n    composerBirthYear: 1986, // lafur Arnalds\n    genre: \"Classical, Electronic\",\n    style: \"Modern Classical, Ambient, Minimalism\",\n    country: \"Iceland\", // lafur Arnalds is Icelandic.\n  },\n  {\n    slug: \"bach_wtc\",\n    midis: [\n      \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\",\n      \"prelude-no.-2-bwv-847-in-c-minor\",\n      \"prelude-no.-3-bwv-848-in-c-major\", // very regular\n      \"prelude-no.-4-bwv-849-in-c-minor\",\n      \"prelude-no.-5-bwv-850-in-d-major\",\n      \"prelude-no.-6-bwv-851-in-d-minor\",\n      \"prelude-no.-7-bwv-852-in-e-major\",\n      \"prelude-no.-8-bwv-853-in-e-minor\",\n      \"prelude-no.-9-bwv-854-in-e-major\",\n      \"prelude-no.-10-bwv-855-in-e-minor\",\n      \"prelude-no.-11-bwv-856-in-f-major\", // decent\n      \"prelude-no.-12-bwv-857-in-f-minor\",\n      \"prelude-no.-13-bwv-858-in-f-major\",\n      \"prelude-no.-14-bwv-859-in-f-minor\",\n      \"prelude-no.-15-bwv-860-in-g-major\",\n      \"prelude-no.-16-bwv-861-in-g-minor\",\n      \"prelude-no.-17-bwv-862-in-a-major\",\n      \"prelude-no.-18-bwv-863-in-g-minor\",\n      \"prelude-no.-19-bwv-864-in-a-major\",\n      \"prelude-no.-20-bwv-865-in-a-minor\",\n      \"prelude-no.-21-bwv-866-in-b-major\",\n      \"prelude-no.-22-bwv-867-in-b-minor\",\n      \"prelude-no.-23-bwv-868-in-b-major\",\n      \"prelude-no.-24-bwv-869-in-b-minor\",\n      \"prelude-no.-1-bwv-870-in-c-major\",\n      \"prelude-no.-2-bwv-871-in-c-minor\",\n      \"prelude-no.-3-bwv-872-in-c-major\",\n      \"prelude-no.-4-bwv-873-in-c-minor\",\n      \"fugue-no.-3-bwv-848-in-c-major\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque\",\n    style: \"Fugue, Prelude, Keyboard Music\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"bach_french_suite_no2\",\n    midis: [\n      \"j.-s.-bach---sarabande-from-french-suite-no2-bwv-813\",\n      \"bach-allemande-bwv-813-french-suite-ii\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque\",\n    style: \"Keyboard Suite\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"lucrecia_roces_kasilag\",\n    midis: [\n      \"fantasia---lucrecia-roces-kasilag\",\n      \"prelude-etnika---piano-transcription\",\n      \"luwalhati---lucrecia-r.-kasilag\",\n    ],\n    composerBirthYear: 1918, // Lucrecia R. Kasilag\n    genre: \"Filipino Music, Classical\",\n    style: \"Folk, Ethno-Classical\",\n    country: \"Philippines\", // Lucrecia Kasilag was Filipino.\n  },\n  {\n    slug: \"sibelius\",\n    midis: [\"sydameni_laulu\", \"jean-sibelius---etude-op.-76-n.2\"],\n    composerBirthYear: 1865, // Jean Sibelius\n    genre: \"Classical\",\n    style: \"Romantic, Orchestral\",\n    country: \"Finland\", // Sibelius was Finnish.\n  },\n  {\n    slug: \"ernesto_lecuona\",\n    midis: [\n      \"danza-lucumi---e.-lecuona-original\",\n      \"la-comparsa---ernesto-lecuona\",\n      \"siboney---ernesto-lecuona\",\n      \"andalucia---ernesto-lecuona\",\n      \"malaguena---ernesto-lecuona\",\n      \"gitanerias\",\n    ],\n    composerBirthYear: 1895, // Ernesto Lecuona\n    genre: \"Cuban, Classical\",\n    style: \"Cuban Dances, Classical, Latin\",\n    country: \"Cuba\", // Ernesto Lecuona was Cuban.\n  },\n  {\n    slug: \"shamshi_kaldayakov\",\n    midis: [\n      \"my-kazakhstan\",\n      \"arys-zhagasynda---shamshi-kaldayakov-arys-zhag-asynda---sh-mshi-k-aldayak-ov-red.-ask-ar-lmak-tum\",\n    ],\n    composerBirthYear: 1924, // Shamshi Kaldayakov\n    genre: \"Kazakh, Classical\",\n    style: \"Folk, National Music\",\n    country: \"Kazakhstan\", // Shamshi Kaldayakov was Kazakh.\n  },\n  {\n    slug: \"malaguena\",\n    midis: [\n      \"malaguena---ernesto-lecuona\",\n      \"rumores-de-la-caleta-malaguena-albeniz\",\n      \"ndeg-3---malaguena\",\n      \"nuevo-metodo-pag.-20-malaguena---francisco-cimadevilla\",\n      \"malaguena-nocturna---l-elegiaque-malaguena-nocturna\",\n      \"malaguena-by-azpiazu\",\n      \"malaguena-sarasate\",\n      \"malaguena-salerosa\",\n      \"malaguena-facil\",\n      \"rumores-de-la-caleta-malaguena\",\n    ],\n    composerBirthYear: 1895, // Ernesto Lecuona (primarily) for \"Malaguea\"\n    genre: \"Classical, Latin\",\n    style: \"Cuban, Spanish\",\n    country: \"Cuba\", // Lecuona's version is most well-known.\n  },\n  {\n    slug: \"pablo_de_sarasate\",\n    midis: [\n      \"malaguena-sarasate\",\n      \"a-wanderer-s-song-zigeunerweisen-gypsy-airs-op.20\",\n    ],\n    composerBirthYear: 1844,\n    country: \"Spain\",\n  },\n  {\n    slug: \"vaqif_mustafazadeh\",\n    midis: [\"vaqif_mustafazade_-_dushunce_piano_tutorial\"],\n    composerBirthYear: 1940, // Vaqif Mustafazadeh\n    genre: \"Jazz, Azerbaijani Music\",\n    style: \"Jazz, Mugham Fusion\",\n    country: \"Azerbaijan\", // Vaqif Mustafazadeh was Azerbaijani.\n  },\n  {\n    slug: \"ferdinand_hiller\",\n    midis: [\n      \"reverie---ferdinand-hiller\",\n      \"tagebuch-no.-2---ferdinand-hiller\",\n      \"etude-op.-15-no.-4---ferdinand-hiller\",\n    ],\n    composerBirthYear: 1811, // Ferdinand Hiller\n    genre: \"Classical, Romantic\",\n    style: \"Piano, Orchestral\",\n    country: \"Germany\", // Ferdinand Hiller was German.\n  },\n  {\n    slug: \"ennio_morricone\",\n    midis: [\n      \"ennio-morricone-chi-mai-from-le-professionnel-easy-piano-arr.-by-free-musickey\",\n      \"playing-love---ennio-morricone\",\n      \"deborah-s-theme-~-ennio-morricone\",\n      \"la-califfa-ennio-morricone\",\n      \"gabriel-s-oboe---ennio-morricone\",\n      \"cinema-paradiso-morricone\",\n    ],\n    composerBirthYear: 1928, // Ennio Morricone\n    genre: \"Film Music\",\n    style: \"Cinematic, Orchestral, Soundtrack\",\n    country: \"Italy\", // Ennio Morricone was Italian.\n  }, // 1883\n  {\n    slug: \"charlie_astin\",\n    midis: [\"in-the-gloaming-1883\", \"clide-polka-1883\"],\n  },\n  // 1897, first three annotated, then just preserved\n  {\n    slug: \"theo_a_metz\",\n    midis: [\n      \"a-hot-time-in-the-old-town-1897\",\n      \"fiddling-silas-1899\",\n      \"the-klondike-1897\",\n      \"the-song-they-sang-at-santiago-1898\",\n      \"indian-smoke-dance-1919\",\n      \"walk-baby-walk-1897\",\n      \"omene-1893\",\n      \"give-cinda-the-cake-1898\",\n    ],\n    composerBirthYear: 1856, // Theo A. Metz\n    genre: \"American, Ragtime\",\n    style: \"Ragtime, March\",\n    country: \"USA\", // Theo A. Metz was American.\n  },\n  {\n    slug: \"king_kollins\",\n    midis: [\"the-whizzer-1907\", \"the-twirler-1907\"],\n    composerBirthYear: 1880, // King Kollins\n    genre: \"American, Ragtime\",\n    style: \"Ragtime, Novelty\",\n    country: \"USA\", // King Kollins was American.\n  },\n  { slug: \"los_kjarkas\", midis: [\"llorando-se-fue---los-kjarkas\"] },\n  {\n    slug: \"frank_h_grey\",\n    midis: [\"love-in-venice-1924\", \"valse-des-fleurs-1925\"],\n    composerBirthYear: 1877, // Frank H. Grey\n    genre: \"American, Classical\",\n    style: \"Ragtime, Orchestral\",\n    country: \"USA\", // Frank H. Grey was American.\n  },\n  {\n    slug: \"yamato_kasai\",\n    midis: [\n      \"ender-lilies-quietus-of-the-knights---holy-land-save-ver.\",\n      \"ender-lilies-quietus-of-the-knights---grudge-save-ver.\",\n      \"ender-lilies-quietus-of-the-knights---the-white-witch\",\n      \"the-witch-s-breath---ender-lilies\",\n      \"a-nocturne-for-all---ender-lilies-ost\",\n      \"ephemeral---yamato-kasai---klavier---mili-mag-mell-deemo\",\n    ],\n    composerBirthYear: 1989, // Yamato Kasai\n    genre: \"Video Game Music\",\n    style: \"Symphonic, Piano\",\n    country: \"Japan\", // Yamato Kasai is Japanese.\n  },\n  {\n    slug: \"aj_weidt\",\n    midis: [\n      \"aj_weidt_the_colored_guards\", // two banjos\n      \"aj_weidt_kaloola\",\n      \"memelicanmanrag\",\n    ],\n    composerBirthYear: 1865, // A.J. Weidt\n    genre: \"American, Ragtime\",\n    style: \"Ragtime, Novelty\",\n    country: \"USA\", // A.J. Weidt was American.\n  },\n  {\n    slug: \"scriabin\",\n    midis: [\n      \"24-preludes-op.11-no.1---a.-scriabin\",\n      \"scriabin-vers-la-flamme-op.-72\",\n      \"scriabin-s-nocturne-for-the-left-hand\",\n    ],\n    composerBirthYear: 1872, // Alexander Scriabin\n    genre: \"Russian, Classical\",\n    style: \"Romantic, Modern\",\n    country: \"Russia\", // Alexander Scriabin was Russian.\n  },\n  {\n    slug: \"tadeusz_joteyko\",\n    midis: [\n      \"elegie-op.16-no.1---tadeusz-joteyko\",\n      \"xi.-prelude-des-dur-op.-6-no-5---tadeusz-joteyko\",\n      \"prelude-op.5-no6---tadeusz-joteyko\",\n      \"prelude-op.7-no3---tadeusz-joteyko\",\n    ],\n    composerBirthYear: 1889, // Tadeusz Joteyko\n    genre: \"Polish, Classical\",\n    style: \"Romantic, Piano\",\n    country: \"Poland\", // Tadeusz Joteyko was Polish.\n  },\n  {\n    slug: \"leo_delibes\",\n    midis: [\n      \"valse---coppelia---piano-solo---arr.-leo-delibes\",\n      \"flower-duet-from-lakme-by-leo-delibes-transcription-for-violin-and-piano\",\n      \"messe-breve---leo-delibes-delibes-messe-breve-ssa-kyrie\",\n    ],\n    composerBirthYear: 1836, // Leo Delibes\n    genre: \"French, Classical\",\n    style: \"Opera, Ballet\",\n    country: \"France\", // Leo Delibes was French.\n  },\n  {\n    slug: \"gustave_tritant\",\n    midis: [\n      \"elevation---gustave-tritant\",\n      \"communion-funebre---gustave-tritant\",\n      \"elevation-funebre---gustave-tritant\",\n      \"l-office-pratique-de-l-organiste---gustave-tritant\",\n    ],\n    composerBirthYear: 1860, // Gustave Tritant\n    genre: \"French, Classical\",\n    style: \"Organ Music\",\n    country: \"France\", // Gustave Tritant was French.\n  },\n  {\n    slug: \"mike_schoenmehl\",\n    midis: [\n      \"melancholy-reflections---mike-schoenmehl\",\n      \"criminal-music---mike-schoenmehl\",\n      \"marion-s-walk---mike-schoenmehl\",\n    ],\n    composerBirthYear: 1957,\n    country: \"Germany\",\n    genre: \"Teacher Music\",\n  },\n  {\n    slug: \"cesare_pugni\",\n    midis: [\n      \"la-esmeralda-ballet-variacao---cesare-pugni\",\n      \"coda---cesare-pugni\",\n      \"peasant-pas-de-deux-interpolated-variation---cesare-pugni\",\n      \"la-schottische\",\n      \"le-carnaval-de-venise-pas-de-deux-di-satanella---cesare-pugni---variazione-maschile\",\n    ],\n    composerBirthYear: 1802, // Cesare Pugni\n    genre: \"Italian, Classical\",\n    style: \"Ballet Music\",\n    country: \"Italy\", // Cesare Pugni was Italian.\n  },\n  {\n    slug: \"ahmed_adnan_saygun\",\n    midis: [\n      \"inci---ahmed-adnan-saygun\",\n      \"ayse-m\",\n      \"oyun---ahmed-adnan-saygun\",\n      \"ruya---ahmed-adnan-saygun\",\n      \"masal---ahmed-adnan-saygun\",\n      \"ataturk-marsi---ahmed-adnan-saygun\",\n      \"ninni---ahmed-adnan-saygun\",\n      \"kocaman-bebek---ahmed-adnan-saygun\",\n      \"horon-for-bb-clarinet-and-piano---ahmed-adnan-saygun\",\n      \"afacan-kedi---ahmed-adnan-saygun\",\n    ],\n    composerBirthYear: 1929, // Ahmed Adnan Saygun\n    genre: \"Turkish, Classical\",\n    style: \"Folk Music, Orchestral\",\n    country: \"Turkey\", // Ahmed Adnan Saygun was Turkish.\n  },\n  {\n    slug: \"paul_mauriat\",\n    midis: [\n      \"toccata---paul-mauriat\",\n      \"minuetto\",\n      \"nocturne---paul-mauriat\",\n      \"alouette---paul-mauriat\",\n      \"love-is-blue---paul-mauriat\",\n      \"ballade---paul-mauriat\",\n      \"petite-melodie\",\n    ],\n    composerBirthYear: 1925, // Paul Mauriat\n    genre: \"French, Pop, Classical\",\n    style: \"Easy Listening, Orchestral\",\n    country: \"France\", // Paul Mauriat was French.\n  },\n  {\n    slug: \"happy_birthday\",\n    midis: [\n      \"happy-birthday\",\n      \"happy-birthday-to-you-c-major\",\n      \"happy-birthday-song-in-jazz-arr.-by-jonny-may\",\n      \"happy-birthday-tango\",\n      \"happy-birthday-tango-variation\",\n      \"happy-birthday-to-you---tango-version\",\n      \"birthday-tango\",\n      \"birthday-tango-2\",\n      \"happy-birthday-waltz\",\n      \"happy-birthday-but-it-s-a-bach-chorale\",\n      \"chopin-ish-happy-birthday-to-you\",\n      \"happy-birthday-3-part-vocals\",\n      \"happy-birthday-variations-in-g-minor\",\n      \"happy_birthday_bass_and_chords\",\n      \"Happy_Birthday_to_You\",\n      \"happy-birthday-insane\",\n      \"happy-birthday-jacob-koller\",\n    ],\n    genre: \"Traditional, Folk\",\n    style: \"Birthday Song\",\n    country: \"International\",\n  },\n  {\n    slug: \"scott_joplin\",\n    midis: [\n      \"Maple_Leaf_Rag_Scott_Joplin\",\n      \"gladiolus-rag---scott-joplin---1907\",\n      \"the-cascades---scott-joplin---1904\",\n      \"sugar-cane---scott-joplin---1908\",\n      \"leola-two-step---scott-joplin---1905\",\n      \"the-sycamore---scott-joplin---1904\",\n      \"silver-swan-rag---scott-joplin---1914---transcribed-by-richard-zimmerman\",\n      \"elite-syncopations---scott-joplin---1902\",\n      \"weeping-willow---scott-joplin---1903\",\n      \"country_club_ragtime_two_step_scott_joplin_1909\",\n      \"the_ragtime_dance_scott_joplin_1906_arrangement\",\n      \"Pine_Apple_Rag_-_Scott_Joplin_-_1908.mscz\",\n      \"the_entertainer_scott_joplin\",\n      \"sunflower-slow-drag---joplin-and-hayden---1901\",\n      \"reflection-rag---scott-joplin---1917\",\n      \"rose-leaf-rag---scott-joplin---1907\",\n      \"palm-leaf-rag---scott-joplin---1903\",\n      \"search-light-rag---scott-joplin---c1907\",\n      \"the-strenuous-life---scott-joplin---1902\",\n      \"wall-street-rag---scott-joplin---1909\",\n      \"peacherine-rag---scott-joplin---1901\",\n      \"fig-leaf-rag---scott-joplin---1908\",\n      \"magnetic-rag---scott-joplin---1914\",\n      \"original-rags---scott-joplin---1899\",\n      \"paragon-rag---scott-joplin---1909\",\n      \"the-nonpareil---scott-joplin---1907\",\n      \"the-chrysanthemum---scott-joplin---1904\",\n      \"euphonic-sounds---scott-joplin---1909\",\n      \"scott-joplin-s-new-rag---original-edition---1912\",\n      \"scott-joplin-s-new-rag---revised-edition---c1914\",\n      \"kismet-rag---joplin-and-hayden---1913\",\n      \"felicity-rag---joplin-and-hayden---1911\",\n      \"swipesy-cakewalk-1900\",\n      \"the-easy-winners---scott-joplin---1901\",\n      \"cleopha---scott-joplin---1902\",\n      \"a-breeze-from-alabama---scott-joplin---1902\",\n      \"something-doing---joplin-and-hayden---1903\",\n      \"the-favorite---scott-joplin---1904\",\n      \"pleasant-moments---scott-joplin---1909\",\n      \"heliotrope-bouquet---joplin-and-chauvin---1907\",\n      \"lily-queen---joplin-marshall---1907\",\n      \"eugenia---scott-joplin---1905-6\",\n      \"stoptime-rag---scott-joplin---1910\",\n      \"the-rose-bud-march---scott-joplin---1905\",\n      \"antoinette---scott-joplin---1906\",\n      \"a-real-slow-drag---scott-joplin---1913\",\n      \"march-majestic---scott-joplin---1902\",\n      \"school-of-ragtime---scott-joplin---1908\",\n      \"maple_starts\",\n    ],\n    composerBirthYear: 1868, // Scott Joplin\n    genre: \"American, Ragtime\",\n    style: \"Ragtime\",\n    country: \"USA\", // Scott Joplin was American.\n  },\n  {\n    slug: \"leo_weiner\",\n    midis: [\n      \"fox-dance---leo-weiner\",\n      \"weiner-leo---esik-az-eso\",\n      \"magyar-nepdal---ungarischer-volkslieder---repulj-madar---weiner-leo\",\n    ],\n    composerBirthYear: 1885, // Leo Weiner\n    genre: \"Hungarian, Classical\",\n    style: \"Folk Music, Orchestral\",\n    country: \"Hungary\", // Leo Weiner was Hungarian.\n  },\n  {\n    slug: \"gershwin_songbook\",\n    midis: [\n      \"gershwin_swanee\",\n      \"swanee_gershwin\",\n      \"oh-lady-be-good---george-gershwin-1924-public-domain-piano-voice-sheet-music-arrangement\",\n      \"oh-_lady_be_good_gershwin\",\n      \"piano-i-ll-build-a-stairway-to-paradise\",\n      \"stairway-to-paradise-lead-sheet-with-verse-and-lyrics\",\n      \"i-ll_build_a_stairway_to_paradise_roll\",\n      \"i-ll_build_a_stairway_to_paradise_gershwin\",\n      \"fascinating-rhythm---george-gershwin-ira-gershwin-1924-piano-vocal-arrangement\",\n      \"fascinating_rhythm_gershwin\",\n      \"do-it-again---george-gershwin-buddy-desylva\",\n      \"do_it_again_gershwin\",\n      \"the-man-i-love---george-gershwin-ira-gershwin-1924-piano-vocal-arrangement\",\n      \"the_man_i_love_gershwin\",\n      \"s_wonderful_gershwin\",\n      \"clap_yo-_hands\",\n      \"do-do-do_gershwin\",\n      \"i_got_rhythm_gershwin\",\n      \"liza_gershwin\",\n      \"my_one_and_only_roll\",\n      \"nobody_but_you_sustain\",\n      \"somebody_loves_me_gershwin\",\n      \"strike_up_the_band_gershwin\",\n      \"sweet_and_low_down_gershwin\",\n      \"that-certain-feeling---george-gershwin\",\n      \"that_certain_feeling_gershwin\",\n      \"who_cares_as_long_as_you_care_for_me_gershwin\",\n    ],\n    composerBirthYear: 1898, // George Gershwin\n    genre: \"American, Jazz, Classical\",\n    style: \"Jazz, Musical Theatre\",\n    country: \"USA\", // George Gershwin was American.\n  },\n  {\n    slug: \"hector_ayala\",\n    midis: [\n      \"el-coyuyo---hector-ayala\",\n      \"luna-y-sol---hector-ayala-luna-y-sol\",\n      \"celeste-y-blanco---hector-ayala\",\n    ],\n    composerBirthYear: 1913,\n    genre: \"Guitar\",\n    country: \"Argentina\",\n  },\n  {\n    slug: \"leo_brouwer\",\n    midis: [\n      \"un-dia-de-noviembre---leo-brouwer\",\n      \"berceuse---leo-brouwer\",\n      \"brouwer-etude-simple-vi\",\n      \"brouwer-leo-etudes-simples-no-02-coral\",\n    ],\n    composerBirthYear: 1939,\n    genre: \"Guitar, Classical, Folk, Aleatoric, Atonal\",\n    country: \"Cuba, USA\",\n  },\n  {\n    slug: \"jack_wall\",\n    midis: [\n      \"ends-justify-the-means---jack-wall-transcribed-by-christian-smith\",\n      \"mass-effect-2-suicide-mission-end-run\",\n      \"savimbi-s-pride\",\n      \"adrenaline-call-of-duty-black-ops-ii-organ-cover\",\n    ],\n    composerBirthYear: 1963,\n    genre: \"Video Game Music\",\n    style: \"Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"fats_waller\",\n    midis: [\n      \"asbestos---fats-waller---c1930\",\n      \"alligator-crawl---fats-waller---1934\",\n      \"handful-of-keys---fats-waller---1933\",\n    ],\n    composerBirthYear: 1904, // Fats Waller\n    genre: \"American, Jazz\",\n    style: \"Stride Piano\",\n    country: \"USA\", // Fats Waller was American.\n  },\n  {\n    slug: \"gershwin\",\n    midis: [\n      \"gershwin_prelude_1\",\n      \"gershwin_prelude_2\",\n      \"gershwin_prelude_3\",\n      \"Gershwin_Rhapsody_in_Blue_Piano_solo\",\n    ],\n    genre: \"American, Classical\",\n    style: \"Jazz, Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"toru_minegishi\",\n    midis: [\n      \"kakariko-is-saved---the-legend-of-zelda-twilight-princess---toru-minegishi\",\n      \"results-low-ranking---wii-fit---toru-minegishi-manaka-tominaga-shiho-fujii\",\n      \"k.k.-bossa---animal-crossing-ost\",\n      \"k.k.-dirge---toru-minegishi\",\n      \"k.k.-salsa---toru-minegishi\",\n      \"k.k.-condor---toru-minegishi\",\n    ],\n    composerBirthYear: 1975,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"minecraft_c418\",\n    midis: [\n      \"minecraft---dead-voxel\",\n      \"beginning-minecraft\",\n      \"aria-math---c418-from-minecraft\",\n      \"minecraft-calm\",\n      \"c418---cat-from-minecraft---volume-alpha\",\n      \"clark-minecraft\",\n      \"moog-city-minecraft\",\n      \"danny-minecraft\",\n      \"living-mice-minecraft\",\n      \"alpha-full---minecraft-credits-end-poem\",\n      \"dry-hands-minecraft\",\n      \"haggstrom-minecraft\",\n      \"minecraft-title\",\n      \"mice-on-venus-minecraft\",\n      \"subwoofer-lullaby-minecraft\",\n      \"Sweden_Minecraft\",\n      \"Wet_Hands_Minecraft\",\n    ],\n    composerBirthYear: 1981, // Daniel Rosenfeld (C418)\n    genre: \"Video game music\",\n    style: \"Ambient, Electronic\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"tom_lehrer\",\n    midis: [\n      \"the-elements---tom-lehrer\",\n      \"the-masochism-tango---tom-lehrer-the-masochism-tango---tom-lehrer-the-masochism-tango\",\n      \"tom_lehrer_i_got_it_from_agnes\",\n      \"poisoning-pigeons-in-the-park---tom-lehrer\",\n      \"wernher-von-braun---tom-lehrer---tom-lehrer\",\n      \"the-wild-west-is-where-i-want-to-be---tom-lehrer\",\n      \"be-prepared---tom-lehrer\",\n      \"tom-lehrer---new-math-music\",\n      \"fight-fiercely-harvard---tom-lehrer\",\n      \"the-old-dope-peddler---tom-lehrer\",\n      \"i-hold-your-hand-in-mine---tom-lehrer-i-hold-your-hand-in-mine\",\n      \"vatican-rag\",\n      \"i-wanna-go-back-to-dixie---tom-lehrer\",\n      \"a-christmas-carol---tom-lehrer-a-christmas-carol\",\n      \"national-brotherhood-week\",\n      \"my-home-town---tom-lehrer\",\n      \"te-amo---tom-lehrer\",\n      \"whos-next---tom-lehrer\",\n      \"there-s-a-delta-for-every-epsilon---tom-lehrer\",\n      \"hanukah-in-santa-monica---tom-lehrer\",\n      \"so-long-mom----tom-lehrer\",\n      \"we-will-all-go-together-when-we-go---tom-lehrer\", //corrupt?\n      \"the-subway-song---tom-lehrer\", // 1915, Theodore Morse!\n    ],\n    composerBirthYear: 1928, // Tom Lehrer\n    genre: \"Comedy, Musical\",\n    style: \"Satirical, Parody\",\n    country: \"USA\",\n  },\n  {\n    // todo: link \"ragtime treasures\" together\n    slug: \"joseph_lamb\",\n    midis: [\n      \"the-alaskan-rag---joseph-f-lamb\",\n      \"paramount-rag\",\n      \"thoroughbred-rag-c-1960\",\n      \"toad-stool-rag-c-1959\",\n      \"chimes-of-dixie-c-1960\",\n      \"cinders\",\n    ],\n    composerBirthYear: 1887, // Joseph Lamb\n    genre: \"Ragtime\",\n    style: \"Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ted_snyder\",\n    midis: [\"the-sheik-of-araby-arr.-zez-confrey\"],\n    composerBirthYear: 1881, // Ted Snyder\n    genre: \"Jazz, Popular music\",\n    style: \"Ragtime, Early Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"nicholas_britell\",\n    midis: [\n      \"succession-main-theme\",\n      \"i-m-cruella---nicholas-britell\",\n      \"succession-scherzo-in-f-minor---nicholas-britell\",\n      \"don-t-look-up---main-title-theme---nicholas-britell\",\n      \"the-baroque-ball---nicholas-britell\",\n    ],\n    composerBirthYear: 1980, // Nicholas Britell\n    genre: \"Film score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  { slug: \"claude_bolling\", midis: [] },\n  {\n    slug: \"julius_schulhoff\",\n    midis: [\n      \"piano-sonata-in-f-minor-opus-37-1st-movement---julius-schulhoff\",\n      \"piano-sonata-in-f-minor-opus-37-3rd-movement---julius-schulhoff\",\n      \"polka-original-op.-4-no.-1-toplitz-polka---julius-schulhoff\",\n      \"3-nocturnes-op.-2-no.-1-romanza---julius-schulhoff\",\n      \"nocturne-op.28---julius-schulhoff\",\n    ],\n  },\n  {\n    slug: \"alex_thorn\",\n    midis: [\n      \"piano-serenade-in-a-flat\",\n      \"as-bold-as-brass-a-very-british-march-for-piano\",\n      \"baroque-harpsichord\",\n      \"cryin-in-the-rain-piano-solo\",\n    ],\n    composerBirthYear: 1984, // Alex Thorn\n    genre: \"Classical, Film score\",\n    style: \"Classical, Baroque\",\n    country: \"USA\",\n  },\n  {\n    slug: \"bts\",\n    midis: [\n      \"bts-bangtansonyeondan---i-need-u-suga-piano-full-solo\",\n      \"bts-jungkook-bangtansonyeondan-jeonggug---still-with-you\",\n      \"bts-bangtansonyeondan---fake-love\",\n      \"spring-day---bts\",\n      \"the-truth-untold---bts\",\n      \"bts-bangtansonyeondan---dynamite-piano-version\",\n    ],\n    composerBirthYear: 1993, // BTS Members (group)\n    genre: \"Pop, K-pop\",\n    style: \"Pop, Dance, R&B\",\n    country: \"South Korea\",\n    similarTo: [\"dj_okawari\"],\n  },\n  {\n    slug: \"homm\",\n    midis: [\n      \"heroes-of-might-and-magic-2--sorceress-town---paul-anthony-romero\",\n      \"heroes-of-might-and-magic-iii---main-menu-theme\",\n      \"heroes-of-might-and-magic-iii----waiting-theme\",\n      \"heroes-of-might-and-magic-3---necropolis-town-theme\",\n      \"heroes-of-might-magic-iii---tower-town-theme\",\n      \"inferno-theme-by-paul-romero-from-heroes-of-might-and-magic-3\",\n      \"heroes-of-might-magic-iii---fortress-town-theme\",\n      \"heroes-of-might-and-magic-iii---castle-town-theme\",\n      \"dirt-theme-hope---heroes-of-might-and-magic-iv---celtic-harp\",\n      \"academy-order-theme---heroes-and-might-and-magic-iv\",\n      \"haven-theme-piano-form-heroes-of-might-and-magic-v\",\n      \"heroes-of-might-and-magic-vi-unknown-title\",\n    ],\n    composerBirthYear: 1965, // Paul Anthony Romero\n    genre: \"Video game music\",\n    style: \"Symphonic, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"he_is_a_pirate_arrangements\",\n    midis: [\n      \"he_s_a_pirate_ost_kalimba_cover\",\n      \"he_s_a_pirate_easy_piano\",\n      \"pirates_of_the_caribbean_hans_zimmer_virtuosic_piano_solo_movement_3\",\n      \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\", // Klaus Badelt\n      \"he-s-a-pirate---hans-zimmer-he-s-a-pirate\",\n      \"he-s-a-pirate-david-garrett-x-jarrod-radnich\",\n\n      \"he_s_a_pirate_from_pirates_of_the_caribbean\",\n      \"he_s_a_pirate_hans_zimmer_klaus_badelt\",\n      \"he_s_a_pirate_hard_version\",\n      \"pirates_of_the_carribean_beginner\",\n      \"pirates_of_the_caribbean_easy_piano_capa\",\n      \"pirates_of_the_caribbean_he_s_a_pirate_hard_version\",\n      \"pirates-of-the-caribbean---he-s-a-pirate-orchestra-cover\",\n      \"he-s-a-pirate---pirates-of-the-caribbean-orchestral\",\n      \"the-pirates-of-the-caribbean-end-credit-he-s-a-pirate\",\n\n      \"he-s-a-pirate\",\n\n      \"pirates_of_the_caribbean_easy_piano\",\n      \"pirates_of_the_caribbean_for_alto_saxophone\",\n      \"pirates_of_the_caribbean_main_theme\",\n      \"pirati_dei_caraibi_per_trio_di_flauti_pirates_of_the_carribean_for_flute_trio\",\n      \"he_s_a_pirate_klaus_badelt_pirates_of_the_caribbean_ost_rock_version\",\n    ],\n  },\n  {\n    slug: \"kenji_ito\",\n    midis: [\n      \"si-dou-noguo-teni-struggle-to-the-death---saga-2-mi-bao-chuan-shuo-final-fantasy-legend-ii-gb---kenji-ito\",\n      \"opuningutaitoru-title-screen-romansingu-saga2-romancing-saga2-snes---kenji-ito\",\n      \"podorui-podorui---romansingu-saga3-romancing-saga-3-sfc-snes---kenji-ito\",\n      \"batoru2-battle-2---romansingu-saga-romancing-saga-sfc-snes---kenji-ito\",\n      \"never-give-up---saga-2-mi-bao-chuan-shuo-final-fantasy-legend-ii-gb---kenji-ito\",\n      \"battle-1---saga-frontier-ps1---kenji-ito\",\n    ],\n    composerBirthYear: 1968,\n    country: \"Japan\",\n    genre: \"Video game music\",\n  },\n  {\n    slug: \"kenji_kawai\",\n    midis: [\n      \"yun-ming-noye--piano-ver.----kenji-kawai\",\n      \"go-go-reigen-gogoling-huan---kenji-kawai-mp100\",\n      \"life-before-war---kenji-kawai---sad-song---apocalypse-the-second-world-war-soundtrack\",\n    ],\n    composerBirthYear: 1957,\n    genre: \"Anime, TV, Film score, Video game music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"alan_menken_beauty_and_the_beast\",\n    midis: [\n      \"beauty-and-the-beast-prologue\",\n      \"evermore---alan-menken-evermore-from-beauty-and-the-beast---alan-menken-piano-voice\",\n      \"something-there\",\n      \"if-i-can-t-love-her\",\n      \"belle\",\n      \"gaston\",\n      \"tale-as-old-as-time---beauty-and-the-beast---alan-menken---piano-solo\",\n    ],\n    composerBirthYear: 1949, // Alan Menken\n    genre: \"Film Score, Musical\",\n    style: \"Orchestral, Broadway\",\n    country: \"USA\",\n  },\n  {\n    slug: \"alan_menken\",\n    midis: [\"i-see-the-light-from-disney-s-tangled\"],\n    composerBirthYear: 1949, // Alan Menken\n    genre: \"Film score, Musical\",\n    style: \"Orchestral, Broadway\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ravel\",\n    midis: [\n      \"pavane_pour_une_infante_defunte_ravel_recorder\",\n      \"ravel---miroirs-iii.-une-barque-sur-l-ocean\",\n\n      \"ma-mere-l-oye-m.-60-i.-pavane-de-la-belle-au-bois-dormant---maurice-ravel\",\n    ],\n    composerBirthYear: 1875, // Maurice Ravel\n    genre: \"Classical\",\n    style: \"Impressionist\",\n    country: \"France\",\n  },\n  {\n    slug: \"masakazu_sugimori\",\n    midis: [\n      \"reminiscence-~-dl-6-incident---masakazu-sugimori-phoenix-wright-ace-attorney\",\n      \"ace-attorney-turnabout-sisters-ballad---masakazu-sugimori\",\n    ],\n    composerBirthYear: 1968, // Masakazu Sugimori\n    genre: \"Video game music\",\n    style: \"Orchestral, Piano\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"tokyo_ghoul\",\n    midis: [\n      \"unravel-acoustic-ver-tokyo-ghoul-theishter-sheet-music-full-sheets\",\n      \"tokyo-ghoul---glassy-sky-theishter-edit\",\n      \"tokyo-ghoul-a-kisetsu-wa-tsugitsugi-shindeiku\",\n      \"tokyo-ghoul---licht-und-schatten-akmigone-transcription\",\n      \"tokyo-ghoul-a-ost---wanderers\",\n      \"schmetterling---tokyo-ghoul-re-ep-7-bgm\",\n      \"tokyo-ghoul-re-op--katharsis\",\n      \"asphyxia---tokyo-ghoul-re-op\",\n    ],\n    composerBirthYear: 1989, // Yutaka Yamada\n    genre: \"Anime, Video game music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"alan_silvestri\",\n    midis: [\n      \"the-avengers-theme---piano\",\n      \"forest-gump---main-title-feather-theme\",\n      \"back-to-the-future-theme-song\",\n    ],\n    composerBirthYear: 1950,\n    genre: \"Film score, TV music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"karol_kurpinski\",\n    midis: [\n      \"polonaise-in-f-minor---karol-kurpinski\",\n      \"kurpinski-polonaise-in-a-major-polonez-a-dur\",\n    ],\n    composerBirthYear: 1785,\n  },\n  {\n    slug: \"wojciech_kilar\",\n    midis: [\n      \"wojciech-kilar-walc-z-filmu-tredowata-waltz-from-the-film-the-leper\",\n      \"polonaise-from-movie-master-thaddeus---wojciech-kilar\",\n    ],\n    composerBirthYear: 1932,\n    genre: \"Film score\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"ian_taylor\",\n    midis: [\n      \"harmony-piano-arrangement-runescape-3\",\n      \"runescape---medieval\",\n      \"autumn-voyage---runescape\",\n      \"sea-shanty-2---ian-taylor\",\n      \"runescape---yesteryear\",\n      \"garden-osrs---ian-taylor\",\n    ],\n  },\n  {\n    slug: \"nathan_hanover\",\n    midis: [\n      \"generation-loss-ost---ranboo-generation-loss-medley\",\n      \"spirit-of-the-slime---nathan-hanover-synthonic-orchestra\",\n      \"dialtown-theme---nathan-hanover-synthonic-orchestra-dialtown-theme\",\n      \"remnants-of-joy-tjoc-sm-bedroom---nathan-hanover-synthonic-orchestra\",\n    ],\n  },\n  {\n    slug: \"james_hannigan\",\n    midis: [\n      \"command-conquer-red-alert-3---soviet-march-advanced-piano-solo\",\n      \"village-dance-runescape\",\n      \"to-catch-an-owl---james-hannigan-harry-potter-5-videogame-ost-piano\",\n      \"exploring-hogwarts---james-hannigan-piano\",\n      \"memories-of-guthix-runescape\",\n    ],\n  },\n\n  {\n    slug: \"deltarune\",\n    midis: [\n      \"deltarune-chapter-2-ost-toby-fox---my-castle-town-piano-solo\",\n      \"attack-of-the-killer-queen---deltarune-chapter-2\",\n    ],\n    composerBirthYear: 1991, // Toby Fox\n    genre: \"Video game music\",\n    style: \"Chiptune, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"mieczyslaw_weinberg\",\n    midis: [\"vstuplenie-iz-m-f-vinni-puh-m.-vaynberg\"],\n    composerBirthYear: 1919, // Mieczysaw Weinberg\n    genre: \"Classical\",\n    style: \"Romantic, Soviet\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"rachel_portman\",\n    midis: [\"we-had-today\", \"the-letterbox\", \"chocolat---main-titles\"],\n    composerBirthYear: 1960, // Rachel Portman\n    genre: \"Film score\",\n    style: \"Orchestral, Light Classical\",\n    country: \"UK\",\n  },\n  {\n    slug: \"john_barry\",\n    midis: [\n      \"places-out-of-africa---john-barry\",\n      \"somewhere-in-time---john-barry\",\n    ],\n    composerBirthYear: 1933, // John Barry\n    genre: \"Film score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"UK\",\n  },\n  {\n    slug: \"franois_couperin\",\n    midis: [\n      \"francois-couperin---les-barricades-mysterieuses\",\n      \"le-rossignol-en-amour---francois-couperin\",\n    ],\n    composerBirthYear: 1668, // Franois Couperin\n    genre: \"Baroque\",\n    style: \"Baroque, French Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"austin_wintory\",\n    midis: [\n      \"apotheosis-journey-ost---austin-wintory-thepandatooth-s-arrangement\",\n      \"nascence-journey-main-theme\",\n      \"monaco---what-s-yours-is-mine\",\n      \"pdf-volibear-the-relentless-storm\",\n      \"jokes-jokes-jokes\",\n      \"journey-i-was-born-for-this---austin-wintory\",\n      \"the-old-south-distillery\",\n    ],\n    composerBirthYear: 1984, // Austin Wintory\n    genre: \"Video game music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"USA\",\n  },\n  {\n    slug: \"cyril_scott\",\n    midis: [\"lotus-land\", \"cyril-scott-summerland-playtime-op.-54-no.1\"],\n    composerBirthYear: 1879, // Cyril Scott\n    genre: \"Classical\",\n    style: \"Impressionistic, British Classical\",\n    country: \"UK\",\n  },\n  // World pianists\n  {\n    slug: \"darren_korb_hades\",\n    midis: [\"on-the-coast---darren-korb-austin-wintory\"],\n    composerBirthYear: 1985, // Darren Korb\n    genre: \"Video game music\",\n    style: \"Ambient, Indie\",\n    country: \"USA\",\n  },\n  {\n    slug: \"percy_grainger\",\n    midis: [\n      \"molly-on-the-shore\",\n      \"spoon-river---percy-grainger\",\n      \"country-gardens-for-brass-quintet\",\n    ],\n    composerBirthYear: 1882, // Percy Grainger\n    genre: \"Classical, Folk\",\n    style: \"Folk music, Modern Classical\",\n    country: \"Australia\",\n  },\n  {\n    slug: \"benvenuto_terzi\",\n    midis: [\n      \"carillon---benvenuto-terzi-carillon-benvenuto-terzi---guitar-etude\",\n    ],\n    composerBirthYear: 1892,\n    country: \"Italy\",\n  },\n  {\n    slug: \"abdullah_ibrahim\",\n    midis: [\n      \"blue-bolero\",\n      \"homecoming-song---abdullah-ibrahim\",\n      \"mandela---abdullah-ibrahim--y8-african-music\",\n      \"water-from-an-ancient-well---abdullah-ibrahim\",\n      \"the-wedding---abdullah-ibrahim\",\n      \"thaba-bosigo\",\n      \"maraba-blue---abdullah-ibrahim\",\n    ],\n    composerBirthYear: 1934, // Abdullah Ibrahim\n    genre: \"Jazz, World music\",\n    style: \"Jazz, South African music\",\n    country: \"South Africa\",\n  },\n  {\n    slug: \"elza_ibrahimova\",\n    midis: [\n      \"elza-ibrahimova---daha-m-nd-dozum-yox\",\n      \"ot-n-gunl-rimi-qaytaraydilar-azerbaijani-song-piano\",\n      \"s-n-yadima-dus-nd\", // iv-V7-i, three chord minor\n    ],\n    composerBirthYear: 1949, // Elza Ibrahimova\n    genre: \"World music, Folk\",\n    style: \"Azerbaijani music, Folk\",\n    country: \"Azerbaijan\",\n  },\n  {\n    slug: \"bahram_dehghanyar\",\n    midis: [\"zireh-gonbadeh-kabood\", \"grand-mother\", \"aghaye-hekayati\"],\n    composerBirthYear: 1940, // Bahram Dehghanyar\n    genre: \"World music\",\n    style: \"Persian music, Folk\",\n    country: \"Iran\",\n  },\n  {\n    slug: \"jerry_goldsmith\",\n    midis: [\n      \"star-trek-voyager-theme-piano-arrangement\",\n      \"the-russia-house---jerry-goldsmith\",\n      \"the-gremlin-rag-accordion\",\n      \"king-solomon-s-mines---main-theme\",\n      \"theme-from-hoosiers\",\n      \"it-s-a-long-road-from-first-blood---jerry-goldsmith\",\n    ],\n    composerBirthYear: 1929, // Jerry Goldsmith\n    genre: \"Film score, TV music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"eduard_artemyev\",\n    midis: [\n      \"sibirskiy-ciryulnik---eduard-artemev\",\n      \"svoy-sredi-chuzhih-chuzhoy-sredi-svoih---eduard-artemev\",\n      \"raba-lyubvi---eduard-artemev\",\n    ],\n    composerBirthYear: 1937, // Eduard Artemyev\n    genre: \"Film score\",\n    style: \"Orchestral, Soviet\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"vladimir_shainsky\",\n    midis: [\n      \"belye-korabliki-v.-shainskiy\",\n      \"chemu-uchat-v-shkole----vladimir-shainskiy\",\n      \"pesenka-krokodila-geny-iz-m-f-cheburashka---vladimir-shainskiy-perelozhenie-dlya-fortepiano-i-golosa\",\n      \"kukla---v.-shainskiy\",\n    ],\n    composerBirthYear: 1935, // Vladimir Shainsky\n    genre: \"Film score, Children's music\",\n    style: \"Soviet, Light Classical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"kapustin\",\n    midis: [\"concert-etudes-op.-40-no.-1---prelude\"],\n    composerBirthYear: 1937, // Nikolai Kapustin\n    genre: \"Classical, Jazz\",\n    style: \"Jazz Classical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"russian_garmon\",\n    midis: [\"cyganochka---misc-traditional-cyganochka\"],\n  },\n  {\n    slug: \"maksim_dunaevsky\",\n    midis: [\n      \"misyachniy-vals---i.-dunaievskiy\",\n      \"polka---i.-dunaievskiy\",\n      \"oy-cvite-kalina---i.-dunaievskiy\",\n      \"uvertyura-do-k-f-diti-kapitana-granta---i.-dunaievskiy\",\n      \"chastushki-babok-yozhek\",\n    ],\n    composerBirthYear: 1942, // Maksim Dunaevsky\n    genre: \"Film score, Musical\",\n    style: \"Soviet, Musical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"prokofiev\",\n    midis: [\"dance-of-the-knights\"],\n    composerBirthYear: 1891, // Sergei Prokofiev\n    genre: \"Classical\",\n    style: \"Classical, Modern\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"ernesto_cortazar\",\n    midis: [\"beethovens-silence---ernesto-cortazar\"],\n    composerBirthYear: 1940,\n  },\n  {\n    slug: \"gennady_gladkov\",\n    midis: [\n      \"pesnya-genialnogo-syshchika---gennadiy-gladkov\",\n      \"duet-princessy-i-korolya---gennadiy-gladkov-duet-princessy-i-korolya\",\n      \"pesnya-atamanshi-i-razboynikov-govoryat-my-byaki-buki---gennadiy-gladkov-pesnya-atamanshi-i-razboynikov-govoryat-my-byaki-buki-g.-gladkov\",\n      \"prosnis-i-poy---gennadiy-gladkov\",\n      \"tviy-poyizd---g.-gladkov\",\n      \"proshchalna-pisnya---g.-gladkov\",\n      \"farewell-song----g.-gladkov----easy-violin-and-piano\",\n      \"pisnya-ostapa---g.-gladkov\", // reharm diatonic -> V/\n      \"golovna-tema---g.-gladkov\",\n      \"rio---g.-gladkov\",\n      \"pritvornaya-pesnya-trubadura---gladkov\",\n      \"shestvie-cortege\",\n      \"tango-lyubvi\",\n      \"a-mozhet-byt-vorona---g.-gladkov\",\n      \"dzhentlmeny-udachi---g.-gladkov\",\n      \"beleet-moy-parus-a.-mironov---gennadiy-gladkov\",\n      \"padal-proshlogodniy-sneg---grigoriy-gladkov\", // cool stuff\n    ],\n    composerBirthYear: 1935, // Gennady Gladkov\n    genre: \"Film score, Musical\",\n    style: \"Soviet, Musical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"yuki_hayashi\",\n    midis: [\"my-hero-academia---you-say-run---piano-solo\"],\n    composerBirthYear: 1980, // Yuki Hayashi\n    genre: \"Anime music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"alexey_bychkov\",\n    midis: [\"alexey_bychkov_goby_waltz\", \"alexey_bychkov_s_trio_goby_waltz\"],\n  },\n  {\n    slug: \"brandon_hesslau\",\n    midis: [\n      \"our-happy-ending---brandon-hesslau---buddy-simulator-1984\",\n      \"a-lovely-little-town---brandon-hesslau---buddy-simulator-1984\",\n      \"a-house-with-a-heart---brandon-hesslau---buddy-simulator-1984\",\n      \"the-cauldron---brandon-hesslau---buddy-simulator-1984\",\n      \"left-or-right---brandon-hesslau---buddy-simulator-1984\",\n      \"palchumville---brandon-hesslau---buddy-simulator-1984\",\n      \"the-snoodlewonker---brandon-hesslau---buddy-simulator-1984\",\n      \"you-and-i---buddy-simulator-1984\",\n      \"family---brandon-hesslau---buddy-simulator-1984\",\n    ],\n    composerBirthYear: 1964,\n    genre: \"Video game music\",\n    style: \"Indie, Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"studio_thumpy_puppy\",\n    midis: [\n      \"game-over---in-stars-and-time-ost---studio-thumpy-puppy\",\n      \"be-careful-everyone-boss-theme---in-stars-and-time\",\n      \"do-you-remember-king-s-theme---in-stars-and-time\",\n      \"thinking-time---in-stars-and-time-ost---studio-thumpy-puppy\",\n      \"frozen-in-time---studio-thumpy-puppy---in-stars-and-time-ost\",\n      \"friend-quest-solo---studio-thumpy-puppy-friend-quest-solo\",\n    ],\n    composerBirthYear: 1994, // Studio Thumpy Puppy (likely pseudonym or studio project)\n    genre: \"Video game music\",\n    style: \"Ambient, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"mikael_tariverdiev\",\n    midis: [\n      \"malenkiy-princ-m.-tariverdiev\",\n      \"vals-iz-ironii-sudby-ili-s-legkim-parom-the-waltz-from-the-irony-of-fate\",\n      \"dvoe-v-kafe\",\n      \"mne-nravitsya-chto-vy-bolny-ne-mnoy---mikael-tariverdie\",\n      \"mgnoveniya---m.-tariverdiiev\",\n      \"tihaya-muzyka-regtaym-no-9---m.-tariverdiev\",\n      \"tariverdiev-sudba-rezidenta-prelyudiya\",\n      \"po-ulice-moey---m.-tariverdiev\",\n      \"snow-above-leningrad-sneg-nad-leningradom---mikael-tariverdiev\",\n      \"pesnya-o-dalyokoy-rodine\",\n      \"tvoy-golos---mikael-tariverdiev\",\n      \"ne-zhaleyu-ne-zovu-ne-plachu\",\n      \"pesnya-tartali\",\n      \"na-tihoreckuyu-sostav-otpravitsya\",\n      \"v-sobore---m.-tariverdiev\",\n      \"ubil-ya-poemu---m.-tariverdiev\",\n      \"mikael-tariverdiev-michael-tariverdiyev---nikogo-ne-budet-v-dome-no-one-will-be-at-home\",\n      \"tariverdiev---net-eti-slyozy-ne-moi\",\n      \"ya-sprosil-u-yasenya---tariverdiev-tariverdiev\",\n    ],\n    composerBirthYear: 1931, // Mikael Tariverdiev\n    genre: \"Film score, Classical\",\n    style: \"Soviet Classical, Cinematic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"bill_evans\",\n    midis: [\n      \"bill-evans-on-autunm-leaves-from-the-album-portrait-in-jazz\",\n      \"remembering-the-rain---bill-evans\",\n      \"danny-boy-bill-evans-ver.\",\n      \"bill-evans---waltz-for-debby-medium\",\n    ],\n    composerBirthYear: 1929, // Bill Evans\n    genre: \"Jazz\",\n    style: \"Post-bop, Cool Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"karsten_obarski\",\n    midis: [\n      \"oil-imperium-ingame-music-action-1---karsten-obarski\",\n      \"oil-imperium-title-music---karsten-obarski\",\n    ],\n    composerBirthYear: 1971, // Karsten Obarski\n    genre: \"Video game music\",\n    style: \"Electronic, Ambient\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"jules_massenet\",\n    midis: [\n      \"thais-meditation-by-jules-massenet\",\n      \"aragonesa---jules-massenet\",\n      \"avril-est-amoureux---jules-massenet---arr.-for-flute-and-harp\",\n      \"musique-pour-bercer-les-petits-enfants-lullaby-jules-massenet---for-melodica-and-harmonium\",\n      \"elegie---jules-massenet---version-for-voice-cello-and-piano\",\n    ],\n    composerBirthYear: 1842, // Jules Massenet\n    genre: \"Classical\",\n    style: \"Romantic, French Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"cardiacs\",\n    midis: [\n      \"cardiacs---tarred-and-feathered-for-solo-piano\",\n      \"cardiacs---in-a-city-lining-for-solo-piano\",\n    ],\n    composerBirthYear: 1960, // Cardiacs (Tim Smith)\n    genre: \"Progressive rock, Experimental rock\",\n    style: \"Avant-garde, Math rock\",\n    country: \"UK\",\n  },\n  {\n    slug: \"cecile_chaminade\",\n    midis: [\"arabesque-op.-61-cecile-chaminade\"],\n    composerBirthYear: 1857, // Cecile Chaminade\n    genre: \"Classical\",\n    style: \"Romantic, French Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"taylor_swift\",\n    midis: [\n      \"cardigan---taylor-swift\",\n      \"champagne-problems---taylor-swift\",\n      \"evermore---taylor-swift-feat.-bon-iver\",\n      \"love-story---taylor-swift-taylor-s-version\",\n      \"tolerate-it---taylor-swift-intro-from-the-eras-tour\",\n      \"no-body-no-crime---taylor-swift\",\n      \"shake-it-off---taylor-swift\",\n      \"fearless---taylor-swift-2\",\n      \"enchanted-taylor-s-version---taylor-swift\",\n      \"forever-and-always---taylor-swift\",\n      \"lover---shawn-mendes-taylor-swift\",\n      \"blank-space---taylor-swift-easy-piano\",\n      \"wildest-dreams---taylor-swift\",\n      \"run-feat.-ed-sheeran-taylor-s-version-from-the-vault---taylor-swift-run-feat.-ed-sheeran-taylor-s-version-from-the-vault---flute-and-clarinet-duet\",\n    ],\n    composerBirthYear: 1989, // Taylor Swift\n    genre: \"Pop, Country\",\n    style: \"Pop, Singer-Songwriter\",\n    country: \"USA\",\n  },\n  {\n    slug: \"c_pop\",\n    midis: [\"meng---tntshi-dai-shao-nian-tuan\"],\n    composerBirthYear: 1990, // C-Pop (likely multiple artists)\n    genre: \"Pop\",\n    style: \"C-pop, Mandarin pop\",\n    country: \"China\",\n  },\n  {\n    slug: \"ttng\",\n    midis: [\n      \"ttng_26_is_dancier_than_4_tablature\",\n      \"ttng---empty-palms-tablature\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Math rock, Indie rock\",\n    style: \"Progressive rock, Post-rock\",\n    country: \"UK\",\n  },\n  {\n    slug: \"takahiro_unisuga\",\n    midis: [\"trails-of-cold-steel-iii----things-entrusted\"],\n    composerBirthYear: 1976, // Takahiro Unisuga\n    genre: \"Video game music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"gustavo_santaolalla\",\n    midis: [\n      \"the-last-of-us---gustavo-santaolalla---hbo-opening-theme\",\n      \"de-ushuaia-a-la-quiaca\",\n      \"all-gone-no-escape---gustavo-santaolalla-all-gone-no-escape\",\n      \"the-choice-last-of-us\",\n    ],\n    composerBirthYear: 1951, // Gustavo Santaolalla\n    genre: \"Film score, Folk\",\n    style: \"Folk, Ambient\",\n    country: \"Argentina\",\n  },\n  {\n    slug: \"tonci_huljic\",\n    midis: [\n      \"croatian-rhapsody-hard-piano\",\n      \"hana-s-eyes-by-maksim-mrvica\",\n      \"claudine---tonci-huljic\",\n      \"cubana\",\n      \"still-waters---tonci-huljic\",\n      \"wonderland---tonci-huljic\",\n      \"kolibre---maksim-mrvica\",\n    ],\n    composerBirthYear: 1957, // Toni Hulji\n    genre: \"Pop, Film score\",\n    style: \"Pop, Cinematic\",\n    country: \"Croatia\",\n  },\n  {\n    slug: \"hayato_sonoda\",\n    midis: [\n      \"ys-viii---dana-arcanashift\",\n      \"ys-viii---the-sibylline-road\",\n      \"the-legend-of-heroes--trails-in-the-sky---the-whereabouts-of-light\",\n    ],\n    composerBirthYear: 1984, // Hayato Sonoda\n    genre: \"Video game music\",\n    style: \"Orchestral, Symphonic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"ken_nakagawa\",\n    midis: [\n      \"nefertiti---k.-nakagawa-d.-achiwa-mana-khemia\",\n      \"atelier-totori---her-future-1\",\n    ],\n    composerBirthYear: 1970, // Ken Nakagawa\n    genre: \"Video game music\",\n    style: \"Orchestral, Electronic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"nihoshika\",\n    midis: [\n      \"bu-wu-nizhao-rasaretaguang---nihosika-heyani-terasareta-hikari---nihoshika\",\n      \"reinotubuyaki---nihosika\",\n    ],\n    composerBirthYear: 1992, // Nihoshika\n    genre: \"Video game music\",\n    style: \"Electronic, Ambient\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"joel_peters\",\n    midis: [\"trading-eights\", \"frostfang-s-theme\", \"waterfall---ec1ipze\"],\n    composerBirthYear: 1989, // Joel Peters\n    genre: \"Electronic, Video game music\",\n    style: \"Ambient, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"inon_zur\",\n    midis: [\n      \"dragon-age-origins-theme-song\",\n      \"hymn-of-vaghen---inon-zur\",\n      \"theme-from-fallout-76---inon-zur\",\n      \"in-uthenera\",\n    ],\n    composerBirthYear: 1965, // Inon Zur\n    genre: \"Video game music, Film score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Israel\",\n  },\n  {\n    slug: \"lena_raine_minecraft\",\n    midis: [\n      \"lena-raine---rubedo\",\n      \"pigstep\",\n      \"otherside---lena-raine-piano-solo\",\n    ],\n    composerBirthYear: 1983, // Lena Raine\n    genre: \"Video game music, Experimental\",\n    style: \"Ambient, Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"lena_raine_celeste\",\n    midis: [\n      \"little-goth---celeste\",\n      \"scattered-and-lost---celeste\",\n      \"quiet-and-falling---celeste\",\n      \"awake-celeste-ost\",\n      \"resurrections---lena-raine\",\n    ],\n    composerBirthYear: 1983, // Lena Raine\n    genre: \"Video game music, Indie\",\n    style: \"Ambient, Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"mamomo\",\n    midis: [\n      \"xiu-ti---mamomo\",\n      \"xxd44nature\",\n      \"summer-echoes---mamomo\",\n      \"silver----bai-yin\",\n      \"huan-chuang-noidea---prayer\",\n      \"sengokuhara_02\",\n    ],\n    composerBirthYear: 1990, // Mamomo\n    genre: \"Electronic, Experimental\",\n    style: \"Chillwave, IDM\",\n    country: \"China\",\n  },\n  {\n    slug: \"national_anthems\",\n    midis: [\n      \"zimbabwe-national-anthem\",\n      \"togo-national-anthem\",\n      \"nigeria-national-anthem\",\n      \"lesotho-national-anthem\",\n      \"burundi-national-anthem\",\n      \"chad-national-anthem\",\n      \"ghana-national-anthem\",\n      \"algeria-national-anthem\",\n    ],\n    composerBirthYear: null, // National anthems (varied composers)\n    genre: \"Patriotic, Folk\",\n    style: \"Classical, National\",\n    country: null,\n  },\n  {\n    slug: \"debussy\",\n    midis: [\n      \"Clair_de_Lune__Debussy\",\n      \"arabesque-l.-66-no.-1-in-e-major\",\n      \"estampes-i-pagodes----debussy\",\n      \"valse-romantique-claude-debussy\",\n      \"petite-suite-for-piano-four-hands---claude-debussy\",\n      \"debussy-claude---la-plus-que-lente\",\n      \"the-little-nigar-le-petit-negre---debussy\",\n      \"la-cathedrale-engloutie---debussy\",\n      \"debussy---suite-bergamasque-4-passepied\",\n      \"debussy---images-reflets-dans-leau\",\n      \"claude-debussy---la-fille-aux-cheveux-de-lin\",\n      \"prelude-l.-117-no.-6-in-d-minor---debussy\",\n      \"golliwog-s-cakewalk\",\n      \"reverie_galimberti\",\n    ],\n    composerBirthYear: 1862, // Claude Debussy\n    genre: \"Classical\",\n    style: \"Impressionist\",\n    country: \"France\",\n  },\n  {\n    slug: \"autumn_leaves\",\n    midis: [\n      \"autumn-leaves\",\n      \"autumn-leaves-les-feuilles-mortes\",\n      \"autumn-leaves---jazz-piano-solo-tutorial\",\n      \"bill-evans-on-autunm-leaves-from-the-album-portrait-in-jazz\",\n      \"autumn-leaves-jazz-piano\",\n      \"autumn-leaves-in-c\",\n      \"autumn_leaves_diatonic\",\n    ],\n    composerBirthYear: null, // Autumn Leaves (multiple composers)\n    genre: \"Jazz, Standard\",\n    style: \"Jazz, Ballad\",\n    country: \"France, USA\",\n  },\n  {\n    slug: \"komitas\",\n    midis: [\n      \"garown-a-garun-a-spring-clarinet-piano-komitas\",\n      \"garown-a-spring---komitas\",\n      \"chinar-es-komitas\",\n      \"ounabi-ndeg2-des-6-danses-armeniennes-de-komitas\",\n      \"alagyas-alaghiyssh-clarinettepiano-komitas-komitas\",\n      \"hov-arek---komitas\",\n      \"hoy-nazan---komitas\",\n      \"a.04-01-havadarim\",\n      \"saren-kowga-jowxtm-goc\",\n      \"kaqavik\",\n      \"yar-jan-ari---komitas-vardapet\",\n      \"a.03-01-vorti-assdoudzo-komitas\",\n    ],\n    composerBirthYear: 1869, // Komitas Vardapet\n    genre: \"Classical, Armenian Folk\",\n    style: \"Folk, Choral\",\n    country: \"Armenia\",\n  },\n  {\n    slug: \"ivan_zajc\",\n    midis: [\"na-gondoli---ivan-pl.-zajc\"],\n    composerBirthYear: 1832, // Ivan Zajc\n    genre: \"Classical\",\n    style: \"Opera, Romantic\",\n    country: \"Croatia\",\n  },\n  {\n    slug: \"stephen_rippy\",\n    midis: [\n      \"polyester-jammy-rome-2---age-of-empires\",\n      \"age-of-empires-ii-aoc-main-theme\",\n      \"music-9-operation-monkey-age-of-empires-ii-the-age-of-kings-for-piano----stephen-rippy\",\n    ],\n    composerBirthYear: 1974, // Stephen Rippy\n    genre: \"Video game music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"grant_kirkhope\",\n    midis: [\n      \"mid-boss-mayhem\",\n      \"the-phantom-of-the-bwahpera-act-1---mario-rabbids-kingdom-battle\",\n      \"viva-pinata---night-3---grant-kirkhope-viva-pinata-night-3---grant-kirkhope\",\n      \"grant-kirkhope---chilli-willi-chilli-billi-battle\",\n      \"angry-aztec---donkey-kong-64---grant-kirkhope-dk64\",\n      \"cranky-s-lab---donkey-kong-64---grant-kirkhope-dk64\",\n\n      // banjo-kazooie:\n      \"spiral-mountain\",\n      \"opening-banjo-kazooie\",\n      \"gruntilda-s-challenge-piano-arrangement\",\n      \"mad-monster-mansion---banjo-kazooie-piano\",\n      \"freezeezy-peak---banjo-kazooie-piano\",\n      \"rusty-bucket-bay\",\n    ],\n    composerBirthYear: 1962, // Grant Kirkhope\n    genre: \"Video game music\",\n    style: \"Orchestral, Funky\",\n    country: \"UK\",\n  },\n  {\n    slug: \"waterflame\",\n    midis: [\n      \"waterflame---glorious-morning\",\n      \"field-of-memories---waterflame-stick-war-misterpiano92\",\n      \"blast-processing-a5ff67\",\n      \"clutterfunk\",\n      \"geometrical-dominator-geometry-dash-ost-by-waterflame\",\n      \"electroman-adventures-full\",\n      \"hexagon-force---geometry-dash-piano-solo\",\n      \"time-machine\",\n      \"jumper-piano-solo\",\n    ],\n    composerBirthYear: 1989,\n  },\n  {\n    slug: \"sage_guyton_jeremy_wakefield_nick_carr\",\n    midis: [\n      \"grass-skirt-chase-piano-arrangement\",\n      \"spm---spongebob-production-music-hawaiian-adventures-spongebob-theme\",\n      \"hello-blues---sage-guyton-jeremy-wakefield\",\n      \"rip-tide-ripped-hide\",\n    ],\n    composerBirthYear: null, // Multiple composers for Spongebob series\n    genre: \"Television, Film score\",\n    style: \"Cartoon, Funk\",\n    country: \"USA\",\n  },\n  {\n    slug: \"lionel_rusquet\",\n    midis: [\"le-monde-des-graves-piano\", \"reflet\"],\n    composerBirthYear: 1990, // Lionel Rusquet\n    genre: \"Classical, Contemporary\",\n    style: \"Piano, Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"maclaine_diemer\",\n    midis: [\"path-of-fire-main-theme-menu---piano-arrangement\"],\n    composerBirthYear: 1947, // Maclaine Diemer\n    genre: \"Video game music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"yuja_wang\",\n    midis: [\n      \"turkish-march-by-yuja-wang\",\n      \"rhapsody-on-a-theme-of-paganini-op.43---sergei-rachmaninoff-18th-variation-yuja-wang\",\n      \"yuja-wang-encore-transcription-of-orfeo-ed-euridice-wq.30---christoph-willibald-gluck\",\n    ],\n    composerBirthYear: 1987, // Yuja Wang\n    genre: \"Classical\",\n    style: \"Virtuoso, Piano\",\n    country: \"China\",\n  },\n  {\n    slug: \"scott_lloyd_shelly\",\n    midis: [\n      \"overworld-day---scott-lloyd-shelly-terraria-ost\",\n      \"boss-1---scott-lloyd-shelly-terraria-ost\",\n      \"windy-day---scott-lloyd-shelly-terraria-ost\",\n      \"alternate-day---scott-lloyd-shelly-terraria-ost\",\n      \"thunderstorm-storm---scott-lloyd-shelly-terraria-ost\",\n    ],\n    composerBirthYear: 1987, // Scott Lloyd Shelly\n    genre: \"Video game music\",\n    style: \"Ambient, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"bud_powell\",\n    midis: [\"oblivion-bud-powell\", \"dusk-in-sandi---bud-powell\"],\n    composerBirthYear: 1924,\n    genre: \"Jazz\",\n    style: \"Bebop, Piano\",\n    country: \"USA\",\n  },\n  {\n    slug: \"michiru_yamane\",\n    midis: [\n      \"michiru-yamane---wood-carving-partita\",\n      \"dance-of-gold---castlevania-symphony-of-the-night\",\n    ],\n    composerBirthYear: 1963, // Michiru Yamane\n    genre: \"Video game music, Classical\",\n    style: \"Baroque, Orchestral\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"mendelssohn\",\n    midis: [\n      \"wedding-march-mendelssohn-piano\",\n      \"mendelssohn-opus-67-no.-2-aka-lost-illusions\",\n      \"mendelssohn-songs-without-words-no.-1-piano-solo\",\n\n      \"six-christmas-pieces-no.-1\",\n      \"six-christmas-pieces-no.-2\",\n      \"six-christmas-pieces-no.-3\",\n      \"six-christmas-pieces-no.-4\",\n      \"six-christmas-pieces-no.-5\",\n      \"six-christmas-pieces-no.-6\",\n    ],\n    composerBirthYear: 1809, // Felix Mendelssohn\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"kartsy_hatakka_and_kimmo_kajasto\",\n    midis: [\n      \"max_payne_theme\",\n      \"max-payne-3---main-menu-theme-4.\",\n      \"max-payne-3---menu-theme-3---kartsy-hatakka-kimmo-kajasto\",\n    ],\n    similarTo: [\"shinichi_osawa\"],\n  },\n  {\n    slug: \"romantic_single_pieces\",\n    midis: [\n      \"caprice-brillant-sur-romeo-et-juliette-op.-303---georges-lamothe\",\n      \"huit-septembre-mazurka-op.-7---eugeniusz-zaluski\",\n    ],\n    composerBirthYear: 1809, // Georges Lamothe\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"alfred_lefebure-wely\",\n    midis: [\n      \"alfred-lefebure-wely---les-cloches-du-monastere-op.-54a\",\n      \"prelude-in-a-minor---louis-james-alfred-lefebure-wely\",\n    ],\n  },\n  {\n    slug: \"michael_price_and_david_arnold\",\n    midis: [\n      \"the-game-is-on-from-bbc-s-sherlock-for-piano\",\n      \"who-you-really-are-from-sherlock-bbc-series-4\",\n    ],\n  },\n  { slug: \"folk\", midis: [\"jeux-interdits\"] },\n  {\n    slug: \"common_practice_single_pieces\",\n    midis: [\"valsy-griboedova---griboedov-s-waltzes\", \"chopsticks\"],\n    composerBirthYear: 1795, // Alexander Griboedov\n    genre: \"Classical\",\n    style: \"Common-practice\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"shuki_levy_haim_saban\",\n    midis: [\n      \"inspecteur-gadget---shuki-levy-haim-saban-inspecteur-gadget\",\n      \"heathcliff-theme-song\",\n      \"bulk-skull-s-theme-mighty-morphin-power-rangers---shuki-levy-haim-saban-et-al\",\n      \"le-vol-du-condor---les-mysterieuses-cites-d-or---shuki-levy-haim-saban---4-mains\",\n      \"piano-duet-he-man-and-the-masters-of-the-universe-1980s---shuki-levi-haim-saban\",\n    ],\n    composerBirthYear: 1946, // Shuki Levy & Haim Saban\n    genre: \"Television, Pop\",\n    style: \"Theme songs, Children's\",\n    country: \"Israel/USA\",\n  },\n  {\n    slug: \"m2u\",\n    midis: [\"m2u---masquerade\"],\n    composerBirthYear: null, // M2U (not much info available)\n    genre: \"Electronic\",\n    style: \"Eurobeat, Trance\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"haywyre\",\n    midis: [\"prologue---haywyre\"],\n    composerBirthYear: 1992, // Haywyre\n    genre: \"Electronic\",\n    style: \"Chillstep, IDM\",\n    country: \"USA\",\n  },\n  {\n    slug: \"gari_biasillo\",\n    midis: [\n      \"target-renegade-main-theme---gari-biasillo\",\n      \"target-renegade-level-3-music---gari-biasillo\",\n      \"target-renegade-end-theme---gari-biasillo\",\n    ],\n    composerBirthYear: 1980, // Gari Biasillo\n    genre: \"Video game music\",\n    style: \"Chiptune, Synthwave\",\n    country: \"Spain\",\n  },\n  {\n    slug: \"zun_touhou\",\n    midis: [\n      \"touhou-8---maiden-s-capriccio-~-dream-battle\",\n      \"touhou---native-faith\",\n\n      \"touhou-6-eosd-complete-ost\",\n      \"touhou-8-in-complete-ost\",\n    ],\n    composerBirthYear: 1977, // ZUN\n    genre: \"Video game music\",\n    style: \"Electronic, Rock\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"edmund_fu\",\n    midis: [\n      \"dpsp-starting-wind---edmund-fu\",\n      \"yi-zhan-next-station---edmund-fu\",\n      \"deemo-walking-by-the-sea---edmund-fu\",\n    ],\n    composerBirthYear: 1989, // Edmund Fu\n    genre: \"Video game music\",\n    style: \"Ambient, Piano\",\n    country: \"Hong Kong\",\n  },\n  {\n    slug: \"farhan_sarasin\",\n    midis: [\n      \"original-reflect---gawr-gura---farhan-sarasin\",\n      \"id-entity-voices---hololive-idol-project\",\n      \"scent-from-voez\",\n    ],\n    composerBirthYear: 1995, // Farhan Sarasin\n    genre: \"Video game music\",\n    style: \"Ambient, Electronic\",\n    country: \"Indonesia\",\n  },\n  {\n    slug: \"yoko_shimomura\",\n    midis: [\n      \"guile-s-theme-street-fighter-ii\",\n      \"vega-s-theme-street-fighter-ssbu-remix-score-compacted-for-violin-and-piano\",\n      \"sutoritohuaitaii-taitorudemo~-v.s.hua-mian-street-fighter-ii-ac-title---v.s.---yoko-shimomura\",\n      \"e.ben-tian-e.honda-japan---sutoritohuaitaii-street-fighter-ii-ac---yoko-shimomura\",\n      \"chun-li-chun-li-china---sutoritohuaitaii-street-fighter-ii-ac---yoko-shimomura\",\n      \"buranka-blanka-brazil---sutoritohuaitaii-street-fighter-ii-ac---yoko-shimomura\",\n      \"ryu-s-theme-8beatsvgm---yoko-shimomura-street-fighter-2-ost-ryus-theme-reboot-arcade-cps1-stereo-by-8beatsvgm_320kbps\",\n      \"ken-ken-america---sutoritohuaitaii-street-fighter-ii-ac---yoko-shimomura\",\n      \"beware-the-forest-s-mushrooms-forest-maze---super-mario-rpg---yoko-shimomura-piano\",\n      \"dearly-beloved-piano-collections-kingdom-hearts\",\n    ],\n    composerBirthYear: 1967,\n    genre: \"Video game music\",\n    style: \"Orchestral, Electronic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"muzio_clementi\",\n    midis: [\"clementi-sonatina-no.-1-op-36\"],\n    composerBirthYear: 1752,\n  },\n  {\n    slug: \"yasunori_mitsuda\",\n    midis: [\n      \"where-we-used-to-be---xenoblade-chronicles-2\",\n      \"xenoblade-chronicles-2---mor-ardain-~-roaming-the-wastes\",\n      \"xenoblade-2-one-last-you-piano-arrange---yasunori-mitsuda\",\n      \"chrono-trigger---wind-scene---yasunori-mitsuda-wind-scene---chrono-trigger\",\n      \"chrono-trigger---02-crono-s-theme-main-theme\",\n    ],\n    composerBirthYear: 1972, // Yasunori Mitsuda\n    genre: \"Video game music\",\n    style: \"Orchestral, Celtic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"dm_dokuro\",\n    midis: [\n      \"terraria-calamity-mod-ost-dm-dokuro---stained-brutal-calamity-piano-solo\",\n      \"terraria-calamity-mod-ost-dm-dokuro---guardian-of-the-former-seas-piano-solo\",\n    ],\n    composerBirthYear: 1990, // DM Dokuro\n    genre: \"Video game music\",\n    style: \"Orchestral, Metal\",\n    country: \"USA\",\n  },\n  {\n    slug: \"geza_horvath\",\n    midis: [\"petite-saltarelle---geza-horvath\"],\n    composerBirthYear: 1985, // Geza Horvath\n    genre: \"Classical\",\n    style: \"Piano, Classical\",\n    country: \"Hungary\",\n  },\n  {\n    slug: \"nikolay_myaskovsky\",\n    midis: [\n      \"nikolai-myaskovsky---the-yellowed-leaves-op.-31-no-2\",\n      \"an-ancient-tale---drevnyaya-povest---nikolay-myaskovsky\",\n    ],\n    composerBirthYear: 1881, // Nikolay Myaskovsky\n    genre: \"Classical\",\n    style: \"Symphonic, Romantic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"yoshito_sekigawa\",\n    midis: [\n      \"cafe-scene---paper-mario-the-origami-king\",\n      \"super-paper-mario---naoko-mitome-and-chika-sekigawa-staff-roll-\",\n      \"it-s-showtime-from-super-paper-mario---naoko-mitome-chika-sekigawa\",\n      \"the-museum---paper-mario-the-origami-king\",\n    ],\n    composerBirthYear: 1977, // Yoshito Sekigawa\n    genre: \"Video game music\",\n    style: \"Jazz, Orchestral\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"guns_n_roses\",\n    midis: [\"welcome-to-the-jungle\", \"november-rain---guns-n-roses\"],\n    composerBirthYear: 1985, // Guns N' Roses (band)\n    genre: \"Rock\",\n    style: \"Hard rock, Glam metal\",\n    country: \"USA\",\n  },\n  {\n    slug: \"dominic_james_la_rocca\",\n    midis: [\"barnyard-blues---dominic-james-la-rocca-1917\"],\n    composerBirthYear: 1889, // Dominic James La Rocca\n    genre: \"Jazz\",\n    style: \"Blues\",\n    country: \"USA\",\n  },\n  {\n    slug: \"oesterreichisch-magyar_dance_music\",\n    midis: [\n      \"dunapalota---rozsnyai-sandor-1919\",\n      \"the-star---rene-r.-schmal-1919\",\n    ],\n    composerBirthYear: null, // Traditional Hungarian and Austrian dance music\n    genre: \"Folk, Dance\",\n    style: \"March, Polka\",\n    country: \"Austria, Hungary\",\n  },\n  {\n    slug: \"theo_northrup\",\n    midis: [\n      \"the-two-happy-coons---theodore-h.-northrup-1891\",\n      \"plantation-echoes---theodore-h.-northrup-1897\",\n      \"louisiana-la-pas-ma-la---theodore-h.-northrup-1897\",\n      \"the-possum-patrol---theodore-h.-northrup-1892\",\n    ],\n    composerBirthYear: 1866, // Theodore H. Northrup\n    genre: \"Jazz, Ragtime\",\n    style: \"Ragtime\",\n    country: \"USA\",\n  },\n  {\n    slug: \"early_xx_century_single_pieces\",\n    midis: [\n      \"feuillet-d-album-no.1-in-f-minor---ludovic-lamothe-feuillet-d-album-no.1-in-f-minor\",\n    ],\n  },\n  {\n    slug: \"scott_bradlee\",\n    midis: [\n      \"i-wanna-be-like-you-ragtime---scott-bradlee\",\n      \"super-mario-bros.-ragtime-piano-medley---scott-bradlee\",\n    ],\n    composerBirthYear: 1980, // Scott Bradlee\n    genre: \"Jazz, Ragtime\",\n    style: \"Jazz, Ragtime\",\n    country: \"USA\",\n  },\n  {\n    slug: \"randy_newman\",\n    midis: [\n      \"you-ve-got-a-friend-in-me---randy-newman\",\n      \"dexter-s-tune---randy-newman\",\n      \"monsters-inc.-if-i-didn-t-have-you---randy-newman\",\n      \"boo-s-going-home-by-monsters-inc.-randy-newman-ofimaticagio2-v-2.0\",\n      \"its-a-jungle-out-there---randy-newman\",\n    ],\n    composerBirthYear: 1943, // Randy Newman\n    genre: \"Film score, Pop\",\n    style: \"Film music, Singer-songwriter\",\n    country: \"USA\",\n  },\n  {\n    slug: \"oleksii_omelchuk\",\n    midis: [\n      \"metro-2033-main-menu-theme\",\n      \"metro-exodus---race-against-fate\",\n      \"metro-last-light-ending-bad-ending\",\n    ],\n    composerBirthYear: 1982, // Oleksii Omelchuk\n    genre: \"Video game music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Ukraine\",\n  },\n  {\n    slug: \"alexander_goedicke\",\n    midis: [\"alexander-goedicke---dance\"],\n    composerBirthYear: 1877, // Alexander Goedicke\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"waldemar_kazanecki\",\n    midis: [\n      \"noce-i-dnie---walc-barbary---misc-soundtrack-walc-barbary\",\n      \"czarne-chmury-black-clouds-soundtrack-theme---waldemar-kazanecki\",\n    ],\n    composerBirthYear: 1947, // Waldemar Kazanecki\n    genre: \"Film score, Classical\",\n    style: \"Film music\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"yoasobi\",\n    midis: [\"anomeng-wonazotute-ano-yume-wo-nazotte-marasiiver.\"],\n    composerBirthYear: 1998, // Yoasobi (Ayu and Ikura)\n    genre: \"J-Pop\",\n    style: \"Electropop, Synthpop\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"yakov_feldman\",\n    midis: [\"yamshchik-ne-goni-loshadey\"],\n    composerBirthYear: 1884,\n  },\n  {\n    slug: \"modern_composers_of_single_pieces\",\n    midis: [\n      \"ke-zai-wo-xin-di-de-ming-zi-your-name-engraved-herein-dian-ying-ke-zai-ni-xin-di-de-ming-zi-zhu-ti-qu-piano-cover\",\n      \"clubbed-to-death\",\n      \"mr-sandman-the-chordettes\",\n      \"after-school---weeekly\",\n      \"gray\",\n      \"changing-times---heather-hammond\",\n      \"ma-lu-mitai-baka-mitai---mitsuharu-fukuyama-piano-arrangement\",\n      \"devotion\",\n      \"tom-and-jerry-theme-piano-solo\",\n      \"pilot-for-hire--microsoft-flight-simulator-x\",\n      \"thundercats-theme\",\n      \"mighty-morphin-power-rangers-sheet-music-easy-piano\",\n      \"digimon-main-theme-organ-cover\",\n      \"vizisi\",\n      \"lost-patrol-main-theme---chris-glaister-jonathan-dunn\",\n      \"none-of-them-knew-they-were-robots---mr.-bungle-mostly\",\n      \"joker-folie-a-deux---trailer-theme---hildur-gudnadottir\",\n      \"warsaw-concerto-dangerous-moonlight-theme-1941\",\n      \"machinarium\",\n      \"vostochnye-skazki---blestyashchie\",\n      \"bomnal-beojggoc-geurigo-neo-spring-day-cherry-blossoms-you---epitone-project\",\n      \"starry-dome---no.-15-from-piano-meditation---george-nevada\",\n      \"seven-nation-army-arr.-nikodem-lorenz\",\n      \"sing-hallelujah\",\n      \"amish-paradise---weird-al-yankovic-kaleidoscope\",\n      \"na-zare---alyans-na-zare\",\n      \"aphrodites_child_rain_and_tears\",\n      \"want-you-gone-portal-2\",\n    ],\n    composerBirthYear: 1950, // Various modern composers\n    genre: \"Pop, Video game, Film\",\n    style: \"Eclectic, Contemporary\",\n    country: \"Various\",\n  },\n  {\n    slug: \"jon_leifs\",\n    midis: [\"icelandic-dance-op.-11-no.-1---jon-leifs\"],\n    composerBirthYear: 1899,\n  },\n  {\n    slug: \"stephen_foster\",\n    midis: [\n      \"stephen-foster---hard-times-come-again-no-more\",\n      \"jeanie-with-the-light-brown-hair---stephen-foster\",\n      \"old-black-joe-by-stephen-foster\",\n      \"beautiful-dreamer---stephen-foster\",\n      \"soiree-polka---stephen-c.-foster---1850\",\n      \"ah-may-the-red-rose-live-alway---stephen-foster-1850\", // Indian Guest\n      \"some-folks-like-to-sigh---s-foster-arr.-p.r.-brass-quintet\",\n      \"gentle-annie\",\n      \"beyond-the-mystic-river---stephen-c.-foster\",\n      \"445-friendship-with-jesus\",\n      \"old-dog-tray\",\n      \"weep-no-more---stephen-c.-foster\",\n      \"old-folks-at-home---theme-and-variations-by-stephen-foster\",\n      \"oh-susanna\",\n      \"gone-from-my-heart---stephen-c.-foster\",\n      \"angelina-baker-by-stephen-c.-foster-not-quite-angeline-the-baker\",\n      \"my-old-kentucky-home---stephen-collins-foster\",\n      \"slumber-my-darling-by-stephen-foster\",\n    ],\n    composerBirthYear: 1826, // Stephen Foster\n    genre: \"Folk, Popular\",\n    style: \"American, Minstrelsy\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jean_schwartz\",\n    midis: [\"chinatown-my-chinatown\", \"the-popcorn-man-1910\"],\n    genre: \"Ragtime\",\n    country: \"USA\",\n    composerBirthYear: 1878,\n  },\n  {\n    slug: \"chet_baker\",\n    midis: [\n      \"autumn-leaves---joseph-kosma-autumn-leaves-chet-baker-paul-desmond\",\n    ],\n    genre: \"Jazz Solo\",\n    composerBirthYear: 1929,\n  },\n  {\n    slug: \"possibly_tango\",\n    midis: [\"veinte-anos\", \"rio---g.-gladkov\"],\n    composerBirthYear: null, // Various Tango composers\n    genre: \"Tango\",\n    style: \"Argentinian, Latin\",\n    country: \"Argentina\",\n  },\n  {\n    slug: \"dj_okawari\",\n    midis: [\n      \"represent\",\n      \"peacock---dj-okawari\",\n      \"over-the-rain---dj-okawari-x-emily-styler\",\n      \"lightning-moment---yuan-zuo\", // some chromaticism inside\n      \"luv-letter-by-dj-okawari\", // picardy, otherwise easy\n      \"perfect-blue---dj-okawari-piano-solo-hard\",\n      \"engage-ring---dj-okawari-x-emily-styler\", // V\n      \"flower-dance-dj-okawari\", // V, melodic minor, period\n      \"ming-ri-fang-zhou-arknights---speed-of-light-piano-transcription\", // pentatonic\n      \"bluebird-story---dj-okawari-bluebird-story-for-2-pianos\", // picardy\n      \"the-bonds---dj-okawari\", // seventh chords\n    ],\n    composerBirthYear: 1986, // DJ Okawari\n    genre: \"Jazz, Hip Hop, Electronic\",\n    style: \"Lofi, Chillhop\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"nujabes\",\n    midis: [\n      \"aruarian-dance---nujabes\",\n      \"feather---nujabes\",\n      \"shiki-no-uta---nujabes\",\n      \"horizon---nujabes\",\n      \"nujabes---counting-stars---loop-piano-cover\",\n      \"another-reflection---nujabes\",\n      \"mystline\",\n      \"eclipse---nujabes\",\n      \"think-different---nujabes\",\n      \"letter-from-yokosuka---nujabes-uyama-hiroto-piano-soprano-saxophone-vibraphone\",\n      \"flowers---nujabes\",\n      \"reflection_eternal\",\n      \"kumomi---nujabes\",\n      \"nujabes--blessing-it-remix\",\n    ],\n    composerBirthYear: 1974, // Nujabes\n    genre: \"Hip Hop, Jazz\",\n    style: \"Lofi, Chillhop\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"eri_sasaki\",\n    midis: [\n      \"ring-of-fortune---eri-sasaki-plastic-memories-op-reiva-piano-cover\",\n    ],\n    composerBirthYear: 1989,\n    country: \"Japan\",\n  },\n  {\n    slug: \"joao_mateus_junior_8_fados\",\n    midis: [\"beijos-de-mae---joao-mateus-junior\"],\n    composerBirthYear: null, // Joo Mateus Junior (Fado composer)\n    genre: \"Fado, Folk\",\n    style: \"Traditional, Portuguese\",\n    country: \"Portugal\",\n  },\n  {\n    slug: \"angelo_frondoni\",\n    midis: [\n      \"marcha-as-tres-rocas-de-crystal---angelo-frondoni\",\n      \"diz-tudo-amor---romance---angelo-frondoni\",\n    ],\n    composerBirthYear: 1874, // Angelo Frondoni\n    genre: \"Classical\",\n    style: \"Romantic, Opera\",\n    country: \"Italy\",\n  },\n  {\n    slug: \"derek_fiechter\",\n    midis: [\n      \"cats-of-whisker-hollow-spooky-autumn---derek-fiechter\",\n      \"osiris---derek-fiechter\",\n      \"spooky-autumn-ii---halloween-carnival---derek-fiechter-brandon-fiechter\",\n      \"the-tale-of-the-firebird---derek-brandon-fiechter\",\n    ],\n    composerBirthYear: 1990, // Derek Fiechter & Brandon Fiechter (Ambient composers)\n    genre: \"Ambient, Cinematic\",\n    style: \"Fantasy, Spooky\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ryuichi_sakamoto\",\n    midis: [\n      \"merry-christmas-mr.-lawrence-forbidden-colours---ryuichi-sakamoto\",\n      \"aqua---ryuichi-sakamoto-ryuichi-sakamoto\", // ideal for beginners\n      \"energy-flow---ryuichi-sakamoto\",\n    ],\n    composerBirthYear: 1952, // Ryuichi Sakamoto\n    genre: \"Classical, Electronic\",\n    style: \"Ambient, Experimental\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"gesualdo\",\n    midis: [\n      \"moro-lasso-al-mio-duolo---gesualdo\",\n      \"belta-poi-che-t-assenti---carlo-gesualdo\",\n    ],\n    composerBirthYear: 1566, // Carlo Gesualdo\n    genre: \"Renaissance\",\n    style: \"Choral, Madrigal\",\n    country: \"Italy\",\n  },\n  {\n    slug: \"rimsky-korsakoff\",\n    midis: [\"song-of-the-indian-guest\", \"flight-of-the-bumblebee\"],\n    composerBirthYear: 1844, // Nikolai Rimsky-Korsakov\n    genre: \"Classical\",\n    style: \"Orchestral, Symphonic\",\n    country: \"Russia\",\n  },\n  {\n    // https://musescore.com/user/68853055\n    // also see https://musescore.com/sheetmusic?text=%CE%BC%CE%BF%CF%85%CF%83%CE%B9%CE%BA%CE%AE&type=non-official\n    // https://musescore.com/sheetmusic?text=%CE%97&type=non-official\n    slug: \"greek_music\",\n    midis: [\n      \"m.-theodorakis---ena-to-helidoni---greek-music-001\",\n      \"g.-katsaros---kathe-limani-kai-kaimos---greek-music-002\",\n      \"m.-loizos---o-dromos---greek-music-003\",\n\n      \"m.-theodorakis---omorfi-poli---greek-music-036\",\n      \"a.-kaldaras---nyhtose-horis-feggari---greek-music-037\",\n      \"m.-hatzidakis---efta-tragoydia-tha-soy-po---greek-music-038\",\n      \"g.-katsaros---pame-gia-upno-katerina---greek-music-039\",\n      \"g.-spanos---aspra-karavia---greek-music-040\",\n      \"g.-mitsakis---palamakia---greek-music-041\",\n      \"v.-tsitsanis---eimaste-alania---greek-music-042\",\n      \"pyx-lax---de-tha-dakryso-pia-gia-sena---greek-music-043\",\n      \"n.-portokalogloy---to-kalokairaki---greek-music-044\",\n      \"p.-sidiropoylos---o-mpampis-o-floy---greek-music-045\",\n      \"orf.-peridis---fotovolida---greek-music-046\",\n      \"th.-mikroytsikos---enas-negros-thermastis-apo-to-tzimpoyti---greek-music-047\",\n      \"m.-loizos---koytsi-kithara---greek-music-048\", // a capella thirds\n      \"g.-spanos---mia-agapi-gia-to-kalokairi---greek-music-049\",\n      \"h.-nikolopoylos---hronia-helidonia---greek-music-050\",\n      \"m.-hiotis---thessaloniki-moy---greek-music-051\",\n      \"m.-theodorakis---vrehei-sti-ftohogeitonia---greek-music-052\",\n      \"v.-tsitsanis---horisame-ena-deilino---greek-music-053\",\n      \"g.-zampetas---agonia---greek-music-054\",\n      \"s.-xarhakos---stoy-thoma---greek-music-055\",\n      \"g.-papaioannoy---vadizo-kai-paramilo---greek-music-056\",\n      \"g.-mpithikotsis---toy-votanikoy-o-magkas---greek-music-057\",\n      \"v.-tsitsanis---to-vapori-ap-tin-persia---greek-music-058\",\n      \"a.-kaldaras---min-perimeneis-pia---greek-music-059\",\n      \"m.-hiotis---perasmenes-moy-agapes---greek-music-060\",\n      \"g.-zampetas---stalia-stalia---greek-music-061\",\n      \"h.-nikolopoylos---ston-aggelon-ta-mpoyzoykia---greek-music-062\",\n      \"m.-plessas---ti-soy-kana-kai-pineis---greek-music-063\",\n      \"s.-koygioymtzis---to-kokkino-foystani---greek-music-064\",\n      \"t.-moysafiris---o-taxitzis---greek-music-065\",\n      \"g.-hatzinasios---me-lene-giorgo---greek-music-066\",\n      \"g.-spanos---tha-me-thymitheis---greek-music-067\",\n      \"m.-tokas---exartatai---greek-music-068\", // demo minor chord\n      \"h.-nikolopoylos---yparho---greek-music-069\", // phrygian\n      \"m.-loizos---ah-helidoni-moy---greek-music-070\",\n      \"g.-katsaros---ta-kythira-pote-de-tha-ta-vroyme---greek-music-071\", // typo in m.8\n      \"p.-katsimihas---an-yparhei-logos---greek-music-072\", // hijaz bvi-I7 feel of iv-V7-i\n      \"t.-morakis---se-magika-nisia---greek-music-073\",\n      \"s.-xarhakos---to-dihty---greek-music-074\",\n      \"g.-zampetas---ti-na-ftaiei---greek-music-075\",\n      \"h.-nikolopoylos---to-agrioloyloydo---greek-music-076\",\n      \"m.-hatzidakis---to-vals-ton-hamenon-oneiron---greek-music-077\",\n      \"d.-savvopoylos---dimosthenoys-lexis---greek-music-078\",\n      \"s.-xarhakos---mpoyrnovalia---greek-music-079\",\n      \"t.-moysafiris---kane-kati-na-haso-to-treno---greek-music-080\",\n\n      \"hr.-nikolopoylos---kai-geia-soy-ellada---greek-music-190\",\n\n      \"th.-mikroytsikos---armida---greek-music-199\",\n    ],\n    composerBirthYear: 1925,\n    genre: \"Pop\",\n    style: \"Folk, Traditional, Pop, Traditional Fusion\",\n    country: \"Greece\",\n  },\n  {\n    slug: \"louis_couperin\",\n    midis: [\n      \"1626---1661-louis-couperin---fugue-ol-11\",\n      \"l.-couperin-la-piemontoise\",\n    ],\n    composerBirthYear: 1626,\n  },\n  {\n    slug: \"jesse_novak\",\n    midis: [\n      \"bojack-horseman-don-t-stop-dancing-piano-solo\",\n      \"concerto-in-f-major\",\n      \"i-will-always-think-of-you-bojack-horseman---piano-arrangement\",\n    ],\n    composerBirthYear: 1979,\n    country: \"USA\",\n    genre: \"Film Score\",\n  },\n  {\n    slug: \"j_p_ahmad\",\n    midis: [\"castlemania\", \"ninja-runner\", \"super-bounce\"],\n  },\n  {\n    slug: \"akira_yamaoka\",\n    midis: [\n      \"akira-yamaoka---silent-hill-2---promise-reprise\",\n      \"magdalene---akira-yamaoka\",\n      \"never-forgive-me-never-forget-me---akira-yamaoka\",\n      \"silent-hill-not-tomorrow-lisa-s-death\",\n      \"akira-yamaoka---true\",\n    ],\n    composerBirthYear: 1968,\n    genre: \"Video game music\",\n    style: \"Ambient, Industrial\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"shostakovich\",\n    midis: [\n      \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\",\n      \"shostakovich_symphony_no5_2nd_movement_for_piano_solo\",\n      \"symphony-no.-10-by-dmitri-shostakovich---piano-reduction\",\n    ],\n    composerBirthYear: 1906,\n    genre: \"Classical\",\n    style: \"Symphonic, Modernist\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"amedeo_tommasi\",\n    midis: [\n      \"magic-waltz\",\n      \"madame-lulu---amedeo-tommasi-sampled-in-amend-by-j-p-n\",\n      \"1900-s-madness-2\",\n    ],\n    composerBirthYear: 1935,\n    country: \"Italy\",\n  },\n  { slug: \"jeremy_zuckerman\", midis: [\"avatar-the-last-airbender-medley\"] },\n  {\n    slug: \"shinkonet\",\n    midis: [\n      \"dungeon-drama-hypixel-skyblock-dungeons---solo-piano-arrangement\",\n      \"hypixel-skyblock-ost-the-wither-king-boss-theme-4---shinkonet\",\n      \"blastin-banter-battle-battle-of-jerry-mountain---shinkonet-blastin-banter-battle\",\n    ],\n  },\n  {\n    slug: \"vince_guaraldi\",\n    midis: [\n      \"linus-and-lucy-peanuts---vince-guaraldi\",\n      \"christmas-time-is-here-for-jazz-piano---vince-guaraldi---arr.-elijah-hemingway\",\n      \"what-child-is-this---vince-guaraldi-trio\",\n      \"the-great-pumpkin-waltz-peanuts---vince-guaraldi\",\n      \"skating\",\n      \"o-christmas-tree-vince-guaraldi\",\n    ],\n    composerBirthYear: 1928,\n    genre: \"Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jazz_standards\",\n    midis: [\n      \"recorda-me-no-me-esqueca\",\n      \"all-the-things-you-are\",\n      \"all-the-things-you-are-2\",\n      \"all-the-things-you-are-lead-sheet---jerome-kern-oscar-hammerstein-ii\",\n      \"all-the-things-you-are---reharmonized---jerome-kern\",\n      \"solo-transcription-all-the-things-you-are---paul-desmond\",\n      \"all-the-things-you-are-guitar-chord-melody\",\n      \"my-funny-valentine-lead-sheet-with-lyrics\",\n      \"tea-for-two---vincent-youmans-and-irving-caesar-1924-piano-voice-sheet-music-arrangement\",\n      \"tea-for-two-er-ren-deocha-wo---vincent-youmans\",\n      \"straight-no-chaser-thelonious-monk\",\n      \"blue-monk-piano\",\n      \"round-midnight---thelonious-monk\",\n      \"well-you-needn-t\",\n      \"footprints.mscz\",\n      \"satin-doll\",\n      \"lady_bird_piano_solo\",\n      \"a-night-in-tunisia---dizzy-gillespie-sarah-vaughan-a-night-in-tunisia\",\n      \"Bags_Groove__Lead_sheet_\",\n      \"footprints_r\",\n      \"armstrong-go-down-moses\",\n      \"all-of-me---new-york-jazz-lounge\",\n      \"Misty_piano_solo\",\n      \"bheki_mseleku_angola\",\n      \"donna-lee---charlie-parker---lead-sheet-bass-clef-up-8va-from-real-book-ver.\",\n      \"indiana-back-home-again-in-indiana-lead-sheet-with-lyrics-alternate\",\n      \"o-barquinho-little-boat---roberto-menescal\",\n      \"o-barquinho-little-boat---roberto-menescal-20ac8f\",\n      \"strangers-in-the-night-bert-kaempfert\",\n    ],\n    genre: \"Jazz\",\n    // This is a collection of jazz standards, no specific composer can be assigned.\n    style: \"Jazz Standards\",\n    country: \"USA\",\n  },\n  {\n    // https://musescore.com/user/24069/sets/4869434\n    slug: \"rachmaninoff\",\n    midis: [\n      \"rachmaninoff-piano-concerto-no.-2-1st-mvmt.-arr.-for-2-pianos\",\n      \"piano_concerto_no_4_op_40_sergei_rachmaninoff_i_allegro_vivace_alla_breve\",\n      \"prelude_in_c_sharp_minor_opus_3_no_2_sergei_rachmaninoff\",\n      \"rachmaninoff_piano_concerto_4_1\",\n      \"serguei-rachmaninov---piano-concerto-ndeg4-in-g-minor---1st-mouvement-intro\",\n      \"Prelude_in_G_Minor_Opus_23_No._5\",\n      \"prelude-in-c-sharp-minor-opus-3-no.-2---sergei-rachmaninoff\",\n      \"rachmaninoff-10-preludes-op.-23---no.-5-in-g-minor-m.-a.-deocariza\",\n\n      \"symphony-no.-2-in-e-minor-op.-27-for-piano-duet---i.-largo-allegro-moderato\",\n      \"symphony-no.-2-in-e-minor-op.-27-for-piano-duet---ii.-allegro-molto\",\n    ],\n    composerBirthYear: 1873,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"valentin_silvestrov\",\n    midis: [\n      \"five-pieces-op.-306-no.-4-waltz\",\n      \"abschiedsserenade-ii-farewell-serenade---valentin-silvestrov\",\n      \"english-serenades-op.-46-no.-1---valentin-silvestrov\",\n      \"english-serenades-op.-46-no.-4---valentin-silvestrov\",\n    ],\n    composerBirthYear: 1937,\n    genre: \"Classical\",\n    style: \"Postmodern, Minimalism\",\n    country: \"Ukraine\",\n  },\n  {\n    slug: \"george_pelecis\",\n    midis: [\n      \"all-in-the-past---georgs-pelecis\",\n      \"plaukstosais-jasmins---georgs-pelecis\",\n    ],\n    composerBirthYear: 1947,\n    genre: \"Classical\",\n    style: \"Contemporary\",\n    country: \"Latvia\",\n  },\n  {\n    slug: \"jaco_pastorius\",\n    midis: [\"donna-lee---jaco-pastorius\", \"the-chicken\"],\n  },\n  {\n    slug: \"frank_wildhorn\",\n    midis: [\n      \"master-of-the-strings-die-faden-in-der-hand-rudolf---affaire-mayerling-for-violin-and-piano\",\n      \"the-confrontation---frank-wildhorn\",\n    ],\n  },\n  {\n    slug: \"klaus_doldinger\",\n    midis: [\"erinnerung-from-das-boot---klaus-doldinger\"],\n  },\n  { slug: \"falco\", midis: [\"jeanny-falco\"] },\n  {\n    slug: \"marco_beltrami\",\n    midis: [\n      \"rosemary-s-theme-the-giver\",\n      \"rosemary-s-waltz\",\n      \"st.-estes-reform-school-extended---marco-beltrami-venom-let-there-be-carnage\",\n      \"le-mans-66\",\n      \"theme-from-world-war-z---marco-beltrami-theme-from-world-war-z--isolated-system\",\n    ],\n    composerBirthYear: 1966,\n    genre: \"Film Score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"catherine_rollin\",\n    midis: [\n      // major desc bass\n      \"sunlight-waltz---catherine-rollin\",\n      \"sweet-elegy---catherine-rollin\",\n      \"tenderly---catherine-rollin\",\n      // minor desc bass\n      \"french-movie-waltz---catherine-rollin\",\n      \"moonlight-nocturne---catherine-rollin\",\n\n      // minor circle of fifths\n      \"russian-waltz\",\n      \"lyric-nocturne---catherine-rollin\", // bII, rel major\n\n      \"winter-waltz---catherine-rollin\", // autumn leaves exit\n\n      \"summer-s-dream---catherine-rollin\", // minor pachelbel, 50s\n\n      \"remembrance---catherine-rollin\", // reverse V/ii, bVII\n      \"pure-heart---catherine-rollin\",\n      \"summer-splendor---catherine-rollin\",\n\n      \"the-swan---catherine-rollin\", // line cliche\n      \"mah_g4.05\",\n      \"ballad-for-our-time\",\n\n      \"blues-boulevard---catherine-rollin\",\n      \"back-beat-blues---catherine-rollin\",\n      \"miami-blues---catherine-rollin\",\n      \"waltzing-the-blues---catherine-rollin\",\n      \"baroque-bop---catherine-rollin\",\n      \"jazzy-moves---catherine-rollin\",\n\n      \"sneaky-skeleton---catherine-rollin\",\n      \"witches-brew---catherine-rollin\",\n      \"cool-ghoul---catherine-rollin-cool-ghoul\",\n      \"solar-wind\",\n\n      \"tap-time---catherine-rollin\",\n\n      \"blues-train---catherine-rollin-catherine-rollin---blues-train-jazz\",\n      \"motown-rag---catherine-rollin\",\n      \"circus-rag---catherine-rollin\",\n      \"nashville-rag---catherine-rollin-nashville-rag\",\n\n      \"hoe-down---catherine-rollin\",\n      \"rock-it---catherine-rollin\",\n      \"la-senorita---catherine-rollin\",\n    ],\n    composerBirthYear: 1954,\n    style: \"Jazz, Blues, Teacher Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jelly_roll_morton\",\n    midis: [\"king-porter-stomp---jelly-roll-morton---melrose-edition\"],\n    composerBirthYear: 1890,\n    genre: \"Jazz\",\n    style: \"Jazz, Blues\",\n    country: \"USA\",\n  },\n  {\n    slug: \"chen_gang\",\n    midis: [\n      \"liang-zhu---he-zhan-hao-chen-gang-liang-zhu---chen-gang-he-zhan-hao---butterfly-lovers-violin-concerto\",\n    ],\n    composerBirthYear: 1935,\n    genre: \"Classical\",\n    country: \"China\",\n  },\n  {\n    slug: \"kensuke_ushio\",\n    midis: [\n      \"to-a-kinder-world---kensuke-ushio\",\n      \"chainsaw-man-ost---sweet-dreams-by-kensuke-ushio-arranged-by-thezewmusic\",\n      \"lit-a-silent-voice\",\n    ],\n    country: \"Japan\",\n    composerBirthYear: 1983,\n    genre: \"Anime, EBM\",\n  },\n  {\n    slug: \"oscar_peterson\",\n    midis: [\n      \"oscar-peterson---jazz-exercises-for-piano---exercise-1\",\n      \"boogie-blues-etude-1974---oscar-peterson-piano-solo-transcription\",\n      \"oscar-peterson---jazz-exercises-for-piano---exercise-4\",\n      \"oscar-peterson---jazz-exercises-for-piano---exercise-6\",\n    ],\n    composerBirthYear: 1925,\n  },\n  {\n    slug: \"fitzwilliam_virginal_book\",\n    midis: [\n      \"pmlp12479-xlix_praeludium-_oldfield\",\n      \"pmlp12479-xcix_praeludium-_galeazzo\",\n      \"pmlp12479-clxi_why_aske_you_anonymous_1597\",\n    ],\n  },\n  {\n    slug: \"boogie_woogie\",\n    midis: [\n      \"easy-boogie-woogie\",\n      \"surfboard-boogie\",\n      \"boogie-woogie\",\n      \"original-boogie-woogie\",\n      \"boogie-woogie---misc-traditional-boogie-woogie-_-basic-piano-solo-for-beginners\",\n      \"pine-top-s-boogie-woogie---transcription-of-take-b\",\n      \"suzan-boogie-woogie-in-c---easy-piano-riff---basic-boogie\",\n      \"boogie-blues-etude-1974---oscar-peterson-piano-solo-transcription\",\n      \"boogie-woogie---monday-struggle---by-albert-ammons\",\n      \"boogie-woogie-stomp\",\n      \"dragon-quest-viii-bar-theme\",\n\n      \"lewis-boogie-rock-n-roll-piano-arrangement\",\n\n      \"boogie-woogie-7a11a3\",\n      \"boogie-woogie-piano\",\n      \"some-boogie-woogie-by-albert-ammons-friends\",\n      \"bumble-boogie---adapted-from-the-flight-of-the-bumble-bee\",\n      \"jingle-bells-boogie-woogie-cover\",\n      \"jingle-bells-boogie\",\n    ],\n    genre: \"Boogie Woogie\",\n    style: \"Boogie Woogie\",\n  },\n  {\n    slug: \"fur_elise_covers\",\n    midis: [\n      \"fur-elise-super-easy\",\n      \"Fr_Elise\",\n      \"fur-elise-reharmonization-cover\",\n      \"fur-elise-but-elise-is-scary\",\n      \"fur-elise-but-elise-said-no\",\n    ],\n  },\n  {\n    slug: \"rhcp_red_hot_chili_peppers\",\n    midis: [\"road-trippin---red-hot-chili-peppers\"],\n    composerBirthYear: 1970,\n    genre: \"Funk Rock, Alternative Rock\",\n    country: \"USA\",\n  },\n  {\n    slug: \"george_antheil\",\n    midis: [\n      \"sonatina-death-of-the-machines-1922-i-movement-by-george-antheil\",\n      \"sonatina-death-of-the-machines-1922-ii-movement-by-george-antheil\",\n      \"sonatina-death-of-the-machines-1922-iii-movement-by-george-antheil\",\n      \"sonatina-death-of-the-machines-1922-iv-movement-by-george-antheil\",\n      \"jazz-sonata-no.-4---george-antheil-score\",\n    ],\n    genre: \"Post-Tonal\",\n    composerBirthYear: 1900,\n  },\n  {\n    slug: \"martha_mier\",\n    midis: [\n      \"to-catch-a-dream---martha-mier\",\n      \"peppermint-rag---martha-mier\",\n      \"downright-happy-rag\",\n      \"just-struttin-along\",\n      \"surfboard-boogie\",\n      \"enchanted-waterfall---martha-mier\",\n      \"baroque-expression---martha-mier\",\n    ],\n    composerBirthYear: 1955,\n    genre: \"Classical, Ragtime\",\n    style: \"Ragtime, Light Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"scary\",\n    midis: [\n      \"fur-elise-but-elise-is-scary\",\n      \"funeral-march---f.-chopin-halloween-scary-version---easy-to-intermediate\",\n    ],\n    genre: \"Classical\",\n    style: \"Spooky Variations\",\n    // No specific country, these are just spooky versions of classical pieces.\n  },\n  {\n    slug: \"carlos_chavez\",\n    midis: [\"diez-preludios-para-piano---carlos-chavez\", \"ponchito-al-hombro\"],\n    composerBirthYear: 1899,\n    genre: \"Classical\",\n    style: \"Nationalist\",\n    country: \"Mexico\",\n  },\n  {\n    slug: \"anoushiravan_rohani\", // pure harmonic minor\n    midis: [\n      \"il-coure-mio---anoushiravan-rohani\",\n      \"maadar\",\n      \"gol-e-sang---anoushiravan-rohani\",\n      \"aziz-joon---anoushiravan-rohani\",\n      \"soltaan-e-ghalbhaa---anoushiravan-rohani\",\n      \"potpurri---anoshirvan-rohani\",\n      \"saraab---anoushiravan-rohani\",\n      \"bahaneh\",\n      \"queen-of-hearts\",\n    ],\n    composerBirthYear: 1959,\n    genre: \"World, Traditional\",\n    style: \"Persian, Classical\",\n    country: \"Iran\",\n  },\n  {\n    slug: \"alexei_stanchinsky\",\n    midis: [\n      \"song-without-words-no.-1-in-c-minor---stanchinsky\",\n      \"song-without-words-no.-2-in-d-minor---stanchinsky\",\n      \"song-without-words-no.-3-in-c-minor---stanchinsky\",\n    ],\n    composerBirthYear: 1888,\n  },\n  {\n    slug: \"evgeny_doga\",\n    midis: [\n      \"vals---ie.-doga\",\n      \"sonet---ie.-doga\",\n      \"meditation---ie.-doga\",\n      \"i-love-you---ie.-doga\",\n      \"portret---e.-doga\",\n      \"pollyanna---ie.-doga\",\n    ],\n    composerBirthYear: 1937,\n    genre: \"Classical, Film Score\",\n    style: \"Romantic, Cinematic\",\n    country: \"Moldova\",\n  },\n  {\n    slug: \"marc_sabatella\",\n    midis: [\n      \"reunion\",\n      \"different-worlds\",\n      \"for-dad\",\n      \"coming-back-home\",\n      \"birthday-rag\",\n      \"fugue\",\n      \"autumn-fires\",\n    ],\n    composerBirthYear: 1966,\n    genre: \"Jazz, Classical\",\n    style: \"Jazz, Ragtime\",\n    country: \"USA\",\n  },\n  {\n    slug: \"raimonds_pauls\",\n    midis: [\n      \"million-alyh-roz---raimonds-pauls\",\n      \"ischezli-solnechnye-dni\",\n      \"raymond-pauls-ptichka-na-vetke\",\n      \"zelyonyy-svet---valeriy-leontev-raymond-pauls\",\n    ],\n    composerBirthYear: 1936,\n    genre: \"Pop, Jazz, Classical\",\n    style: \"Popular, Light Classical\",\n    country: \"Latvia\",\n  },\n  {\n    slug: \"alkan\",\n    midis: [\"nocturne-opus-22-in-b-major---alkan\"],\n    composerBirthYear: 1813,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"robert_d_vandall\",\n    midis: [\n      \"prelude-no.-4-in-f-major---robert-d.-vandall\",\n      \"rockin-at-the-hall\",\n      \"witches-waltz---robert-d.-vandall\",\n      \"slide-easy---robert-d.-vandall\", // test 12-bar blues search\n      \"in-the-groove---robert-d.-vandall-piano-trio\",\n      \"prelude-no.-7-in-b-minor\", // minor circle of fifths\n    ],\n    composerBirthYear: 1945,\n    genre: \"Classical, Educational\",\n    style: \"Jazz, Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"malcolm_arnold\",\n    midis: [\n      \"fanfara-for-horn---malcolm-arnold-fantasy-for-horn\",\n      \"fantasy-for-trumpet-op.-100---malcolm-arnold-excerpt-from-fantasy-for-trumpet-op.-100\",\n      \"fantasy-for-trombone\",\n      \"siciliano-from-prelude-siciliano-and-rondo\",\n      \"eight-children-s-pieces-op.36---malcolm-arnold\",\n      \"piano-reduction-mvt-i-from-four-cornish-dances---malcolm-arnold\",\n      \"whistle-down-the-wind---malcolm-arnold\",\n    ],\n    composerBirthYear: 1921,\n    genre: \"Classical\",\n    style: \"British, Orchestral\",\n    country: \"UK\",\n  },\n  {\n    slug: \"mark_fradkin\",\n    midis: [\n      \"techyot-reka-volga---muzyka-m-fradkin\",\n      \"doroga-na-berlin---mark-grigorevich-fradkin\",\n      \"sluchaynyy-vals---m.-fradkin\",\n    ],\n    composerBirthYear: 1926,\n    genre: \"Film Score, Classical\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"aleksey_rybnikov\",\n    midis: [\n      \"ya-tebya-nikogda-ne-zabudu---o.-ribnikov\",\n      \"pesnjakrasnoishapochki\",\n      \"pesnya-krasnoy-shapochki---a.-rybnikov\",\n      \"pesnya-krasnoy-shapochki---aleksey-rybnikov\",\n      \"poslednyaya-poema-the-last-poem---aleksey-rybnikov\", // many strategies\n      \"pisnya-kota-bazilio-ta-lisici-alisi---o.-ribnikov\",\n      \"meeting-a.-rybnikov---zustrich-o.-ribnikov\",\n      \"misyachna-pisnya---o.-ribnikov\",\n      \"main---alexey-rybnikov-golovna-tema---oleksiy-ribnikov\",\n      \"belyy-shipovnik---o.-ribnikov\",\n      \"tema-mriy---oleksiy-ribnikov-dream-theme-alexey-rybnikov\",\n      \"v-parke---aleksey-rybnikov-v-parke---aleksey-rybnikov-iz-kinofilma-vam-i-ne-snilos\",\n      \"recognition-alexey-rybnikov-a.-rybnikov-priznanie\",\n      \"groza---aleksey-rybnikov-iz-k-f-cherez-ternii-k-zvezdam\",\n      \"a.-rybnikov----the-lamplighter-s-song-ost-the-adventures-of-buratino-1976\",\n      \"ostrov-sokrovishch-aleksey-lvovich-rybnikov\",\n      \"mlechnyy-put-milky-way\",\n    ],\n    composerBirthYear: 1945,\n    genre: \"Film Score, Classical\",\n    style: \"Film, Popular Music\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"aleksandr_zatsepin\",\n    midis: [\n      \"pesenka-o-medvedyah---a.-zacepin\",\n      \"s-lyubovyu-vstretitsya---a.-zacepin\",\n      \"volki-gonyat-olenya---a.-zacepin\",\n      \"hudozhniki---a.-zacepin\",\n      \"island-of-misfortune-ostrov-nevezeniya---o.-zacepin\",\n      \"proshchay---a.-zacepin\",\n      \"tango-do-k-f-12-stulev---o.-zacepin\",\n      \"kak-zhe-mne-teper-tebya-lyubit---a.-zacepin\", // triton sub\n      \"lunnaya-serenada---a.-zacepin\",\n      \"volshebnik-nedouchka---aleksandr-zacepin\",\n    ],\n    composerBirthYear: 1926,\n    genre: \"Film Score, Popular\",\n    style: \"Film, Popular Music\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"tihon_hrennikov\",\n    midis: [\n      \"vals---t.-hrennikov\",\n      \"vals-davnim-davno---t.-hrennikov\",\n      \"prelyudiya---t.-hrennikov\",\n      \"moskovskie-okna-bossa-nova\",\n      \"chto-tak-serdce-rastrevozheno\",\n      \"marsh-artilleristov---t.-n.-hrennikov\",\n      \"proshchanie---tihon-hrennikov-proshchanie\",\n      \"koliskova-svitlani---t.-hrennikov\",\n      \"chastushki---t.-hrennikov\",\n    ],\n    composerBirthYear: 1913,\n    genre: \"Classical\",\n    style: \"Russian, Nationalist\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"sergey_banevich\",\n    midis: [\n      \"fantaziya---s.-banevich\",\n      \"soldatik-i-balerina\",\n      \"at-the-station-na-vokzale\",\n      \"road\", // seventh chords in minor, change of meter\n      \"pesenka-pro-vovu-rasteryashku\", // Iadd6 = ii65, V+/IV\n    ],\n    composerBirthYear: 1952,\n    genre: \"Classical\",\n    style: \"Contemporary\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"bslick\",\n    midis: [\n      \"let-go-piggy-book-2-soundtrack---bslick\",\n      \"the-untold-story-ft.-melissa-medina---bslick\",\n      \"archie-theme-scary-shanty---bslick\",\n    ],\n    // Unknown composer and country, genre/style unclear.\n  },\n  {\n    slug: \"alan_hovhaness\",\n    midis: [\n      \"mountain-lullaby---jealous-of-the-birds-piano-solo\",\n      \"prayer-of-st-gregory---alan-hovhaness\",\n      \"symphony-no.-2-mysterious-mountain---alan-hovhaness-mysterious_mountain_iii\",\n    ],\n    composerBirthYear: 1911,\n    genre: \"Classical\",\n    style: \"Symphonic, Mystical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"duke_ellington\",\n    midis: [\n      \"solitude---duke-ellington\",\n      \"solitude---duke-ellington-eddie-de-lange-and-irving-mills-piano-version\",\n      \"solitude---duke-ellington-as-played-by-roland-hanna\",\n    ],\n    composerBirthYear: 1899,\n    genre: \"Jazz, Swing\",\n    style: \"Big Band, Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"rhythm_changes\",\n    midis: [\n      \"oleo---sonny-rollins\",\n      \"cottontail_sax_soli\",\n      \"cotton-tail---duke-ellington\",\n      \"cotton-tail---duke-ellington-musescore3\",\n      \"cotton-tail\",\n      \"dexterity\",\n      \"dexterity---charlie-parker\",\n      \"fungii-mama---richard-blue-mitchell\",\n    ],\n    genre: \"Jazz\",\n    style: \"Bebop, Swing\",\n    country: \"USA\",\n  },\n  { slug: \"cherokee_changes\", midis: [] },\n  {\n    slug: \"overcooked\",\n    midis: [\n      \"overcooked---menu-theme\",\n      \"overcooked-2-medley\",\n      \"overcooked-medley\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Video Game Music\",\n    style: \"Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"l_m_gottschalk\",\n    midis: [\n      \"grande-tarantelle---gottschalk-1872\",\n      \"the-dying-swan-1870\",\n      \"souvenirs-d-andalousie-1855\",\n      \"morte-l.-m.-gottschalk-in-memoriam\", // corrupted grid somehow\n      \"bamboula-1849\",\n      \"the-banjo-1855\",\n      \"tremolo---gottschalk-1868\",\n      \"le-bananier-chanson-negre-de-l.m-gottschalk-1846\",\n      \"souvenir-de-porto-rico-200-i.e.-206-follower-special\",\n      \"god-save-the-queen---gottschalk-c.1860\",\n    ],\n    composerBirthYear: 1829,\n    genre: \"Romantic\",\n    style: \"Virtuoso Piano, Early American\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jean_henri_ravina\",\n    midis: [\n      \"etude---ravina-no.-22-op.-50---h-moll\",\n      \"petit-bolero-op.-62---jean-henri-ravina\",\n      \"nocturne-op.112---jean-henri-ravina\",\n    ],\n    composerBirthYear: 1813,\n    genre: \"Romantic\",\n    style: \"French Romanticism\",\n    country: \"France\",\n  },\n  {\n    slug: \"jean-luc_ponty\",\n    midis: [\"faith-in-you\"],\n    composerBirthYear: 1942,\n    genre: \"Jazz Fusion\",\n    style: \"Jazz, Fusion\",\n    country: \"France\",\n  },\n  {\n    slug: \"placebo\",\n    midis: [\"every-you-every-me---placebo\", \"the-bitter-end---placebo\"],\n    composerBirthYear: 1974,\n    genre: \"Alternative Rock\",\n    style: \"Alternative Rock, Britpop\",\n    country: \"UK\",\n  },\n  {\n    slug: \"john_cacavas\",\n    midis: [\n      \"jazzy-sax---john-cacavas\",\n      \"corsage-for-winds---john-cacavas-string-quartet\",\n    ],\n    composerBirthYear: 1930,\n    genre: \"Jazz\",\n    style: \"Jazz, Classical Crossover\",\n    country: \"USA\",\n  },\n  {\n    slug: \"joe_zawinul\",\n    midis: [\n      \"birdland-piano\",\n      \"mercy-mercy-mercy---joe-zawinul\",\n      \"mercy-mercy-mercy---joe-zawinul-2\",\n      \"boogie-woogie-waltz-zawinul-leadsheet\",\n      \"walk-tall---joe-zawinul\",\n      \"125th-street-congress-zawinul-leadsheet\",\n      \"cucumber-slumber-leadsheet-johnson-zawlinul\",\n    ],\n    composerBirthYear: 1932,\n    genre: \"Jazz Fusion\",\n    style: \"Fusion, Funk, Jazz\",\n    country: \"Austria\",\n  },\n  {\n    slug: \"lucas_pope\",\n    midis: [\"papers-please\", \"papers-please---death-theme\"],\n    composerBirthYear: 1977,\n    genre: \"Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"asuka_ota_and_ryo_nagamatsu\",\n    midis: [\"coconut-mall---mario-kart-wii\"],\n    composerBirthYear: 1980,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"asuka_hayazaki\",\n    midis: [\n      \"daisy-circuit---mario-kart-wii\",\n      \"winning-results-race---mario-kart-wii\",\n    ],\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n    composerBirthYear: 1981,\n  },\n  {\n    slug: \"selected\",\n    midis: [\n      \"monk-maz-koshia---the-legend-of-zelda-breath-of-the-wild-\",\n      \"vizisi\",\n      \"marx-theme-from-kirby-super-star---jun-ishikawa\",\n    ],\n  },\n  {\n    slug: \"taku_iwasaki\",\n    midis: [\n      \"il-mare-eterno-nella-mia-anima-piano-arrangement---caesar-death-theme\",\n    ],\n  },\n  {\n    slug: \"manaka_kataoka\",\n    midis: [\n      \"main-theme---the-legend-of-zelda-tears-of-the-kingdom---manaka-kataoka-yasuaki-iwata-and-hajime-wakai-totk-sheet-music\",\n      \"kass-theme--full-the-legend-of-zelda-breath-of-the-wild\",\n      \"mipha-s-theme---breath-of-the-wild-piano-solo\",\n      \"attack-on-vah-naboris---manaka-kataoka\",\n      \"monk-maz-koshia---the-legend-of-zelda-breath-of-the-wild-\",\n      \"prince-sidon-the-legend-of-zelda-breath-of-the-wild\",\n    ],\n    composerBirthYear: 1985,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"tj_hill\",\n    midis: [\n      \"owl-house-credits-theme\",\n      \"marcy-s-theme---t.j.-hill-amphibia-ost\",\n      \"the-owl-house-theme-song-piano\",\n    ],\n    composerBirthYear: 1985,\n  },\n  {\n    slug: \"altin_gun\",\n    midis: [\n      \"goca-dunya---altin-gun-goca-dunya.xml\",\n      \"rakiya-su-katamam---selami-sahin-altin-gun\",\n      \"badi-sabah-olmadan---altin-gun-badi-sabah-olmadan.xml\",\n    ],\n    composerBirthYear: 1970,\n    genre: \"Psychedelic Folk, Turkish Folk\",\n    style: \"Folk, Psychedelic\",\n    country: \"Netherlands, Turkey\",\n  },\n  {\n    slug: \"cesar_franck\",\n    midis: [\n      \"prelude-from-prelude-fugue-et-variation---op.-18-no.-3---cesar-franck\",\n      \"panis-angelicus\",\n      \"dextera-domini---franck\",\n    ],\n    composerBirthYear: 1822,\n    similarTo: [\"chopin_misc\", \"saint_saens\"],\n  },\n  {\n    slug: \"herbie_hancock\",\n    midis: [\n      \"cantaloupe-island\",\n      \"cantaloupe-island-avec-les-solos-de-freddie-herbie\",\n    ],\n    composerBirthYear: 1940,\n    genre: \"Jazz\",\n    style: \"Jazz, Fusion\",\n    country: \"USA\",\n  },\n  {\n    slug: \"michel_camilo\",\n    midis: [\n      \"one-more-once---michel-camilo\", // 12-bar blues\n      \"michel-camilo-from-within\",\n      \"blue-bossa-salsa---michel-camilo\",\n      \"caribe---michel-camilo\",\n    ],\n    composerBirthYear: 1954,\n    genre: \"Jazz\",\n    style: \"Latin Jazz\",\n    country: \"Dominican Republic\",\n  },\n  {\n    slug: \"hiromi_uehara\",\n    midis: [\n      \"the-tom-and-jerry-show---hiromi-uehara\",\n      \"hiromi-uehara---haze\",\n      \"hiromi-uehara---old-castle-by-the-river-in-the-middle-of-a-forest\",\n      \"mr.-c.c.-cm-ver.---hiromi-uehara\",\n      \"spark-by-hiromi-uehara-the-trio-project-piano-score\",\n    ],\n    composerBirthYear: 1979,\n    genre: \"Jazz\",\n    style: \"Jazz Fusion, Contemporary Jazz\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"george_duke\",\n    midis: [\"if-you-will---george-duke\", \"george-duke---it-s-on\"],\n    composerBirthYear: 1946,\n    genre: \"Jazz\",\n    style: \"Fusion, R&B, Funk\",\n    country: \"USA\",\n  },\n  {\n    slug: \"gabriel_faure\",\n    midis: [\"pavane-op.50---faure\", \"sicilienne-opus-78-in-g-minor\"],\n    composerBirthYear: 1845,\n    similarTo: [\"saint_saens\"],\n  },\n  {\n    slug: \"tonal_stretch\",\n    midis: [\n      \"jurassic-park---journey-to-the-island\",\n      \"na-krilah-vitru---a.-minov\",\n      \"narodniy-tanec---miroslav-skorik\",\n      \"skyscraper---wynn-anne-rossi\",\n      \"team-fortress---rise-of-the-living-bread---mike-morasky\",\n      \"eight-children-s-pieces-op.36---malcolm-arnold\",\n      \"the-tom-and-jerry-show---hiromi-uehara\",\n      \"irken-armada-invasion-zim-s-theme---mattias-hakulinen-and-pontus-askbrink\",\n      \"do-you-remember-king-s-theme---in-stars-and-time\",\n      \"marx-theme-from-kirby-super-star---jun-ishikawa\",\n      \"twilight-in-benares-1923\",\n      \"alien-lair\",\n      \"greenpath---christopher-larkin\",\n      \"qiao-shang-nozhan-i-battle-on-the-bridge---final-fantasy-tactics-ps1---hitoshi-sakimoto\",\n      \"heroes-of-might-magic-iii---fortress-town-theme\",\n      \"lavender-town-pokemon-r-b-y\",\n      \"amor-sacro---giovanni-allevi\",\n      \"blastin-banter-battle-battle-of-jerry-mountain---shinkonet-blastin-banter-battle\",\n      \"fantasiestuck---oskar-schuster\",\n      \"papers-please---death-theme\",\n      \"pastorale---marcelle-taillefesse-germaine-tailleferre-1919\",\n      \"jaws-theme\",\n    ],\n  },\n  { slug: \"ilmari_hakkola\", midis: [\"bad-piggies-theme\"] },\n  {\n    slug: \"gibran_alcocer\",\n    midis: [\n      \"idea-15---gibran-alcocer\",\n      \"idea-n.10---gibran-alcocer\",\n      \"idea-22---gibran-alcocer\",\n      \"idea-25-piano-solo-version---gibran-alcocer-andrea-vanzo\",\n\n      \"idea-7---gibran-alcocer\",\n      \"idea-20---gibran-alcocer\",\n      \"idea-1---gibran-alcocer\",\n\n      \"idea-9---gibran-alcocer\",\n      \"idea-5---gibran-alcocer\",\n    ],\n    composerBirthYear: 2003,\n    genre: \"21st Century Piano\",\n    country: \"Mexico\",\n  },\n  {\n    slug: \"andrea_vanzo\",\n    midis: [\n      \"intimacy---andrea-vanzo\",\n      \"soulmate---andrea-vanzo\",\n      \"spring---andrea-vanzo\",\n      \"valzer-d-inverno---andrea-vanzo\",\n      \"one-little-waltz-tonight---andrea-vanzo\",\n      \"sunlight---andrea-vanzo\",\n      \"snowflakes---andrea-vanzo\",\n      \"valzer-d-autunno---andrea-vanzo\",\n      \"fire-burns-inside-me---andrea-vanzo\",\n      \"il-tuo-profumo---andrea-vanzo\",\n    ],\n    similarTo: [\"gibran_alcocer\"],\n    genre: \"Felt Piano\",\n    composerBirthYear: 1989,\n    country: \"Italy\",\n  },\n  {\n    slug: \"oskar_schuster\",\n    midis: [\n      \"les-sablons---oskar-schuster\",\n      \"fantasiestuck---oskar-schuster\",\n      \"fjarlaegur-distant---oskar-schuster\",\n      \"eftir-sneeuwland---oskar-schuster\",\n      \"matilda---oskar-schuster\",\n    ],\n    similarTo: [\"andrea_vanzo\"],\n  },\n  {\n    slug: \"aaron_copland\",\n    midis: [\n      \"copland_s_third_symphony_first_movement\",\n      \"copland_symphony_3_mov_1_rewired\",\n      \"appalachian-spring---aaron-copland-appalachian-spring\",\n      \"hoe-down---aaron-copland\",\n      \"at-the-river-g\",\n      \"aaron-copland---story-of-our-town\",\n      \"the-cat-and-the-mouse\",\n    ],\n    composerBirthYear: 1900,\n    genre: \"Classical\",\n    style: \"American Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"revaz_laghidze\",\n    midis: [\"simg-era-t-bilisze---revaz-lag-iz-e\"],\n    composerBirthYear: 1930,\n    genre: \"Classical\",\n    style: \"Georgian Classical\",\n    country: \"Georgia\",\n  },\n  {\n    slug: \"ralph_vaughan_williams\",\n    midis: [\"lark-ascending\"],\n    composerBirthYear: 1872,\n  },\n  {\n    slug: \"john_williams\",\n    midis: [\n      \"john-william---jurassic-park-theme\",\n      \"jurassic-park-theme---john-williams-jurrasic-park-theme---john-williams\",\n      \"somewhere-in-my-memory-by-john-williams\",\n      \"theme-from-schindler-s-list---piano-solo\",\n      \"jurassic-park---journey-to-the-island\", // what's going on?\n      \"e.t.-end-credits-piano-solo\",\n      \"e.t.-theme---ywcm\",\n      \"jazz-autographs---john-williams-jazz-autographs-from-the-terminal---john-williams\",\n      \"holiday-flight-from-home-alone-2---john-williams-joni-leiman-solo-piano-transcription\",\n      \"jaws-theme\",\n      \"the-tale-of-viktor-navorski-john-williams\",\n      \"catch-me-if-you-can-sax-solo\",\n      \"nbc-sunday-night-football-theme\",\n      \"the-fabelmans---john-williams\",\n      \"helena-s-theme---john-williams-from-indiana-jones-and-the-dial-of-destiny\",\n      \"with-malice-toward-none---trumpet-solo-john-williams\", // very coplandinan quartal language\n    ],\n    composerBirthYear: 1932,\n    genre: \"Film Score\",\n    style: \"Film Music, Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"john_philip_sousa\",\n    midis: [\n      \"the-liberty-bell-march---john-philip-sousa---1893\",\n      \"semper-fidelis-piano-john-philip-sousa\",\n      \"the-stars-and-stripes-forever--john-f-sousa---arr.-v-horowitz\",\n    ],\n    composerBirthYear: 1854,\n    genre: \"March\",\n    style: \"Military March, American Patriotic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"cameron_lee_simpson\",\n    midis: [\n      \"mr.rogers-theme-wont-you-be-my-neighbor-arr.-cameron-lee-simpson\",\n      \"picking-the-chicken---cameron-lee-simpson---pjotr-kolster\",\n    ],\n    composerBirthYear: 1930,\n    genre: \"Pop, Childrens Music\",\n    style: \"Childrens Music, Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"chick_corea\",\n    midis: [\n      \"spain---chick-corea\",\n      \"children-s-song-no.-7---chick-corea\",\n      \"children-s-song-no.-6\",\n      \"children-s-song-2\",\n      \"children-s-song-no.-5\",\n\n      \"tones-for-joan-s-bones\",\n      \"fingerprints---chick-corea\",\n      \"chick-corea-s-scriabin\",\n    ],\n    composerBirthYear: 1941,\n    genre: \"Jazz\",\n    style: \"Jazz Fusion, Latin Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"dennis_alexander\",\n    midis: [\n      \"reflections-by-dennis-alexander\",\n      \"titanium_toccata-50\",\n      \"appaloosa-spirit---dennis-alexander\",\n      \"going-places---dennis-alexander\",\n      \"toccate---dennis-alexander-.\",\n      \"valse-romantique-sriram\",\n      \"grumpy-old-witch---dennis-alexander\",\n      \"nocturne-in-e-flat-major---dennis-alexander\",\n    ],\n    composerBirthYear: 1957, // Dennis Alexander was born in 1957\n    genre: \"Classical\", // Mainly classical, with some contemporary influences\n    style: \"Romantic, Contemporary\", // Known for both romantic and contemporary piano works\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"fabrizio_paterlini\",\n    midis: [\n      // natural minor\n      \"distractions---fabrizio-paterlini\",\n      \"fire---fabrizio-paterlini\",\n      \"waltz---fabrizio-paterlini\",\n      \"empty-room---fabrizio-paterlini\",\n      \"rue-des-trois-freres---fabrizio-paterlini\",\n      \"fabrizio-paterlini---midsummer-tiny-song\",\n      \"fabrizio-paterlini---snow\",\n      \"week-11---fabrizio-paterlini\",\n      \"week-8---fabrizio-paterlini-new-week8\",\n      \"there-s-a-light-we-might-see---fabrizio-paterlini\",\n      \"found-letters---fabrizio-paterlin\",\n      \"soffia-la-notte---fabrizio-paterlini\",\n      \"white-forest-in-kazan---fabrizio-paterlini\",\n      \"leave---fabrizio-paterlini\",\n\n      // \"fabricio-paterlini--there-is-a-light-we-might-see---dernierpianista\",\n\n      \"fabrizio-paterlini---racconto-di-luna\",\n      \"dawn---fabrizio-paterlini\",\n      \"pensieri-confusi---fabrizio-paterlini\", // chord scale: v\n      \"the-hall-is-dancing---fabrizio-paterlini\", // dorian\n\n      // minor V\n      \"lost-song---fabrizio-paterlini\",\n      \"my-piano-the-clouds---paterlini\",\n      \"fabrizio-paterlini---my-misty-mornings\",\n      // \"all-my-joy-all-my-pain---fabrizio-paterlini\",\n      \"all-my-joy-all-my-pain---fabrizio-paterlini-5f8e06\",\n      \"week-10---fabrizio-paterlini\",\n\n      \"primi-passi---fabrizio-paterlin\",\n      \"if-only-i-could-tell---fabrizio-paterlini\",\n      \"silent-eyes---fabrizio-paterlini\", // V/V\n\n      // major\n      \"la-polvere-e-l-incanto---fabrizio-paterlini\",\n      \"sottovoce---fabrizio-paterlini\",\n      \"five-thirty-am---fabrizio-paterlini\",\n      \"il-gigante-e-la-balena---fabrizio-paterlini\",\n    ],\n    composerBirthYear: 1973,\n    country: \"Italy\",\n  },\n  {\n    slug: \"johan_soderqvist_and_patrik_andren\",\n    midis: [\n      \"devastation---johan-soderqvist-and-patrik-andren-devastation---johan-soderqvist-patrik-andren\",\n      \"homing-pigeon-violin-piano---in-d-major-b-minor\",\n      \"then-we-are-together---johan-soderqvist\",\n      \"battlefield-v-norway---johan-soderqvist\",\n      \"battlefield-1-lacrimosa---johan-soderqvist\",\n      \"under-no-flag-battlefield-v---johan-soderqvist-patrik-andren\",\n    ],\n  },\n  {\n    slug: \"manfred_schmitz\",\n    midis: [\n      \"manfred-schmitz---kleine-pop-romanze-short-pop-romance\",\n      \"barkarole---manfred-schmitz\",\n      \"zimniy-vecher-winter-evening---manfred-shmitc-manfred-schmitz\",\n      \"am-abend---manfred-schmitz\",\n      \"elegie---manfred-schmitz\",\n      \"mickey-mouse---manfred-schmitz\", // rag\n      \"andrea---manfred-schmitz\",\n      \"for-linda-king---manfred-schmitz\",\n      \"manfredschmitzunpeutriste\",\n      \"old-movie-man---manfred-schmitz\",\n      \"bagatelle---manfred-schmitz\",\n      \"romance-melancolique---manfred-schmitz-easy\",\n      \"praerie-song---manfred-schmitz\",\n      \"episode---manfred-schmitz\",\n      \"spieluhr-serenade---manfred-schmitz\",\n      \"poetische-skizze---manfred-schmitz\",\n      \"prelude---manfred-schmitz\",\n      \"in-double-time\",\n    ],\n    composerBirthYear: 1950, // Born in 1950, known for contemporary classical compositions\n    genre: \"Teacher Music, Classical, Pop\", // Combines classical and pop elements\n    country: \"Germany\", // German composer\n  },\n  {\n    slug: \"ignacy_feliks_dobrzynski\",\n    midis: [\n      \"feliks-dobrzynski---farewell-nocturne\",\n      \"nocturne-op.21-no1---ignacy-feliks-dobrzynski\",\n      \"nocturne-in-f-minor-op.24-no.1---ignacy-feliks-dobrzynski\",\n      \"adagio---ignacy-feliks-dobrzynski\",\n      \"fantaisie-op.14---ignacy-feliks-dobrzynski\",\n    ],\n    composerBirthYear: 1807, // Born in 1807\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic period composer\n    country: \"Poland\", // Polish composer\n  },\n  { slug: \"jacob_do_bandolim\", midis: [\"vibracoes---jacob-do-bandolim\"] },\n  {\n    slug: \"ignacy_jan_paderewski\",\n    midis: [\n      \"elegy-op.4---ignacy-jan-paderewski\",\n      \"miscellanea-op.16---ignacy-jan-paderewski-no.4-nocturne\",\n      \"piano-concerto-op.17---ignacy-jan-paderewski\",\n      \"ignacy-jan-paderewski-sarabande-op.-14-no-2\",\n    ],\n    composerBirthYear: 1860, // Born in 1860\n    genre: \"Classical\", // Classical, especially known for his piano compositions\n    style: \"Late-Romantic\", // Late Romantic era style\n    country: \"Poland\", // Polish composer and statesman\n  },\n  {\n    slug: \"nikolay_zubov\",\n    midis: [\n      \"ne-uhodi-pobud-so-mnoyu-don-t-go-stay-with-me-romance\",\n      \"o-ni-nemaie-mriyi---m.-zubov\",\n      \"poglyad-tvoyih-chornih-ochey---m.-zubov\",\n    ],\n    composerBirthYear: 1915, // Born in 1915\n    genre: \"Romantic\", // Romantic and early 20th-century style\n    style: \"Romantic\", // Predominantly Romantic style\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"mykola_mozgovyy\",\n    midis: [\n      \"minaie-den-minaie-nich---mikola-mozgoviy\",\n      \"moya-zemlya---mikola-mozgoviy\",\n      \"zacharuy-nas-lyubov---mikola-mozgoviy\",\n      \"nazvi---m.-mozgoviy\",\n    ],\n    composerBirthYear: 1943, // Born in 1943\n    genre: \"Folk, Classical\", // Combines folk music with classical traditions\n    style: \"Romantic, Folk\", // Romantic influences with Ukrainian folk music\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"myroslav_skoryk\",\n    midis: [\n      \"melodiya-lya-minor-dlya-skripki-i-fortepiano---m.-skorik\",\n      \"namalyuy-meni-nich---m.-skorik\",\n      \"listok-do-albomu---miroslav-skorik\",\n      \"narodniy-tanec---miroslav-skorik\",\n      \"zhartivliva-p-iesa---miroslav-skorik\",\n      \"sini-ochi---miroslav-skorik\",\n      \"nav-yazliviy-motiv---miroslav-skorik\",\n      \"v-narodnomu-stili---miroslav-skorik\",\n      \"tanec-iz-guculskogo-triptiha\",\n    ],\n    composerBirthYear: 1938, // Born in 1938\n    genre: \"Classical, Folk\", // Classical and folk influences\n    style: \"Contemporary, Folk\", // Contemporary with traditional folk elements\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"moritz_moszkowski\",\n    midis: [\n      \"moszkowski---la-jongleuse-op.52-no.4\",\n      \"tarentelle-10-pieces-mignonnes-op.-77-no.-6-m.-moszkowski\",\n      \"spanish-dance---moritz-moszkowski\",\n      \"moszkowski---etincelles-op.36-no.6\",\n    ],\n    composerBirthYear: 1854, // Born in 1854\n    genre: \"Classical\", // Classical and Romantic composer\n    style: \"Romantic\", // Romantic era style\n    country: \"Poland\", // Polish composer\n  },\n  {\n    slug: \"platon_mayboroda\",\n    midis: [\n      \"bili-kashtani---platon-mayboroda\",\n      \"kiyivskiy-vals---p.-mayboroda\",\n      \"ridna-mati-moya-pisnya-pro-rushnik---p.-mayboroda\",\n    ],\n    composerBirthYear: 1918, // Born in 1918\n    genre: \"Folk, Classical\", // Combines Ukrainian folk and classical traditions\n    style: \"Romantic, Folk\", // Romantic and folk elements\n    country: \"Ukraine\", // Ukrainian composer\n  },\n\n  { slug: \"max_richter\", midis: [] },\n  {\n    slug: \"yaroslav_kis\",\n    midis: [\"liricheskiy-vals---yaroslav-kis\"],\n    composerBirthYear: 1980, // Born in 1980\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic piano music\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"yuriy_zubay\",\n    midis: [\n      \"babusya-yagusya---yu.-zubay\",\n      \"osinnya-pisnya---yuriy-zubay\",\n      \"koncertino---yu.-zubay\",\n    ],\n    composerBirthYear: 1952, // Born in 1952\n    genre: \"Classical, Folk\", // Classical with folk influences\n    style: \"Folk, Contemporary\", // Folk-inspired classical compositions\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"loginvovchyk_single\",\n    midis: [\n      \"na-krilah-vitru---a.-minov\",\n      \"dobriy-vechir-dole---o.-pushkarenko\",\n    ],\n    genre: \"Folk, Classical\", // Folk and classical music\n    style: \"Folk\", // Traditional folk music\n    country: \"Ukraine\", // Ukrainian composers\n  },\n  {\n    slug: \"valery_zubkov\",\n    midis: [\n      \"vozvrashchenie---v.-zubkov-return---v.-zubkov\",\n      \"gypsy-v.-zubkov-cygan-v.-zubkov\", // same?\n    ],\n    composerBirthYear: 1949, // Born in 1949\n    genre: \"Classical, Folk\", // Classical with folk influences\n    style: \"Folk\", // Ukrainian folk and classical music\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"john_field\",\n    midis: [\n      \"nocturne-no.5---h.37---john-field---edited-by-liszt\",\n      \"nocturne-no.1---field\",\n      \"john-field-nocturne-no.-12\",\n    ],\n    composerBirthYear: 1782, // Born in 1782\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Early Romantic composer\n    country: \"Ireland\", // Irish composer\n  },\n  {\n    slug: \"fuzzy\",\n    midis: [\n      \"julenat\",\n      \"en-gammel-knark---gamle-er-unge-der-er-blevet-aeldre\",\n      \"en-by-i-provinsen-mus3\",\n    ],\n    genre: \"Pop, Folk\", // Pop and folk influences\n    style: \"Pop, Folk\", // Pop and traditional folk\n    country: \"Denmark\", // Danish artists\n  },\n  {\n    slug: \"king_gnu\",\n    midis: [\n      \"specialz---king-gnu---jujutsu-kaisen-season-2-op2-full-version\",\n      \"banana-fish-ed-1-prayer-x\",\n      \"king-gnu-ni-meng-sakayume-zhou-shu-hui-zhan-0-ju-chang-ban-ed-piano-cover-sheet\",\n    ],\n  },\n  {\n    slug: \"yoshimasa_terui\",\n    midis: [\n      \"if-i-am-with-you---yoshimasa-terui-jujutsu-kaisen-s2-ost-digital-sheet-music\",\n      \"vague-reasons---yoshimasa-terui---jujutsu-kaisen-s2-ost-nanami-theme\",\n      \"malevolent-shrine---yoshimasa-terui---jujutsu-kaisen-s2-ost-full-version\",\n    ],\n  },\n  {\n    slug: \"ebbe_raun\",\n    midis: [\n      \"melodien-som-evert-taube-aldrig-skrev\",\n      \"noget-om-mit-hjerterum\",\n      \"ingen-er-evig-ung\",\n    ],\n    genre: \"Folk\", // Primarily folk music\n    style: \"Folk\", // Folk music\n    country: \"Denmark\", // Danish composer\n  },\n  {\n    slug: \"ringmasters\",\n    midis: [\n      \"kung-liljekonvalje\",\n      \"you-ll-never-walk-alone\",\n      \"between-the-devil-and-the-deep-blue-sea\",\n    ],\n    composerBirthYear: 1975,\n    genre: \"Barbershop\", // Barbershop style\n    style: \"Barbershop\", // Traditional barbershop quartet\n    country: \"Sweden\", // Swedish barbershop quartet\n  },\n  {\n    slug: \"white_star_line_1912\",\n    midis: [\n      \"the-quaker-girl-valse---lionel-monckton-carl-kiefert-1910\", // ii-V->V7/V\n      \"barber-of-seville-overture\",\n      \"overture-to-poet-and-peasant---franz-von-suppe-piano-reduction-solo\",\n    ],\n    composerBirthYear: 1870,\n    genre: \"Classical\", // Classical music\n    style: \"Romantic\", // Late Romantic period\n    country: \"UK\", // British composers\n  },\n  {\n    slug: \"louis_vierne\",\n    midis: [\"vierne-organ-symphony-no.-1-part-vi---final\"],\n  },\n  {\n    slug: \"roberto_cacciapaglia\",\n    midis: [\n      \"roberto-cacciapaglia---tema-celeste\",\n      \"roberto-cacciapaglia---seconda-navigazione\",\n      \"roberto-cacciapaglia---atlantico\",\n    ],\n    composerBirthYear: 1959,\n  },\n  {\n    slug: \"tchaikovsky\",\n    midis: [\n      \"trepak-russian-dance---tchaikovsky---piano-transcription\",\n      \"dance-of-the-reed-flutes-the-nutcracker-suite---tchaikovsky\",\n      \"chinese-dance---the-nutcracker-suite---peter-tchaikovsky\",\n      \"tchaikovsky-waltz-of-the-flowers-from-the-nutcracker-piano-4-hands\",\n      \"dance-of-the-sugar-plum-fairy\",\n      \"swan-lake-theme---tchaikovsky\",\n\n      \"the-seasons-op.-37b---1.-january-at-the-fireside-t.-yaskawa\",\n\n      \"march-of-the-toy-soldiers---pyotr-ilyich-tchaikovsky\",\n\n      \"tchaikovsky---album-for-the-young-1.-morning-prayer\",\n      \"tchaikovsky---album-for-the-young-2.-winter-morning\",\n      \"tchaikovsky---album-for-the-young-3.-the-little-horseman\",\n    ],\n    composerBirthYear: 1840, // Born in 1840\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic era composer\n    country: \"Russia\", // Russian composer\n  },\n  { slug: \"chad_lawson\", midis: [\"stay---chad-lawson\"] },\n  {\n    slug: \"rob_costlow\",\n    midis: [\n      // Sophomore Jinx, 2005\n      \"rob-costlow---bliss\",\n      \"rob-costlow---i-do\",\n      \"rob-costlow---forever\",\n      \"rob-costlow---goodbyes\",\n      \"rob-costlow---oceans\",\n    ],\n    composerBirthYear: 1973,\n  },\n  {\n    slug: \"wagner\",\n    midis: [\n      \"wagner-siegfried-s-funeral-march-from-gotterdammerung-piano-solo\",\n      \"wagner-elsa-s-procession-to-the-cathedral-from-the-opera-lohengrin-piano-solo\",\n      \"wagner_tannhauser_overture_piano_solo\",\n    ],\n    composerBirthYear: 1813, // Born in 1813\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic opera composer\n    country: \"Germany\", // German composer\n  },\n  {\n    slug: \"timothy_brown\",\n    midis: [\n      \"dance-of-the-wind---timothy-brown\",\n      \"toccatina---timothy-brown\",\n      \"summer-song\",\n      \"scherzino---timothy-brown\", // i like this one. simple and effective\n    ],\n    composerBirthYear: 1961, // Born in 1961\n    genre: \"Contemporary Classical\", // Contemporary classical music\n    style: \"Minimalism\", // Minimalism style\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"lionel_yu\",\n    midis: [\n      \"fight-for-freedom---lionel-yu\",\n      \"i-will-love-you-always---lionel-yu\",\n      \"the-cursed-path\",\n    ],\n    composerBirthYear: 1989,\n    genre: \"Contemporary\", // Contemporary classical and cinematic\n    style: \"Cinematic\", // Cinematic and contemporary classical\n    country: \"China, USA\", // American composer\n  },\n  {\n    slug: \"melody_bober\",\n    midis: [\n      \"stealth-mode---melody-bober\",\n      \"blues-006---blyuz-006\",\n      \"midnight-ride---melody-bober-midnight-ride\",\n      \"melody-bober----yellowhammer-stomp\",\n      \"antique-music-box---melody-bober\",\n      \"dance-of-the-autumn-leaves---melody-bober\",\n    ],\n    composerBirthYear: 1952, // Born in 1952\n    genre: \"Classical, Educational\", // Classical with an educational focus\n    style: \"Contemporary, Educational\", // Contemporary educational music\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"wynn-anne_rossi\",\n    midis: [\n      \"skyscraper---wynn-anne-rossi\",\n      \"cafe-cha-cha---wynn-anne-rossi\",\n      \"alma-del-tango---wynn-anne-rossi\",\n    ],\n    composerBirthYear: 1964, // Born in 1964\n    genre: \"Classical, Jazz\", // Classical with jazz influences\n    style: \"Contemporary, Jazz\", // Contemporary classical with jazz influences\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"jennifer_linn\",\n    midis: [\"the-dreamcatcher\", \"snowcrystals---jennifer-linn\"],\n    composerBirthYear: 1978, // Born in 1978\n    genre: \"Classical\", // Classical music\n    style: \"Contemporary\", // Contemporary classical music\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"john_adams\",\n    midis: [\n      \"piano-arr.-short-ride-in-a-fast-machine---john-adams\",\n      \"phrygian-gates-china-gates---john-adams\",\n    ],\n    composerBirthYear: 1947, // Born in 1947\n    genre: \"Minimalism\", // Minimalism composer\n    style: \"Minimalism\", // Famous for Minimalism music\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"ignacio_cervantes\",\n    midis: [\n      \"no-me-toques-danza-cubana-de-ignacio-cervantes\",\n      \"soledad-.-habanera-par-ignazio-cervantes\",\n      \"los-tres-golpes-danza-ignacio-cervantes\",\n    ],\n    composerBirthYear: 1847, // Born in 1847\n    genre: \"Classical\", // Classical and Cuban music\n    style: \"Romantic\", // Romantic period composer\n    country: \"Cuba\", // Cuban composer\n  },\n  { slug: \"borrtex\", midis: [\"flowing---borrtex\"], composerBirthYear: 1999 },\n  {\n    slug: \"kristofer_maddigan\",\n    midis: [\n      \"inkwell-hell-piano-from-cuphead---kristofer-maddigan\",\n      \"cuphead---kristofer-maddigan---die-house\",\n      \"inkwell-isle-four-piano---kristofer-maddigan\",\n      \"inkwell-isle-three\",\n      \"snow-cult-scuffle---kristofer-maddigan\",\n    ],\n    composerBirthYear: 1985,\n  },\n  {\n    slug: \"mozart_misc\",\n    midis: [\n      \"fantasia_in_d_minor_k_397_385g_wolfgang_amadeus_mozart\",\n      \"i_allegro_symphony_no_4_in_d_major_k_19_w_a_mozart\",\n      \"mozart_rondo_in_d_major_k_485_professional_production_score\",\n\n      \"mozart_string_quartet_no_18_in_a_major_k464\",\n      \"mozart_string_quartet_no_19_in_c_major_k465_dissonance\",\n\n      \"string_quartet_no_23_in_f_major_k_590_wolfgang_amadeus_mozart\",\n\n      \"sonata_no_9_3rd_movement_k_311\",\n      \"mozart_sonata_11_1st\",\n      \"sonata_no_13_1st_movement_k_333\",\n      \"piano_sonata_no_16_in_c_major_k_545_wolfgang_amadeus_mozart_piano_solo\",\n\n      \"wa-mozart-marche-turque-turkish-march-fingered\",\n\n      \"lacrimosa---requiem\",\n\n      \"eine-kleine-nachtmusik\",\n    ],\n    composerBirthYear: 1756, // Born in 1756\n    genre: \"Classical\", // Classical composer\n    style: \"Classical\", // Classical period composer, known for his operas, symphonies, and chamber music\n    country: \"Austria\", // Austrian composer\n  },\n  {\n    slug: \"chopin_misc\",\n    midis: [\n      \"nocturnes-op.-9---no.-1-in-b-minor-d.-inoue\",\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n      \"chopin_nocturne_op9_no2_maestro_2011r3d3t5\",\n      \"nocturne-in-c-minor-op.-posth.-d.-inoue\",\n      \"nocturne-in-c-sharp-minor\",\n      \"nocturnes-op.-9---no.-3-in-b-d.-inoue\",\n      \"nocturnes-op.-15---no.-1-in-f-d.-inoue\",\n      \"nocturnes-op.-15---no.-2-in-f-d.-inoue\",\n      \"nocturne-opus-15-no.-2-in-f-major\",\n      \"nocturne-opus-15-no.-3-in-g-minor\",\n      \"nocturne-opus-27-no.-1-in-c-minor\",\n      \"nocturne-opus-27-no.-2-in-d-major\",\n      \"nocturne-opus-32-no.-1-in-b-major\",\n      \"nocturne-opus-32-no.-2-in-a-major\",\n      \"nocturne-opus-48-no.-1-in-c-minor\",\n      \"nocturne-opus-55-no.-1-in-f-minor\",\n      \"nocturne-opus-62-no.-1-in-b-major\",\n\n      \"waltz-opus-18-in-e-major-grande-valse-brillante\",\n      \"waltz-opus-64-no.-2-in-c-minor\",\n      \"waltz-opus-69-no.-1-in-a-major\",\n      \"waltz-opus-69-no.-2-in-b-minor\",\n      \"waltz-opus-70-no.-1-in-g-major\",\n      \"waltz-b.-133-in-e-major---chopin\",\n      \"Waltz_in_A_MinorChopin\",\n      \"waltz-no.-11-in-g-flat-major-op.70-no.1---frederic-chopin\",\n      \"chopin---waltz-no.-1-in-d-flat-major-op.-64\", // harmonic prototype for Scott Joplin\n\n      \"chopin_ballade_fminor_op52\",\n      \"chopin_ballade_no_1_in_g_minor_op_23\",\n      \"chopin_ballade_no_4_piano_solo\",\n      \"chopin_military_polonaise\",\n\n      \"fantaisie-impromptu-in-c-minor---chopin\",\n\n      \"etude-opus-10-no.-1-in-c-major\",\n      \"etude-opus-10-no.-2-in-a-minor\",\n      \"etude-opus-25-no.-11-winter-wind-in-a-minor\",\n\n      \"mazurka-op.68-no.4---chopin---posth.\",\n      \"mazurkas-op.-63---no.-2-in-f-minor-r.-lubetsky\",\n\n      \"etudes-op.-10---no.-12-in-c-minor-revolutionary-n.-carter\",\n    ],\n    composerBirthYear: 1810, // Born in 1810\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic period composer, known for his piano works\n    country: \"Poland\", // Polish composer (spent much of his life in France)\n  },\n\n  {\n    slug: \"chopin_24_preludes\",\n    midis: [\n      \"prelude-opus-28-no.-1-in-c-major\",\n      \"prelude-opus-28-no.-2-in-a-minor\",\n\n      \"chopin-prelude-e-minor-op-28-no-4-w-chord-symbols\",\n      \"24-preludes-op.-28---no.-4-in-e-minor-suffocation-g.-d.-robertson\",\n\n      \"prelude-opus-28-no.-6-in-b-minor\",\n      \"prelude-opus-28-no.-7-in-a-major---chopin\",\n      \"prelude-opus-28-no.-8-in-f-minor\",\n\n      \"chopin_raindrop_prelude\",\n    ],\n    composerBirthYear: 1810, // Born in 1810\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic period composer, known for his piano works\n    country: \"Poland\", // Polish composer (spent much of his life in France)\n  },\n  { slug: \"dawid_bowie\", midis: [\"space-oddity---david-bowie\"] },\n  {\n    slug: \"grieg\",\n    midis: [\n      \"grieg_arietta_yaskawa\",\n      \"grieg_lyric_2_waltz_yaskawa\",\n      \"in-the-hall-of-the-mountain-king-dovregubbens-hall\",\n      \"piano-sonata-in-e-minor-op.-7-b.-hisamori\",\n    ],\n    composerBirthYear: 1843, // Edvard Grieg\n    genre: \"Classical\", // Late Romantic period\n    style: \"Romantic\", // Known for his expressive piano pieces\n    country: \"Norway\", // Grieg was Norwegian\n  },\n  {\n    slug: \"yuki_kaijura\",\n    midis: [\n      \"nara-no-kyoukai-vol.-2---m01\",\n      \"a-tender-feeling-sword-art-online\",\n      \"at-nightfall---yuki-kajiura\",\n      \"demon-slayer-mugen-train-rengoku-theme-9th-form---yuki-kajiura\",\n      \"melody-lacie-s-song---yuki-kajiura\",\n      \"decretum---yuki-kajiura-puella-magi-madoka-magica-ost\",\n    ],\n    composerBirthYear: 1963, // Yuki Kajiura\n    genre: \"Soundtrack\", // Known for composing anime soundtracks\n    style: \"Orchestral, Electronic\", // Combines orchestral with electronic music\n    country: \"Japan\", // Yuki Kajiura is Japanese\n  },\n  {\n    slug: \"jacob_axel_josephson\",\n    midis: [\"albumblad\"],\n    composerBirthYear: 1850, // Jacob Axel Josephson\n    genre: \"Classical\", // Primarily known for his works in the classical genre\n    style: \"Romantic\", // Romantic era composer\n    country: \"Sweden\", // Josephson was Swedish\n  },\n  {\n    slug: \"christian_hymns_worldwide\",\n    midis: [\"karibu-na-bwana\"],\n    composerBirthYear: undefined, // No specific composer\n    genre: \"Gospel\", // Christian hymns are often gospel in style\n    style: \"Gospel, Hymn\", // Traditional Christian hymns\n  },\n  {\n    slug: \"medleys\",\n    midis: [\"seru-giran-medley---charly-garcia\"],\n  },\n  {\n    slug: \"medorei\",\n    midis: [\n      \"zhao-he-aidorumedore\", // Showa Era J-Pop Idol Medley\n    ],\n    composerBirthYear: undefined, // Medley, no specific composer\n    genre: \"Pop\", // J-Pop, Japanese pop music\n    style: \"J-Pop, Idol\", // Showa era idol music\n    country: \"Japan\", // J-Pop is a genre from Japan\n  },\n  {\n    slug: \"dora_pejacevic\",\n    midis: [\n      \"the-life-of-flowers-violet---dora-pejacevic\",\n      \"papillon-op.-6---dora-pejacevic\",\n    ],\n    composerBirthYear: 1885, // Dora Pejacevic\n    genre: \"Classical\", // Primarily classical composer\n    style: \"Romantic\", // Works in the late Romantic style\n    country: \"Croatia\", // Dora Pejacevic was Croatian\n  },\n  {\n    slug: \"mikulas_schneider_trnavsky\",\n    midis: [\n      \"otec-nebesky-jks017---mikulas-schneider-trnavsky\",\n      \"kriste-zo-srdca-celeho-jks272---mikulas-schneider-trnavsky\",\n      \"hospodine-vyslys-nas-jks527---mikulas-schneider-trnavsky\",\n    ],\n    composerBirthYear: 1881, // Mikul Schneider-Trnavsk\n    genre: \"Classical\", // Classical music with folk influences\n    style: \"Folk-inspired, Sacred\", // Known for sacred and folk-inspired compositions\n    country: \"Slovakia\", // Schneider-Trnavsk was Slovak\n  },\n  {\n    slug: \"mihail_krug\",\n    midis: [\"prihodite-v-moy-dom\", \"fraer---mihail-krug\", \"kolshchik\"],\n    composerBirthYear: 1962, // Mikhail Krug\n    genre: \"Russian chanson\", // Popular in Russian chanson genre\n    style: \"Chanson\", // Known for his distinctive style in Russian chanson\n    country: \"Russia\", // Mikhail Krug was Russian\n  },\n  {\n    slug: \"danny_elfman\",\n    midis: [\n      \"victor-s-piano-solo---danny-elfman---corpse-bride\",\n      \"the-simpsons-main-title-theme---piano\",\n      \"the-simpsons-main-theme---danny-elfman\",\n      \"everybody-knows\",\n      \"hong-kong-disneyland-mystic-manor-theme-remastered---danny-elfman\",\n      \"hero-s-theme---justice-league-2017---danny-elfman---piano-solo\",\n      \"opening-titles-from-edward-scissorhands\",\n      \"main-titles-from-doctor-strange-in-the-multiverse-of-madness-2022---danny-elfman\",\n      \"wednesday---piano-opening-theme---danny-elfman-wednesday---piano-opening-theme\",\n      \"alice-in-wonderland\",\n      \"this-is-halloween-short-version---danny-elfman\",\n    ],\n    composerBirthYear: 1953, // Danny Elfman\n    genre: \"Film Score\", // Known for film scores and movie soundtracks\n    style: \"Orchestral, Gothic, Pop\", // A blend of orchestral, gothic, and sometimes pop elements\n    country: \"USA\", // Danny Elfman is American\n  },\n  {\n    slug: \"george_bruns\",\n    midis: [\n      \"les-aristochats---george-bruns\",\n      \"overture-from-the-jungle-book---george-bruns-overture-the-jungle-book---george-bruns\",\n      \"yo-ho-a-pirate-s-life-for-me---george-bruns-xavier-atencio-yo-ho-a-pirates-life-for-me\",\n    ],\n    composerBirthYear: 1914, // George Bruns\n    genre: \"Film Score\", // Composer of film scores\n    style: \"Orchestral\", // Traditional orchestral film scoring\n    country: \"USA\", // George Bruns was American\n  },\n  {\n    slug: \"yu-peng_chen\",\n    midis: [\n      \"rex-incognito-zhongli-s-theme-from-genshin-impact---yu-peng-chen-hoyo-mix\",\n      \"ganyu-radiant-dreams-genshin-impact---yu-peng-chen\",\n      \"kamisato-dance-cg-bgm-for-piano---genshin-impact-2.0-inazuma---yu-peng-chen\",\n      \"ruu-s-song---yu-peng-chen\",\n      \"yoimiya-dazzling-lights-in-the-summer-genshin-impact---yu-peng-chen\",\n      \"moonlike-smile---yu-peng-chen\",\n      \"genshin-impact---inazuma-miscellany---yu-peng-chen-genshin-impact-2.0-livestream-piano-part-1\",\n      \"genshin-impact-main-theme\",\n    ],\n    composerBirthYear: 1984,\n    genre: \"Video Game Music\", // Composer for video games, primarily Genshin Impact\n    style: \"Orchestral, Cinematic\", // Cinematic style with orchestral elements\n    country: \"China\", // Yu-Peng Chen is Chinese\n  },\n  {\n    slug: \"udo_jurgens\",\n    midis: [\n      \"griechischer-wein---udo-jurgens-griechischer-wein---udo-jurgens\",\n      \"griechischer-wein---udo-jurgens\",\n      \"zehn-nach-elf-udo-jurgens-piano-cover\",\n      \"vielen-dank-fur-die-blumen---udo-jurgens\",\n      \"ein-ehrenwertes-haus---udo-jurgens\",\n    ],\n    composerBirthYear: 1934, // Udo Jrgens\n    genre: \"Schlager, Pop\", // Schlager is a key genre he worked in\n    style: \"Pop, Easy Listening\", // His style was easy listening and pop\n    country: \"Austria\", // Udo Jrgens was Austrian\n  },\n  {\n    slug: \"geoffrey_gregoire_kargmax\",\n    midis: [\n      \"oriental-breath\",\n      \"menuet-en-mib-mineur\",\n      \"espieglerie-grazioso-entre-violon-et-piano-mi-m\",\n    ],\n    composerBirthYear: undefined, // Not enough information to determine\n    genre: \"Classical\", // Classical genre\n    style: \"Baroque, Classical\", // Works in classical and baroque style\n    country: undefined, // Country of origin unclear\n  },\n  {\n    slug: \"emmerich_kalman\",\n    midis: [\n      \"the-tercet-from-die-bajadere-by-emmerich-kalman-tercet-iz-operetty-bayadera-i.-kalmana\",\n      \"grafin-mariza.-no-7a-komm-zigany---emmerich-kalman\",\n      \"die-zirkusprinzessin---emmerich-kalman-reminiszenz_nr.15a_die-zirkusprinzessin_emmerich-kalman\",\n      \"die-herzogin-von-chicago-nr.1a---emmerich-kalman\",\n      \"i-still-can-dream---emmerich-kalman\",\n      \"throw-me-a-rose---emmerich-kalman-throw-me-a-rose\",\n      \"grafin-mariza.-no-3-wenn-es-abend-wird---emmerich-kalman-wenn-es-abend-wird\",\n    ],\n    composerBirthYear: 1882, // Emmerich Klmn\n    genre: \"Operetta\", // Known for operettas and light opera\n    style: \"Operetta, Classical\", // Works in operetta and classical styles\n    country: \"Hungary\", // Emmerich Klmn was Hungarian\n  },\n  {\n    slug: \"vicenzo_piano\",\n    midis: [\n      \"winter---lucia-salieri-vicenzo-piano\",\n      \"letter-to-my-mother---vicenzo-piano\",\n      \"awakening---vicenzo-piano\",\n\n      \"day-off---vicenzo-piano\",\n      \"a-dream-i-had---vicenzo-piano\",\n\n      // minor\n      \"introspection---vicenzo-piano\",\n      \"farewell---vicenzo-piano\",\n      \"the-golden-waltz---vicenzo-piano\",\n      \"the-midnight-waltz---vicenzo-piano\",\n      \"interstellar---vicenzo-piano\",\n    ],\n    genre: \"New Age\", // New Age piano compositions\n    style: \"Instrumental, Classical Crossover, Generative\", // Instrumental with elements of classical crossover\n  },\n  {\n    slug: \"todd_owen\",\n    midis: [\n      \"leaves-upon-tess\",\n      \"at-the-klutzy-ball\",\n      \"backpack-quest\",\n      \"when-i-am-dust-in-arcadia\",\n      \"sincerest-betrayal\",\n    ],\n    composerBirthYear: 1970, // Information about Vicenzo Piano's birth year is unclear\n    genre: \"Indie, Classical\", // Indie-classical style music\n    style: \"Minimalism\", // Minimalism piano compositions\n    country: undefined, // Country not specified\n  },\n  {\n    slug: \"SIX\",\n    midis: [\n      \"heart-of-stone-from-six-the-musical\",\n      \"six-the-musical---broadway-six-medley\",\n    ],\n    composerBirthYear: 1984, // Toby Marlow & Lucy Moss (co-composers of Six)\n    genre: \"Musical Theatre\", // Broadway musical\n    style: \"Pop Musical\", // Pop-influenced musical style\n    country: \"UK\", // SIX originated in the UK\n  },\n  {\n    slug: \"xix_century_russian_romance\",\n    midis: [\n      \"no-ya-vas-vse-taki-lyublyu...-nevertheless-i-love-you...---russian-romance\",\n    ],\n  },\n  {\n    slug: \"johann_pachelbel\",\n    midis: [\n      \"Canon_in_D\",\n      \"johann-pachelbel-1653~1706---fugue-in-c-major-p.144\",\n      \"pachelbel-chaconne-in-f-minor\",\n    ],\n    composerBirthYear: 1653, // Johann Pachelbel's birth year\n    genre: \"Baroque\", // Pachelbel was a Baroque composer\n    style: \"Classical\", // Common style descriptor for Baroque music\n    country: \"Germany\", // Pachelbel was German\n  },\n  {\n    slug: \"bebu_silvetti_and_raul_di_blasio\",\n    midis: [\n      \"mexico-de-noche\",\n      \"quiero-amanecer-con-alguien---daniela-romo\",\n      \"melissa---bebu-silvetti\", // canon in D\n      // \"bebu-silvetti---piano\",\n      \"volviendo-a-casa-raul-di-blasio\",\n      \"barroco---raul-di-blasio\",\n      \"piano---raul-di-blasio\",\n      \"corazon-de-nino-child-s-heart-by-raul-di-blasio---raul-di-blasio-corazon-de-nino-child-s-heart-by-raul-di-blasio\",\n    ],\n    composerBirthYear: 1939, // Bebu Silvetti's birth year\n    genre: \"Latin\", // Bebu Silvetti was known for Latin music\n    style: \"Pop\", // Known for Latin pop arrangements\n    country: \"Argentina\", // Silvetti was from Argentina\n  },\n  {\n    slug: \"c_austin_miles\",\n    midis: [\"in-the-garden---c.-austin-miles\"],\n    composerBirthYear: 1868, // C. Austin Miles' birth year (composer of \"In the Garden\")\n    genre: \"Gospel\", // \"In the Garden\" is a Christian hymn\n    style: \"Hymn\", // Hymnal style music\n    country: \"USA\", // C. Austin Miles was American\n  },\n  {\n    slug: \"mikhail_glinka\",\n    midis: [\n      \"glinka---the-lark-from-a-farewell-to-saint-petersburg-no.-10\",\n      \"ya-pomnyu-chudnoe-mgnovene\",\n      \"noktyurn-razluka-nocturne-la-separation---m.-i.-glinka-m.-i.-glinka-razluka\",\n    ],\n    composerBirthYear: 1804, // Glinka's birth year\n    genre: \"Romantic\", // Glinka was a Romantic composer\n    style: \"Classical\", // Typical descriptor for his style\n    country: \"Russia\", // Glinka was Russian\n  },\n  {\n    slug: \"jared_emerson-johnson\",\n    midis: [\n      \"sam-and-max-save-the-world-the-office---jared-emerson-johnson\",\n      \"cruisin---jared-emerson-johnson\",\n      \"prologue---the-wolf-among-us\",\n      \"crane-s-business-office-the-wolf-among-us\",\n    ],\n    composerBirthYear: 1980, // Approximate birth year\n    genre: \"Video Game\", // Known for video game music\n    style: \"Orchestral, Electronic\", // Blend of orchestral and electronic styles\n    country: \"USA\", // Emerson-Johnson is American\n  },\n  {\n    slug: \"david_wise\",\n    midis: [\n      \"gang-plank-galleon-donkey-kong-country\",\n      \"aquatic-ambience\",\n      \"jib-jig-donkey-kong-country-2\",\n    ],\n    composerBirthYear: 1967, // David Wise's birth year\n    genre: \"Video Game\", // Known for video game music, specifically Donkey Kong Country\n    style: \"Electronic, Orchestral\", // Known for a mix of electronic and orchestral elements in video game scores\n    country: \"UK\", // David Wise is from the UK\n  },\n  {\n    slug: \"andrew_prahlow\",\n    midis: [\n      \"andrew-prahlow---echoes-of-the-eye\",\n      \"andrew-prahlow---end-times\",\n      \"outer-wilds---main-theme---andrew-prahlow\",\n      \"outer-wilds---timber-hearth\",\n      \"andrew-prahlow---the-river\",\n    ],\n    composerBirthYear: 1988,\n    genre: \"Video Game\", // Known for video game music, particularly Outer Wilds\n    style: \"Ambient, Electronic\", // Prahlow's music is largely ambient with electronic influences\n    country: \"USA\", // Prahlow is American\n  },\n  {\n    slug: \"bear_mccreary\",\n    midis: [\n      \"the-walking-dead---theme-song-tv-series-2010---bear-mccreary\",\n      \"god-of-war-ragnarok---raeb-s-lament---bear-mccreary\",\n      \"nori-brandyfoot---lord-of-the-rings-the-rings-of-power\",\n      \"this-wandering-day---bear-mccreary---the-rings-of-power\",\n      \"percy-jackson-and-the-olympians---bear-mccreary-piano-solo\",\n      \"god-of-war-ragnarok---giantess-of-ironwood---bear-mccreary\",\n      \"leonardo-s-theme\",\n      \"the-witcher-blood-origin---the-black-rose---bear-mccreary\",\n      \"the-day-will-come---bear-mccreary\",\n      \"the-veil-of-time---outlander-score\",\n      \"agents-of-s.h.i.e.l.d.-theme\",\n    ],\n    composerBirthYear: 1979, // Bear McCreary's birth year\n    genre: \"Film, TV\", // Known for composing for films and TV series\n    style: \"Orchestral, Electronic, Rock\", // McCreary blends orchestral, electronic, and rock styles\n    country: \"USA\", // McCreary is American\n  },\n  { slug: \"tj_hill\", midis: [] },\n  {\n    slug: \"joe_hisaishi\",\n    midis: [\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n      \"One_Summers_Day_Spirited_Away\",\n      \"Summer_Joe_Hisaishi\",\n      \"a-town-with-an-ocean-view--joe-hisaishi--natural-key-signature\",\n      \"joe-hisaishi---hana-bi\",\n      \"the-name-of-life-inochi-no-namae-joe-hisaishi\",\n      \"itsumo-nando-demo-always-with-me---spirited-away\",\n      \"howl-s-moving-castle---promise-of-the-world\",\n    ],\n    composerBirthYear: 1950, // Joe Hisaishi's birth year\n    genre: \"Film, Anime\", // Known for composing music for films and anime\n    style: \"Orchestral\", // His compositions are often orchestral\n    country: \"Japan\", // Hisaishi is Japanese\n  },\n  {\n    // https://musescore.com/user/19710/sets/3559241\n    slug: \"mussorgsky\",\n    midis: [\n      \"promenade-i\",\n      \"gnomus\",\n      \"promenade-ii\",\n      \"il-vecchio-castello\",\n      \"promenade-iii\",\n      \"tuileries-dispute-d-enfants-apres-jeux\",\n      \"bydlo\",\n\n      \"night-on-bald-mountain-noch-na-lysoy-gore\",\n    ],\n    composerBirthYear: 1834, // Modest Mussorgsky's birth year (composer of Pictures at an Exhibition)\n    genre: \"Romantic\", // Mussorgsky was a Romantic composer\n    style: \"Classical\", // Typical descriptor for Romantic era music\n    country: \"Russia\", // Mussorgsky was Russian\n  },\n  {\n    slug: \"zequinha_de_abreu\",\n    midis: [\n      \"tico-tico-no-fuba---zequinha-de-abreu\",\n      \"nao-me-toques-chorinho---zequinha-de-abreu\",\n      \"os-pintinhos-no-terreiro-zequinha-de-abreu\",\n      \"levanta-poeira-chorinho---zequinha-de-abreu\",\n      \"bafo-de-onca\",\n      \"sururu-na-cidade\",\n    ],\n  },\n  {\n    slug: \"saint_saens\",\n    midis: [\n      \"danse-macabre-opus-40-s.-555\",\n      \"Saint_Saens_Symphony_3_1st\",\n      \"le-carnaval-des-animaux---aquarium\",\n      \"le-cygne-the-swan\",\n      \"feuillet-d-album-op.169---camille-saint-saens\",\n    ],\n    composerBirthYear: 1835,\n    genre: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    // https://www.discogs.com/release/17759461-Various-%D0%A8%D0%B5%D0%B4%D0%B5%D0%B2%D1%80%D1%8B-%D0%9A%D0%BB%D0%B0%D1%81%D1%81%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9-%D0%9C%D1%83%D0%B7%D1%8B%D0%BA%D0%B8-%D0%9A%D0%BE%D0%BB%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F-2-%D0%92%D1%8B%D0%BF%D1%83%D1%81%D0%BA-5\n    // https://musescore.com/user/12163676\n    slug: \"popular_classics\",\n    midis: [\n      \"valse---coppelia---piano-solo---arr.-leo-delibes\",\n\n      \"hungarian-march---hector-berlioz\",\n\n      \"swan-lake-op.-20-act-iii-no.-20-danse-hongroise-hungarian-dance-czardas\",\n      \"funiculi-funicula\",\n      \"grand-march-from-the-opera-aida-by-giuseppe-verdi\",\n      \"lyapunov-reverie-du-soir-op.3\",\n      \"thema-aus-die-moldau---b-smetana-s-sitnikava\",\n      \"mein-vaterland-nr2-moldau---bedrich-smetana-for-piano-solo\",\n      \"fantasia-on-greensleeves---ralph-vaughan-williams\",\n      \"der-flohwalzer\",\n      \"stanley-myers---cavatina-arranged-for-piano\",\n      \"imslp181922-wima.ec84-oginski_polonez_a\",\n      \"Entry_of_the_Gladiators_-_Julius_Fuk_-_1897\",\n    ],\n    composerBirthYear: 1836,\n    style: \"Classical\",\n    genre: \"Classical, Romantic\",\n  },\n  {\n    slug: \"smetana\",\n    midis: [\n      \"thema-aus-die-moldau---b-smetana-s-sitnikava\",\n      \"bedrich-smetana---vltava-ma-vlast\",\n      \"mein-vaterland-nr2-moldau---bedrich-smetana-for-piano-solo\",\n    ],\n    composerBirthYear: 1824, // Bedich Smetana (1824-1884)\n    genre: \"Romantic\", // Romantic era composer\n    style: \"Symphonic, Nationalism\", // Known for his symphonic poems and Czech nationalistic music\n    country: \"Czech Republic\", // Born in what is now the Czech Republic\n  },\n  {\n    slug: \"austin_farwell\",\n    midis: [\n      \"city-lights---austin-farwell\",\n      \"wedding-ballet---austin-farwell\",\n      \"once-upon-a-time---austin-farwell\",\n    ],\n  },\n  { slug: \"dylan_john_sparkes\", midis: [\"butterfly\"] },\n  {\n    slug: \"hania_rani\",\n    midis: [\n      \"glass---hania-rani\",\n      \"eden---hania-rani\",\n      \"sun---hania-rani\",\n      \"silent-night---hania-rani\",\n      \"hania-rani---rurka\",\n    ],\n    genre: \"Minimalism\",\n    composerBirthYear: 1990,\n    country: \"Poland\",\n  },\n  {\n    slug: \"johann_strauss_ii\",\n    midis: [\n      \"johann-strauss-jr.---an-der-schonen-blauen-donau\",\n      \"strauss---tritsch-tratsch-polka-piano\",\n    ],\n  },\n  {\n    slug: \"kelly_bailey\",\n    midis: [\n      \"triage-at-dawn\",\n      \"portal-radio-music-for-trombone\",\n      \"something-secret-steers-us\",\n    ],\n    composerBirthYear: 1967, // Kelly Bailey (born 1967)\n    genre: \"Video Game Music\", // Known for composing for video games, notably Portal and Half-Life\n    style: \"Electronic, Ambient\", // Often uses electronic and ambient styles in his compositions\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"arif_malikov\",\n    midis: [\n      \"sehrli-xalat-filminin-musiqisi---arif-m-likov\",\n      \"cix-yasil-duz---arif-m-likov-azerbaijan-folk-song\",\n      \"brilliant-dadasova---gull-rim\",\n    ],\n    composerBirthYear: 1933, // Arif Malikov (born 1933)\n    genre: \"Classical, Film Music\", // Known for classical compositions and film scores\n    style: \"Romantic, Nationalism\", // Romanticism with elements of national identity in his music\n    country: \"Azerbaijan\", // Azerbaijani composer\n  },\n  {\n    slug: \"alexander_nakarada\",\n    midis: [\n      \"adventure---alexander-nakarada\",\n      \"village-ambiance---alexander-nakarada\",\n    ],\n  },\n  { slug: \"thelonius_monk\", midis: [\"thelonious-monk-dinah\"] },\n  {\n    slug: \"kevin_macleod\",\n    midis: [\n      \"monkey-spinning-monkeys---kevin-macleod\",\n      \"if-i-had-a-chicken---kevin-macleod\",\n      \"carefree---kevin-macleod\",\n      \"amazing-plan---kevin-macleod\",\n    ],\n    composerBirthYear: 1972,\n    genre: \"Stock Music, Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"pete_johnson\",\n    midis: [\n      \"boogie-woogie-jump---pete-johnson\",\n      \"dive-bomber---pete-johnson\",\n      \"boogie-woogie-7a11a3\",\n      \"shuffle-boogie---pete-johnson\",\n    ],\n    style: \"Boogie Woogie\",\n    country: \"USA\",\n  },\n  {\n    slug: \"stevie_wonder\",\n    midis: [\n      \"boogie-on-reggae-woman.1\",\n      \"do-i-do\",\n      \"don-t-you-worry-bout-a-thing\",\n      \"for-your-love\",\n      \"golden-lady.1\",\n      \"happy-birthday-stevie-wonder\",\n      \"higher-ground.2\",\n      \"i-just-called-to-say-i-love-you.6\",\n      \"i-wish.1\",\n      \"isn-t-she-lovely-2\",\n      \"master-blaster\",\n      \"my-cherie-amour.1\",\n      \"overjoyed.1\",\n      \"part-time-lover.3\",\n      \"ribbon-in-the-sky.1\",\n      \"send-one-your-love\",\n      \"signed-sealed-delivered-i-m-yours.1\",\n      \"sir-duke\",\n      \"superstition\",\n      \"uptight-everything-s-alright\",\n      \"you-are-the-sunshine-of-my-life.5\",\n\n      // no wonder\n      \"a-place-in-the-sun\",\n      \"ebony-ivory\",\n      \"for-once-in-my-life.2\",\n      \"heaven-help-us-all\",\n      \"that-s-what-friends-are-for\",\n    ],\n    composerBirthYear: 1950,\n    genre: \"Soul, R&B, Funk\",\n    country: \"USA, Ghana\",\n  },\n  {\n    slug: \"tom_jobim\",\n    midis: [\n      \"wave---antonio-carlos-jobim-jazz-piano-solo\",\n      \"desafinado\",\n      \"aguas-de-marco---elis-regina-e-tom-jobim\",\n    ],\n    composerBirthYear: 1927, // Antnio Carlos Jobim (19271994)\n    genre: \"Bossa Nova\", // Pioneer of the bossa nova genre\n    style: \"Jazz, Brazilian\", // Known for blending jazz with Brazilian rhythms\n    country: \"Brazil\", // Brazilian composer\n  },\n  {\n    slug: \"chico_buarque\",\n    midis: [\"atras_da_porta\"],\n    composerBirthYear: 1944, // Chico Buarque (born 1944)\n    genre: \"Bossa Nova, MPB\", // Brazilian popular music (MPB) and bossa nova\n    style: \"Samba, Bossa Nova\", // Combines samba and bossa nova in his compositions\n    country: \"Brazil\", // Brazilian composer\n  },\n  {\n    slug: \"borislav_slavov\",\n    midis: [\"down-by-the-river---borislav-slavov-baldur-s-gate-3-ost\"],\n    composerBirthYear: 1980, // Borislav Slavov (born 1980)\n    genre: \"Video Game Music\", // Composer for video game soundtracks like Baldur's Gate 3\n    style: \"Orchestral, Cinematic\", // Orchestral music with cinematic qualities\n    country: \"Bulgaria\", // Bulgarian composer\n  },\n  {\n    slug: \"takeshi_abo\",\n    midis: [\n      \"gate-of-steiner\",\n      \"suzuha-s-farewell-wakare---steins-gate\",\n      \"steins-gate-0---messenger-piano\",\n    ],\n    composerBirthYear: 1977, // Takeshi Abo (born 1977)\n    genre: \"Video Game Music\", // Known for composing music for visual novels and video games\n    style: \"Electronic, Orchestral\", // A mix of electronic and orchestral elements in his compositions\n    country: \"Japan\", // Japanese composer\n  },\n  {\n    slug: \"esther_abrami\",\n    midis: [\n      \"no.9-esther-s-waltz---esther-abrami\",\n      \"no.2-remembering-her---esther-abrami\",\n      \"no.1-a-minor-waltz---esther-abrami-no-1-a-minor-waltz\",\n    ],\n    composerBirthYear: 1995, // Esther Abrami (born 1995)\n    genre: \"Classical\", // Classical composer and violinist\n    style: \"Romantic\", // Often performs and composes in the Romantic style\n    country: \"France\", // French composer and violinist\n  },\n  {\n    slug: \"brawl_stars\",\n    midis: [\n      \"brawl-stars---menu-theme\",\n      \"brawl-stars-metropolis-theme\",\n      \"brawl-stars---footbrawl-theme\",\n      \"brawl-stars---win-theme-piano\",\n      \"brawl-stars---draw-theme\",\n      \"brawl-stars---lose-theme\",\n      \"brawl-stars-ost---battle-8\",\n      \"brawl-stars---brawl-o-ween-battle-2\",\n      \"brawl-star\",\n      \"brawl-stars-summer-of-monsters-battle-2-insane\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Video Game Music\",\n    style: \"Electronic, Orchestral\",\n    country: \"Finland\",\n  },\n  {\n    slug: \"65daysofstatic\",\n    midis: [\n      \"don-t-go-down-to-sorrow---65daysofstatic\",\n      \"no-man-s-sky-escape-velocity---65daysofstatic\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Post-Rock, Electronic\", // Known for their mix of post-rock and electronic music\n    style: \"Instrumental\", // Primarily instrumental music\n    country: \"UK\", // British band\n  },\n  {\n    slug: \"mogwai\",\n    midis: [\"take-me-somewhere-nice---mogwai\"],\n    composerBirthYear: 1976,\n    genre: \"Post-Rock\", // A pioneering band in the post-rock genre\n    style: \"Instrumental, Atmospheric\", // Known for their atmospheric instrumental compositions\n    country: \"Scotland\", // Scottish band\n  },\n  {\n    slug: \"dmitry_kabalevsky\",\n    midis: [\n      \"slow-waltz-24-pieces-for-children-op.39-no.-23---dmitry-kabalevsky\",\n      \"clowns---dmitri-kabalevsky\", // I~i mix\n      \"a-happy-outing-24-pieces-for-children-op.39-no.-24---dmitry-kabalevsky\",\n      \"animato-24-pieces-for-children-op.-39-no.-18---dmitri-kabalevsky\",\n    ],\n    composerBirthYear: 1904, // Dmitri Kabalevsky (19041987)\n    genre: \"Classical\", // Prominent 20th-century classical composer\n    style: \"Neoclassical\", // Neoclassical style, often with elements of folk music\n    country: \"Russia\", // Russian composer\n  },\n  {\n    slug: \"nikolai_medtner\",\n    midis: [\n      \"medtner---2-skazki-op.20-no.1\",\n      \"medtner---6-skazki-op.-51-no.-6-fairy-tales\",\n    ],\n    composerBirthYear: 1880,\n    country: \"Russia\",\n    genre: \"Romantic\",\n  },\n  {\n    slug: \"mattias_hakulinen\",\n    midis: [\n      \"nickelodeon-all-star-brawl-menu-theme---mattias-hakulinen\",\n      \"irken-armada-invasion-zim-s-theme---mattias-hakulinen-and-pontus-askbrink\",\n      \"i-m-thinking---ittle-dew\",\n      \"that-cold-place-2nd-floor---ittle-dew\",\n      \"princess-remedy---shark-of-omen-shore\",\n    ],\n    composerBirthYear: 1976,\n    genre: \"Video Game Music\", // Composed for various video games\n    style: \"Electronic, Orchestral\", // A mix of electronic and orchestral music\n    country: \"Finland\", // Finnish composer\n  },\n  {\n    slug: \"james_newton_howard\",\n    midis: [\n      \"the-hunger-games-mockingjay-pt.-2-piano-suite\",\n      \"running-on-raindrops-from-raya-and-the-last-dragon---james-newton-howard\",\n    ],\n    composerBirthYear: 1951, // James Newton Howard (born 1951)\n    genre: \"Film Music\", // Famous for film scores\n    style: \"Orchestral, Cinematic\", // Orchestral and cinematic compositions for films\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"claude_morgan\",\n    midis: [\n      \"el-bimbo---claude-morgan\",\n      \"la-balanga\",\n      \"tchoo-tchoo-hold-on-the-line\",\n    ],\n    composerBirthYear: 1947,\n    genre: \"Pop\",\n    style: \"Pop\",\n    country: \"Tunisia\",\n  },\n  {\n    slug: \"vladimir_dashkevich\",\n    midis: [\n      \"rekviem-iz-k-f-sobache-serdce---vladimir-dashkevich\",\n      \"tam-na-nevedomyh-dorozhkah---v.-dashkevich\",\n      \"irene-adler-waltz----v.-dashkevich\",\n      \"marsh-krasnoarmeycev---vladimir-dashkevich-perelozhenie-dlya-fortepiano-i-golosa\",\n      \"uvertyura---v.-dashkevich\",\n      \"song-of-the-sea-pisnya-pro-more---v.-dashkevich\",\n      \"surovye-gody-uhodyat-iz-k-f-sobache-serdce---vladimir-dashkevich-yuriy-kim\",\n    ],\n    composerBirthYear: 1938, // Vladimir Dashkevich (19382019)\n    genre: \"Film Music\", // Known for composing film scores, particularly for Soviet films\n    style: \"Orchestral, Cinematic\", // His music is often cinematic and orchestral in style\n    country: \"Russia\", // Russian composer\n  },\n  {\n    slug: \"singles\",\n    midis: [\n      \"catherine-howard-s-fate---blackmore-s-night\",\n      \"moskau---dschinghis-khan-moskau\",\n    ],\n    // Not enough info to provide composerBirthYear, genre, style, and country\n  },\n  {\n    slug: \"anton_rubinstein\",\n    midis: [\n      \"melody-in-f-op.-3-no.-1---anton-rubinstein\",\n      \"morceau-d-anton-rubinstein-toreador-et-andalouse\",\n      \"melody-in-b-op.-3-no.-2---anton-rubinstein\",\n    ],\n    composerBirthYear: 1829, // Anton Rubinstein (18291894)\n    genre: \"Classical\", // Classical composer and pianist\n    style: \"Romantic\", // Romantic era composer\n    country: \"Russia\", // Russian composer\n  },\n  {\n    slug: \"russian_singles\",\n    midis: [\n      \"belym-snegom---muzyka-e-rodygina-belym-snegom---muzyka-e.-rodygina\",\n      \"beri_shinel-_poshli_domoy\",\n      \"i-hear-the-noise-of-birches...---konstantin-orbelyan\",\n    ],\n    composerBirthYear: 1950, // Konstantin Orbelyan was born in 1950\n    country: \"Russia\",\n  },\n  {\n    slug: \"fleur\",\n    midis: [\n      \"formalin-formalin---flyour\",\n      \"shelkopryad---flyour\",\n      \"teplye-koty---flyour\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Electronic\", // Based on the style of the artist\n    style: \"Ambient\", // Ambient electronic style\n    country: \"Russia\", // Assuming the artist is from Russia\n  },\n  {\n    slug: \"manisha_vremeni\",\n    midis: [\n      \"moy-drug---mashina-vremeni\",\n      \"odnazhdy-mir-prognetsya-pod-nas.\",\n      \"she-walks-through-life-a-smile-on-her-face----a.-makarevich\",\n    ],\n    composerBirthYear: 1949, // Andrei Makarevich (composer of Mashina Vremeni) was born in 1949\n    genre: \"Rock\", // Russian rock\n    style: \"Progressive Rock\", // Progressive elements in Mashina Vremeni\n    country: \"Russia\",\n  },\n  {\n    slug: \"melnitsa\",\n    midis: [\n      \"melnica---korolevna\",\n      \"melnica---doroga-sna\",\n      \"melnica----nevesta-poloza\",\n    ],\n    composerBirthYear: 1976,\n    genre: \"Folk Rock\", // Folk-rock style\n    style: \"Celtic Folk\", // Heavy influence of folk traditions\n    country: \"Russia\",\n  },\n  {\n    slug: \"igor_kornelyuk\",\n    midis: [\n      \"banditskiy-peterburg-gorod-kotorogo-net-fortepiano-a-town-that-does-not-exist\",\n      \"syuyita-mayster-ta-margarita---i.-kornelyuk\",\n    ],\n    composerBirthYear: 1961, // Igor Kornelyuk was born in 1961\n    genre: \"Classical\", // Mostly classical and cinematic music\n    style: \"Cinematic\", // Often composes for films and TV\n    country: \"Russia\",\n  },\n  {\n    slug: \"krematoriy\",\n    midis: [\"katmandu-polnaya-versiya\", \"musornyy-veter-gr.-krematoriy\"],\n    composerBirthYear: 1960,\n    genre: \"Rock\", // Russian rock\n    style: \"Post-punk\", // Post-punk and alternative rock elements\n    country: \"Russia\",\n  },\n  {\n    slug: \"wang_jian\",\n    midis: [\"fei-niao-he-chan-ren-ran\"],\n    composerBirthYear: 1973, // Wang Jian, a Chinese composer, born in 1973\n    genre: \"Classical\", // Chinese classical music\n    style: \"Traditional\", // Traditional Chinese music\n    country: \"China\",\n  },\n  {\n    slug: \"chinese_single_pieces\",\n    midis: [\n      \"spring-festival-overture-chun-jie-xu-qu---li-huan-zhi-piano-cover\",\n      \"cai-yun-zhui-yue-colorful-clouds-chasing-the-moon--piano-solo\", // ren guang\n    ],\n    genre: \"Classical\", // Classical Chinese music\n    style: \"Traditional\", // Traditional Chinese styles\n    country: \"China\",\n  },\n  {\n    slug: \"cornelius_gurlitt\",\n    midis: [\n      \"night-journey---cornelius-gurlitt\",\n      \"little-waltz---gurlitt-op.-205-no-10\",\n      \"gurlitt-cornelius---sonatina-in-a-minor-op.-76-no.-5-3rd-mvmt\",\n    ],\n    composerBirthYear: 1823, // Cornelius Gurlitt was born in 1823\n    genre: \"Classical\", // 19th-century German classical\n    style: \"Romantic\", // Romantic period style\n    country: \"Germany\",\n  },\n  {\n    slug: \"clara_schumann\",\n    midis: [\n      \"schumann-clara---lieder-op.12-no.4---liebst-du-um-schonheit\",\n      \"clara-schumann--notturno\",\n    ],\n    composerBirthYear: 1819, // Clara Schumann was born in 1819\n    genre: \"Classical\", // Classical, Romantic music\n    style: \"Romantic\", // Romantic period\n    country: \"Germany\",\n  },\n  {\n    slug: \"schumann\",\n    midis: [\n      \"schumann-carnaval---no.-12-chopin-piano-solo\",\n      \"schumann-kinderszenen-no.7-op.15--dreaming-traumerei\",\n      \"schumann-the-wild-horseman-op.-68-no.-8\",\n      \"r.-schumann---kinderszenen-no.-1-von-fremden-landern-und-menschen.\",\n    ],\n    composerBirthYear: 1810, // Robert Schumann was born in 1810\n    genre: \"Classical\", // Classical, Romantic music\n    style: \"Romantic\", // Romantic period\n    country: \"Germany\",\n  },\n  {\n    slug: \"norbert_schultze\",\n    midis: [\n      \"lili-marlene---norbert-schultz\",\n      \"von-finnland-bis-zum-schwarzen-meer\",\n      \"das-lied-vom-deutschen-u-boot-mann\",\n    ],\n    composerBirthYear: 1911, // Norbert Schultze was born in 1911\n    genre: \"Film Music\", // German film composer\n    style: \"Military\", // Often associated with wartime themes\n    country: \"Germany\",\n  },\n  {\n    slug: \"boban_markovic\",\n    midis: [\n      \"majstorski-cocek---boban-markovic\",\n      \"beli-dvor---boban-markovic\",\n      \"za-beograd---boban-markovic\",\n      \"zivot-cigana---boban-markovic\",\n      \"ciganin-kuca---boban-markovic\",\n    ],\n    composerBirthYear: 1964, // Boban Markovi was born in 1964\n    genre: \"Balkan Brass\", // Traditional Balkan brass\n    style: \"Balkan\", // Traditional Serbian brass band music\n    country: \"Serbia\",\n  },\n  {\n    slug: \"russian_folk\",\n    midis: [\n      \"vyydu-ya-na-ulicu---russkaya-narodnaya-pesnya-vyydu-ya-na-ulicu\",\n      \"poydu-l-ya-vyydu-l-ya-da.---russkaya-narodnaya\",\n      \"podgorka-russkaya-plyaska---narodnaya-plyasovaya-podgorka\",\n      \"ah-ty-nochenka.-russkaya-narodnaya-pesnya\",\n      \"kamarinskaya---russkaya-narodnaya-kamarinskaia\",\n      \"veselaya-kadril---russkaya-narodnaya-pesnya-folk-malenkaya-kadril\",\n      \"vo-lesochke-komarochkov-mnogo-urodilos---russkaya-narodnaya-pesnya\",\n    ],\n  },\n  {\n    slug: \"thomas_attwood\",\n    midis: [\n      \"allegro---first-movement-from-sonatina-no.-1-in-g-trinity-grade-2-piano\",\n    ],\n    composerBirthYear: 1765, // Thomas Attwood was born in 1765\n    genre: \"Classical\", // Classical period music\n    style: \"Classical\", // Classical style\n    country: \"United Kingdom\",\n  },\n  {\n    slug: \"nat_king_cole\",\n    midis: [\"nat-king-cole---easy-listening-blues-transcription\"],\n    composerBirthYear: 1919, // Nat King Cole was born in 1919\n    genre: \"Jazz\", // Jazz, Swing\n    style: \"Swing\", // Swing jazz style\n    country: \"USA\",\n  },\n  {\n    slug: \"martin_kratochwil\",\n    midis: [\n      \"potato-blues\",\n      \"sour-apple-blues\",\n      \"lonesome-broccoli-blues-_-easy-piano\",\n    ],\n    composerBirthYear: 1960,\n    genre: \"Blues\", // Blues music\n    style: \"Jazz Blues\", // Influences of jazz in blues\n    country: \"USA\", // Based on his genre\n  },\n  {\n    slug: \"hitoshi_sakimoto\",\n    midis: [\n      \"qiao-shang-nozhan-i-battle-on-the-bridge---final-fantasy-tactics-ps1---hitoshi-sakimoto\",\n      \"randam-waltz---final-fantasy-tactics-ps1---hitoshi-sakimoto\",\n    ],\n    composerBirthYear: 1969,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"glenn_stafford\",\n    midis: [\n      \"starcraft-2---wings-of-liberty---piano-solo\",\n      \"warcraft-2-human-1---by-glenn-stafford-arranged-by-gori-fater\",\n      \"warcraft-ii---orcs-betrayal\", // bvi in a functional context\n      \"brood-war-aria---glenn-stafford-and-neal-acree\",\n      \"warcraft-ii---humans-beyond-the-dark-portal\",\n      \"warcraft-2-intro---glenn-stafford\",\n      \"drustvar\",\n      \"grizzly-hills-wow\",\n      \"warcraft-iii---orc-theme-old-school-battle-net-theme\",\n    ],\n    composerBirthYear: 1969, // Glenn Stafford was born in 1969\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Cinematic\", // Often cinematic in nature\n    country: \"USA\",\n  },\n  {\n    slug: \"ludwig_goransson\",\n    midis: [\n      \"can-you-hear-the-music---ludwig-goransson-from-oppenheimer\",\n      \"the-book-of-boba-fett---main-title-theme---ludwig-goransson---piano-version\",\n      \"venom-theme\",\n      \"wakanda-forever-from-wakanda-forever---ludwig-goransson\",\n      \"main-theme---black-panther---ludwig-goransson---piano-solo\",\n      \"foils---ludwig-goransson-from-tenet\",\n      \"the-mandalorian---main-theme\",\n      \"greendale-is-where-i-belong---ludwig-goransson---community\",\n    ],\n    composerBirthYear: 1982, // Ludwig Gransson was born in 1982\n    genre: \"Film Music\", // Film music composer\n    style: \"Cinematic\", // Film score style\n    country: \"Sweden\",\n  },\n  {\n    slug: \"brian_tyler\",\n    midis: [\n      \"formula-1-theme---brian-tyler\",\n      \"peaches-from-super-mario-bros-movie-for-violin---brian-tyler-jack-blackman\",\n      \"theme-from-rambo-brian-tyler\",\n    ],\n    composerBirthYear: 1972, // Brian Tyler was born in 1972\n    genre: \"Film Music\", // Film music composer\n    style: \"Cinematic\", // Film score style\n    country: \"USA\",\n  },\n  {\n    slug: \"miki_higashino_sukoiden_2\",\n    midis: [\"reminiscence---suikoden-2\", \"two-rivers---suikoden-2\"],\n    composerBirthYear: 1960,\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Orchestral\", // Orchestral soundtrack\n    country: \"Japan\",\n  },\n  {\n    slug: \"rob_hubbard\",\n    midis: [\"monty-on-the-run\"],\n    composerBirthYear: 1955,\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Chiptune\", // Early video game music style\n    country: \"UK\",\n  },\n  {\n    slug: \"yoshinao_nakada\",\n    midis: [\"the-song-of-twilight---yoshinao-nakada\"],\n    composerBirthYear: 1923,\n  },\n  {\n    slug: \"tsukasa_saitoh\",\n    midis: [\"elden-ring-ost---the-final-battle---tsukasa-saitoh\"],\n  },\n\n  {\n    slug: \"jeremy_soule\",\n    midis: [\n      \"harry-potter-ii-game-main-menu---jeremy-soule\",\n      \"diagon-alley---jeremy-soule-from-harry-potter-and-the-chamber-of-secrets---solo-piano-arr.\",\n      \"happy-hogwarts-from-harry-potter-and-the-philosopher-s-stone\",\n      \"call-of-magic-nerevar-rising---the-elder-scrolls-morrowind-jeremy-soule\",\n      \"dragonborn---skyrim-theme-song-piano-solo\",\n      \"secunda-the-elder-scrolls-v-skyrim\",\n      \"fear-not-this-night-guild-wars-2-piano-version\",\n      \"guild-wars-2-trailer---jeremy-soule\",\n      \"guild-wars-factions-theme\",\n      \"ashford-abbey---jeremy-soule-guild-wars\",\n      \"overture-from-guild-wars-2\",\n    ],\n    composerBirthYear: 1975, // Jeremy Soule was born in 1975\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Cinematic\", // Often cinematic and orchestral\n    country: \"USA\",\n  },\n  {\n    slug: \"natalia_lafourcade\",\n    midis: [\"soledad-y-el-mar\", \"mi-tierra-veracruzana---natalia-lafourcade\"],\n    composerBirthYear: 1984,\n    genre: \"Pop\", // Latin pop\n    style: \"Folk\", // Latin folk influence\n    country: \"Mexico\", // Mexican artist\n  },\n  {\n    slug: \"inti-illimani\",\n    midis: [\n      \"el-pueblo-unido---inti-illimani\",\n      \"dolencias---inti-illimani-dolencias\",\n      \"huajra---inti-illimani\",\n    ],\n    composerBirthYear: 1942,\n    country: \"Chile\",\n  },\n  {\n    slug: \"handel\",\n    midis: [\n      \"minuet-from-music-for-the-royal-fireworks---georg-friedrich-handel\",\n      \"gavotte_in_g_major_hwv_491_handel_george_frideric\",\n      \"passacaglia---handel-halvorsen\",\n      \"water-music-suite-in-d-major-ii---alla-hornpipe-handel\",\n    ],\n    composerBirthYear: 1685, // Georg Friedrich Handel was born in 1685\n    genre: \"Classical\", // Baroque period\n    style: \"Baroque\", // Baroque style\n    country: \"Germany\",\n  },\n  {\n    slug: \"bo_burnham\",\n    midis: [\"welcome-to-the-internet---bo-burnham-s-inside\"],\n    composerBirthYear: 1990,\n    genre: \"Comedy\", // Comedy music and satire\n    style: \"Satirical\", // Satirical comedy\n    country: \"USA\",\n  },\n  {\n    slug: \"lin-manuel_miranda\",\n    midis: [\n      \"We_Dont_Talk_about_Bruno\",\n      \"waiting-on-a-miracle-from-encanto---lin-manuel-miranda\",\n      \"keep-the-beat---lin-manuel-miranda-keep-the-beat\",\n      \"surface-pressure-disney-s-encanto\",\n      \"surface-pressure---encanto\",\n      \"moana-lin-manuel-miranda---you-re-welcome-piano-solo\",\n      \"how-far-i-ll-go-~-moana-ost\",\n      \"dos-oruguitas---lin-manuel-miranda-by-adonay-guedes\",\n      \"where-you-are-from-moana---lin-manuel-miranda-where-you-are-easy\",\n      \"aaron-burr-sir\",\n      \"lauren-s-interlude\",\n      \"the-family-madrigal-from-encanto---lin-manuel-miranda-simplified-for-kids-beginners-piano\",\n    ],\n    composerBirthYear: 1980, // Lin-Manuel Miranda was born in 1980\n    genre: \"Musical Theatre\", // Musical theatre music\n    style: \"Broadway\", // Broadway-style musical compositions\n    country: \"USA\",\n  },\n  {\n    slug: \"three_part_harmony\",\n    midis: [\"yksin-op.29b-no.4---toivo-kuula\", \"ekialde-dantza\"],\n  },\n  {\n    slug: \"dario_marianelli\",\n    midis: [\n      \"Dawn_Pride_and_Prejudice\",\n      \"liz-on-top-of-the-world\",\n      \"your-hands-are-cold-from-pride-and-prejudice-2005-soundtrack\",\n      \"elegy-for-dunkirk---dario-marianelli\",\n    ],\n    composerBirthYear: 1963, // Dario Marianelli was born in 1963\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Orchestral\", // Marianelli is recognized for his orchestral and emotive compositions\n    country: \"Italy\", // Italian composer\n  },\n  { slug: \"robin_beanland\", midis: [\"bosun-bill---sea-of-thieves\"] },\n  {\n    slug: \"enya\",\n    midis: [\n      \"watermark-enya\",\n      \"caribbean-blue---enya\",\n      \"a-day-without-rain---enya\",\n      \"only-time---enya\",\n      \"shepherd-moons---enya\",\n      \"fairytale---enya\",\n    ],\n    composerBirthYear: 1961, // Enya was born in 1961\n    genre: \"New Age\", // Enya is a prominent artist in the New Age genre\n    style: \"Ambient, Celtic\", // Known for ambient and Celtic musical influences\n    country: \"Ireland\", // Enya is from Ireland\n  },\n  {\n    slug: \"charles_villiers_stanford\",\n    midis: [\n      \"stanford-charles-villiers---the-blue-bird\",\n      \"when-mary-thro-the-garden-went---charles-villiers-stanford\",\n    ],\n    composerBirthYear: 1852, // Born in 1852\n    genre: \"Classical\", // Stanford was a classical composer\n    style: \"Romantic\", // His work is typically associated with the Romantic era\n    country: \"United Kingdom\", // Stanford was English\n  },\n  {\n    slug: \"2002_band\",\n    midis: [\"suddenly-yours---2002-band\", \"we-meet-again---2002-band\"],\n    composerBirthYear: undefined, // No clear composer is associated with the band\n    genre: \"Pop\", // The 2002 band is known for pop music\n    style: \"Soft Pop\", // Their music has a soft pop style\n    country: \"South Korea\", // 2002 was a South Korean band\n  },\n  {\n    slug: \"lyle_mays\",\n    midis: [\"lyle-mays-chorinho-arr.-for-solo-piano\"],\n    composerBirthYear: 1949, // Born in 1949\n    genre: \"Jazz\", // Lyle Mays was a jazz composer and pianist\n    style: \"Jazz Fusion\", // Known for his fusion of jazz with other styles\n    country: \"USA\", // Lyle Mays was American\n  },\n  {\n    slug: \"poulenc\",\n    midis: [\"poulenc-melancolie-piano-solo\"],\n    composerBirthYear: 1899, // Born in 1899\n    genre: \"Classical\", // Poulenc was a classical composer\n    style: \"20th Century\", // His works are characterized by 20th-century classical music styles\n    country: \"France\", // Poulenc was French\n  },\n  {\n    slug: \"chinese\",\n    midis: [\"han-gong-chun-li-chun-ri---song-yu-ning\", \"shan-zhi-gao---song\"],\n    composerBirthYear: undefined, // The specific composer is unclear for these tracks\n    genre: \"Traditional Chinese\", // The music is traditional Chinese\n    style: \"Folk\", // Folk music style with traditional Chinese instruments\n    country: \"China\", // Likely from China, given the titles\n  },\n  {\n    slug: \"karel_svoboda\",\n    midis: [\n      \"drei-haselnusse-fur-aschenbrodel---karel-svoboda-by-jacroby\",\n      \"n-a-v-s-t-e-v-n-i-c-i\",\n    ],\n    composerBirthYear: 1938, // Born in 1938\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Orchestral\", // His film scores are typically orchestral\n    country: \"Czech Republic\", // Svoboda was Czech\n  },\n  {\n    slug: \"benjamin_wallfisch\",\n    midis: [\n      \"a-cure-for-wellness---benjamin-wallfisch\",\n      \"volmer-s-lab-a-cure-for-wellness\",\n      \"magnificent-isn-t-it-a-cure-for-wellness\",\n      \"blade-runner\",\n      \"we-can-fix-this-the-flash-movie.-2023-ost\",\n    ],\n    composerBirthYear: 1976, // Born in 1976\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Modern Orchestral\", // Modern orchestral style with electronic elements\n    country: \"United Kingdom\", // Benjamin Wallfisch is from the UK\n  },\n  {\n    slug: \"takashi_yoshimatsu\",\n    midis: [\n      \"waltz-of-rainbow-colored-roses---takashi-yoshimatsu\",\n      \"waltz-in-green---takashi-yoshimatsu-lu-nowarutu\",\n      \"velvet-waltz---takashi-yoshimatsu-berubetutowarutu\",\n\n      \"yoshimatsu---4-little-dream-songs-ii.-summer---distorted-waltz-on-august\",\n      \"pleiades-dances-book-2---takashi-yoshimatsu\",\n      \"yoshimatsu-waltz-in-obtuse-angle-from-pleiades-dances-ix\",\n      \"yoshimatsu---koo-s-waltz\",\n    ],\n    composerBirthYear: 1953,\n    country: \"Japan\",\n  },\n  {\n    slug: \"shinichi_osawa\",\n    midis: [\n      \"the-last-waltz---banana-fish\",\n      \"liberty---banana-fish\",\n      \"blue-bird---banana-fish\",\n    ],\n    composerBirthYear: 1967,\n    country: \"Japan\",\n  },\n  {\n    slug: \"john_kander\",\n    midis: [\"cabaret---john-kander-and-fred-ebb-bb-clarinet-and-piano\"],\n    composerBirthYear: 1927,\n    genre: \"Broadway\",\n    country: \"USA\",\n  },\n  {\n    slug: \"karol_szymanowski\",\n    midis: [\n      \"9-preludes-op.1---karol-szymanowski-9-preludes-op.-1-no.-1---karol-szymanowski\",\n      \"9-preludes-op.1---karol-szymanowski\",\n    ],\n    composerBirthYear: 1882,\n    style: \"Romantic\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"schubert\",\n    midis: [\n      \"marche-militaire---franz-schubert\",\n      \"moments_musicaux_d_780_no_3_in_f_minor\",\n      // \"moments_musicaux_d_780_op_94_no_3_franz_schubert\",\n      \"schubert-impromptu-op.-90-no.-4\",\n      \"serenade---schubert\",\n      \"schubert-liszt---standchen\",\n      \"schubert-waltz-in-b-minor-op.-18-no.-6-d.145\",\n      \"schubert-waltz-in-bb---d.783-op.-33-no.-7\",\n      \"schubert-waltz-in-a-minor-d.924-op.-91a-no.-9\",\n      \"waltz-ndeg-7---op.-18---d.145\",\n      \"36-original-dances-no.-27---franz-schubert\",\n      \"franz-schubert---waltz-in-d-flat-major-op.-9-no.-14\",\n      \"36-originaltanze-d.365---franz-schubert\",\n      \"12-graz-waltzes-ndeg3---schubert\",\n      \"franz-schubert---waltz-in-b-major-d.-145-nr2\",\n      // \"ecossaise-no-3-d.529---franz-schubert\",\n      \"schubert-ecossaise-no.-4-op-18-d.145\",\n      \"schubert-ecossaise-no-8-op-18-d.145\",\n      \"ecossaise-in-c-major-no-8-d.299---franz-schubert\",\n      \"schubert-german-dance-d.783-op.-33-no.-2\",\n      \"german-dance-and-ecossaise-d.643---franz-schubert\",\n      \"schubert---sonata-in-a-op.120-d.664-movement-i\",\n      \"ave-maria-d839---schubert---solo-piano-arrg.\",\n    ],\n    composerBirthYear: 1797,\n    genre: \"Classical\",\n    country: \"Austria\",\n  },\n  {\n    slug: \"germaine_tailleferre\",\n    midis: [\"pastorale---marcelle-taillefesse-germaine-tailleferre-1919\"],\n    composerBirthYear: 1892,\n    genre: \"Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"schubert_op9_d365\",\n    midis: [\n      \"wima.d719-schubert_atzenbrugger-tanz-d.365.30\",\n\n      \"wima.41cc-schubert_deut.tanz-d.820.3\",\n      \"wima.52f1-deut.tanz-d.820nr.6\",\n\n      // simple V I\n      // \"wima.7e1e-schubert_deut.tanz-d.365.09\",\n      \"schubert_d365_09\",\n      \"wima.e480-schubert_de.-tanz-d.365.25\",\n      \"wima.1124-schubert_de.-tanz-d.365.26\",\n      \"wima.4be9-schubert_de.-tanz-d.365.28\",\n\n      // voice-leading chromatic tones\n      \"wima.3fc1-schubert_deut.tanz-d.365.05\",\n      \"wima.c953-schubert_deut.tanz-d.365.07\",\n      \"wima.ae09-schubert_deut.tanz-d.365.10\",\n      \"wima.8229-schubert_deut.tanz-d.365.11\",\n\n      // minor\n      \"wima.01fa-schubert_deut.tanz-d.365.22\",\n      \"wima.738b-schubert_de.-tanz-d.365.27\",\n\n      // V/ii\n      \"wima.b3a9-schubert_deut.tanz-d.365.06\",\n      \"wima.30c1-schubert_deut.tanz-d.365.08\",\n      \"wima.7295-schubert_deut.tanzd365.19\",\n      \"wima.5ded-schubert_deut.tanzd365.15\",\n\n      // mix applieds\n      \"wima.d719-schubert_atzenbrugger-tanz-d.365.30\",\n      \"wima.8729-deut.tanz-d-365-nr.01\",\n      \"wima.3e58-schubert_deut.tanz-d.365.3\",\n      \"wima.0384-schubert_deut.tanzd365.16\",\n      \"wima.3306-schubert_deut.tanz-d.365.21\",\n      \"wima.5426-schubert_de.-tanz-d.365.23\",\n      \"wima.28fc-schubert_de.-tanz-d.365.24\", // reverse V/vi\n      \"wima.8469-schubert_deut.tanz-d.365.34\", // Ger\n      \"wima.a20b-schubert_deut.tanzd365.36\", // very chromatic\n\n      // subdominant\n      \"wima.dc1e-schubert_deut.tanzd365.12\", // ii65\n      \"wima.d5ac-schubert_deut.tanzd365.13\", // IV\n      \"wima.e3f7-schubert_deut.tanzd365.17\", // IV\n      \"wima.3657-schubert_deut.tanzd365.18\", // ii\n\n      // modulatory\n      \"wima.02f6-schubert_deut.tanz-d.365.33\",\n      \"wima.eac7-schubert_deut.tanzd365.14\",\n      \"wima.a880-schubert_deut.tanz-d.365.20\",\n      \"wima.67e3-schubert_deut.tanz-d.365.32\",\n      \"wima.7abe-schubert_deut.tanz-d.365.35\",\n    ],\n    composerBirthYear: 1797,\n    genre: \"Classical\",\n    country: \"Austria\",\n  },\n\n  {\n    slug: \"brad_mehldau\",\n    midis: [\"anthropology---brad-mehldau\"],\n    composerBirthYear: 1970,\n    genre: \"Jazz\",\n    style: \"Post-bop, Contemporary Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"aziza_mustafa_zadeh\",\n    midis: [\n      \"aziza_mustafa_zadeh_dance_of_fire_2010_live_trio\",\n      \"aziza_mustafa_zadeh_dance_of_fire_2010\",\n      \"aziza_mustafa_zadeh_dance_of_fire_nicola_morali_solo_piano_cover\",\n      \"always---aziza-mustafa-zadeh\",\n    ],\n    composerBirthYear: 1969, // Aziza Mustafa Zadeh was born in 1969\n    genre: \"Jazz\", // She is a jazz pianist and composer\n    style: \"Fusion, Avant-garde Jazz\", // Known for jazz fusion and avant-garde styles\n    country: \"Azerbaijan\", // Born in Baku, Azerbaijan\n  },\n  {\n    // https://musescore.com/user/24069/sets/5098783\n    slug: \"dvorak\",\n    midis: [\n      \"Symphony_No9_From_The_New_World_1st_movement_for_piano_solo_\",\n      \"Symphony_No9__From_The_New_World__2nd_movement\",\n      \"Symphony_No.9_From_The_New_World_3rd_movement_Scherzo\",\n      \"Symphony_No9_From_The_New_World_4th_movement__Z_Novho_Svta\",\n      \"antonin-dvorak-serenade-for-string-orchestra-in-e-major-op.22-ii.-tempo-di-valse\",\n    ],\n    composerBirthYear: 1841, // Antonn Dvok was born in 1841\n    genre: \"Classical\", // He was a classical composer\n    style: \"Romantic\", // Part of the Romantic movement\n    country: \"Czech Republic\", // Born in what is now the Czech Republic\n  },\n  {\n    // https://musescore.com/user/19710/sets\n    slug: \"beethoven\",\n    midis: [\n      \"sonatina_in_g_beethoven_anh_5_no_1_beethoven\",\n\n      \"beethoven-symphony-no.-5-1st-movement-piano-solo\",\n      \"beethoven---sonata-in-f-minor-op.2-no.1-movement-i\",\n      \"piano_sonata_no_3_in_c_major_op_2_no_3_ludwig_van_beethoven_piano_sonata_no_3_in_c_major_op_2_no_3_complete\",\n      \"beethoven_sonata_in_f_minor_op_2_no_1_movement_i\",\n      \"beethoven_sonate_5_1st\",\n      \"beethoven_sonata_8_pathetique_op_13_mov_1\",\n      \"beethoven_sonata_in_g_op_14_no_2_movement_i\",\n      \"beethoven_op_22_sonata_11_mov_1\",\n      \"Sonate_No._14_Moonlight_1st_Movement\",\n      \"moonlight_sonata_ludwig_van_beethoven_piano_solo\",\n      \"Sonate_No._14_Moonlight_3rd_Movement\",\n      \"sonate-no.-17-tempest-3rd-movement\",\n      \"sonate-no.-19-1st-movement\",\n      \"sonate-no.-19-2nd-movement\",\n\n      \"beethoven_trio_for_clarinet_cello_and_piano_no_4_op_11_2nd_movement\",\n      \"Fr_Elise\",\n\n      \"bagatelle_in_g_minor_op_119_no_1_ludwig_van_beethoven_16_07_1770_26_03_1827_piano_solo\",\n      \"beethoven---bagatelle-no.-4-in-a-major-op.-119\",\n      \"beethoven---bagatelle-in-a-minor-no.-9---op.-119\",\n      \"beethoven---bagatelle-in-a-major-no.-10---op.-119\",\n      \"bagatelle-op.-119.-no-2---ludwig-van-beethoven\",\n      \"bagatelle-op.119-no.5-beethoven\",\n    ],\n    composerBirthYear: 1770, // Ludwig van Beethoven was born in 1770\n    genre: \"Classical\", // Beethoven bridged the Classical and Romantic eras, but is primarily associated with Classical music\n    style: \"Romantic\", // Beethoven's later works, particularly from his middle period onward, are often considered Romantic\n    country: \"Germany\", // Beethoven was German (born in Bonn, which was part of Electorate of Cologne, now Germany)\n  },\n  {\n    slug: \"einaudi\",\n    midis: [\n      \"the_earth_prelude_ludovico_einaudi_piano_solo\",\n      \"ludovico-einaudi-una-mattina\",\n    ],\n    composerBirthYear: 1955, // Ludovico Einaudi was born in 1955\n    genre: \"Classical\", // Modern classical music\n    style: \"Minimalism, 21st Century Piano\", // Known for Minimalism and contemporary classical style\n    country: \"Italy\", // Born in Italy\n  },\n  {\n    slug: \"michel_petrucciani\",\n    midis: [\"home-1998-solo-live-transcription---michel-petrucciani\"],\n  },\n  {\n    slug: \"horo\",\n    midis: [\n      \"aytoska-rchenica---unknown-aitoska_rachenitsa\",\n      \"backovsko-horo\",\n      \"bakovsko-horo\",\n      \"bavno-horo\",\n      \"bistrica-kopanica\",\n      \"bistrishka-kopanica\",\n      \"bistrishka-kopanitsa\",\n      \"blagoevgradsko-horo\",\n      \"bregovsko-horo-1\",\n      \"bregovsko-horo-2\",\n      \"brestaska-racenica---misc-traditional-brestaska-racenica\",\n      \"bulcenska-racenica\",\n      \"bulchenska-rachenitsa\",\n      \"cecovoto-horo-9-8\",\n      \"celebinsko-horo\",\n      \"cerovska-kopanica\",\n      \"cesto-horo\",\n      \"cetvorno-horo\",\n      \"cetvorno-horo-2\",\n      \"cetvorno-horo-4\",\n      \"chetvorno-horo---sofia\",\n      \"chetvorno-shopsko-horo\",\n      \"chtvorno-horo---misc-traditional\",\n      \"daichovo-horo\",\n      \"daichovo-horo---viacheslav-semyonov\",\n      \"daichovo-horo-2\",\n      \"daichovo-horo-3\",\n      \"daichovo_horo_1\",\n      \"roumen-sirakov-s-daichevo\",\n      \"denjovo-horo\",\n      \"devetorka-samokovsko-horo\",\n      \"drjanovska-racenica-ii\",\n      \"dudino-horo---boris-karlov\",\n      \"dunavsko-horo---diko-iliev-diko-iliev\",\n      \"eleno-mome-elenino-horo\",\n      \"elenska-racenica\",\n      \"elenska-racenica---misc-traditional-elenska-racenica\",\n      \"gankino_horo\",\n      \"gankino_horo_traditionnel_bulgare\",\n      \"gjusevska-racenica\",\n      \"glavinishko-cetvorno\",\n      \"gr-uan-vcarsko-horo\",\n      \"gr-uan-vcarsko-horo-1\",\n      \"gr-uan-vcarsko-horo-2\",\n      \"hanukah-in-santa-monica---tom-lehrer-8bbe875464c17f6faa9a162192557cf1a17a257d-2\",\n      \"ivailovsko-horo-in-c\",\n      \"kemensko-horo\",\n      \"kojovo-horo\",\n      \"kolev-s-kopanitsa\",\n      \"koljovo-horo\",\n      \"konushenska-rchenica---konushenski-orkestr\",\n      \"kopanica\",\n      \"kopanitsa\",\n      \"kopanitsa-a-la-turka\",\n      \"krajdunavsko-horo\",\n      \"krivo-horo\",\n      \"krivo_sadovsko_horo\",\n      \"kulsko-horo\",\n      \"kulsko-horo-1\",\n      \"kulsko-horo-2\",\n      \"lazarsko-horo\",\n      \"lazarsko-horo-1\",\n      \"lomka-po-lomka-kasapsko-horo\",\n      \"malisevsko-horo\",\n      \"mihaiylovgradsko-horo\",\n      \"misino-horo\",\n      \"momino-horo\",\n      \"mr-zvonsky-s-kopanica\",\n      \"novoselsko-kopanica\",\n      \"paidushko-choro\",\n      \"paidushko-horo\",\n      \"paidushko-horo-2\",\n      \"paidusko-horo\",\n      \"pajdusko-horo\",\n      \"pamela-s-ruchenitsa\",\n      \"pasard-vzijska-kopanica\",\n      \"pernishka-rchenica---ibro-lolov\",\n      \"pravo-horo-version-2\",\n      \"rachenica-for-three\",\n      \"rachenitsa\",\n      \"rachenitsa-1\",\n      \"rachenitsa-2\",\n      \"radino-horo\",\n      \"radomirsko-horo\",\n      \"sandansko-horo\",\n      \"sandansko-horo-1\",\n      \"satovcensko-horo\",\n      \"serbian-racenica\",\n      \"severnyashka-racenica\",\n      \"seymour_blagoevgradsko_horo\",\n      \"seymour_cekurjankino_horo\",\n      \"seymour_drjanovska_rachenica\",\n      \"seymour_elenska_rachenica\",\n      \"seymour_gjusevska_rachenica\",\n      \"shopska-rachenitsa\",\n      \"sitno-krajdunavsko-horo\",\n      \"smeceno_horo\",\n      \"starceska-racenica\",\n      \"suleman-s-kopanitsa\",\n      \"svatbarska-racenica---bulgarien\",\n      \"svatbarska-rachenitsa\",\n      \"svornato-horo\",\n      \"traditional-music---petrunino-horo\",\n      \"traditional_music_plevensko_daichovo_horo\",\n      \"trakijska-rachenica\",\n      \"trakiyska-rchenica\",\n      \"varnensko-horo\",\n      \"vcekurjankino-horo\",\n      \"vcerkesko-horo-3\",\n      \"veselinovo-horo\",\n      \"veselinovo-horo-1\",\n      \"veselinovo-horo-2\",\n      \"veselinovo-horo-3\",\n      \"yareshko-horo\",\n      \"sandansko-oro\",\n      \"seymour_jambolsko_pajdushko\",\n      \"seymour_paidushko\",\n      \"seymour_pajdusko_oro\",\n      \"bavno-oro\",\n      \"dospatsko-oro---misc-tunes\",\n      \"gankino\",\n      \"gankino-2\",\n      \"kasapsko\",\n      \"maricensko\",\n      \"chetvorno_shopsko_fixed\",\n      \"daichovo-chara\",\n      \"daichovo-hora\",\n    ],\n    country: \"Bulgaria\",\n  },\n  {\n    slug: \"franz_xaver_gruber\",\n    midis: [\"stille-nacht-heilige-nacht-the-1818-original-silent-night\"],\n    composerBirthYear: 1787,\n    country: \"Austria\",\n    genre: \"Classical\",\n    style: \"Romantic\",\n  },\n  {\n    slug: \"r_bryan_anthony\",\n    midis: [\n      \"away-in-a-manger-by-william-j.-kirkpatrick-arranged-by-r-bryan-anthony\",\n      \"silent-night-holy-night-piano-solo---arranged-by-r-bryan-anthony\",\n    ],\n    composerBirthYear: 1980,\n    style: \"Modern Jazz\",\n  },\n  {\n    slug: \"ernest_shand\",\n    midis: [\n      \"andante-espressivo-op-60---shand-ernest\",\n      \"songes-d-ete-op-95---shand-ernest\",\n    ],\n    composerBirthYear: 1868,\n    genre: \"Classical Guitar\",\n    country: \"UK\",\n  },\n  {\n    slug: \"william_j_kirkpatrick\",\n    midis: [\n      \"away-in-a-manger-cradle-song\",\n      \"crown-him-with-many-crowns-kirkpatrick---wm.-j.-kirkpatrick\",\n    ],\n    composerBirthYear: 1838,\n    country: \"Ireland, USA\",\n    genre: \"Classical\",\n    style: \"Hymn\",\n  },\n  {\n    slug: \"franz_gordon\",\n    midis: [\n      \"the-french-library---franz-gordon\",\n      \"song-for-johanna---franz-gordon\",\n    ],\n  },\n  {\n    slug: \"kevin_kern\",\n    midis: [\n      // diatonic major\n      \"kevin-kern---through-the-arbor\",\n      \"remembering-the-light---kevin-kern\",\n      \"kevin-kern-the-silence-of-knowing\",\n      \"kevin-kern-through-your-eyes\",\n\n      // chromatic major\n      \"sundial-dreams---kevin-kern\",\n      \"the-enchanted-garden-kevin-kern\",\n      \"pastel-reflections---kevin-kern\",\n      \"always-near---kevin-kern\",\n      \"dance-of-the-dragonfly\",\n      \"endless-blue-sky---kevin-kern\",\n\n      // minor\n      \"pearls-of-joy---kevin-kern\",\n      \"fairy-wings---kevin-kern\",\n      \"the-winding-path---kevin-kern\",\n    ],\n    genre: \"New Age\",\n    composerBirthYear: 1958,\n  },\n  {\n    slug: \"tetris_theme_a\",\n    midis: [\n      \"tetris---ukulele\",\n      \"tetris-type-a\",\n      \"tetris-theme-korobeniki-easy-to-play\",\n      \"korobeiniki-simple\",\n      \"tetris-theme---impossible-piano\",\n      \"Tetris_Theme\",\n      \"Kyle_Landrys_Tetris_Theme_Variations_for_Piano_SoloKorobeiniki\",\n\n      \"tetris---very-accessible-arrangement-w-intermediate-options\",\n      \"tetris-theme-for-piano\",\n      \"tetris-theme\",\n      \"tetris-theme---epic-piano-arrangement\",\n      \"tetris-theme-a\",\n      \"tetris-theme---very-hard\",\n      \"tetris-duet-ukulele\",\n      \"tetris---theme-a---ukulele-tab\",\n      \"korobeiniki-tetris\",\n      \"tetris-ragtime\",\n      \"murican-tetris-.rag...\",\n      \"tetris---a-theme-with-variations\",\n      \"korobeiniki-tetris-theme\",\n      \"tetris-remix\",\n      \"tetris-medley\",\n    ],\n  },\n  {\n    slug: \"paul_de_senneville\",\n    midis: [\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n      \"ballade-pour-adeline---richard-clayderman\",\n      \"moon-tango---r.-clayderman\",\n      \"les-fleurs-sauvages---richard-clayderman\",\n      \"souvenirs-d-enfance---richard-clayderman\",\n      \"concerto-des-etoiles---richard-clayderman\",\n      \"a-comme-amour-by-paul-de-senneville-arranged-richard-clayderman-for-piano\",\n      \"nostalgy-by-olivier-toussaint-arranged-richard-clayderman-for-piano\",\n      \"jardin-secret-by-paul-de-senneville-arranged-richard-clayderman-for-piano\",\n      \"lyphard-melody---richard-clayderman\",\n      \"dolannes-melody--richard-clayderman\",\n      \"les-premiers-sourires-de-vanessa-by-richard-clayderman-for-piano\",\n      \"coeur-fragile\",\n      \"lettre-a-ma-mere\",\n      \"coup-de-coeur-coup-de-coeur-serenade-de-l-etoile--richard-clayderman\",\n      \"les-oiseaux-tristes-du-zuiderzee\",\n      \"triste-coeur\",\n      \"concerto-pour-une-jeune-fille-nommee-je-t-aime\",\n      \"la-fuite-du-temps-by-richard-clayderman-for-piano\",\n      \"hungarian-sonata---paul-de-senneville\",\n      \"voyage-a-venice---richard-clayderman\",\n      \"couleur-tendresse\",\n      \"revivre-sa-vie--richard-clayderman\",\n      \"eden-is-a-magic-world---paul-de-senneville-and-oliver-toussaint\",\n      \"promenade-dans-les-bois\",\n      \"murmures-murmullos\",\n      \"concerto-la-madrague----paul-de-senneville-jean-baudlot\",\n      \"le-deuxieme-slow----paul-de-senneville-jean-baudlot\",\n      \"eleana\",\n    ],\n    composerBirthYear: 1933,\n    genre: \"Easy Listening, Intrumental Pop\", // Known for his romantic and easy-listening style\n    country: \"France\", // Born in Paris, France\n  },\n  {\n    slug: \"marc_streitenfeld\",\n    midis: [\n      \"honoring-the-dead---marc-streitenfeld\",\n      \"american-gangster-frank-lucas---marc-streitenfeld\",\n      \"the-grey\",\n    ],\n    composerBirthYear: 1968, // Marc Streitenfeld was born in 1968\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Orchestral, Cinematic\", // His style is orchestral and cinematic\n    country: \"Germany\", // Born in Frankfurt, Germany\n  },\n  {\n    slug: \"brian_eno\",\n    midis: [\n      \"music_for_airports_1_1-eno\",\n      \"by-this-river---brian-eno\",\n      \"harold-budd-brian-eno---not-yet-remembered\",\n      \"blonde-by-roger-and-brian-eno\",\n    ],\n    composerBirthYear: 1948, // Brian Eno was born in 1948\n    genre: \"Ambient, Electronic\", // Known for ambient and electronic music\n    style: \"Ambient, Experimental\", // Pioneer of ambient music and experimental sound\n    country: \"UK\", // Born in England\n  },\n  {\n    slug: \"campyfire\",\n    midis: [\"greed---campyfire\", \"nut-cracker-march---arsenal-emote-music\"],\n    composerBirthYear: undefined, // Birth year not available\n    genre: \"Electronic\", // Electronic music\n    style: \"Chiptune, Lo-fi\", // Lo-fi and chiptune elements are present in their music\n    country: undefined, // Country not available\n  },\n  {\n    slug: \"gabriele_traietti\",\n    midis: [\"a-trip-to-rapture-i-in-the-bathysphere\"],\n    composerBirthYear: undefined, // Birth year not available\n    genre: \"Electronic\", // Likely an electronic artist based on the music\n    style: \"Ambient, Soundtrack\", // The track suggests a cinematic and ambient style\n    country: undefined, // Country not available\n  },\n  {\n    slug: \"lofi\",\n    midis: [\"cool-lofi-hip-hop-song\"],\n    composerBirthYear: undefined, // No specific birth year for this genre\n    genre: \"Lo-fi Hip Hop\", // The genre is lo-fi hip hop\n    style: \"Chill, Instrumental\", // Lo-fi is typically chill and instrumental\n    country: undefined, // Country not available\n  },\n  {\n    slug: \"horace_silver\",\n    midis: [\"song-for-my-father---horace-silver\"],\n    composerBirthYear: 1928, // Horace Silver was born in 1928\n    genre: \"Jazz\", // A legendary jazz pianist and composer\n    style: \"Hard Bop\", // Known for the hard bop style of jazz\n    country: \"USA\", // Born in the United States\n  },\n  {\n    slug: \"mulatu_astatke\",\n    midis: [\"yekermo_sew_-_mulatu_astatke-no-acc\"],\n    composerBirthYear: 1943, // Mulatu Astatke was born in 1943\n    genre: \"Jazz, Ethio-jazz\", // Known for Ethio-jazz, a fusion of jazz and traditional Ethiopian music\n    style: \"Fusion, Ethio-jazz\", // Pioneer of Ethio-jazz\n    country: \"Ethiopia\", // Born in Addis Ababa, Ethiopia\n  },\n  {\n    slug: \"kanye_west\",\n    midis: [\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n      \"kanye-west-homecoming-piano-cover\",\n    ],\n    composerBirthYear: 1977,\n    genre: \"Hip-hop\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ramin_djawadi\",\n    midis: [\n      // \"Game_of_Thrones_Easy_piano\",\n      \"game-of-thrones-main-piano\",\n      \"light-of-the-seven---ramin-djawadi-complete-transcription\",\n      \"the-night-king---ramin-djawadi\",\n      \"ramin-djawadi---a-lannister-always-pays-his-debts-piano\",\n    ],\n    composerBirthYear: 1973, // Ramin Djawadi was born in 1973\n    genre: \"Film Score, Classical\", // Known for his film scores\n    style: \"Orchestral, Cinematic\", // Orchestral and cinematic style, particularly in soundtracks\n    country: \"Germany\", // Born in Germany\n  },\n  {\n    slug: \"vivaldi\",\n    midis: [\n      \"vivaldi---summer---piano\",\n      \"vivaldi---winter-rousseau-version-original\",\n    ],\n    composerBirthYear: 1678,\n    genre: \"Classical\",\n    style: \"Baroque\",\n    country: \"Italy\",\n  },\n  {\n    slug: \"coldplay\",\n    midis: [\n      \"Viva_La_Vida_Coldplay\",\n      \"the-scientist---coldplay-piano-arrangement\",\n      \"clocks---coldplay\",\n      \"fix-you---coldplay\",\n    ],\n    composerBirthYear: 1977,\n    genre: \"Pop, Pop Rock, Alternative Rock\",\n    country: \"UK\",\n  },\n  {\n    slug: \"brad_breeck\",\n    midis: [\n      \"Gravity_Falls_Opening\",\n      \"gravity-falls-theme-easy-piano-version-digital-sheet-music\",\n      \"gravity-falls---weirdmageddon-theme\",\n      \"eda-s-requiem---brad-breeck-piano\",\n      \"we-ll-meet-again---gravity-falls\",\n    ],\n    composerBirthYear: 1978,\n    genre: \"Animation\",\n    country: \"USA\",\n  },\n  {\n    slug: \"bruno_mars\",\n    midis: [\n      \"when-i-was-your-man---bruno-mars-600e3a\",\n      \"bruno-mars-leave-the-door-open\",\n      \"die-with-a-smile---lady-gaga-bruno-mars\",\n    ],\n    composerBirthYear: 1985,\n    genre: \"Pop\",\n    country: \"USA\",\n  },\n  {\n    slug: \"luo_ni\",\n    midis: [\n      \"g-minor-bach-original\",\n      \"crazy-pharaoh\",\n      \"miss-fox-piano-tiles-2\",\n      \"childhood-piano-tiles-2\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Music Game\",\n    country: \"China\",\n  },\n  {\n    slug: \"congfei_wei\",\n    midis: [\n      \"bluestone-alley-piano-tiles-2\",\n      \"aurora---congfei-wei-piano-tiles-2\",\n      \"monochrome-filter\",\n      \"don-t-be-shy---congfei-wei-from-pocket-3d-world\",\n      \"ji-mu-sen-lin-forest-of-blocks---wei-cong-fei-congfei-wei\",\n    ],\n    composerBirthYear: 1992,\n    genre: \"Video Game Music\",\n    country: \"China\",\n  },\n  {\n    slug: \"toshifumi_hinata\",\n    midis: [\n      \"reflections---ri-xiang-min-wen-toshifumi-hinata\",\n      \"menuet---toshifumi-hinata-piano-and-violin-duet\",\n      \"epilogue---toshifumi-hinata\",\n      \"sarah-menuet---toshifumi-hinata-from-sarah-s-crime\",\n    ],\n    composerBirthYear: 1955,\n    country: \"Japan\",\n  },\n  {\n    slug: \"syml\",\n    midis: [\n      \"i-wanted-to-leave---syml\",\n      \"bright-as-ever---syml\",\n      \"wildfire---syml\",\n    ],\n  },\n  {\n    slug: \"laura_shigihara\",\n    midis: [\n      \"plants-vs-zombies-grasswalk\",\n      \"crazy-dave-intro-theme---laura-shigihara-from-plants-vs.-zombies\",\n      \"loonboon---laura-shigihara-arranged-by-piano-keyng\",\n      \"moongrains---laura-shigihara\",\n      \"plants-vs-zombies---watery-graves\",\n      \"to-the-moon-for-river-johnny-s-version-48aa2a\",\n\n      \"yours-rakuen-by-laura-shgihara\", // vocal\n      \"morizora-s-cave-rakuen\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Music Game\",\n    country: \"US, Japan\",\n  },\n  {\n    slug: \"yosuke_yamashita\",\n    midis: [\n      \"never-ending-saga---yosuke-yamashita\",\n      \"hikari-e---franchouchou-hikari-e---yosuke-yamashita-zombieland-saga\",\n      \"ookami-blues-tv-size---seton-academy-ed\",\n    ],\n    country: \"Japan\",\n  },\n  {\n    slug: \"christopher_larkin\",\n    midis: [\n      \"hollow-knight-main-theme---christopher-larkin\",\n      \"greenpath---christopher-larkin\",\n      \"sealed-vessel---christopher-larkin\",\n      \"the-grimm-troupe---christopher-larkin\",\n      \"soul-sanctum---christopher-larkin\",\n      \"crossroads---christopher-larkin-hollow-knight\",\n      \"dirtmouth---christopher-larkin-hollow-knight-7e5846\",\n      \"hive-knight---christopher-larkin-hive-knight---christopher-larkin\",\n      \"broken-vessel---christopher-larkin---theme-from-hollow-knight-for-piano\",\n    ],\n    composerBirthYear: 1992,\n    genre: \"Video Game Music\",\n    country: \"Australia\",\n  },\n  {\n    slug: \"jose_asuncion_flores\",\n    midis: [\n      \"panambi-vera---manuel-ortiz-guerrero-y-jose-asuncion-flores\",\n      \"nde-rendape-aju-jose-a-suncion-flores-manuel-ortiz-guerrero\",\n    ],\n    composerBirthYear: 1904,\n    genre: \"Guarania\",\n    country: \"Paraguay\",\n  },\n  { slug: \"norihiro_tsuru\", midis: [\"norihiro-tsuru---last-carnival\"] },\n  {\n    slug: \"fujii_kaze\",\n    midis: [\n      \"shinunoga-e-wa---fujii-kaze-si-nunogaiiwa\",\n      \"matsuri---fujii-kaze\",\n    ],\n    country: \"Japan\",\n    genre: \"J-Pop\",\n    composerBirthYear: 1997,\n  },\n  {\n    slug: \"kazumi_totaka\",\n    midis: [\n      \"mii-channel-piano\",\n      \"wii-sports-theme-piano\",\n      \"main-theme---animal-crossing-new-horizons\",\n    ],\n    composerBirthYear: 1967,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"hirokazu_tanaka\",\n    midis: [\n      \"overworld-from-kid-icarus---hirokazu-tanaka\",\n      \"adobansuadobentiya-pokemon-ag-japanese-op1-piano---hirokazu-tanaka\",\n    ],\n    composerBirthYear: 1957,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"tony_ann\",\n    midis: [\n      \"icarus---tony-ann\",\n      \"experience-flows-in-you---tony-ann\",\n      \"rain---tony-ann\",\n      \"my-neighbour-s-car-alarm\",\n    ],\n  },\n  {\n    slug: \"kohei_tanaka\",\n    midis: [\n      \"one-piece---bink-s-sake---kohei-tanaka\",\n      \"overtaken---kohei-tanaka-overtaken-one-piece---kohei-tanaka\",\n      \"if-you-live-one-piece-ost-bgm---kohei-tanaka-maranoch\",\n    ],\n    composerBirthYear: 1954,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"hidenori_maezawa\",\n    midis: [\n      \"prelude---castlevania-iii\",\n      \"aquarius---castlevania-iii-dracula-s-curse\",\n      \"alien-lair\",\n      \"stage-1-jungle\",\n    ],\n    composerBirthYear: 1958,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"koji_kondo\",\n    midis: [\n      \"legend-of-zelda-main-theme-score\",\n      \"Legend_of_Zelda_Great_Fairy_Fountain\",\n      \"Super_Mario_Bros_Main_Theme\",\n      \"Zeldas_Lullaby\",\n      \"ocarina-of-time-lost-woods-piano\",\n      \"gerudo-valley\",\n      \"super-mario-galaxy---rosalina-in-the-observatory---piano\",\n      \"super-mario-world-athletic-theme\",\n      \"yoshi-s-island---athletic-theme\",\n    ],\n    composerBirthYear: 1961,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"imagine_dragons\",\n    midis: [\"demons-imagine-dragons\", \"Believer_-_Imagine_Dragons\"],\n    composerBirthYear: 1984,\n    country: \"USA\",\n    genre: \"Rock\",\n  },\n  { slug: \"adele\", midis: [\"someone-like-you\", \"easy-on-me---adele\"] },\n  {\n    slug: \"parov_stelar\",\n    midis: [\n      \"booty-swing---parov-stelar\",\n      \"chambermaid-swing---parov-stelar---piano-notes\",\n      \"catgroove-piano-solo\",\n      \"all-night\",\n      \"mojo-radio-gang---parov-stelar-parov-stelar---mojo-radio-gang-all-piano\",\n    ],\n  },\n  {\n    slug: \"hans_zimmer\",\n    midis: [\n      \"Interstellar\",\n      \"molossus---batman-begins\",\n      \"eptesicus---batman-begins\",\n      \"antrozous---batman-begins\",\n      \"tennessee-piano---in-c-major-a-minor\",\n    ],\n  },\n  { slug: \"chris_allen\", midis: [\"nurture-piano---in-eb-major-c-minor\"] },\n  { slug: \"bo_en\", midis: [\"bo-en---my-time\", \"tussle-among-trees---bo-en\"] },\n  {\n    slug: \"pedro_silva\",\n    midis: [\n      \"Omori_Duet\",\n      \"omori---gator-gambol---ost-no.-103---pedro-silva\",\n      \"omori---sugar-star-planetarium---ost-no.-21---pedro-silva\",\n      \"by-your-side.---omori\",\n      \"omori-ost---006---let-s-get-together-now---pedro-silva\",\n    ],\n  },\n  {\n    slug: \"toshio_masuda\",\n    midis: [\n      \"sadness-and-sorrow-for-piano-solo\",\n      \"afternoon-of-konoha---toshio-masuda\",\n      \"tenten-s-theme---naruto\",\n      \"the-raising-fighting-spirit---toshio-masuda---jarvis-phan\",\n      \"gaara-s-childhood-theme---toshio-masuda\",\n    ],\n  },\n  {\n    slug: \"go_ichinose\",\n    midis: [\n      \"littleroot-town---pokemon-oras-for-piano\",\n      \"national-park---pokemon-gold-silver-junichi-masuda-go-inchinose-transcribed-by-onakaru\",\n    ],\n  },\n  {\n    slug: \"brian_crain\",\n    midis: [\n      \"song-for-sienna\",\n      \"butterfly-waltz---brian-crain\",\n      \"at-the-ivy-gate---brian-crain\",\n      \"dream-of-flying---brian-crain\",\n      \"wind---brian-crain-piano-and-violin-duet-please-see-videoscore\",\n      \"dream-of-dreams---brian-crain\",\n    ],\n  },\n  {\n    slug: \"dan_salvato\",\n    midis: [\n      \"doki-doki-literature-club-ost---your-reality\",\n      \"okay-everyone---dan-salvato-okay-everyone\",\n      \"my-confession---dan-salvato-my-confession-ddlc\",\n      \"ohayou-sayori---dan-salvato-ohayou-sayori-ddlc\",\n      \"play-with-me---dan-salvato---doki-doki-literature-club\",\n      \"i-still-love-you\",\n      \"poem-panic---ddlc\",\n      \"daijoubu---doki-doki-literature-club\",\n      \"my-feelings\",\n      \"dreams-of-love-and-literature\",\n      \"my-song-your-note-piano---dan-salvato\",\n\n      \"your-obnoxious-reality---your-reality-but-sadder\", // this piece does not exist!\n    ],\n  },\n  {\n    slug: \"requiem_for_a_dream\",\n    midis: [\n      \"requiem-for-a-dream-easy\",\n      \"requiem-for-a-dream-easy-version\",\n      \"Requiem_for_a_Dream\",\n      \"dying-dream-arrangement-by-reik\",\n\n      \"lux-aeterna---clint-mansell-my-arrangment-of-requiem-of-a-dream\",\n      \"requiem-for-a-dream-4hands-v1\",\n      \"requiem-for-a-dream-very-difficult\",\n    ],\n  },\n  {\n    slug: \"clint_mansell\",\n    midis: [\n      \"Requiem_for_a_Dream\",\n      \"dying-dream-arrangement-by-reik\",\n      \"the-last-man-by-clint-mansell\",\n      \"leaving-earth---mass-effect-3\",\n      \"first-sleep---clint-mansell\",\n      \"memories-someone-we-ll-never-know\",\n    ],\n  },\n  {\n    slug: \"yanni\",\n    midis: [\n      \"yanni---one-man-s-dream\",\n      \"nostalgia---yanni-live-at-the-acropolis-live-the-symphony-concerts-1993\",\n      \"marching-season-yanni-piano-solo\",\n    ],\n    similarTo: [\"paul_de_senneville\"],\n    composerBirthYear: 1954,\n    country: \"Greece\",\n  },\n  {\n    slug: \"yann_tiersen\",\n    midis: [\n      \"Yann_Tiersen_Amelie\",\n      \"rue-des-cascades---yann-tiersen\",\n      \"tiersen-yann----j-y-suis-jamais-alle\",\n      \"les-jours-triste\",\n      \"la-valse-d-amelie-piano\",\n      \"la-noyee---yann-tiersen-la-noyee\",\n      \"a-quai---yann-tiersen\",\n      \"le-moulin---yann-tiersen\",\n      \"la-dispute---yann-tiersen\",\n      \"l-autre-valse-d-amelie---yann-tiersen-l-autre-valse-d-amelie\",\n    ],\n    composerBirthYear: 1970,\n  },\n  {\n    slug: \"michael_giacchino\",\n    midis: [\n      \"Disney_Pixar_Up_Theme\",\n      \"imperial-suite---michael-giacchino-~piano~\",\n      \"catwoman---michael-giacchino\",\n      \"ratatouille-main-theme---michael-giacchino\",\n      \"spider-man-far-from-home-suite---michael-giacchino-piano-arrangement\",\n    ],\n  },\n  {\n    slug: \"fkj\",\n    midis: [\n      \"fee-just-piano-version---fkj\",\n      \"meeting-again-in-the-void-just-piano-version---fkj\",\n      \"sundays-just-piano-version---fkj---fkj\",\n      \"tui---fkj-tui\",\n      \"last-hour-just-piano-version---fkj\",\n      \"does-it-exist---fkj\",\n      \"ylang-ylang---fkj-transcribed-by-lilroo\",\n      \"10-years-ago---fkj\",\n      \"pe---fkj\",\n    ],\n    genre: \"Lofi\",\n    composerBirthYear: 1990,\n    country: \"France\",\n  },\n  {\n    slug: \"benny_goodman\",\n    midis: [\"sing-sing-sing-1938-carnegie-hall-piano-transcription\"],\n  },\n  {\n    slug: \"mac_miller\",\n    midis: [\n      \"congratulations---mac-miller\",\n      \"good-news---mac-miller---easy-piano\",\n      \"come-back-to-earth-by-mac-miller\",\n      \"circles---mac-miller\",\n      \"everybody---mac-miller-medium-piano\",\n      \"once-a-day---mac-miller\",\n    ],\n    country: \"USA\",\n    composerBirthYear: 1992,\n  },\n  {\n    slug: \"yasuharu_takanashi\",\n    midis: [\n      \"fairy-tail-main-theme\",\n      \"fairy-tail-ost---natsu-theme\",\n      \"fairy-tail--past-story\",\n      \"fairy-tail---mirajane-no-theme---yasuharu-takanashi-fairy-tail---mirajane-no-theme---yasuharu-takanashi-mira-s-theme\",\n      \"fairy-tail-sad-theme\",\n      \"dragon-slayer---fairy-tail\",\n      \"fairy-tail-opening-14---fairy-tail-yakusoku-no-hi\",\n    ],\n    country: \"Japan\",\n    composerBirthYear: 1963,\n  },\n  {\n    slug: \"taro_umebayashi\",\n    midis: [\n      \"yuri-on-ice---piano-theme-full\",\n      \"minako-s-mood-choose-your-costume---taro-umebayashi-yuri-on-ice\",\n      \"serenade-for-two-from-yuri-on-ice\",\n    ],\n    composerBirthYear: 1980,\n    country: \"Japan\",\n  },\n  { slug: \"jojomk2\", midis: [\"canon-in-c-jazz-piano-duets\"] },\n  {\n    slug: \"hayato_sumino\",\n    midis: [\n      \"new-birth-tai-dong---hayato-sumino-cateen\",\n      \"let-the-battles-begin-those-who-fight-cateen-version---final-fantasy-vii\",\n    ],\n  },\n  {\n    slug: \"yugo_kanno\",\n    midis: [\n      \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\",\n      \"jolyne-s-theme---yugo-kanno---stone-ocean-piano-solo\",\n      \"jotaro-s-theme---yugo-kanno-blue-devils-2023-marimba---jojo-s-bizarre-adventure\",\n      \"killer-yoshikage-kira-s-theme---jojo-s-bizarre-adventure-part-4-diamond-is-unbreakable---yugo-kanno-quiet-life\",\n      \"josuke-s-theme-for-piano-breakdown\",\n      \"pucci-theme---yugo-kanno-pale-snake-from-jojo-stone-ocean\",\n    ],\n    composerBirthYear: 1977,\n    country: \"Japan\",\n  },\n  {\n    slug: \"jule_styne\",\n    midis: [\n      \"it-s-been-a-long-long-time---harry-james\",\n      \"let-it-snow---jule-styne\",\n      \"people---jule-styne\",\n      \"cornet-man---bob-merrill\",\n    ],\n    composerBirthYear: 1905,\n    country: \"USA\",\n    genre: \"Broadway\",\n  },\n  {\n    slug: \"takahiro_obata\",\n    midis: [\n      \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\",\n      \"norman-s-theme-22194\",\n      \"emma-s-sorrow---the-promised-neverland\",\n      \"krone-on-the-gf-string\",\n      \"shoshimin-ost---main-theme---takahiro-obata\",\n    ],\n  },\n  {\n    slug: \"emin_sabitoglu\",\n    midis: [\"ols-m...-bagisla-1989---emin-sabitoglu\"],\n    composerBirthYear: 1937,\n    country: \"Azerbaijan\",\n    similarTo: [\"elza_ibrahimova\"],\n  },\n  {\n    slug: \"mdk\",\n    midis: [\n      \"fingerbang---mdk-mdk---fingerbang-piano-solo\",\n      \"dash---mdk\",\n      \"interlaced---mdk\",\n      \"dash-destroyer---mdk\",\n      \"fingerdash\",\n      \"space-invaders---teminite-mdk\",\n      \"press-start\",\n    ],\n  },\n  {\n    slug: \"yim_josef\",\n    midis: [\n      \"jim-yosef-link\",\n      \"jim-yosef--firefly\",\n      \"animal---jim-yosef\",\n      \"jim-yosef--eclipse-ncs-release\",\n    ],\n  },\n  {\n    slug: \"bella_ciao\",\n    midis: [\n      \"bella-ciao---sad-and-slow-piano-version-arranged-by-rafal-piwowarczuk-la-casa-de-papel\",\n      \"Bella_Ciao\",\n    ],\n  },\n  {\n    slug: \"pedro_tintorer\",\n    midis: [\n      \"matilde---tintorer-pedro\",\n      \"i-que-place\",\n      \"i-que-gusto\",\n      \"neguita\",\n      \"panchita\",\n    ],\n    genre: \"Habanera\",\n  },\n  {\n    slug: \"danny_baranowsky\",\n    midis: [\n      \"c.h.a.d.-s-lullaby---super-meat-boy\",\n      \"betus-blues---super-meat-boy-hospital-light-world-theme\",\n      \"forest-funk-retro---super-meat-boy\",\n    ],\n  },\n  {\n    slug: \"yehezkel_raz\",\n    midis: [\n      \"ballerina---yehezkel-raz\",\n      \"laniakea---yehezkel-raz\", // does not exist\n      \"carousel---yehezkel-raz\", // it's called laniakea on youtube\n      \"continuance---yehezkel-raz\",\n      \"slowly-understanding---yehezkel-raz\",\n      \"breath-in---yehezkel-raz\",\n      \"breath-out---yehezkel-raz\",\n      \"after-you-came---yehezkel-raz\",\n      \"before-you-left---yehezkel-raz\", // does not exist\n      \"closing-time---yehezkel-raz\",\n      \"milestone---yehezkel-raz\",\n      \"early-morning-haze---yehezkel-raz\",\n      \"komorebi-piano-solo-version---yehezkel-raz-andrea-vanzo\",\n    ],\n    similarTo: [\"andrea_vanzo\"],\n  },\n  {\n    slug: \"penta_hexa\",\n    midis: [\n      \"night-train---philip-glass-arr.-for-solo-piano\",\n      \"philip-glass---floe\",\n      \"team-fortress-2-main-theme---mike-morasky-team-fortress-2-piano-solo\",\n      \"tf2---mannrobics---piano\",\n      \"prelude-etnika---piano-transcription\",\n      \"dry-hands-minecraft\",\n      \"minecraft-title\",\n      \"shake-it-off---taylor-swift\",\n      \"burundi-national-anthem\",\n      \"saren-kowga-jowxtm-goc\",\n      \"yar-jan-ari---komitas-vardapet\",\n      \"target-renegade-main-theme---gari-biasillo\",\n      \"e.ben-tian-e.honda-japan---sutoritohuaitaii-street-fighter-ii-ac---yoko-shimomura\",\n      \"icelandic-dance-op.-11-no.-1---jon-leifs\",\n      \"feather---nujabes\",\n      \"magdalene---akira-yamaoka\",\n      \"boogie-woogie-waltz-zawinul-leadsheet\",\n      \"roberto-cacciapaglia---tema-celeste\",\n      \"flowing---borrtex\",\n      \"triage-at-dawn\",\n      \"something-secret-steers-us\",\n      \"take-me-somewhere-nice---mogwai\",\n      \"backovsko-horo\",\n      \"bakovsko-horo\",\n      \"chetvorno-shopsko-horo\",\n      \"denjovo-horo\",\n      \"glavinishko-cetvorno\",\n      \"seymour_jambolsko_pajdushko\",\n      \"kasapsko\",\n      \"yekermo_sew_-_mulatu_astatke-no-acc\",\n      \"i-still-love-you\",\n      \"laniakea---yehezkel-raz\",\n      \"carousel---yehezkel-raz\",\n      \"continuance---yehezkel-raz\",\n      \"breath-in---yehezkel-raz\",\n      \"breath-out---yehezkel-raz\",\n      \"after-you-came---yehezkel-raz\",\n      \"early-morning-haze---yehezkel-raz\",\n      \"still-dre---variation-composition\",\n      \"stranger-things-theme\",\n      \"kids---kyle-dixon-michael-stein-stranger-things---arranged-by-nana\",\n      \"Alice_DJ_Better_Off_Alone\",\n      \"Johnny_Cash_Hurt\",\n      \"etude-op.-10-no.-5-black-keys-pentatonic-arrangement\",\n      \"pyos\",\n      \"steve-reich---piano-phase\",\n      \"tipichnaya_vecherinka_s_basseynom\",\n    ],\n  },\n  {\n    slug: \"masaru_yokoyama\",\n    midis: [\n      \"my-lie-watashi-no-uso---your-lie-in-april\",\n      \"again-your-lie-in-april---masaru-yokoyama\",\n      \"classroom-of-the-elite-season-2-theme---masaru-yokoyama-kana-hashiguchi\",\n      \"presence-otouto-mitai-na-sonzai---your-lie-in-april-si-yue-hajun-noxu\",\n      \"horimiya-ep-4-untitled-track---masaru-yokoyama-please-don-t-go\",\n      \"yi-yu-zhi-xian-qu-yiyu---shi-jie-zhi-wai-sheng-ri-wu-ming-pian-duan-beyond-the-world---heng-shan-ke-yokoyama-masaru\",\n      \"fate-apocrypha-hope---masaru-yokoyama\",\n      \"orange-your-lie-in-april-ed2\",\n    ],\n  },\n  {\n    slug: \"marcin_przybylowicz\",\n    midis: [\n      \"the-witcher-3---priscilla-s-song\",\n      \"the-witcher-3---geralt-of-rivia\",\n      \"kaer-morhen---the-witcher-3-wild-hunt-ost\",\n      \"hunt-or-be-hunted---the-witcher-3-wild-hunt\",\n      \"sword-of-destiny-the-witcher-3-wild-hunt\",\n    ],\n  },\n  {\n    slug: MUSESCORE_TOP_100_SLUG,\n    posttext: AboutTop100Corpus,\n    midis: [\n      \"river-flows-in-you\", // Yiruma\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\", // Joe Hisaishi\n      \"Canon_in_D\", // Pachelbel\n      \"Clair_de_Lune__Debussy\", // Debussy\n      \"Fr_Elise\", // Beethoven\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\", // Chopin\n      \"Gymnopdie_No._1__Satie\", // Satie\n      \"Undertale_-_Megalovania_Piano_ver._3\", // Toby Fox\n      \"Golden_Hour__JVKE_Updated_Ver.\", // JVKE\n      \"Je_Te_Laisserai_Des_Mots_-_Patrick_Watson\", // Patrick Watson\n\n      \"Hallelujah\", // Leonard Cohen\n      \"Interstellar\", // Hans Zimmer\n      \"Another_Love__-_Tom_Odell_Professional\", // Tom Odell\n      \"Sweden_Minecraft\", // C418\n      \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\", // Klaus Badelt\n      \"game-of-thrones-main-piano\", // Ramin Djawadi\n      \"someone-you-loved-lewis-capaldi\", // Lewis Capaldi\n      \"Ed_Sheeran_Perfect\", // Ed Sheeran\n      \"Liebestraum_No._3_in_A_Major\", // Liszt\n      \"Believer_-_Imagine_Dragons\", // Imagine Dragons\n\n      \"All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\", // John Legend\n      \"Mad_world_Piano\", // Roland Orzabal\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\", // Paul de Senneville\n      \"someone-like-you\", // Adele\n      \"my-heart-will-go-on\", // James Horner\n      \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\", // Yugo Kanno\n      \"Carol_of_the_Bells\", // Mykola Leontovych\n      \"piano-man-piano\", // Billy Joel\n      \"Fly_Me_to_the_Moon\", // Bart Howard\n      \"passacaglia---handel-halvorsen\", // Handel\n\n      \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\", // Bach\n      \"All_I_Want_for_Christmas_is_You\", // Mariah Carey\n      \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\", // Shostakovich\n      \"wa-mozart-marche-turque-turkish-march-fingered\", // Mozart\n      \"Viva_La_Vida_Coldplay\", // Coldplay\n      \"Gravity_Falls_Opening\", // Brad Breeck\n      \"the_entertainer_scott_joplin\", // Scott Joplin\n      \"Disney_Pixar_Up_Theme\", // Michael Giacchino\n      \"a-thousand-years\", // Christina Perri\n      \"John_Lennon_Imagine\", // John Lennon\n\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\", // Kanye West\n      \"Lovely_Billie_Eilish\", // Billie Eilish\n      // \"lovely-billie-eilish-and-khalid\",\n      \"Omori_Duet\", // Pedro Silva\n      \"Never_Gonna_Give_You_Up\", // Mike Stock\n      \"despacito-piano-cover-peter-bence\", // Luis Fonsi\n      \"solas---jamie-duffy\", // Jamie Duffy\n      \"autumn-leaves-jazz-piano\", // Joseph Kosma\n      \"still-dre---variation-composition\", // Andre Young\n      // Jake 25.17 - duplicate, replaced\n      \"mii-channel-piano\", // Kazumi Totaka\n\n      \"sadness-and-sorrow-for-piano-solo\", // Toshio Masuda\n      \"Super_Mario_Bros_Main_Theme\", // Koji Kondo\n      \"Cant_Help_Falling_In_Love\", // Jean-Paul-gide Martini\n      \"g-minor-bach-original\", // Luo Ni\n      \"when-i-was-your-man---bruno-mars-600e3a\", // Bruno Mars\n      \"gurenge--demon-slayer-kimetsu-no-yaiba-op\", // Kayoko Kusano\n      \"Let_Her_Go_Passenger\", // Passenger\n      \"we-are-number-one-but-it-s-a-piano-transcript\", // Mni Svavarsson\n      \"dragonborn---skyrim-theme-song-piano-solo\", // Jeremy Soule\n      \"doki-doki-literature-club-ost---your-reality\", // Dan Salvato\n\n      \"ylang-ylang---fkj-transcribed-by-lilroo\", // FKJ\n      \"attack-on-titan-theme-guren-no-yumiya\", // Revo\n      \"Bella_Ciao\", // Italian folk\n      \"minuet-bwv-anhang-114-in-g-major\", // Christian Petzold\n      \"Take_on_me\", // a-ha\n      \"congratulations---mac-miller\", // Mac Miller\n      // \"the-office---opening-titles-theme-song-for-piano\", // Jay Ferguson\n      \"the-office\", // Jay Ferguson\n      \"it-s-been-a-long-long-time---harry-james\", // Jule Styne\n      \"Dawn_Pride_and_Prejudice\", // Dario Marianelli\n      \"kimi-no-na-wa---sparkle-theishter-2016\", // Radwimps, Yojiro Noda\n\n      \"Yann_Tiersen_Amelie\", // Yann Tiersen\n      \"sia---snowman\", // Sia\n      \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\", // Takahiro Obata\n      \"theme-from-schindler-s-list---piano-solo\", // John Williams\n      \"happy-birthday\", // Patty Smith Hill\n      \"flight-of-the-bumblebee\", // Nikolai Rimsky-Korsakov\n      \"dance-of-the-sugar-plum-fairy\", // Pyotr Ilyich Tchaikovsky\n      \"dont-stop-believing-piano\", // Journey\n      \"sign-of-the-times---harry-styles\", // Harry Styles\n      \"Requiem_for_a_Dream\", // Clint Mansell\n\n      \"yuri-on-ice---piano-theme-full\", // Taro Umebayashi + Taku Matsushiba\n      \"ye-niqu-keru-yoru-ni-kakeru---racing-into-the-night\", // Ayase\n      \"africa---toto\", // Toto\n      \"vivaldi---summer---piano\", // Vivaldi\n      \"Love_Like_You_Steven_Universe\", // Aivi & Surasshu\n      \"alan-walker---alone-piano\", // Alan Walker\n      \"my-lie-watashi-no-uso---your-lie-in-april\", // Masaru Yokoyama\n      \"anastasia---once-upon-a-december\", // Stephen Flaherty\n      \"Test_Drive_How_to_Train_Your_Dragon\", // John Powell\n      \"Pokemon_Theme_Song\", // John Siegler\n\n      \"your-song-piano\", // Elton John\n      \"nothing-else-matters---metallica\", // Metallica\n      \"calum-scott---you-are-the-reason-piano-sheet-lyrics-lyrics-version-link-in-description\", // Calum Scott\n      \"fairy-tail-main-theme\", // Yasuharu Takanashi\n      \"welcome-to-the-black-parade---my-chemical-romance\", // My Chemical Romance\n      \"how-far-i-ll-go-~-moana-ost\", // Lin-Manuel Miranda\n      \"la-vie-en-rose-solo-accordion\", // Louiguy\n      \"Im_Blue_Eiffel_65\", // Eiffel 65\n      \"old-town-road---lil-nas-x-ft.-billy-ray-cyrus\", // Lil Nas X\n      \"abba--the-winner-takes-it-all\", // ABBA\n      \"A_Thousand_Miles\", // Vanessa Carlton\n    ],\n  },\n  {\n    slug: \"revo\",\n    midis: [\n      \"Attack_on_Titan_Shinzou_wo_Sasageyo\",\n      \"attack-on-titan-theme-guren-no-yumiya\",\n    ],\n  },\n  {\n    slug: \"liszt\",\n    midis: [\n      \"tude_S._1413_in_G_Minor_La_Campanella__Liszt\",\n      \"liszt---trois-etudes-de-concert-no.-3-un-sospiro\",\n      \"liszt---hungarian-rhapsody-no.-2\",\n      \"Liebestraum_No._3_in_A_Major\",\n    ],\n    composerBirthYear: 1811,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Austria, Hungary\",\n  },\n  {\n    slug: \"billie_eilish\",\n    midis: [\"Billie_Eilish_Bad_Guy\", \"Lovely_Billie_Eilish\"],\n    composerBirthYear: 2001,\n    genre: \"Pop\",\n    country: \"USA\",\n  },\n  {\n    slug: \"toby_fox\",\n    midis: [\n      \"undertale-once-upon-a-time-piano-solo\",\n      \"undertale-battle-against-a-true-hero\",\n      \"temmie-village---undertale\",\n      \"undertale---ruins-piano\",\n      \"undertale-dog-song-piano-solo\",\n      \"undertale---his-theme-solo-free-dl\",\n      \"spear-of-justice---undertale-piano-solo\",\n      \"snowy-from-undertale\",\n      \"undertale---memory\",\n\n      \"undertale-ost---hopes-and-dreams-save-the-world\",\n      \"undertale-undertale-piano\",\n      \"undertale-ost---nyeh-heh-heh-bonetrousle\",\n      \"Fallen_Down_Undertale\",\n      \"asgore-an-undertale-boss-theme\",\n      \"spider-dance---undertale\",\n    ],\n    composerBirthYear: 1991,\n    genre: \"Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"erik_satie\",\n    midis: [\n      \"satie-e.---gnossienne-no.-1\",\n      \"gnossienne-no.-2-dery\",\n      \"gnossienne-no.-3-dery\",\n      \"Gymnopdie_No._1__Satie\",\n    ],\n    composerBirthYear: 1866,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"ed_sheeran\",\n    midis: [\n      \"Ed_Sheeran_Shape_of_you\",\n      \"Photograph_Ed_Sheeran\",\n      \"shivers_ed_sheeran_shivers_ed_sheeran_mixed_ensemble\",\n      \"Ed_Sheeran_Perfect\",\n    ],\n    composerBirthYear: 1991,\n    genre: \"Pop\",\n    country: \"UK\",\n  },\n  {\n    slug: \"musescore_top100_more_works_same_composer\",\n    midis: [\n      \"ren-sheng-nomerigorando---jiu-shi-rang-jazz-arranged\",\n      \"the-office-opening-theme\",\n    ],\n  },\n\n  {\n    slug: \"henry_mancini\",\n    midis: [\n      \"Pink_Panther\",\n      \"lujon---henry-mancini\",\n      \"moon-river-for-flute---henry-mancini\",\n    ],\n    composerBirthYear: 1924,\n    genre: \"Film Score, Jazz, Pop, Easy Listening\",\n    country: \"USA\",\n  },\n  {\n    slug: \"edward_macdowell\",\n    midis: [\n      \"to-a-wild-rose-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"will-o-the-wisp-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"at-an-old-trysting-place-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"in-autumn-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"from-an-indian-lodge-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"to-a-water-lily-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"from-uncle-remus-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"a-deserted-farm-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"by-a-meadow-brook-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"told-at-sunset-from-woodland-sketches-op.-51---edward-macdowell\",\n\n      \"to-a-humming-bird----edward-macdowell\",\n      \"clair-de-lune----edward-macdowell\",\n    ],\n    composerBirthYear: 1860,\n    country: \"USA\",\n  },\n  {\n    slug: \"stephen_schwartz\",\n    midis: [\n      \"defying-gravity-from-wicked---stephen-schwartz\",\n      \"when-you-believe-film-version---stephen-schwartz\",\n    ],\n    composerBirthYear: 1948,\n    country: \"USA\",\n  },\n  {\n    slug: \"nino_rota\",\n    midis: [\n      \"Godfather\",\n      \"romeo-and-juliet---nino-rota-a-time-for-us-flute-piano\",\n      \"fellini-8-1-2-rota-8-1-2-fellini-rota---nino-rota-8-1-2-fellini-rota---rota-fellini-8-1-2\",\n      \"the-godfather-waltz\",\n    ],\n    composerBirthYear: 1911,\n    country: \"Italy\",\n    genre: \"Film Score\",\n  },\n  {\n    slug: \"kristen_anderson_lopez_and_robert_lopez\",\n    midis: [\n      \"Let_It_Go_Disney_Frozen\",\n      \"remember-me---kristen-anderson-lopez-robert-lopez-from-disney-pixar-s-coco-arr-for-solo-piano\",\n      \"wandavision-from-wandavision-ep-2---kristen-anderson-lopez-robert-lopez\",\n      \"a-newlywed-couple-from-wandavision-ep-1---kristen-anderson-lopez-robert-lopez\",\n    ],\n    composerBirthYear: 1972,\n    genre: \"Animation Score\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jingle_bells\",\n    midis: [\n      \"jingle-bells\",\n      \"jingle-bells---minor-ragtime-advanced---piano\",\n      \"jingle-bells-boogie-woogie-cover\",\n      \"jingle-bells-boogie\",\n      \"jingle-bells---jazz-piano\",\n    ],\n  },\n  {\n    slug: \"marshmello\",\n    midis: [\n      \"marshmello-ft.-bastille---happier\",\n      \"Alone_Marshmello\",\n      \"marshmello-alone-sergio-moy-20201220161814-nonstop2k.com\",\n    ],\n    composerBirthYear: 1992,\n    genre: \"Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"go_shiina\",\n    midis: [\n      \"kamado-tanjiro-no-uta-~-demon-slayer-ep-19-ed-ost-fonzi-m-improvised-hard-version\",\n      \"code-vein---go-shiina\",\n    ],\n    composerBirthYear: 1974,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"carlos_gardel\",\n    midis: [\n      \"tango-por-una-cabeza\",\n      \"volver---carlos-gardel\",\n      \"melodia-de-arrabal---carlos-gardel\",\n      \"cuesta-abajo---carlos-gardel\",\n      \"golondrinas---carlos-gardel\",\n      \"rubias-de-new-york---carlos-gardel\",\n    ],\n    composerBirthYear: 1890,\n    country: \"Argentina\",\n    genre: \"Tango\",\n  },\n  {\n    slug: \"the_script\",\n    midis: [\"hall-of-fame\", \"the-script---superheroes\"],\n    composerBirthYear: 1980,\n    genre: \"Pop Rock\",\n    country: \"Ireland\",\n  },\n  {\n    slug: \"kyle_dixon_and_michael_stein\",\n    midis: [\n      \"stranger-things-theme\",\n      \"kids---kyle-dixon-michael-stein-stranger-things---arranged-by-nana\",\n      \"aftermath---kyle-dixon-and-michael-stein\",\n    ],\n    composerBirthYear: 1983,\n    country: \"USA\",\n  },\n  {\n    slug: \"dave_brubeck\",\n    midis: [\"take-five\", \"Blue_Rondo_A_La_Turk\"],\n    composerBirthYear: 1920,\n    country: \"USA\",\n    genre: \"Jazz\",\n  },\n  {\n    slug: \"junichi_masuda\",\n    midis: [\n      \"pallet-town---pokemon-red-blue-green-yellow-by-junichi-masuda\",\n      \"viridian-pewter-saffron-city---pokemon-rby---junichi-masuda\",\n      \"pokemon-rse---route-101---junichi-masuda\",\n      \"lavender-town-pokemon-r-b-y\",\n    ],\n  },\n  {\n    slug: \"brahms\",\n    midis: [\n      \"hungarian_dance_1_-c-yogore\",\n      \"hungarian-dance-no.-1\",\n      \"hungarian_dance_2_-c-yogore\",\n      \"hungarian_dance_3_-c-yogore\",\n      \"hungarian-dance-no-5-in-g-minor\",\n      \"brahms_118_1\",\n      \"brahms_op118_1\",\n      \"waltz-in-a-major-op.39-no.15-by-johannes-brahms\",\n      \"brahms---waltz-op.39-no.3\",\n      \"waltz-in-d-minor-op.39-no.9---johannes-brahms\",\n    ],\n    composerBirthYear: 1833,\n  },\n  {\n    slug: \"justin_hurwitz\",\n    midis: [\"gold-coast-rhythm-jack-s-party---justin-hurwitz\"],\n    composerBirthYear: 1985,\n  },\n  {\n    slug: \"hikaru_shirosu\",\n    midis: [\"waltz-no.1-op.6-collapse---hikaru-shirosu\"],\n  },\n  {\n    slug: \"karl_jenkins\",\n    midis: [\n      \"karl-jenkins-concerto-grosso-for-string-orchestra-palladio-i.-allegretto---for-piano-solo\",\n    ],\n  },\n  {\n    slug: \"evgeny_grinko\",\n    midis: [\n      \"evgeny-grinko---valse\",\n      \"carousel---evgeny-grinko\",\n      \"it-s-foggy-today---evgeny-grinko---by-fatih-erol\",\n      \"melting---evgeny-grinko\",\n      \"wind-brought---evgeny-grinko\",\n      \"prologue---evgeny-grinko\",\n\n      \"jane-maryam---evgeny-grinko\", // Iranian song\n      \"lullaby-for-erik---evgeny-grinko\",\n    ],\n    composerBirthYear: 1984,\n  },\n  {\n    slug: \"amachas_music_studio\",\n    midis: [\n      \"old-doll-puppet---ib-mad-father-old-doll\",\n      \"yu-nolian-ren-tati---gan-cha-noyin-le-gong-fang\",\n      \"kagayakuquan-a-shining-spring\",\n      \"still-in-memory-from-witch-s-heart\",\n      \"jin-yao-noye-ni-on-friday-night\",\n    ],\n  },\n  {\n    slug: \"musescore_top200\",\n    midis: [\n      \"Godfather\", // Nino Rota\n      \"Pink_Panther\", // Henry Mancini\n      \"Let_It_Go_Disney_Frozen\", // Kristen Anderson-Lopez & Robert Lopez\n      \"bts-bangtansonyeondan---i-need-u-suga-piano-full-solo\", // BTS\n      \"rihanna-ft.-mikky-echo---stay\", // Mikky Echo\n      \"kamado-tanjiro-no-uta-~-demon-slayer-ep-19-ed-ost-fonzi-m-improvised-hard-version\", // Go Shiina\n      \"marshmello-ft.-bastille---happier\", // Marshmello\n      \"linus-and-lucy-peanuts---vince-guaraldi\", // Vince Guaraldi\n      \"tango-por-una-cabeza\", // Carlos Gardel\n      \"chasing-kou---hidekazu-sakamoto-drowning-love---ni-rerunaihu-mule-bbajin-naipeu-ost\", // Hidekazu Sakamoto\n\n      \"hall-of-fame\", // The Script\n      \"olivia-rodrigo---drivers-license\", // Olivia Rodrigo\n      \"stranger-things-theme\", // Kyle Dixon & Michael Stein\n      \"forest-gump---main-title-feather-theme\", // Alan Silvestri\n      \"senorita---shawn-mendes-camilla-cabello\", // Shawn Mendes & Camila Cabello\n      \"i-see-the-light-from-disney-s-tangled\", // Alan Menken\n      \"take-five\", // Dave Brubeck\n      \"somewhere-only-we-know---keane\", // Keane\n      \"glimpse-of-us\", // Joji\n      \"lost-boy---ruth-b\", // Ruth B\n\n      \"Misty_piano_solo\", // Erroll Garner\n      \"Wellerman_Sea_Shanty\", // New Zealand folk song\n      \"flower-dance-dj-okawari\", // DJ Okawari\n      \"Jingle_Bell_Rock\", // Joseph Carleton Beal and James Ross Boothe\n      \"the-night-we-met\", // Lord Huron\n      \"Tetris_Theme\", // Russian folk song\n      \"dearly-beloved-piano-collections-kingdom-hearts\", // Yoko Shimomura\n      \"for-the-damaged-coda---blonde-redhead\", // Blonde Redhead\n      \"unravel-acoustic-ver-tokyo-ghoul-theishter-sheet-music-full-sheets\", // Toru Kitajima\n      \"stand-by-me\", // Ben E. King\n\n      \"solo-violin-caprice-no.-24-in-a-minor---n.-paganini-op.-1-no.-24\", // Niccolo Paganini\n      \"la-foule-edith-piaf-piano-chant\", // Angel Cabral\n      \"Ophelia\", // The Lumineers\n      \"turning-page---sleeping-at-last-piano-string-quartet\", // Sleeping at Last\n      \"hungarian-dance-no-5-in-g-minor\", // Johannes Brahms\n      \"take-me-to-church---hozier\", // Andrew Hozier\n      \"it-s-been-so-long-fnaf-2-song\", // The Living Tombstone\n      \"hollow-knight-main-theme---christopher-larkin\", // Christopher Larkin\n      \"7-years---lukas-graham\", // Lukas Graham\n      \"one-piece---bink-s-sake---kohei-tanaka\", // Kohei Tanaka\n\n      \"Gershwin_Rhapsody_in_Blue_Piano_solo\", // George Gershwin\n      \"idea-22---gibran-alcocer\", // Gibran Alcocer\n      \"Hit_the_Road_Jack\", // Percy Mayfield\n      \"lavender-town-pokemon-r-b-y\", // Junichi Masuda\n      \"rachmaninoff-piano-concerto-no.-2-1st-mvmt.-arr.-for-2-pianos\", // Rachmaninoff\n      \"the-weeknd---blinding-lights---advanced-cover-by-majorandminor\", // The Weeknd\n      \"in-the-end---linkin-park\", // Linkin Park\n      \"czardas-by-vittorio-monti\", // Vittorio Monti\n      \"a-wanderer-s-song-zigeunerweisen-gypsy-airs-op.20\", // Pablo de Sarasate\n      \"ave-maria-d839---schubert---solo-piano-arrg.\", // Schubert\n\n      \"liebesleid-piano-solo---kreisler-rachmaninoff-alt-wiener-tanzweisen\", // Fritz Kreisler\n      \"just-the-two-of-us\", // Ralph MacDonald and William Salter\n      \"to-build-a-home-~-the-cinematic-orchestra\", // The Cinematic Orchestra\n      \"great-balls-of-fire---jerry-lee-lewis\", // Jerry Lee Lewis\n      \"westlife---beautiful-in-white\", // Westlife\n      \"victory-piano-solo---two-steps-from-hell\", // Thomas Bergersen\n      \"hikaru-nara-your-lie-in-april\", // Goose House\n      \"seven-nation-army-arr.-nikodem-lorenz\", // The White Stripes\n      \"peaches---the-super-mario-bros.-movie-piano-solo-arrangement\", // Jack Black\n      \"alexander-rybak---fairytale\", // Alexander Rybak\n\n      \"libertango\", // Astor Piazzolla\n      \"old-doll-puppet---ib-mad-father-old-doll\", // Amacha's Music Studio\n      \"amazing-grace-choir-saa---john-newton\", // John Newton\n      \"2---onerepublic---counting-stars\", // OneRepublic\n      \"genshin-impact-main-theme\", // Yu-Peng Chen\n      \"slander-dylan-matthew---love-is-gone-acoustic\", // Slander\n      \"national-anthem-of-the-ussr\", // Alexander Alexandrov\n      \"in-the-hall-of-the-mountain-king-dovregubbens-hall\", // Edvard Grieg\n      \"where-is-my-mind-solo-piano-by-pixies-maxence-cyrin\", // Pixies\n      \"evgeny-grinko---valse\", // Evgeny Grinko\n      \"barfuss-am-klavier---annenmaykantereit-69e4ae\", // Annenmaykantereit\n\n      \"arcade---duncan-laurence\", // Duncan Laurence\n      \"le-cygne-the-swan\", // Saint-Sans\n      \"can-you-hear-the-music---ludwig-goransson-from-oppenheimer\", // Ludwig Gransson\n      \"all-star\", // Smash Mouth\n      \"succession-main-theme\", // Nicholas Britell\n      \"to-the-moon-for-river-johnny-s-version\", // Kan Gao, Laura Shigihara\n      \"time-travel-theme-by-jay-chou-from-secret-2007-film\", // Jay Chou\n      \"blue-bird\", // Ikimono-gakari\n      \"baby-shark-song\", // folk\n      \"My_War_Attack_on_Titan\", // Shinsei Kamattechan\n      \"kass-theme--full-the-legend-of-zelda-breath-of-the-wild\", // Manaka Kataoka\n\n      \"greensleeves-for-piano-easy-and-beautiful\", // English folk song\n      \"fukashigi-no-carte\", // Kawai Luigi or Hidehiro Kawai\n      \"from-the-start---laufey\", // Laufey\n      \"goner\", // Twenty One Pilots\n      \"titanium\", // David Guetta feat. Sia\n      \"Avril_14_Aphex_Twin\", // Aphex Twin\n      \"~beethoven-virus~\", // Lee Pil-ho\n      \"mystery-of-love-call-me-by-your-name\", // Sufjan Stevens\n      \"lose-yourself-by-eminem\", // Eminem\n      \"a-cruel-angel-s-thesis---neon-genesis-evangelion\", // Hidetoshi Sato\n\n      \"chasing-cars---snow-patrol\", // Snow Patrol\n      // SpongeBob SquarePants\n      \"Feliz_Navidad\", // Jose Feliciano\n      \"richard-marx---right-here-waiting\", // Richard Marx\n      \"Axel_F_Beverly_Hills_Cop_III\", // Harold Faltermeyer\n\n      // skipped tons of vocal works beyond this point\n\n      \"adagio-in-g-minor---for-solo-piano\", // Remo Giazotto\n      \"can-can\", // Jacques Offenbach\n      \"offenbach---can-can-from-orpheus-in-the-underworld-piano-arrangement\",\n    ],\n  },\n  {\n    slug: \"gustav_holst\",\n    midis: [\n      \"Jupiter_-_arr._for_two_pianos_by_Gustav_Holst\",\n      \"neptune-the-mystic---gustav-holst-piano-reduction\",\n      \"the-planets-op.-32----ii.-venus-bringer-of-peace-for-piano\",\n    ],\n    composerBirthYear: 1874,\n    country: \"United Kingdom\",\n  },\n  {\n    slug: \"scarlatti\",\n    midis: [\n      \"sonata_k159_scarlatti\",\n      \"scarlatti-sonata-aria-k.32\",\n      \"sonata-in-e-major-k-380\",\n    ],\n    composerBirthYear: 1685, // Domenico Scarlatti was born in 1685\n    genre: \"Classical\", // Classical composer\n    style: \"Baroque\", // Baroque period composer\n    country: \"Italy\", // Born in Naples, Italy\n  },\n\n  {\n    slug: \"bruckner\",\n    midis: [\n      \"bruckner_7_1\",\n      \"bruckner_7_2\",\n      \"bruckner_8\",\n      \"bruckner_8_a_j\",\n      \"bruckner_symphony_4_1\",\n    ],\n  },\n\n  {\n    slug: \"irving_aaronson\",\n    midis: [\"jazz-classique-1919\"],\n    genre: \"Fox Trot\",\n    composerBirthYear: 1895,\n    country: \"USA\",\n  },\n\n  {\n    slug: \"niki_reiser\",\n    midis: [\n      \"nordsee---niki-reiser-punktchen-und-anton\",\n      \"das-fliegende-klassenzimmer---overture\",\n    ],\n    composerBirthYear: 1958,\n    country: \"Switzerland\",\n  },\n  {\n    slug: \"jonathan_coulton\",\n    midis: [\"portal_still_alive\", \"re-your-brains-jonathan-coulton\"],\n    composerBirthYear: 1970,\n    genre: \"Folk Rock, Indie Rock, Comedy Rock\",\n  },\n  {\n    slug: \"haydn\",\n    midis: [\n      \"haydn_piano_sonata_c_major_xvi_7_1\",\n      \"haydn_piano_sonata_c_major_xvi_7_2\",\n      \"haydn_piano_sonata_c_major_xvi_7_3\",\n      \"sonata_in_e_minor_hob_xvi_34_joseph_haydn_piano_sonata_hob_xvi_34_2_adagio\",\n      \"string_quartet_in_g_major_hob_iii_75_op_76_no_1_joseph_haydn\",\n      \"haydn_100_1\",\n      \"1.-andante-grazioso-b-major-hob.xvii-anh---joseph-haydn\",\n      \"2.-allegro-f-major-hob.xvii-anh---joseph-haydn\",\n    ],\n    composerBirthYear: 1732,\n    style: \"Classical\",\n    country: \"Austria\",\n  },\n  {\n    slug: \"michel_legrand\",\n    midis: [\n      \"i-will-wait-for-you---michel-legrand\",\n      \"the-windmills-of-your-mind---michel-legrand\",\n      \"concerto-les-demoiselles-de-rochefort\",\n      \"the-summer-knows---michel-legrand\",\n    ],\n  },\n  {\n    slug: \"sebastian_yradier\",\n    midis: [\n      \"la-paloma-cancion-americana-sebastian-yradier-vers-1863\",\n      \"maria-dolores-1860-tango-du-maestro-sebastian-yradier\",\n      \"el-chin-chin-chan-cancion-habanera-de-sebastian-yradier\",\n      \"una-declaracion.-a-quema-ropa-....de-sebastian-yradier\",\n      \"el-arreglito---sebastian-yradier\",\n    ],\n  },\n  {\n    slug: \"manuel_saumell\",\n    midis: [\n      \"los-ojos-de-pepa-manuel-saumell-contradanza\",\n      \"el-panuelo-de-pepa-de-manuel-saumell\",\n      \"la-linda-contradanza-manuel-saumell\",\n      \"la-veleta-contradanza-by-manuel-saumell\",\n      \"saludo-a-cuba-contradanza-saumell\",\n      \"ayes-del-alma-contradanza-de-manuel-saumell\",\n      \"el-bazar-contradanza-saumell-robredo-manuel\",\n      \"pero-por-que-contradanza-de-manuel-saumell\",\n      \"dice-que-no-contradanza-saumell\",\n    ],\n    country: \"Cuba\",\n    composerBirthYear: 1818,\n    genre: \"Contradanza\",\n  },\n  {\n    slug: \"goran_bregovic\",\n    midis: [\n      \"bubamara\",\n      \"underground-cocek\",\n      \"underground-tango---goran-bregovic-string-quartet\",\n      \"kalasnjikov\",\n    ],\n  },\n  { slug: \"exercises\", midis: [\"average_rag_1\", \"average_rag_2\"] },\n  {\n    slug: \"examples\",\n    midis: [\n      \"the_seven_diatonic_natural_minor_chords_in_a_minor\",\n      \"thirty_five_smallest_non_diatonic_chords_in_c_or_b\",\n      \"ii-v-i-jazz-voicings\",\n      \"ii-v-i-warmup\",\n      \"the-blues-scale-in-all-12-keys\",\n    ],\n  },\n  {\n    slug: \"linkin_park\",\n    midis: [\"Numb_-_Linkin_Park\", \"in-the-end---linkin-park\"],\n  },\n  {\n    slug: \"ross_bagdasarian\",\n    midis: [\"christmas-don-t-be-late-the-chipmunk-song\"],\n  },\n  {\n    slug: \"thefatrat\",\n    midis: [\n      \"TheFatRat_Monody\",\n      \"TheFatRat_Unity\",\n      \"jackpot-thefatrat\",\n      \"thefatrat---close-to-the-sun\",\n      \"thefatrat---time-lapse-piano-arrangement\",\n      \"thefatrat---origin-reprise-dota-2-music-pack\",\n      \"thefatrat---windfall\",\n      \"xenogenesis---thefatrat\",\n      \"elegy---thefatrat-piano-cover\",\n      \"sunlight---thefatrat-phaera\",\n      \"thefatrat---envelope-dota-2-music-pack\",\n      \"rule-the-world---thefatrat-and-alexa-piano-cover\",\n      \"thefatrat-slaydit---solitude\",\n    ],\n  },\n  { slug: \"moka\", midis: [\"elfen-lied---lilium\"] },\n  {\n    slug: \"francis_lai\",\n    midis: [\"Love_Store_Francis_Lai\", \"un-homme-et-une-femme---francis-lai\"],\n  },\n  {\n    slug: \"luiz_bonfa\",\n    midis: [\n      \"la-chanson-d-orphee-manha-do-carnaval---luis-bonfa\",\n      \"l2004_03---la-chanson-d-orphee\",\n    ],\n  },\n  {\n    slug: \"joep_beving\",\n    midis: [\"ala---joep-beving\", \"sleeping-lotus---joep-beving\"],\n    composerBirthYear: 1976,\n    country: \"Netherlands\",\n    genre: \"Contemporary Classical\",\n  },\n  {\n    slug: \"vasiliy_agapkin\",\n    midis: [\"march-slav-s-farewel-marsh-proshchanie-slavyanki\"],\n  },\n  {\n    slug: \"kyle_landry\",\n    midis: [\n      \"Kyle_Landrys_Tetris_Theme_Variations_for_Piano_SoloKorobeiniki\",\n      \"comptine-d-un-autre-ete-arr.-kyle-landry-2021\",\n    ],\n  },\n  {\n    slug: \"misirlou\",\n    midis: [\"misirlou-pulp-fiction\", \"misirlou-pulp-fiction-f28e66\"],\n  },\n  {\n    slug: \"vangelis\",\n    midis: [\n      \"conquest-of-paradise-vangelis\",\n      \"chariots-of-fire-theme\",\n      \"alpha---vangelis\",\n      \"piano-in-an-empty-room---vangelis\",\n      \"messages-easy-piano---vangelis\",\n      \"love-theme-blade-runner---vangelis-for-keyboard\",\n      \"plelude---vangelis\",\n    ],\n    composerBirthYear: 1943,\n    country: \"Greece\",\n  },\n  {\n    slug: \"unsorted\",\n    midis: [\n      \"Alice_DJ_Better_Off_Alone\",\n\n      \"Anders_Thue_Sonne\",\n\n      \"Avicii_Wake_me_up\",\n\n      \"Billie_s_Bounce_Billies_Bounce\",\n\n      \"Blues_for_Alice\",\n      \"Blues_in_the_Closet_Lead_sheet_\",\n\n      \"Chris_Isaak_Wicked_Game\",\n\n      \"Close_to_the_edge\",\n      \"Coffin_dance\",\n\n      \"Dream_a_little_dream_of_me\",\n\n      \"Flight_Facilities_Crave_You\",\n      \"Flight_Facilities_Crave_You_2\",\n\n      \"Good_Bye_Hachiko\",\n\n      \"How_long_blues\",\n\n      \"Johnny_Cash_Hurt\",\n\n      \"Jolene\",\n      \"20th-century-fox-fanfare-piano-arr.\",\n      \"rush-e-but-it-s-as-difficult-as-humanly-possible\",\n\n      \"Krylya_Nautilus_duo\",\n\n      \"Lady_Gaga_Always_remember_us_this_way\",\n\n      \"Liana_Flores_Rises_the_Moon\",\n\n      \"Morphine_Cure_for_Pain\",\n\n      \"Prlude_to_Act_1_of_Carmen_-_Piano_Solo_-_Bizet\",\n\n      \"Sandu\",\n\n      \"Sorcerers_doll___-_The_King_and_the_Jester___\",\n\n      \"Super_Mario_Bros_Peaches\",\n      \"Sviridov_Snowstorm_Waltz\",\n      \"Sviridov_Time_Foward\",\n      \"Sviridov_Time_Foward.1\",\n      \"Sweet_Dreams\",\n      \"Sweet_home_Chicago\",\n\n      \"The_Prince_of_Silence____Nautilus_Pompilius\",\n      \"The_Strokes_Reptilia\",\n      \"The_Strokes_Reptilia_2\",\n      \"The_Strokes_Reptilia_3\",\n      \"The_Weeknd_Blinding_Lights\",\n      \"Titanic\",\n      \"To_be_over\",\n\n      \"Walking_On_a_dream\",\n\n      \"all-major-scales-arpeggios\",\n      \"all_of_the_girls_you_loved_before_taylor_swift\",\n      \"alto_sax_natural_minor_scales_and_arpeggios\",\n      \"as_it_was_harry_styles\",\n\n      \"cheek_to_cheek\",\n\n      \"classical_music_mashup\",\n      \"closed-topic----xiu-ti\",\n      \"cody_fry_eleanor_rigby_no_lead_vocal\",\n\n      \"contract---poshlaya-molly-easy-piano\",\n      \"corelli_op1_no8_ii\",\n      \"cuphead_a_quick_break\",\n\n      \"dance-of-the-knights-transcription-for-piano-solo\",\n      \"dazhe-moya-beybi-ne-znaet---poshlaya-molli\",\n      \"diatonic-7th-chords-in-major-key\",\n      \"directed_by_robert_b_weide\",\n\n      \"don_t_deal_with_the_devil_barbershop_quartet_cuphead\",\n\n      \"earth_wind_fire_september\",\n      \"ederlezi\",\n      \"eleanor_rigby_cody_fry_no_perc1\",\n      \"etude-op.-10-no.-5-black-keys-pentatonic-arrangement\",\n      \"examples_of_chord_progressions_in_a_minor\",\n\n      \"firuze\",\n      \"four-chord-song\",\n      \"gamzedeyim_deva_bulmam\",\n\n      \"gavotte\",\n      \"gavotte_f_j_gossec\",\n\n      \"god_only_knows_bioshock_infinite_2013\",\n      \"gotye_feat_kimbra_somebody_that_i_used_to_know\",\n      \"hanna-montana---poshlaya-molli-hannamontana---poshlaya-molli\",\n      \"hannamontana---poshlaya-molli-agga\",\n\n      \"hojnacki_1\",\n\n      \"idotdotdot---yiruma\",\n\n      \"kars_1_tigran_hamasyan\",\n\n      \"kimigayo_national_anthem_of_japan\",\n\n      \"kukla_kolduna\",\n      \"mahler_4_3\",\n      \"major_diatonic_chords\",\n\n      \"malenkiy-princ\",\n\n      \"mesecina\",\n      \"mihail-krug-vladimirskiy-central\",\n\n      \"motion-sickness---phoebe-bridgers\",\n\n      \"mpaintoyska\",\n      \"my_wild_irish_rose\",\n      \"never_gunna_give_you_up_barbershop\",\n      \"now_voyager_suite_max_steiner\",\n      \"opa-cupa\",\n\n      \"piano_tutorial\",\n      \"pizzicati-from-sylvia-act-iii-no.-20---leo-delibes---1876\",\n      \"pornofilmy-prosti_proshyay_privet\",\n      \"pornofilmy-prosti_proshyay_privet.1\",\n      \"pornofilmy-prosti_proshyay_privet.2\",\n      \"pornofilmy-ya_tak_soskuchilsya\",\n      \"pornofilmy-ya_tak_soskuchilsya.1\",\n      \"pornofilmy-ya_tak_soskuchilsya.2\",\n\n      \"prelude_in_c_major_bach_piano_solo\",\n\n      \"pyos\",\n\n      \"sadness-and-sorrow\",\n\n      \"sasha_2\",\n      \"scott-joplin-s-new-rag---revised-edition---c1914----piano-tutorial\",\n\n      \"skyrim-theme-for-piano\",\n\n      \"sonatina-in-c-major---dennis-alexander\",\n\n      \"sorcerer_s_puppet_the_king_and_the_jester\",\n      \"steve-reich---piano-phase\",\n\n      \"string_quartet_no_8_in_e_minor_opus_59_rasumovsky_no_2\",\n\n      \"symphony_8_1\",\n      \"symphony_no_1_k_16_2nd_movement\",\n\n      \"the-four-chord-song---axis-of-awesome\",\n\n      \"the-washington-post-piano-john-philip-sousa\",\n\n      \"the_lamp_is_low\",\n\n      \"this_charming_man_the_smiths_piano_vocal_guitar\",\n      \"tipichnaya_vecherinka_s_basseynom\",\n      \"tomorrow---giovanni-allevi\",\n\n      \"white_christmas\",\n\n      \"something-human---muse\",\n      \"priboi\",\n\n      \"maromis-theme---smoke\",\n\n      \"zappaguri\",\n\n      \"genesis-that-s-all-piano\",\n      \"home---edward-sharpe-and-the-magnetic-zeros-home---edward-sharpe\",\n    ],\n  },\n  {\n    slug: \"natural_minor\",\n    midis: [\n      \"river-flows-in-you\",\n      \"yiruma_river_flows_in_you_easy\",\n      \"River_Flows_In_You\",\n      \"harmony-piano-arrangement-runescape-3\",\n      \"b.-bartok-for-children-vol.-1-nr.29-pentatonic-tune-sz42\",\n      \"moxevis-k-alo-t-inao\",\n      \"deadline---elissa-milne\",\n      \"saman---olafur-arnalds\",\n      \"happiness-does-not-wait---olafur-arnalds\",\n      \"olafur-arnalds---tomorrow-s-song\",\n      \"llorando-se-fue---los-kjarkas\",\n      \"inci---ahmed-adnan-saygun\",\n      \"ninni---ahmed-adnan-saygun\",\n      \"aria-math---c418-from-minecraft\",\n      \"moog-city-minecraft\",\n      \"dry-hands-minecraft\",\n      \"bts-bangtansonyeondan---i-need-u-suga-piano-full-solo\",\n      \"bts-bangtansonyeondan---fake-love\",\n      \"the-truth-untold---bts\",\n      \"dirt-theme-hope---heroes-of-might-and-magic-iv---celtic-harp\",\n      \"tokyo-ghoul-a-kisetsu-wa-tsugitsugi-shindeiku\",\n      \"the-letterbox\",\n      \"nascence-journey-main-theme\",\n      \"zireh-gonbadeh-kabood\",\n      \"aghaye-hekayati\",\n      \"no-body-no-crime---taylor-swift\",\n      \"autumn_leaves_diatonic\",\n      \"target-renegade-main-theme---gari-biasillo\",\n      \"e.ben-tian-e.honda-japan---sutoritohuaitaii-street-fighter-ii-ac---yoko-shimomura\",\n      \"metro-2033-main-menu-theme\",\n      \"metro-last-light-ending-bad-ending\",\n      \"represent\",\n      \"peacock---dj-okawari\",\n      \"over-the-rain---dj-okawari-x-emily-styler\",\n      \"perfect-blue---dj-okawari-piano-solo-hard\",\n      \"ming-ri-fang-zhou-arknights---speed-of-light-piano-transcription\",\n      \"another-reflection---nujabes\",\n      \"nujabes--blessing-it-remix\",\n      \"m.-theodorakis---ena-to-helidoni---greek-music-001\",\n      \"pyx-lax---de-tha-dakryso-pia-gia-sena---greek-music-043\",\n      \"m.-tokas---exartatai---greek-music-068\",\n      \"never-forgive-me-never-forget-me---akira-yamaoka\",\n      \"silent-hill-not-tomorrow-lisa-s-death\",\n      \"akira-yamaoka---true\",\n      \"rosemary-s-theme-the-giver\",\n      \"chainsaw-man-ost---sweet-dreams-by-kensuke-ushio-arranged-by-thezewmusic\",\n      \"funeral-march---f.-chopin-halloween-scary-version---easy-to-intermediate\",\n      \"every-you-every-me---placebo\",\n      \"the-bitter-end---placebo\",\n      \"boogie-woogie-waltz-zawinul-leadsheet\",\n      \"idea-15---gibran-alcocer\",\n      \"idea-n.10---gibran-alcocer\",\n      \"idea-22---gibran-alcocer\",\n      \"idea-9---gibran-alcocer\",\n      \"distractions---fabrizio-paterlini\",\n      \"fabrizio-paterlini---snow\",\n      \"waltz---fabrizio-paterlini\",\n      \"fire---fabrizio-paterlini\",\n      \"there-s-a-light-we-might-see---fabrizio-paterlini\",\n      \"rue-des-trois-freres---fabrizio-paterlini\",\n      \"week-8---fabrizio-paterlini-new-week8\",\n      \"dawn---fabrizio-paterlini\",\n      \"fabrizio-paterlini---racconto-di-luna\",\n      \"soffia-la-notte---fabrizio-paterlini\",\n      \"fabrizio-paterlini---midsummer-tiny-song\",\n      \"week-11---fabrizio-paterlini\",\n      \"white-forest-in-kazan---fabrizio-paterlini\",\n      \"leave---fabrizio-paterlini\",\n      \"empty-room---fabrizio-paterlini\",\n      \"fabricio-paterlini--there-is-a-light-we-might-see---dernierpianista\",\n      \"found-letters---fabrizio-paterlin\",\n      \"rob-costlow---bliss\",\n      \"rob-costlow---i-do\",\n      \"rob-costlow---forever\",\n      \"rob-costlow---goodbyes\",\n      \"rob-costlow---oceans\",\n      \"kolshchik\",\n      \"prologue---the-wolf-among-us\",\n      \"crane-s-business-office-the-wolf-among-us\",\n      \"aquatic-ambience\",\n      \"andrew-prahlow---end-times\",\n      \"andrew-prahlow---the-river\",\n      \"the-veil-of-time---outlander-score\",\n      \"triage-at-dawn\",\n      \"something-secret-steers-us\",\n      \"don-t-go-down-to-sorrow---65daysofstatic\",\n      \"take-me-somewhere-nice---mogwai\",\n      \"that-cold-place-2nd-floor---ittle-dew\",\n      \"belym-snegom---muzyka-e-rodygina-belym-snegom---muzyka-e.-rodygina\",\n      \"can-you-hear-the-music---ludwig-goransson-from-oppenheimer\",\n      \"liz-on-top-of-the-world\",\n      \"the_earth_prelude_ludovico_einaudi_piano_solo\",\n      \"ludovico-einaudi-una-mattina\",\n      \"chetvorno-shopsko-horo\",\n      \"drjanovska-racenica-ii\",\n      \"glavinishko-cetvorno\",\n      \"kojovo-horo\",\n      \"koljovo-horo\",\n      \"lomka-po-lomka-kasapsko-horo\",\n      \"malisevsko-horo\",\n      \"momino-horo\",\n      \"seymour_drjanovska_rachenica\",\n      \"sandansko-oro\",\n      \"seymour_jambolsko_pajdushko\",\n      \"kasapsko\",\n      \"honoring-the-dead---marc-streitenfeld\",\n      \"the-grey\",\n      \"the-scientist---coldplay-piano-arrangement\",\n      \"i-wanted-to-leave---syml\",\n      \"all-night\",\n      \"sadness-and-sorrow-for-piano-solo\",\n      \"your-obnoxious-reality---your-reality-but-sadder\",\n      \"leaving-earth---mass-effect-3\",\n      \"Yann_Tiersen_Amelie\",\n      \"rue-des-cascades---yann-tiersen\",\n      \"tiersen-yann----j-y-suis-jamais-alle\",\n      \"fairy-tail-main-theme\",\n      \"fairy-tail-sad-theme\",\n      \"dragon-slayer---fairy-tail\",\n      \"norman-s-theme-22194\",\n      \"jim-yosef-link\",\n      \"jim-yosef--firefly\",\n      \"animal---jim-yosef\",\n      \"breath-in---yehezkel-raz\",\n      \"breath-out---yehezkel-raz\",\n      \"before-you-left---yehezkel-raz\",\n      \"milestone---yehezkel-raz\",\n      \"early-morning-haze---yehezkel-raz\",\n      \"again-your-lie-in-april---masaru-yokoyama\",\n      \"classroom-of-the-elite-season-2-theme---masaru-yokoyama-kana-hashiguchi\",\n      \"kaer-morhen---the-witcher-3-wild-hunt-ost\",\n      \"Another_Love__-_Tom_Odell_Professional\",\n      \"All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\",\n      \"Lovely_Billie_Eilish\",\n      \"despacito-piano-cover-peter-bence\",\n      \"still-dre---variation-composition\",\n      \"Let_Her_Go_Passenger\",\n      \"alan-walker---alone-piano\",\n      \"undertale---his-theme-solo-free-dl\",\n      \"Ed_Sheeran_Shape_of_you\",\n      \"marshmello-ft.-bastille---happier\",\n      \"Alone_Marshmello\",\n      \"marshmello-alone-sergio-moy-20201220161814-nonstop2k.com\",\n      \"hall-of-fame\",\n      \"the-script---superheroes\",\n      \"kids---kyle-dixon-michael-stein-stranger-things---arranged-by-nana\",\n      \"aftermath---kyle-dixon-and-michael-stein\",\n      \"carousel---evgeny-grinko\",\n      \"it-s-foggy-today---evgeny-grinko---by-fatih-erol\",\n      \"melting---evgeny-grinko\",\n      \"wind-brought---evgeny-grinko\",\n      \"jane-maryam---evgeny-grinko\",\n      \"rihanna-ft.-mikky-echo---stay\",\n      \"lost-boy---ruth-b\",\n      \"Wellerman_Sea_Shanty\",\n      \"the-night-we-met\",\n      \"in-the-end---linkin-park\",\n      \"arcade---duncan-laurence\",\n      \"Avril_14_Aphex_Twin\",\n      \"mystery-of-love-call-me-by-your-name\",\n      \"the_seven_diatonic_natural_minor_chords_in_a_minor\",\n      \"Numb_-_Linkin_Park\",\n      \"TheFatRat_Monody\",\n      \"comptine-d-un-autre-ete-arr.-kyle-landry-2021\",\n      \"Alice_DJ_Better_Off_Alone\",\n      \"Coffin_dance\",\n      \"Johnny_Cash_Hurt\",\n      \"Jolene\",\n      \"all_of_the_girls_you_loved_before_taylor_swift\",\n      \"alto_sax_natural_minor_scales_and_arpeggios\",\n      \"contract---poshlaya-molly-easy-piano\",\n      \"examples_of_chord_progressions_in_a_minor\",\n      \"kukla_kolduna\",\n      \"sadness-and-sorrow\",\n      \"tipichnaya_vecherinka_s_basseynom\",\n      \"genesis-that-s-all-piano\",\n      \"home---edward-sharpe-and-the-magnetic-zeros-home---edward-sharpe\",\n    ],\n  },\n  {\n    slug: \"minor_V\",\n    midis: [\n      \"yiruma_reminiscent\",\n      \"Avicii_Wake_me_up\",\n      \"cats-of-whisker-hollow-spooky-autumn---derek-fiechter\",\n      \"thefatrat---close-to-the-sun\",\n      \"spanish-tango\",\n      \"idea-7---gibran-alcocer\",\n      \"week-10---fabrizio-paterlini\",\n      \"Hallelujah\",\n      \"alma-del-tango---wynn-anne-rossi\",\n      \"thinking-time---in-stars-and-time-ost---studio-thumpy-puppy\",\n      \"ballad-for-our-time\",\n      \"silent-night---hania-rani\",\n      \"de-ushuaia-a-la-quiaca\",\n      \"roberto-cacciapaglia---seconda-navigazione\",\n      \"7-years---lukas-graham\",\n      \"waltz-of-the-temple-forest-elves-trine-2-soundtrack\",\n      \"gurenge--demon-slayer-kimetsu-no-yaiba-op\",\n      \"pornofilmy-prosti_proshyay_privet.1\",\n      \"gray\",\n      \"senorita---shawn-mendes-camilla-cabello\",\n      \"idea-1---gibran-alcocer\",\n      \"pornofilmy-prosti_proshyay_privet\",\n      \"primi-passi---fabrizio-paterlin\",\n      \"nickelodeon-all-star-brawl-menu-theme---mattias-hakulinen\",\n      \"peaches-from-super-mario-bros-movie-for-violin---brian-tyler-jack-blackman\",\n      \"olafur-arnalds---raein\",\n      \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\",\n      \"bella-ciao---sad-and-slow-piano-version-arranged-by-rafal-piwowarczuk-la-casa-de-papel\",\n      \"my-piano-the-clouds---paterlini\",\n      \"ocarina-of-time-lost-woods-piano\",\n      \"m.-theodorakis---vrehei-sti-ftohogeitonia---greek-music-052\",\n      \"lettre-a-ma-mere\",\n      \"decretum---yuki-kajiura-puella-magi-madoka-magica-ost\",\n      \"thefatrat---envelope-dota-2-music-pack\",\n      \"dolencias---inti-illimani-dolencias\",\n      \"lost-song---fabrizio-paterlini\",\n      \"if-only-i-could-tell---fabrizio-paterlini\",\n      \"attack-on-titan-theme-guren-no-yumiya\",\n      \"cuphead---kristofer-maddigan---die-house\",\n      \"the-witcher-3---priscilla-s-song\",\n      \"dying-dream-arrangement-by-reik\",\n      \"hungarian-sonata---paul-de-senneville\",\n      \"marble-zone-from-sonic-the-hedgehog\",\n      \"m.-theodorakis---omorfi-poli---greek-music-036\",\n      \"after-you-came---yehezkel-raz\",\n      \"introspection---vicenzo-piano\",\n      \"my-kazakhstan\",\n      \"voyage-a-venice---richard-clayderman\",\n      \"queen-of-hearts\",\n      \"Requiem_for_a_Dream\",\n      \"Je_Te_Laisserai_Des_Mots_-_Patrick_Watson\",\n      \"tango-to-evora\",\n      \"meditation---ie.-doga\",\n      \"jeanny-falco\",\n      \"brawl-stars---lose-theme\",\n      \"ah-ty-nochenka.-russkaya-narodnaya-pesnya\",\n      \"catherine-howard-s-fate---blackmore-s-night\",\n      \"quiero-amanecer-con-alguien---daniela-romo\",\n      \"corazon-de-nino-child-s-heart-by-raul-di-blasio---raul-di-blasio-corazon-de-nino-child-s-heart-by-raul-di-blasio\",\n      \"huajra---inti-illimani\",\n      \"le-moulin---yann-tiersen\",\n      \"tetris-theme-korobeniki-easy-to-play\",\n      \"Sorcerers_doll___-_The_King_and_the_Jester___\",\n      \"sorcerer_s_puppet_the_king_and_the_jester\",\n      \"eda-s-requiem---brad-breeck-piano\",\n      \"the-tale-of-the-firebird---derek-brandon-fiechter\",\n      \"touhou-8---maiden-s-capriccio-~-dream-battle\",\n      \"reminiscence-~-dl-6-incident---masakazu-sugimori-phoenix-wright-ace-attorney\",\n      \"na-tihoreckuyu-sostav-otpravitsya\",\n      \"the-day-will-come---bear-mccreary\",\n      \"tetris-theme\",\n      \"tetris-theme---epic-piano-arrangement\",\n      \"s-n-yadima-dus-nd\",\n      \"tetris-theme-for-piano\",\n      \"idea-20---gibran-alcocer\",\n      \"Gravity_Falls_Opening\",\n      \"fabrizio-paterlini---my-misty-mornings\",\n      \"h.-nikolopoylos---ston-aggelon-ta-mpoyzoykia---greek-music-062\",\n      \"ciganin-kuca---boban-markovic\",\n      \"all-my-joy-all-my-pain---fabrizio-paterlini\",\n      \"The_Prince_of_Silence____Nautilus_Pompilius\",\n      \"fado---rosinha-dos-limoes-4-piano\",\n      \"papers-please\",\n      \"walk-to-school-tales-from-the-loop\",\n      \"Believer_-_Imagine_Dragons\",\n      \"awake-celeste-ost\",\n      \"tetris-type-a\",\n      \"tales-from-the-loop\",\n      \"tetris-theme---impossible-piano\",\n      \"erla-s-waltz-olafur-arnalds\",\n      \"farewell---vicenzo-piano\",\n      \"lena-raine---rubedo\",\n      \"czarne-chmury-black-clouds-soundtrack-theme---waldemar-kazanecki\",\n      \"Tetris_Theme\",\n      \"freylekh-zain---frohlich-sein\",\n      \"i-m-cruella---nicholas-britell\",\n      \"the-midnight-waltz---vicenzo-piano\",\n      \"la-dispute---yann-tiersen\",\n    ],\n  },\n  {\n    slug: \"simple_major\",\n    midis: [\n      \"yiruma_its_your_day\",\n      \"yiruma_kiss_the_rain_easy\",\n      \"it-s-your-day---yiruma\",\n      \"turning\",\n      \"dance-suite\",\n      \"michishirube---violet-evergarden-ed\",\n      \"a-whiter-shade-of-pale-~-david-lanz\",\n      \"b.-bartok-for-children-vol-1-nr-1-children-at-play\",\n      \"b.-bartok-for-children-vol.-1-nr-38-winter-solstice-song-sz42\",\n      \"tango-flamenco---luis-de-soria-1851---1935\",\n      \"afacan-kedi---ahmed-adnan-saygun\",\n      \"happy-birthday\",\n      \"happy-birthday-waltz\",\n      \"happy_birthday_bass_and_chords\",\n      \"subwoofer-lullaby-minecraft\",\n      \"piano-serenade-in-a-flat\",\n      \"bts-bangtansonyeondan---dynamite-piano-version\",\n      \"forest-gump---main-title-feather-theme\",\n      \"we-had-today\",\n      \"homecoming-song---abdullah-ibrahim\",\n      \"mandela---abdullah-ibrahim--y8-african-music\",\n      \"maraba-blue---abdullah-ibrahim\",\n      \"theme-from-hoosiers\",\n      \"our-happy-ending---brandon-hesslau---buddy-simulator-1984\",\n      \"a-lovely-little-town---brandon-hesslau---buddy-simulator-1984\",\n      \"cardigan---taylor-swift\",\n      \"evermore---taylor-swift-feat.-bon-iver\",\n      \"love-story---taylor-swift-taylor-s-version\",\n      \"fearless---taylor-swift-2\",\n      \"enchanted-taylor-s-version---taylor-swift\",\n      \"forever-and-always---taylor-swift\",\n      \"blank-space---taylor-swift-easy-piano\",\n      \"wildest-dreams---taylor-swift\",\n      \"run-feat.-ed-sheeran-taylor-s-version-from-the-vault---taylor-swift-run-feat.-ed-sheeran-taylor-s-version-from-the-vault---flute-and-clarinet-duet\",\n      \"ttng_26_is_dancier_than_4_tablature\",\n      \"ttng---empty-palms-tablature\",\n      \"zimbabwe-national-anthem\",\n      \"nigeria-national-anthem\",\n      \"lesotho-national-anthem\",\n      \"chinar-es-komitas\",\n      \"alagyas-alaghiyssh-clarinettepiano-komitas-komitas\",\n      \"kaqavik\",\n      \"chopsticks\",\n      \"heathcliff-theme-song\",\n      \"dearly-beloved-piano-collections-kingdom-hearts\",\n      \"old-black-joe-by-stephen-foster\",\n      \"weep-no-more---stephen-c.-foster\",\n      \"oh-susanna\",\n      \"gone-from-my-heart---stephen-c.-foster\",\n      \"nujabes---counting-stars---loop-piano-cover\",\n      \"eclipse---nujabes\",\n      \"m.-loizos---o-dromos---greek-music-003\",\n      \"n.-portokalogloy---to-kalokairaki---greek-music-044\",\n      \"m.-loizos---koytsi-kithara---greek-music-048\",\n      \"la-senorita---catherine-rollin\",\n      \"raymond-pauls-ptichka-na-vetke\",\n      \"marcy-s-theme---t.j.-hill-amphibia-ost\",\n      \"idea-5---gibran-alcocer\",\n      \"the-fabelmans---john-williams\",\n      \"going-places---dennis-alexander\",\n      \"stay---chad-lawson\",\n      \"winter---lucia-salieri-vicenzo-piano\",\n      \"letter-to-my-mother---vicenzo-piano\",\n      \"awakening---vicenzo-piano\",\n      \"leaves-upon-tess\",\n      \"backpack-quest\",\n      \"when-i-am-dust-in-arcadia\",\n      \"heart-of-stone-from-six-the-musical\",\n      \"outer-wilds---main-theme---andrew-prahlow\",\n      \"outer-wilds---timber-hearth\",\n      \"this-wandering-day---bear-mccreary---the-rings-of-power\",\n      \"itsumo-nando-demo-always-with-me---spirited-away\",\n      \"city-lights---austin-farwell\",\n      \"wedding-ballet---austin-farwell\",\n      \"butterfly\",\n      \"animato-24-pieces-for-children-op.-39-no.-18---dmitri-kabalevsky\",\n      \"greendale-is-where-i-belong---ludwig-goransson---community\",\n      \"mi-tierra-veracruzana---natalia-lafourcade\",\n      \"minuet-from-music-for-the-royal-fireworks---georg-friedrich-handel\",\n      \"where-you-are-from-moana---lin-manuel-miranda-where-you-are-easy\",\n      \"the-family-madrigal-from-encanto---lin-manuel-miranda-simplified-for-kids-beginners-piano\",\n      \"only-time---enya\",\n      \"shepherd-moons---enya\",\n      \"fairytale---enya\",\n      \"schubert-german-dance-d.783-op.-33-no.-2\",\n      \"wima.e480-schubert_de.-tanz-d.365.25\",\n      \"wima.4be9-schubert_de.-tanz-d.365.28\",\n      \"wima.d5ac-schubert_deut.tanzd365.13\",\n      \"wima.e3f7-schubert_deut.tanzd365.17\",\n      \"wima.3657-schubert_deut.tanzd365.18\",\n      \"wima.02f6-schubert_deut.tanz-d.365.33\",\n      \"beethoven---bagatelle-in-a-major-no.-10---op.-119\",\n      \"devetorka-samokovsko-horo\",\n      \"rachenica-for-three\",\n      \"radino-horo\",\n      \"dolannes-melody--richard-clayderman\",\n      \"triste-coeur\",\n      \"revivre-sa-vie--richard-clayderman\",\n      \"by-this-river---brian-eno\",\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n      \"Viva_La_Vida_Coldplay\",\n      \"fix-you---coldplay\",\n      \"monochrome-filter\",\n      \"wildfire---syml\",\n      \"yours-rakuen-by-laura-shgihara\",\n      \"nde-rendape-aju-jose-a-suncion-flores-manuel-ortiz-guerrero\",\n      \"demons-imagine-dragons\",\n      \"someone-like-you\",\n      \"my-feelings\",\n      \"dreams-of-love-and-literature\",\n      \"circles---mac-miller\",\n      \"fairy-tail---mirajane-no-theme---yasuharu-takanashi-fairy-tail---mirajane-no-theme---yasuharu-takanashi-mira-s-theme\",\n      \"yuri-on-ice---piano-theme-full\",\n      \"closing-time---yehezkel-raz\",\n      \"horimiya-ep-4-untitled-track---masaru-yokoyama-please-don-t-go\",\n      \"someone-you-loved-lewis-capaldi\",\n      \"Ed_Sheeran_Perfect\",\n      \"a-thousand-years\",\n      \"the-office\",\n      \"sign-of-the-times---harry-styles\",\n      \"A_Thousand_Miles\",\n      \"undertale-dog-song-piano-solo\",\n      \"undertale---memory\",\n      \"Photograph_Ed_Sheeran\",\n      \"pallet-town---pokemon-red-blue-green-yellow-by-junichi-masuda\",\n      \"viridian-pewter-saffron-city---pokemon-rby---junichi-masuda\",\n      \"prologue---evgeny-grinko\",\n      \"lullaby-for-erik---evgeny-grinko\",\n      \"yu-nolian-ren-tati---gan-cha-noyin-le-gong-fang\",\n      \"kagayakuquan-a-shining-spring\",\n      \"chasing-kou---hidekazu-sakamoto-drowning-love---ni-rerunaihu-mule-bbajin-naipeu-ost\",\n      \"olivia-rodrigo---drivers-license\",\n      \"stand-by-me\",\n      \"turning-page---sleeping-at-last-piano-string-quartet\",\n      \"to-build-a-home-~-the-cinematic-orchestra\",\n      \"amazing-grace-choir-saa---john-newton\",\n      \"slander-dylan-matthew---love-is-gone-acoustic\",\n      \"baby-shark-song\",\n      \"pinkfong-babyshark-anonymous-20190203093900-nonstop2k.com\",\n      \"goner\",\n      \"titanium\",\n      \"chasing-cars---snow-patrol\",\n      \"Feliz_Navidad\",\n      \"feliz-navidad.2\",\n      \"richard-marx---right-here-waiting\",\n      \"ii-v-i-warmup\",\n      \"chariots-of-fire-theme\",\n      \"messages-easy-piano---vangelis\",\n      \"Good_Bye_Hachiko\",\n      \"Walking_On_a_dream\",\n      \"as_it_was_harry_styles\",\n      \"dazhe-moya-beybi-ne-znaet---poshlaya-molli\",\n      \"four-chord-song\",\n      \"hojnacki_1\",\n      \"major_diatonic_chords\",\n      \"priboi\",\n    ],\n  },\n];\n","import {\n  faArrowUpRightFromSquare,\n  faCopy,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { doc, getFirestore, updateDoc } from \"firebase/firestore/lite\";\nimport * as React from \"react\";\nimport {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { playRawMidiNote } from \"../../sampler/sampler\";\nimport { VoiceMask } from \"../App\";\nimport { AppContext } from \"../AppContext\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport { MeasureSelection } from \"./AnalysisGrid\";\nimport CompositionTitle from \"./CompositionTitle\";\nimport FrozenNotesLayout from \"./FrozenNotesLayout\";\nimport { MergedSystemLayout, SystemLayoutProps } from \"./SystemLayout\";\nimport {\n  ANALYSIS_STUB,\n  Analysis,\n  PitchClass,\n  advanceAnalysis,\n  getNewAnalysis,\n  getPhraseStarts,\n} from \"./analysis\";\nimport { findFirstPhraseStart, findTonic } from \"./autoAnalysis\";\nimport { beautifySlug } from \"./corpora/utils\";\nimport { MouseHandlers } from \"./getNoteRectangles\";\nimport LayoutSelector, { SystemLayout } from \"./layouts/LayoutSelector\";\nimport { buildManualMeasuresAndBeats } from \"./measures\";\nimport { generateFormattedScore } from \"./notesToInsertConverter\";\nimport { ColoredNotesInVoices, Note, ParsingResult } from \"./parseMidi\";\n\nexport type SecondsSpan = [number, number];\n\nconst SECOND_WIDTH = 40;\n\nexport type SecondsConverter = (number) => number;\nexport const secondsToX__: SecondsConverter = (seconds) =>\n  seconds * SECOND_WIDTH;\nexport const xToSeconds__: SecondsConverter = (x) => x / SECOND_WIDTH;\n\nexport type SetVoiceMask = (mask: boolean[]) => void;\n\nexport type AppStateForRawl = {\n  voiceNames: string[];\n  voiceMask: VoiceMask;\n  setVoiceMask: SetVoiceMask;\n  latencyCorrectionMs: number;\n};\n\nexport const getTonic = (measure: number, analysis: Analysis): PitchClass => {\n  const modulations = getModulations(analysis);\n  let i = 0;\n  while (i + 1 < modulations.length && modulations[i + 1].measure <= measure) {\n    i++;\n  }\n  return modulations[i].tonic as PitchClass;\n};\n\nexport const getModulations = (analysis: Analysis) =>\n  Object.entries(analysis.modulations || [])\n    .map((entry) => ({\n      measure: parseInt(entry[0], 10) - 1,\n      tonic: entry[1],\n    }))\n    .sort((a, b) => a.measure - b.measure);\n\nconst getSecondsMeasure = (\n  seconds: number,\n  measures: number[] | null,\n): number => {\n  if (!measures) {\n    return -1;\n  }\n  const result = measures.findIndex((time) => time >= seconds);\n  return (result === -1 ? measures.length - 1 : result) - 1;\n};\n\nconst getNoteMeasure = (note: Note, measures: number[] | null): number =>\n  getSecondsMeasure((note.span[0] + note.span[1]) / 2, measures);\n\nexport const getNoteColorPitchClass = (\n  note: Note,\n  analysis: Analysis,\n  measures: number[],\n): number | \"default\" | \"drum\" => {\n  if (note.isDrum) {\n    return \"drum\";\n  }\n\n  if (analysis.modulations[1] === null) {\n    return \"default\";\n  }\n\n  // Calculate the note's pitch class relative to the tonic\n  const noteMeasure = getNoteMeasure(note, measures);\n  const tonic = getTonic(noteMeasure, analysis);\n  const pitchClass = (note.note.midiNumber - tonic) % 12;\n  // Ensure positive value (JavaScript's % can return negative values)\n  return (pitchClass + 12) % 12;\n};\n\nexport const pitchClassToCssClass = (\n  pitchClass: number | \"default\" | \"drum\",\n): string => {\n  return `noteColor_${pitchClass}_colors`;\n};\n\nexport const getNoteColor = (\n  note: Note,\n  analysis: Analysis,\n  measures: number[],\n): string => {\n  const pitchClass = getNoteColorPitchClass(note, analysis, measures);\n  return pitchClassToCssClass(pitchClass);\n};\n\nexport type RenumberMeasureCallback = (\n  measure: number,\n  isShift: boolean,\n) => void;\n\nexport type RawlProps = {\n  parsingResult: ParsingResult;\n  getCurrentPositionMs: () => number;\n  savedAnalysis?: Analysis;\n  saveAnalysis: (analysis: Analysis) => void;\n  voiceNames: string[];\n  voiceMask: VoiceMask;\n  setVoiceMask: (mask: VoiceMask) => void;\n  enableManualRemeasuring?: boolean;\n  seek: (ms: number) => void;\n  latencyCorrectionMs: number;\n  sourceUrl: string | null;\n  measureStart?: number;\n  isEmbedded?: boolean;\n  isHiddenRoute?: boolean;\n  editorRef?: React.RefObject<any>;\n  navigateToSourceLocation?: (sourceLocation: {\n    row: number;\n    col: number;\n  }) => boolean;\n  onEject?: () => void;\n};\n\nconst Rawl: React.FC<RawlProps> = ({\n  parsingResult,\n  getCurrentPositionMs,\n  savedAnalysis,\n  saveAnalysis,\n  voiceNames,\n  voiceMask,\n  setVoiceMask,\n  enableManualRemeasuring = false,\n  seek,\n  latencyCorrectionMs,\n  sourceUrl,\n  measureStart,\n  isEmbedded = false,\n  isHiddenRoute = false,\n  editorRef,\n  navigateToSourceLocation,\n  onEject,\n}) => {\n  const { currentMidi, setCurrentMidi, rawlProps, togglePause } =\n    useContext(AppContext);\n  const slug = currentMidi?.slug || \"\";\n  const history = useHistory();\n\n  const [analysis, setAnalysis] = useState<Analysis>(\n    savedAnalysis || rawlProps?.savedAnalysis || ANALYSIS_STUB,\n  );\n\n  useEffect(() => {\n    if (savedAnalysis) {\n      setAnalysis(savedAnalysis);\n    } else if (rawlProps?.savedAnalysis) {\n      setAnalysis(rawlProps.savedAnalysis);\n    }\n  }, [savedAnalysis, rawlProps?.savedAnalysis]);\n\n  const analysisRef = useRef(analysis);\n  useEffect(() => {\n    analysisRef.current = analysis;\n  }, [analysis]);\n\n  const [systemLayout, setSystemLayout] = useState<SystemLayout>(\"merged\");\n\n  const commitAnalysisUpdate = useCallback(\n    (analysisUpdate: Partial<Analysis>) => {\n      const updatedAnalysis = { ...analysis, ...analysisUpdate };\n      saveAnalysis(updatedAnalysis);\n      setAnalysis(updatedAnalysis);\n    },\n    [analysis, saveAnalysis],\n  );\n\n  const [selectedMeasure, setSelectedMeasure] = useState<number | null>(null);\n\n  const selectedMeasureRef = useRef(selectedMeasure);\n  useEffect(() => {\n    selectedMeasureRef.current = selectedMeasure;\n  }, [selectedMeasure]);\n\n  const { notes } = parsingResult;\n  const allNotes = useMemo(() => {\n    return notes.flat();\n  }, [notes]);\n\n  const [hoveredNote, setHoveredNote] = useState<Note | null>(null);\n\n  const playNote = useCallback((note: Note) => {\n    const duration = note.span[1] - note.span[0];\n    playRawMidiNote(note.note.midiNumber, duration * 1000);\n  }, []);\n\n  const handleMouseEnter = useCallback(\n    (note: Note) => {\n      if (!enableManualRemeasuring) {\n        if (selectedMeasureRef.current) {\n          setHoveredNote(note);\n        } else if (\n          window.event instanceof MouseEvent &&\n          window.event.shiftKey\n        ) {\n          playNote(note);\n        }\n      }\n    },\n    [enableManualRemeasuring, playNote],\n  );\n\n  const handleMouseLeave = useCallback(() => {\n    if (!enableManualRemeasuring) {\n      setHoveredNote(null);\n    }\n  }, [enableManualRemeasuring]);\n\n  const futureAnalysis = useMemo(() => {\n    return hoveredNote\n      ? getNewAnalysis(\n          hoveredNote,\n          selectedMeasureRef.current,\n          enableManualRemeasuring,\n          analysisRef.current,\n        )\n      : analysis;\n  }, [hoveredNote, analysis, enableManualRemeasuring]);\n\n  const measuresAndBeats = useMemo(() => {\n    if (futureAnalysis.measures) {\n      return buildManualMeasuresAndBeats(futureAnalysis.measures, allNotes);\n    }\n    return parsingResult?.measuresAndBeats;\n  }, [futureAnalysis, allNotes, parsingResult]);\n\n  const selectMeasure = useCallback(\n    (measure) => {\n      if (\n        selectedMeasure &&\n        getPhraseStarts(analysis, measuresAndBeats.measures.length).indexOf(\n          selectedMeasure,\n        ) !== -1\n      ) {\n        const diff = measure - selectedMeasure;\n        if (diff >= -4) {\n          // prevent accidental misclicks when a selection is forgotten by user\n          const analysisUpdate: Partial<Analysis> = {\n            phrasePatch: [\n              ...analysis.phrasePatch,\n              { measure: selectedMeasure, diff },\n            ],\n          };\n          setSelectedMeasure(null);\n          commitAnalysisUpdate(analysisUpdate);\n        }\n      } else {\n        setSelectedMeasure(measure);\n      }\n      setHoveredNote(null);\n    },\n    [selectedMeasure, analysis, measuresAndBeats],\n  );\n  const splitAtMeasure = useCallback(\n    (groupByPhrasesTillTheEnd: boolean, groupSize: number = 2) => {\n      const phraseStarts = getPhraseStarts(\n        analysis,\n        measuresAndBeats.measures.length,\n      );\n      const newSections = [phraseStarts.indexOf(selectedMeasure)];\n\n      if (newSections[0] === -1) {\n        alert(\n          `splitAtMeasure, not found ${selectedMeasure} in ${JSON.stringify(\n            phraseStarts,\n          )}`,\n        );\n      } else {\n        if (groupByPhrasesTillTheEnd) {\n          for (\n            let i = newSections[0];\n            i < phraseStarts.length - 1;\n            i += groupSize\n          ) {\n            newSections.push(i);\n          }\n        }\n\n        const analysisUpdate: Partial<Analysis> = {\n          sections: [\n            ...new Set([...(analysis.sections ?? [0]), ...newSections]),\n          ].sort((a, b) => a - b),\n        };\n        setSelectedMeasure(null);\n        commitAnalysisUpdate(analysisUpdate);\n      }\n    },\n    [selectedMeasure, analysis, measuresAndBeats],\n  );\n  const mergeAtMeasure = useCallback(() => {\n    const phraseStarts = getPhraseStarts(\n      analysis,\n      measuresAndBeats.measures.length,\n    );\n    const sectionToRemove = phraseStarts.indexOf(selectedMeasure);\n    if (sectionToRemove === -1) {\n      alert(\n        `mergeAtMeasure, not found ${selectedMeasure} in ${JSON.stringify(\n          phraseStarts,\n        )}`,\n      );\n    } else {\n      const analysisUpdate: Partial<Analysis> = {\n        sections: (analysis.sections ?? [0]).filter(\n          (section) => section !== sectionToRemove,\n        ),\n      };\n      setSelectedMeasure(null);\n      commitAnalysisUpdate(analysisUpdate);\n    }\n  }, [selectedMeasure, analysis, measuresAndBeats]);\n\n  const renumberMeasure = useCallback(\n    (displayNumber, isShift) => {\n      setSelectedMeasure(null);\n\n      const analysisUpdate =\n        enableManualRemeasuring && isShift\n          ? {\n              measures: {\n                beatsPerMeasure: {\n                  ...(analysis.measures?.beatsPerMeasure ?? {}),\n                  [selectedMeasure]: displayNumber,\n                },\n                measureStarts: analysis.measures?.measureStarts ?? {},\n              },\n            }\n          : {\n              measureRenumbering: {\n                [selectedMeasure]: displayNumber,\n              },\n            };\n      commitAnalysisUpdate(analysisUpdate);\n    },\n    [selectMeasure, analysis, selectedMeasure, enableManualRemeasuring],\n  );\n\n  useEffect(() => {\n    if (analysis.phrasePatch?.length > 0) {\n      return;\n    }\n\n    const firstPhraseStart = findFirstPhraseStart(allNotes, measuresAndBeats);\n    const diff: Partial<Analysis> = {};\n    if (firstPhraseStart !== -1) {\n      diff.phrasePatch = [{ measure: 1, diff: firstPhraseStart }];\n    }\n\n    const tonic = findTonic(allNotes);\n    if (tonic !== -1 && analysis.modulations[1] === null) {\n      diff.modulations = { 1: tonic };\n    }\n    setAnalysis({ ...analysis, ...diff });\n  }, [allNotes]);\n\n  const coloredNotes: ColoredNotesInVoices = useMemo(() => {\n    // Initialize array to count notes by color (0-11)\n\n    const result = notes.map((notesInVoice, voiceIndex) =>\n      notesInVoice.map((note) => {\n        // Get the pitch class\n        const colorPitchClass = note.isDrum\n          ? \"drum\"\n          : getNoteColorPitchClass(\n              note,\n              futureAnalysis,\n              measuresAndBeats.measures,\n            );\n\n        // Get the CSS class name\n        const color = pitchClassToCssClass(colorPitchClass);\n\n        return {\n          ...note,\n          color,\n          isActive: voiceMask[voiceIndex],\n          colorPitchClass,\n          // Include sourceLocation if it exists in the note\n          sourceLocation: note.sourceLocation,\n        };\n      }),\n    );\n\n    return result;\n  }, [notes, futureAnalysis, measuresAndBeats, voiceMask, slug]);\n\n  const handleNoteClick = useCallback(\n    (note: Note) => {\n      if (selectedMeasureRef.current) {\n        advanceAnalysis(\n          note,\n          selectedMeasureRef.current,\n          enableManualRemeasuring,\n          setSelectedMeasure,\n          analysisRef.current,\n          commitAnalysisUpdate,\n        );\n      } else {\n        // First check if we can navigate to the source location\n        if (note.sourceLocation && navigateToSourceLocation) {\n          // Try to navigate and check if it was successful\n          navigateToSourceLocation(note.sourceLocation);\n        } else {\n          // Default behavior when there's no source location or navigation function\n          playNote(note);\n        }\n      }\n    },\n    [\n      enableManualRemeasuring,\n      commitAnalysisUpdate,\n      playNote,\n      navigateToSourceLocation,\n    ],\n  );\n\n  const [positionMs, setPositionMs] = useState(0);\n\n  useEffect(() => {\n    let running = true;\n\n    const animate = () => {\n      if (!running) {\n        return;\n      }\n\n      setPositionMs(getCurrentPositionMs() - latencyCorrectionMs);\n      requestAnimationFrame(animate);\n    };\n\n    animate();\n\n    return () => {\n      running = false;\n    };\n  }, [latencyCorrectionMs]);\n\n  useEffect(() => {\n    const handleEscapePress = (event) => {\n      if (event.key === \"Escape\" || event.keyCode === 27) {\n        selectMeasure(null);\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleEscapePress);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscapePress);\n    };\n  }, []);\n\n  const systemClickHandler = useCallback(\n    (e: React.MouseEvent, xToSeconds = xToSeconds__) => {\n      const targetElement = e.target as HTMLElement;\n      const rect = targetElement.getBoundingClientRect();\n      const distance = e.clientX - rect.left + targetElement.scrollLeft;\n      const time = xToSeconds(distance);\n\n      if (enableManualRemeasuring && selectedMeasure) {\n        advanceAnalysis(\n          {\n            span: [time, -1],\n            note: { midiNumber: -1 },\n            isDrum: false,\n            id: \"-1\",\n            voiceIndex: -1,\n          },\n          selectedMeasureRef.current,\n          enableManualRemeasuring,\n          setSelectedMeasure,\n          analysisRef.current,\n          commitAnalysisUpdate,\n        );\n      } else {\n        selectMeasure(null);\n\n        seek(time * 1000);\n      }\n    },\n    [\n      seek,\n      selectMeasure,\n      selectedMeasure,\n      enableManualRemeasuring,\n      commitAnalysisUpdate,\n    ],\n  );\n\n  const positionSeconds = positionMs / 1000;\n\n  // Calculate current tonic based on position\n  const currentTonic = useMemo(() => {\n    if (!measuresAndBeats?.measures) return 0;\n    const currentMeasure = getSecondsMeasure(\n      positionSeconds,\n      measuresAndBeats.measures,\n    );\n    return getTonic(currentMeasure, futureAnalysis);\n  }, [positionSeconds, measuresAndBeats, futureAnalysis]);\n\n  const mouseHandlers: MouseHandlers = useMemo(\n    () => ({\n      handleNoteClick,\n      handleMouseEnter,\n      handleMouseLeave,\n      hoveredNote,\n      systemClickHandler,\n    }),\n    [\n      handleNoteClick,\n      handleMouseEnter,\n      handleMouseLeave,\n      hoveredNote,\n      systemClickHandler,\n    ],\n  );\n\n  const measureSelection: MeasureSelection = useMemo(\n    () => ({\n      selectedMeasure,\n      selectMeasure,\n      splitAtMeasure,\n      mergeAtMeasure,\n      renumberMeasure,\n    }),\n    [\n      selectedMeasure,\n      selectMeasure,\n      splitAtMeasure,\n      mergeAtMeasure,\n      renumberMeasure,\n    ],\n  );\n\n  const [hoveredColors, setHoveredColors] = useState<string[] | null>(null);\n\n  const systemLayoutProps: SystemLayoutProps = useMemo(\n    () => ({\n      notes: coloredNotes,\n      voiceMask,\n      voiceNames,\n      setVoiceMask,\n      measuresAndBeats,\n      positionSeconds,\n      mouseHandlers,\n      measureSelection,\n      analysis: futureAnalysis,\n      frozenNotes: coloredNotes,\n      saveAnalysis,\n      measureStart,\n      slug,\n      currentTonic,\n      togglePause,\n      seek,\n      hoveredColors,\n      setHoveredColors,\n    }),\n    [\n      coloredNotes,\n      voiceMask,\n      voiceNames,\n      setVoiceMask,\n      measuresAndBeats,\n      positionSeconds,\n      mouseHandlers,\n      measureSelection,\n      futureAnalysis,\n      saveAnalysis,\n      measureStart,\n      slug,\n      currentTonic,\n      togglePause,\n      seek,\n      hoveredColors,\n      setHoveredColors,\n    ],\n  );\n\n  useEffect(() => {\n    if (measureStart !== undefined && measuresAndBeats) {\n      const absoluteMeasureStart =\n        measureStart + (analysis.measureRenumbering?.[1] || 0) - 1;\n      const seekTime = measuresAndBeats.measures[absoluteMeasureStart] - 1;\n      if (seekTime !== undefined) {\n        seek(seekTime * 1000);\n      }\n    }\n  }, [measureStart, measuresAndBeats, analysis.measureRenumbering, seek]);\n\n  const handleSourceUrlUpdate = async (newUrl: string) => {\n    if (currentMidi) {\n      const db = getFirestore();\n      const midiDocRef = doc(db, \"midis\", currentMidi.id);\n\n      try {\n        await updateDoc(midiDocRef, { url: newUrl });\n        setCurrentMidi({ ...currentMidi, sourceUrl: newUrl });\n      } catch (error) {\n        console.error(\"Error updating source URL:\", error);\n        alert(\"Failed to update source URL. Please try again.\");\n      }\n    }\n  };\n\n  const [showCopyAnimation, setShowCopyAnimation] = useState(false);\n  const copyButtonRef = useRef<HTMLButtonElement>(null);\n\n  const handleCopySource = useCallback(() => {\n    if (!measuresAndBeats || !coloredNotes || coloredNotes.length === 0) {\n      console.error(\"No data to copy\");\n      return;\n    }\n\n    // Generate complete formatted score with all voices and analysis info\n    const formattedScore = generateFormattedScore(\n      coloredNotes,\n      measuresAndBeats,\n      analysis,\n    );\n\n    // Get the beautified title to use in the editor\n    const beautifiedTitle = beautifySlug(slug);\n\n    // Store both the score and the beautified title\n    localStorage.setItem(\"new_editor_score\", formattedScore);\n    localStorage.setItem(\"new_editor_title\", beautifiedTitle);\n\n    // Navigate to the editor\n    history.push(\"/e/new\");\n\n    // Optional: show a brief feedback animation before navigating\n    setShowCopyAnimation(true);\n  }, [coloredNotes, measuresAndBeats, analysis, history, slug]);\n\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        paddingLeft: \"30px\",\n        overflow: \"hidden\",\n      }}\n    >\n      {isEmbedded && (\n        <>\n          <div\n            style={{\n              borderTop: \"1px solid #666\",\n              flexShrink: 0,\n            }}\n          />\n          <Link\n            to={`/f/${slug}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{\n              position: \"fixed\",\n              top: \"calc(50vh + 1px)\",\n              right: \"10px\",\n              color: \"white\",\n              backgroundColor: \"black\",\n              padding: \"5px 10px\",\n              borderRadius: \"5px\",\n              textDecoration: \"none\",\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"5px\",\n              zIndex: 100000000,\n              fontSize: \"14px\",\n            }}\n            onClick={() => {\n              onEject?.();\n            }}\n          >\n            <span>\n              {slug\n                .replace(/---/g, \"  \")\n                .replace(/-/g, \" \")\n                .replace(/_/g, \" \")}\n            </span>\n            <FontAwesomeIcon icon={faArrowUpRightFromSquare} />\n          </Link>\n        </>\n      )}\n      <div\n        style={{\n          flexGrow: 1,\n          display: \"flex\",\n          flexDirection: \"column\",\n          overflow: \"hidden\",\n        }}\n      >\n        <div\n          key=\"innerLeftPanel\"\n          style={{\n            margin: 0,\n            padding: 0,\n            position: \"relative\",\n            overflowX: \"scroll\",\n            overflowY: \"scroll\",\n            flexGrow: 1,\n            backgroundColor: \"black\",\n          }}\n          className=\"Rawl\"\n        >\n          {slug && !isHiddenRoute && slug !== \"forge_mock\" && (\n            <div\n              style={{\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"10px\",\n                position: \"relative\",\n              }}\n            >\n              <CompositionTitle\n                slug={slug}\n                sourceUrl={sourceUrl}\n                onSourceUrlUpdate={handleSourceUrlUpdate}\n              />\n              <button\n                ref={copyButtonRef}\n                onClick={handleCopySource}\n                style={{\n                  background: \"#333\",\n                  color: \"white\",\n                  border: \"none\",\n                  padding: \"4px 8px\",\n                  borderRadius: \"4px\",\n                  cursor: \"pointer\",\n                  fontSize: \"12px\",\n                  transition: \"background-color 0.2s, transform 0.1s\",\n                  position: \"relative\",\n                }}\n                className=\"copy-source-button\"\n              >\n                Edit score\n              </button>\n              {showCopyAnimation && (\n                <div\n                  style={{\n                    position: \"absolute\",\n                    right: copyButtonRef.current\n                      ? copyButtonRef.current.offsetWidth / 2\n                      : 20,\n                    top: 0,\n                    animation: \"flyUpAndFade 1s forwards\",\n                    opacity: 0.8,\n                    color: \"white\",\n                    pointerEvents: \"none\",\n                  }}\n                >\n                  <FontAwesomeIcon icon={faCopy} />\n                </div>\n              )}\n              <style>\n                {`\n                  @keyframes flyUpAndFade {\n                    0% {\n                      transform: translate(0, 0);\n                      opacity: 0.8;\n                    }\n                    100% {\n                      transform: translate(0, -30px);\n                      opacity: 0;\n                    }\n                  }\n                  \n                  .copy-source-button:hover {\n                    background-color: #555 !important;\n                  }\n                  \n                  .copy-source-button:active {\n                    transform: scale(0.95);\n                    background-color: #222 !important;\n                  }\n                `}\n              </style>\n            </div>\n          )}\n          {systemLayout === \"merged\" ? (\n            <MergedSystemLayout\n              {...systemLayoutProps}\n              enableManualRemeasuring={enableManualRemeasuring}\n              isEmbedded={isEmbedded}\n            />\n          ) : (\n            <ErrorBoundary\n              fallback={<div>Error loading Frozen Notes Layout</div>}\n            >\n              <FrozenNotesLayout\n                {...systemLayoutProps}\n                saveAnalysis={saveAnalysis}\n              />\n            </ErrorBoundary>\n          )}\n        </div>\n        {!isEmbedded && <LayoutSelector setSystemLayout={setSystemLayout} />}\n      </div>\n      {slug !== \"forge_mock\" && (\n        <div style={{ color: \"gray\" }}>\n          Shift+hover or click the note to play it separately\n          <br />\n          Press \"Space\" to play/pause\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Rawl;\n","import * as React from \"react\";\nimport {\n  createContext,\n  useCallback,\n  useContext,\n  useRef,\n  useState,\n} from \"react\";\nimport styled, { css, keyframes } from \"styled-components\";\nimport {\n  ARPEGGIO_DELAY_MS,\n  playArpeggiatedChord,\n  playArpeggiatedChordSequence,\n} from \"../../../sampler/sampler\";\nimport { PitchClass } from \"../analysis\";\nimport { Mode } from \"../book/chapters\";\nimport { Chord, formatChordName, rehydrateChords } from \"./chords\";\nimport { convertChordToGuitarChord } from \"./guitarChords\";\n\nconst TITLE_HEIGHT = 27;\n\nconst NOTE_HEIGHT = 3;\nconst NOTE_WIDTH = 30;\nconst HORIZONTAL_GAP = 7;\n\nconst ChordNote = styled.div<{ isPlaying?: boolean; delay?: number }>`\n  user-select: none;\n  border-radius: 4px;\n  width: ${NOTE_WIDTH}px;\n  height: ${NOTE_HEIGHT * 2}px;\n  transform-origin: center;\n  ${(props) =>\n    props.isPlaying &&\n    css`\n      animation: ${scaleOut} 0.6s ease-out;\n      animation-delay: ${props.delay}ms;\n      animation-fill-mode: forwards;\n    `}\n`;\n\nconst scaleOut = keyframes`\n  0% {\n    transform: scale(1);\n  }\n  30% {\n    transform: scale(1.5);\n  }\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst ChordBoundingBox = styled.div<{\n  clickable?: boolean;\n}>`\n  position: absolute;\n  cursor: ${(props) => (props.clickable ? \"pointer\" : \"inherit\")};\n  background: transparent;\n  z-index: 1;\n  transform-origin: center;\n`;\n\nconst ChordContent = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n`;\n\nconst ChordName = styled.div`\n  width: ${NOTE_WIDTH}px;\n  display: flex;\n  justify-content: center;\n  text-align: center;\n  position: absolute;\n`;\n\n// Create the context\nconst TonicContext = createContext<number>(0);\n\n// Create the provider component\nexport const TonicProvider: React.FC<{\n  currentTonic: number;\n  children: React.ReactNode;\n}> = ({ currentTonic, children }) => {\n  return (\n    <TonicContext.Provider value={currentTonic}>\n      {children}\n    </TonicContext.Provider>\n  );\n};\n\n// Add a hook to use the context\nconst useTonicContext = () => {\n  const context = useContext(TonicContext);\n  return context;\n};\n\nconst ChordStairs: React.FC<{\n  mode: Mode;\n  chapterChords?: string[];\n  currentTonic?: number;\n  scale?: number;\n  playbackMode?: \"separate\" | \"together\" | \"no\";\n  setHoveredColors?: (colors: string[] | null) => void;\n  showGuitarChords?: boolean;\n}> = React.memo(\n  ({\n    mode,\n    chapterChords,\n    currentTonic: propTonic,\n    scale = 1,\n    playbackMode = \"separate\",\n    setHoveredColors,\n    showGuitarChords = false,\n  }) => {\n    const contextTonic = useTonicContext();\n    const currentTonic = propTonic ?? contextTonic;\n\n    const [playingStates, setPlayingStates] = useState<{\n      [key: number]: number;\n    }>({});\n    const timeoutRef = useRef<NodeJS.Timeout[]>([]);\n\n    const { title, chords } = mode;\n    const hideLabels = playbackMode !== \"separate\";\n    const titleHeight = hideLabels ? 0 : TITLE_HEIGHT;\n\n    // Check if we should show the chord stairs\n    const chapterChordsSet = new Set(chapterChords || []) as Set<Chord>;\n    const modeChordSet = new Set(mode.chords);\n    // Only remove V for intersection check\n    const modeChordSetWithoutV = new Set(modeChordSet);\n    modeChordSetWithoutV.delete(\"V\");\n    modeChordSetWithoutV.delete(\"V7\");\n    const hasIntersection = [...chapterChordsSet].some((chord) =>\n      modeChordSetWithoutV.has(chord),\n    );\n\n    // Use original modeChordSet (with V) for filtering\n    const filteredChords = chords.filter(\n      (chord) => !chapterChords || chapterChordsSet.has(chord),\n    );\n\n    const numChords = filteredChords.length;\n\n    const rehydratedChords = rehydrateChords(filteredChords);\n\n    // Find minimum position across all chords\n    const minPosition = Math.min(\n      ...rehydratedChords.flatMap((chord) => chord.positions),\n    );\n\n    // Find which chord and which note has the minimum position\n    const pitchOfMinPosition = rehydratedChords.find((chord) =>\n      chord.positions.includes(minPosition),\n    )?.pitches[0];\n\n    // Shift all positions up by the minimum position (making the lowest note at position 0)\n    rehydratedChords.forEach((chord) => {\n      chord.positions = chord.positions.map((pos) => pos - minPosition);\n    });\n\n    const maxPosition = Math.max(\n      ...rehydratedChords.flatMap((chord) => chord.positions),\n    );\n\n    const height = maxPosition + 1;\n\n    // Calculate total height including margin top and text, plus half note height for last note\n    const totalHeight = (height + 1) * NOTE_HEIGHT;\n\n    const tonicChordPosition = filteredChords.findIndex((chord) =>\n      /^(i|I)$/.test(chord),\n    );\n\n    // Scale the constants\n    const scaledNoteHeight = NOTE_HEIGHT * scale;\n    const scaledNoteWidth = NOTE_WIDTH * scale;\n    const scaledHorizontalGap = (hideLabels ? 0 : HORIZONTAL_GAP) * scale;\n    const scaledFontSize = 16 * scale;\n\n    const handleChordClick = useCallback(\n      (chord: Chord, positions: number[], pitchOfMinPosition: number) => {\n        if (playbackMode === \"no\") return;\n\n        // Clear any existing timeouts\n        timeoutRef.current.forEach((timeout) => clearTimeout(timeout));\n        timeoutRef.current = [];\n\n        if (playbackMode === \"together\") {\n          // Reset playing states\n          setPlayingStates({});\n\n          // Prepare chord sequence\n          const chordSequence = rehydratedChords.map((chordData) =>\n            chordData.positions.map(\n              (position) => position + pitchOfMinPosition + currentTonic,\n            ),\n          );\n\n          // Play the sequence with animation callbacks\n          playArpeggiatedChordSequence(\n            chordSequence,\n            (index) => {\n              setPlayingStates((prev) => ({\n                ...prev,\n                [index]: Date.now(),\n              }));\n            },\n            (index) => {\n              setPlayingStates((prev) => {\n                const newState = { ...prev };\n                delete newState[index];\n                return newState;\n              });\n            },\n          );\n        } else {\n          // For single chord playback\n          const clickedChordIndex = rehydratedChords.findIndex(\n            (c) => c.name === chord && c.positions === positions,\n          );\n\n          // Set new timestamp for this chord\n          setPlayingStates((prev) => ({\n            [clickedChordIndex]: Date.now(),\n          }));\n\n          const transposedNotes = positions.map(\n            (position) => position + pitchOfMinPosition + currentTonic,\n          );\n          playArpeggiatedChord(transposedNotes);\n\n          const timeout = setTimeout(() => {\n            setPlayingStates({});\n          }, 600);\n\n          timeoutRef.current = [timeout];\n        }\n      },\n      [currentTonic, playbackMode, rehydratedChords],\n    );\n\n    const handleChordMouseEnter = useCallback(\n      (pitches: number[]) => {\n        if (setHoveredColors) {\n          setHoveredColors(\n            pitches.map((pitch) => `noteColor_${pitch % 12}_colors`),\n          );\n        }\n      },\n      [setHoveredColors],\n    );\n\n    const handleChordMouseLeave = useCallback(() => {\n      if (setHoveredColors) {\n        setHoveredColors(null);\n      }\n    }, [setHoveredColors]);\n\n    const getDisplayChordName = (name: string, pitches: number[]) => {\n      if (!showGuitarChords) return formatChordName(name);\n\n      const root = pitches[0];\n      const intervals = pitches.slice(1).map((p, i) => p - pitches[i]);\n      const intervalString = intervals.join(\" \");\n\n      const guitarChord = convertChordToGuitarChord(\n        ((root + currentTonic) % 12) as PitchClass,\n        intervalString,\n      );\n\n      return guitarChord || formatChordName(name);\n    };\n    return !hasIntersection && chapterChords ? (\n      <></>\n    ) : (\n      <div\n        key={title}\n        style={{\n          width:\n            numChords * scaledNoteWidth + (numChords - 1) * scaledHorizontalGap,\n          height: totalHeight * scale + titleHeight,\n          position: \"relative\",\n          fontSize: scaledFontSize,\n          marginTop: titleHeight,\n          display: \"inline-block\",\n        }}\n      >\n        {rehydratedChords.map(({ name, pitches, positions }, chordIndex) => {\n          const topPosition =\n            (maxPosition - positions.at(-1)) * scaledNoteHeight;\n          const bottomPosition =\n            (maxPosition - positions[0]) * scaledNoteHeight;\n          const chordNameOffset =\n            (chordIndex < tonicChordPosition ? -29 : 14) * scale;\n          const height =\n            bottomPosition -\n            topPosition +\n            scaledNoteHeight * 2 +\n            Math.abs(chordNameOffset) +\n            20 * scale;\n\n          return (\n            <ChordBoundingBox\n              key={`bounding-box-${chordIndex}`}\n              onClick={() =>\n                handleChordClick(name, positions, pitchOfMinPosition)\n              }\n              onMouseEnter={() => handleChordMouseEnter(pitches)}\n              onMouseLeave={handleChordMouseLeave}\n              clickable={playbackMode !== \"no\"}\n              style={{\n                left: chordIndex * (scaledNoteWidth + scaledHorizontalGap),\n                top: Math.min(topPosition + chordNameOffset, topPosition),\n                width: scaledNoteWidth,\n                height,\n              }}\n            >\n              <ChordContent>\n                <>\n                  {pitches.map((pitch, pitchIndex) => (\n                    <ChordNote\n                      key={`${chordIndex}-${pitchIndex}-${\n                        playingStates[chordIndex] || 0\n                      }`}\n                      className={`noteColor_${pitch % 12}_colors`}\n                      isPlaying={chordIndex in playingStates}\n                      delay={pitchIndex * ARPEGGIO_DELAY_MS}\n                      style={{\n                        position: \"absolute\",\n                        width: scaledNoteWidth,\n                        height: scaledNoteHeight * 2,\n                        top:\n                          (maxPosition - positions[pitchIndex]) *\n                            scaledNoteHeight +\n                          -Math.min(topPosition + chordNameOffset, topPosition),\n                      }}\n                    />\n                  ))}\n                  {!hideLabels && (\n                    <ChordName\n                      style={{\n                        top:\n                          chordIndex < tonicChordPosition\n                            ? (maxPosition - positions.at(-1)) *\n                                scaledNoteHeight -\n                              29 +\n                              -Math.min(\n                                topPosition + chordNameOffset,\n                                topPosition,\n                              )\n                            : (maxPosition - positions[0]) * scaledNoteHeight +\n                              14 +\n                              -Math.min(\n                                topPosition + chordNameOffset,\n                                topPosition,\n                              ),\n                        userSelect: \"none\",\n                        pointerEvents: \"none\",\n                        fontFamily: \"Tahoma\",\n                      }}\n                    >\n                      {getDisplayChordName(name, pitches)}\n                    </ChordName>\n                  )}\n                </>\n              </ChordContent>\n            </ChordBoundingBox>\n          );\n        })}\n        {!hideLabels && title && (\n          <div\n            style={{\n              position: \"absolute\",\n              bottom: -titleHeight / 2,\n              left: 0,\n              fontSize: scaledFontSize * 0.9,\n              color: \"#aaa\",\n              userSelect: \"none\",\n            }}\n          >\n            {title}\n          </div>\n        )}\n      </div>\n    );\n  },\n);\n\nexport default ChordStairs;\n","import autoBindReact from \"auto-bind/react\";\nimport { initializeApp as firebaseInitializeApp } from \"firebase/app\";\nimport {\n  GoogleAuthProvider,\n  User,\n  getAuth,\n  onAuthStateChanged,\n  signInWithPopup,\n  signOut,\n} from \"firebase/auth\";\nimport {\n  Firestore,\n  doc,\n  getDoc,\n  getFirestore,\n  setDoc,\n} from \"firebase/firestore/lite\";\nimport clamp from \"lodash/clamp\";\nimport md5 from \"md5\";\nimport path from \"path\";\nimport queryString from \"querystring\";\nimport React from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport Modal from \"react-modal\";\nimport {\n  Redirect,\n  Route,\n  RouteComponentProps,\n  Switch,\n  useLocation,\n  withRouter,\n} from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { slugify } from \"transliteration\";\nimport { decomposeScores } from \"./rawl/decomposition/decomposeScores\";\n\nimport ChipCore from \"../chip-core\";\nimport {\n  CATALOG_PREFIX,\n  ERROR_FLASH_DURATION_MS,\n  MAX_VOICES,\n  SOUNDFONT_MOUNTPOINT,\n} from \"../config\";\nimport firebaseConfig from \"../config/firebaseConfig\";\nimport defaultAnalyses from \"../corpus/analyses.json\";\nimport { handleSongClick as handleSongClickUtil } from \"../handlers/handleSongClick\";\nimport keySlugMapping from \"../keySlugMapping\";\nimport MIDIPlayer from \"../players/MIDIPlayer\";\nimport promisify from \"../promisify-xhr\";\nimport { FirestoreMidiDocument } from \"../types/firestore\";\nimport { ensureEmscFileWithData, unlockAudioContext } from \"../util\";\nimport Alert from \"./Alert\";\nimport { AppContext } from \"./AppContext\";\nimport AppFooter from \"./AppFooter\";\nimport AppHeader from \"./AppHeader\";\nimport DropMessage from \"./DropMessage\";\nimport Timeline from \"./Timeline\";\nimport CorpusSearch from \"./rawl/CorpusSearch\";\nimport Histograms from \"./rawl/Histograms\";\nimport OldLandingPage from \"./rawl/OldLandingPage\";\nimport Rawl, { RawlProps } from \"./rawl/Rawl\";\nimport { ShortcutHelp } from \"./rawl/ShortcutHelp\";\nimport { Analyses, MeasuresSpan } from \"./rawl/analysis\";\nimport Blog from \"./rawl/blog/Blog\";\nimport Book from \"./rawl/book/Book\";\nimport BookOnStyles from \"./rawl/book/BookOnStyles\";\nimport Corpus from \"./rawl/corpora/Corpus\";\nimport Structures, { StructuresProps } from \"./rawl/corpora/Structures\";\nimport Decomposition from \"./rawl/decomposition/Decomposition\";\nimport Converter from \"./rawl/editor/Converter\";\nimport Editor from \"./rawl/editor/Editor\";\nimport EditorLandingPage, {\n  StyledButton,\n} from \"./rawl/editor/EditorLandingPage\";\nimport ForgeUI from \"./rawl/forge/ForgeUI\";\nimport { DropSaveForm, saveMidiFromLink } from \"./rawl/midiStorage\";\nimport DAW from \"./rawl/pages/DAW\";\nimport { ParsingResult } from \"./rawl/parseMidi\";\nimport transformMidi from \"./rawl/transformMidi\";\n\n// Constants\nexport const DUMMY_CALLBACK = () => {};\nexport const ADMIN_USER_ID = \"RK31rsh4tDdUGlNYQvakXW4AYbB3\"; // Admin user ID\n\nexport type VoiceMask = boolean[];\n\ntype AppState = {\n  loading: boolean;\n  loadingUser: boolean;\n  paused: boolean;\n  ejected: boolean;\n  playerError: null;\n  currentSongNumVoices: number;\n  currentSongDurationMs: number;\n  currentSongPositionMs: number;\n  tempo: number;\n  voiceMask: VoiceMask;\n  voiceNames: string[];\n  showPlayerError: boolean;\n  user: User;\n  songUrl: string;\n  volume: number;\n  directories: any;\n  paramDefs: any;\n  parsing: ParsingResult;\n  enableManualRemeasuring: boolean;\n  analyses: Analyses;\n  latencyCorrectionMs: number;\n  fileToDownload: Uint8Array;\n  showShortcutHelp: boolean;\n  rawlProps: RawlProps | null;\n  currentMidi: {\n    id: string;\n    title: string;\n    slug: string;\n    sourceUrl: string | null;\n    isHiddenRoute: boolean;\n  } | null;\n  audioContextLocked: boolean;\n  audioContextState: string;\n  currentPlaybackTime: number | null;\n  currentMidiBuffer: ArrayBuffer | null;\n  hoveredMeasuresSpan: MeasuresSpan | null;\n};\n\ntype KeyboardHandler = (e: KeyboardEvent) => void;\n\nModal.setAppElement(\"#root\");\n\nfunction mergeAnalyses(existingAnalyses, newAnalyses) {\n  return {\n    ...existingAnalyses,\n    ...newAnalyses,\n  };\n}\n\nconst AppMainContent = styled.div`\n  margin-bottom: 25px; // Add space for fixed footer\n  height: 100vh; // Subtract header height and footer margin\n  overflow-y: auto; // Enable vertical scrolling\n  padding: 0; // Add some horizontal padding\n`;\n\nclass App extends React.Component<RouteComponentProps, AppState> {\n  private contentAreaRef: React.RefObject<HTMLDivElement>;\n  private errorTimer: number;\n  private midiPlayer: MIDIPlayer;\n  private currUrl: string;\n  private songRequest: (method: string, url: string) => Promise<any>;\n  private db: Firestore;\n  private mediaSessionAudio: HTMLAudioElement;\n  private gainNode: GainNode;\n  private chipCore: any;\n  private path: string;\n  private hash: string;\n  private midi: ArrayBuffer;\n  private droppedFilename: string;\n  private keyboardHandlers: Map<string, KeyboardHandler> = new Map();\n  private audioContext: AudioContext;\n  private playbackTimer: NodeJS.Timeout;\n\n  constructor(props) {\n    super(props);\n    autoBindReact(this);\n\n    this.attachMediaKeyHandlers();\n    this.contentAreaRef = React.createRef();\n    this.errorTimer = null;\n    this.midiPlayer = null; // Need a reference to MIDIPlayer to handle SoundFont loading.\n    this.currUrl = null;\n    this.songRequest = null;\n\n    // Initialize Firebase\n    const firebaseApp = firebaseInitializeApp(firebaseConfig);\n    const auth = getAuth(firebaseApp);\n    this.db = getFirestore(firebaseApp);\n\n    // Load the admin analyses\n    const adminDocRef = doc(this.db, \"users\", ADMIN_USER_ID);\n    getDoc(adminDocRef).then((adminSnapshot) => {\n      if (adminSnapshot.exists() && adminSnapshot.data().analyses) {\n        this.setState({\n          analyses: { ...defaultAnalyses, ...adminSnapshot.data().analyses },\n        });\n      }\n    });\n\n    onAuthStateChanged(auth, (user) => {\n      this.setState({\n        user,\n        loadingUser: !!user,\n      });\n      if (user) {\n        this.loadUserAnalyses(user.uid);\n      } else {\n        this.setState({ loadingUser: false });\n      }\n    });\n\n    // Initialize audio context\n    // @ts-ignore webkitAudioContext needed for Safari <=13\n    this.audioContext = new (window.AudioContext || window.webkitAudioContext)({\n      latencyHint: \"playback\",\n    });\n\n    this.audioContext.suspend();\n\n    // Get latency correction from localStorage\n    const savedLatencyCorrection = localStorage.getItem(\"latencyCorrectionMs\");\n    const initialLatencyCorrection = savedLatencyCorrection\n      ? parseInt(savedLatencyCorrection, 10)\n      : 500;\n\n    // Initialize state with actual audio context state\n    this.state = {\n      loading: true,\n      loadingUser: true,\n      paused: true,\n      ejected: true,\n      playerError: null,\n      currentSongNumVoices: 0,\n      currentSongDurationMs: 1,\n      currentSongPositionMs: 0,\n      tempo: 1,\n      voiceMask: Array(MAX_VOICES).fill(true),\n      voiceNames: Array(MAX_VOICES).fill(\"\"),\n      showPlayerError: false,\n      user: null,\n      songUrl: null,\n      volume: 150,\n      directories: {},\n      paramDefs: [],\n      parsing: null,\n      enableManualRemeasuring: false,\n      analyses: defaultAnalyses as unknown as Analyses,\n      latencyCorrectionMs: initialLatencyCorrection,\n      fileToDownload: null,\n      showShortcutHelp: false,\n      rawlProps: null,\n      currentMidi: null,\n      audioContextLocked: this.audioContext.state === \"suspended\",\n      audioContextState: this.audioContext.state,\n      currentPlaybackTime: null,\n      currentMidiBuffer: null,\n      hoveredMeasuresSpan: null,\n    };\n\n    const bufferSize = Math.max(\n      Math.pow(\n        2,\n        Math.ceil(\n          Math.log2(\n            (this.audioContext.baseLatency || 0.001) *\n              this.audioContext.sampleRate,\n          ),\n        ),\n      ),\n      16384,\n    );\n    const gainNode = (this.gainNode = this.audioContext.createGain());\n    gainNode.gain.value = 1;\n    gainNode.connect(this.audioContext.destination);\n    const playerNode = this.audioContext.createScriptProcessor(\n      bufferSize,\n      0,\n      2,\n    );\n    playerNode.connect(gainNode);\n\n    unlockAudioContext(this.audioContext);\n    console.log(\n      \"Sample rate: %d hz. Base latency: %d. Buffer size: %d.\",\n      this.audioContext.sampleRate,\n      this.audioContext.baseLatency * this.audioContext.sampleRate,\n      bufferSize,\n    );\n\n    this.initChipCore(playerNode, bufferSize);\n\n    // Inline processMidiUrls here\n    const location = this.props.location;\n    const params = new URLSearchParams(location.search);\n\n    const link = params.get(\"link\");\n    if (link) {\n      saveMidiFromLink(link);\n    }\n\n    const [, urlSlug] = location.pathname.split(\"/f/\");\n    const [, keySlug] = location.pathname.split(\"/h/\");\n\n    if (urlSlug) {\n      this.handleSongClick(urlSlug);\n    } else if (keySlug) {\n      const valueSlug = keySlugMapping[keySlug];\n      if (valueSlug) {\n        this.handleSongClick(valueSlug, true);\n      } else {\n        console.error(`No mapping found for key slug: ${keySlug}`);\n      }\n    }\n  }\n\n  loadUserAnalyses(userId: string) {\n    const userDocRef = doc(this.db, \"users\", userId);\n    getDoc(userDocRef)\n      .then((userSnapshot) => {\n        if (userSnapshot.exists()) {\n          const userData = userSnapshot.data();\n          if (userData.analyses) {\n            this.setState((prevState) => ({\n              analyses: mergeAnalyses(prevState.analyses, userData.analyses),\n            }));\n          }\n        } else {\n          // Create user document if it doesn't exist\n          console.debug(\"Creating user document\", userId);\n          setDoc(userDocRef, {\n            user: {\n              email: this.state.user.email,\n            },\n          });\n        }\n      })\n      .finally(() => {\n        this.setState({ loadingUser: false });\n      });\n  }\n\n  async initChipCore(playerNode, bufferSize) {\n    const audioState = this.audioContext.state;\n    this.setState({\n      audioContextLocked: audioState === \"suspended\",\n      audioContextState: audioState,\n    });\n\n    // Add event listener to track audio context state changes\n    this.audioContext.addEventListener(\"statechange\", () => {\n      const newState = this.audioContext.state;\n      this.setState({\n        audioContextLocked: newState === \"suspended\",\n        audioContextState: newState,\n      });\n    });\n\n    // Load the chip-core Emscripten runtime\n    try {\n      // @ts-ignore\n      this.chipCore = await new ChipCore({\n        // Look for .wasm file in web root, not the same location as the app bundle (static/js).\n        locateFile: (path, prefix) => {\n          if (path.endsWith(\".wasm\") || path.endsWith(\".wast\"))\n            return `${process.env.PUBLIC_URL}/${path}`;\n          return prefix + path;\n        },\n        print: (msg) => console.debug(\"[stdout] \" + msg),\n        printErr: (msg) => console.debug(\"[stderr] \" + msg),\n      });\n    } catch (e) {\n      // Browser doesn't support WASM (Safari in iOS Simulator)\n      Object.assign(this.state, {\n        playerError: \"Error loading player engine. Old browser?\",\n        loading: false,\n      });\n      return;\n    }\n\n    // Get debug from location.search\n    const debug = queryString.parse(window.location.search.substring(1)).debug;\n    // Create all the players. Players will set up IDBFS mount points.\n    const self = this;\n    this.midiPlayer = new MIDIPlayer(\n      this.chipCore,\n      this.audioContext.sampleRate,\n      bufferSize,\n      debug,\n      (parsing) =>\n        self.setState({\n          parsing,\n        }),\n      this.togglePause,\n    );\n    this.midiPlayer.on(\"playerStateUpdate\", this.handlePlayerStateUpdate);\n    this.midiPlayer.on(\"playerError\", this.handlePlayerError);\n\n    // Set up the central audio processing callback. This is where the magic happens.\n    playerNode.onaudioprocess = (e) => {\n      const channels = [];\n      for (let i = 0; i < e.outputBuffer.numberOfChannels; i++) {\n        channels.push(e.outputBuffer.getChannelData(i));\n      }\n      if (!this.midiPlayer?.stopped) {\n        this.midiPlayer?.processAudio(channels);\n      }\n    };\n\n    // Populate all mounted IDBFS file systems from IndexedDB.\n    this.chipCore.FS.syncfs(true, (err) => {\n      this.midiPlayer?.handleFileSystemReady();\n    });\n\n    this.setState({ loading: false });\n  }\n\n  static mapSequencerStateToAppState(sequencerState) {\n    const map = {\n      ejected: \"isEjected\",\n      paused: \"isPaused\",\n      currentSongNumVoices: \"numVoices\",\n      currentSongPositionMs: \"positionMs\",\n      currentSongDurationMs: \"durationMs\",\n      tempo: \"tempo\",\n      voiceNames: \"voiceNames\",\n      voiceMask: \"voiceMask\",\n      songUrl: \"url\",\n      // TODO: add param values? move to paramStateUpdate?\n      paramDefs: \"paramDefs\",\n    };\n    const appState = {};\n    for (let prop in map) {\n      const seqProp = map[prop];\n      if (seqProp in sequencerState) {\n        appState[prop] = sequencerState[seqProp];\n      }\n    }\n    return appState;\n  }\n\n  handleLogin() {\n    const auth = getAuth();\n    const provider = new GoogleAuthProvider();\n    signInWithPopup(auth, provider)\n      .then((result) => {\n        console.log(\"Firebase auth result:\", result);\n        // Execute callback if provided, or refresh the page\n        window.location.reload();\n      })\n      .catch((error) => {\n        console.log(\"Firebase auth error:\", error);\n      });\n  }\n\n  handleLogout() {\n    const auth = getAuth();\n    signOut(auth).then(() => {\n      this.setState({\n        user: null,\n      });\n    });\n  }\n\n  async saveAnalysis(analysis) {\n    if (this.path === \"drop\") return;\n\n    const user = this.state.user;\n    if (user) {\n      const userRef = doc(this.db, \"users\", user.uid);\n      const userDoc = await getDoc(userRef);\n\n      let userData = userDoc.exists() ? userDoc.data() : {};\n      userData.analyses = mergeAnalyses(userData.analyses ?? {}, {\n        [this.path]: analysis,\n      });\n\n      await setDoc(userRef, userData).catch(() => {\n        alert(\"Could not save analysis\");\n      });\n\n      this.setState((prevState) => ({\n        analyses: mergeAnalyses(prevState.analyses, userData.analyses),\n      }));\n    } else {\n      if (this.state.currentMidi) {\n        this.setState((prevState) => ({\n          analyses: mergeAnalyses(prevState.analyses, {\n            [`f/${this.state.currentMidi.slug}`]: analysis,\n          }),\n        }));\n      }\n    }\n  }\n\n  attachMediaKeyHandlers() {\n    if (\"mediaSession\" in navigator) {\n      console.log(\"Attaching Media Key event handlers.\");\n\n      // Limitations of MediaSession: there must always be an active audio element.\n      // See https://bugs.chromium.org/p/chromium/issues/detail?id=944538\n      //     https://github.com/GoogleChrome/samples/issues/637\n      this.mediaSessionAudio = document.createElement(\"audio\");\n      this.mediaSessionAudio.src =\n        process.env.PUBLIC_URL + \"/5-seconds-of-silence.mp3\";\n      this.mediaSessionAudio.loop = true;\n      this.mediaSessionAudio.volume = 0;\n\n      navigator.mediaSession.setActionHandler(\"play\", () => this.togglePause());\n      navigator.mediaSession.setActionHandler(\"pause\", () =>\n        this.togglePause(),\n      );\n      navigator.mediaSession.setActionHandler(\"seekbackward\", () =>\n        this.seekRelative(-5000),\n      );\n      navigator.mediaSession.setActionHandler(\"seekforward\", () =>\n        this.seekRelative(5000),\n      );\n    }\n\n    document.addEventListener(\"keydown\", (e) => {\n      // Skip all keyboard shortcuts if globally disabled\n      if (window.__disableGlobalShortcuts) return;\n\n      // Keyboard shortcuts: tricky to get it just right and keep the browser behavior intact.\n      // The order of switch-cases matters. More privileged keys appear at the top.\n      // More restricted keys appear at the bottom, after various input focus states are filtered out.\n      if (e.ctrlKey || e.metaKey) return; // avoid browser keyboard shortcuts\n\n      switch (e.key) {\n        case \"Escape\":\n          if (e.target instanceof HTMLElement) {\n            e.target.blur();\n          }\n          break;\n        default:\n      }\n\n      if (\n        e.target instanceof HTMLInputElement &&\n        e.target.tagName === \"INPUT\" &&\n        e.target.type === \"text\"\n      )\n        return; // text input has focus\n\n      switch (e.key) {\n        case \" \":\n          this.togglePause();\n          e.preventDefault();\n          break;\n        case \"u\":\n          const { location } = this.props;\n          navigator.clipboard.writeText(\n            `\"${location.pathname.substring(\n              location.pathname.lastIndexOf(\"/\") + 1,\n            )}\", `,\n          );\n          e.preventDefault();\n          break;\n        case \"-\":\n          this.setSpeedRelative(-0.1);\n          break;\n        case \"_\":\n          this.setSpeedRelative(-0.01);\n          break;\n        case \"=\":\n          this.setSpeedRelative(0.1);\n          break;\n        case \"+\":\n          this.setSpeedRelative(0.01);\n          break;\n        case \"p\":\n          this.setLatencyCorrectionMs(0);\n          e.preventDefault();\n          break;\n        case \"[\":\n          this.setLatencyCorrectionMs(200);\n          e.preventDefault();\n          break;\n        case \"]\":\n          this.setLatencyCorrectionMs(800);\n          e.preventDefault();\n          break;\n        case \"h\":\n          this.toggleShortcutHelp();\n          e.preventDefault();\n          break;\n        case \"r\":\n          this.setState((prevState) => ({\n            enableManualRemeasuring: !prevState.enableManualRemeasuring,\n          }));\n          e.preventDefault();\n          break;\n        default:\n      }\n\n      if (\n        e.target instanceof HTMLInputElement &&\n        e.target.tagName === \"INPUT\" &&\n        e.target.type === \"range\"\n      )\n        return; // a range slider has focus\n\n      switch (e.key) {\n        case \"ArrowLeft\":\n          this.seekRelative(-5000);\n          e.preventDefault();\n          break;\n        case \"ArrowRight\":\n          this.seekRelative(5000);\n          e.preventDefault();\n          break;\n        default:\n      }\n\n      // Run all registered handlers\n      this.keyboardHandlers.forEach((handler) => handler(e));\n    });\n  }\n\n  handleSequencerStateUpdate(sequencerState) {\n    const { isEjected } = sequencerState;\n\n    if (isEjected) {\n      this.setState({\n        ejected: true,\n        currentSongNumVoices: 0,\n        currentSongPositionMs: 0,\n        currentSongDurationMs: 1,\n        songUrl: null,\n      });\n\n      if (\"mediaSession\" in navigator) {\n        this.mediaSessionAudio.pause();\n\n        navigator.mediaSession.playbackState = \"none\";\n      }\n    } else {\n      if (\"mediaSession\" in navigator) {\n        this.mediaSessionAudio.play();\n      }\n\n      this.setState({\n        ...App.mapSequencerStateToAppState(sequencerState),\n      });\n    }\n  }\n\n  handlePlayerError(message) {\n    this.handleSequencerStateUpdate({ isEjected: true });\n    if (message) this.setState({ playerError: message });\n    this.setState({ showPlayerError: !!message });\n    clearTimeout(this.errorTimer);\n    // see https://chatgpt.com/share/14effd20-b14e-4fb1-b644-6b76a6151c1d\n    // @ts-ignore\n    this.errorTimer = setTimeout(\n      () => this.setState({ showPlayerError: false }),\n      ERROR_FLASH_DURATION_MS,\n    );\n  }\n\n  togglePause() {\n    if (this.state.ejected) return;\n\n    const paused = this.midiPlayer?.togglePause();\n    if (\"mediaSession\" in navigator) {\n      if (paused) {\n        this.mediaSessionAudio.pause();\n      } else {\n        this.mediaSessionAudio.play();\n      }\n    }\n    this.setState({ paused: paused });\n  }\n\n  handleTimeSliderChange(event) {\n    const pos = event.target ? event.target.value : event;\n    const seekMs = Math.floor(pos * this.state.currentSongDurationMs);\n\n    this.seekRelativeInner(seekMs);\n  }\n\n  seekRelative(ms: number) {\n    const durationMs = this.state.currentSongDurationMs;\n    const seekMs = clamp(this.midiPlayer?.getPositionMs() + ms, 0, durationMs);\n\n    this.seekRelativeInner(seekMs);\n  }\n\n  seekRelativeInner(seekMs: number) {\n    this.midiPlayer?.seekMs(seekMs);\n    this.setState({\n      currentSongPositionMs: seekMs, // Smooth\n    });\n    setTimeout(() => {\n      if (this.midiPlayer?.isPlaying()) {\n        this.setState({\n          currentSongPositionMs: this.midiPlayer?.getPositionMs(), // Accurate\n        });\n      }\n    }, 100);\n  }\n\n  seekForRawl = (seekMs: number) => this.seekRelativeInner(seekMs);\n\n  handleSetVoiceMask(voiceMask: VoiceMask) {\n    this.midiPlayer?.setVoiceMask(voiceMask);\n    this.setState({ voiceMask: [...voiceMask] });\n  }\n\n  handleTempoChange(event) {\n    const tempo = parseFloat(event.target ? event.target.value : event) || 1.0;\n    this.midiPlayer?.setTempo(tempo);\n    this.setState({\n      tempo: tempo,\n    });\n  }\n\n  setSpeedRelative(delta) {\n    const tempo = clamp(this.state.tempo + delta, 0.1, 4);\n    this.midiPlayer?.setTempo(tempo);\n    this.setState({\n      tempo: tempo,\n    });\n  }\n\n  handleSongClick = async (slug: string, isHiddenRoute: boolean = false) => {\n    try {\n      await handleSongClickUtil(\n        {\n          setState: this.setState.bind(this),\n          loadMidi: this.loadMidi,\n          state: this.state,\n        },\n        slug,\n        isHiddenRoute,\n      );\n\n      // After successful load, start playback automatically\n      if (this.midiPlayer && this.state.paused) {\n        this.togglePause();\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  loadMidi = (midiBlob: Blob, playbackStartedCallback?: () => void) => {\n    if (this.midiPlayer) {\n      midiBlob\n        .arrayBuffer()\n        .then((arrayBuffer) => {\n          const transformedBuffer = transformMidi(new Uint8Array(arrayBuffer));\n\n          this.setState({ currentMidiBuffer: arrayBuffer });\n\n          this.midiPlayer.setPlaybackStartedCallback(playbackStartedCallback);\n\n          this.midiPlayer\n            .loadData(transformedBuffer, this.state.currentMidi?.slug || \"\")\n            .then((parsingResult) => {\n              this.setState({ parsing: parsingResult }, () => {\n                this.setupMidiPlayer();\n              });\n            })\n            .catch((error) => {\n              // Handle error silently\n            });\n        })\n        .catch((error) => {\n          // Handle error silently\n        });\n    }\n  };\n\n  setupMidiPlayer = () => {\n    this.setState(\n      (prevState) => {\n        const slug = prevState.currentMidi?.slug;\n        const analysisKey = `f/${slug}`;\n        const savedAnalysis = prevState.analyses[analysisKey];\n\n        if (!this.state.parsing) {\n          return null;\n        }\n\n        const newRawlProps = {\n          parsingResult: this.state.parsing,\n          getCurrentPositionMs: this.midiPlayer?.getPositionMs || (() => 0),\n          savedAnalysis: savedAnalysis,\n          saveAnalysis: this.saveAnalysis,\n          voiceNames: this.state.voiceNames,\n          voiceMask: this.state.voiceMask,\n          setVoiceMask: this.handleSetVoiceMask,\n          enableManualRemeasuring: this.state.enableManualRemeasuring,\n          seek: this.seekForRawl,\n          latencyCorrectionMs:\n            this.state.latencyCorrectionMs * this.state.tempo,\n          registerKeyboardHandler: this.registerKeyboardHandler,\n          unregisterKeyboardHandler: this.unregisterKeyboardHandler,\n          sourceUrl: prevState.currentMidi?.sourceUrl || null,\n          isHiddenRoute: prevState.currentMidi?.isHiddenRoute || false,\n        };\n        return { rawlProps: newRawlProps };\n      },\n      () => {\n        // Remove automatic playback start - let user control it\n        // this.startPlayback();\n      },\n    );\n  };\n\n  startPlayback = () => {\n    if (!this.midiPlayer) {\n      // Handle error silently\n    }\n  };\n\n  handleVolumeChange(volume: number) {\n    this.setState({ volume });\n    this.gainNode.gain.value = Math.max(0, Math.min(2, volume * 0.01));\n  }\n\n  processFetchedDirectory(path, items) {\n    const directories = {\n      ...this.state.directories,\n      [path]: items,\n    };\n    this.setState({ directories });\n  }\n\n  onDrop = (droppedFiles) => {\n    const reader = new FileReader();\n    const file = droppedFiles[0];\n    this.droppedFilename = slugify(file.name.replace(/\\.mid$/i, \"\"));\n    const ext = path.extname(file.name).toLowerCase();\n    if (ext === \".sf2\" && !this.midiPlayer) {\n      this.handlePlayerError(\n        \"MIDIPlayer has not been created - unable to load SoundFont.\",\n      );\n      return;\n    }\n    reader.onload = async () => {\n      const result = reader.result as ArrayBuffer;\n      if (ext === \".sf2\" && this.midiPlayer) {\n        const sf2Path = `user/${file.name}`;\n        const forceWrite = true;\n        const isTransient = false;\n        await ensureEmscFileWithData(\n          this.chipCore,\n          `${SOUNDFONT_MOUNTPOINT}/${sf2Path}`,\n          new Uint8Array(result),\n          forceWrite,\n        );\n        this.midiPlayer?.updateSoundfontParamDefs();\n        this.midiPlayer?.setParameter(\"soundfont\", sf2Path, isTransient);\n        // TODO: emit \"paramDefsChanged\" from player.\n        // See https://reactjs.org/docs/integrating-with-other-libraries.html#integrating-with-model-layers\n        this.forceUpdate();\n      } else {\n        this.props.history.push(\"/drop\");\n        this.currUrl = null;\n        this.midi = result;\n        this.playSongBuffer(file.name, result);\n      }\n    };\n    reader.readAsArrayBuffer(file);\n  };\n\n  setLatencyCorrectionMs = (latencyCorrectionMs: number) => {\n    this.setState({ latencyCorrectionMs });\n    localStorage.setItem(\"latencyCorrectionMs\", latencyCorrectionMs.toString());\n  };\n\n  handlePlayerStateUpdate(playerState) {\n    const { isStopped, isPlaying } = playerState;\n    console.debug(\"Sequencer.handlePlayerStateUpdate(isStopped=%s)\", isStopped);\n\n    if (isStopped) {\n      this.currUrl = null;\n      // Set paused to true when playback has stopped/finished\n      this.setState({ paused: true });\n    } else {\n      // Also update paused state when isPlaying flag is explicitly provided\n      if (isPlaying !== undefined) {\n        this.setState({ paused: !isPlaying });\n      }\n\n      this.handleSequencerStateUpdate({\n        url: this.currUrl,\n        isEjected: false,\n        ...playerState,\n      });\n    }\n  }\n\n  toggleShortcutHelp = () => {\n    this.setState((prevState) => ({\n      showShortcutHelp: !prevState.showShortcutHelp,\n    }));\n  };\n\n  playSong(url) {\n    if (url.startsWith(\"static/f\")) return;\n\n    if (url.startsWith(\"static\")) {\n      url = url.replace(\"static\", \"https://rawl.rocks/midi\");\n    } else {\n      // Normalize url - paths are assumed to live under CATALOG_PREFIX\n      url =\n        url.startsWith(\"http\") || url.startsWith(\"f:\")\n          ? url\n          : CATALOG_PREFIX + encodeURIComponent(encodeURIComponent(url));\n    }\n\n    // Find a player that can play this filetype\n    const ext =\n      url.includes(\"score.mid\") || url.startsWith(\"f:\")\n        ? \"mid\"\n        : url.split(\".\").pop().toLowerCase();\n\n    if (!this.midiPlayer.canPlay(ext)) {\n      this.handlePlayerError(`The file format \".${ext}\" was not recognized.`);\n      return;\n    }\n\n    if (url.startsWith(\"f:\")) {\n      const playFromFirestore = async () => {\n        const firestore = getFirestore();\n        const { blob, url: sourceUrl } = (\n          await getDoc(doc(firestore, \"midis\", url.slice(2)))\n        ).data() as FirestoreMidiDocument;\n\n        // Update the state with sourceUrl\n        this.setState((prevState) => ({\n          currentMidi: {\n            ...prevState.currentMidi,\n            sourceUrl: sourceUrl || null, // Use null if sourceUrl is undefined or empty\n          },\n        }));\n\n        const transformedMidi = transformMidi(\n          Uint8Array.from(blob.toUint8Array()),\n        );\n\n        this.playSongBuffer(url, transformedMidi);\n      };\n      playFromFirestore();\n    } else {\n      // Fetch the song file (cancelable request)\n      // Cancel any outstanding request so that playback doesn't happen out of order\n      if (this.songRequest) {\n        // @ts-ignore\n        this.songRequest.abort();\n      }\n      // TODO: rewrite on fetch()\n      this.songRequest = promisify(new XMLHttpRequest());\n      // @ts-ignore\n      this.songRequest.responseType = \"arraybuffer\";\n      // @ts-ignore\n      this.songRequest.open(\"GET\", url);\n      this.songRequest\n        // @ts-ignore\n        .send()\n        .then((xhr) => xhr.response)\n        .then((buffer) => {\n          this.currUrl = url;\n          const filepath = url.replace(CATALOG_PREFIX, \"\");\n          this.playSongBuffer(filepath, buffer);\n        })\n        .catch((e) => {\n          this.handlePlayerError(\n            e.message || `HTTP ${e.status} ${e.statusText} ${url}`,\n          );\n        });\n    }\n  }\n\n  async playSongBuffer(\n    filepath: string,\n    buffer: ArrayBuffer | Uint8Array,\n    shouldAutoPlay: boolean = true,\n  ) {\n    this.midiPlayer.suspend();\n\n    const inputArray =\n      buffer instanceof Uint8Array ? buffer : new Uint8Array(buffer);\n\n    const uint8Array = transformMidi(inputArray);\n\n    this.hash = md5(uint8Array);\n\n    this.midiPlayer.setTempo(1);\n\n    this.setState({\n      // @ts-ignore\n      currentMidiBuffer: buffer instanceof ArrayBuffer ? buffer : buffer.buffer,\n      paused: !shouldAutoPlay,\n    });\n\n    try {\n      const parsingResult = await this.midiPlayer.loadData(\n        uint8Array,\n        filepath,\n        shouldAutoPlay,\n      );\n\n      this.setState({ parsing: parsingResult }, () => {\n        const numVoices = this.midiPlayer.getNumVoices();\n        const voiceMask = [...Array(numVoices)].fill(true);\n        this.midiPlayer.setVoiceMask(voiceMask);\n        this.setState({ voiceMask }, () => {\n          this.setupMidiPlayer();\n\n          if (!shouldAutoPlay) {\n            this.midiPlayer.pause();\n          }\n        });\n      });\n    } catch (e) {\n      this.handlePlayerError(`Unable to play ${filepath} (${e.message}).`);\n    }\n  }\n\n  registerKeyboardHandler = (id: string, handler: KeyboardHandler) => {\n    this.keyboardHandlers.set(id, handler);\n  };\n\n  unregisterKeyboardHandler = (id: string) => {\n    this.keyboardHandlers.delete(id);\n  };\n\n  resetMidiPlayerState = () => {\n    if (this.midiPlayer) {\n      this.midiPlayer.eject();\n    }\n    this.setState({\n      ejected: true,\n      currentSongNumVoices: 0,\n      currentSongPositionMs: 0,\n      currentSongDurationMs: 1,\n      songUrl: null,\n      rawlProps: null,\n      currentMidi: null,\n      parsing: null,\n    });\n  };\n\n  handleUnlockAudioContext = async () => {\n    if (this.audioContext) {\n      await this.audioContext.resume();\n      this.setState({\n        audioContextLocked: this.audioContext.state === \"suspended\",\n        audioContextState: this.audioContext.state,\n      });\n    }\n  };\n\n  // Add this method to update playback time\n  updatePlaybackTime = () => {\n    if (this.midiPlayer && this.midiPlayer.isPlaying()) {\n      const positionMs = this.midiPlayer.getPositionMs();\n      this.setState({ currentPlaybackTime: positionMs / 1000 });\n    }\n  };\n\n  componentDidMount() {\n    // Start the playback time update timer with a longer interval\n    this.playbackTimer = setInterval(this.updatePlaybackTime, 100); // Update every 100ms instead of 50ms\n  }\n\n  componentWillUnmount() {\n    // Clear the playback timer\n    if (this.playbackTimer) {\n      clearInterval(this.playbackTimer);\n    }\n  }\n\n  eject = () => {\n    if (this.midiPlayer) {\n      this.midiPlayer.eject();\n      this.handleSequencerStateUpdate({ isEjected: true });\n    }\n  };\n\n  componentDidUpdate(prevProps: RouteComponentProps) {\n    const prevPath = prevProps.location.pathname;\n    const currentPath = this.props.location.pathname;\n    const isStructuresRoute = currentPath.startsWith(\"/s/\");\n    const wasStructuresRoute = prevPath.startsWith(\"/s/\");\n\n    // Only eject if navigating into Structures from a non-Structures route\n    if (isStructuresRoute && !wasStructuresRoute) {\n      this.eject();\n      // Reset rawlProps to hide InlineRawl\n      this.setState({\n        rawlProps: null,\n        currentMidi: null,\n      });\n    }\n  }\n\n  render() {\n    const rawlProps: RawlProps = {\n      parsingResult: this.state.parsing,\n      getCurrentPositionMs: this.midiPlayer?.getPositionMs,\n      savedAnalysis: this.state.analyses[this.path] ?? null,\n      saveAnalysis: this.saveAnalysis,\n      voiceNames: this.state.voiceNames,\n      voiceMask: this.state.voiceMask,\n      setVoiceMask: this.handleSetVoiceMask,\n      enableManualRemeasuring: this.state.enableManualRemeasuring,\n      seek: this.seekForRawl,\n      latencyCorrectionMs: this.state.latencyCorrectionMs * this.state.tempo,\n      sourceUrl: this.state.currentMidi?.sourceUrl || null,\n    };\n\n    const rawlRoute = (\n      <Route\n        path={[\"/f/:slug*\", \"/h/:keySlug*\", \"/c/:chiptuneUrl*\", \"/drop\"]}\n        render={({ match }) => {\n          const { keySlug } = match.params as {\n            slug?: string;\n            keySlug?: string;\n            chiptuneUrl?: string;\n          };\n          const { parsing } = this.state;\n          this.path = match.url.slice(1);\n          return (\n            <>\n              {parsing && (\n                <>\n                  <Rawl\n                    parsingResult={parsing}\n                    getCurrentPositionMs={this.midiPlayer?.getPositionMs}\n                    savedAnalysis={this.state.analyses[this.path] ?? null}\n                    saveAnalysis={this.saveAnalysis}\n                    enableManualRemeasuring={this.state.enableManualRemeasuring}\n                    seek={this.seekForRawl}\n                    sourceUrl={this.state.currentMidi?.sourceUrl || null}\n                    isHiddenRoute={!!keySlug}\n                    {...rawlProps}\n                  />\n                  {match.path === \"/drop\" && (\n                    <DropSaveForm\n                      midi={this.midi}\n                      filename={this.droppedFilename}\n                    />\n                  )}\n                </>\n              )}\n            </>\n          );\n        }}\n      />\n    );\n\n    const decompositionRoute = (\n      <Route\n        path=\"/d/:slug/:step?\"\n        render={({ match }) => {\n          const { slug, step } = match.params as {\n            slug: string;\n            step?: string;\n          };\n          const currentStep = step ? parseInt(step, 10) : 1;\n\n          // Set the path for analysis storage\n          this.path = match.url.slice(1);\n\n          return (\n            <Decomposition\n              slug={slug}\n              step={currentStep}\n              setVoiceMask={this.handleSetVoiceMask}\n              voiceMask={this.state.voiceMask}\n              voiceNames={this.state.voiceNames}\n              registerKeyboardHandler={this.registerKeyboardHandler}\n              unregisterKeyboardHandler={this.unregisterKeyboardHandler}\n              savedAnalysis={this.state.analyses[this.path] ?? null}\n              saveAnalysis={this.saveAnalysis}\n              getCurrentPositionMs={this.midiPlayer?.getPositionMs}\n              seek={this.seekForRawl}\n              latencyCorrectionMs={\n                this.state.latencyCorrectionMs * this.state.tempo\n              }\n            />\n          );\n        }}\n      />\n    );\n\n    // Combined render for all routes\n    return (\n      <AppContext.Provider\n        value={{\n          handleSongClick: this.handleSongClick,\n          rawlProps: this.state.rawlProps,\n          setRawlProps: (rawlProps) => this.setState({ rawlProps }),\n          analyses: this.state.analyses,\n          saveAnalysis: this.saveAnalysis,\n          resetMidiPlayerState: this.resetMidiPlayerState,\n          registerKeyboardHandler: this.registerKeyboardHandler,\n          unregisterKeyboardHandler: this.unregisterKeyboardHandler,\n          currentMidi: this.state.currentMidi,\n          setCurrentMidi: (currentMidi) => this.setState({ currentMidi }),\n          user: this.state.user,\n          seek: this.seekForRawl,\n          currentPlaybackTime: this.state.currentPlaybackTime || null,\n          eject: this.eject,\n          currentMidiBuffer: this.state.currentMidiBuffer,\n          hoveredMeasuresSpan: this.state.hoveredMeasuresSpan,\n          setHoveredMeasuresSpan: (span) =>\n            this.setState({ hoveredMeasuresSpan: span }),\n          togglePause: this.togglePause,\n          handleLogin: this.handleLogin,\n          handleLogout: this.handleLogout,\n          handleToggleManualRemeasuring: () => {\n            this.setState((prevState) => ({\n              enableManualRemeasuring: !prevState.enableManualRemeasuring,\n            }));\n          },\n          enableManualRemeasuring: this.state.enableManualRemeasuring,\n          playSongBuffer: this.playSongBuffer,\n          latencyCorrectionMs: this.state.latencyCorrectionMs,\n          tempo: this.state.tempo,\n        }}\n      >\n        <Dropzone disableClick style={{}} onDrop={this.onDrop}>\n          {/* @ts-ignore */}\n          {(dropzoneProps) => (\n            <>\n              {this.state.audioContextLocked &&\n                this.state.parsing &&\n                !(this.props.location.pathname === \"/e/new\") && (\n                  <div className=\"audio-context-overlay\">\n                    <StyledButton onClick={this.handleUnlockAudioContext}>\n                      Play\n                    </StyledButton>\n                  </div>\n                )}\n              <DropMessage dropzoneProps={dropzoneProps} />\n              <Alert\n                handlePlayerError={this.handlePlayerError}\n                playerError={this.state.playerError}\n                showPlayerError={this.state.showPlayerError}\n              />\n\n              <AppHeader />\n              <AppMainContent ref={this.contentAreaRef}>\n                <Switch>\n                  <Route path=\"/old\" render={() => <OldLandingPage />} />\n                  <Route\n                    path=\"/corpus/:corpus?\"\n                    render={({ match }) =>\n                      match.params.corpus ? (\n                        <Corpus slug={match.params.corpus} />\n                      ) : (\n                        <CorpusSearch />\n                      )\n                    }\n                  />\n                  <Route path=\"/daw\" render={() => <DAW />} />\n                  <Route exact path=\"/e\" component={EditorLandingPage} />\n                  <Route path=\"/e/:slug?\" component={Editor} />\n                  <Route path=\"/ef/:id/:version?\" component={Editor} />\n                  <Route path=\"/book/:slug?\" component={BookOnStyles} />\n                  <Route path=\"/blog/:postId?/:slug?\" component={Blog} />\n                  <Route path=\"/convert\" component={Converter} />\n                  {/* Structures routes */}\n                  <Route\n                    path=\"/s/\"\n                    exact\n                    render={() => <Structures analyses={this.state.analyses} />}\n                  />\n                  <Route\n                    path=\"/s/:rest*\"\n                    render={() => (\n                      <StructuresWithParams analyses={this.state.analyses} />\n                    )}\n                  />\n                  {rawlRoute}\n                  <Redirect\n                    exact\n                    from=\"/d/\"\n                    to={`/d/${Object.keys(decomposeScores)[0]}/1`}\n                  />\n                  {decompositionRoute}\n                  <Route path=\"/100/:slug?\" component={Book} />\n                  <Route path=\"/beyond/:slug?\" component={Book} />\n                  <Route path=\"/timeline\" component={Timeline} />\n                  <Route path=\"/forge\" component={ForgeUI} />\n                  <Route path=\"/histograms\" component={Histograms} />\n                  <Redirect exact from=\"/\" to=\"/100\" />\n                </Switch>\n              </AppMainContent>\n              <AppFooter\n                currentSongDurationMs={this.state.currentSongDurationMs}\n                ejected={this.state.ejected}\n                paused={this.state.paused}\n                volume={this.state.volume}\n                handleTimeSliderChange={this.handleTimeSliderChange}\n                handleVolumeChange={this.handleVolumeChange}\n                togglePause={this.togglePause}\n                latencyCorrectionMs={this.state.latencyCorrectionMs}\n                setLatencyCorrectionMs={this.setLatencyCorrectionMs}\n                getCurrentPositionMs={this.midiPlayer?.getPositionMs}\n                tempo={this.state.tempo}\n                setTempo={this.handleTempoChange}\n              />\n\n              <Modal\n                isOpen={this.state.showShortcutHelp}\n                onRequestClose={this.toggleShortcutHelp}\n                contentLabel=\"Keyboard Shortcuts\"\n                style={{\n                  content: {\n                    background: \"black\",\n                    border: \"none\",\n                  },\n                  overlay: {\n                    backgroundColor: \"rgba(0, 0, 0, 0.75)\",\n                  },\n                }}\n              >\n                <ShortcutHelp />\n              </Modal>\n            </>\n          )}\n        </Dropzone>\n      </AppContext.Provider>\n    );\n  }\n}\n\n// Update the StructuresWithParams component to parse the URL manually\nconst StructuresWithParams: React.FC<StructuresProps> = ({ analyses }) => {\n  const location = useLocation();\n  const path = location.pathname.slice(3); // Remove '/s/' prefix\n\n  // Find the first slash after the chapter\n  const firstSlashIndex = path.indexOf(\"/\");\n\n  // Extract chapter and topic\n  const chapter = firstSlashIndex > -1 ? path.slice(0, firstSlashIndex) : path;\n  const topic =\n    firstSlashIndex > -1 ? path.slice(firstSlashIndex + 1) : undefined;\n\n  return (\n    <Structures\n      analyses={analyses}\n      initialChapter={decodeURIComponent(chapter)}\n      initialTopic={topic ? decodeURIComponent(topic) : undefined}\n    />\n  );\n};\n\nexport default withRouter(App);\n","import * as React from \"react\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport { RenumberMeasureCallback, getModulations } from \"./Rawl\";\nimport { MeasuresAndBeats, MidiRange } from \"./SystemLayout\";\nimport {\n  Analysis,\n  MeasureRenumbering,\n  MeasuresSpan,\n  PitchClass,\n} from \"./analysis\";\n\nexport const STACKED_RN_HEIGHT = 20;\nconst MIN_WIDTH_BETWEEN_BEATS = 10;\nconst GRADIENT_HEIGHT_IN_NOTES = 0.5;\n\nconst KEY_TO_OFFSET = {\n  z: -4,\n  x: -3,\n  c: -2,\n  v: -1,\n  b: 1,\n  n: 2,\n  m: 3,\n  \",\": 4,\n};\n\nconst VerticalBar = styled.div`\n  width: 1px;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n`;\n\nexport const Cursor = styled(VerticalBar)`\n  background-color: orange;\n  pointer-events: none;\n  z-index: 100;\n`;\n\nconst MeasureBar = styled(VerticalBar)`\n  background-color: #444;\n  z-index: 1;\n`;\n\nconst BeatBar = styled(VerticalBar)`\n  border-left: 0.5px dashed #333;\n  z-index: 1;\n`;\n\nexport type MeasureSelection = {\n  selectedMeasure: number;\n  selectMeasure: (number) => void;\n  splitAtMeasure: (boolean, number?) => void;\n  mergeAtMeasure: () => void;\n  renumberMeasure: RenumberMeasureCallback;\n};\n\nexport const PITCH_CLASS_TO_LETTER = {\n  0: \"C\",\n  1: \"D\",\n  2: \"D\",\n  3: \"E\",\n  4: \"E\",\n  5: \"F\",\n  6: \"F\",\n  7: \"G\",\n  8: \"A\",\n  9: \"A\",\n  10: \"B\",\n  11: \"B\",\n};\n\nconst RemeasuringInput: React.FC<{\n  selectedMeasure: number;\n  selectMeasure: (number) => void;\n  renumberMeasure: RenumberMeasureCallback;\n  splitAtMeasure: (boolean, number?) => void;\n  mergeAtMeasure: () => void;\n}> = ({\n  selectedMeasure,\n  selectMeasure,\n  renumberMeasure,\n  splitAtMeasure,\n  mergeAtMeasure,\n}) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [value, setValue] = useState<string>(\"\");\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(event.target.value);\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key in KEY_TO_OFFSET) {\n      event.preventDefault();\n      const offset = KEY_TO_OFFSET[event.key];\n      selectMeasure(selectedMeasure + offset);\n    }\n    if (event.key === \"Enter\") {\n      event.stopPropagation();\n      if (value === \"\") {\n        if (event.shiftKey) {\n          mergeAtMeasure();\n        } else {\n          splitAtMeasure(false);\n        }\n      } else {\n        const parsedValue = parseInt(value, 10);\n        if (!isNaN(parsedValue)) {\n          renumberMeasure(parsedValue, event.shiftKey);\n        }\n      }\n    }\n  };\n\n  useEffect(() => inputRef.current.focus(), []);\n\n  return (\n    <input\n      type=\"text\"\n      ref={inputRef}\n      value={value}\n      onChange={handleChange}\n      onKeyDown={handleKeyDown}\n      style={{ fontSize: \"10px\", width: \"3em\" }}\n      aria-label=\"Renumber measure\"\n      autoFocus\n    />\n  );\n};\n\nexport const NewTonicSymbol: React.FC<{\n  left: number;\n  number: number;\n  previousTonic: PitchClass | null;\n  modulationDiff: number | null;\n  tonicStart: PitchClass;\n}> = ({ left, number, previousTonic, modulationDiff, tonicStart }) => (\n  <>\n    <span\n      style={{\n        color: \"white\",\n        position: \"absolute\",\n        top: -2,\n        left:\n          left + (previousTonic === null ? String(number).length * 8 + 10 : 30),\n        fontSize: 12,\n        zIndex: 100,\n        fontWeight: 700,\n        userSelect: \"none\",\n        textAlign: \"left\",\n      }}\n    >\n      {previousTonic !== null && (\n        <>{`${\n          modulationDiff > 6\n            ? `${Math.abs(modulationDiff - 12)}`\n            : `${modulationDiff}`\n        } `}</>\n      )}\n      {PITCH_CLASS_TO_LETTER[tonicStart]}\n    </span>\n\n    <div\n      className={`noteColor_${modulationDiff}_colors`}\n      style={{\n        width: 80,\n        height: 12,\n        position: \"absolute\",\n        top: 0,\n        left: left,\n        zIndex: 3,\n        userSelect: \"none\",\n        maskImage:\n          \"linear-gradient(to right, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%)\",\n        WebkitMaskImage:\n          \"linear-gradient(to right, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%)\",\n      }}\n    />\n  </>\n);\n\nconst Measure: React.FC<{\n  span: [number, number];\n  number: number;\n  displayNumber: number;\n  isPhraseStart: boolean;\n  measureSelection: MeasureSelection;\n  showHeader: boolean;\n  secondsToX: (number) => number;\n  showNonPhraseStarts: boolean;\n  tonicStart?: PitchClass;\n  selectedPhraseStart: number;\n  sectionSpan: MeasuresSpan;\n  previousTonic: PitchClass | null;\n  isLastSection: boolean;\n}> = ({\n  span,\n  number,\n  displayNumber,\n  isPhraseStart,\n  measureSelection,\n  showHeader,\n  secondsToX,\n  showNonPhraseStarts,\n  tonicStart,\n  selectedPhraseStart,\n  sectionSpan,\n  previousTonic,\n  isLastSection,\n}) => {\n  const {\n    selectedMeasure,\n    selectMeasure,\n    splitAtMeasure,\n    mergeAtMeasure,\n    renumberMeasure,\n  } = measureSelection;\n\n  const left = secondsToX(span[0]) - 1;\n  const width = secondsToX(span[1]) - left - 1;\n\n  let modulationDiff: number | null = null;\n  if (tonicStart !== undefined && previousTonic !== null) {\n    modulationDiff = (tonicStart - previousTonic + 12) % 12;\n  }\n\n  const isLastMeasure = number === sectionSpan[1] + 1;\n  const showMeasureBar = !isLastMeasure;\n\n  const { hoveredMeasuresSpan } = useContext(AppContext);\n  const isHighlighted =\n    hoveredMeasuresSpan &&\n    number >= hoveredMeasuresSpan[0] &&\n    number <= hoveredMeasuresSpan[1];\n\n  return (\n    <>\n      {showHeader && tonicStart !== undefined && (\n        <NewTonicSymbol\n          left={left}\n          number={number}\n          previousTonic={previousTonic}\n          modulationDiff={modulationDiff}\n          tonicStart={tonicStart}\n        />\n      )}\n      {(showNonPhraseStarts || isPhraseStart) && showMeasureBar && (\n        <>\n          <MeasureBar\n            key={`db_${number}`}\n            style={{\n              left,\n              ...(showNonPhraseStarts && isPhraseStart\n                ? { backgroundColor: \"#bbb\" }\n                : {}),\n            }}\n          />\n          {width && showHeader ? (\n            <>\n              <div\n                key={`db_n_${number}`}\n                style={{\n                  position: \"absolute\",\n                  top: -4,\n                  left: left + 7,\n                  color:\n                    selectedMeasure === number\n                      ? \"red\"\n                      : selectedPhraseStart !== -1 &&\n                        Math.abs(number - selectedPhraseStart) <= 4\n                      ? \"orange\"\n                      : isHighlighted\n                      ? \"white\"\n                      : modulationDiff === null\n                      ? \"#666\"\n                      : \"black\",\n                  zIndex: 15,\n                  cursor: \"pointer\",\n                  userSelect: \"none\",\n                }}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  selectMeasure(number);\n                }}\n              >\n                {selectedMeasure === number && (\n                  <>\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: 23,\n                        left: 0,\n                        color: \"gray\",\n                        fontSize: 12,\n                      }}\n                      onClick={(e) => {\n                        selectMeasure(null);\n                        e.stopPropagation();\n                      }}\n                    >\n                      Esc\n                    </div>\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: -20,\n                        left: 0,\n                        display: \"flex\",\n                        alignItems: \"center\",\n                      }}\n                    >\n                      <RemeasuringInput\n                        renumberMeasure={renumberMeasure}\n                        splitAtMeasure={splitAtMeasure}\n                        mergeAtMeasure={mergeAtMeasure}\n                        selectMeasure={selectMeasure}\n                        selectedMeasure={selectedMeasure}\n                      />\n                      <div\n                        style={{\n                          marginLeft: 5,\n                          color: \"white\",\n                          fontSize: 10,\n                          whiteSpace: \"nowrap\",\n                        }}\n                      >\n                        hover the new tonic, click to save modulation\n                        {selectedPhraseStart === number &&\n                        sectionSpan?.[0] === number - 1 ? (\n                          <span>\n                            . Shift+Enter to merge back to previous section\n                          </span>\n                        ) : (\n                          <span>. Enter to split into two sections</span>\n                        )}\n                      </div>\n                    </div>\n                  </>\n                )}\n                {selectedMeasure !== null &&\n                  selectedPhraseStart === selectedMeasure &&\n                  Object.entries(KEY_TO_OFFSET).map(([key, offset]) => {\n                    const targetMeasure = selectedMeasure + offset;\n                    if (targetMeasure === number) {\n                      return (\n                        <div\n                          key={key}\n                          style={{\n                            position: \"absolute\",\n                            top: -6,\n                            left: 0,\n                            color: \"orange\",\n                            fontSize: 10,\n                          }}\n                        >\n                          {key}\n                        </div>\n                      );\n                    }\n                    return null;\n                  })}\n                {selectedPhraseStart === number &&\n                  sectionSpan?.[0] !== number - 1 && (\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: -12,\n                        left: -26,\n                        color: \"red\",\n                        fontSize: 14,\n                        fontWeight: 700,\n                        zIndex: 100,\n                      }}\n                      onClick={(e) => {\n                        splitAtMeasure(false);\n                        e.stopPropagation();\n                      }}\n                    >\n                      \n                    </div>\n                  )}\n                {selectedPhraseStart === number &&\n                  sectionSpan?.[0] !== number - 1 &&\n                  isLastSection && (\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: -18,\n                        left: -100,\n                        color: \"red\",\n                        fontSize: 14,\n                        fontWeight: 700,\n                        zIndex: 100,\n                        display: \"flex\",\n                        gap: \"5px\",\n                      }}\n                    >\n                      <span\n                        onClick={(e) => {\n                          splitAtMeasure(true, 2);\n                          e.stopPropagation();\n                        }}\n                      >\n                        /8\n                      </span>\n                      <span\n                        onClick={(e) => {\n                          splitAtMeasure(true, 3);\n                          e.stopPropagation();\n                        }}\n                      >\n                        /12\n                      </span>\n                      <span\n                        onClick={(e) => {\n                          splitAtMeasure(true, 4);\n                          e.stopPropagation();\n                        }}\n                      >\n                        /16\n                      </span>\n                    </div>\n                  )}\n                {selectedPhraseStart === number &&\n                  sectionSpan?.[0] === number - 1 && (\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: 4,\n                        left: 18,\n                        color: \"red\",\n                        fontSize: 14,\n                        fontWeight: 700,\n                        zIndex: 100,\n                      }}\n                      onClick={(e) => {\n                        mergeAtMeasure();\n                        e.stopPropagation();\n                      }}\n                    >\n                      \n                    </div>\n                  )}\n                <span\n                  style={{\n                    fontSize: \"12px\",\n                    fontFamily: \"sans-serif\",\n                  }}\n                >\n                  {displayNumber}\n                </span>\n              </div>\n            </>\n          ) : null}\n        </>\n      )}\n    </>\n  );\n};\n\nconst Beat: React.FC<{ second: number; secondsToX: (number) => number }> = ({\n  second,\n  secondsToX,\n}) => (\n  <BeatBar\n    style={{ left: secondsToX(second), zIndex: 2, pointerEvents: \"none\" }}\n  />\n);\n\nconst TonalGrid: React.FC<{\n  analysis: Analysis;\n  measures: number[];\n  midiNumberToY: (number) => number;\n  noteHeight: number;\n  midiRange: MidiRange;\n  secondsToX: (number) => number;\n  sectionSpan?: MeasuresSpan;\n}> = React.memo(\n  ({\n    analysis,\n    measures,\n    midiNumberToY,\n    noteHeight,\n    midiRange,\n    secondsToX,\n    sectionSpan,\n  }) => {\n    const modulations = getModulations(analysis);\n    if (!modulations || !measures) return;\n    modulations.push({\n      measure: measures.length,\n      tonic: modulations[0].tonic,\n    });\n\n    const minX = secondsToX(measures[sectionSpan?.[0] ?? 0]);\n    const maxX =\n      secondsToX(measures[sectionSpan?.[1] ?? measures.length - 1]) +\n      (modulations.filter(({ measure }) => measure === sectionSpan?.[1])\n        .length > 0\n        ? 30\n        : 0);\n\n    const result = [];\n    for (let i = 0; i + 1 < modulations.length; ++i) {\n      const fromIndex = modulations[i].measure;\n      const toIndex = modulations[i + 1].measure;\n      if (toIndex < 0 || fromIndex >= measures.length) {\n        continue;\n      }\n      const from = measures[Math.max(fromIndex, 0)];\n      const to = measures[Math.min(toIndex, measures.length - 1)];\n      const { tonic } = modulations[i];\n      const fromX = secondsToX(from);\n      const toX = secondsToX(to);\n      const width = Math.min(toX, maxX) - fromX;\n      for (let octave = 2; octave <= 9; ++octave) {\n        const midiNumber = tonic + octave * 12;\n        if (toX >= minX && fromX <= maxX) {\n          if (\n            midiNumber - 12 >= midiRange[0] &&\n            midiNumber - 12 <= midiRange[1]\n          )\n            // TODO: display a note like C4 gracefully at each gradient start\n            result.push(\n              <div\n                key={`tonalgrid_octave_${i}_${midiNumber}`}\n                style={{\n                  position: \"absolute\",\n                  width,\n                  height: GRADIENT_HEIGHT_IN_NOTES * noteHeight,\n                  left: fromX,\n                  top: midiNumberToY(\n                    midiNumber - 13 + GRADIENT_HEIGHT_IN_NOTES,\n                  ),\n                  pointerEvents: \"none\",\n                  background: `linear-gradient(to top, #333, transparent)`,\n                  zIndex: 0,\n                }}\n              />,\n            );\n          if (midiNumber - 7 >= midiRange[0] && midiNumber - 7 <= midiRange[1])\n            result.push(\n              <div\n                key={`tonalgrid_octave_${i}_fifth_${midiNumber}`}\n                style={{\n                  position: \"absolute\",\n                  width,\n                  height: 0,\n                  left: fromX,\n                  top: midiNumberToY(midiNumber - 6) - 0.5,\n                  pointerEvents: \"none\",\n                  borderBottom: \"0.5px dashed #333\",\n                  zIndex: 0,\n                }}\n              />,\n            );\n        }\n      }\n    }\n    return result;\n  },\n);\n\nconst renumberMeasure: (\n  measureStart: number,\n  measureRenumbering: MeasureRenumbering,\n) => number = (measureStart, measureRenumbering) => {\n  if (measureRenumbering === undefined) {\n    return measureStart;\n  }\n\n  let maxKey: number | undefined = undefined;\n  Object.keys(measureRenumbering).forEach((key) => {\n    const numericKey = parseInt(key, 10);\n    if (\n      numericKey <= measureStart &&\n      (maxKey === undefined || numericKey > maxKey)\n    ) {\n      maxKey = numericKey;\n    }\n  });\n\n  if (maxKey === undefined) {\n    return measureStart;\n  }\n  return measureStart + measureRenumbering[maxKey] - maxKey;\n};\n\ninterface AnalysisGridProps {\n  analysis: Analysis;\n  measuresAndBeats: MeasuresAndBeats;\n  midiNumberToY: (number: number) => number;\n  noteHeight: number;\n  phraseStarts: number[];\n  midiRange: MidiRange;\n  measureSelection: MeasureSelection;\n  showHeader?: boolean;\n  showTonalGrid?: boolean;\n  secondsToX: (number) => number;\n  sectionSpan?: MeasuresSpan;\n}\n\nexport const AnalysisGrid: React.FC<AnalysisGridProps> = React.memo(\n  ({\n    analysis,\n    measuresAndBeats,\n    midiNumberToY,\n    noteHeight,\n    measureSelection,\n    phraseStarts,\n    midiRange,\n    showHeader = true,\n    showTonalGrid = true,\n    secondsToX,\n    sectionSpan = null,\n  }) => {\n    const { measures, beats } = measuresAndBeats;\n    if (sectionSpan == null) {\n      sectionSpan = [0, measures.length - 1];\n    }\n    const modulationsArray = getModulations(analysis);\n    const modulations = new Map(\n      modulationsArray.map(({ measure, tonic }) => [measure, tonic]),\n    );\n\n    const findPreviousTonic = (currentMeasure: number): PitchClass | null =>\n      modulationsArray.reduce(\n        (acc, { measure, tonic }) =>\n          measure < currentMeasure && measure > acc.measure\n            ? { measure, tonic }\n            : acc,\n        { measure: -Infinity, tonic: null },\n      ).tonic;\n\n    const showAllMeasureBars = true;\n\n    // TODO: filter measures and beats using sectionSpan\n    const showBeats = React.useMemo(() => {\n      const relevantBars = [...measures, ...beats]\n        .filter(\n          (bar) =>\n            bar !== 0 &&\n            bar >= measures[sectionSpan[0]] &&\n            bar <= measures[sectionSpan[1]],\n        )\n        .sort((a, b) => a - b);\n      return (\n        (secondsToX(relevantBars.at(-1)) - secondsToX(relevantBars.at(0))) /\n          (relevantBars.length + 1) >=\n        MIN_WIDTH_BETWEEN_BEATS\n      );\n    }, [measures, beats, secondsToX, sectionSpan]);\n\n    const selectedPhraseStart =\n      phraseStarts.indexOf(measureSelection.selectedMeasure) !== -1\n        ? measureSelection.selectedMeasure\n        : -1;\n    return (\n      <div style={{ zIndex: 15 }}>\n        {measures.map((time, i) => {\n          const number = i + 1;\n          const displayNumber = renumberMeasure(\n            i + 1,\n            analysis.measureRenumbering,\n          );\n          return sectionSpan[0] <= i && i <= sectionSpan[1] ? (\n            <Measure\n              key={i}\n              showHeader={showHeader && i < sectionSpan[1]}\n              span={[time, measures[number] ?? time]}\n              isPhraseStart={phraseStarts.indexOf(number) !== -1}\n              number={number}\n              displayNumber={displayNumber}\n              measureSelection={measureSelection}\n              secondsToX={secondsToX}\n              showNonPhraseStarts={showAllMeasureBars}\n              tonicStart={modulations.get(i)}\n              previousTonic={findPreviousTonic(i)}\n              selectedPhraseStart={selectedPhraseStart}\n              sectionSpan={sectionSpan}\n              isLastSection={sectionSpan?.[1] + 1 === measures.length}\n            />\n          ) : null;\n        })}\n        {showBeats &&\n          beats.map((time) =>\n            time >= measures[sectionSpan[0]] &&\n            time <= measures[sectionSpan[1]] ? (\n              <Beat key={time} second={time} secondsToX={secondsToX} />\n            ) : null,\n          )}\n        {showTonalGrid && analysis.modulations[0] !== null && (\n          <TonalGrid\n            analysis={analysis}\n            measures={measures}\n            midiNumberToY={midiNumberToY}\n            noteHeight={noteHeight}\n            midiRange={midiRange}\n            secondsToX={secondsToX}\n            sectionSpan={sectionSpan}\n          />\n        )}\n      </div>\n    );\n  },\n);\n","import { titleCase } from \"title-case\";\n\nexport const beautifySlug = (slug: string): string => {\n  return titleCase(\n    slug\n      .replace(/-s-/g, \"'s \")\n      .replace(/-t-/g, \"'t \")\n      .replace(/-m-/g, \"'m \")\n      .replace(/---/g, \"  \")\n      .replace(/-/g, \" \")\n      .replace(/_/g, \" \")\n      .replace(\".\", \" .\"),\n  );\n};\n","import { faKeyboard } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { beautifySlug } from \"../corpora/utils\";\nimport {\n  Chord,\n  MAJOR_MODE,\n  MINOR_MODE,\n  STRICT_NATURAL_MINOR,\n} from \"../legends/chords\";\nimport ChordStairs, { TonicProvider } from \"../legends/ChordStairs\";\nimport { PianoLegend } from \"../legends/PianoLegend\";\nimport { SnippetLink } from \"../snippets/SnippetLink\";\nimport { TOP_100_COMPOSERS } from \"../top100Composers\";\nimport { Citation } from \"./Citations\";\nimport { CITES } from \"./cites\";\nimport { FileDropBox } from \"./FileDropBox\";\nimport Metaphors from \"./Metaphors\";\nexport const MODULATIONS_CHAPTER_TITLE = \"Modulations\";\nexport const DOUBLE_TONIC_CHAPTER_TITLE = \"Double-tonic\";\n\nexport const P = styled.div`\n  margin-bottom: 30px;\n  line-height: 1.6;\n  color: #fff;\n`;\n\nexport const UL = styled.ul`\n  list-style-type: none;\n  margin-left: 0;\n  padding-left: 0;\n\n  & > li {\n    margin-bottom: 30px;\n  }\n`;\n\nconst C = ({ c, title }: { c: Chord[]; title: string }) => (\n  <span\n    style={{\n      display: \"inline-block\",\n      position: \"relative\",\n      top: \"5px\",\n      padding: \"3px 3px\",\n    }}\n    title={title.replace(/b/g, \"\").replace(/#/g, \"\")}\n  >\n    <ChordStairs\n      mode={{ title: \"\", chords: c }}\n      scale={0.85}\n      playbackMode=\"together\"\n    />\n  </span>\n);\n\nexport const rn = (strings: TemplateStringsArray) => (\n  <span\n    style={{\n      fontFamily: \"Fira Sans\",\n      fontWeight: \"700\",\n      fontSize: \"1.1em\",\n    }}\n  >\n    {strings[0].replace(\"7\", \"\")}\n  </span>\n);\n\nexport const c = (strings: TemplateStringsArray) => {\n  const chordString = strings[0].trim();\n  const chords = chordString.split(/\\s+/);\n  return <C c={chords as Chord[]} title={chordString} />;\n};\n\nexport const rnc = (strings: TemplateStringsArray) => (\n  <>\n    <span style={{ whiteSpace: \"nowrap\" }}>\n      {rn(strings)} {c(strings)}\n    </span>\n  </>\n);\n\nexport const ct = (string: string, tonic: number) => (\n  <TonicProvider currentTonic={tonic}>{c([string] as any)}</TonicProvider>\n);\n\nexport const a = (href: string, text: string) => (\n  <a\n    href={href}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    style={{ color: \"#fff\", whiteSpace: \"nowrap\" }}\n  >\n    {text}\n  </a>\n);\n\nexport const A = (href: string) => (\n  <a\n    href={`/f/${href}`}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    style={{\n      color: \"#fff\",\n      whiteSpace: \"nowrap\",\n    }}\n  >\n    {beautifySlug(href)}\n  </a>\n);\n\nexport const E = (href: string) => (\n  <a\n    href={`/e/${href}`}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    style={{\n      color: \"#fff\",\n      whiteSpace: \"nowrap\",\n    }}\n  >\n    {beautifySlug(href)}\n  </a>\n);\n\nconst STRUCTURES_TO_CHORDS: { [key: string]: Chord[] } = {\n  \"V:9\": [\"V9\"],\n  \"V:b9\": [\"Vb9\"],\n  \"V:aug_s9\": [\"V+s9\"],\n  \"V:augmented\": [\"V+\"],\n  \"dorian:IV\": [\"i\", \"IV\", \"i\"],\n  \"shuttle:mixolydian\": [\"I\", \"bVII\", \"I\", \"bVII\"],\n  \"scale:minor_pentatonic\": [\"1\", \"b3\", \"4\", \"5\", \"b7\"],\n  \"V:sus4\": [\"Vsus4\", \"V\"],\n  \"V:sus4_unresolved\": [\"Vsus4\"],\n  \"V:soul_dominant\": [\"Vsoul\", \"I\"],\n  \"scale:whole-tone\": [\"WT1\", \"WT2\"],\n  \"chord_scale:iii\": [\"iii\", \"3\", \"#4\", \"5\"],\n  \"chord_scale:v\": [\"v\", \"5\", \"6\", \"b7\"],\n  \"chord_scale:melodic_minor\": [\"iv\", \"V\", \"6\", \"7\"],\n};\n\nexport const s = (tags: TemplateStringsArray) => {\n  const tag = tags[0];\n  const [chapter, topic] = tag.split(\":\");\n\n  // Check if the tag exists in STRUCTURES_TO_CHORDS\n  const chords = STRUCTURES_TO_CHORDS[tag];\n\n  return (\n    <span\n      style={{\n        display: \"inline-block\",\n        position: \"relative\",\n        top: \"6px\",\n        margin: \"0 10px 2px 0\",\n        whiteSpace: \"nowrap\",\n        fontFamily: \"Lato, sans-serif\",\n        fontWeight: \"100\",\n        fontSize: \"12pt\",\n      }}\n    >\n      {chords && (\n        <span style={{ marginRight: \"5px\", transform: \"scale(0.9)\" }}>\n          {c([chords.join(\" \")] as any)}\n        </span>\n      )}\n      <SnippetLink chapter={chapter} topic={topic} />\n    </span>\n  );\n};\n\nconst n = (text: TemplateStringsArray) => (\n  <span style={{ whiteSpace: \"nowrap\" }}>{text}</span>\n);\n\nexport const k = (layout: string, title?: string) => {\n  return (\n    <a\n      href={`https://vpavlenko.github.io/layouts/${layout}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      style={{\n        display: \"inline-block\",\n        color: \"#fff\",\n        margin: \"10px 20px 10px 0\",\n        padding: \"7px\",\n        borderRadius: \"3px\",\n        boxShadow: \"0 0 2px 2px gray\",\n      }}\n    >\n      <FontAwesomeIcon icon={faKeyboard} style={{ marginRight: \"10px\" }} />\n      {title ?? layout.replace(/-/g, \" \")}\n    </a>\n  );\n};\n\nexport const q = (citeKey: keyof typeof CITES) => (\n  <Citation citeKey={citeKey} />\n);\n\nexport const CHAPTER_GROUPS: Record<string, [number, number]> = {\n  intro: [1, 1],\n  \"loops: four-chord progressions\": [2, 6],\n  \"diatonic functional harmony\": [7, 11],\n  \"borrowed chords\": [12, 14],\n  \"applied chords and modulation\": [15, 19],\n  scales: [20, 20],\n  \"seventh and extended chords\": [21, 24],\n  style: [25, 25],\n};\n\nexport const CHAPTERS: Array<{\n  title: string;\n  titleChords?: Chord[];\n  mode?: Mode | Mode[];\n  pretext?: () => React.JSX.Element;\n  composers: (typeof TOP_100_COMPOSERS)[number][\"slug\"][];\n}> = [\n  {\n    title: \"Intro\",\n    titleChords: [\"I\"],\n    composers: [\"happy-birthday\"],\n    pretext: () => (\n      <>\n        <h2>Structures in Western music</h2>\n        <P>\n          I invite you to my journey through 100 pieces of composers whose music\n          is popular nowadays.\n        </P>\n        <P>\n          I use my own piano-roll-based notation with notes colored into 12\n          colors, always starting from the main note  <i>the tonic</i>.\n        </P>\n        <P>\n          This simplifies visual analysis: chords like {c`IV V I`} and other\n          structures become visible, scores become readable and interpretable.\n        </P>\n        <P>This is the color scheme we'll use through the entire book:</P>\n        <P>\n          <PianoLegend />\n        </P>\n        <P>\n          You don't need any knowledge of standard notation throughout this\n          journey.\n        </P>\n\n        <h2>12 notes</h2>\n        <P>\n          There are twelve notes in each octave of a piano:{\" \"}\n          {c`1 b2 2 b3 3 4 #4 5 b6 6 b7 7`}\n        </P>\n        <P>\n          Throughout the book I'll mention keyboard layouts to try out different\n          concepts by playing them directly from your computer keyboard. Here\n          are two keyboards showcasing all 12 notes:\n        </P>\n        <P>\n          {k(\"traditional-layout\")}\n          {k(\"flat-chromatic-layout\")}\n        </P>\n        <P>\n          Each color is present several times on a piano keyboard  in different\n          octaves: {c`1 3 5 1 3 5 1 3 5 1 3 5 1`}\n        </P>\n        {/* \n        <P>\n          The distance between two consecutive keys is called a semitone.{\" \"}\n          {c`1 b2`}, {c`4 #4`}, {c`b6 6`} and {c`6 b7`} are one semitone apart.\n          All distances between two consecutive notes on a piano keyboard is the\n          same since mid-19th century. {q(\"rings_tuning\")}\n        </P> */}\n\n        <h2>Chords in a major scale</h2>\n        <P>\n          Some pieces are built entirely on a subset of seven notes called a\n          major scale: {c`1 2 3 4 5 6 7 1 2 3 4 5 6 7 1`}\n        </P>\n        <P>{k(\"major-scale\")}</P>\n        <P>\n          If you play three colors, it's called <i>a chord</i>. How to draw a\n          nice chord from a scale? You pick a <i>root</i> color - eg. {c`1`},\n          and then you pick every other note after it: skip {c`2`}, take {c`3`},\n          skip {c`4`}, take {c`5`}. This way we get a \"one\" chord - {n`1-3-5`}{\" \"}\n          {c`1 3 5`} {c`I`}.\n        </P>\n        <P>\n          We can do this from any note of the scale:\n          <ul>\n            <li>\n              {n`2-4-6`} {c`2 4 6`} {c`ii`}\n            </li>\n            <li>\n              {n`3-5-7`} {c`3 5 7`} {c`iii`}\n            </li>\n            <li>\n              {n`4-6-1`} {c`4 6 1`} {c`IV`}  in seven-note scales 8=1, 9=2 etc.\n            </li>\n            <li>\n              {n`5-7-2`} {c`5 7 2`} {c`V`}\n            </li>\n            <li>\n              {n`6-1-3`} {c`6 1 3`} {c`vi`}\n            </li>\n            <li>\n              {n`7-2-4`} {c`7 2 4`} {c`viio`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Chords are words in the Western musical language. Western music is\n          melody plus chords.\n        </P>\n        <P>\n          Here are all seven chords that we can build on a major scale this way:{\" \"}\n          {c`I ii iii IV V vi viio I`}\n        </P>\n        <P>\n          In this intro we'll have a close look at the song \"Happy Birthday\".\n          The arrangement we're gonna analyze uses three chords played in the\n          left hand, underneath the melody: {c`I`}, {c`IV`} and {c`V`}, in this\n          order: {c`I V V I I IV V I`}\n        </P>\n        <P>Click on the link below to open the score:</P>\n        {/* <P>\n          However, our arrangement builds a major scale starting from the note\n          F.\n        </P>\n        <P>\n          <PianoLegend currentTonic={5} />\n        </P>\n        <P>\n          This is legal: all musical structures are relative and can be shifted\n          up or down a fixed amount of semitones.\n        </P>\n        <P>\n          For instance, let's consider this string of chords in C major:{\" \"}\n          {c`I V V I I IV V I`}\n        </P>\n        <P>\n          <TonicProvider currentTonic={1}>\n            In C# major it looks the same but sounds differently:{\" \"}\n            {c`I V V I I IV V I`}\n          </TonicProvider>\n        </P>\n        <P>\n          Now, open the score of \"Happy Birthday\" and let's start analyzing.\n        </P> */}\n      </>\n    ),\n  },\n  {\n    title: \"Single loop in major\",\n    titleChords: [\"I\", \"iii\", \"vi\", \"IV\"],\n    mode: {\n      title: \"6 common triads in a major mode\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Our path</h2>\n        <P>\n          The word <i>harmony</i> in music theory means \"which colors are\n          combined together in a given piece or a style\". Usually colors are\n          organized in chords, so a talk on harmony starts with \"what's the\n          order or chords\".\n        </P>\n        <P>\n          The chapters of this book go through pieces in order of increasing\n          harmonic complexity. We start with pieces which use only seven colors\n          (<i>pitch classes</i>):\n          <ul>\n            <li>major scale: {c`1 2 3 4 5 6 7 1`}</li>\n            <li>minor scale: {c`1 2 b3 4 5 b6 b7 1`}</li>\n          </ul>\n        </P>\n        <P>\n          We begin with the pieces with simple harmony  like{\" \"}\n          {c`I vi IV V I vi IV V`} or {c`i i bVI V i i bVI V`}  the diatonic\n          harmony.\n        </P>\n        <P>\n          Then we progress all the way to complex chromatic harmony, like{\" \"}\n          {c`i iio7 V43 i6 Ger viio7/V i64 V7b9 i`} and{\" \"}\n          {c`Imaj7 V7/IV IVmaj7 iv7 Imaj7 V7/ii V7/V V7 Imaj7`}\n        </P>\n\n        <P>\n          Many things influence each piece: a composer combines ideas of\n          harmony, melody, voice-leading, texture, rhythm, form. I picked\n          harmony as the main axis of this book. I discuss other aspects of\n          music as a set of questions and answers below the scores of each\n          piece.\n        </P>\n\n        <h2>Loops</h2>\n        <P>In Western music, chords usually change at regular times.</P>\n        <P>\n          The easiest way of organizing chords is to put them in a loop. The\n          most common length of the loop is four chords.\n        </P>\n        <P>\n          There are six common chords that can be built on a major scale:{\" \"}\n          {c`I ii iii IV V vi I`}\n        </P>\n        <P>\n          We have four places to fill in with chords in a loop. If you put{\" \"}\n          {c`I`} on the first place, you can fill in the rest three distinct\n          chords in {n`5  4  3 = 60`} ways:\n        </P>\n        <P style={{ width: \"100vw\" }}>\n          <UL>\n            <li>\n              {c`I ii iii IV`} {c`I ii iii V`} {c`I ii iii vi`} {c`I ii IV iii`}{\" \"}\n              {c`I ii IV V`} {c`I ii IV vi`}{\" \"}\n            </li>\n            <li>\n              {c`I ii V iii`} {c`I ii V IV`} {c`I ii V vi`} {c`I ii vi iii`}{\" \"}\n              {c`I ii vi IV`} {c`I ii vi V`}{\" \"}\n            </li>\n            <li>\n              {c`I iii ii IV`} {c`I iii ii V`} {c`I iii ii vi`} {c`I iii IV ii`}{\" \"}\n              {c`I iii IV V`} {c`I iii IV vi`}{\" \"}\n            </li>\n            <li>\n              {c`I iii V ii`} {c`I iii V IV`} {c`I iii V vi`} {c`I iii vi ii`}{\" \"}\n              {c`I iii vi IV`} {c`I iii vi V`}{\" \"}\n            </li>\n            <li>\n              {c`I IV ii iii`} {c`I IV ii V`} {c`I IV ii vi`} {c`I IV iii ii`}{\" \"}\n              {c`I IV iii V`} {c`I IV iii vi`}{\" \"}\n            </li>\n            <li>\n              {c`I IV V ii`} {c`I IV V iii`} {c`I IV V vi`} {c`I IV vi ii`}{\" \"}\n              {c`I IV vi iii`} {c`I IV vi V`}{\" \"}\n            </li>\n            <li>\n              {c`I V ii iii`} {c`I V ii IV`} {c`I V ii vi`} {c`I V iii ii`}{\" \"}\n              {c`I V iii IV`} {c`I V iii vi`}{\" \"}\n            </li>\n            <li>\n              {c`I V IV ii`} {c`I V IV iii`} {c`I V IV vi`} {c`I V vi ii`}{\" \"}\n              {c`I V vi iii`} {c`I V vi IV`}{\" \"}\n            </li>\n            <li>\n              {c`I vi ii iii`} {c`I vi ii IV`} {c`I vi ii V`} {c`I vi iii ii`}{\" \"}\n              {c`I vi iii IV`} {c`I vi iii V`}{\" \"}\n            </li>\n            <li>\n              {c`I vi IV ii`} {c`I vi IV iii`} {c`I vi IV V`} {c`I vi V ii`}{\" \"}\n              {c`I vi V iii`} {c`I vi V IV`}{\" \"}\n            </li>\n          </UL>\n        </P>\n        <P>\n          However, historically just a few of these hypothetical loops take up\n          the majority of the songs. Some popular loops are:\n          <ul>\n            <li>\n              {a(\n                \"https://en.wikipedia.org/wiki/%2750s_progression\",\n                \"'50s progression\",\n              )}{\" \"}\n              has two common rotations:\n              <ul style={{ marginBottom: \"1em\" }}>\n                <li> {c`I vi IV V I vi IV V`}</li>\n                <li>{c`IV V I vi IV V I vi`}</li>\n              </ul>\n            </li>\n            <li>{c`I iii vi IV I iii vi IV`}</li>\n          </ul>\n        </P>\n        <h2>Roman numeral analysis</h2>\n        <P>\n          Let's notate six chords that we find in pieces built on a major scale\n          by using Roman numeral analysis.\n        </P>\n        <P>\n          <ChordStairs\n            mode={{\n              title: \"\",\n              chords: [\"I\", \"ii\", \"iii\", \"IV\", \"V\", \"vi\"],\n            }}\n          />\n        </P>\n        <P>\n          Pronounced: \"a one chord\", \"a two chord\", \"a three chord\", \"a four\n          chord\", \"a five chord\", \"a six chord\".\n        </P>\n        <P>\n          If we look at the intervals of each chord starting from the root,\n          there are two types of chords:\n          <ul>\n            <li>\n              {rn`I`} {c`I`}, {rn`IV`} {c`IV`}, {rn`V`} {c`V`}  intervals 4+3,\n              major chords written in uppercase Roman numerals\n            </li>\n            <li>\n              {rn`ii`} {c`ii`}, {rn`iii`} {c`iii`}, {rn`vi`} {c`vi`}  intervals\n              3+4, minor chords written in lowercase Roman numeral\n            </li>\n          </ul>\n        </P>\n\n        <P>\n          Be careful: the terms \"major chord\" / \"minor chord\" are not the same\n          thing as \"major scale\" / \"minor scale\". As we see, in a major scale we\n          have three major chords and three minor chords. We'll clarify this\n          when we reach a chapter on pieces in a minor scale.\n        </P>\n        <P>\n          Listen to the songs below and analyze the loops they are built upon.\n        </P>\n      </>\n    ),\n    composers: [\n      \"the-office\",\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n      \"doki-doki-literature-club-ost---your-reality\",\n\n      \"Viva_La_Vida_Coldplay\",\n    ],\n  },\n  {\n    title: \"Different loops for verse/chorus\",\n    titleChords: [\"I\", \"V\", \"vi\", \"IV\"],\n    mode: {\n      title: \"6 common triads in a major mode\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Form</h2>\n        <P>\n          The word <i>form</i> in music theory means \"how parts of a piece are\n          organized together\". How are they different, and what is common in\n          them that holds the whole piece together.\n        </P>\n        <P>\n          A song may have several parts: intro, verse, pre-chorus, chorus,\n          bridge. Some songs use different loops for different parts. For\n          example, a verse can go like {c`I vi IV V I vi IV V`} and a chorus can\n          go like {c`vi IV I V vi IV I V`}\n        </P>\n        <P>\n          Throughout the book you can hover over colorful chords to see their\n          Roman numerals.\n        </P>\n        <P>\n          As you analyze pieces in this chapter, listen to them on YouTube and\n          read the lyrics to understand which parts they have. Then, as you\n          follow the score below, see if different parts use contrasting loops.\n        </P>\n        <h2>Timeline of loops</h2>\n        <P>\n          Making pieces entirely of four-chord loops is a recent innovation  it\n          gained popularity in the 1950s. {q(\"tagg_loops\")} {q(\"nobile\")}{\" \"}\n          Neither Mozart nor Chopin composed like that.\n        </P>\n        <P>In the songs below you'll find another popular loop: </P>\n        <P>\n          {a(\n            \"https://en.wikipedia.org/wiki/I%E2%80%93V%E2%80%93vi%E2%80%93IV_progression\",\n            \"IVviIV progression\",\n          )}{\" \"}\n          has two common rotations: {c`I V vi IV I V vi IV`} and{\" \"}\n          {c`vi IV I V vi IV I V`}\n        </P>\n        <P>\n          Unlike the{\" \"}\n          {a(\n            \"https://en.wikipedia.org/wiki/%2750s_progression\",\n            \"'50s progression\",\n          )}{\" \"}\n          {c`I vi IV V`}, the {c`I V vi IV`} only started gaining popularity\n          after the '70s and peaked in 2000s - as you can check on Wikipedia\n          sorting examples by year. This is an arbitrary cultural event - the\n          history might as well go the other way around.\n        </P>\n        <P>\n          As you have heard many old songs through radio and films during your\n          lifetime, you might have learned their precedence. Do you hear the\n          former progression as \"older\", \"more ancient\"?\n        </P>\n\n        <h2>Intervals</h2>\n        <P>\n          A smallest interval between the two notes in Western music is called a\n          semitone. Here are semitones built up from all notes of a major scale:{\" \"}\n          {c`1 b2`}, {c`2 b3`}, {c`3 4`}, {c`4 #4`}, {c`5 b6`}, {c`6 b7`},{\" \"}\n          {c`7 1`} Physically, all semitones between two consecutive notes are\n          the same.\n        </P>\n        {/* <P>Another two intervals that are important are three semitones and four semitones</P> */}\n        <h2>Other resources</h2>\n        <P>\n          If you're lost in my narrative, try these instead:\n          <ul>\n            <li>{a(\"https://www.lightnote.co/\", \"Lightnote\")}</li>\n            <li>{a(\"https://book-one.hooktheory.com/\", \"Hooktheory\")}</li>\n            <li>\n              {a(\n                \"https://learningmusic.ableton.com/\",\n                \"Ableton's Guide on Music\",\n              )}\n            </li>\n          </ul>\n        </P>\n        <h2>Drop your MIDI files</h2>\n        <P>\n          If you have your own MIDI file and you want to see it colored, drag\n          and drop it to this website.\n        </P>\n        <P>\n          <FileDropBox />\n        </P>\n        <P>\n          If you want me to color a specific piece, reach out via{\" \"}\n          <a href=\"mailto:cxielamiko@gmail.com\">cxielamiko@gmail.com</a> or{\" \"}\n          <a href=\"https://t.me/vitalypavlenko\">https://t.me/vitalypavlenko</a>\n        </P>\n      </>\n    ),\n    composers: [\n      \"someone-like-you\",\n      \"someone-you-loved-lewis-capaldi\",\n      \"Ed_Sheeran_Perfect\",\n      \"dont-stop-believing-piano\",\n      \"sign-of-the-times---harry-styles\",\n      \"A_Thousand_Miles\",\n    ],\n  },\n  {\n    title: \"Loops in minor\",\n    titleChords: [\"iv\", \"i\"],\n    mode: {\n      title: \"natural minor without bIII\",\n      chords: [\"iv\", \"v\", \"bVI\", \"bVII\", \"i\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Chords in natural minor</h2>\n        <P>\n          Another scale that's widely used in Western music is a natural minor\n          scale: {c`1 2 b3 4 5 b6 b7 1 2 b3 4 5 b6 b7 1`}\n        </P>\n        <P>\n          For this scale we can also form chords by taking every other note from\n          each root. This way we'll get seven chords:{\" \"}\n          {c`i iio bIII iv v bVI bVII i`}\n        </P>\n        <P>\n          In this chapter we'll look at pieces which have loops made of a subset\n          of these chords:\n        </P>\n        <P>\n          <ChordStairs mode={STRICT_NATURAL_MINOR} />\n        </P>\n        <P>A note on pronunciation: {rn`VI`} is a \"flat-six major chord\"</P>\n        <P>\n          Some of these pieces have four-chord loops, while others have longer\n          strings of chords. As you analyze them, try to find any patterns. Is\n          there a pair of chords which often go together? Is there a frequent\n          sequence of three chords?\n        </P>\n        <h2>Major and minor chords</h2>\n        <P>\n          There are two types of triads commonly used in Western music: major\n          chords and minor chords.\n        </P>\n        <P>\n          Here are pairs of minor vs major chords - not in any particular mode,\n          just \"in the air\":\n          <ul>\n            <li>\n              {c`i`} {c`I`}\n            </li>\n            <li>\n              {c`ii`} {c`II`}\n            </li>\n            <li>\n              {c`biii`} {c`bIII`}\n            </li>\n            <li>\n              {c`iii`} {c`III`}\n            </li>\n            <li>\n              {c`iv`} {c`IV`}\n            </li>\n            <li>\n              {c`v`} {c`V`}\n            </li>\n            <li>\n              {c`bvi`} {c`bVI`}\n            </li>\n            <li>\n              {c`vi`} {c`VI`}\n            </li>\n            <li>\n              {c`bvii`} {c`bVII`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Minor chords have a smaller interval of three semitones at the bottom\n          and a bigger interval of four semitones at the top.\n        </P>\n        <P>\n          Major chords has a smaller interval of three semitones at the top and\n          a bigger interval of four semitones at the bottom.\n        </P>\n        <P>\n          One interesting observation is that chords built on roots 1 {c`1`}, 4{\" \"}\n          {c`4`} and 5 {c`5`} are:\n          <ul>\n            <li>\n              major chords {c`I`} {c`IV`} {c`V`} if built on a major scale{\" \"}\n              {c`1 2 3 4 5 6 7 1`}\n            </li>\n            <li>\n              minor chords {c`i`} {c`iv`} {c`v`} if built on a minor scale{\" \"}\n              {c`1 2 b3 4 5 b6 b7 1`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          So that's the connection between a major scale and major chords, and\n          also between a minor scale and minor chords.\n        </P>\n      </>\n    ),\n    composers: [\n      \"still-dre---variation-composition\",\n      \"Im_Blue_Eiffel_65\",\n      \"Never_Gonna_Give_You_Up\",\n      \"Lovely_Billie_Eilish\",\n      \"Interstellar\",\n    ],\n  },\n\n  {\n    title: \"i i VI V\",\n    titleChords: [\"i\", \"i\", \"bVI\", \"V\"],\n    mode: {\n      title: \"\",\n      chords: [\"i\", \"bVI\", \"V\"],\n    },\n    pretext: () => (\n      <>\n        <h2>i i VI V</h2>\n        <P>\n          These songs exploit an endless loop of {c`i i bVI V i i bVI V`}. So,\n          they don't fit within the natural minor scale {c`1 2 b3 4 5 b6 b7 1`},\n          since {c`V`} uses a note {c`7`}\n        </P>\n        <P>\n          You might say that these songs are using an extended minor scale:{\" \"}\n          {c`1 2 b3 4 5 b6 b7 7 1`}\n        </P>\n        <P>\n          Or you might say that the chord {c`V`} is drawn from a harmonic minor\n          scale, unlike all other chords: {c`1 2 b3 4 5 b6 7 1`}\n        </P>\n        <P>\n          Songs besides the top 100 that have the same pattern:\n          <ul>\n            <li>\n              {a(\n                \"/f/road-trippin---red-hot-chili-peppers\",\n                \"Red Hot Chili Peppers. Road trippin'\",\n              )}\n            </li>\n            <li>\n              {a(\n                \"/f/seven-nation-army-arr.-nikodem-lorenz\",\n                \"The White Stripes. Seven Nations Army\",\n              )}\n            </li>\n            <li>\n              {a(\n                \"/f/loonboon---laura-shigihara-arranged-by-piano-keyng\",\n                \"Laura Shigihara. Loonboon\",\n              )}\n            </li>\n          </ul>\n        </P>\n        {/* <h2>Historical context</h2>\n        <P>\n          Until a natural minor mode gained popularity, a minor mode mostly used{\" \"}\n          {c`V`}. However, the examples below are modern, because they are made\n          of an endless four-measure loop  which is also a modern thing. The\n          truly old examples will appear in the next chapter.\n        </P> */}\n      </>\n    ),\n    composers: [\n      \"Requiem_for_a_Dream\",\n      \"we-are-number-one-but-it-s-a-piano-transcript\",\n      \"Believer_-_Imagine_Dragons\",\n    ],\n  },\n\n  {\n    title: DOUBLE_TONIC_CHAPTER_TITLE,\n    pretext: () => (\n      <>\n        <h2>Natural minor = major</h2>\n        <P>Here's a C major scale: {c`1 2 3 4 5 6 7`}</P>\n        <P>Here's an A minor scale: {ct(`1 2 b3 4 5 b6 b7`, -3)}</P>\n        <P>\n          Here's an A minor scale played the note 3:\n          {ct(`b3 4 5 b6 b7 1 2`, -3)}\n        </P>\n        <P>\n          Notice that C major scale and A minor scale played from {c`b3`} sound\n          exactly the same.\n        </P>\n        <P>\n          Therefore, these two sequences of chords sound the same even if they\n          look different:\n        </P>\n        <P>\n          <ul>\n            <li>{c`I ii iii IV V vi`} - in a C major scale</li>\n            <li>{ct(`bIII iv v bVI bVII i`, -3)} - in a A minor scale</li>\n          </ul>\n        </P>\n        <P>\n          This is a fundamental relation. Each major scale has a <i>relative</i>{\" \"}\n          minor scale. They both share the exact set of piano notes. What's\n          different is the tonic note from which we start to count the scale.\n        </P>\n        <P>\n          So, a scale isn't just a set of notes. What makes a set of notes a\n          scale is a sense of tonic. The tonic note {c`1`} should be played\n          frequently. Melodies often start with {c`1`} and almost always end on\n          it. The <i>tonic chord</i> - {c`I`} or {c`i`} - should be played at\n          key moments within the piece. When exactly?\n        </P>\n        <h2>Double-tonic loops</h2>\n        <P>Consider this loop in C major: {c`vi IV I V`}</P>\n        <P>\n          I can reinterpret the same notes in A minor:{\" \"}\n          {ct(`i bVI bIII bVII`, -3)}\n        </P>\n        <P>When a piece uses this loop, what's the correct interpretation?</P>\n        <P>\n          In short, the situation is as complex as it is: there's no single\n          correct interpretation. You may hear it one way or the other. The\n          other people in the internet may hear it not the same way as you.\n          Those people may argue about the correct tonic in a particular song.\n          These arguments may or may not make sense to you. Should you even\n          bother?\n        </P>\n        <P>This situation is called \"double-tonic\". {q(\"richards\")}</P>\n        <P>\n          Below I present two colorings: major next to minor. I've chosen the\n          minor coloring inside the scores. To learn how to change the coloring,\n          read instructions inside \"Despacito\".\n        </P>\n      </>\n    ),\n    composers: [\n      \"despacito-piano-cover-peter-bence\",\n      \"river-flows-in-you\",\n      \"Yann_Tiersen_Amelie\",\n      \"All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\",\n      \"Let_Her_Go_Passenger\",\n      \"Another_Love__-_Tom_Odell_Professional\",\n      \"alan-walker---alone-piano\",\n      \"old-town-road---lil-nas-x-ft.-billy-ray-cyrus\",\n    ],\n  },\n  {\n    title: \"Functional natural minor\",\n    titleChords: [\"bVII\", \"V\", \"i\"],\n    composers: [\n      \"game-of-thrones-main-piano\",\n      \"sadness-and-sorrow-for-piano-solo\",\n      \"gurenge--demon-slayer-kimetsu-no-yaiba-op\",\n      \"Hallelujah\",\n    ],\n    pretext: () => (\n      <>\n        <h2>Major and minor chords in modes</h2>\n        <P>\n          Recall: six common chords in a natural minor mode are{\" \"}\n          {c`i bIII iv v bVI\n        bVII`}\n          <ul>\n            <li>\n              Three minor chords in a minor mode are {c`i`}, {c`iv`} and {c`v`}\n            </li>\n            <li>\n              Three major chords in a minor mode are {c`bIII`}, {c`bVI`} and{\" \"}\n              {c`bVII`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Recall: six common chords in a major mode are {c`I ii iii IV V vi`}\n          <ul>\n            <li>\n              Three minor chords: {c`ii`}, {c`iii`} and {c`vi`}\n            </li>\n            <li>\n              Three major chords: {c`I`}, {c`IV`} and {c`V`}\n            </li>\n          </ul>\n        </P>\n        <h2>Historical context</h2>\n        <P>\n          Throughout the 19th century, there was no such thing as a natural\n          minor mode with solely {c`v`} chord and without any {c`7`} note in\n          minor. No composers wrote that way.\n        </P>\n        <P>\n          A modern natural minor is a recent invention  it gained popularity in\n          1970s. {q(\"alf_aeolian\")} So, all examples below are pretty modern.\n        </P>\n        <P>\n          We'll look at the older version of minor in the next few chapters.\n        </P>\n        <P>{s`minor_cadence:minor_v`}</P>\n      </>\n    ),\n  },\n  {\n    title: \"Triadic minor with V\",\n    titleChords: [\"V\", \"i\"],\n    pretext: () => (\n      <>\n        <h2>Chords in a minor with {rn`V`}</h2>\n        <P>\n          So, an older version of a minor mode has these chords:{\" \"}\n          {c`i bIII iv v V bVI bVII`}\n        </P>\n        <P>\n          Most sections end with {c`V`} or {c`V i`} chords  you'll see a lot of{\" \"}\n          {c`7`} notes at the right border of the scores.\n        </P>\n        <P>\n          The chord {c`v`} is usually used at the beginning of the section  eg.\n          as {c`i v`}. In most pieces it's not used at all.\n        </P>\n        <P>\n          In some pieces a {c`V`} is replaced with its synonym {c`V7`}.\n        </P>\n        <h2>Functional harmony</h2>\n        <P>\n          Some musicians call it \"functional harmony\". What does it mean? It\n          implies that chords aren't just being put at completely random orders\n          for each new piece.\n        </P>\n        <P>\n          Sections most often start with {c`i`}. They most often end with{\" \"}\n          {c`bVI bVII V i`}, {c`iv V i`}, {c`bVI V i`}.\n        </P>\n        <P>\n          Chord pairs {c`V i`} and {c`V bVI`} are frequent, whereas {c`V iv`} or{\" \"}\n          {c`V bVII`} are rare. {c`V v`} is extremely rare, it almost \"makes no\n          sense\".\n        </P>\n        <P>\n          A {c`i bVII`} will most likely be continued with {c`bVI`}\n        </P>\n        <P>\n          Some chord chunks are also frequent: {c`iv i V i`}, {c`i bVII bVI V`},{\" \"}\n          {c`bVII bIII`}. They are used like formulas.\n        </P>\n        <P>\n          Composers may use them consciously or subconsciously. As they compose,\n          they play a draft and discard something that \"doesn't sound well\". But\n          how can anything sound well?\n        </P>\n        <P>\n          We hear something as \"nice\" because it was very probable in all pieces\n          of music that we have been listening to throughout our whole life.\n        </P>\n        <P>\n          And our hearing system constantly tries to predict what will happen\n          next. So, if there are rules, probabilities, frequencies or other for\n          a brain to memorize pieces faster, then a brain will be constantly\n          extracting those rules and updating its model of Western music in\n          background - during our entire life.\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"minor with V\",\n      chords: [\"iv\", \"bVI\", \"i\", \"bIII\", \"v\", \"Vsus4\", \"V\", \"V7\", \"bVII\"],\n    },\n    composers: [\n      \"Bella_Ciao\",\n      \"Gravity_Falls_Opening\",\n      \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\",\n      \"Pokemon_Theme_Song\",\n      \"attack-on-titan-theme-guren-no-yumiya\",\n      \"Je_Te_Laisserai_Des_Mots_-_Patrick_Watson\",\n    ],\n  },\n  {\n    title: \"Functional major\",\n    titleChords: [\"V\", \"V7\", \"I\"],\n    mode: {\n      title: \"major\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\", \"V7\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Functional major</h2>\n        <P>\n          There's a functional harmony for major mode as well. Some chord pairs\n          and longer sequences are more probable than other.\n        </P>\n        <P>\n          Interestingly, functional major and functional minor modes have some\n          parallels. The most solid ending in them is {c`V I`} or {c`V i`},\n          respectively.\n        </P>\n        <P>\n          {k(\"v7-to-major-i\", \"V7 to I\")} {k(\"V7-to-minor-i\", \"V7 to i\")}\n        </P>\n        <P>\n          In both of them you can use {c`V7`} as a synonym for {c`V`}. And the\n          endings like {c`V7 I`} or {c`V7 i`} are even more solid.\n        </P>\n        <P>\n          {c`IV`} in major has a similar distribution around those two chords as{\" \"}\n          {c`iv`}.\n        </P>\n        <P>\n          As you listen to the pieces, pay attention to chord pairs. Do you hear\n          some of them as \"very common\"?\n        </P>\n        <h2>Common types of chords</h2>\n        <P>\n          Most modern Western pieces are built as two parallel streams: chords\n          and melody. Chords are \"aligned\" with the melody. Some notes in melody\n           downbeats, countour turnaround points  usually use one of the notes\n          of the current chord.\n        </P>\n        <P>\n          If we look at the intervals between notes of a chord, we'll see that\n          there are three types of chords that are used in modern Western music:\n          <ul>\n            <li>\n              Major chords (4 semitones + 3 semitones):{\" \"}\n              {c`I II bIII IV V bVI bVII`} etc. There are 12 different major\n              chords  you can build one on any of the twelve notes.\n            </li>\n            <li>\n              Minor chords (3 semitones + 4 semitones): {c`i ii iii iv v vi`}\n              etc. Again, there are 12 different minor chords.\n            </li>\n            <li>\n              Dominanth seventh chords (4 semitones + 3 semitones + 3\n              semitones): So far we've only seen {c`V7`}. However, there are\n              pieces where other chords of the same interval are used:{\" \"}\n              {c`I7 V7/V V7/vi IV7 V7 V7/ii V7/iii`}\n            </li>\n          </ul>\n        </P>\n        <h2>Why these colors?</h2>\n        <P>\n          Previously, people tried to design colored notations by assigning\n          colors to notes in a rainbow order. This is an obvious idea. However,\n          it doesn't help to highlight the structures that are actually frequent\n          in Western music.\n        </P>\n        <P>\n          There are three main groups of chords in functional harmony:\n          <ul>\n            <li>\n              tonic chords begin and end sections: {c`I`} and {c`i`}\n            </li>\n            <li>\n              dominants end sections or precede tonic chords at the end: {c`V`},{\" \"}\n              {c`V7`}, {c`bVII`}\n            </li>\n            <li>\n              predominants preced dominants at the end: {c`IV`}, {c`iv`},{\" \"}\n              {c`ii`} and others\n            </li>\n          </ul>\n        </P>\n        <P>\n          My coloring makes these three groups as visually distinct as possible.\n          And also, it makes colors of common chords to blend together. This is\n          because I also follow the rainbow, but in the order of thirds:\n          {c`b2 2 4 #4 b6 6 1 b3 3 5 b7 7`}\n        </P>\n        <P>\n          <Metaphors />\n        </P>\n        <P>\n          <ChordStairs mode={MAJOR_MODE} />\n        </P>\n        <P>\n          <ChordStairs mode={MINOR_MODE} />\n        </P>\n        <P>\n          Same vibe: <ul>{A(\"michishirube---violet-evergarden-ed\")}</ul>\n        </P>\n      </>\n    ),\n    composers: [\n      \"Canon_in_D\",\n      \"a-thousand-years\",\n      \"John_Lennon_Imagine\",\n\n      \"Cant_Help_Falling_In_Love\",\n    ],\n  },\n  {\n    title: \"Classical V7 i\",\n    titleChords: [\"V7\", \"i\"],\n    composers: [\n      \"Carol_of_the_Bells\",\n      \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\",\n      \"theme-from-schindler-s-list---piano-solo\",\n    ],\n  },\n  {\n    title: \"Circle of fifths\",\n    titleChords: [\"i\", \"iv\", \"bVII\", \"bIII\"],\n    pretext: () => (\n      <>\n        <h2>Circle of fifths in minor</h2>\n        <P>\n          If four-chord loops didn't quite appear throughout 17..19th centuries,\n          eight-chord loops did. The most important loop since Baroque era was\n          The Circle of Fifths progression.\n        </P>\n        <P>The model example: {c`i iv bVII bIII bVI iio V i`}</P>\n        <P>\n          The idea is to take the next chord's root three notes up from a\n          previous chord's root, going around a scale.\n        </P>\n        <P>Here are the roots of these chords: {c`1 4 b7 b3 b6 2 5 1`}</P>\n        <P>\n          There are options. A rare {c`iio`} chord may be replaced with {c`iv`},\n          which sounds \"similar\": these chords share two notes. This way we'll\n          get {c`i iv bVII bIII bVI iv V i`}\n        </P>\n        <P>{s`cycle_root_motion:5`}</P>\n      </>\n    ),\n    mode: {\n      title: \"circle of fifths\",\n      chords: [\"i\", \"iv\", \"bVII\", \"bIII\", \"bVI\", \"iio7\", \"bII\", \"V7\"],\n    },\n    composers: [\n      \"passacaglia---handel-halvorsen\",\n      \"g-minor-bach-original\",\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n      \"vivaldi---summer---piano\",\n    ],\n  },\n  {\n    title: \"IV in minor\",\n    titleChords: [\"IV\", \"i\"],\n    pretext: () => (\n      <>\n        <h2>Recap with some terminology</h2>\n        <P>\n          Most modern Western pieces are structured as follows: their entire\n          sections are either in a major mode {c`I ii iii IV V vi V7 I`} or in a\n          minor mode {c`i bIII iv v V bVI bVII V7 i`}.\n        </P>\n        <P>\n          This is called a <i>diatonic harmony</i>  meaning that we build\n          chords as three notes taken <i>in thirds</i> (1-3-5, 2-4-6 etc.) from\n          the mode's scale (with the exception of {c`V`}/{c`V7`} in a minor\n          mode).\n        </P>\n        <P>\n          One way of organizing chord changes is a loop or several loops. Loops\n          have a length of four measures. The time is therefore divided into\n          four-measure phrases which we show with white vertical bars.\n        </P>\n        <P>\n          Another way of organizing chord changes is a functional harmony: a\n          string of chords starts with a <i>tonic chord</i> {c`I`} or {c`i`} and\n          progresses according to local transition probabilities up to a{\" \"}\n          <i>cadential formula</i> (i.e. a typical ending)  most often ending\n          with {c`V I`} in a major mode and with {c`bVI bVII i`} or {c`V i`} in\n          minor mode.\n        </P>\n        <h2>Chromatic chords</h2>\n        <P>\n          A chromatic chord is a chord used in a mode where there's no way to\n          build it in thirds using mode's scale degrees. There are two popular\n          extensions of a diatonic harmony with chromatic chords: borrowed\n          chords and applied chords.\n        </P>\n        <P>\n          As we'll see further, chromatic chords are most often either major\n          chords, minor chords or dominant seventh chords. Therefore, the rule\n          \"to use common types of chords\" is more important for composers than\n          the rule \"to stick to a certain scale of 7 or 8 notes\".\n        </P>\n        <h2>Dorian {rn`IV`} in minor</h2>\n        <P>\n          Some pieces use a {c`IV`} chord inside an otherwise minor mode piece:{\" \"}\n          {c`i IV i`}. Therefore the total chord palette in that piece becomes{\" \"}\n          {c`i bIII iv IV v V bVI bVII V7 i`}\n        </P>\n        <P>Most pieces use this chord only at a single particular place.</P>\n        <P>\n          Some people say that {c`IV`} in {c`i IV i`} is <i>borrowed</i> from\n          major into minor.\n        </P>\n        <P>\n          Some people call this chord a <i>dorian</i>. Here's what they mean:\n          there's a concept of a dorian scale {c`1 2 b3 4 5 6 b7 1`}. If a piece\n          is using this scale as a primary one, then {c`IV`} is a diatonic to\n          it: it's in the scale. This scale yields these chords:{\" \"}\n          {c`i bIII IV v bVI bVII i`}\n        </P>\n        <P>\n          There are no pieces throughout top 100 corpus that are built entirely\n          using a dorian mode. There are degrees to which a {c`6`} note is used\n          within a minor mode, most often as a {c`IV`} chord. See examples:{\" \"}\n          {s`dorian:IV`}\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"dorian minor\",\n      chords: [\"iv\", \"IV\", \"bVI\", \"i\", \"bIII\", \"v\", \"bVII\"],\n    },\n    composers: [\n      \"nothing-else-matters---metallica\",\n      \"dragonborn---skyrim-theme-song-piano-solo\",\n      \"solas---jamie-duffy\",\n      \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\",\n      \"Mad_world_Piano\",\n    ],\n  },\n  {\n    title: \"iv in major\",\n    titleChords: [\"iv\", \"I\"],\n    pretext: () => (\n      <>\n        <h2>{rn`iv`} in major</h2>\n        <P>{s`chromatic_chords:iv`}</P>\n      </>\n    ),\n    composers: [\n      \"calum-scott---you-are-the-reason-piano-sheet-lyrics-lyrics-version-link-in-description\",\n      \"how-far-i-ll-go-~-moana-ost\",\n    ],\n  },\n  {\n    title: \"VII in major\",\n    titleChords: [\"bVII\", \"I\"],\n    mode: {\n      title: \"Mario cadence\",\n      chords: [\"bVI\", \"bVII\", \"I\"],\n    },\n    composers: [\n      \"when-i-was-your-man---bruno-mars-600e3a\",\n      \"Take_on_me\",\n\n      \"Super_Mario_Bros_Main_Theme\",\n      \"welcome-to-the-black-parade---my-chemical-romance\",\n    ],\n  },\n  {\n    title: \"V7/V\",\n    titleChords: [\"V7/V\", \"V\"],\n    pretext: () => (\n      <>\n        <h2>Applied dominant: {rn`V7/V`}</h2>\n        <P>{c`I ii V7 I I V7/V V7 I`}</P>\n        <P>\n          There are diatonic major pieces where the only chromatic chord is{\" \"}\n          {c`II7`} or {c`II`} - a major chord built on a {c`2`} root instead of\n          a diatonic {c`ii`} chord. How to explain this chord?\n        </P>\n        <P>\n          Most often it's followed by the {c`V`} chord: {c`II7 V`}. Or, as they\n          say, {c`II7`} is resolved to {c`V`}.{\" \"}\n        </P>\n        <P>\n          Let's recolor it: let's treat this {c`V`} as a brief {ct(`I`, -5)}{\" \"}\n          tonic chord. So, a C major's {c`II7 V`} is a G major's{\" \"}\n          {ct(`V7 I`, -5)}. Because of that, the {c`V7/V`} chord is called{\" \"}\n          {rn`V7/V`} (pronounced \"five seven of five\"), especially when\n          preceding the {rn`V`} chord.\n        </P>\n        <P>\n          We briefly <i>tonicize</i> the {rn`V`} chord (or the {c`5`} scale\n          degree) - we make it a <i>local tonic</i> just for the duration of\n          these two chords. A {rn`V7/V`} chord is also called a{\" \"}\n          <i>secondary dominant</i> or an <i>applied dominant</i>.\n        </P>\n        <P>\n          Sometimes {c`II7`} is on its own, not followed by {c`V`}\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"\",\n      chords: [\"V7/V\", \"V7\", \"I\"],\n    },\n    composers: [\n      \"piano-man-piano\",\n      \"Disney_Pixar_Up_Theme\",\n      \"Test_Drive_How_to_Train_Your_Dragon\",\n      \"Dawn_Pride_and_Prejudice\",\n    ],\n  },\n  {\n    title: \"V7/vi\",\n    titleChords: [\"V7/vi\", \"vi\"],\n    mode: {\n      title: \"major with V/vi\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V/vi\", \"Vsus4\", \"V\", \"V7\"],\n    },\n    pretext: () => (\n      <>\n        <h2>{rn`V7/vi`}</h2>\n        <P>{ct(`I V7 I V7/vi vi V7 I`, -12)}</P>\n        <P>\n          Another applied chord that's common is {c`V/vi`} or {c`V7/vi`}. It's\n          usually resolved as {c`V7/vi vi`}, therefore tonicizing a {c`vi`}{\" \"}\n          chord making it a local tonic: {c`V7/vi vi`} in C major equals to{\" \"}\n          {ct(`V7 i`, -3)} in A minor. So, this applied chord tonicizes a\n          relative minor.\n        </P>\n      </>\n    ),\n    composers: [\n      \"your-song-piano\",\n      \"sia---snowman\",\n      \"my-lie-watashi-no-uso---your-lie-in-april\",\n      \"kimi-no-na-wa---sparkle-theishter-2016\",\n    ],\n  },\n  {\n    title: \"Vsus4\",\n    titleChords: [\"Vsus4\", \"V\"],\n    mode: [\n      { title: \"major\", chords: [...MAJOR_MODE.chords, \"Vsus4\"] },\n      { title: \"minor\", chords: [...MINOR_MODE.chords, \"Vsus4\"] },\n    ],\n    pretext: () => (\n      <>\n        <h2>{rn`Vsus4`}</h2>\n        <P>\n          There's a frequent diatonic chord that isn't either minor or major\n          chord: a {c`Vsus4`} chord. It has intervals of 5+2 semitones. It's\n          most commonly resolved as {c`Vsus4 V`}, maybe further as{\" \"}\n          {c`Vsus4 V I`}. Sometimes it's used as {c`Vsus47`}: {c`Vsus47 V7 I`}\n        </P>\n        <P>\n          <i>sus4</i> means that a {ct(`1`, 12)} in it - so called a{\" \"}\n          <i>perfect fourth</i> (i.e. 5 semitones) over the root - is{\" \"}\n          <i>suspended</i> and then resolved into {c`7`}: {c`1 7 Vsus4 V`}.\n          Although in modern composition it's not necessarily resolved:{\" \"}\n          {s`V:sus4`}, {s`V:sus4_unresolved`}\n        </P>\n      </>\n    ),\n    composers: [\n      \"Pokemon_Theme_Song\",\n      \"my-heart-will-go-on\",\n      \"Ed_Sheeran_Perfect\",\n    ],\n  },\n  {\n    title: \"V7/ii\",\n    titleChords: [\"V7/ii\", \"ii\"],\n    mode: [\n      MAJOR_MODE,\n      {\n        title: \"applied chords\",\n        chords: [\"V7/ii\", \"ii\", \"V7/V\", \"V\", \"V7/vi\", \"vi\"],\n      },\n    ],\n    pretext: () => (\n      <>\n        <h2>Applied chords in a major mode</h2>\n        <P>Let's list all possible applied chords in major.</P>\n        <P>\n          {rn`V7/I`} is just a {rn`V7`}: {c`V7 I`}\n        </P>\n        <P>\n          {rn`V7/ii`} is a major chord on {c`6`}, so instead of a diatonic{\" \"}\n          {c`vi`} we get a {c`V/ii`} or a {c`V7/ii`}. It's resolved to {c`ii`}.\n          I put it in a context to distinguish it from a standard {rn`V7`} in\n          another key: {c`I V7 I V7/ii ii V7 I`}\n        </P>\n        <P>\n          {rn`V7/iii`} is a major chord on {c`7`}, so instead of a rarely used\n          diminished 3+3 semitones chord {c`viio`} we get a {c`V/iii`} or a{\" \"}\n          {c`V7/iii`}: {c`I V7 I V7/iii iii V7 I`}\n        </P>\n        <p>\n          {rn`V/IV`} is simply {rn`I`} {c`I`}. However, {rn`V7/IV`} {c`V7/IV`}{\" \"}\n          makes sense: it's a non-diatonic chord. {c`I V7 I V7/IV IV V7 I`}\n        </p>\n      </>\n    ),\n    composers: [\n      \"Omori_Duet\",\n      \"abba--the-winner-takes-it-all\",\n      \"All_I_Want_for_Christmas_is_You\",\n    ],\n  },\n  {\n    title: MODULATIONS_CHAPTER_TITLE,\n    mode: {\n      chords: [\"V7\", \"I\", \"i\"],\n      title: \"\",\n    },\n    pretext: () => (\n      <>\n        <h2>Modulations in classical music: endless V7 to I and V7 to i</h2>\n      </>\n    ),\n    composers: [\n      \"minuet-bwv-anhang-114-in-g-major\",\n      \"flight-of-the-bumblebee\",\n\n      \"wa-mozart-marche-turque-turkish-march-fingered\",\n\n      \"Fr_Elise\",\n    ],\n  },\n  {\n    title: \"blues, penta, hexa\",\n    titleChords: [\"1\", \"b3\", \"4\", \"5\", \"b7\"],\n    pretext: () => (\n      <>\n        <P>\n          {k(\"blues-scale\")} {k(\"minor-pentatonic\")}\n        </P>\n        <P>\n          {s`scale:blues`} {s`scale:minor_pentatonic`}{\" \"}\n          {s`scale:major_pentatonic`} {s`scale:hexatonic_minor`}{\" \"}\n          {s`scale:hexatonic_major`}\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"scales of 5 and 6 notes\",\n      chords: [\"1\", \"b3\", \"4\", \"#4\", \"5\", \"b7\"],\n    },\n    composers: [\n      \"Undertale_-_Megalovania_Piano_ver._3\",\n      \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\",\n      \"fairy-tail-main-theme\",\n      \"africa---toto\",\n    ],\n  },\n  {\n    title: \"maj7\",\n    titleChords: [\"IVmaj7\", \"Imaj7\"],\n    mode: {\n      title: \"\",\n      chords: [\"ii7\", \"IVmaj7\", \"vi7\", \"Imaj7\", \"iii7\", \"V13\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Diatonic seventh chords</h2>\n        <P>\n          The most frequent chords in Western music are triads. They are built\n          on a scale by taking every other note starting from the root.\n        </P>\n        <P>\n          Let's see what we get if we take four notes instead of three using the\n          same idea. Here's a major scale: {c`1 2 3 4 5 6 7 1 2 3 4 5 6 7 1`}\n        </P>\n        <P>\n          <ul>\n            <li>\n              {c`1 3 5 7`} {c`Imaj7`} {rn`Imaj7`}  intervals 4+3+4, a\n              combination of {c`I iii`}, a major seventh chord\n            </li>\n            <li>\n              {c`2 4 6 1`} {c`ii7`} {rn`ii7`}  intervals 3+4+3, a combination\n              of {c`ii IV`}, a minor seventh chord\n            </li>\n            <li>\n              {c`3 5 7 2`} {c`iii7`} {rn`iii7`}  intervals 3+4+3, a combination\n              of {c`iii V`}, a minor seventh chord\n            </li>\n            <li>\n              {c`4 6 1 3`} {c`IVmaj7`} {rn`IVmaj7`}  intervals 4+3+4, a\n              combination of {c`IV vi`}\n            </li>\n            <li>\n              {c`5 7 2 4`} {c`V7`} {rn`V7`}  intervals 4+3+3, a combination of{\" \"}\n              {c`V viio`}, a dominant seventh chord\n            </li>\n            <li>\n              {c`6 1 3 5`} {c`vi7`} {rn`vi7`}  intervals 3+4+3, a combination\n              of {c`vi I`}, a minor seventh chord\n            </li>\n          </ul>\n        </P>\n        <P>\n          While it's easy to find minor seventh chords and dominanth seventh\n          chords in classical music (Mozart and Chopin), major seventh chords\n          emerged as a popular tool only since late 19th century. Erik Satie's\n          example below - {ct(`4 IVmaj7 IVmaj7 1 Imaj7 Imaj7`, 2)} - is the\n          earliest example I've found that consistently uses it as a main idea\n          of a piece. Also see {s`shuttle:IVmaj7_Imaj7`}\n        </P>\n      </>\n    ),\n    composers: [\n      \"Sweden_Minecraft\",\n      \"Golden_Hour__JVKE_Updated_Ver.\",\n      \"Gymnopdie_No._1__Satie\",\n      \"ylang-ylang---fkj-transcribed-by-lilroo\",\n      \"yuri-on-ice---piano-theme-full\",\n      \"congratulations---mac-miller\",\n      \"Clair_de_Lune__Debussy\",\n    ],\n  },\n  {\n    title: \"ii V I jazz\",\n    titleChords: [\"ii7\", \"V7\", \"Imaj7\"],\n    mode: {\n      title: \"jazz\",\n      chords: [\"ii7\", \"V7\", \"Imaj7\", \"ii7\", \"V7b9\", \"i7\"],\n    },\n    pretext: () => (\n      <>\n        <P>{s`cycle_root_motion:autumn_leaves`}</P>\n      </>\n    ),\n    composers: [\n      \"Fly_Me_to_the_Moon\",\n      \"autumn-leaves-jazz-piano\",\n      \"it-s-been-a-long-long-time---harry-james\",\n      \"Love_Like_You_Steven_Universe\",\n      \"ye-niqu-keru-yoru-ni-kakeru---racing-into-the-night\",\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n    ],\n  },\n  {\n    title: \"viio7, io7, biio7\",\n    titleChords: [\"viio7\", \"io7\", \"biio7\"],\n    pretext: () => (\n      <>\n        <h2>Fully diminished seventh chords</h2>\n        <P>\n          They have an intervalic structure 3+3+3(+3). There are exactly three\n          of them on a piano:\n        </P>\n        <P>\n          <ul>\n            <li>\n              {c`1 b3 #4 6`} {c`io7 biiio7 #ivo7 vio7`}\n            </li>\n            <li>\n              {c`b2 3 5 b7`} {c`biio7 iiio7 vo7 bviio7`}\n            </li>\n            <li>\n              {c`2 4 b6 7`} {c`iio7 ivo7 bvio7 viio7`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Or you can play them all together, which is even more fun:{\" \"}\n          {c`io7 biio7 iio7 biiio7 iiio7 ivo7 #ivo7 vo7 bvio7 vio7 bviio7 viio7`}\n        </P>\n        <P>\n          As you can see, they are fully symmetrical, so they don't have any{\" \"}\n          <i>root</i>. This makes them harder to notate.\n        </P>\n        <P>\n          They have many usages: {s`modulation:pivot`} {s`cto7:to_I`}{\" \"}\n          {s`cto7:to_V`} {s`applied:viio7/ii`} {s`applied:viio7/iv`}{\" \"}\n          {s`applied:viio7/V`}\n        </P>\n      </>\n    ),\n    composers: [\n      \"anastasia---once-upon-a-december\",\n      \"la-vie-en-rose-solo-accordion\",\n      \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\",\n      \"the_entertainer_scott_joplin\",\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n    ],\n  },\n  {\n    title: \"V/V/V\",\n    titleChords: [\"V7/vi\", \"V7/ii\", \"V7/V\", \"V7\"],\n    pretext: () => (\n      <>\n        <h2>Chain of dominants</h2>\n      </>\n    ),\n    composers: [\n      \"mii-channel-piano\",\n      \"Liebestraum_No._3_in_A_Major\",\n      \"dance-of-the-sugar-plum-fairy\",\n    ],\n  },\n\n  {\n    title: \"Style\",\n    pretext: () => (\n      <>\n        Here we present two most popular pieces by each composers. Can you see\n        that pieces of the same composer look more similar to each other than to\n        other composers?\n      </>\n    ),\n    composers: [\n      \"Fr_Elise\",\n      \"Sonate_No._14_Moonlight_1st_Movement\",\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n      \"One_Summers_Day_Spirited_Away\",\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n      \"Waltz_in_A_MinorChopin\",\n      \"Liebestraum_No._3_in_A_Major\",\n      \"tude_S._1413_in_G_Minor_La_Campanella__Liszt\",\n      \"river-flows-in-you\",\n      \"Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\",\n      \"Sweden_Minecraft\",\n      \"Wet_Hands_Minecraft\",\n      \"Gravity_Falls_Opening\",\n      \"eda-s-requiem---brad-breeck-piano\",\n\n      \"Maple_Leaf_Rag_Scott_Joplin\",\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n      \"kanye-west-homecoming-piano-cover\",\n      \"Viva_La_Vida_Coldplay\",\n      \"the-scientist---coldplay-piano-arrangement\",\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n      \"ballade-pour-adeline---richard-clayderman\",\n      \"Undertale_-_Megalovania_Piano_ver._3\",\n      \"Fallen_Down_Undertale\",\n      \"Clair_de_Lune__Debussy\",\n      \"arabesque-l.-66-no.-1-in-e-major\",\n      \"Super_Mario_Bros_Main_Theme\",\n      \"Zeldas_Lullaby\",\n      \"Gymnopdie_No._1__Satie\",\n      \"satie-e.---gnossienne-no.-1\",\n      \"wa-mozart-marche-turque-turkish-march-fingered\",\n      \"lacrimosa---requiem\",\n      \"Lovely_Billie_Eilish\",\n      \"Billie_Eilish_Bad_Guy\",\n      \"Ed_Sheeran_Perfect\",\n      \"Ed_Sheeran_Shape_of_you\",\n      \"Golden_Hour__JVKE_Updated_Ver.\",\n      \"what-falling-in-love-feels-like---jake25.17-fanmade-extended-version\",\n      \"dragonborn---skyrim-theme-song-piano-solo\",\n      \"secunda-the-elder-scrolls-v-skyrim\",\n      \"Dawn_Pride_and_Prejudice\",\n      \"liz-on-top-of-the-world\",\n      \"Canon_in_D\",\n      \"pachelbel-chaconne-in-f-minor\",\n      \"mii-channel-piano\",\n      \"wii-sports-theme-piano\",\n    ],\n  },\n];\n\nexport type Mode = { title: string; chords: Chord[] };\n","import path from \"path\";\nimport queryString from \"querystring\";\n\nimport { CATALOG_PREFIX } from \"./config\";\n\nexport function updateQueryString(newParams) {\n  // Merge new params with current query string\n  const params = {\n    ...queryString.parse(window.location.search.substr(1)),\n    ...newParams,\n  };\n  // Delete undefined properties\n  Object.keys(params).forEach(\n    (key) => params[key] === undefined && delete params[key],\n  );\n  // Object.keys(params).forEach(key => params[key] = decodeURIComponent(params[key]));\n  const stateUrl = \"?\" + queryString.stringify(params).replace(/%20/g, \"+\");\n  // Update address bar URL\n  window.history.replaceState(null, \"\", stateUrl);\n}\n\nexport function unlockAudioContext(context) {\n  return new Promise((resolve) => {\n    if (context.state === \"suspended\") {\n      const events = [\"touchstart\", \"touchend\", \"mousedown\", \"mouseup\"];\n      const unlock = () => {\n        context.resume().then(() => {\n          events.forEach((event) =>\n            document.body.removeEventListener(event, unlock),\n          );\n          resolve();\n        });\n      };\n      events.forEach((event) =>\n        document.body.addEventListener(event, unlock, false),\n      );\n    } else {\n      resolve();\n    }\n  });\n}\n\nexport function titlesFromMetadata(metadata) {\n  if (metadata.formatted) {\n    return metadata.formatted;\n  }\n\n  const title = allOrNone(metadata.artist, \" - \") + metadata.title;\n  const subtitle =\n    [metadata.game, metadata.system].filter((x) => x).join(\" - \") +\n    allOrNone(\" (\", metadata.copyright, \")\");\n  return { title, subtitle };\n}\n\nexport function allOrNone(...args) {\n  let str = \"\";\n  for (let i = 0; i < args.length; i++) {\n    if (!args[i]) return \"\";\n    str += args[i];\n  }\n  return str;\n}\n\nexport function getFilepathFromUrl(url) {\n  return url.replace(CATALOG_PREFIX, \"/\");\n}\n\nexport function ensureEmscFileWithUrl(emscRuntime, filename, url) {\n  if (emscRuntime.FS.analyzePath(filename).exists) {\n    console.debug(`${filename} exists in Emscripten file system.`);\n    return Promise.resolve(filename);\n  } else {\n    console.log(`Downloading ${filename}...`);\n    return fetch(url)\n      .then((response) => {\n        // Because fetch doesn't reject on 404\n        if (!response.ok)\n          throw Error(`HTTP ${response.status} while fetching ${filename}`);\n        return response;\n      })\n      .then((response) => response.arrayBuffer())\n      .then((buffer) => {\n        const arr = new Uint8Array(buffer);\n        return ensureEmscFileWithData(emscRuntime, filename, arr, true);\n      });\n  }\n}\n\nexport function ensureEmscFileWithData(\n  emscRuntime,\n  filename,\n  uint8Array,\n  forceWrite = false,\n) {\n  if (!forceWrite && emscRuntime.FS.analyzePath(filename).exists) {\n    console.debug(`${filename} exists in Emscripten file system.`);\n    return Promise.resolve(filename);\n  } else {\n    console.debug(`Writing ${filename} to Emscripten file system...`);\n    const dir = path.dirname(filename);\n    emscRuntime.FS.mkdirTree(dir);\n    emscRuntime.FS.writeFile(filename, uint8Array);\n    return new Promise((resolve, reject) => {\n      emscRuntime.FS.syncfs(false, (err) => {\n        if (err) {\n          console.error(\"Error synchronizing to indexeddb.\", err);\n          reject(err);\n        } else {\n          console.debug(`Synchronized ${filename} to indexeddb.`);\n          resolve(filename);\n        }\n      });\n    });\n  }\n}\n\nexport function remap(number, fromLeft, fromRight, toLeft, toRight) {\n  return (\n    toLeft + ((number - fromLeft) / (fromRight - fromLeft)) * (toRight - toLeft)\n  );\n}\n\nexport function remap01(number, toLeft, toRight) {\n  return remap(number, 0, 1, toLeft, toRight);\n}\n","import { faList } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { beautifySlug } from \"./utils\";\n\nconst badgeStyle = {\n  container: {\n    fontSize: \"0.9em\",\n    letterSpacing: \"0.05em\",\n    color: \"#ddd\",\n    textDecoration: \"none\",\n    cursor: \"pointer\",\n  } as const,\n  icon: faList,\n  iconColor: \"#ddd\",\n};\n\nconst LOWERCASE_WORDS = [\"de\", \"and\"];\n\nconst capitalizeWords = (text: string): string => {\n  return text\n    .split(\" \")\n    .map((word, index) => {\n      if (LOWERCASE_WORDS.includes(word.toLowerCase()) && index !== 0) {\n        return word.toLowerCase();\n      }\n      return word.charAt(0).toUpperCase() + word.slice(1);\n    })\n    .join(\" \");\n};\n\nexport const CorpusLink: React.FC<{ slug: string }> = ({ slug }) => {\n  return (\n    <Link\n      to={`/corpus/${slug}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      style={{\n        ...badgeStyle.container,\n        whiteSpace: \"nowrap\",\n        cursor: \"pointer\",\n        color: \"white\",\n        fontWeight: \"bold\",\n        letterSpacing: \"0.07em\",\n      }}\n    >\n      <FontAwesomeIcon\n        icon={badgeStyle.icon}\n        style={{\n          width: \"12px\",\n          marginRight: \"6px\",\n          color: badgeStyle.iconColor,\n        }}\n      />\n      {capitalizeWords(beautifySlug(slug))}\n    </Link>\n  );\n};\n","import { MAJOR_MODE, MINOR_MODE, STRICT_NATURAL_MINOR } from \"./legends/chords\";\n\nexport type Top100Composer = {\n  slug: string;\n  composer: string;\n  chords?: string[];\n  displayTitle: string;\n  isVocal?: boolean;\n};\n\nexport const TOP_100_COMPOSERS: Top100Composer[] = [\n  {\n    slug: \"river-flows-in-you\",\n    composer: \"Yiruma\",\n    displayTitle: \"River Flows in You\",\n    chords: [\"i\", \"bIII\", \"bVI\", \"bVII\"],\n  },\n  {\n    slug: \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n    composer: \"Joe Hisaishi\",\n    displayTitle: \"Merry-Go-Round of Life (from Howl's Moving Castle)\",\n  },\n  {\n    slug: \"Canon_in_D\",\n    composer: \"Johann Pachelbel\",\n    displayTitle: \"Canon in D major\",\n    chords: MAJOR_MODE.chords,\n  },\n  {\n    slug: \"Clair_de_Lune__Debussy\",\n    composer: \"Claude Debussy\",\n    displayTitle: \"Clair de Lune\",\n  },\n  {\n    slug: \"Fr_Elise\",\n    composer: \"Ludwig van Beethoven\",\n    displayTitle: \"Fr Elise\",\n  },\n  {\n    slug: \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n    composer: \"Frdric Chopin\",\n    displayTitle: \"Nocturne in E-flat major, Op. 9 No. 2\",\n  },\n  {\n    slug: \"Gymnopdie_No._1__Satie\",\n    composer: \"Erik Satie\",\n    displayTitle: \"Gymnopdie No. 1\",\n  },\n  {\n    slug: \"Undertale_-_Megalovania_Piano_ver._3\",\n    composer: \"Toby Fox\",\n    displayTitle: \"Megalovania (from Undertale)\",\n  },\n  {\n    slug: \"Golden_Hour__JVKE_Updated_Ver.\",\n    composer: \"JVKE\",\n    displayTitle: \"Golden Hour\",\n    isVocal: true,\n  },\n  {\n    slug: \"Je_Te_Laisserai_Des_Mots_-_Patrick_Watson\",\n    composer: \"Patrick Watson\",\n    displayTitle: \"Je te laisserai des mots\",\n    isVocal: true,\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"Hallelujah\",\n    composer: \"Leonard Cohen\",\n    displayTitle: \"Hallelujah\",\n    isVocal: true,\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"Interstellar\",\n    composer: \"Hans Zimmer\",\n    displayTitle: \"Interstellar Main Theme\",\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"Another_Love__-_Tom_Odell_Professional\",\n    composer: \"Tom Odell\",\n    displayTitle: \"Another Love\",\n    isVocal: true,\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"Sweden_Minecraft\",\n    composer: \"C418\",\n    displayTitle: \"Sweden (from Minecraft)\",\n    chords: MAJOR_MODE.chords,\n  },\n  {\n    slug: \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\",\n    composer: \"Klaus Badelt\",\n    displayTitle: \"He's a Pirate (from Pirates of the Caribbean)\",\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"game-of-thrones-main-piano\",\n    composer: \"Ramin Djawadi\",\n    displayTitle: \"Game of Thrones Main Theme\",\n  },\n  {\n    slug: \"someone-you-loved-lewis-capaldi\",\n    composer: \"Lewis Capaldi\",\n    displayTitle: \"Someone You Loved\",\n    isVocal: true,\n    chords: MAJOR_MODE.chords,\n  },\n  {\n    slug: \"Ed_Sheeran_Perfect\",\n    composer: \"Ed Sheeran\",\n    displayTitle: \"Perfect\",\n    isVocal: true,\n    chords: MAJOR_MODE.chords,\n  },\n  {\n    slug: \"Liebestraum_No._3_in_A_Major\",\n    composer: \"Franz Liszt\",\n    displayTitle: \"Liebestraum No. 3 in A-flat major\",\n  },\n  {\n    slug: \"Believer_-_Imagine_Dragons\",\n    composer: \"Imagine Dragons\",\n    displayTitle: \"Believer\",\n    chords: [\"i\", \"bVI\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\",\n    composer: \"John Legend\",\n    displayTitle: \"All of Me\",\n    isVocal: true,\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"Mad_world_Piano\",\n    composer: \"Tears for Fears\",\n    displayTitle: \"Mad World\",\n    chords: [\"ii\", \"IV\", \"I\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n    composer: \"Paul de Senneville\",\n    displayTitle: \"Mariage d'Amour\",\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"someone-like-you\",\n    composer: \"Adele\",\n    chords: MAJOR_MODE.chords,\n    displayTitle: \"Someone Like You\",\n    isVocal: true,\n  },\n  {\n    slug: \"my-heart-will-go-on\",\n    composer: \"James Horner\",\n    displayTitle: \"My Heart Will Go On (from Titanic)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\",\n    composer: \"Yugo Kanno\",\n    displayTitle: \"Il vento d'oro (Giorno's Theme)\",\n    isVocal: true,\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"Carol_of_the_Bells\",\n    composer: \"Mykola Leontovych\",\n    displayTitle: \"Carol of the Bells (Shchedryk)\",\n    isVocal: true,\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"piano-man-piano\",\n    composer: \"Billy Joel\",\n    displayTitle: \"Piano Man\",\n    isVocal: true,\n    chords: MAJOR_MODE.chords,\n  },\n  {\n    slug: \"Fly_Me_to_the_Moon\",\n    composer: \"Bart Howard\",\n    displayTitle: \"Fly Me to the Moon (In Other Words)\",\n    isVocal: true,\n  },\n  {\n    slug: \"passacaglia---handel-halvorsen\",\n    composer: \"Handel\",\n    displayTitle: \"Passacaglia in G minor (arr. Halvorsen)\",\n    chords: MINOR_MODE.chords,\n  },\n\n  {\n    slug: \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\",\n    composer: \"Bach\",\n    displayTitle: \"Prelude in C major, BWV 846\",\n  },\n  {\n    slug: \"All_I_Want_for_Christmas_is_You\",\n    composer: \"Mariah Carey\",\n    displayTitle: \"All I Want for Christmas Is You\",\n    isVocal: true,\n    chords: MAJOR_MODE.chords,\n  },\n  {\n    slug: \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\",\n    composer: \"Shostakovich\",\n    displayTitle: \"Waltz No. 2 (Suite for Variety Orchestra)\",\n  },\n  {\n    slug: \"wa-mozart-marche-turque-turkish-march-fingered\",\n    composer: \"Mozart\",\n    displayTitle: \"Turkish March (Rondo alla Turca)\",\n  },\n  {\n    slug: \"Viva_La_Vida_Coldplay\",\n    composer: \"Coldplay\",\n    displayTitle: \"Viva la Vida\",\n    chords: [\"IV\", \"V\", \"I\", \"vi\"],\n    isVocal: true,\n  },\n  {\n    slug: \"Gravity_Falls_Opening\",\n    composer: \"Brad Breeck\",\n    displayTitle: \"Gravity Falls Theme\",\n  },\n  {\n    slug: \"the_entertainer_scott_joplin\",\n    composer: \"Scott Joplin\",\n    displayTitle: \"The Entertainer\",\n  },\n  {\n    slug: \"Disney_Pixar_Up_Theme\",\n    composer: \"Michael Giacchino\",\n    displayTitle: \"Married Life (from Up)\",\n  },\n  {\n    slug: \"a-thousand-years\",\n    composer: \"Christina Perri\",\n    displayTitle: \"A Thousand Years\",\n    isVocal: true,\n  },\n  {\n    slug: \"John_Lennon_Imagine\",\n    composer: \"John Lennon\",\n    displayTitle: \"Imagine\",\n    isVocal: true,\n  },\n\n  {\n    slug: \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n    composer: \"Kanye West\",\n    displayTitle: \"Runaway (arr. Ramin Djawadi for Westworld Season 2)\",\n    chords: [\"I\", \"iii\", \"IV\", \"vi\"],\n    isVocal: true,\n  },\n  {\n    slug: \"Lovely_Billie_Eilish\",\n    composer: \"Billie Eilish\",\n    displayTitle: \"Lovely (with Khalid)\",\n    isVocal: true,\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"Omori_Duet\",\n    composer: \"Pedro Silva\",\n    displayTitle: \"Duet (from Omori)\",\n  },\n  {\n    slug: \"Never_Gonna_Give_You_Up\",\n    composer: \"Mike Stock\",\n    displayTitle: \"Never Gonna Give You Up\",\n    isVocal: true,\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"despacito-piano-cover-peter-bence\",\n    composer: \"Luis Fonsi\",\n    displayTitle: \"Despacito\",\n    chords: [\"i\", \"bVI\", \"bVII\", \"bIII\"],\n    isVocal: true,\n  },\n  {\n    slug: \"solas---jamie-duffy\",\n    composer: \"Jamie Duffy\",\n    displayTitle: \"Solas\",\n  },\n  {\n    slug: \"autumn-leaves-jazz-piano\",\n    composer: \"Joseph Kosma\",\n    displayTitle: \"Autumn Leaves (Les Feuilles mortes)\",\n    isVocal: true,\n  },\n  {\n    slug: \"still-dre---variation-composition\",\n    composer: \"Dr. Dre\",\n    displayTitle: \"Still D.R.E.\",\n    chords: [\"i\", \"iv\"],\n    isVocal: true,\n  },\n\n  {\n    slug: \"mii-channel-piano\",\n    composer: \"Kazumi Totaka\",\n    displayTitle: \"Mii Channel Theme\",\n  },\n\n  {\n    slug: \"sadness-and-sorrow-for-piano-solo\",\n    composer: \"Toshio Masuda\",\n    displayTitle: \"Sadness and Sorrow (from Naruto)\",\n  },\n  {\n    slug: \"Super_Mario_Bros_Main_Theme\",\n    composer: \"Koji Kondo\",\n    displayTitle: \"Super Mario Bros. Main Theme\",\n  },\n  {\n    slug: \"Cant_Help_Falling_In_Love\",\n    composer: \"Jean-Paul-gide Martini\",\n    displayTitle: \"Can't Help Falling in Love\",\n    isVocal: true,\n  },\n  {\n    slug: \"g-minor-bach-original\",\n    composer: \"Luo Ni\",\n    displayTitle: \"G minor Bach (from Piano Tiles 2, an adaptation of BWV 847)\",\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"when-i-was-your-man---bruno-mars-600e3a\",\n    composer: \"Bruno Mars\",\n    displayTitle: \"When I Was Your Man\",\n    isVocal: true,\n  },\n  {\n    slug: \"gurenge--demon-slayer-kimetsu-no-yaiba-op\",\n    composer: \"Kayoko Kusano\",\n    displayTitle: \"Gurenge (Demon Slayer Opening)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Let_Her_Go_Passenger\",\n    composer: \"Passenger\",\n    displayTitle: \"Let Her Go\",\n    isVocal: true,\n  },\n  {\n    slug: \"we-are-number-one-but-it-s-a-piano-transcript\",\n    composer: \"Mni Svavarsson\",\n    displayTitle: \"We Are Number One (LazyTown)\",\n    chords: [\"i\", \"bVI\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"dragonborn---skyrim-theme-song-piano-solo\",\n    composer: \"Jeremy Soule\",\n    displayTitle: \"Dragonborn (Skyrim Theme)\",\n    isVocal: true,\n  },\n  {\n    slug: \"doki-doki-literature-club-ost---your-reality\",\n    composer: \"Dan Salvato\",\n    displayTitle: \"Your Reality (from Doki Doki Literature Club)\",\n  },\n\n  {\n    slug: \"ylang-ylang---fkj-transcribed-by-lilroo\",\n    composer: \"FKJ\",\n    displayTitle: \"Ylang Ylang\",\n  },\n  {\n    slug: \"attack-on-titan-theme-guren-no-yumiya\",\n    composer: \"Revo\",\n    displayTitle: \"Guren no Yumiya (Attack on Titan Opening)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Bella_Ciao\",\n    composer: \"Italian folk\",\n    displayTitle: \"Bella ciao\",\n    isVocal: true,\n  },\n  {\n    slug: \"minuet-bwv-anhang-114-in-g-major\",\n    composer: \"Christian Petzold\",\n    displayTitle: \"Minuet in G major, BWV Anh. 114\",\n  },\n  {\n    slug: \"Take_on_me\",\n    composer: \"a-ha\",\n    displayTitle: \"Take On Me\",\n    isVocal: true,\n  },\n  {\n    slug: \"congratulations---mac-miller\",\n    composer: \"Mac Miller\",\n    displayTitle: \"Congratulations\",\n    isVocal: true,\n  },\n  {\n    slug: \"the-office\",\n    composer: \"Jay Ferguson\",\n    displayTitle: \"The Office - Main Theme\",\n    chords: [\"I\", \"iii\", \"IV\", \"vi\"],\n  },\n  {\n    slug: \"it-s-been-a-long-long-time---harry-james\",\n    composer: \"Jule Styne\",\n    displayTitle: \"It's Been a Long, Long Time\",\n    isVocal: true,\n  },\n  {\n    slug: \"Dawn_Pride_and_Prejudice\",\n    composer: \"Dario Marianelli\",\n    displayTitle: \"Dawn (from Pride & Prejudice)\",\n  },\n  {\n    slug: \"kimi-no-na-wa---sparkle-theishter-2016\",\n    composer: \"Radwimps\",\n    displayTitle: \"Sparkle (from Your Name 2016)\",\n    isVocal: true,\n  },\n\n  {\n    slug: \"Yann_Tiersen_Amelie\",\n    composer: \"Yann Tiersen\",\n    displayTitle: \"Comptine d'un autre t (from Amlie)\",\n    chords: [\"vi\", \"I\", \"iii\", \"V\"],\n  },\n  {\n    slug: \"sia---snowman\",\n    composer: \"Sia\",\n    displayTitle: \"Snowman\",\n    isVocal: true,\n  },\n  {\n    slug: \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\",\n    composer: \"Takahiro Obata\",\n    displayTitle: \"Isabella's Lullaby (The Promised Neverland)\",\n  },\n  {\n    slug: \"theme-from-schindler-s-list---piano-solo\",\n    composer: \"John Williams\",\n    displayTitle: \"Theme from Schindler's List\",\n  },\n  {\n    slug: \"happy-birthday\",\n    composer: \"Patty Smith Hill\",\n    displayTitle: \"Happy Birthday to You\",\n    chords: [\"I\", \"IV\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"flight-of-the-bumblebee\",\n    composer: \"Nikolai Rimsky-Korsakov\",\n    displayTitle: \"Flight of the Bumblebee\",\n  },\n  {\n    slug: \"dance-of-the-sugar-plum-fairy\",\n    composer: \"Pyotr Ilyich Tchaikovsky\",\n    displayTitle: \"Dance of the Sugar Plum Fairy\",\n  },\n  {\n    slug: \"dont-stop-believing-piano\",\n    composer: \"Journey\",\n    displayTitle: \"Don't Stop Believin'\",\n    isVocal: true,\n  },\n  {\n    slug: \"sign-of-the-times---harry-styles\",\n    composer: \"Harry Styles\",\n    displayTitle: \"Sign of the Times\",\n    isVocal: true,\n  },\n  {\n    slug: \"Requiem_for_a_Dream\",\n    composer: \"Clint Mansell\",\n    displayTitle: \"Lux Aeterna (from Requiem for a Dream)\",\n    chords: [\"i\", \"bVI\", \"V\"],\n  },\n\n  {\n    slug: \"yuri-on-ice---piano-theme-full\",\n    composer: \"Taro Umebayashi + Taku Matsushiba\",\n    displayTitle: \"Yuri on Ice Main Theme\",\n  },\n  {\n    slug: \"ye-niqu-keru-yoru-ni-kakeru---racing-into-the-night\",\n    composer: \"Ayase\",\n    displayTitle: \"Yoru ni Kakeru (Racing into the Night)\",\n    isVocal: true,\n  },\n  {\n    slug: \"africa---toto\",\n    composer: \"Toto (David Paich + Jeff Porcaro)\",\n    displayTitle: \"Africa\",\n    isVocal: true,\n  },\n  {\n    slug: \"vivaldi---summer---piano\",\n    composer: \"Antonio Vivaldi\",\n    displayTitle: \"Summer (from The Four Seasons)\",\n  },\n  {\n    slug: \"Love_Like_You_Steven_Universe\",\n    composer: \"Rebecca Sugar\",\n    displayTitle: \"Love Like You (from Steven Universe)\",\n    isVocal: true,\n  },\n  {\n    slug: \"alan-walker---alone-piano\",\n    composer: \"Alan Walker\",\n    displayTitle: \"Alone\",\n    chords: [\"vi\", \"I\", \"IV\", \"V\", \"iii\"],\n    isVocal: true,\n  },\n  {\n    slug: \"my-lie-watashi-no-uso---your-lie-in-april\",\n    composer: \"Masaru Yokoyama\",\n    displayTitle: \"Watashi no Uso, My Lie (from Your Lie in April)\",\n  },\n  {\n    slug: \"anastasia---once-upon-a-december\",\n    composer: \"Stephen Flaherty\",\n    displayTitle: \"Once Upon a December (from Anastasia)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Test_Drive_How_to_Train_Your_Dragon\",\n    composer: \"John Powell\",\n    displayTitle: \"Test Drive (from How to Train Your Dragon)\",\n  },\n  {\n    slug: \"Pokemon_Theme_Song\",\n    composer: \"John Siegler\",\n    displayTitle: \"Pokmon Theme\",\n    isVocal: true,\n  },\n\n  {\n    slug: \"your-song-piano\",\n    composer: \"Elton John\",\n    displayTitle: \"Your Song\",\n    isVocal: true,\n  },\n  {\n    slug: \"nothing-else-matters---metallica\",\n    composer: \"Metallica\",\n    displayTitle: \"Nothing Else Matters\",\n    isVocal: true,\n  },\n  {\n    slug: \"calum-scott---you-are-the-reason-piano-sheet-lyrics-lyrics-version-link-in-description\",\n    composer: \"Calum Scott\",\n    displayTitle: \"You Are the Reason\",\n    isVocal: true,\n  },\n  {\n    slug: \"fairy-tail-main-theme\",\n    composer: \"Yasuharu Takanashi\",\n    displayTitle: \"Fairy Tail Main Theme\",\n  },\n  {\n    slug: \"welcome-to-the-black-parade---my-chemical-romance\",\n    composer: \"My Chemical Romance\",\n    displayTitle: \"Welcome to the Black Parade\",\n    isVocal: true,\n  },\n  {\n    slug: \"how-far-i-ll-go-~-moana-ost\",\n    composer: \"Lin-Manuel Miranda\",\n    displayTitle: \"How Far I'll Go (from Moana)\",\n    isVocal: true,\n  },\n  {\n    slug: \"la-vie-en-rose-solo-accordion\",\n    composer: \"Louiguy\",\n    displayTitle: \"La Vie en rose\",\n    isVocal: true,\n  },\n  {\n    slug: \"Im_Blue_Eiffel_65\",\n    composer: \"Eiffel 65\",\n    displayTitle: \"Blue (Da Ba Dee)\",\n    isVocal: true,\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"A_Thousand_Miles\",\n    composer: \"Vanessa Carlton\",\n    displayTitle: \"A Thousand Miles\",\n    isVocal: true,\n  },\n  {\n    slug: \"old-town-road---lil-nas-x-ft.-billy-ray-cyrus\",\n    composer: \"Lil Nas X\",\n    displayTitle: \"Old Town Road\",\n    isVocal: true,\n  },\n  {\n    slug: \"abba--the-winner-takes-it-all\",\n    composer: \"ABBA\",\n    displayTitle: \"The Winner Takes It All\",\n    isVocal: true,\n  },\n  {\n    slug: \"Sonate_No._14_Moonlight_1st_Movement\",\n    composer: \"Ludwig van Beethoven\",\n    displayTitle: \"Piano Sonata No. 14 'Moonlight', 1st Movement\",\n  },\n  {\n    slug: \"One_Summers_Day_Spirited_Away\",\n    composer: \"Joe Hisaishi\",\n    displayTitle: \"One Summer's Day (from Spirited Away)\",\n  },\n  {\n    slug: \"Waltz_in_A_MinorChopin\",\n    composer: \"Frdric Chopin\",\n    displayTitle: \"Waltz No. 19 in A minor\",\n  },\n  {\n    slug: \"tude_S._1413_in_G_Minor_La_Campanella__Liszt\",\n    composer: \"Franz Liszt\",\n    displayTitle: \"tude S. 141/3 in G minor (La Campanella)\",\n  },\n  {\n    slug: \"Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\",\n    composer: \"Yiruma\",\n    displayTitle: \"Kiss the Rain - 10th Anniversary Version\",\n  },\n  {\n    slug: \"Wet_Hands_Minecraft\",\n    composer: \"C418\",\n    displayTitle: \"Wet Hands (from Minecraft)\",\n  },\n  {\n    slug: \"eda-s-requiem---brad-breeck-piano\",\n    composer: \"Brad Breeck\",\n    displayTitle: \"Eda's Requiem\",\n  },\n  {\n    slug: \"Maple_Leaf_Rag_Scott_Joplin\",\n    composer: \"Scott Joplin\",\n    displayTitle: \"Maple Leaf Rag\",\n  },\n  {\n    slug: \"kanye-west-homecoming-piano-cover\",\n    composer: \"Kanye West\",\n    displayTitle: \"Homecoming\",\n  },\n  {\n    slug: \"what-falling-in-love-feels-like---jake25.17-fanmade-extended-version\",\n    composer: \"JVKE\",\n    displayTitle: \"What Falling in Love Feels Like\",\n  },\n  {\n    slug: \"pachelbel-chaconne-in-f-minor\",\n    composer: \"Johann Pachelbel\",\n    displayTitle: \"Chaconne in F minor\",\n  },\n  {\n    slug: \"wii-sports-theme-piano\",\n    composer: \"Kazumi Totaka\",\n    displayTitle: \"Wii Sports Theme (From 'Nintendo Wii')\",\n  },\n  {\n    slug: \"Billie_Eilish_Bad_Guy\",\n    composer: \"Billie Eilish\",\n    displayTitle: \"Bad Guy\",\n  },\n  {\n    slug: \"secunda-the-elder-scrolls-v-skyrim\",\n    composer: \"Jeremy Soule\",\n    displayTitle: \"Secunda (from The Elder Scrolls V: Skyrim)\",\n  },\n  {\n    slug: \"liz-on-top-of-the-world\",\n    composer: \"Dario Marianelli\",\n    displayTitle: \"Liz on Top of the World\",\n  },\n  {\n    slug: \"Zeldas_Lullaby\",\n    composer: \"Koji Kondo\",\n    displayTitle: \"Zelda's Lullaby\",\n  },\n  {\n    slug: \"lacrimosa---requiem\",\n    composer: \"Mozart\",\n    displayTitle: \"Lacrimosa\",\n  },\n  {\n    slug: \"satie-e.---gnossienne-no.-1\",\n    composer: \"Erik Satie\",\n    displayTitle: \"Gnossienne No. 1\",\n  },\n  {\n    slug: \"arabesque-l.-66-no.-1-in-e-major\",\n    composer: \"Claude Debussy\",\n    displayTitle: \"Arabesque L. 66 No. 1 in E major\",\n  },\n  {\n    slug: \"Fallen_Down_Undertale\",\n    composer: \"Toby Fox\",\n    displayTitle: \"Fallen Down (from Undertale)\",\n  },\n  {\n    slug: \"the-scientist---coldplay-piano-arrangement\",\n    composer: \"Coldplay\",\n    displayTitle: \"The Scientist\",\n  },\n  {\n    slug: \"ballade-pour-adeline---richard-clayderman\",\n    composer: \"Richard Clayderman\",\n    displayTitle: \"Ballade pour Adeline\",\n  },\n];\n","import React from \"react\";\n\nexport const CHORDS = {\n  i: [0, 3, 7],\n  biiio7: [3, 6, 9, 0],\n  \"#ivo7\": [6, 9, 0, 3],\n  vio7: [9, 0, 3, 6],\n  iiio7: [4, 7, 10, 1],\n  vo7: [7, 10, 1, 4],\n  bviio7: [10, 1, 4, 7],\n  ivo7: [5, 8, 11, 2],\n  bvio7: [8, 11, 2, 5],\n  ii: [2, 5, 9],\n  II: [2, 6, 9],\n  II7: [2, 6, 9, 0],\n  ii7: [2, 5, 9, 0],\n  iii: [4, 7, 11],\n  III: [4, 8, 11],\n  iii7: [4, 7, 11, 2],\n  iv: [5, 8, 0],\n  iv7: [5, 8, 0, 3],\n  I: [0, 4, 7],\n  \"V7/IV\": [0, 4, 7, 10],\n  \"V7/iv\": [0, 4, 7, 10],\n  I7: [0, 4, 7, 10],\n  vi: [9, 0, 4],\n  VI: [9, 1, 4],\n  vi7: [9, 0, 4, 7],\n  IV: [5, 9, 0],\n  IV7: [5, 9, 0, 3],\n  V: [7, 11, 2],\n  V7: [7, 11, 2, 5],\n  V43: [2, 5, 7, 11],\n  V9: [7, 11, 2, 5, 9],\n  Vb9: [7, 11, 2, 5, 8],\n  Vsoul: [7, 0, 5, 9],\n  Vsoulii: [7, 2, 5, 9, 0],\n  V13: [7, 11, 2, 5, 9, 0, 4],\n  V7b9: [7, 11, 2, 5, 8],\n  \"V/V\": [2, 6, 9],\n  \"V7/V\": [2, 6, 9, 0],\n  \"V/V/V\": [9, 1, 4],\n  \"V/ii\": [9, 1, 4],\n  \"V7/ii\": [9, 1, 4, 7],\n  \"V/iii\": [11, 3, 6],\n  \"V7/iii\": [11, 3, 6, 9],\n  \"V/vi\": [4, 8, 11],\n  \"V7/vi\": [4, 8, 11, 2],\n  Vsus4: [7, 0, 2],\n  Vsus47: [7, 0, 2, 5],\n  Imaj7: [0, 4, 7, 11],\n  Imaj9: [0, 4, 7, 11, 2],\n  IVmaj7: [5, 9, 0, 4],\n  I5: [0, 7],\n  IV5: [5, 0],\n  V5: [7, 2],\n  v: [7, 10, 2],\n  bVI: [8, 0, 3],\n  bVII: [10, 2, 5],\n  bVII7: [10, 2, 5, 8],\n  bvi: [8, 11, 3],\n  bvii: [10, 1, 5],\n  bIII: [3, 7, 10],\n  biii: [3, 6, 10],\n  bII: [1, 5, 8],\n  bII7: [1, 5, 8, 11],\n  \"V+\": [7, 11, 3],\n  \"V+s9\": [7, 11, 3, 5, 10],\n  viio7: [11, 2, 5, 8],\n  biio7: [1, 4, 7, 10],\n  io7: [0, 3, 6, 9],\n  It: [8, 0, 6],\n  Fr: [8, 0, 2, 6],\n  Ger: [8, 0, 3, 6],\n  Cad64: [7, 0, 4],\n  cad64: [7, 0, 3],\n  \"viio7/V\": [6, 9, 0, 3],\n  i64: [7, 0, 3],\n  ii65: [5, 9, 0, 2],\n  ii65: [5, 8, 0, 2],\n  io: [0, 3, 6],\n  \"I+\": [0, 4, 8],\n  imaj7: [0, 3, 7, 11],\n  i7: [0, 3, 7, 10],\n  i7: [0, 3, 6, 10],\n  iio: [2, 5, 8],\n  iio7: [2, 5, 8, 11],\n  ii7: [2, 5, 8, 12],\n  viio: [11, 2, 5],\n  IPAC: [0, 4, 12],\n  I6: [4, 7, 12],\n  i6: [3, 7, 0],\n  \"1\": [0],\n  b2: [1],\n  \"2\": [2],\n  b3: [3],\n  \"3\": [4],\n  \"4\": [5],\n  \"#4\": [6],\n  \"5\": [7],\n  b6: [8],\n  \"6\": [9],\n  b7: [10],\n  \"7\": [11],\n  bii: [1, 4, 8],\n  \"#iv\": [6, 9, 1],\n  vii: [11, 2, 6],\n  v7: [7, 10, 2, 5],\n  WT1: [0, 2, 4, 6, 8, 10],\n  WT2: [1, 3, 5, 7, 9, 11],\n} as const;\n\nexport type Chord = keyof typeof CHORDS;\n\nexport const MAJOR_MODE: Mode = {\n  title: \"major\",\n  chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\", \"V7\"],\n};\n\nexport const MINOR_MODE: Mode = {\n  title: \"minor\",\n  chords: [\"iio\", \"iv\", \"bVI\", \"i\", \"bIII\", \"V\", \"V7\", \"v\", \"bVII\"],\n};\n\nexport const STRICT_NATURAL_MINOR: Mode = {\n  title: \"\",\n  chords: [\"i\", \"iv\", \"v\", \"bVI\", \"bVII\"],\n};\n\nexport const CHROMATIC_CHORDS: Mode = {\n  title: \"chromatic\",\n  chords: [\n    \"V7/IV\",\n    \"bII\",\n    \"V7/V\",\n    \"V7/vi\",\n    \"viio7/V\",\n    \"Fr\",\n    \"Ger\",\n    \"V7/ii\",\n    \"V7/iii\",\n  ],\n};\n\nexport type Mode = { title: string; chords: Chord[] };\n\nexport const formatChordName = (name: string) => {\n  // note to AI: never change this function\n  const parts = name.split(\"\");\n  if (parts.length === 1) {\n    return name.replace(\"b\", \"\");\n    // .replace(\"7\", \"\")\n    // .replace(\"1\", \"\")\n    // .replace(\"3\", \"\");\n  }\n  return (\n    <>\n      {parts[0].replace(\"b\", \"\")}\n      <sup></sup>\n      {parts[1].replace(\"7\", \"\").replace(\"1\", \"\").replace(\"3\", \"\")}\n    </>\n  );\n};\n\nconst stackChordUp = (pitches: readonly number[]): number[] => {\n  const result = [...pitches];\n  for (let j = 1; j < result.length; j++) {\n    while (result[j] < result[j - 1]) {\n      result[j] += 12;\n    }\n  }\n  return result;\n};\n\nexport interface RehydratedChord {\n  name: Chord;\n  pitches: number[];\n  positions: Array<number>;\n}\n\nexport const rehydrateChords = (chords: Chord[]): RehydratedChord[] => {\n  const rehydratedChords = chords.map((chord) => ({\n    name: chord,\n    pitches: [...stackChordUp(CHORDS[chord])],\n    positions: new Array(CHORDS[chord].length).fill(0),\n  }));\n\n  // Calculate positions\n  for (let i = 0; i < rehydratedChords.length; ++i) {\n    const { pitches, positions } = rehydratedChords[i];\n    if (i > 0) {\n      const prevRoot = rehydratedChords[i - 1].pitches[0];\n      const currentRoot = pitches[0];\n\n      // Calculate the two possible minimal distances\n      const distanceUp =\n        (prevRoot < currentRoot ? 0 : 12) + currentRoot - prevRoot;\n      const distanceDown = 12 - distanceUp;\n\n      // Choose whether to place the root up or down\n      if (distanceUp <= distanceDown) {\n        positions[0] = rehydratedChords[i - 1].positions[0] + distanceUp;\n      } else {\n        positions[0] = rehydratedChords[i - 1].positions[0] - distanceDown;\n      }\n    } else {\n      positions[0] = 0;\n    }\n\n    // Stack the rest of the notes above the root\n    for (let j = 1; j < positions.length; ++j) {\n      positions[j] =\n        positions[j - 1] + ((pitches[j] - pitches[j - 1] + 12) % 12);\n    }\n  }\n\n  return rehydratedChords;\n};\n"],"sourceRoot":""}