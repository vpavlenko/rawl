{"version":3,"sources":["../webpack/bootstrap","util.js","utils/corpusUtils.tsx","components/rawl/book/Book.tsx","components/rawl/top100Composers.ts","components/rawl/legends/PianoLegend.tsx","components/rawl/legends/ChordStairs.tsx","components/rawl/book/chapters.tsx","components/Slider.js","components/AppFooter.tsx","sampler/sampler.ts","components/rawl/corpora/CorpusLink.tsx","components/rawl/SnippetList.tsx","keySlugMapping.ts","components/ErrorBoundary.tsx","components/rawl/CompositionTitle.tsx","components/rawl/corpora/utils.ts","components/rawl/SnippetItem.tsx","components/rawl/getNoteRectangles.tsx","components/rawl/Toggle.tsx","components/rawl/editor/EditorStyles.ts","components/rawl/corpora/explanations.ts","components/rawl/snippets/SnippetLink.tsx","components/rawl/SongNarrative.tsx","components/AppContext.tsx","components/rawl/editor/commandParser.ts","components/rawl/editor/types.ts","components/rawl/editor/scores.ts","components/rawl/parseMidi.ts","../config/polyfills.js","index.js","chip-core.js","config/firebaseConfig.js","handlers/handleSongClick.ts","players/midi/midi-helpers.js","promisify-xhr.js","components/Alert.js","components/TimeSlider.js","components/AppHeader.tsx","components/SignIn.js","components/DropMessage.tsx","components/Timeline.tsx","components/rawl/book/AboutTop100Corpus.tsx","components/rawl/FrozenNotesLayout.tsx","config/index.js","components/rawl/FrozenNotes.tsx","components/rawl/SystemLayout.tsx","components/rawl/layouts/ControlPanel.tsx","components/rawl/legends/guitarChords.ts","components/rawl/layouts/MeasureNumbers.tsx","components/rawl/layouts/MergedVoicesLegend.tsx","components/rawl/book/Citations.tsx","components/rawl/book/cites.ts","components/rawl/book/FileDropBox.tsx","components/rawl/book/Metaphors.tsx","components/rawl/layouts/VoiceName.tsx","components/rawl/autoAnalysis.ts","components/rawl/layouts/LayoutSelector.tsx","components/rawl/measures.ts","components/rawl/book/beyondChapters.tsx","components/rawl/CorpusSearch.tsx","components/rawl/OldLandingPage.tsx","components/rawl/ShortcutHelp.tsx","components/rawl/corpora/Corpus.tsx","components/rawl/corpora/Structures.tsx","components/rawl/InlineRawlPlayer.tsx","components/rawl/editor/Editor.tsx","components/rawl/editor/EditorDecorations.ts","components/rawl/editor/EditorIndex.tsx","components/rawl/editor/EditorMidi.ts","components/rawl/editor/Manual.tsx","images/editor_major_layout.png","components/rawl/forge/ForgeUI.tsx","components/rawl/forge/ForgeGenerator.ts","components/rawl/forge/noteUtils.ts","components/rawl/forge/ForgeMidi.ts","components/rawl/midiStorage.tsx","components/rawl/pages/DAW.tsx","assets/images/reaper_colormap.png","components/rawl/transformMidi.ts","gm-patch-map.js","players/MIDIFilePlayer.js","players/Player.js","players/MIDIPlayer.js","components/rawl/Rawl.tsx","components/rawl/analysis.ts","components/rawl/corpora/corpora.tsx","components/rawl/AnalysisGrid.tsx","components/rawl/legends/chords.tsx","components/rawl/forge/constants.ts","components/App.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","updateQueryString","newParams","params","_objectSpread","queryString","parse","location","search","substr","keys","forEach","undefined","stateUrl","stringify","replace","history","replaceState","unlockAudioContext","context","Promise","resolve","state","events","unlock","resume","then","event","document","body","removeEventListener","addEventListener","titlesFromMetadata","metadata","formatted","title","allOrNone","artist","subtitle","game","system","filter","x","join","copyright","str","arguments","getFilepathFromUrl","url","CATALOG_PREFIX","ensureEmscFileWithUrl","emscRuntime","filename","FS","analyzePath","exists","console","debug","concat","log","fetch","response","ok","Error","status","arrayBuffer","buffer","arr","Uint8Array","ensureEmscFileWithData","uint8Array","dir","path","dirname","mkdirTree","writeFile","reject","syncfs","err","error","remap","number","fromLeft","fromRight","toLeft","toRight","remap01","Flags","span","GenreList","div","GenreItem","getUniqueStyles","genre","style","styles","Set","split","map","trim","add","Array","from","getEmojis","country","flag","hasMetadata","corpus","Boolean","composerBirthYear","formatComposerName","slug","word","part","charAt","toUpperCase","BookContainer","Title","h1","GroupContainer","ComposersGrid","ComposerItem","ComposerLink","a","ComposerWrapper","SnippetContainer","ComposerList","ul","ComposerListItem","li","ChapterSelector","attrs","className","ChapterTitleTooltip","props","isHovered","isSelected","ChapterButton","button","NavChordWrapper","ReadableTextBlock","ComposerListColumn","TwoColumnLayout","ComposerTitle","composer","displayTitle","color","getChapterSlug","chapter","slugify","toLowerCase","CompositionLink","onLinkClick","showNarrativeIcon","href","target","rel","onClick","isVocal","NARRATIVES","marginLeft","qa","ChapterGroup","isActive","hideHeader","ChapterArrow","ModeToggle","useParams","useHistory","useLocation","appContext","React","useContext","AppContext","hoveredChapter","setHoveredChapter","useState","hoveredComposerSlug","setHoveredComposerSlug","hoveredColors","setHoveredColors","isBeyondMode","setIsBeyondMode","pathname","startsWith","useEffect","shouldBeBeyondMode","currentMidi","analyses","eject","loadingSnippets","setLoadingSnippets","handleComposerLinkClick","e","handleSnippetClick","snippet","composerSlug","prev","handleSongClick","secondsSpan","seekPosition","Math","max","seek","next","delete","currentChapters","BEYOND_CHAPTERS","CHAPTERS","currentChapterGroups","BEYOND_CHAPTER_GROUPS","CHAPTER_GROUPS","chapterTitles","useMemo","selectedChapter","find","hoveredComposerChapter","chapters","composers","includes","findChapterForComposer","firstBeyondChapter","Redirect","to","position","Toggle","leftIcon","faHouse","rightIcon","faGlobe","isRight","onToggle","leftTitle","rightTitle","entries","startIndex","endIndex","groupChapters","some","newSlug","handleChapterSelect","onMouseEnter","onMouseLeave","MODULATIONS_CHAPTER_TITLE","width","height","overflow","top","NewTonicSymbol","left","previousTonic","modulationDiff","tonicStart","DOUBLE_TONIC_CHAPTER_TITLE","chords","scale","playbackMode","margin","fontSize","FontAwesomeIcon","icon","faClockRotateLeft","titleChords","currentChapter","currentSnippet","snippets","tag","initialTonic","frozenNotes","analysis","modulations","marginTop","FoldablePianoLegend","currentTonic","pretext","display","flexDirection","gap","TOP_100_COMPOSERS","minHeight","pop","onSnippetClick","isPreview","noteHeight","marginBottom","tags","index","marginRight","RelatedCorporaDisplay","horizontal","showMetadata","CorpusLink","MUSESCORE_TOP_100_SLUG","cursor","preventDefault","stopPropagation","renderContent","MINOR_MODE","STRICT_NATURAL_MINOR","MAJOR_MODE","BLACK_KEYS","WHITE_KEYS","BLACK_KEY_LABELS","keyPress","keyframes","PianoKey","isEnabled","isPlaying","css","ScaleLabel","PianoLegend","inline","enabledPitches","playingNotes","setPlayingNotes","playNote","note","playArpeggiatedChord","setTimeout","keyWidth","keyHeight","rowDistance","padding","backgroundColor","zIndex","Fragment","has","borderRadius","bottom","fontWeight","textAlign","textShadow","PITCH_CLASS_TO_LETTER","toString","InlinePianoLegend","showLegend","setShowLegend","useLocalStorage","hoveredScale","setHoveredScale","showGuitarChords","setShowGuitarChords","getEnabledPitches","_slug","right","faUserGraduate","faGuitar","FoldButton","isFolded","border","isArray","modeItem","chapterChords","CHROMATIC_CHORDS","justifyContent","background","ChordNote","NOTE_HEIGHT","scaleOut","delay","ChordBoundingBox","clickable","ChordContent","ChordName","TonicContext","createContext","TonicProvider","children","Provider","ChordStairs","memo","propTonic","contextTonic","playingStates","setPlayingStates","timeoutRef","useRef","hideLabels","titleHeight","chapterChordsSet","modeChordSet","modeChordSetWithoutV","hasIntersection","chord","filteredChords","numChords","rehydratedChords","rehydrateChords","minPosition","min","flatMap","positions","pitchOfMinPosition","pitches","pos","maxPosition","totalHeight","tonicChordPosition","findIndex","test","scaledNoteHeight","scaledNoteWidth","scaledHorizontalGap","scaledFontSize","handleChordClick","useCallback","current","timeout","clearTimeout","chordSequence","chordData","playArpeggiatedChordSequence","Date","now","newState","clickedChordIndex","transposedNotes","handleChordMouseEnter","pitch","handleChordMouseLeave","chordIndex","topPosition","at","chordNameOffset","abs","pitchIndex","ARPEGGIO_DELAY_MS","userSelect","pointerEvents","fontFamily","formatChordName","root","intervalString","convertChordToGuitarChord","getDisplayChordName","P","UL","C","rn","strings","chordString","rnc","whiteSpace","ct","string","tonic","text","A","topic","SnippetLink","k","layout","boxShadow","faKeyboard","q","citeKey","Citation","intro","scales","FileDropBox","COLORS","SliderContainer","styled","_templateObject","_taggedTemplateLiteral","SliderRail","_templateObject2","SliderKnob","_templateObject3","dragging","StyledRangeInput","input","type","_templateObject4","Slider","_PureComponent","_this","_classCallCheck","autoBindReact","node","createRef","draggedPos","_inherits","_createClass","this","clientX","offsetLeft","offsetWidth","setState","onDrag","_this2","persist","onMouseMove","onMouseUp","_this3","onChange","createElement","ref","onMouseDown","PureComponent","FOOTER_HEIGHT","StyledVolumeSlider","StyledAppFooter","AppFooterMain","TempoSection","LatencySection","DownloadButton","PauseButton","LatencyButton","TimeSliderWrapper","StyledTempoButton","withRouter","currentSongDurationMs","ejected","paused","volume","handleTimeSliderChange","handleVolumeChange","getCurrentPositionMs","togglePause","latencyCorrectionMs","setLatencyCorrectionMs","tempo","setTempo","canDownload","currentMidiBuffer","segments","lastSegment","endsWith","handleTempoChange","delta","newTempo","Number","toFixed","disabled","faPlay","faPause","alignItems","transform","lineHeight","fixed","integer","decimal","formatTempo","sign","step","onDoubleClick","opacity","blob","Blob","URL","createObjectURL","createBlobUrl","download","faDownload","samplerLoaded","loadingPromise","sampler","Tone","Sampler","urls","A0","C1","A1","C2","A2","C3","A3","C4","A4","C5","A5","C6","A6","C7","A7","C8","baseUrl","onload","getContext","toDestination","set","addAudioWorklet","rawContext","audioWorklet","addModule","workletNode","AudioWorkletNode","connect","destination","originalTriggerAttack","triggerAttack","args","originalTriggerRelease","triggerRelease","getAudioContextState","startAudioContext","start","ensureSamplerLoaded","loaded","checkLoaded","resumeAudioContext","activeEvents","activeNotes","chordNumbers","cancelPreviousSounds","releaseAll","id","Transport","clear","cancel","noteNames","midi","Frequency","toNote","currentTransportTime","seconds","eventId","schedule","time","triggerAttackRelease","playRawMidiNote","midiNumber","duration","noteName","cleanupArpeggiator","onChordStart","onChordEnd","currentTime","noteIndex","badgeStyle","container","letterSpacing","textDecoration","faList","iconColor","LOWERCASE_WORDS","Link","beautifySlug","SnippetListContainer","SnippetItemWrapper","measureCount","PX_IN_MEASURE","isLoading","SlugLabel","ComposerInfo","ComposerHeader","ComposerName","YearInfo","slugs","deleteSnippet","measuresSpan","midiSlug","composerInfo","corpora","midis","getComposerInfo","Component","hasError","getDerivedStateFromError","_","componentDidCatch","errorInfo","render","fallback","MetadataContainer","RelatedCorpora","CorpusRow","relatedCorporaSlugs","corpusSlug","sourceUrl","onSourceUrlUpdate","editedUrl","setEditedUrl","handleSave","formattedTitle","museScoreUrl","encodeURIComponent","dangerouslySetInnerHTML","__html","faArrowUpRightFromSquare","onKeyDown","onBlur","placeholder","faLink","SnippetItemContainer","SnippetHeader","TimingInfo","SnippetContent","DeleteButton","PlaybackCursor","rehydratedNotes","rehydratedAnalysis","rehydratedMeasuresAndBeats","rehydrateSnippet","paddedMeasuresAndBeats","endMeasure","paddingLength","slicedMeasures","measures","paddedMeasures","fill","snippetMidiRange","Infinity","voiceNotes","snippetMidiNumberToY","timeRange","startTime","containerWidth","toX","normalizedTime","isNaN","isCurrentlyPlaying","cursorPosition","currentPlaybackTime","end","isPreviewWithoutTime","transition","notes","midiNumberToY","maxWidth","measuresAndBeats","startMeasure","phraseStarts","GM_DRUM_KIT","getNoteRectangles","handleNoteClick","handleMouseEnter","handleMouseLeave","secondsToX","enableManualRemeasuring","isDrum","relativeNumber","voiceIndex","pathData","chipState","on","pitchBend","pitchBendData","noteDuration","noteStartX","pitchBendToY","timeToX","point","convertPitchBendToPathData","isHighlighted","placeItems","round","boxSizing","stroke","strokeWidth","ToggleContainer","ToggleIcon","active","ToggleSlider","EditorContainer","RawlContainer","EditorPanel","DebugPanel","EditorContent","CodeMirrorWrapper","ErrorMessage","ResizeHandle","Pp","Label","SongNarrative","lastOpenedIndex","setLastOpenedIndex","showNarrative","setShowNarrative","narrative","paddingTop","parseKey","keyString","match","Db","D","Eb","E","F","Gb","G","Ab","Bb","B","parseCopyCommand","line","timeSignatures","measureStr","beatStr","sourceStartStr","sourceStartBeatStr","sourceEndStr","sourceEndBeatStr","shiftsStr","targetMeasure","parseInt","targetBeat","parseFloat","sourceStart","sourceStartBeat","sourceEnd","sourceEndBeat","shifts","token","shiftGroup","parseTimeSignatures","parts","signatures","currentMeasure","numerator","denominator","num","measureStart","measure","getTimeSignatureAt","parseCommand","commentToEndOfFile","cleanLine","trackCommand","channelMatch","channel","baseOctave","channelOctaves","track","trackMatch","hand","octave","parseTrackCommand","bpmMatch","copyCmd","melodyPart","startBeat","beatsPerMeasure","parseMelodyString","calculateMidiNumber","scaleDegree","accidental","octaveShift","absoluteScaleDegree","NOTE_LETTER_MAP","baseDegree","floor","semitoneOffset","getScaleMapForMode","getBaseOctaveForTrack","calculateGlobalBeatPosition","beatInMeasure","totalBeats","measureBeats","globalBeatToMeasureAndBeat","globalBeat","remainingBeats","melodyString","currentKey","currentPosition","tokens","processTokens","isDurationMarker","getDuration","lastNoteIndex","TICKS_PER_QUARTER","noteTokens","noteToken","actualNote","currentTrack","marker","hasDot","hasTriplet","cleanMelodyPart","currentToken","char","durationToken","calculateShiftedNote","originalDegree","newDegree","scaleMap","newMidi","logicalNoteToMidi","startTick","durationTicks","MINOR_SCALE_MAP","MAJOR_SCALE_MAP","LYDIAN_SCALE_MAP","MIXOLYDIAN_SCALE_MAP","DORIAN_SCALE_MAP","PHRYGIAN_SCALE_MAP","w","y","u","f","g","h","scores","schubert_d365_09","Gravity_Falls_Opening","chopsticks","parseNotes","activeChannels","timeEvents","timebase","beats","measuresInTicks","secondsPerQuarterNote","lastBeatFractionGone","constructedBeatsInLastMeasure","lastBeatTime","lastTick","createNewBeat","timeUntil","tick","newBeatEndTime","newBeatEndTick","bpm","playTime","denominatorPower","ticks","calculateMeasureAndBeats","subtype","EVENT_META_KEY_SIGNATURE","JSON","noteOn","EVENT_MIDI","param1","EVENT_MIDI_NOTE_OFF","EVENT_MIDI_NOTE_ON","param2","off","EVENT_MIDI_PITCH_BEND","uniqueMidiNumbers","sort","b","midiToRelativeNumberMap","Map","getNotes","secondToLastMeasureStart","beat","enable","assign","ReactDOM","Router","basename","process","App","getElementById","CHIP_CORE","_scriptDir","currentScript","src","readyPromiseResolve","readyPromiseReject","moduleArg","Module","read_","readAsync","moduleOverrides","thisProgram","scriptDirectory","indexOf","lastIndexOf","xhr","XMLHttpRequest","open","send","responseText","onerror","responseType","wasmBinary","wasmMemory","out","WebAssembly","_typeof","abort","HEAP8","HEAPU8","HEAP16","HEAP32","HEAPU32","HEAPF32","HEAP64","HEAPF64","ABORT","assert","condition","updateMemoryViews","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","wasmBinaryFile","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","runDependencies","runDependencyWatcher","dependenciesFulfilled","addRunDependency","removeRunDependency","clearInterval","callback","what","RuntimeError","isDataURI","getBinarySync","file","instantiateArrayBuffer","binaryFile","imports","receiver","credentials","getBinaryPromise","binary","instantiate","instance","reason","ASM_CONSTS","$0","callRuntimeCallbacks","callbacks","UTF8Decoder","TextDecoder","UTF8ArrayToString","heapOrArray","idx","maxBytesToRead","endIdx","endPtr","decode","subarray","u0","u1","u2","String","fromCharCode","ch","UTF8ToString","ptr","ExceptionInfo","excPtr","set_type","get_type","set_destructor","destructor","get_destructor","set_caught","caught","get_caught","set_rethrown","rethrown","get_rethrown","init","set_adjusted_ptr","adjustedPtr","get_adjusted_ptr","get_exception_ptr","___cxa_is_pointer_type","adjusted","PATH","isAbs","splitPath","exec","normalizeArray","allowAboveRoot","up","last","unshift","normalize","isAbsolute","trailingSlash","lastSlash","paths","join2","randomFill","view","crypto","getRandomValues","initRandomFill","PATH_FS","resolvedPath","resolvedAbsolute","cwd","TypeError","relative","fromParts","toParts","samePartsLength","outputParts","FS_stdin_getChar_buffer","lengthBytesUTF8","len","charCodeAt","stringToUTF8Array","heap","outIdx","maxBytesToWrite","startIdx","intArrayFromString","stringy","dontAddNull","u8array","numBytesWritten","TTY","ttys","shutdown","register","dev","ops","output","registerDevice","stream_ops","stream","tty","rdev","ErrnoError","seekable","close","fsync","read","offset","get_char","bytesRead","timestamp","write","put_char","default_tty_ops","prompt","readline","FS_stdin_getChar","val","ioctl_tcgets","c_iflag","c_oflag","c_cflag","c_lflag","c_cc","ioctl_tcsets","optional_actions","ioctl_tiocgwinsz","default_tty1_ops","mmapAlloc","size","ceil","alignMemory","_emscripten_builtin_memalign","address","zeroMemory","MEMFS","ops_table","mount","createNode","parent","isBlkdev","isFIFO","getattr","node_ops","setattr","lookup","mknod","rename","unlink","rmdir","readdir","symlink","llseek","allocate","mmap","msync","link","readlink","chrdev","chrdev_stream_ops","isDir","contents","isFile","usedBytes","isLink","isChrdev","getFileDataAsTypedArray","expandFileStorage","newCapacity","prevCapacity","oldContents","resizeFileStorage","newSize","attr","ino","nlink","uid","gid","atime","mtime","ctime","blksize","blocks","genericErrors","old_node","new_dir","new_name","new_node","lookupNode","newname","oldpath","canOwn","whence","prot","flags","allocated","byteOffset","mmapFlags","preloadPlugins","FS_getMode","canRead","canWrite","IDBFS","dbs","indexedDB","_indexedDB","ret","mozIndexedDB","webkitIndexedDB","msIndexedDB","DB_VERSION","DB_STORE_NAME","populate","getLocalSet","local","getRemoteSet","remote","reconcile","quit","values","getDB","req","db","onupgradeneeded","fileStore","transaction","objectStoreNames","contains","objectStore","createObjectStore","indexNames","createIndex","unique","onsuccess","isRealDir","toAbsolute","check","mountpoint","stat","openKeyCursor","primaryKey","loadLocalEntry","lookupPath","storeLocalEntry","entry","chmod","utime","removeLocalEntry","loadRemoteEntry","store","storeRemoteEntry","put","removeRemoteEntry","dst","total","e2","getTime","remove","errored","done","oncomplete","reverse","mounts","devices","streams","nextInode","nameTable","currentPath","initialized","ignorePermissions","filesystems","syncFSRequests","opts","follow_mount","recurse_count","current_path","islast","isMountpoint","mounted","follow","count","getPath","isRoot","hashName","parentid","hash","hashAddNode","name_next","hashRemoveNode","errCode","mayLookup","FSNode","destroyNode","isSocket","flagsToPermissionString","perms","nodePermissions","mayCreate","mayDelete","isdir","errno","mayOpen","MAX_OPEN_FDS","nextfd","fd","getStreamChecked","getStream","createStream","FSStream","shared","defineProperties","isRead","isWrite","isAppend","closeStream","device","getDevice","major","minor","makedev","ma","mi","getMounts","completed","doCallback","pseudo","mountRoot","unmount","mkdir","dirs","mkdev","newpath","old_path","new_path","old_dir","old_dirname","new_dirname","old_name","dontFollow","lstat","lchmod","fchmod","chown","lchown","fchown","truncate","ftruncate","FS_modeStringToFlags","created","ungotten","readFiles","isClosed","getdents","seeking","bytesWritten","munmap","ioctl","cmd","arg","readFile","encoding","buf","actualNumBytes","ArrayBuffer","isView","byteLength","chdir","createDefaultDirectories","createDefaultDevices","randomBuffer","randomLeft","randomByte","createDevice","createSpecialDirectories","proc_self","createStandardStreams","ensureErrnoError","setErrno","message","constructor","code","stack","staticInit","findObject","dontResolveLastLink","parentExists","parentPath","parentObject","createPath","createFile","properties","createDataFile","forceLoadFile","obj","isDevice","isFolder","createLazyFile","LazyUint8Array","lengthKnown","chunks","chunkOffset","chunkSize","setDataGetter","cacheLength","header","datalength","getResponseHeader","hasByteServing","usesGzip","lazyArray","chunkNum","setRequestHeader","overrideMimeType","doXHR","_length","_chunkSize","writeChunks","fn","SYSCALLS","DEFAULT_POLLMASK","calculateAt","dirfd","allowEmpty","getStreamFromFD","doStat","func","BigInt","doMsync","addr","varargs","getp","getStr","bigintToI53Checked","NaN","readEmAsmArgsArray","growMemory","pages","grow","ENV","getEnvStrings","env","navigator","languages","createPreloadedFile","dontCreateFile","preFinish","fullname","processData","byteArray","finish","Browser","handled","plugin","FS_handledByPreloadPlugin","dep","asyncLoad","calledRun","wasmImports","___errno_location","op","termios","argp","winsize","sigPtr","argbuf","readEmAsmArgs","runEmAsmFunction","dest","copyWithin","requestedSize","oldSize","maxHeapSize","cutDown","overGrownHeapSize","__environ","environ_buf","bufSize","stringToAscii","penviron_count","penviron_buf_size","iov","iovcnt","pnum","curr","doReadv","newOffset","doWritev","wasmExports","info","receiveInstance","instantiateStreaming","createWasm","a0","a1","a2","a3","a4","a5","a6","a7","stackSave","stackRestore","stackAlloc","run","doRun","cb","postRun","preRun","ident","returnType","argTypes","toC","outPtr","stringToUTF8","stringToUTF8OnStack","getCFunc","cArgs","converter","convertReturnValue","onDone","runCaller","ready","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","deps","isHiddenRoute","firestore","getFirestore","indexData","getDoc","doc","analysisKey","fSlug","midiInfo","midiDoc","midiData","midiBlob","toUint8Array","savedAnalysis","rawlProps","playbackResolve","loadMidi","EventIterator","curEvent","loopStartPos","elapsedLoops","curTick","EVENT_MIDI_CONTROLLER","loop","isLoopStart","isLoopEnd","isAllNotesOff","allNotesOff","printTrack","charArr","padStart","viz","MIDIFile","getLoopedEvents","tracks","smallestDelta","loopCount","combinedEvents","format","getFormat","tickResolution","getTickResolution","loopCountReached","eventIterator","MIDIEvents","EVENT_META","EVENT_META_SET_TEMPO","trackIterators","every","it","_trackIterators$_i","getTimeEvents","maxPlayTime","_event$delta","tempoBPM","EVENT_META_TIME_SIGNATURE","_trackIterators$_i2","_ref","_toConsumableArray","_ref2","promisify","oldSend","xhrArguments","statusText","Alert","handlePlayerError","hidden","showPlayerError","playerError","TimeSliderContainer","TimeLabel","DurationLabel","TimeSlider","_React$Component","draggedSongPositionMs","currentSongPositionMs","timer","prevProps","setInterval","_this2$props","ms","sec","getTimeLabel","getSongPos","handlePositionDrag","handlePositionDrop","HEADER_HEIGHT","HeaderContainer","NavLinks","baseLinkStyles","HeaderLink","ExternalLink","ExternalLinks","user","handleLogin","handleLogout","analysisEnabled","handleToggleAnalysis","getLinkStyle","pathPrefix","SignIn","checked","email","MessageBoxOuter","MessageBox","MessageBoxInner","dropzoneProps","isDragActive","TimelineContainer","TimelineWrapper","TimelineYear","YearMarker","YearLabel","ComposersGroup","ComposerCard","h3","CountryFlag","FilterIndicator","CloseFilter","selectedCountry","setSelectedCountry","selectedStyle","setSelectedStyle","composersWithoutYear","filteredComposers","filteredYears","ComposerCardContent","handleCountryClick","handleStyleClick","year","AboutTop100Corpus","Container","FrozenNotesDisplay","JsonDisplay","pre","RangeInputs","NumberInput","CopyIndicator","visible","StyledSelect","classNamePrefix","SaveButton","unsaved","FlashOverlay","customComponents","Option","components","label","selectTheme","theme","colors","primary","primary75","primary50","primary25","danger","dangerLight","neutral0","neutral5","neutral10","neutral20","neutral30","neutral40","neutral50","neutral60","neutral70","neutral80","neutral90","selectStyles","control","provided","borderColor","menu","option","singleValue","indicatorSeparator","dropdownIndicator","clearIndicator","saveAnalysis","dataRange","setDataRange","inputRange","setInputRange","tagName","setTagName","setError","copyIndicatorVisible","setCopyIndicatorVisible","menuIsOpen","setMenuIsOpen","tagError","setTagError","unsavedChanges","setUnsavedChanges","flashVisible","setFlashVisible","phraseStartsUpdated","setPhraseStartsUpdated","maxMeasure","validateAndUpdateRange","newRange","handleRangeChange","newValue","handleRangeBlur","createFrozenNotes","endTime","notesInVoices","lengthToNotes","TIME_SCALE_FACTOR","midiNumbers","deltaCoding","getModulations","initialModulation","mod","reduce","latest","relevantModulations","fromEntries","frozenNotesData","snippetPhraseStarts","getPhraseStarts","exportString","resetToDefaults","saveSnippet","updatedAnalysis","snippetToDelete","selectRef","focus","copyToClipboard","clipboard","writeText","allTags","tagSet","tagCounts","countTagOccurrences","saveButtonRef","measureStartRef","select","updatedSnippets","maxMeasures","updateSnippetPhraseStarts","selectedOption","actionMeta","action","handleSelectChange","options","isClearable","onMenuOpen","onMenuClose","API_BASE","ERROR_FLASH_DURATION_MS","FORMATS","MAX_VOICES","SOUNDFONT_MOUNTPOINT","SOUNDFONT_URL_PATH","SOUNDFONTS","items","FrozenNotesContainer","HeaderStaff","midiRange","adjustedNotes","getNoteColor","dummyMeasureSelection","selectedMeasure","selectMeasure","splitAtMeasure","mergeAtMeasure","renumberMeasure","sectionSpan","memoizedNoteRectangles","AnalysisGrid","measureSelection","showHeader","showTonalGrid","voiceRectangles","getAverageMidiNumber","sum","getMidiRange","Voice","mouseHandlers","scrollInfo","voiceName","setVoiceMask","mask","voiceMask","xToSeconds","localMidiRange","systemClickHandler","noteRectangles","frozenHeight","frozenMidiRange","DUMMY_CALLBACK","hasVisibleNotes","VoiceName","StackedSystemLayout","voiceNames","positionSeconds","isEmbedded","setNoteHeight","secondWidth","setSecondWidth","setSecondWidthCalled","prevPositionSeconds","voicesSortedByAverageMidiNumber","voice","average","sectionSpans","sections","sectionStartInPhrases","optimalSecondWidth","targetWidth","innerWidth","annotatedSections","longestSection","longest","voices","parentRef","sectionRefs","setScrollInfo","debouncedScroll","debounce","handleScroll","scrollLeft","parentDiv","sectionIndex","sectionElement","scrollIntoView","behavior","block","overflowX","overflowY","order","el","MeasureNumbers","Cursor","MERGED_VOICE_NAMES","MERGED_VOICE_MASK","MergedSystemLayout","flattenedNotes","flat","TinyLetter","frameId","cancelAnimationFrame","requestAnimationFrame","registerKeyboardHandler","unregisterKeyboardHandler","debounceSetNoteHeight","debounceSetSecondWidth","handleSecondWidthChange","newWidth","transformOrigin","CHORD_TYPES","PITCH_CLASS_TO_GUITAR_LETTER","absoluteRoot","chordType","InlineSnippets","setHoveredMeasuresSpan","hoveredSnippetIndex","setHoveredSnippetIndex","filteredSnippets","filterSnippetsByAccess","groupedItems","setGroupedItems","itemRefs","grouped","form","section","measureNum","content","sourceSnippet","timeoutId","prevRight","prevIndex","rect","getBoundingClientRect","prevMeasure","updated","groupIndex","flexWrap","item","currentTarget","snippetKey","FORCED_PANNING_LABEL","onForcedPanningChange","forcedPanning","setForcedPanning","isSingleActive","borderBottom","paddingBottom","reload","htmlFor","newVoiceMask","verticalAlign","CitationContainer","CitationIcon","CitationPopup","showCitation","setShowCitation","formattedCitation","setFormattedCitation","citationUrl","setCitationUrl","setPosition","iconRef","CITES","bibtex","authors","author","given","family","editor","issued","whereText","where","hasUrl","rightSpace","faQuoteRight","rings_tuning","alf_aeolian","tagg_loops","nobile","richards","vice_despacito","DropBox","Icon","Text","faMusic","GradientText","GradientGreen","GradientCool","GradientWarm","GradientBright","GradientDark","TextLine","setTop","updatePosition","outerComponentRect","parentElement","scrollY","closest","findTonic","countPitchClasses","bestTonic","bestValue","currentValue","findFirstPhraseStart","earliestOnset","setSystemLayout","prevLayout","snap","buildManualMeasuresAndBeats","manualMeasures","measureStarts","currentBeatsPerMeasure","previousBeatsPerMeasure","measureIndex","currentMeasureLength","newMeasure","highlightMatch","term","regex","RegExp","SearchContainer","SearchInputContainer","SearchInput","TotalCount","ResultsContainer","searchTerm","setSearchTerm","searchInputRef","totalMidis","setTotalMidis","uniqueMidis","filteredCorpora","searchTerms","corpusWords","midiWords","groupedCorpora","acc","group","sortedGroups","multiCorpusGroups","singleCorpusEntries","minWidth","renderEmptySearchResults","composerMatched","matchingMidis","borderLeft","paddingLeft","NeonLink","Example","bad","Side","sideImage","Content","ChordStairsContainer","Section","allow","allowFullScreen","shortcuts","Global","Space","ArrowLeft","ArrowRight","h2","category","table","borderCollapse","tr","td","kbd","ShortcutHelp","categoryShortcuts","description","getTagsForMidi","filteredAnalysis","getSnippetTags","posttext","getComposerOrder","hasOrder","PathContainer","MenuContainer","isRawlVisible","ChapterRow","ScrollableContent","CategorySection","CategoryHeader","ChaptersContainer","twoColumns","TopicContainer","TopicCard","HomeChapter","TopicMenu","TopicBubble","EjectButton","ChapterCategories","CHAPTER_CATEGORIES","order_of_chords","texture","melody","chromaticism","modulation","chord_types","rhythm_and_meter","misc","TopicContent","activeTopic","activeChapter","chapterData","explanation","matchingSnippet","initialChapter","initialTopic","loading","setLoading","errorMessages","setErrorMessages","setChapterData","setActiveChapter","selectedMeasureStart","setSelectedMeasureStart","setIsRawlVisible","setActiveTopic","selectFirstTopicFromChapter","chapterIndex","topics","firstTopic","processAnalyses","errors","snippetWithSlug","topicData","categoryChapters","categories","allCategorizedChapters","getMiscChapters","localeCompare","shouldUseTwoColumns","midPoint","formatCategoryLabel","handleTopicClick","ContentArea","parsingResult","showAnalysisBox","rawlLanguage","StreamLanguage","define","languageData","commentTokens","eatSpace","skipToEnd","executeCopyForChannels","command","channels","scoreByTrack","originalTrack","sourceStartAbsBeat","sourceEndAbsBeat","targetStartAbsBeat","spanLengthInBeats","currentTrackNotes","sourceNotes","allCopies","copyStartBeat","targetPosition","isPublishing","effectiveSlug","setIsFolded","editorRef","cycleTimeoutRef","debounceTimeoutRef","playSongBuffer","score","setScore","isEditorFocused","setIsEditorFocused","currentLine","setCurrentLine","shadowScore","setShadowScore","isPlayingFromShadow","setIsPlayingFromShadow","setContext","currentBpm","panelHeight","setPanelHeight","localStorage","getItem","isDragging","setIsDragging","dragStartY","dragStartHeight","setIsPublishing","publishedUrl","setPublishedUrl","showCopyFeedback","setShowCopyFeedback","initialSource","setInitialSource","__disableGlobalShortcuts","handleMouseDown","clientY","currentHeight","innerHeight","handleMouseMove","startHeight","newHeight","heightVh","setItem","handleMouseUp","capture","debouncedMelodyPlayback","autoplay","allLines","commentLineIndex","lines","newContext","allMidiNotes","midiNote","velocity","notesByChannel","channelNotes","midiResult","generateMidiWithMetadata","cleanupBlinkingState","handleTextChange","editId","docRef","docSnap","newScore","source","handleCursorChange","viewUpdate","lineNumber","lineAt","selection","main","head","empty","currentLineText","cycleCount","startCycle","newLines","onUpdate","customTheme","flex","extensions","characterBackgroundsPlugin","keymap","of","toggleComment","basicSetup","lineNumbers","highlightActiveLineGutter","highlightActiveLine","foldGutter","onFocus","getBackgroundsForLine","lineIndex","baseDecorations","class","inWhitespace","processKeySignature","cmdMatch","noteDecorations","processNoteColors","dec","copyMatch","fullMatch","sourceSpan","spanMatch","spanStartIndex","decoration","commentIndex","modeStartIndex","UNSTABLE_PITCHES","parseNote","isPartOfChord","nextIndex","hasDuration","noteStart","degree","durationStart","keyMatch","melodyStartIndex","chordNotes","currentIndex","isChord","lastNextIndex","parseMelody","dotClass","colorIndex","calculateNoteColor","lineLength","decorations","chordGroups","currentChordStart","colorClass","absoluteStart","absoluteEnd","absoluteDurationStart","applyNoteColors","createTheme","settings","foreground","caret","selectionMatch","lineHighlight","gutterBackground","gutterForeground","comment","fontStyle","ViewPlugin","fromClass","buildDecorations","update","docChanged","viewportChanged","builder","RangeSetBuilder","visibleRanges","backgrounds","charPos","Decoration","mark","v","EditorIndexContainer","EditorIndexTitle","EditorIndexList","EditorIndexItem","Track","MidiTrack","NoteEvent","Writer","generateMidiFile","musicalEvents","sortedNotes","currentStartTime","currentChannel","currentPitches","addEvent","convertToMusicalEvents","eventsByChannel","trackNames","channelEvents","tempoTrack","tempoTrackName","addTrackName","ts","setTimeSignature","trackName","sortedTracks","base64Data","dataUri","binaryString","atob","bytes","generateMidiFromEvents","generateInitialAnalysis","phrasePatch","KeyboardLayout","ButtonBar","PublishButton","PublishedUrl","TelegramInput","NoteBase","BeatMarker","NoteExample","beatMarkers","telegramUsername","setTelegramUsername","showUsernameInput","setShowUsernameInput","inputRef","handlePublish","finalSource","newUrl","addDoc","collection","createdAt","username","fullUrl","origin","faCopy","hasChanges","faSpinner","faCloudArrowUp","alt","ForgeContainer","SelectorContainer","HorizontalCategorySection","Button","TopControls","BPMSlider","BPMLabel","BPMValue","ForgeButton","propName","handleStyleInteraction","useForgeContext","ProgressionButton","PatternButton","INITIAL_STATE","patternIndex","progression","playbackStyle","wholeNoteStyle","alternationStyle","melodyRhythm","melodyType","MODE_OPTIONS","PLAYBACK_STYLES","WHOLE_NOTE_STYLES","ALTERNATION_STYLES","MELODY_RHYTHMS","MELODY_TYPES","ForgeContext","ButtonSection","customButton","CustomButton","ButtonComponent","TONIC_OPTIONS","pitchClass","letter","lastClickedState","setLastClickedState","lastGeneratedConfig","setLastGeneratedConfig","isDraggingBPM","setIsDraggingBPM","setCurrentMidi","setRawlProps","isClickPending","patternSequences","PATTERNS","pattern","prepareMidi","newConfig","shouldAutoPlay","isEqual","config","generateNotes","downloadableInfo","PROGRESSIONS","midiDataLength","getProgressionDisplay","prog","SCALE_CHORDS","updates","eventType","newBPM","seq","natural_minor","CLASSIC","ALTERNATE_1","ALTERNATE_2","DESCENDING","MINOR_RISE","getChord","getAdjustedBasePitch","basePitch","createNote","pitchOffset","DEFAULT_VELOCITY","DEFAULT_NOTE_DURATION_PADDING","findPitchInScale","scaleDegrees","normalizedPitch","deg","generateAlbertiPattern","EIGHTH_NOTE","selectedPattern","chordPitches","repeat","currentChord","baseTime","getBaseNoteParams","patternValue","octaveOffset","MEASURE_LENGTH","generateWholeNotes","quarter","generateRootChordAlternation","melodyNotes","getScaleDegrees","notesPerMeasure","scaleIndex","generateMelody","CHORD_OCTAVE_ADJUSTMENTS","FORGE_MOCK_ID","saveMidi","slugToCheck","query","getDocs","random","substring","firestoreBlob","Bytes","fromUint8Array","indexRef","updateDoc","arrayUnion","saveMidiFromLink","URLSearchParams","decodeURIComponent","method","alert","DropSaveForm","setTitle","setSourceUrl","titleInputRef","handleKeyPress","isNoteOrPitchBendEvent","isGlobalMetaEvent","getTrackName","nameEvent","createTrackNameEvent","deltaTime","createEndOfTrackEvent","ensureTrackEnding","findUnusedChannel","usedChannels","pushEventWithDeltaTime","lastEventTime","targetChannel","absoluteTime","inputData","_forcedPanning","parseMidi","getUsedChannels","channelTracks","trackIndex","mergedEvents","globalMetaEvents","enhancedEvent","newTracks","processedChannels","trackIndices","leftHandChannel","baseTrackName","leftHandEvents","rightHandEvents","leftName","lastMetaTime","controllerType","rightHandLastEventTime","leftHandLastEventTime","isFirstTrack","cleanedRightHandEvents","cleanedLeftHandEvents","outputData","writeMidi","GM_INSTRUMENTS","GM_DRUM_KITS","require","SYSEX_GM_RESET","SEQUENCED_CONTROLLERS","META_LABELS","_defineProperty","EVENT_META_TEXT","EVENT_META_COPYRIGHT_NOTICE","EVENT_META_TRACK_NAME","EVENT_META_INSTRUMENT_NAME","EVENT_META_LYRICS","EVENT_META_MARKER","EVENT_META_CUE_POINT","printSysex","MIDIPlayer","autoBind","synth","programChangeCb","speed","skipSilence","lastProcessPlayTimestamp","lastSendTimestamp","useWebMIDI","sampleRate","channelsInUse","channelMask","channelProgramNums","textInfo","setChipStateDump","channelToTrack","stop","load","midiFile","_this$setChipStateDum","useTrackLoops","elapsedTime","getTrackEvents","getEvents","summarizeMidiEvents","datas","getUint16","doSkipSilence","firstNoteDelay","messageDelay","numSysexEvents","firstNote","eventList","EVENT_SYSEX","EVENT_DIVSYSEX","MIDI_1PARAM_EVENTS","MIDI_2PARAMS_EVENTS","play","endCallback","playbackStartedCallback","reset","performance","processPlaySynth","bufferSize","bufferStart","batchSize","msPerBatch","samplesRemaining","noteOff","EVENT_MIDI_PROGRAM_CHANGE","handleProgramChange","programChange","controlChange","synthStillActive","getValue","processPlay","throttleDelayMs","EVENT_MIDI_CHANNEL_AFTERTOUCH","EVENT_MIDI_NOTE_AFTERTOUCH","scaledPlayTime","BUFFER_AHEAD","program","_this$programChangeCb","panic","warn","_this$synth2","_this$synth","getPosition","setOutput","getSpeed","setSpeed","setPositionSynth","setPositionWebMidi","wasPaused","numEvents","eventMap","getChannelInUse","getChannelProgramNum","iconv","chardet","detect","setChannelMute","isMuted","panicChannel","setUseWebMIDI","Player","_EventEmitter","core","appTogglePause","stopped","fileExtensions","timeCount","renderTime","perfLoggingInterval","paramDefs","fileExtension","startMs","getMetadata","durationMs","getDurationMs","positionMs","getPositionMs","numVoices","getNumVoices","getParamDefs","getTempo","getVoiceMask","getVoiceName","isStopped","isPaused","seekMs","processAudioInner","cost","budget","audioNode","audioprocess","onaudioprocess","outputBuffer","numberOfChannels","getChannelData","filepath","meta","EventEmitter","dummyMidiOutput","midiDevices","_Player","_len","_key","defaultValue","dependsOn","param","hint","_tp_init","_malloc","filepathMeta","midiFilePlayer","MIDIFilePlayer","emit","range","_tp_note_on","_tp_note_off","_tp_pitch_bend","_tp_control_change","_tp_program_change","_tp_panic","_tp_panic_channel","_tp_render","_tp_reset","numBanks","_adl_getBanksCount","_adl_getBankNames","oplBanks","def","webMidiIsInitialized","transientParams","setParameter","soundfontParam","paramDef","updateSoundfontParamDefs","_loadData","_asyncToGenerator","_regeneratorRuntime","_callee","newTransientParams","_args","wrap","_context","ensureWebMidiInitialized","metadataFromFilepath","getParameter","getSynthengineBasedOnFilename","getOpl3bankBasedOnFilename","_tp_set_ch10_melodic","setTransientParameter","getBasePlayerState","abrupt","_x","_x2","fp","opl3def","opl3banks","findBank","bank","bankId","_superPropGet","suspend","pgm","instrumentName","_this4","_this5","_tp_get_polyphony","userSoundfonts","userSoundfontPath","fluidSynth","_tp_get_fluid_synth","_fluid_synth_set_chorus_on","level","depthMs","_fluid_synth_set_chorus","_this6","isTransient","_tp_set_synth_engine","_loadSoundfont","_tp_set_reverb","setFluidChorus","_tp_set_polyphony","_tp_set_bank","muteAudioDuringCall","ccall","secondsToX__","xToSeconds__","getTonic","getSecondsMeasure","getNoteMeasure","setAnalysis","ANALYSIS_STUB","analysisRef","systemLayout","commitAnalysisUpdate","analysisUpdate","setSelectedMeasure","selectedMeasureRef","allNotes","hoveredNote","setHoveredNote","MouseEvent","shiftKey","futureAnalysis","getNewAnalysis","diff","groupByPhrasesTillTheEnd","groupSize","newSections","sectionToRemove","displayNumber","isShift","measureRenumbering","firstPhraseStart","advanceAnalysis","setPositionMs","running","animate","handleEscapePress","keyCode","targetElement","coloredNotes","notesInVoice","colorPitchClass","systemLayoutProps","absoluteMeasureStart","seekTime","borderTop","flexShrink","flexGrow","midiDocRef","deltaDecoding","encoded","undeltaCoding","adjustModulations","rehydrateAnalysis","frozenAnalysis","newModulations","sortedMeasures","lastValue","removeIdleModulations","newAnalysis","rehydrateNotes","starts","absoluteSpan","numMeasures","STACKED_RN_HEIGHT","KEY_TO_OFFSET","z","VerticalBar","MeasureBar","BeatBar","RemeasuringInput","setValue","parsedValue","autoFocus","maskImage","WebkitMaskImage","Measure","isPhraseStart","showNonPhraseStarts","selectedPhraseStart","isLastSection","showMeasureBar","hoveredMeasuresSpan","Beat","second","TonalGrid","minX","maxX","fromIndex","toIndex","fromX","modulationsArray","showBeats","relevantBars","bar","maxKey","numericKey","CHORDS","biiio7","vio7","iiio7","vo7","bviio7","ivo7","bvio7","ii","II","II7","ii7","iii","III","iii7","iv","iv7","I","I7","vi","VI","vi7","IV","IV7","V","V7","V43","V9","V13","V7b9","Vsus4","Vsus47","Imaj7","IVmaj7","I5","IV5","V5","bVI","bVII","bvi","bvii","bIII","biii","bII","bII7","viio7","biio7","io7","It","Fr","Ger","Cad64","cad64","i64","ii65","io","imaj7","i7","iio","iio7","viio","IPAC","I6","i6","b2","b3","b6","b7","bii","vii","v7","stackChordUp","prevRoot","currentRoot","distanceUp","distanceDown","mergeAnalyses","existingAnalyses","newAnalyses","setAppElement","AppMainContent","super","keyboardHandlers","seekForRawl","seekRelativeInner","midiPlayer","transformedBuffer","setPlaybackStartedCallback","loadData","parsing","setupMidiPlayer","catch","prevState","handleSetVoiceMask","startPlayback","onDrop","droppedFiles","reader","FileReader","droppedFilename","ext","extname","sf2Path","forceWrite","chipCore","forceUpdate","currUrl","readAsArrayBuffer","toggleShortcutHelp","showShortcutHelp","handler","resetMidiPlayerState","currentSongNumVoices","songUrl","handleUnlockAudioContext","audioContext","audioContextLocked","audioContextState","updatePlaybackTime","handleSequencerStateUpdate","isEjected","attachMediaKeyHandlers","contentAreaRef","errorTimer","songRequest","firebaseApp","auth","getAuth","adminDocRef","adminSnapshot","default","onAuthStateChanged","loadingUser","loadUserAnalyses","AudioContext","webkitAudioContext","latencyHint","savedLatencyCorrection","initialLatencyCorrection","directories","fileToDownload","pow","log2","baseLatency","gainNode","createGain","gain","playerNode","createScriptProcessor","initChipCore","urlSlug","keySlug","valueSlug","userId","userDocRef","userSnapshot","userData","setDoc","finally","audioState","locateFile","prefix","print","msg","printErr","self","handlePlayerStateUpdate","processAudio","handleFileSystemReady","mapSequencerStateToAppState","sequencerState","appState","prop","seqProp","provider","GoogleAuthProvider","signInWithPopup","signOut","userRef","userDoc","mediaSessionAudio","mediaSession","setActionHandler","seekRelative","ctrlKey","metaKey","HTMLElement","blur","HTMLInputElement","setSpeedRelative","pause","playbackState","processFetchedDirectory","playerState","playSong","canPlay","transformedMidi","playFromFirestore","inputArray","componentDidMount","playbackTimer","componentWillUnmount","componentDidUpdate","prevPath","isStructuresRoute","wasStructuresRoute","rawlRoute","Route","Switch","exact","StructuresWithParams","disableClick","component","isOpen","onRequestClose","contentLabel","overlay"],"mappings":"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C,QAE/B,CACE/I,KAAM,mBACNiC,SAAU,kBACVC,aAAc,mBACda,SAAS,GAEX,CACE/C,KAAM,gDACNiC,SAAU,YACVC,aAAc,gBACda,SAAS,GAEX,CACE/C,KAAM,gCACNiC,SAAU,OACVC,aAAc,0BACda,SAAS,GAEX,CACE/C,KAAM,uCACNiC,SAAU,uBACVC,aAAc,iDAEhB,CACElC,KAAM,gCACNiC,SAAU,eACVC,aAAc,yCAEhB,CACElC,KAAM,yBACNiC,SAAU,wBACVC,aAAc,2BAEhB,CACElC,KAAM,+CACNiC,SAAU,cACVC,aAAc,gDAEhB,CACElC,KAAM,uEACNiC,SAAU,SACVC,aAAc,4CAEhB,CACElC,KAAM,sBACNiC,SAAU,OACVC,aAAc,8BAEhB,CACElC,KAAM,oCACNiC,SAAU,cACVC,aAAc,iBAEhB,CACElC,KAAM,8BACNiC,SAAU,eACVC,aAAc,kBAEhB,CACElC,KAAM,oCACNiC,SAAU,aACVC,aAAc,cAEhB,CACElC,KAAM,uEACNiC,SAAU,OACVC,aAAc,mCAEhB,CACElC,KAAM,gCACNiC,SAAU,mBACVC,aAAc,uBAEhB,CACElC,KAAM,yBACNiC,SAAU,gBACVC,aAAc,0CAEhB,CACElC,KAAM,wBACNiC,SAAU,gBACVC,aAAc,WAEhB,CACElC,KAAM,qCACNiC,SAAU,eACVC,aAAc,8CAEhB,CACElC,KAAM,0BACNiC,SAAU,mBACVC,aAAc,2BAEhB,CACElC,KAAM,iBACNiC,SAAU,aACVC,aAAc,mBAEhB,CACElC,KAAM,sBACNiC,SAAU,SACVC,aAAc,aAEhB,CACElC,KAAM,8BACNiC,SAAU,aACVC,aAAc,oBAEhB,CACElC,KAAM,mCACNiC,SAAU,iBACVC,aAAc,oCAEhB,CACElC,KAAM,wBACNiC,SAAU,WACVC,aAAc,gCAEhB,CACElC,KAAM,6CACNiC,SAAU,WACVC,aAAc,iBAEhB,CACElC,KAAM,4CACNiC,SAAU,qBACVC,aAAc,wB,22BC9rBlB,cACA,UACA,WACA,SACA,SACA,QACA,SACA,SACA,SACA,YACA,QACM2J,EAAa,CAAC,EAAG,GAA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,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,kBAGWC,EAAe,CAC1B,EAAI,iBACJ,EAAI,iBACJ,GAAI,iBACJ,GAAI,iBACJ,GAAI,iBACJ,GAAI,iBACJ,GAAI,kB,uECrIAp7B,EAAaq7B,EAAQ,IAC3BA,EAAQ,KAmBR,IASMC,EAAiB,CAAC,IAAM,IAAM,EAAM,EAAM,KAC1CC,EAAwB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,KACrDC,EAAWC,4BAAA,GACdz7B,EAAW07B,gBAAkB,QAC7B17B,EAAW27B,4BAA8B,aACzC37B,EAAW47B,sBAAwB,SACnC57B,EAAW67B,2BAA6B,cACxC77B,EAAW87B,kBAAoB,UAC/B97B,EAAW+7B,kBAAoB,UAC/B/7B,EAAWg8B,qBAAuB,aAGrC,SAASC,EAAWljF,GAClB,OACE,OACAA,EAAK6J,KAAI,SAACzG,GAAC,OAAM,IAAMA,EAAEoV,SAAS,KAAK7U,OAAO,EAAE,IAAE2C,KAAK,KACvD,KACAwE,aACJ,CAGA,SAASq4E,EAAWzvB,GAClB0vB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UAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,gDACA,YACA,sCAEFliB,kBAAmB,KACnBhB,MAAO,0BACPC,MAAO,oCACPU,QAAS,OAEX,CACEO,KAAM,aACNgiB,MAAO,CAAC,0CACRliB,kBAAmB,KACnBhB,MAAO,2BACPC,MAAO,uCACPU,QAAS,OAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,iFAEFliB,kBAAmB,KACnBhB,MAAO,iBAET,CACEkB,KAAM,gBACNgiB,MAAO,CACL,wEACA,cACA,iBACA,yCAEFliB,kBAAmB,KACnBL,QAAS,eAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,8EACA,uCACA,qCAEFliB,kBAAmB,KACnBhB,MAAO,+BACPW,QAAS,OAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,+BACA,yCACA,sCACA,4BACA,0BAEFliB,kBAAmB,KACnBhB,MAAO,oCACPC,MAAO,qCACPU,QAAS,SAGX,CACEO,KAAM,iBACNgiB,MAAO,CACL,sCACA,mDAEFliB,kBAAmB,KACnBhB,MAAO,oBACPW,QAAS,SAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,4EACA,0CAEFliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,SAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,eACA,gCACA,yEACA,gCACA,gDAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,yBACPU,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,kDACA,+DACA,mEACA,oCACA,sCACA,8BACA,0EAEFliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,SAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,kCACA,2BACA,mBAEFliB,kBAAmB,KACnBhB,MAAO,WAET,CACEkB,KAAM,oBACNgiB,MAAO,CAAC,oCACRliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,wBACPU,QAAS,SAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,6BACA,oDACA,+BACA,sCAEFliB,kBAAmB,KACnBhB,MAAO,gBACPC,MAAO,0BACPU,QAAS,WAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,qBACA,+BACA,+BACA,4BACA,uEACA,sCACA,kCACA,gCACA,oCACA,6BACA,+BACA,4CACA,qCAGA,+BACA,8BACA,iCAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,qCACPU,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,+DACA,sBACA,qCACA,iEACA,4BACA,yBACA,iDACA,2BACA,4BACA,yBACA,kCACA,cACA,WACA,sBACA,0CAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,0BACPU,QAAS,OAEX,CACEO,KAAM,UACNgiB,MAAO,CAAC,0CACRliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,0BACPU,QAAS,UAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,mFACA,0CACA,qDACA,gEACA,mDACA,4DAEFliB,kBAAmB,KACnBhB,MAAO,oBACPW,QAAS,WAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,mDACA,sCACA,qBACA,iCACA,2CACA,sCAEA,8BAEFljB,MAAO,qBACPC,MAAO,kBACPU,QAAS,SAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,8BACA,+CACA,6CAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,eACPU,QAAS,UAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,uBACA,qBACA,uBACA,mBACA,iBACA,YAEFliB,uBAAmBjG,EACnBiF,MAAO,oBACPC,MAAO,8BACPU,QAAS,WAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,wBACA,0BACA,6BACA,2BAEFljB,MAAO,gBACPW,QAAS,YACTK,kBAAmB,MAErB,CACEE,KAAM,kBACNgiB,MAAO,CAAC,2CAEV,CACEhiB,KAAM,eACNgiB,MAAO,CACL,iDACA,+BACA,mDAEFliB,kBAAmB,KACnBhB,MAAO,gBACPW,QAAS,MAEX,CACEO,KAAM,yBACNgiB,MAAO,CAAC,mBACRliB,kBAAmB,KACnBhB,MAAO,gBACPW,QAAS,OAEX,CAIEO,KAAM,QACNgiB,MAAO,CACL,gBACA,iEACA,kCACA,wCACA,sDAEA,gBACA,iBACA,2BACA,uDACA,uBACA,mDACA,qCACA,+DACA,+CACA,yBAEA,wDACA,kCACA,wBACA,6CAEA,wDACA,6BACA,mBACA,kBACA,qBAEA,eACA,4CACA,uBACA,wFAEA,8BACA,iDACA,+CAEA,qBACA,uCACA,2CAGA,eAEA,iBACA,oDACA,kDACA,wCACA,eACA,sCACA,kDAEA,4CACA,8BAGJ,CACEhiB,KAAM,mBACNgiB,MAAO,CACL,2CACA,+CAGJ,CACEhiB,KAAM,kBACNgiB,MAAO,CACL,0CACA,wCACA,6CACA,iDACA,8CACA,qCACA,sCACA,4FACA,2BACA,eAGJ,CACEhiB,KAAM,UACNgiB,MAAO,CAAC,wBAAyB,kCAEnC,CACEhiB,KAAM,UACNgiB,MAAO,CACL,qBACA,mDACA,uBACA,uBACA,cACA,6BACA,6CACA,yBACA,gCACA,0DACA,mCACA,gBAGJ,CACEhiB,KAAM,OACNgiB,MAAO,CACL,6BACA,6CACA,wBACA,wCACA,iCACA,kCACA,qBACA,8BACA,yCACA,0BACA,iCACA,oDACA,iBACA,YACA,wCACA,qCACA,4BACA,4BACA,+BACA,oCACA,4CAGJ,CACEhiB,KAAM,gBACNgiB,MAAO,CACL,qCACA,oEACA,4DAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,uBACPU,QAAS,WAEX,CACEO,KAAM,qBACNgiB,MAAO,CAAC,kCAAmC,+BAC3CliB,kBAAmB,KACnBhB,MAAO,6BACPC,MAAO,0BACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,qDACA,mCACA,qBACA,sDACA,uBACA,0FACA,wCACA,gCACA,kCAEFliB,kBAAmB,KACnBhB,MAAO,+BACPC,MAAO,8BACPU,QAAS,OAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,sDACA,oCACA,sDACA,yBACA,+CACA,oBAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,oCACPU,QAAS,WAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,qEACA,oIAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,8BACPU,QAAS,SAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,mEACA,qDAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,+BACPU,QAAS,SAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,gDACA,wCACA,wDACA,iDACA,yDACA,gFAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,8BACPU,QAAS,SAEX,CACEO,KAAM,QACNgiB,MAAO,CACL,yCACA,qCACA,yCACA,yEAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,uBACPU,QAAS,kBAGX,CACEO,KAAM,aACNgiB,MAAO,CAAC,UACRliB,kBAAmB,KACnBL,QAAS,QACTX,MAAO,oBAET,CACEkB,KAAM,kBACNgiB,MAAO,CACL,sCACA,iEACA,+EACA,8CAEFliB,kBAAmB,KACnBL,QAAS,QACTX,MAAO,oBAET,CACEkB,KAAM,kBACNgiB,MAAO,CAAC,2BACRliB,kBAAmB,KACnBhB,MAAO,gCACPC,MAAO,oCACPU,QAAS,SAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,+DACA,yBACA,uDACA,+BACA,oCACA,mBACA,0DACA,uEACA,8CACA,qBACA,4BACA,2BACA,sGACA,uBACA,kCACA,wCACA,qCACA,QACA,gDAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,sCACPU,QAAS,OAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,kCACA,qCAEFliB,kBAAmB,KACnBhB,MAAO,UACPC,MAAO,wBACPU,QAAS,WAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,yBACA,2CACA,mCACA,yBACA,+BAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,wCACPU,QAAS,WAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,kEACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,mCACA,mCACA,mCACA,mCACA,kCAEFliB,kBAAmB,KACnBhB,MAAO,UACPC,MAAO,iCACPU,QAAS,WAEX,CACEO,KAAM,wBACNgiB,MAAO,CACL,uDACA,0CAEFliB,kBAAmB,KACnBhB,MAAO,UACPC,MAAO,iBACPU,QAAS,WAEX,CACEO,KAAM,yBACNgiB,MAAO,CACL,oCACA,uCACA,mCAEFliB,kBAAmB,KACnBhB,MAAO,4BACPC,MAAO,wBACPU,QAAS,eAEX,CACEO,KAAM,WACNgiB,MAAO,CAAC,iBAAkB,oCAC1BliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,uBACPU,QAAS,WAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,qCACA,gCACA,4BACA,8BACA,8BACA,cAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,iCACPU,QAAS,QAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,gBACA,qGAEFliB,kBAAmB,KACnBhB,MAAO,oBACPC,MAAO,uBACPU,QAAS,cAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,8BACA,yCACA,qBACA,yDACA,sDACA,uBACA,qBACA,qBACA,kBACA,kCAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,iBACPU,QAAS,QAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,qBACA,qDAEFliB,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,qBACNgiB,MAAO,CAAC,+CACRliB,kBAAmB,KACnBhB,MAAO,0BACPC,MAAO,sBACPU,QAAS,cAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,6BACA,oCACA,yCAEFliB,kBAAmB,KACnBhB,MAAO,sBACPC,MAAO,oBACPU,QAAS,WAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,iFACA,iCACA,oCACA,6BACA,mCACA,6BAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,oCACPU,QAAS,SAEX,CACEO,KAAM,gBACNgiB,MAAO,CAAC,uBAAwB,qBAGlC,CACEhiB,KAAM,cACNgiB,MAAO,CACL,kCACA,sBACA,oBACA,sCACA,0BACA,sBACA,aACA,4BAEFliB,kBAAmB,KACnBhB,MAAO,oBACPC,MAAO,iBACPU,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CAAC,mBAAoB,oBAC5BliB,kBAAmB,KACnBhB,MAAO,oBACPC,MAAO,mBACPU,QAAS,OAEX,CAAEO,KAAM,cAAegiB,MAAO,CAAC,kCAC/B,CACEhiB,KAAM,eACNgiB,MAAO,CAAC,sBAAuB,yBAC/BliB,kBAAmB,KACnBhB,MAAO,sBACPC,MAAO,sBACPU,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,4DACA,yDACA,wDACA,oCACA,wCACA,4DAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,mBACPU,QAAS,SAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,8BACA,mBACA,mBAEFliB,kBAAmB,KACnBhB,MAAO,oBACPC,MAAO,mBACPU,QAAS,OAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,uCACA,iCACA,yCAEFliB,kBAAmB,KACnBhB,MAAO,qBACPC,MAAO,mBACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,sCACA,mDACA,qCACA,sCAEFliB,kBAAmB,KACnBhB,MAAO,oBACPC,MAAO,kBACPU,QAAS,UAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,mDACA,2EACA,2DAEFliB,kBAAmB,KACnBhB,MAAO,oBACPC,MAAO,gBACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,8BACA,sCACA,sCACA,sDAEFliB,kBAAmB,KACnBhB,MAAO,oBACPC,MAAO,cACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,2CACA,mCACA,mCAEFliB,kBAAmB,KACnBL,QAAS,UACTX,MAAO,iBAET,CACEkB,KAAM,eACNgiB,MAAO,CACL,8CACA,sBACA,4DACA,iBACA,uFAEFliB,kBAAmB,KACnBhB,MAAO,qBACPC,MAAO,eACPU,QAAS,SAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,4BACA,SACA,4BACA,4BACA,6BACA,qCACA,6BACA,qCACA,uDACA,oCAEFliB,kBAAmB,KACnBhB,MAAO,qBACPC,MAAO,yBACPU,QAAS,UAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,yBACA,WACA,0BACA,0BACA,8BACA,yBACA,kBAEFliB,kBAAmB,KACnBhB,MAAO,yBACPC,MAAO,6BACPU,QAAS,UAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,iBACA,gCACA,gDACA,uBACA,iCACA,wCACA,iBACA,mBACA,uBACA,yCACA,mCACA,+BACA,uCACA,iCACA,yBAEFljB,MAAO,oBACPC,MAAO,gBACPU,QAAS,iBAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,8BACA,sCACA,qCACA,mCACA,uCACA,qCACA,2EACA,2CACA,uCACA,kDACA,kDACA,4CACA,+BACA,iDACA,uCACA,sCACA,sCACA,0CACA,2CACA,wCACA,uCACA,qCACA,qCACA,sCACA,oCACA,sCACA,0CACA,wCACA,mDACA,mDACA,wCACA,0CACA,wBACA,yCACA,gCACA,8CACA,6CACA,qCACA,yCACA,iDACA,sCACA,kCACA,qCACA,2CACA,mCACA,yCACA,uCACA,0CACA,gBAEFliB,kBAAmB,KACnBhB,MAAO,oBACPC,MAAO,UACPU,QAAS,OAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,yBACA,2BACA,uEAEFliB,kBAAmB,KACnBhB,MAAO,uBACPC,MAAO,yBACPU,QAAS,WAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,kBACA,kBACA,2FACA,4BACA,0CACA,wDACA,yCACA,6CACA,iFACA,8BACA,8CACA,uBACA,6EACA,0BACA,uBACA,iBACA,oBACA,wBACA,gBACA,uBACA,yBACA,6BACA,8BACA,8BACA,yCACA,gCACA,iDAEFliB,kBAAmB,KACnBhB,MAAO,4BACPC,MAAO,wBACPU,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,2BACA,uCACA,mCAEFliB,kBAAmB,KACnBhB,MAAO,SACPW,QAAS,aAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,oCACA,yBACA,0BACA,0CAEFliB,kBAAmB,KACnBhB,MAAO,6CACPW,QAAS,aAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,oEACA,wCACA,kBACA,oDAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,aACPU,QAAS,OAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,iCACA,uCACA,wCAEFliB,kBAAmB,KACnBhB,MAAO,iBACPC,MAAO,eACPU,QAAS,OAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,qBACA,qBACA,qBACA,wCAEFljB,MAAO,sBACPC,MAAO,kBACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,6EACA,6EACA,mCACA,8BACA,8BACA,gCAEFliB,kBAAmB,KACnBL,QAAS,QACTX,MAAO,oBAET,CACEkB,KAAM,iBACNgiB,MAAO,CACL,yBACA,sBACA,kCACA,iBACA,2CACA,kBACA,sBACA,kBACA,wBACA,0CACA,sBACA,sBACA,kBACA,0BACA,8BACA,mBACA,uBAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,sBACPU,QAAS,WAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,4BACA,wFACA,iCACA,6CACA,8CACA,mDACA,2BACA,8BACA,sCACA,oCACA,iEACA,cACA,wCACA,mDACA,4BACA,4BACA,sBACA,yBACA,iDACA,uCACA,4BACA,kDACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,oBACPU,QAAS,OAEX,CAEEO,KAAM,cACNgiB,MAAO,CACL,kCACA,gBACA,0BACA,wBACA,yBACA,WAEFliB,kBAAmB,KACnBhB,MAAO,UACPC,MAAO,YACPU,QAAS,OAEX,CACEO,KAAM,aACNgiB,MAAO,CAAC,uCACRliB,kBAAmB,KACnBhB,MAAO,sBACPC,MAAO,sBACPU,QAAS,OAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,wBACA,iCACA,mDACA,sDACA,uCAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,wBACPU,QAAS,OAEX,CAAEO,KAAM,iBAAkBgiB,MAAO,IACjC,CACEhiB,KAAM,mBACNgiB,MAAO,CAAC,oEAEV,CACEhiB,KAAM,aACNgiB,MAAO,CACL,2BACA,kDACA,sBACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,qBACPU,QAAS,OAEX,CACEO,KAAM,MACNgiB,MAAO,CACL,wDACA,2DACA,oCACA,mBACA,yBACA,kDAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,kBACPU,QAAS,eAEX,CACEO,KAAM,OACNgiB,MAAO,CACL,oEACA,kDACA,iDACA,sDACA,+CACA,gEACA,kDACA,oDACA,+DACA,sDACA,qDACA,8CAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,wBACPU,QAAS,OAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,4GACA,kFAEFliB,kBAAmB,KACnBL,QAAS,QACTX,MAAO,oBAET,CACEkB,KAAM,cACNgiB,MAAO,CACL,2CACA,iDACA,yFAEFliB,kBAAmB,KACnBhB,MAAO,0CACPW,QAAS,SAEX,CACEO,KAAM,mCACNgiB,MAAO,CACL,gCACA,sFACA,kBACA,sBACA,QACA,SACA,yEAEFliB,kBAAmB,KACnBhB,MAAO,sBACPC,MAAO,uBACPU,QAAS,OAEX,CACEO,KAAM,cACNgiB,MAAO,CAAC,yCACRliB,kBAAmB,KACnBhB,MAAO,sBACPC,MAAO,uBACPU,QAAS,OAEX,CACEO,KAAM,QACNgiB,MAAO,CACL,iDACA,8CAEA,6EAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,gBACPU,QAAS,UAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,+EACA,6DAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,oBACPU,QAAS,SAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,qEACA,0CACA,gDACA,0DACA,gCACA,0CACA,+BACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,0BACPC,MAAO,2BACPU,QAAS,SAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,6BACA,yCACA,iCAEFliB,kBAAmB,KACnBhB,MAAO,uBACPC,MAAO,wBACPU,QAAS,OAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,yCACA,gDAEFliB,kBAAmB,MAErB,CACEE,KAAM,iBACNgiB,MAAO,CACL,sEACA,yDAEFliB,kBAAmB,KACnBhB,MAAO,aACPW,QAAS,UAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,+DACA,oDAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,uBACPU,QAAS,OAEX,CACEO,KAAM,sBACNgiB,MAAO,CAAC,2CACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,mBACPU,QAAS,UAEX,CACEO,KAAM,iBACNgiB,MAAO,CAAC,eAAgB,gBAAiB,0BACzCliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,8BACPU,QAAS,MAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,oCACA,kCAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,wBACPU,QAAS,MAEX,CACEO,KAAM,uBACNgiB,MAAO,CACL,kDACA,6CAEFliB,kBAAmB,KACnBhB,MAAO,UACPC,MAAO,4BACPU,QAAS,UAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,sEACA,8BACA,gCACA,oCACA,oBACA,+CACA,4BAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,2BACPU,QAAS,OAEX,CACEO,KAAM,cACNgiB,MAAO,CAAC,aAAc,+CACtBliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,qCACPU,QAAS,MAGX,CACEO,KAAM,oBACNgiB,MAAO,CAAC,6CACRliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,iBACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,qBACA,+BACA,qCAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,+BACPU,QAAS,aAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,sEAEFliB,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,cACA,qCACA,+CACA,gDACA,iCACA,eACA,kCAEFliB,kBAAmB,KACnBhB,MAAO,oBACPC,MAAO,4BACPU,QAAS,gBAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,wCACA,sDACA,qBAEFliB,kBAAmB,KACnBhB,MAAO,oBACPC,MAAO,0BACPU,QAAS,cAEX,CACEO,KAAM,oBACNgiB,MAAO,CAAC,wBAAyB,eAAgB,mBACjDliB,kBAAmB,KACnBhB,MAAO,cACPC,MAAO,sBACPU,QAAS,QAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,4CACA,qCACA,4BACA,oCACA,sBACA,uDAEFliB,kBAAmB,KACnBhB,MAAO,uBACPC,MAAO,wBACPU,QAAS,OAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,uCACA,0DACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,qBACPU,QAAS,UAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,+BACA,6CACA,uGACA,wBAEFliB,kBAAmB,KACnBhB,MAAO,+BACPC,MAAO,0BACPU,QAAS,UAEX,CACEO,KAAM,WACNgiB,MAAO,CAAC,yCACRliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,iBACPU,QAAS,UAEX,CACEO,KAAM,iBACNgiB,MAAO,CAAC,6CAEV,CACEhiB,KAAM,mBACNgiB,MAAO,CACL,mCACA,yBACA,mCACA,yDACA,2BAEFliB,kBAAmB,KACnBhB,MAAO,sBACPC,MAAO,kBACPU,QAAS,UAEX,CACEO,KAAM,YACNgiB,MAAO,CAAC,wBACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,oBACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,iDACA,uEACA,4IACA,mCACA,2BACA,kCACA,uDACA,6BACA,4BACA,mBACA,yCACA,mBACA,eACA,mCACA,kCACA,iDACA,+CAEFliB,kBAAmB,KACnBhB,MAAO,sBACPC,MAAO,kBACPU,QAAS,UAEX,CACEO,KAAM,eACNgiB,MAAO,CAAC,+CACRliB,kBAAmB,KACnBhB,MAAO,cACPC,MAAO,2BACPU,QAAS,SAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,4DACA,iEAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,oBACPU,QAAS,OAEX,CACEO,KAAM,sBACNgiB,MAAO,CACL,0DACA,qDACA,mDACA,8DACA,+DACA,6DAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,sBACPU,QAAS,OAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,gCACA,2EACA,cACA,0DACA,+BACA,8CACA,yCACA,iCACA,iEACA,2BACA,kCACA,+BACA,iBACA,oCACA,4BACA,iCACA,0FACA,sCACA,kDAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,8BACPU,QAAS,UAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,8DACA,oCACA,4BACA,uCAEFliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,sBACPU,QAAS,OAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,uDACA,8CAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,sBACPU,QAAS,WAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,qCACA,6BACA,gEACA,6FACA,+DAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,6BACPU,QAAS,UAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,iDACA,8CAEFliB,kBAAmB,KACnBhB,MAAO,sCACPC,MAAO,yBACPU,QAAS,MAEX,CACEO,KAAM,mBACNgiB,MAAO,CAAC,qCACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,6BACPU,QAAS,UAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,0BACA,oCACA,yCACA,6CACA,sDACA,kCACA,8BACA,4BACA,4CACA,oCACA,oCACA,wCACA,gCACA,sJAEFliB,kBAAmB,KACnBhB,MAAO,eACPC,MAAO,yBACPU,QAAS,OAEX,CACEO,KAAM,QACNgiB,MAAO,CAAC,oCACRliB,kBAAmB,KACnBhB,MAAO,MACPC,MAAO,sBACPU,QAAS,SAEX,CACEO,KAAM,OACNgiB,MAAO,CACL,sCACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,8BACPU,QAAS,MAEX,CACEO,KAAM,mBACNgiB,MAAO,CAAC,gDACRliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,2BACPU,QAAS,SAEX,CACEO,KAAM,sBACNgiB,MAAO,CACL,2DACA,yBACA,8DACA,yBAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,gBACPU,QAAS,aAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,+BACA,+BACA,0BACA,SACA,8BACA,4BACA,2BAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,iBACPU,QAAS,WAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,6BACA,+BACA,sEAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,wBACPU,QAAS,SAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,gDACA,iCAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,yBACPU,QAAS,SAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,6EACA,4BAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,sBACPU,QAAS,SAEX,CACEO,KAAM,cACNgiB,MAAO,CAAC,iBAAkB,oBAAqB,uBAC/CliB,kBAAmB,KACnBhB,MAAO,+BACPC,MAAO,qBACPU,QAAS,OAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,gCACA,4BACA,mCACA,eAEFliB,kBAAmB,KACnBhB,MAAO,+BACPC,MAAO,wBACPU,QAAS,UAEX,CACEO,KAAM,uBACNgiB,MAAO,CACL,sBACA,UACA,qCAEFliB,kBAAmB,KACnBhB,MAAO,iCACPC,MAAO,sBACPU,QAAS,OAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,wBACA,+BACA,8BACA,oBACA,8BAEFliB,kBAAmB,KACnBhB,MAAO,0BACPC,MAAO,sBACPU,QAAS,OAEX,CACEO,KAAM,SACNgiB,MAAO,CACL,kBACA,cACA,yBACA,oBACA,8BACA,kBAEFliB,kBAAmB,KACnBhB,MAAO,2BACPC,MAAO,iBACPU,QAAS,SAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,2BACA,uBACA,0BACA,0BACA,0BACA,uBACA,wBACA,2BAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,sBACPU,QAAS,MAEX,CACEO,KAAM,UACNgiB,MAAO,CACL,yBACA,mCACA,gCACA,kCACA,qDACA,qCACA,4CACA,oCACA,0CACA,qCACA,+CACA,4CACA,sBACA,sBAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,gBACPU,QAAS,UAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,gBACA,oCACA,2CACA,8DACA,2BACA,qBACA,0BAEFliB,kBAAmB,KACnBhB,MAAO,iBACPC,MAAO,eACPU,QAAS,eAEX,CACEO,KAAM,UACNgiB,MAAO,CACL,iDACA,4BACA,oBACA,mDACA,qDACA,qBACA,sBACA,oBACA,yBACA,UACA,iCACA,mCAEFliB,kBAAmB,KACnBhB,MAAO,2BACPC,MAAO,eACPU,QAAS,WAEX,CACEO,KAAM,YACNgiB,MAAO,CAAC,8BACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,kBACPU,QAAS,WAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,0CACA,mCACA,0FAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,wBACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,kBACA,mEACA,8EACA,oDACA,qDACA,uDAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,oBACPU,QAAS,MAEX,CACEO,KAAM,yCACNgiB,MAAO,CACL,sCACA,uEACA,6CACA,wBAEFliB,kBAAmB,KACnBhB,MAAO,yBACPC,MAAO,gBACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CAAC,4BAA6B,UACrCliB,kBAAmB,KACnBhB,MAAO,0BACPC,MAAO,kBACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CAAC,oDACRliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,wBACPU,QAAS,OAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,6BACA,uFACA,yFAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,kBACPU,QAAS,SAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,kDACA,2CACA,8CACA,kDACA,wDAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,sBA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AM,eACNgiB,MAAO,CACL,2CACA,+BACA,oDACA,qEACA,yCAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,gCACPU,QAAS,OAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,6BACA,mCACA,sCAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,wBACPU,QAAS,WAEX,CACEO,KAAM,qBACNgiB,MAAO,CAAC,8BACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,4DACA,oEAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,aACPU,QAAS,UAEX,CACEO,KAAM,UACNgiB,MAAO,CAAC,sDACRliB,kBAAmB,KACnBhB,MAAO,QACPC,MAAO,uBACPU,QAAS,SAEX,CAAEO,KAAM,gBAAiBgiB,MAAO,CAAC,+BACjC,CACEhiB,KAAM,oCACNgiB,MAAO,CACL,mBACA,4BACA,yBACA,OACA,mCACA,gEACA,WACA,iCACA,+CACA,oBACA,sDACA,iCACA,SACA,wDACA,yDACA,0DACA,iDACA,cACA,oCACA,+EACA,6DACA,wCACA,kBACA,kDACA,2BACA,kCACA,0BAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,yBACPU,QAAS,WAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,iDACA,oDACA,kCACA,qCACA,0CACA,uDACA,6DACA,eACA,8CACA,4BACA,eACA,mCACA,6DACA,aACA,yCACA,mEACA,gDACA,wCAEFliB,kBAAmB,KACnBhB,MAAO,gBACPC,MAAO,uBACPU,QAAS,OAEX,CACEO,KAAM,gBACNgiB,MAAO,CAAC,yBAA0B,wBAClCljB,MAAO,UACPW,QAAS,MACTK,kBAAmB,MAErB,CACEE,KAAM,aACNgiB,MAAO,CACL,sEAEFljB,MAAO,YACPgB,kBAAmB,MAErB,CACEE,KAAM,iBACNgiB,MAAO,CAAC,cAAe,oBACvBliB,kBAAmB,KACnBhB,MAAO,QACPC,MAAO,qBACPU,QAAS,aAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,YACA,uBACA,4CACA,8BACA,2BACA,4CACA,0CACA,0BACA,mEACA,0DACA,0BAEFliB,kBAAmB,KACnBhB,MAAO,4BACPC,MAAO,iBACPU,QAAS,SAEX,CACEO,KAAM,UACNgiB,MAAO,CACL,2BACA,oBACA,yBACA,oBACA,8CACA,+BACA,WACA,oBACA,4BACA,iFACA,oBACA,qBACA,mBACA,8BAEFliB,kBAAmB,KACnBhB,MAAO,gBACPC,MAAO,iBACPU,QAAS,SAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,sEAEFliB,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,6BACNgiB,MAAO,CAAC,sCACRliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,0BACPU,QAAS,YAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,oDACA,6CAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,kBACPU,QAAS,SAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,wDACA,0BACA,0EACA,qDAEFliB,kBAAmB,KACnBhB,MAAO,qBACPC,MAAO,kBACPU,QAAS,OAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,oEACA,2CACA,kCAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,wBACPU,QAAS,SAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,qCACA,4CAEFliB,kBAAmB,KACnBhB,MAAO,cACPC,MAAO,mBACPU,QAAS,SAEX,CACEO,KAAM,mBACNgiB,MAAO,CAAC,2BAA4B,2BACpCliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,wBACPU,QAAS,UAEX,CAIEO,KAAM,cACNgiB,MAAO,CACL,qDACA,0DACA,yCAEA,iDACA,wDACA,8DACA,yDACA,8CACA,4CACA,kDACA,0DACA,sDACA,uDACA,8CACA,+EACA,+CACA,2DACA,uDACA,iDACA,8DACA,wDACA,yCACA,6CACA,yDACA,6DACA,2DACA,qDACA,sDACA,gDACA,iEACA,wDACA,0DACA,+CACA,oDACA,kDACA,yCACA,6CACA,gDACA,mEACA,qDACA,iDACA,2CACA,+CACA,uDACA,gEACA,wDACA,+CACA,gEAEFliB,kBAAmB,KACnBhB,MAAO,MACPC,MAAO,6CACPU,QAAS,UAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,2CACA,+BAGJ,CACEhiB,KAAM,cACNgiB,MAAO,CACL,gDACA,sBACA,kEAEFliB,kBAAmB,KACnBL,QAAS,MACTX,MAAO,cAET,CACEkB,KAAM,YACNgiB,MAAO,CAAC,cAAe,eAAgB,iBAEzC,CACEhiB,KAAM,gBACNgiB,MAAO,CACL,kDACA,4BACA,mDACA,wCACA,wBAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,sBACPU,QAAS,SAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,gEACA,wDACA,4DAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,uBACPU,QAAS,UAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,0CACA,iFACA,2CACA,mDACA,UACA,mCAEFliB,kBAAmB,KACnBhB,MAAO,OACPW,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,2BACA,yBACA,2BACA,uEACA,sDACA,2DACA,6CACA,4CACA,2FACA,iDACA,qCACA,kBACA,mCACA,mBACA,kBACA,aACA,uBACA,wEACA,2BACA,eACA,0BACA,mCACA,mBACA,uBACA,+EACA,sEACA,6CACA,qDAEFljB,MAAO,OAEPC,MAAO,iBACPU,QAAS,OAEX,CAEEO,KAAM,eACNgiB,MAAO,CACL,gEACA,4EACA,2DACA,kCACA,8EACA,mCACA,8DACA,qEAEA,8EACA,uEAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,sBACNgiB,MAAO,CACL,kCACA,+DACA,uDACA,wDAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,yBACPU,QAAS,WAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,mCACA,yCAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,eACPU,QAAS,UAEX,CAAEO,KAAM,iBAAkBgiB,MAAO,CAAC,+BAClC,CACEhiB,KAAM,iBACNgiB,MAAO,CACL,8FACA,uCAGJ,CACEhiB,KAAM,kBACNgiB,MAAO,CAAC,+CAEV,CAAEhiB,KAAM,QAASgiB,MAAO,CAAC,iBACzB,CACEhiB,KAAM,iBACNgiB,MAAO,CACL,6BACA,mBACA,+EACA,aACA,mFAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,wBACPU,QAAS,OAEX,CACEO,KAAM,mBACNgiB,MAAO,CAEL,oCACA,iCACA,8BAEA,wCACA,wCAGA,gBACA,oCAEA,kCAEA,oCAEA,iCACA,gCACA,qCAEA,8BACA,YACA,sBAEA,qCACA,qCACA,iCACA,wCACA,iCACA,iCAEA,qCACA,kCACA,2CACA,aAEA,8BAEA,qEACA,gCACA,gCACA,iDAEA,8BACA,6BACA,kCAEFliB,kBAAmB,KACnBf,MAAO,6BACPU,QAAS,OAEX,CACEO,KAAM,oBACNgiB,MAAO,CAAC,2DACRliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,cACPU,QAAS,OAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,0GAEFliB,kBAAmB,KACnBhB,MAAO,YACPW,QAAS,SAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,oCACA,2EACA,sBAEFviB,QAAS,QACTK,kBAAmB,KACnBhB,MAAO,cAET,CACEkB,KAAM,iBACNgiB,MAAO,CAAC,2DAEV,CACEhiB,KAAM,gBACNgiB,MAAO,CACL,qBACA,mBACA,gBACA,yBACA,kFACA,qDACA,4DACA,oEACA,qDACA,sBAEA,6CAEA,uBACA,sBACA,8CACA,4DACA,mCACA,uBAEFljB,MAAO,gBAEPC,MAAO,iBAET,CACEiB,KAAM,mBACNgiB,MAAO,CACL,kCACA,+BACA,aAIJ,CACEhiB,KAAM,6BACNgiB,MAAO,CAAC,wCACRliB,kBAAmB,KACnBhB,MAAO,8BACPW,QAAS,OAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,iCACA,+BACA,sBACA,sBACA,mBACA,oCACA,oCAEFliB,kBAAmB,KACnBhB,MAAO,qBACPC,MAAO,2BACPU,QAAS,OAEX,CACEO,KAAM,QACNgiB,MAAO,CACL,+BACA,4EAEFljB,MAAO,YACPC,MAAO,qBAGT,CACEiB,KAAM,gBACNgiB,MAAO,CAAC,4CAA6C,sBACrDliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,cACPU,QAAS,UAEX,CACEO,KAAM,sBACNgiB,MAAO,CACL,qCACA,SACA,mCACA,kCACA,2CACA,+BACA,+BACA,UACA,mBAEFliB,kBAAmB,KACnBhB,MAAO,qBACPC,MAAO,qBACPU,QAAS,QAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,oDACA,oDACA,sDAGJ,CACEhiB,KAAM,cACNgiB,MAAO,CACL,kBACA,mBACA,wBACA,wBACA,oBACA,wBAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,sBACPU,QAAS,WAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,UACA,mBACA,UACA,mBACA,eACA,QACA,gBAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,gBACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,oCACA,0BACA,iCACA,iDAEFliB,kBAAmB,KACnBhB,MAAO,uBACPC,MAAO,2BACPU,QAAS,UAEX,CACEO,KAAM,QACNgiB,MAAO,CAAC,uCACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,+CACA,qBACA,oCACA,iCACA,+CACA,4BAEFliB,kBAAmB,KACnBhB,MAAO,yBACPC,MAAO,kBACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,qDACA,wFACA,uBACA,6CACA,iDACA,kEACA,0CAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,sBACPU,QAAS,MAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,wCACA,8CACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,wBACPU,QAAS,UAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,2CACA,yBACA,yCACA,8CACA,qDACA,oDACA,6CACA,iCACA,yDACA,gCACA,2DACA,qFACA,oDACA,0DACA,4EACA,8CACA,0BAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,sBACPU,QAAS,UAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,mCACA,sCACA,mCACA,0BACA,sDACA,yBACA,sCACA,8CACA,gCACA,4CAEFliB,kBAAmB,KACnBhB,MAAO,sBACPC,MAAO,sBACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,sBACA,mCACA,4BACA,6BACA,gCACA,wCACA,4CACA,oCACA,6BAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,uBACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,0BACA,sBACA,4BACA,OACA,iCAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,eACPU,QAAS,UAEX,CACEO,KAAM,SACNgiB,MAAO,CACL,0CACA,+CACA,uCAIJ,CACEhiB,KAAM,iBACNgiB,MAAO,CACL,qDACA,wCACA,+EAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,sBACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,4BACA,0EACA,uDAEFliB,kBAAmB,KACnBhB,MAAO,cACPC,MAAO,iBACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,uBACA,sBACA,+BACA,0CACA,cACA,YACA,6BACA,uCAEFljB,MAAO,OACPC,MAAO,eACPU,QAAS,OAEX,CAAEO,KAAM,mBAAoBgiB,MAAO,IACnC,CACEhiB,KAAM,aACNgiB,MAAO,CACL,0BACA,sBACA,qBAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,mBACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,sCACA,sBACA,8BACA,qCACA,gBACA,iBACA,4BACA,mDACA,uDACA,0CAEFliB,kBAAmB,KACnBhB,MAAO,WACPC,MAAO,iCACPU,QAAS,OAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,wCACA,0CACA,uCAEFliB,kBAAmB,KACnBhB,MAAO,WACPC,MAAO,qBACPU,QAAS,UAEX,CACEO,KAAM,iBACNgiB,MAAO,CAAC,gBACRliB,kBAAmB,KACnBhB,MAAO,cACPC,MAAO,eACPU,QAAS,UAEX,CACEO,KAAM,UACNgiB,MAAO,CAAC,+BAAgC,4BACxCliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,4BACPU,QAAS,MAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,2BACA,mDAEFliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,4BACPU,QAAS,OAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,iBACA,kCACA,oCACA,wCACA,0BACA,0CACA,+CAEFliB,kBAAmB,KACnBhB,MAAO,cACPC,MAAO,qBACPU,QAAS,WAEX,CACEO,KAAM,aACNgiB,MAAO,CAAC,iBACRliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,OAEX,CACEO,KAAM,8BACNgiB,MAAO,CAAC,kCAEV,CACEhiB,KAAM,iBACNgiB,MAAO,CACL,iCACA,yCAEFviB,QAAS,QACTX,MAAO,mBACPgB,kBAAmB,MAErB,CACEE,KAAM,WACNgiB,MAAO,CACL,4DACA,SACA,oDAGJ,CACEhiB,KAAM,iBACNgiB,MAAO,CACL,yHACA,0DACA,yCACA,6DAEFliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,SAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,wCACA,6CACA,yDAEFliB,kBAAmB,KACnBhB,MAAO,iCACPC,MAAO,oBACPU,QAAS,uBAEX,CACEO,KAAM,iBACNgiB,MAAO,CAAC,qBACRliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,eACPU,QAAS,OAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,gCACA,4BACA,mCACA,0BAEFliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,aACPU,QAAS,sBAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,yCACA,uBACA,oEACA,mCACA,uDAEFliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,iCACPU,QAAS,SAEX,CACEO,KAAM,cACNgiB,MAAO,CAAC,4BAA6B,yBACrCliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,oBACPU,QAAS,OAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,wCACA,6BACA,mCACA,+BACA,0DACA,iDACA,yCACA,4EACA,mDACA,kDACA,2BACA,aACA,iCACA,0FACA,kDACA,8BACA,iCAGJ,CACEhiB,KAAM,iBACNgiB,MAAO,CACL,2BACA,2BACA,6BACA,0BAEA,2BACA,0BACA,0BACA,2BAEFliB,kBAAmB,KACnBhB,MAAO,qBACPW,QAAS,UAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,0CACA,mCACA,wDACA,2BACA,iBACA,oCACA,yBAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,qBACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CAAC,uCACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,qBACPU,QAAS,WAEX,CACEO,KAAM,yBACNgiB,MAAO,CAAC,mBAEV,CACEhiB,KAAM,gBACNgiB,MAAO,CACL,qCACA,0EACA,0CACA,2CACA,wCACA,8BACA,oBACA,oFACA,wFACA,aACA,4CACA,+BACA,kCACA,gCACA,4EACA,wDAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,wBACPU,QAAS,OAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,oDACA,yCACA,iEAEFliB,kBAAmB,KACnBhB,MAAO,QACPC,MAAO,qCACPU,QAAS,OAEX,CACEO,KAAM,sBACNgiB,MAAO,CACL,mEACA,6DAEFliB,kBAAmB,KACnBhB,MAAO,6BACPC,MAAO,8BACPU,QAAS,OAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,sBACA,sCACA,wBACA,oBACA,wBAEA,yBACA,6BACA,0BAEFliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,0BACPU,QAAS,OAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,kCACA,sBACA,sCACA,kCACA,+BACA,0BACA,sCACA,+CAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,yBACPU,QAAS,OAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,4BACA,6BACA,8CACA,4CACA,0CAEFliB,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,yDACA,8BACA,gEACA,6BACA,2BACA,iCACA,2BACA,mCACA,4BACA,kCACA,8BACA,8CACA,iCACA,4BACA,sCACA,qCACA,6BAEFliB,kBAAmB,KACnBhB,MAAO,gCACPW,QAAS,WAEX,CACEO,KAAM,2BACNgiB,MAAO,CACL,wCACA,gDACA,6DAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,wBACNgiB,MAAO,CACL,qCACA,0DACA,+CACA,+CAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,gBACPU,QAAS,UAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,wDACA,+BACA,2CAEFliB,kBAAmB,KACnBhB,MAAO,WACPC,MAAO,WACPU,QAAS,WAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,2CACA,gCACA,wCACA,uBAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,iBACPU,QAAS,WAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,2DACA,iCACA,qCACA,mCACA,uCACA,8BACA,uCACA,sCACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,qBACPU,QAAS,WAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,uCACA,4DACA,oCACA,sCAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,mCACA,gCACA,qDAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,iBACPU,QAAS,WAGX,CAAEO,KAAM,cAAegiB,MAAO,IAC9B,CACEhiB,KAAM,eACNgiB,MAAO,CAAC,mCACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,WAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,8BACA,+BACA,0BAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,qBACPU,QAAS,WAEX,CACEO,KAAM,sBACNgiB,MAAO,CACL,6BACA,uCAEFljB,MAAO,kBACPC,MAAO,OACPU,QAAS,WAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,gDACA,mCAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,OACPU,QAAS,WAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,sDACA,wBACA,8BAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,WAEX,CACEO,KAAM,QACNgiB,MAAO,CACL,UACA,uDACA,0BAEFljB,MAAO,YACPC,MAAO,YACPU,QAAS,WAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,wCACA,yBACA,qBAEFljB,MAAO,OACPC,MAAO,OACPU,QAAS,WAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,qBACA,0BACA,2CAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,aACPU,QAAS,UAEX,CACEO,KAAM,uBACNgiB,MAAO,CACL,4DACA,6BACA,uEAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,MAEX,CACEO,KAAM,eACNgiB,MAAO,CAAC,gDAEV,CACEhiB,KAAM,uBACNgiB,MAAO,CACL,sCACA,6CACA,qCAGJ,CACEhiB,KAAM,cACNgiB,MAAO,CACL,2DACA,8DACA,2DACA,qEACA,gCACA,gCAEA,8DAEA,uDAEA,sDACA,sDACA,4DAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CAAEO,KAAM,cAAegiB,MAAO,CAAC,uBAC/B,CACEhiB,KAAM,cACNgiB,MAAO,CAEL,sBACA,qBACA,wBACA,yBACA,yBAGJ,CACEhiB,KAAM,SACNgiB,MAAO,CACL,mEACA,gFACA,yCAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,WAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,oCACA,4BACA,cACA,6BAEFliB,kBAAmB,KACnBhB,MAAO,yBACPC,MAAO,aACPU,QAAS,OAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,gCACA,qCACA,mBAEFliB,kBAAmB,KACnBhB,MAAO,eACPC,MAAO,YACPU,QAAS,cAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,8BACA,wBACA,6CACA,qCACA,mCACA,6CAEFliB,kBAAmB,KACnBhB,MAAO,yBACPC,MAAO,4BACPU,QAAS,OAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,+BACA,iCACA,oCAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,qBACPU,QAAS,OAEX,CACEO,KAAM,gBACNgiB,MAAO,CAAC,mBAAoB,gCAC5BliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,eACPU,QAAS,OAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,uDACA,2CAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,aACPU,QAAS,OAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,iDACA,2CACA,2CAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,QAEX,CAAEO,KAAM,UAAWgiB,MAAO,CAAC,sBAC3B,CACEhiB,KAAM,qBACNgiB,MAAO,CACL,uDACA,2CACA,+CACA,qBACA,2CAGJ,CACEhiB,KAAM,cACNgiB,MAAO,CACL,yDACA,qDACA,8DAEA,8CACA,yDAEA,gEAEA,iCACA,uBACA,kCACA,yEAEA,iDAEA,sBAEA,0BAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,YACPU,QAAS,WAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,8CACA,2CACA,6CACA,0CACA,4BACA,wCACA,yCACA,yCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCAEA,kDACA,8CACA,iCACA,iCACA,iCACA,iCACA,mCACA,yBACA,4DACA,8CAEA,6BACA,uCACA,iCACA,4BAEA,0CAEA,iCACA,iCACA,8CAEA,uCACA,iDAEA,6DAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAGX,CACEO,KAAM,qBACNgiB,MAAO,CACL,mCACA,mCAEA,oDACA,oEAEA,mCACA,4CACA,mCAEA,2BAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,QACNgiB,MAAO,CACL,wBACA,8BACA,sDAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,eACNgiB,MAAO,CAAC,gCACRliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,yBACPU,QAAS,SAEX,CACEO,KAAM,uBACNgiB,MAAO,CAAC,aACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,4BACNgiB,MAAO,CAAC,mBACRliB,uBAAmBjG,EACnBiF,MAAO,SACPC,MAAO,gBAET,CACEiB,KAAM,UACNgiB,MAAO,CAAC,sCAEV,CACEhiB,KAAM,UACNgiB,MAAO,CACL,wBAEFliB,uBAAmBjG,EACnBiF,MAAO,MACPC,MAAO,cACPU,QAAS,SAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,8CACA,mCAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,WAEX,CACEO,KAAM,6BACNgiB,MAAO,CACL,mDACA,6DACA,4DAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,wBACPU,QAAS,YAEX,CACEO,KAAM,cACNgiB,MAAO,CAAC,sBAAuB,sBAAuB,aACtDliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,UACPU,QAAS,UAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,oDACA,wCACA,yCACA,kBACA,oEACA,iEACA,0CACA,mFACA,iFACA,sBACA,kDAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,0BACPU,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,iCACA,uFACA,0FAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,aACPU,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,4EACA,qDACA,8EACA,4BACA,sEACA,gCACA,gGACA,6BAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,wBACPU,QAAS,SAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,kEACA,kCACA,wCACA,2CACA,sCAEFliB,kBAAmB,KACnBhB,MAAO,gBACPC,MAAO,sBACPU,QAAS,WAEX,CACEO,KAAM,4BACNgiB,MAAO,CACL,kBACA,uBACA,mDAEFliB,uBAAmBjG,EACnBiF,MAAO,YACPC,MAAO,qBACPU,aAAS5F,GAEX,CACEmG,KAAM,kBACNgiB,MAAO,CACL,yFACA,qDACA,iGACA,mDACA,sCACA,oDACA,+EAEFliB,kBAAmB,KACnBhB,MAAO,WACPC,MAAO,sBACPU,QAAS,WAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,uCACA,sCACA,gCACA,0BACA,4BACA,2BACA,mCACA,qCACA,gCACA,gCAEFliB,uBAAmBjG,EACnBiF,MAAO,UACPC,MAAO,oCACPU,aAAS5F,GAEX,CACEmG,KAAM,YACNgiB,MAAO,CACL,mBACA,qBACA,iBACA,4BACA,sBAEFliB,uBAAmBjG,EACnBiF,MAAO,mBACPC,MAAO,aACPU,aAAS5F,GAEX,CACEmG,KAAM,MACNgiB,MAAO,CACL,sCACA,yCAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,cACPU,QAAS,MAEX,CACEO,KAAM,8BACNgiB,MAAO,CACL,+EAGJ,CACEhiB,KAAM,mBACNgiB,MAAO,CACL,aACA,sDACA,iCAEFliB,kBAAmB,KACnBhB,MAAO,UACPC,MAAO,YACPU,QAAS,WAEX,CACEO,KAAM,mCACNgiB,MAAO,CACL,kBACA,6CACA,0BAEA,kCACA,2BACA,yBACA,oHAEFliB,kBAAmB,KACnBhB,MAAO,QACPC,MAAO,MACPU,QAAS,aAEX,CACEO,KAAM,iBACNgiB,MAAO,CAAC,mCACRliB,kBAAmB,KACnBhB,MAAO,SACPC,MAAO,OACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,+DACA,6BACA,+EAEFliB,kBAAmB,KACnBhB,MAAO,WACPC,MAAO,YACPU,QAAS,UAEX,CACEO,KAAM,wBACNgiB,MAAO,CACL,gEACA,kCACA,+BACA,6CAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,yBACPU,QAAS,OAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,yCACA,mBACA,iCAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,yBACPU,QAAS,MAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,qCACA,6BACA,4CACA,8BACA,8BAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,sBACPU,QAAS,OAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,+DACA,sDACA,yDACA,0DACA,6DACA,6DACA,mBACA,4DACA,oCACA,qCACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,WACPC,MAAO,+BACPU,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,6DACA,gCACA,sBACA,iEACA,yBACA,gDACA,oDAEFliB,kBAAmB,KACnBhB,MAAO,cACPC,MAAO,aACPU,QAAS,SAEX,CAEEO,KAAM,6BACNgiB,MAAO,CACL,cACA,SACA,eACA,sBACA,gBACA,yCACA,SAEFliB,kBAAmB,KACnBhB,MAAO,WACPC,MAAO,YACPU,QAAS,UAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,wCACA,6CACA,6CACA,8CACA,eACA,qBAGJ,CACEhiB,KAAM,cACNgiB,MAAO,CACL,+BACA,6BACA,qCACA,oBACA,iDAEFliB,kBAAmB,KACnBhB,MAAO,WACPW,QAAS,UAEX,CAGEO,KAAM,mBACNgiB,MAAO,CACL,uEACA,mDAEA,mCAEA,0EACA,oBACA,oDACA,gCACA,+CACA,6DACA,oDACA,iBACA,8CACA,0CACA,+CAEFliB,kBAAmB,KACnBf,MAAO,YACPD,MAAO,uBAET,CACEkB,KAAM,UACNgiB,MAAO,CACL,+CACA,oCACA,8DAEFliB,kBAAmB,KACnBhB,MAAO,WACPC,MAAO,yBACPU,QAAS,kBAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,+BACA,kCACA,sCAGJ,CAAEhiB,KAAM,qBAAsBgiB,MAAO,CAAC,cACtC,CACEhiB,KAAM,aACNgiB,MAAO,CACL,qBACA,oBACA,mBACA,4BACA,sBAEFljB,MAAO,aACPgB,kBAAmB,KACnBL,QAAS,UAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,mDACA,0CAGJ,CACEhiB,KAAM,eACNgiB,MAAO,CACL,iBACA,kCACA,8BAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,sBACPU,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,gDACA,oDACA,iCAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,wBACPU,QAAS,cAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,iCACA,0CAGJ,CACEhiB,KAAM,gBACNgiB,MAAO,CACL,0CACA,qCACA,2BACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,gCACPW,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CAAC,oCAAqC,8BAC7CjjB,MAAO,gBACPU,QAAS,OAEX,CACEO,KAAM,QACNgiB,MAAO,CACL,8CACA,aACA,4CAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,kBACPU,QAAS,UAEX,CACEO,KAAM,gBACNgiB,MAAO,CAAC,kBACRliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,oBACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CAAC,2DACRliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,wBACPU,QAAS,YAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,kBACA,yCACA,mCAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,yBACPU,QAAS,SAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,sCACA,uCACA,yDAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,2BACA,+BACA,gCACA,gCACA,2BACA,2BACA,6BACA,sCACA,aACA,kDAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,yBACPU,QAAS,WAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,2CACA,iDAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,eACPU,QAAS,MAEX,CACEO,KAAM,SACNgiB,MAAO,CAAC,mCACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,4BACPU,QAAS,YAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,qEACA,6BACA,yEACA,oEAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,eACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,gCACA,+CAEFliB,kBAAmB,KACnBL,QAAS,SACTX,MAAO,YAET,CACEkB,KAAM,oBACNgiB,MAAO,CACL,4DACA,4EACA,2BACA,wCACA,yCAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,yBACPU,QAAS,WAEX,CACEO,KAAM,sBACNgiB,MAAO,CACL,gDACA,4EAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,wBACPU,QAAS,OAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,2BACA,aACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,MACPC,MAAO,MACPU,QAAS,WAEX,CACEO,KAAM,sBACNgiB,MAAO,CACL,sDACA,6CACA,qCACA,mFACA,4BACA,kDACA,8EAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,wBACPU,QAAS,UAEX,CACEO,KAAM,UACNgiB,MAAO,CACL,8CACA,oCAIJ,CACEhiB,KAAM,mBACNgiB,MAAO,CACL,6CACA,mDACA,8CAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,qEACA,4BACA,wDAEFliB,kBAAmB,KACnBL,QAAS,UAEX,CACEO,KAAM,QACNgiB,MAAO,CACL,6BACA,uBACA,wBAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,UACPU,QAAS,UAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,6BACA,mCACA,+DAEFliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,mBACPU,QAAS,UAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,sBACA,uBACA,6BAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,cACPU,QAAS,UAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,gFACA,+CAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,YACPU,QAAS,UAEX,CACEO,KAAM,aACNgiB,MAAO,CAAC,2BAA4B,iCACpCliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,YACPU,QAAS,UAEX,CACEO,KAAM,YACNgiB,MAAO,CAAC,4BACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,cACPU,QAAS,SAEX,CACEO,KAAM,wBACNgiB,MAAO,CACL,oEACA,iEAEFljB,MAAO,YACPC,MAAO,cACPU,QAAS,SAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,oCACA,uCACA,iEAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,WAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,8DACA,4BAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,WAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,+CACA,uDACA,0CACA,sEAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,WAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,iCACA,sCACA,sCAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,WACPU,QAAS,WAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,oCACA,6BACA,8BACA,gCACA,iCAEFliB,kBAAmB,KACnBhB,MAAO,eACPC,MAAO,SACPU,QAAS,UAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,kEACA,iDACA,4DACA,4CACA,iDACA,oEACA,uEAGJ,CACEhiB,KAAM,iBACNgiB,MAAO,CACL,2EAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,YACPU,QAAS,kBAEX,CACEO,KAAM,gBACNgiB,MAAO,CAAC,sDACRliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,QACPU,QAAS,OAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,eACA,mBACA,wCAEFliB,kBAAmB,KACnBhB,MAAO,QACPC,MAAO,aACPU,QAAS,OAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,0FACA,+DAEFliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,SAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,8CACA,gEACA,8BACA,iDACA,8CACA,oCACA,WACA,oBACA,wDAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,YACPU,QAAS,OAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,6DACA,8EACA,cACA,0DACA,6DACA,sCACA,+BACA,8DAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,YACPU,QAAS,UAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,gCACA,6EACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,YACPU,QAAS,OAEX,CACEO,KAAM,4BACNgiB,MAAO,CAAC,4BAA6B,2BACrCliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,aACPU,QAAS,SAEX,CACEO,KAAM,cACNgiB,MAAO,CAAC,oBACRliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,WACPU,QAAS,MAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,gDACA,6FACA,+DACA,0EACA,4CACA,qCACA,iDACA,sCACA,4BACA,0CACA,8BAEFliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,YACPU,QAAS,OAEX,CACEO,KAAM,qBACNgiB,MAAO,CAAC,mBAAoB,8CAC5BliB,kBAAmB,KACnBhB,MAAO,MACPC,MAAO,OACPU,QAAS,UAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,kCACA,sCACA,0BAEFliB,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,SACNgiB,MAAO,CACL,qEACA,oDACA,iCACA,0DAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,UACPU,QAAS,WAEX,CACEO,KAAM,aACNgiB,MAAO,CAAC,iDACRliB,kBAAmB,KACnBhB,MAAO,SACPC,MAAO,YACPU,QAAS,OAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,2BACA,yDACA,mDACA,oCACA,6BACA,uDACA,8BACA,sDACA,mEACA,iBACA,qBACA,6FAEFliB,kBAAmB,KACnBhB,MAAO,kBACPC,MAAO,WACPU,QAAS,OAEX,CACEO,KAAM,qBACNgiB,MAAO,CAAC,kCAAmC,mBAE7C,CACEhiB,KAAM,mBACNgiB,MAAO,CACL,2BACA,0BACA,+DACA,wCAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,aACPU,QAAS,SAEX,CACEO,KAAM,OACNgiB,MAAO,CACL,iBACA,wBACA,6BAEFliB,kBAAmB,KACnBhB,MAAO,UACPC,MAAO,kBACPU,QAAS,WAEX,CACEO,KAAM,4BACNgiB,MAAO,CACL,4CACA,8DAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,kBAEX,CACEO,KAAM,YACNgiB,MAAO,CAAC,6BAA8B,6BACtCliB,uBAAmBjG,EACnBiF,MAAO,MACPC,MAAO,WACPU,QAAS,eAEX,CACEO,KAAM,YACNgiB,MAAO,CAAC,0CACRliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,cACPU,QAAS,OAEX,CACEO,KAAM,UACNgiB,MAAO,CAAC,iCACRliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,eACPU,QAAS,UAEX,CACEO,KAAM,UACNgiB,MAAO,CAAC,0CAA2C,uBACnDliB,uBAAmBjG,EACnBiF,MAAO,sBACPC,MAAO,OACPU,QAAS,SAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,8DACA,yBAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,aACPU,QAAS,kBAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,2CACA,mCACA,2CACA,eACA,6CAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,oBACPU,QAAS,kBAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,sDACA,kDACA,qDAEA,2EACA,8CACA,2DACA,4BAEFliB,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,iBACNgiB,MAAO,CACL,+BACA,wBACA,2BAEFliB,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,cACNgiB,MAAO,CAAC,4DACRliB,kBAAmB,KACnBhB,MAAO,WACPW,QAAS,OAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,iFACA,uCAEFliB,kBAAmB,KACnBf,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,oCACA,yCAEA,kCACA,sBACA,6BACA,+CACA,4CACA,gDACA,gCACA,6CACA,sDACA,0CACA,mCACA,+CAEA,uCACA,sCACA,mDACA,2CACA,oDACA,iDACA,+CACA,gDAEA,uCACA,gCAIA,mBACA,uCACA,uCACA,uCAGA,wCACA,wCACA,wCACA,wCAGA,wCACA,uCAGA,wCACA,wCACA,sCACA,sCAGA,gDACA,kCACA,uCACA,sCACA,wCACA,uCACA,uCACA,wCACA,sCAGA,sCACA,sCACA,sCACA,sCAGA,wCACA,sCACA,wCACA,wCACA,yCAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,WAGX,CACEO,KAAM,eACNgiB,MAAO,CAAC,+BACRliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,8BACPU,QAAS,OAEX,CACEO,KAAM,sBACNgiB,MAAO,CACL,mDACA,mEACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,2BACPU,QAAS,cAEX,CAEEO,KAAM,SACNgiB,MAAO,CACL,+DACA,iDACA,wDACA,6DACA,oFAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,kBAEX,CAEEO,KAAM,YACNgiB,MAAO,CACL,+CAEA,mDACA,qDACA,8GACA,mDACA,yBACA,4CACA,8CACA,kCACA,uCACA,mDACA,uCACA,qCACA,6BACA,6BAEA,sEACA,WAEA,yFACA,iDACA,mDACA,oDACA,iDACA,mCAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,WAEX,CACEO,KAAM,UACNgiB,MAAO,CACL,gDACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,iCACPU,QAAS,SAEX,CACEO,KAAM,qBACNgiB,MAAO,CAAC,2DAEV,CACEhiB,KAAM,OACNgiB,MAAO,CACL,gDACA,iBACA,gBACA,aACA,oBACA,sBACA,uBACA,sBACA,mBACA,mBACA,2DACA,qBACA,wBACA,oBACA,kBACA,oBACA,aACA,gBACA,kBACA,kBACA,yBACA,yBACA,mCACA,gBACA,sCACA,kBACA,kBACA,kBACA,4BACA,eACA,4BACA,yBACA,6BACA,wCACA,0BACA,mBACA,uDACA,eACA,oCACA,qBACA,uBACA,sBACA,wBACA,wBACA,kFACA,uBACA,gBACA,cACA,oBACA,eACA,6CACA,WACA,YACA,uBACA,oBACA,aACA,sBACA,cACA,gBACA,gBACA,gBACA,kBACA,+BACA,kBACA,wBACA,cACA,cACA,wBACA,sBACA,kBACA,iBACA,mBACA,gBACA,gBACA,sBACA,0BACA,kCACA,uBACA,sBACA,aACA,eACA,eACA,cACA,kBACA,iBACA,mBACA,mBACA,mBACA,wBACA,8BACA,4BACA,+BACA,4BACA,8BACA,qBACA,0BACA,eACA,qBACA,sBACA,kCACA,wBACA,gBACA,qCACA,4CACA,sBACA,qBACA,iBACA,qBACA,mBACA,kBACA,oBACA,oBACA,oBACA,gBACA,gBACA,8BACA,oBACA,uBACA,YACA,6BACA,UACA,YACA,WACA,aACA,0BACA,iBACA,iBAEFviB,QAAS,YAEX,CACEO,KAAM,qBACNgiB,MAAO,CAAC,6DACRliB,kBAAmB,KACnBL,QAAS,UACTX,MAAO,YACPC,MAAO,YAET,CACEiB,KAAM,kBACNgiB,MAAO,CACL,yEACA,oEAEFliB,kBAAmB,KACnBf,MAAO,eAET,CACEiB,KAAM,eACNgiB,MAAO,CACL,0CACA,qCAEFliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,MAEX,CACEO,KAAM,wBACNgiB,MAAO,CACL,+BACA,+DAEFliB,kBAAmB,KACnBL,QAAS,eACTX,MAAO,YACPC,MAAO,QAET,CACEiB,KAAM,eACNgiB,MAAO,CACL,oCACA,oCAGJ,CACEhiB,KAAM,qBACNgiB,MAAO,CACL,wDACA,4CACA,6BACA,2CACA,2CACA,4CACA,4EACA,sEACA,4EACA,sCACA,sCACA,mEACA,gBACA,mBACA,uEACA,mCACA,eACA,mBACA,iDACA,oDACA,wCACA,uCACA,oBACA,qCACA,kEACA,0BACA,qBACA,0DACA,sDACA,UAEFliB,kBAAmB,KACnBhB,MAAO,kCACPW,QAAS,UAEX,CACEO,KAAM,oBACNgiB,MAAO,CACL,wCACA,oDACA,YAEFliB,kBAAmB,KACnBhB,MAAO,aACPC,MAAO,wBACPU,QAAS,WAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,6BACA,4BACA,6CACA,iCAEFliB,kBAAmB,KACnBhB,MAAO,sBACPC,MAAO,wBACPU,QAAS,MAEX,CACEO,KAAM,YACNgiB,MAAO,CAAC,oBAAqB,2CAC7BliB,uBAAmBjG,EACnBiF,MAAO,aACPC,MAAO,kBACPU,aAAS5F,GAEX,CACEmG,KAAM,oBACNgiB,MAAO,CAAC,0CACRliB,uBAAmBjG,EACnBiF,MAAO,aACPC,MAAO,sBACPU,aAAS5F,GAEX,CACEmG,KAAM,OACNgiB,MAAO,CAAC,0BACRliB,uBAAmBjG,EACnBiF,MAAO,gBACPC,MAAO,sBACPU,aAAS5F,GAEX,CACEmG,KAAM,gBACNgiB,MAAO,CAAC,sCACRliB,kBAAmB,KACnBhB,MAAO,OACPC,MAAO,WACPU,QAAS,OAEX,CACEO,KAAM,iBACNgiB,MAAO,CAAC,uCACRliB,kBAAmB,KACnBhB,MAAO,mBACPC,MAAO,qBACPU,QAAS,YAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,2DACA,qCAEFliB,kBAAmB,KACnBhB,MAAO,UACPW,QAAS,OAEX,CACEO,KAAM,gBACNgiB,MAAO,CAEL,6BACA,4DACA,iCACA,2DAEFliB,kBAAmB,KACnBhB,MAAO,wBACPC,MAAO,wBACPU,QAAS,WAEX,CACEO,KAAM,UACNgiB,MAAO,CACL,2BACA,8CAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,UACPU,QAAS,SAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,wBACA,6CACA,oBACA,sBAEFliB,kBAAmB,KACnBhB,MAAO,kCACPW,QAAS,MAEX,CACEO,KAAM,cACNgiB,MAAO,CACL,wBACA,sCACA,oCACA,oCAEFliB,kBAAmB,KACnBhB,MAAO,YACPW,QAAS,OAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,0CACA,iCACA,2CAEFliB,kBAAmB,KACnBhB,MAAO,MACPW,QAAS,OAEX,CACEO,KAAM,SACNgiB,MAAO,CACL,wBACA,gBACA,yBACA,0BACA,iCAEFliB,kBAAmB,KACnBhB,MAAO,aACPW,QAAS,SAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,8BACA,mEACA,qDACA,+BACA,oCAEA,iDAEFliB,kBAAmB,KACnBhB,MAAO,aACPW,QAAS,aAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,uCACA,sEACA,2CAEFviB,QAAS,SAEX,CACEO,KAAM,qBACNgiB,MAAO,CACL,gDACA,iCACA,qCACA,wCACA,oCACA,gDACA,sDACA,oEACA,2EAEFliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,aAEX,CACEO,KAAM,uBACNgiB,MAAO,CACL,8DACA,+DAEFliB,kBAAmB,KACnBhB,MAAO,WACPW,QAAS,YAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,4CACA,wBAEFviB,QAAS,QACTX,MAAO,QACPgB,kBAAmB,MAErB,CACEE,KAAM,gBACNgiB,MAAO,CAAC,oBAAqB,0BAC7BliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,SAEX,CACEO,KAAM,kBACNgiB,MAAO,CACL,8CACA,sEAEFliB,kBAAmB,KACnBL,QAAS,QACTX,MAAO,oBAET,CACEkB,KAAM,eACNgiB,MAAO,CACL,yCACA,8DACA,yDAEFliB,kBAAmB,KACnBL,QAAS,QACTX,MAAO,oBAET,CACEkB,KAAM,mBACNgiB,MAAO,CACL,4BACA,6CACA,aACA,kBAEFliB,kBAAmB,KACnBL,QAAS,QACTX,MAAO,oBAET,CACEkB,KAAM,aACNgiB,MAAO,CACL,mCACA,uCACA,8BACA,iBACA,oCAEFliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,SAEX,CACEO,KAAM,kBACNgiB,MAAO,CAAC,yBAA0B,8BAClCliB,kBAAmB,KACnBL,QAAS,MACTX,MAAO,QAET,CAAEkB,KAAM,QAASgiB,MAAO,CAAC,mBAAoB,uBAC7C,CACEhiB,KAAM,eACNgiB,MAAO,CACL,6BACA,iDACA,uBACA,YACA,4EAGJ,CACEhiB,KAAM,cACNgiB,MAAO,CACL,eACA,2BACA,4BACA,8BAGJ,CAAEhiB,KAAM,QAASgiB,MAAO,CAAC,kBAAmB,+BAC5C,CACEhiB,KAAM,cACNgiB,MAAO,CACL,aACA,mDACA,4DACA,wBACA,2DAGJ,CACEhiB,KAAM,gBACNgiB,MAAO,CACL,oCACA,sCACA,0BACA,4DACA,4CAGJ,CACEhiB,KAAM,cACNgiB,MAAO,CACL,+CACA,4CACA,iDACA,iDACA,yDACA,mBACA,oBACA,uCACA,cACA,gCACA,wCAEA,qDAGJ,CACEhiB,KAAM,gBACNgiB,MAAO,CACL,sBACA,kCACA,gCACA,gCACA,8BACA,sCAGJ,CACEhiB,KAAM,eACNgiB,MAAO,CACL,sBACA,kCACA,uCACA,mBACA,0BACA,mCACA,wBACA,2BAEA,iEAGJ,CACEhiB,KAAM,oBACNgiB,MAAO,CACL,wBACA,6CACA,+BACA,6CACA,yEAGJ,CACEhiB,KAAM,MACNgiB,MAAO,CACL,+BACA,qDACA,yCACA,gBACA,qCACA,sBACA,0CACA,qBACA,YAEFljB,MAAO,OACPgB,kBAAmB,KACnBL,QAAS,UAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,+BACA,sCACA,mCACA,uBACA,sCACA,2BAEFviB,QAAS,MACTK,kBAAmB,MAErB,CACEE,KAAM,qBACNgiB,MAAO,CACL,wBACA,+BACA,yBACA,uHACA,uBACA,6BACA,qDAEFviB,QAAS,QACTK,kBAAmB,MAErB,CACEE,KAAM,kBACNgiB,MAAO,CACL,iCACA,kEACA,sCAGJ,CACEhiB,KAAM,aACNgiB,MAAO,CACL,2DACA,uDACA,kFACA,iHACA,qCACA,6DAEFliB,kBAAmB,KACnBL,QAAS,SAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,2CACA,2BACA,sBACA,4BAEFliB,kBAAmB,KACnBL,QAAS,MACTX,MAAO,YAET,CACEkB,KAAM,iBACNgiB,MAAO,CACL,4EACA,uBACA,yCACA,yBACA,gDAGJ,CACEhiB,KAAM,aACNgiB,MAAO,CACL,yFACA,eAGJ,CACEhiB,KAAM,eACNgiB,MAAO,CACL,2BACA,0BACA,0BACA,6BACA,sCACA,2BACA,4BACA,gCACA,iCACA,8BACA,2BACA,sCAGJ,CACEhiB,KAAM,kBACNgiB,MAAO,CACL,4CACA,4CACA,0EACA,wEACA,iEACA,sHACA,wCACA,iCAGJ,CACEhiB,KAAM,EAAAqL,uBACN2uD,SAAU,UACVh4C,MAAO,CACL,qBACA,6DACA,aACA,yBACA,WACA,2CACA,yBACA,uCACA,iCACA,4CAEA,aACA,eACA,yCACA,mBACA,0CACA,6BACA,kCACA,qBACA,+BACA,6BAEA,6CACA,kBACA,wDACA,mBACA,sBACA,2DACA,qBACA,kBACA,qBACA,iCAEA,kEACA,kCACA,gEACA,iDACA,wBACA,wBACA,+BACA,wBACA,mBACA,sBAEA,2DACA,uBAEA,aACA,0BACA,oCACA,sBACA,2BACA,oCAEA,oBAEA,oCACA,8BACA,4BACA,wBACA,0CACA,4CACA,uBACA,gDACA,4CACA,+CAEA,0CACA,wCACA,aACA,mCACA,aACA,+BAEA,aACA,2CACA,2BACA,yCAEA,sBACA,gBACA,4EACA,2CACA,iBACA,0BACA,gCACA,4BACA,mCACA,sBAEA,iCACA,sDACA,gBACA,2BACA,gCACA,4BACA,4CACA,mCACA,sCACA,qBAEA,kBACA,mCACA,yFACA,wBACA,oDACA,8BACA,gCACA,oBACA,gDACA,gCACA,qBAGJ,CACEhiB,KAAM,OACNgiB,MAAO,CACL,sCACA,0CAGJ,CACEhiB,KAAM,QACNgiB,MAAO,CACL,+CACA,mDACA,mCACA,gCAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,oBAEX,CACEO,KAAM,gBACNgiB,MAAO,CAAC,wBAAyB,wBACjCliB,kBAAmB,KACnBhB,MAAO,MACPW,QAAS,OAEX,CACEO,KAAM,WACNgiB,MAAO,CACL,kDACA,4BACA,2CACA,wBACA,iCACA,4BAEFliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,OAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,8BACA,wBACA,wBACA,0BAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,WACPU,QAAS,UAEX,CACEO,KAAM,aACNgiB,MAAO,CACL,0BACA,wBACA,uDACA,sBAEFliB,kBAAmB,KACnBhB,MAAO,MACPW,QAAS,MAEX,CACEO,KAAM,4CACNgiB,MAAO,CACL,uDACA,6BAIJ,CACEhiB,KAAM,gBACNgiB,MAAO,CACL,eACA,wBACA,wCAEFliB,kBAAmB,KACnBhB,MAAO,wCACPW,QAAS,OAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,kEACA,mEACA,4EACA,6DACA,wEACA,mEACA,oEACA,mEACA,qEACA,kEAEA,wCACA,qCAEFliB,kBAAmB,KACnBL,QAAS,OAEX,CACEO,KAAM,mBACNgiB,MAAO,CACL,iDACA,oDAEFliB,kBAAmB,KACnBL,QAAS,OAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,YACA,yDACA,6FAEFliB,kBAAmB,KACnBL,QAAS,QACTX,MAAO,cAET,CACEkB,KAAM,0CACNgiB,MAAO,CACL,0BACA,gGACA,0EACA,iFAEFliB,kBAAmB,KACnBhB,MAAO,kBACPW,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CACL,eACA,gDACA,mCACA,sBACA,8BAGJ,CACEhiB,KAAM,aACNgiB,MAAO,CACL,oCACA,mBACA,4DAEFliB,kBAAmB,KACnBhB,MAAO,aACPW,QAAS,OAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,oFACA,yBAEFliB,kBAAmB,KACnBhB,MAAO,mBACPW,QAAS,SAEX,CACEO,KAAM,gBACNgiB,MAAO,CACL,uBACA,yBACA,qCACA,+BACA,8BACA,sCAEFliB,kBAAmB,KACnBL,QAAS,YACTX,MAAO,SAET,CACEkB,KAAM,aACNgiB,MAAO,CAAC,eAAgB,4BACxBliB,kBAAmB,KACnBhB,MAAO,WACPW,QAAS,WAEX,CACEO,KAAM,+BACNgiB,MAAO,CACL,wBACA,qEACA,4CAEFliB,kBAAmB,KACnBL,QAAS,OAEX,CACEO,KAAM,eACNgiB,MAAO,CAAC,YAAa,wBACrBliB,kBAAmB,KACnBL,QAAS,MACTX,MAAO,QAET,CACEkB,KAAM,iBACNgiB,MAAO,CACL,gEACA,8DACA,2CACA,gCAGJ,CACEhiB,KAAM,SACNgiB,MAAO,CACL,8BACA,wBACA,8BACA,8BACA,kCACA,eACA,iBACA,kDACA,4BACA,kDAGJ,CACEhiB,KAAM,gBACNgiB,MAAO,CACL,wBACA,2BACA,mDACA,0BACA,+BAEA,8BACA,qCAGJ,CACEhiB,KAAM,uBACNgiB,MAAO,CACL,2CACA,kDACA,gCACA,qCACA,oCAGJ,CACEhiB,KAAM,mBACNgiB,MAAO,CACL,YACA,eACA,0BACA,wDACA,gCACA,oFACA,oCACA,0CACA,uBACA,sFAEA,eACA,mCACA,wBACA,yCACA,0CACA,wCACA,YACA,iCACA,gBACA,oBAEA,mBACA,uBACA,0BACA,mBACA,mBACA,eACA,kDACA,wCACA,qEACA,cAEA,mEACA,kCACA,UACA,uDACA,kCACA,6BACA,gCACA,gDACA,yBACA,yCAEA,uCACA,2BACA,oBACA,8BACA,gEACA,iEACA,2BACA,4BACA,oDACA,+CAEA,sEACA,qBACA,4CACA,wCACA,gCACA,2CACA,gCACA,wCACA,+DACA,8BAEA,aACA,2CACA,wCACA,mCACA,4BACA,gDACA,8BACA,qDACA,sDACA,wBACA,gDAEA,2BACA,oBACA,6DACA,WACA,wBACA,yCACA,sDACA,YACA,kBACA,yBACA,0DAEA,4CACA,qBACA,0BACA,QACA,WACA,sBACA,oBACA,uCACA,0BACA,mDAEA,6BAEA,gBACA,oCACA,+BAIA,qCACA,YAGJ,CACEhiB,KAAM,eACNgiB,MAAO,CACL,gDACA,oDACA,8DAEFliB,kBAAmB,KACnBL,QAAS,kBAEX,CACEO,KAAM,YACNgiB,MAAO,CACL,wBACA,6BACA,2BAEFliB,kBAAmB,KACnBhB,MAAO,YACPC,MAAO,UACPU,QAAS,SAGX,CACEO,KAAM,WACNgiB,MAAO,CACL,e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","file":"static/js/main.8324d37b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([273,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import path from \"path\";\nimport queryString from \"querystring\";\n\nimport { CATALOG_PREFIX } from \"./config\";\n\nexport function updateQueryString(newParams) {\n  // Merge new params with current query string\n  const params = {\n    ...queryString.parse(window.location.search.substr(1)),\n    ...newParams,\n  };\n  // Delete undefined properties\n  Object.keys(params).forEach(\n    (key) => params[key] === undefined && delete params[key],\n  );\n  // Object.keys(params).forEach(key => params[key] = decodeURIComponent(params[key]));\n  const stateUrl = \"?\" + queryString.stringify(params).replace(/%20/g, \"+\");\n  // Update address bar URL\n  window.history.replaceState(null, \"\", stateUrl);\n}\n\nexport function unlockAudioContext(context) {\n  return new Promise((resolve) => {\n    if (context.state === \"suspended\") {\n      const events = [\"touchstart\", \"touchend\", \"mousedown\", \"mouseup\"];\n      const unlock = () => {\n        context.resume().then(() => {\n          events.forEach((event) =>\n            document.body.removeEventListener(event, unlock),\n          );\n          resolve();\n        });\n      };\n      events.forEach((event) =>\n        document.body.addEventListener(event, unlock, false),\n      );\n    } else {\n      resolve();\n    }\n  });\n}\n\nexport function titlesFromMetadata(metadata) {\n  if (metadata.formatted) {\n    return metadata.formatted;\n  }\n\n  const title = allOrNone(metadata.artist, \" - \") + metadata.title;\n  const subtitle =\n    [metadata.game, metadata.system].filter((x) => x).join(\" - \") +\n    allOrNone(\" (\", metadata.copyright, \")\");\n  return { title, subtitle };\n}\n\nexport function allOrNone(...args) {\n  let str = \"\";\n  for (let i = 0; i < args.length; i++) {\n    if (!args[i]) return \"\";\n    str += args[i];\n  }\n  return str;\n}\n\nexport function getFilepathFromUrl(url) {\n  return url.replace(CATALOG_PREFIX, \"/\");\n}\n\nexport function ensureEmscFileWithUrl(emscRuntime, filename, url) {\n  if (emscRuntime.FS.analyzePath(filename).exists) {\n    console.debug(`${filename} exists in Emscripten file system.`);\n    return Promise.resolve(filename);\n  } else {\n    console.log(`Downloading ${filename}...`);\n    return fetch(url)\n      .then((response) => {\n        // Because fetch doesn't reject on 404\n        if (!response.ok)\n          throw Error(`HTTP ${response.status} while fetching ${filename}`);\n        return response;\n      })\n      .then((response) => response.arrayBuffer())\n      .then((buffer) => {\n        const arr = new Uint8Array(buffer);\n        return ensureEmscFileWithData(emscRuntime, filename, arr, true);\n      });\n  }\n}\n\nexport function ensureEmscFileWithData(\n  emscRuntime,\n  filename,\n  uint8Array,\n  forceWrite = false,\n) {\n  if (!forceWrite && emscRuntime.FS.analyzePath(filename).exists) {\n    console.debug(`${filename} exists in Emscripten file system.`);\n    return Promise.resolve(filename);\n  } else {\n    console.debug(`Writing ${filename} to Emscripten file system...`);\n    const dir = path.dirname(filename);\n    emscRuntime.FS.mkdirTree(dir);\n    emscRuntime.FS.writeFile(filename, uint8Array);\n    return new Promise((resolve, reject) => {\n      emscRuntime.FS.syncfs(false, (err) => {\n        if (err) {\n          console.error(\"Error synchronizing to indexeddb.\", err);\n          reject(err);\n        } else {\n          console.debug(`Synchronized ${filename} to indexeddb.`);\n          resolve(filename);\n        }\n      });\n    });\n  }\n}\n\nexport function remap(number, fromLeft, fromRight, toLeft, toRight) {\n  return (\n    toLeft + ((number - fromLeft) / (fromRight - fromLeft)) * (toRight - toLeft)\n  );\n}\n\nexport function remap01(number, toLeft, toRight) {\n  return remap(number, 0, 1, toLeft, toRight);\n}\n","import { flag } from \"country-emoji\";\nimport * as React from \"react\";\nimport { ReactNode } from \"react\";\nimport styled from \"styled-components\";\n\nexport const Flags = styled.span`\n  display: inline-flex;\n  align-items: center;\n  margin-right: 4px;\n`;\n\nexport const GenreList = styled.div`\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  color: #999;\n`;\n\nexport const GenreItem = styled.span`\n  cursor: default;\n`;\n\nexport const getUniqueStyles = (genre?: string, style?: string): string[] => {\n  const styles = new Set<string>();\n  if (genre) {\n    genre\n      .split(\",\")\n      .map((s) => s.trim())\n      .forEach((s) => styles.add(s));\n  }\n  if (style) {\n    style\n      .split(\",\")\n      .map((s) => s.trim())\n      .forEach((s) => styles.add(s));\n  }\n  return Array.from(styles);\n};\n\nexport const getEmojis = (country?: string): ReactNode[] => {\n  if (!country) return [];\n  const countries = country.split(\",\").map((c) => c.trim());\n  return countries.map((c) => <Flags key={c}>{flag(c)}</Flags>);\n};\n\nexport interface HasMetadata {\n  composerBirthYear?: number;\n  country?: string;\n  genre?: string;\n  style?: string;\n}\n\nexport const hasMetadata = (corpus: HasMetadata): boolean => {\n  return Boolean(\n    corpus.composerBirthYear || corpus.country || corpus.genre || corpus.style,\n  );\n};\n\nexport const formatComposerName = (slug: string): string => {\n  return slug\n    .split(\"_\")\n    .map((word) =>\n      word\n        .split(\"-\")\n        .map((part) => part.charAt(0).toUpperCase() + part.slice(1))\n        .join(\"-\"),\n    )\n    .join(\" \");\n};\n","import {\n  faClockRotateLeft,\n  faGlobe,\n  faHouse,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { Redirect, useHistory, useLocation, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { slugify } from \"transliteration\";\nimport { AppContext } from \"../../AppContext\";\nimport { Snippet } from \"../analysis\";\nimport { NewTonicSymbol } from \"../AnalysisGrid\";\nimport { RelatedCorporaDisplay } from \"../CompositionTitle\";\nimport { MUSESCORE_TOP_100_SLUG } from \"../corpora/corpora\";\nimport { CorpusLink } from \"../corpora/CorpusLink\";\nimport ChordStairs from \"../legends/ChordStairs\";\nimport { FoldablePianoLegend } from \"../legends/PianoLegend\";\nimport SnippetList from \"../SnippetList\";\nimport { NARRATIVES } from \"../SongNarrative\";\nimport { Toggle } from \"../Toggle\";\nimport { TOP_100_COMPOSERS } from \"../top100Composers\";\nimport { BEYOND_CHAPTER_GROUPS, BEYOND_CHAPTERS } from \"./beyondChapters\";\nimport {\n  CHAPTER_GROUPS,\n  CHAPTERS,\n  DOUBLE_TONIC_CHAPTER_TITLE,\n  MODULATIONS_CHAPTER_TITLE,\n  s,\n} from \"./chapters\";\n\nconst NAV_HORIZONTAL_GAP = 15;\nconst NAV_CHORD_STAIRS_SCALE = 0.6;\n\ntype EnhancedSnippet = Snippet & {\n  composerSlug: string;\n};\n\nconst BookContainer = styled.div`\n  width: 97%;\n  padding: 20px;\n  color: #ddd;\n  margin: 0 auto 100px auto;\n  position: relative;\n`;\n\nconst Title = styled.h1`\n  font-size: 24px;\n`;\n\nconst GroupContainer = styled.div`\n  margin-bottom: 80px;\n`;\n\nconst ComposersGrid = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 40px;\n  margin-bottom: 30px;\n`;\n\nconst ComposerItem = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`;\n\nconst ComposerLink = styled.a`\n  color: white;\n  text-decoration: none;\n  cursor: pointer;\n  display: inline;\n`;\n\nconst ComposerWrapper = styled.div`\n  transition: all 0.3s ease;\n  padding: 4px 0px;\n  border-radius: 4px;\n`;\n\nconst SnippetContainer = styled.div`\n  margin: 0px 30px 30px 0px;\n`;\n\nconst ComposerList = styled.ul`\n  list-style: none;\n  padding-left: 0;\n  margin: 0;\n`;\n\nconst ComposerListItem = styled.li`\n  margin-left: 0;\n  white-space: nowrap;\n  transition: all 0.3s ease;\n  padding: 4px 0px;\n  border-radius: 4px;\n`;\n\nconst ChapterSelector = styled.div.attrs({ className: \"ChapterSelector\" })`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 10px ${NAV_HORIZONTAL_GAP}px;\n  padding: 0;\n  margin: 0;\n  overflow: visible;\n`;\n\nconst ChapterTitleTooltip = styled.div<{\n  isSelected?: boolean;\n  isHovered?: boolean;\n}>`\n  background: rgba(0, 0, 0, 0.9);\n  padding: 0px 8px;\n  white-space: nowrap;\n  pointer-events: none;\n  z-index: ${(props) => {\n    return props.isHovered ? 20000 : 10000;\n  }};\n  opacity: ${(props) => {\n    return props.isSelected || props.isHovered ? 1 : 0;\n  }};\n  color: ${(props) => (props.isSelected ? \"white\" : \"#aaa\")};\n`;\n\nconst ChapterButton = styled.button<{ isSelected: boolean }>`\n  background: black;\n  color: white;\n  cursor: pointer;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  padding: 0;\n  border-radius: 0;\n  overflow: visible;\n  height: 80px;\n  overflow: visible;\n\n  ${ChapterTitleTooltip} {\n    position: absolute;\n    top: 55px;\n    left: 50%;\n    transform: translateX(-50%);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 25px;\n    white-space: nowrap;\n  }\n\n  &:hover {\n    ${ChapterTitleTooltip} {\n      display: flex;\n    }\n  }\n`;\n\nconst NavChordWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: black;\n  position: relative;\n  height: 60px;\n  width: 100%;\n`;\n\nexport const ReadableTextBlock = styled.div`\n  min-width: 43em;\n  width: 43em;\n  color: white;\n  border-radius: 10px;\n  margin: 20px 0px 100px 0px;\n  position: relative;\n`;\n\nconst ComposerListColumn = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 0 3em;\n  font-size: 13px;\n  align-items: start;\n  align-content: flex-start;\n  justify-content: start;\n  min-width: 15em;\n`;\n\nconst TwoColumnLayout = styled.div`\n  display: flex;\n  gap: 3em;\n  margin: 0px 0px 100px 0px;\n  min-width: 43em;\n\n  @media (max-width: ${43 + 10 + 3}em) {\n    ${ComposerListColumn} {\n      display: none;\n    }\n  }\n`;\n\nexport const ComposerTitle: React.FC<{\n  composer: string;\n  displayTitle: string;\n  isVocal?: boolean;\n  style?: React.CSSProperties;\n}> = ({ composer, displayTitle, isVocal, style }) => (\n  <span style={style}>\n    <span style={{ color: \"#999\" }}>{composer}. </span>\n    <span style={{ color: \"white\" }}>\n      {displayTitle}\n      {/* {isVocal && <span style={{ marginLeft: \"4px\" }}></span>} */}\n    </span>\n  </span>\n);\n\nconst getChapterSlug = (chapter: string) => slugify(chapter.toLowerCase());\n\nexport const CompositionLink: React.FC<{\n  composer: (typeof TOP_100_COMPOSERS)[number];\n  onLinkClick?: (e: React.MouseEvent<HTMLAnchorElement>) => void;\n  showNarrativeIcon?: boolean;\n}> = ({ composer, onLinkClick, showNarrativeIcon = false }) => {\n  return (\n    <ComposerLink\n      href={`/f/${composer.slug}`}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      onClick={onLinkClick}\n    >\n      <ComposerTitle\n        composer={composer.composer}\n        displayTitle={composer.displayTitle}\n        isVocal={composer.isVocal}\n      />\n      {showNarrativeIcon && NARRATIVES[composer.slug] && (\n        <span style={{ marginLeft: \"12px\", color: \"#999\" }}>\n           {NARRATIVES[composer.slug].qa.length}\n        </span>\n      )}\n    </ComposerLink>\n  );\n};\n\nconst ChapterGroup = styled.div<{ isActive: boolean; hideHeader?: boolean }>`\n  display: inline-flex;\n  flex-direction: column;\n  width: fit-content;\n  min-width: min-content;\n  overflow: visible;\n\n  .group-header {\n    white-space: nowrap;\n    text-align: center;\n    color: ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n    font-size: 14px;\n    padding-bottom: 12px;\n    position: relative;\n    transition: color 0.3s ease;\n    width: 100%;\n    overflow: visible;\n    visibility: ${(props) => (props.hideHeader ? \"hidden\" : \"visible\")};\n\n    &::after {\n      content: \"\";\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      height: 8px;\n      border-top: 1px solid ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n      border-left: 1px solid ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n      border-right: 1px solid ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n      transition: border-color 0.3s ease;\n      visibility: ${(props) => (props.hideHeader ? \"hidden\" : \"visible\")};\n    }\n  }\n\n  .group-content {\n    display: flex;\n    flex-wrap: nowrap;\n    gap: ${NAV_HORIZONTAL_GAP}px;\n    overflow: visible;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n\n    &::-webkit-scrollbar {\n      display: none;\n    }\n  }\n`;\n\nconst findChapterForComposer = (\n  composerSlug: string,\n  chapters: typeof CHAPTERS,\n): string | null => {\n  return (\n    chapters.find((chapter) => chapter.composers.includes(composerSlug))\n      ?.title ?? null\n  );\n};\n\nconst ChapterArrow = styled.div`\n  position: absolute;\n  bottom: -20px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 1px;\n  height: 20px;\n  background: #666;\n  pointer-events: none;\n\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 0%;\n    left: 50%;\n    transform: translateX(-50%);\n    border-left: 3px solid transparent;\n    border-right: 3px solid transparent;\n    border-bottom: 4px solid #666;\n  }\n`;\n\nconst ModeToggle = styled.div`\n  position: absolute;\n  top: 0px;\n  right: 0px;\n`;\n\nconst Book: React.FC = () => {\n  const { slug } = useParams<{ slug?: string }>();\n  const history = useHistory();\n  const location = useLocation();\n  const appContext = React.useContext(AppContext);\n  const [hoveredChapter, setHoveredChapter] = React.useState<string | null>(\n    null,\n  );\n  const [hoveredComposerSlug, setHoveredComposerSlug] =\n    React.useState<string>(\"happy-birthday\");\n  const [hoveredColors, setHoveredColors] = useState<string[] | null>(null);\n  const [isBeyondMode, setIsBeyondMode] = useState(() =>\n    location.pathname.startsWith(\"/beyond\"),\n  );\n\n  // Keep mode in sync with URL\n  React.useEffect(() => {\n    const shouldBeBeyondMode = location.pathname.startsWith(\"/beyond\");\n    if (shouldBeBeyondMode !== isBeyondMode) {\n      setIsBeyondMode(shouldBeBeyondMode);\n    }\n  }, [location.pathname, isBeyondMode]);\n\n  React.useEffect(() => {\n    if (appContext.currentMidi?.slug) {\n      setHoveredComposerSlug(appContext.currentMidi.slug);\n    }\n  }, [appContext.currentMidi?.slug]);\n\n  if (!appContext) throw new Error(\"AppContext not found\");\n  const { analyses, eject } = appContext;\n  const [loadingSnippets, setLoadingSnippets] = React.useState<Set<string>>(\n    new Set(),\n  );\n\n  // Add handler for composer link clicks\n  const handleComposerLinkClick = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    eject(); // Eject the current player before navigating\n  };\n\n  // Handle snippet click with loading state\n  const handleSnippetClick = async (snippet: EnhancedSnippet) => {\n    const slug = snippet.composerSlug;\n    setLoadingSnippets((prev) => new Set([...prev, slug]));\n    try {\n      await appContext.handleSongClick(slug);\n      if (snippet.secondsSpan) {\n        const seekPosition = Math.max(0, (snippet.secondsSpan[0] - 1) * 1000);\n        appContext.seek(seekPosition);\n      }\n    } finally {\n      setLoadingSnippets((prev) => {\n        const next = new Set(prev);\n        next.delete(slug);\n        return next;\n      });\n    }\n  };\n\n  // Get chapters and groups based on mode\n  const currentChapters = isBeyondMode ? BEYOND_CHAPTERS : CHAPTERS;\n  const currentChapterGroups = isBeyondMode\n    ? BEYOND_CHAPTER_GROUPS\n    : CHAPTER_GROUPS;\n\n  // Get unique chapter titles\n  const chapterTitles = React.useMemo(() => {\n    return currentChapters.map((chapter) => chapter.title);\n  }, [currentChapters]);\n\n  // Find selected chapter based on slug\n  const selectedChapter = React.useMemo(() => {\n    if (!slug) return \"Intro\";\n    return (\n      chapterTitles.find(\n        (chapter) => getChapterSlug(chapter) === slug.toLowerCase(),\n      ) || \"Intro\"\n    );\n  }, [slug, chapterTitles]);\n\n  const hoveredComposerChapter = React.useMemo(() => {\n    return findChapterForComposer(hoveredComposerSlug, currentChapters);\n  }, [hoveredComposerSlug, currentChapters]);\n\n  // Redirect from root to /100/intro or /beyond/blues\n  if (!slug) {\n    const firstBeyondChapter = BEYOND_CHAPTERS[0]?.title || \"intro\";\n    return (\n      <Redirect\n        to={\n          isBeyondMode\n            ? `/beyond/${slugify(firstBeyondChapter.toLowerCase())}`\n            : \"/100/intro\"\n        }\n      />\n    );\n  }\n\n  // Handle chapter selection\n  const handleChapterSelect = (chapter: string) => {\n    eject(); // Add this line to eject MIDI before changing chapters\n    const newSlug = getChapterSlug(chapter);\n    history.push(`/${isBeyondMode ? \"beyond\" : \"100\"}/${newSlug}`);\n  };\n\n  // Add mode toggle handler\n  const handleModeToggle = () => {\n    eject();\n    setIsBeyondMode((prev) => !prev);\n    const firstBeyondChapter = BEYOND_CHAPTERS[0]?.title || \"intro\";\n    history.push(\n      `/${!isBeyondMode ? \"beyond\" : \"100\"}/${\n        !isBeyondMode ? slugify(firstBeyondChapter.toLowerCase()) : \"intro\"\n      }`,\n    );\n  };\n\n  const renderContent = () => {\n    const currentChapter = currentChapters.find(\n      (chapter) => chapter.title === selectedChapter,\n    );\n    if (!currentChapter) return null;\n\n    const currentSnippet = analyses[`f/${hoveredComposerSlug}`]?.snippets.find(\n      (s) => s.tag === \"book:index\",\n    );\n    const initialTonic =\n      currentSnippet?.frozenNotes.analysis.modulations[1] ?? 0;\n\n    return (\n      <>\n        <div style={{ marginTop: \"40px\" }}>\n          <FoldablePianoLegend\n            mode={currentChapter.mode}\n            setHoveredColors={setHoveredColors}\n            currentTonic={initialTonic}\n          />\n          {currentChapter.pretext &&\n            (currentChapter.title === \"Intro\" ? (\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  gap: \"10px\",\n                }}\n              >\n                <CompositionLink\n                  composer={TOP_100_COMPOSERS.find(\n                    (c) => c.slug === hoveredComposerSlug,\n                  )}\n                  onLinkClick={handleComposerLinkClick}\n                />\n\n                <div\n                  style={{\n                    display: \"flex\",\n                    gap: \"20px\",\n                    flexDirection: \"row\",\n                  }}\n                >\n                  <div\n                    style={{\n                      minHeight: \"300px\",\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                    }}\n                  >\n                    <SnippetList\n                      snippets={[\n                        analyses[`f/${hoveredComposerSlug}`]?.snippets\n                          .filter((snippet) => snippet.tag === \"book:index\")\n                          .pop(),\n                      ]\n                        .filter(Boolean)\n                        .map((snippet) => ({\n                          ...snippet,\n                          composerSlug: hoveredComposerSlug,\n                        }))}\n                      onSnippetClick={handleSnippetClick}\n                      loadingSnippets={loadingSnippets}\n                      isPreview={true}\n                      noteHeight={3}\n                      hoveredColors={hoveredColors}\n                    />\n                    <div\n                      style={{\n                        marginBottom: \"10px\",\n                        display: \"flex\",\n                        flexDirection: \"row\",\n                        gap: \"50px\",\n                      }}\n                    >\n                      {analyses[`f/${hoveredComposerSlug}`]?.tags && (\n                        <div\n                          style={{\n                            display: \"flex\",\n                            flexDirection: \"row\",\n                            gap: \"5px\",\n                            position: \"relative\",\n                            top: \"-3px\",\n                          }}\n                        >\n                          {analyses[`f/${hoveredComposerSlug}`].snippets\n                            .filter(\n                              (snippet: Snippet, index: number) =>\n                                snippet.tag !== \"book:index\" &&\n                                !snippet.tag.startsWith(\"last_chords\"),\n                            )\n                            .slice(0, 7)\n                            .map((snippet: Snippet, index: number) => (\n                              <div style={{ marginRight: \"20px\" }} key={index}>\n                                {s([snippet.tag] as any)}\n                              </div>\n                            ))}\n                        </div>\n                      )}\n                    </div>\n                    <RelatedCorporaDisplay\n                      slug={hoveredComposerSlug}\n                      horizontal={true}\n                      showMetadata={false}\n                    />\n                  </div>\n                </div>\n                <TwoColumnLayout>\n                  <ReadableTextBlock>\n                    {currentChapter.pretext()}\n                    <GroupContainer>\n                      <ComposersGrid>\n                        <ComposerWrapper>\n                          <CompositionLink\n                            composer={TOP_100_COMPOSERS.find(\n                              (c) => c.slug === \"happy-birthday\",\n                            )}\n                            onLinkClick={handleComposerLinkClick}\n                            showNarrativeIcon={true}\n                          />\n                        </ComposerWrapper>\n                      </ComposersGrid>\n                    </GroupContainer>\n                  </ReadableTextBlock>\n                  <ComposerListColumn>\n                    <div style={{ width: \"100%\", marginBottom: \"1em\" }}>\n                      <CorpusLink slug={MUSESCORE_TOP_100_SLUG} />\n                    </div>\n                    {TOP_100_COMPOSERS.slice(0, 100).map((composer) => (\n                      <div\n                        key={composer.slug}\n                        onMouseEnter={() =>\n                          setHoveredComposerSlug(composer.slug)\n                        }\n                        onMouseLeave={() =>\n                          setHoveredComposerSlug(\n                            appContext.currentMidi?.slug || \"happy-birthday\",\n                          )\n                        }\n                        style={{ cursor: \"pointer\" }}\n                      >\n                        <CompositionLink\n                          composer={composer}\n                          onLinkClick={(e) => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            const snippet = analyses[\n                              `f/${composer.slug}`\n                            ]?.snippets\n                              .filter((s) => s.tag === \"book:index\")\n                              .pop();\n                            if (snippet) {\n                              handleSnippetClick({\n                                ...snippet,\n                                composerSlug: composer.slug,\n                              });\n                            }\n                          }}\n                        />\n                      </div>\n                    ))}\n                  </ComposerListColumn>\n                </TwoColumnLayout>\n              </div>\n            ) : (\n              <ReadableTextBlock>{currentChapter.pretext()}</ReadableTextBlock>\n            ))}\n          {currentChapter.title !== \"Intro\" && (\n            <GroupContainer>\n              <ComposersGrid>\n                {currentChapter.composers\n                  .map((slug) => TOP_100_COMPOSERS.find((c) => c.slug === slug))\n                  .filter(\n                    (\n                      composer,\n                    ): composer is (typeof TOP_100_COMPOSERS)[number] =>\n                      composer !== undefined &&\n                      analyses[`f/${composer.slug}`]?.snippets?.some(\n                        (s) => s.tag === \"book:index\",\n                      ),\n                  )\n                  .map((composer) => {\n                    const snippets = (\n                      analyses[`f/${composer.slug}`]?.snippets || []\n                    )\n                      .filter((snippet) => snippet.tag === \"book:index\")\n                      .map((snippet) => ({\n                        ...snippet,\n                        composerSlug: composer.slug,\n                      }));\n\n                    return (\n                      <ComposerItem key={composer.slug}>\n                        <ComposerWrapper>\n                          <CompositionLink\n                            composer={composer}\n                            onLinkClick={handleComposerLinkClick}\n                            showNarrativeIcon={true}\n                          />\n                        </ComposerWrapper>\n                        {snippets.map((snippet) => (\n                          <SnippetContainer>\n                            <SnippetList\n                              snippets={[snippet]}\n                              onSnippetClick={handleSnippetClick}\n                              loadingSnippets={loadingSnippets}\n                              isPreview={true}\n                              noteHeight={3}\n                              hoveredColors={hoveredColors}\n                            />\n                          </SnippetContainer>\n                        ))}\n                      </ComposerItem>\n                    );\n                  })}\n              </ComposersGrid>\n\n              {currentChapter.composers\n                .map((slug) => TOP_100_COMPOSERS.find((c) => c.slug === slug))\n                .filter(\n                  (composer): composer is (typeof TOP_100_COMPOSERS)[number] =>\n                    composer !== undefined &&\n                    !analyses[`f/${composer.slug}`]?.snippets?.some(\n                      (s) => s.tag === \"book:index\",\n                    ),\n                ).length > 0 && (\n                <>\n                  <ComposerList>\n                    {currentChapter.composers\n                      .map((slug) =>\n                        TOP_100_COMPOSERS.find((c) => c.slug === slug),\n                      )\n                      .filter(\n                        (\n                          composer,\n                        ): composer is (typeof TOP_100_COMPOSERS)[number] =>\n                          composer !== undefined &&\n                          !analyses[`f/${composer.slug}`]?.snippets?.some(\n                            (s) => s.tag === \"book:index\",\n                          ),\n                      )\n                      .map((composer) => (\n                        <ComposerListItem key={composer.slug}>\n                          <CompositionLink\n                            composer={composer}\n                            onLinkClick={handleComposerLinkClick}\n                          />\n                        </ComposerListItem>\n                      ))}\n                  </ComposerList>\n                </>\n              )}\n            </GroupContainer>\n          )}\n        </div>\n      </>\n    );\n  };\n\n  return (\n    <BookContainer>\n      <div className=\"Book\" style={{ position: \"relative\" }}>\n        <Title>\n          {isBeyondMode\n            ? \"Visual Harmony Beyond the Top 100\"\n            : \"Visual Harmony of Top 100 Composers on MuseScore.com\"}\n        </Title>\n        <ModeToggle>\n          <Toggle\n            leftIcon={faHouse}\n            rightIcon={faGlobe}\n            isRight={isBeyondMode}\n            onToggle={handleModeToggle}\n            leftTitle=\"Top 100 Composers\"\n            rightTitle=\"Beyond Top 100\"\n          />\n        </ModeToggle>\n        <ChapterSelector>\n          {Object.entries(currentChapterGroups).map(\n            ([name, [startIndex, endIndex]]) => {\n              const groupChapters = currentChapters.slice(\n                startIndex - 1,\n                endIndex,\n              );\n              const isActive = groupChapters.some(\n                (chapter) => chapter.title === selectedChapter,\n              );\n              const hideHeader =\n                name.toLowerCase() === \"intro\" ||\n                name.toLowerCase() === \"style\";\n\n              return (\n                <ChapterGroup\n                  key={name}\n                  isActive={isActive}\n                  hideHeader={hideHeader}\n                >\n                  <div className=\"group-header\">{name}</div>\n                  <div className=\"group-content\">\n                    {groupChapters.map((chapter) => (\n                      <ChapterButton\n                        key={chapter.title}\n                        isSelected={selectedChapter === chapter.title}\n                        onClick={() => handleChapterSelect(chapter.title)}\n                        onMouseEnter={() => setHoveredChapter(chapter.title)}\n                        onMouseLeave={() => setHoveredChapter(null)}\n                      >\n                        <NavChordWrapper>\n                          {chapter.title === MODULATIONS_CHAPTER_TITLE ? (\n                            <div\n                              style={{\n                                position: \"relative\",\n                                width: \"65px\",\n                                height: \"45px\",\n                                overflow: \"hidden\",\n                              }}\n                            >\n                              <div\n                                style={{\n                                  position: \"absolute\",\n                                  top: \"10px\",\n                                  width: \"65px\",\n                                }}\n                              >\n                                <NewTonicSymbol\n                                  left={0}\n                                  number={1}\n                                  previousTonic={0}\n                                  modulationDiff={5}\n                                  tonicStart={5}\n                                />\n                              </div>\n                              <div\n                                style={{\n                                  position: \"absolute\",\n                                  top: \"25px\",\n                                  width: \"65px\",\n                                }}\n                              >\n                                <NewTonicSymbol\n                                  left={0}\n                                  number={1}\n                                  previousTonic={0}\n                                  modulationDiff={7}\n                                  tonicStart={7}\n                                />\n                              </div>\n                            </div>\n                          ) : chapter.title === DOUBLE_TONIC_CHAPTER_TITLE ? (\n                            <>\n                              <ChordStairs\n                                mode={{ title: \"\", chords: [\"vi\"] }}\n                                scale={NAV_CHORD_STAIRS_SCALE}\n                                playbackMode=\"no\"\n                              />\n                              <span style={{ margin: 3, fontSize: \"28px\" }}>\n                                =\n                              </span>\n                              <ChordStairs\n                                mode={{ title: \"\", chords: [\"i\"] }}\n                                scale={NAV_CHORD_STAIRS_SCALE}\n                                playbackMode=\"no\"\n                              />\n                            </>\n                          ) : chapter.title === \"Style\" ? (\n                            <FontAwesomeIcon\n                              icon={faClockRotateLeft}\n                              style={{ fontSize: \"20px\", color: \"white\" }}\n                            />\n                          ) : chapter.titleChords ? (\n                            <ChordStairs\n                              mode={{ title: \"\", chords: chapter.titleChords }}\n                              scale={NAV_CHORD_STAIRS_SCALE}\n                              playbackMode=\"no\"\n                            />\n                          ) : (\n                            chapter.title\n                          )}\n                        </NavChordWrapper>\n                        <ChapterTitleTooltip\n                          isSelected={selectedChapter === chapter.title}\n                          isHovered={\n                            hoveredChapter === chapter.title ||\n                            (hoveredComposerChapter === chapter.title &&\n                              selectedChapter === \"Intro\" &&\n                              hoveredComposerChapter !== \"Intro\")\n                          }\n                        >\n                          {chapter.title}\n                        </ChapterTitleTooltip>\n                        {hoveredComposerChapter === chapter.title &&\n                          selectedChapter === \"Intro\" &&\n                          hoveredComposerChapter !== \"Intro\" && (\n                            <ChapterArrow />\n                          )}\n                      </ChapterButton>\n                    ))}\n                  </div>\n                </ChapterGroup>\n              );\n            },\n          )}\n        </ChapterSelector>\n\n        {renderContent()}\n      </div>\n    </BookContainer>\n  );\n};\n\nexport default Book;\n","import { MAJOR_MODE, MINOR_MODE, STRICT_NATURAL_MINOR } from \"./legends/chords\";\n\nexport type Top100Composer = {\n  slug: string;\n  composer: string;\n  chords?: string[];\n  displayTitle: string;\n  isVocal?: boolean;\n};\n\nexport const TOP_100_COMPOSERS: Top100Composer[] = [\n  {\n    slug: \"river-flows-in-you\",\n    composer: \"Yiruma\",\n    displayTitle: \"River Flows in You\",\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n    composer: \"Joe Hisaishi\",\n    displayTitle: \"Merry-Go-Round of Life (from Howl's Moving Castle)\",\n  },\n  {\n    slug: \"Canon_in_D\",\n    composer: \"Johann Pachelbel\",\n    displayTitle: \"Canon in D major\",\n  },\n  {\n    slug: \"Clair_de_Lune__Debussy\",\n    composer: \"Claude Debussy\",\n    displayTitle: \"Clair de Lune\",\n  },\n  {\n    slug: \"Fr_Elise\",\n    composer: \"Ludwig van Beethoven\",\n    displayTitle: \"Fr Elise\",\n  },\n  {\n    slug: \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n    composer: \"Frdric Chopin\",\n    displayTitle: \"Nocturne in E-flat major, Op. 9 No. 2\",\n  },\n  {\n    slug: \"Gymnopdie_No._1__Satie\",\n    composer: \"Erik Satie\",\n    displayTitle: \"Gymnopdie No. 1\",\n  },\n  {\n    slug: \"Undertale_-_Megalovania_Piano_ver._3\",\n    composer: \"Toby Fox\",\n    displayTitle: \"Megalovania (from Undertale)\",\n  },\n  {\n    slug: \"Golden_Hour__JVKE_Updated_Ver.\",\n    composer: \"JVKE\",\n    displayTitle: \"Golden Hour\",\n    isVocal: true,\n  },\n  {\n    slug: \"Je_Te_Laisserai_Des_Mots_-_Patrick_Watson\",\n    composer: \"Patrick Watson\",\n    displayTitle: \"Je te laisserai des mots\",\n    isVocal: true,\n  },\n  {\n    slug: \"Hallelujah\",\n    composer: \"Leonard Cohen\",\n    displayTitle: \"Hallelujah\",\n    isVocal: true,\n  },\n  {\n    slug: \"Interstellar\",\n    composer: \"Hans Zimmer\",\n    displayTitle: \"Interstellar Main Theme\",\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"Another_Love__-_Tom_Odell_Professional\",\n    composer: \"Tom Odell\",\n    displayTitle: \"Another Love\",\n    isVocal: true,\n  },\n  {\n    slug: \"Sweden_Minecraft\",\n    composer: \"C418\",\n    displayTitle: \"Sweden (from Minecraft)\",\n  },\n  {\n    slug: \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\",\n    composer: \"Klaus Badelt\",\n    displayTitle: \"He's a Pirate (from Pirates of the Caribbean)\",\n  },\n  {\n    slug: \"game-of-thrones-main-piano\",\n    composer: \"Ramin Djawadi\",\n    displayTitle: \"Game of Thrones Main Theme\",\n  },\n  {\n    slug: \"someone-you-loved-lewis-capaldi\",\n    composer: \"Lewis Capaldi\",\n    displayTitle: \"Someone You Loved\",\n    isVocal: true,\n  },\n  {\n    slug: \"Ed_Sheeran_Perfect\",\n    composer: \"Ed Sheeran\",\n    displayTitle: \"Perfect\",\n    isVocal: true,\n  },\n  {\n    slug: \"Liebestraum_No._3_in_A_Major\",\n    composer: \"Franz Liszt\",\n    displayTitle: \"Liebestraum No. 3 in A-flat major\",\n  },\n  {\n    slug: \"Believer_-_Imagine_Dragons\",\n    composer: \"Imagine Dragons\",\n    displayTitle: \"Believer\",\n    chords: [\"i\", \"bVI\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\",\n    composer: \"John Legend\",\n    displayTitle: \"All of Me\",\n    isVocal: true,\n  },\n  {\n    slug: \"Mad_world_Piano\",\n    composer: \"Tears for Fears\",\n    displayTitle: \"Mad World\",\n    chords: [\"ii\", \"IV\", \"I\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n    composer: \"Paul de Senneville\",\n    displayTitle: \"Mariage d'Amour\",\n  },\n  {\n    slug: \"someone-like-you\",\n    composer: \"Adele\",\n    chords: MAJOR_MODE.chords,\n    displayTitle: \"Someone Like You\",\n    isVocal: true,\n  },\n  {\n    slug: \"my-heart-will-go-on\",\n    composer: \"James Horner\",\n    displayTitle: \"My Heart Will Go On (from Titanic)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\",\n    composer: \"Yugo Kanno\",\n    displayTitle: \"Il vento d'oro (Giorno's Theme)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Carol_of_the_Bells\",\n    composer: \"Mykola Leontovych\",\n    displayTitle: \"Carol of the Bells (Shchedryk)\",\n    isVocal: true,\n  },\n  {\n    slug: \"piano-man-piano\",\n    composer: \"Billy Joel\",\n    displayTitle: \"Piano Man\",\n    isVocal: true,\n  },\n  {\n    slug: \"Fly_Me_to_the_Moon\",\n    composer: \"Bart Howard\",\n    displayTitle: \"Fly Me to the Moon (In Other Words)\",\n    isVocal: true,\n  },\n  {\n    slug: \"passacaglia---handel-halvorsen\",\n    composer: \"Handel\",\n    displayTitle: \"Passacaglia in G minor (arr. Halvorsen)\",\n  },\n\n  {\n    slug: \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\",\n    composer: \"Bach\",\n    displayTitle: \"Prelude in C major, BWV 846\",\n  },\n  {\n    slug: \"All_I_Want_for_Christmas_is_You\",\n    composer: \"Mariah Carey\",\n    displayTitle: \"All I Want for Christmas Is You\",\n    isVocal: true,\n  },\n  {\n    slug: \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\",\n    composer: \"Shostakovich\",\n    displayTitle: \"Waltz No. 2 (Suite for Variety Orchestra)\",\n  },\n  {\n    slug: \"wa-mozart-marche-turque-turkish-march-fingered\",\n    composer: \"Mozart\",\n    displayTitle: \"Turkish March (Rondo alla Turca)\",\n  },\n  {\n    slug: \"Viva_La_Vida_Coldplay\",\n    composer: \"Coldplay\",\n    displayTitle: \"Viva la Vida\",\n    chords: [\"IV\", \"V\", \"I\", \"vi\"],\n    isVocal: true,\n  },\n  {\n    slug: \"Gravity_Falls_Opening\",\n    composer: \"Brad Breeck\",\n    displayTitle: \"Gravity Falls Theme\",\n  },\n  {\n    slug: \"the_entertainer_scott_joplin\",\n    composer: \"Scott Joplin\",\n    displayTitle: \"The Entertainer\",\n  },\n  {\n    slug: \"Disney_Pixar_Up_Theme\",\n    composer: \"Michael Giacchino\",\n    displayTitle: \"Married Life (from Up)\",\n  },\n  {\n    slug: \"a-thousand-years\",\n    composer: \"Christina Perri\",\n    displayTitle: \"A Thousand Years\",\n    isVocal: true,\n  },\n  {\n    slug: \"John_Lennon_Imagine\",\n    composer: \"John Lennon\",\n    displayTitle: \"Imagine\",\n    isVocal: true,\n  },\n\n  {\n    slug: \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n    composer: \"Kanye West\",\n    displayTitle: \"Runaway (arr. Ramin Djawadi for Westworld Season 2)\",\n    chords: [\"I\", \"iii\", \"IV\", \"vi\"],\n    isVocal: true,\n  },\n  {\n    slug: \"Lovely_Billie_Eilish\",\n    composer: \"Billie Eilish\",\n    displayTitle: \"Lovely (with Khalid)\",\n    isVocal: true,\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"Omori_Duet\",\n    composer: \"Pedro Silva\",\n    displayTitle: \"Duet (from Omori)\",\n  },\n  {\n    slug: \"Never_Gonna_Give_You_Up\",\n    composer: \"Mike Stock\",\n    displayTitle: \"Never Gonna Give You Up\",\n    isVocal: true,\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"despacito-piano-cover-peter-bence\",\n    composer: \"Luis Fonsi\",\n    displayTitle: \"Despacito\",\n    chords: [\"i\", \"bVI\", \"bVII\", \"bIII\"],\n    isVocal: true,\n  },\n  {\n    slug: \"solas---jamie-duffy\",\n    composer: \"Jamie Duffy\",\n    displayTitle: \"Solas\",\n  },\n  {\n    slug: \"autumn-leaves-jazz-piano\",\n    composer: \"Joseph Kosma\",\n    displayTitle: \"Autumn Leaves (Les Feuilles mortes)\",\n    isVocal: true,\n  },\n  {\n    slug: \"still-dre---variation-composition\",\n    composer: \"Dr. Dre\",\n    displayTitle: \"Still D.R.E.\",\n    chords: [\"i\", \"iv\"],\n    isVocal: true,\n  },\n\n  {\n    slug: \"mii-channel-piano\",\n    composer: \"Kazumi Totaka\",\n    displayTitle: \"Mii Channel Theme\",\n  },\n\n  {\n    slug: \"sadness-and-sorrow-for-piano-solo\",\n    composer: \"Toshio Masuda\",\n    displayTitle: \"Sadness and Sorrow (from Naruto)\",\n  },\n  {\n    slug: \"Super_Mario_Bros_Main_Theme\",\n    composer: \"Koji Kondo\",\n    displayTitle: \"Super Mario Bros. Main Theme\",\n  },\n  {\n    slug: \"Cant_Help_Falling_In_Love\",\n    composer: \"Jean-Paul-gide Martini\",\n    displayTitle: \"Can't Help Falling in Love\",\n    isVocal: true,\n  },\n  {\n    slug: \"g-minor-bach-original\",\n    composer: \"Luo Ni\",\n    displayTitle: \"G minor Bach (from Piano Tiles 2, an adaptation of BWV 847)\",\n  },\n  {\n    slug: \"when-i-was-your-man---bruno-mars-600e3a\",\n    composer: \"Bruno Mars\",\n    displayTitle: \"When I Was Your Man\",\n    isVocal: true,\n  },\n  {\n    slug: \"gurenge--demon-slayer-kimetsu-no-yaiba-op\",\n    composer: \"Kayoko Kusano\",\n    displayTitle: \"Gurenge (Demon Slayer Opening)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Let_Her_Go_Passenger\",\n    composer: \"Passenger\",\n    displayTitle: \"Let Her Go\",\n    isVocal: true,\n  },\n  {\n    slug: \"we-are-number-one-but-it-s-a-piano-transcript\",\n    composer: \"Mni Svavarsson\",\n    displayTitle: \"We Are Number One (LazyTown)\",\n    chords: [\"i\", \"bVI\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"dragonborn---skyrim-theme-song-piano-solo\",\n    composer: \"Jeremy Soule\",\n    displayTitle: \"Dragonborn (Skyrim Theme)\",\n    isVocal: true,\n  },\n  {\n    slug: \"doki-doki-literature-club-ost---your-reality\",\n    composer: \"Dan Salvato\",\n    displayTitle: \"Your Reality (from Doki Doki Literature Club)\",\n  },\n\n  {\n    slug: \"ylang-ylang---fkj-transcribed-by-lilroo\",\n    composer: \"FKJ\",\n    displayTitle: \"Ylang Ylang\",\n  },\n  {\n    slug: \"attack-on-titan-theme-guren-no-yumiya\",\n    composer: \"Revo\",\n    displayTitle: \"Guren no Yumiya (Attack on Titan Opening)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Bella_Ciao\",\n    composer: \"Italian folk\",\n    displayTitle: \"Bella ciao\",\n    isVocal: true,\n  },\n  {\n    slug: \"minuet-bwv-anhang-114-in-g-major\",\n    composer: \"Christian Petzold\",\n    displayTitle: \"Minuet in G major, BWV Anh. 114\",\n  },\n  {\n    slug: \"Take_on_me\",\n    composer: \"a-ha\",\n    displayTitle: \"Take On Me\",\n    isVocal: true,\n  },\n  {\n    slug: \"congratulations---mac-miller\",\n    composer: \"Mac Miller\",\n    displayTitle: \"Congratulations\",\n    isVocal: true,\n  },\n  {\n    slug: \"the-office\",\n    composer: \"Jay Ferguson\",\n    displayTitle: \"The Office - Main Theme\",\n    chords: [\"I\", \"iii\", \"IV\", \"vi\"],\n  },\n  {\n    slug: \"it-s-been-a-long-long-time---harry-james\",\n    composer: \"Jule Styne\",\n    displayTitle: \"It's Been a Long, Long Time\",\n    isVocal: true,\n  },\n  {\n    slug: \"Dawn_Pride_and_Prejudice\",\n    composer: \"Dario Marianelli\",\n    displayTitle: \"Dawn (from Pride & Prejudice)\",\n  },\n  {\n    slug: \"kimi-no-na-wa---sparkle-theishter-2016\",\n    composer: \"Radwimps\",\n    displayTitle: \"Sparkle (from Your Name 2016)\",\n    isVocal: true,\n  },\n\n  {\n    slug: \"Yann_Tiersen_Amelie\",\n    composer: \"Yann Tiersen\",\n    displayTitle: \"Comptine d'un autre t (from Amlie)\",\n    chords: [\"vi\", \"I\", \"iii\", \"V\"],\n  },\n  {\n    slug: \"sia---snowman\",\n    composer: \"Sia\",\n    displayTitle: \"Snowman\",\n    isVocal: true,\n  },\n  {\n    slug: \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\",\n    composer: \"Takahiro Obata\",\n    displayTitle: \"Isabella's Lullaby (The Promised Neverland)\",\n  },\n  {\n    slug: \"theme-from-schindler-s-list---piano-solo\",\n    composer: \"John Williams\",\n    displayTitle: \"Theme from Schindler's List\",\n  },\n  {\n    slug: \"happy-birthday\",\n    composer: \"Patty Smith Hill\",\n    displayTitle: \"Happy Birthday to You\",\n    chords: [\"I\", \"IV\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"flight-of-the-bumblebee\",\n    composer: \"Nikolai Rimsky-Korsakov\",\n    displayTitle: \"Flight of the Bumblebee\",\n  },\n  {\n    slug: \"dance-of-the-sugar-plum-fairy\",\n    composer: \"Pyotr Ilyich Tchaikovsky\",\n    displayTitle: \"Dance of the Sugar Plum Fairy\",\n  },\n  {\n    slug: \"dont-stop-believing-piano\",\n    composer: \"Journey\",\n    displayTitle: \"Don't Stop Believin'\",\n    isVocal: true,\n  },\n  {\n    slug: \"sign-of-the-times---harry-styles\",\n    composer: \"Harry Styles\",\n    displayTitle: \"Sign of the Times\",\n    isVocal: true,\n  },\n  {\n    slug: \"Requiem_for_a_Dream\",\n    composer: \"Clint Mansell\",\n    displayTitle: \"Lux Aeterna (from Requiem for a Dream)\",\n    chords: [\"i\", \"bVI\", \"V\"],\n  },\n\n  {\n    slug: \"yuri-on-ice---piano-theme-full\",\n    composer: \"Taro Umebayashi + Taku Matsushiba\",\n    displayTitle: \"Yuri on Ice Main Theme\",\n  },\n  {\n    slug: \"ye-niqu-keru-yoru-ni-kakeru---racing-into-the-night\",\n    composer: \"Ayase\",\n    displayTitle: \"Yoru ni Kakeru (Racing into the Night)\",\n    isVocal: true,\n  },\n  {\n    slug: \"africa---toto\",\n    composer: \"Toto (David Paich + Jeff Porcaro)\",\n    displayTitle: \"Africa\",\n    isVocal: true,\n  },\n  {\n    slug: \"vivaldi---summer---piano\",\n    composer: \"Antonio Vivaldi\",\n    displayTitle: \"Summer (from The Four Seasons)\",\n  },\n  {\n    slug: \"Love_Like_You_Steven_Universe\",\n    composer: \"Rebecca Sugar\",\n    displayTitle: \"Love Like You (from Steven Universe)\",\n    isVocal: true,\n  },\n  {\n    slug: \"alan-walker---alone-piano\",\n    composer: \"Alan Walker\",\n    displayTitle: \"Alone\",\n    chords: [\"vi\", \"I\", \"IV\", \"V\", \"iii\"],\n    isVocal: true,\n  },\n  {\n    slug: \"my-lie-watashi-no-uso---your-lie-in-april\",\n    composer: \"Masaru Yokoyama\",\n    displayTitle: \"Watashi no Uso, My Lie (from Your Lie in April)\",\n  },\n  {\n    slug: \"anastasia---once-upon-a-december\",\n    composer: \"Stephen Flaherty\",\n    displayTitle: \"Once Upon a December (from Anastasia)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Test_Drive_How_to_Train_Your_Dragon\",\n    composer: \"John Powell\",\n    displayTitle: \"Test Drive (from How to Train Your Dragon)\",\n  },\n  {\n    slug: \"Pokemon_Theme_Song\",\n    composer: \"John Siegler\",\n    displayTitle: \"Pokmon Theme\",\n    isVocal: true,\n  },\n\n  {\n    slug: \"your-song-piano\",\n    composer: \"Elton John\",\n    displayTitle: \"Your Song\",\n    isVocal: true,\n  },\n  {\n    slug: \"nothing-else-matters---metallica\",\n    composer: \"Metallica\",\n    displayTitle: \"Nothing Else Matters\",\n    isVocal: true,\n  },\n  {\n    slug: \"calum-scott---you-are-the-reason-piano-sheet-lyrics-lyrics-version-link-in-description\",\n    composer: \"Calum Scott\",\n    displayTitle: \"You Are the Reason\",\n    isVocal: true,\n  },\n  {\n    slug: \"fairy-tail-main-theme\",\n    composer: \"Yasuharu Takanashi\",\n    displayTitle: \"Fairy Tail Main Theme\",\n  },\n  {\n    slug: \"welcome-to-the-black-parade---my-chemical-romance\",\n    composer: \"My Chemical Romance\",\n    displayTitle: \"Welcome to the Black Parade\",\n    isVocal: true,\n  },\n  {\n    slug: \"how-far-i-ll-go-~-moana-ost\",\n    composer: \"Lin-Manuel Miranda\",\n    displayTitle: \"How Far I'll Go (from Moana)\",\n    isVocal: true,\n  },\n  {\n    slug: \"la-vie-en-rose-solo-accordion\",\n    composer: \"Louiguy\",\n    displayTitle: \"La Vie en rose\",\n    isVocal: true,\n  },\n  {\n    slug: \"Im_Blue_Eiffel_65\",\n    composer: \"Eiffel 65\",\n    displayTitle: \"Blue (Da Ba Dee)\",\n    isVocal: true,\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"A_Thousand_Miles\",\n    composer: \"Vanessa Carlton\",\n    displayTitle: \"A Thousand Miles\",\n    isVocal: true,\n  },\n  {\n    slug: \"old-town-road---lil-nas-x-ft.-billy-ray-cyrus\",\n    composer: \"Lil Nas X\",\n    displayTitle: \"Old Town Road\",\n    isVocal: true,\n  },\n  {\n    slug: \"abba--the-winner-takes-it-all\",\n    composer: \"ABBA\",\n    displayTitle: \"The Winner Takes It All\",\n    isVocal: true,\n  },\n  {\n    slug: \"Sonate_No._14_Moonlight_1st_Movement\",\n    composer: \"Ludwig van Beethoven\",\n    displayTitle: \"Piano Sonata No. 14 'Moonlight', 1st Movement\",\n  },\n  {\n    slug: \"One_Summers_Day_Spirited_Away\",\n    composer: \"Joe Hisaishi\",\n    displayTitle: \"One Summer's Day (from Spirited Away)\",\n  },\n  {\n    slug: \"Waltz_in_A_MinorChopin\",\n    composer: \"Frdric Chopin\",\n    displayTitle: \"Waltz No. 19 in A minor\",\n  },\n  {\n    slug: \"tude_S._1413_in_G_Minor_La_Campanella__Liszt\",\n    composer: \"Franz Liszt\",\n    displayTitle: \"tude S. 141/3 in G minor (La Campanella)\",\n  },\n  {\n    slug: \"Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\",\n    composer: \"Yiruma\",\n    displayTitle: \"Kiss the Rain - 10th Anniversary Version\",\n  },\n  {\n    slug: \"Wet_Hands_Minecraft\",\n    composer: \"C418\",\n    displayTitle: \"Wet Hands (from Minecraft)\",\n  },\n  {\n    slug: \"eda-s-requiem---brad-breeck-piano\",\n    composer: \"Brad Breeck\",\n    displayTitle: \"Eda's Requiem\",\n  },\n  {\n    slug: \"Maple_Leaf_Rag_Scott_Joplin\",\n    composer: \"Scott Joplin\",\n    displayTitle: \"Maple Leaf Rag\",\n  },\n  {\n    slug: \"kanye-west-homecoming-piano-cover\",\n    composer: \"Kanye West\",\n    displayTitle: \"Homecoming\",\n  },\n  {\n    slug: \"what-falling-in-love-feels-like---jake25.17-fanmade-extended-version\",\n    composer: \"JVKE\",\n    displayTitle: \"What Falling in Love Feels Like\",\n  },\n  {\n    slug: \"pachelbel-chaconne-in-f-minor\",\n    composer: \"Johann Pachelbel\",\n    displayTitle: \"Chaconne in F minor\",\n  },\n  {\n    slug: \"wii-sports-theme-piano\",\n    composer: \"Kazumi Totaka\",\n    displayTitle: \"Wii Sports Theme (From 'Nintendo Wii')\",\n  },\n  {\n    slug: \"Billie_Eilish_Bad_Guy\",\n    composer: \"Billie Eilish\",\n    displayTitle: \"Bad Guy\",\n  },\n  {\n    slug: \"secunda-the-elder-scrolls-v-skyrim\",\n    composer: \"Jeremy Soule\",\n    displayTitle: \"Secunda (from The Elder Scrolls V: Skyrim)\",\n  },\n  {\n    slug: \"liz-on-top-of-the-world\",\n    composer: \"Dario Marianelli\",\n    displayTitle: \"Liz on Top of the World\",\n  },\n  {\n    slug: \"Zeldas_Lullaby\",\n    composer: \"Koji Kondo\",\n    displayTitle: \"Zelda's Lullaby\",\n  },\n  {\n    slug: \"lacrimosa---requiem\",\n    composer: \"Mozart\",\n    displayTitle: \"Lacrimosa\",\n  },\n  {\n    slug: \"satie-e.---gnossienne-no.-1\",\n    composer: \"Erik Satie\",\n    displayTitle: \"Gnossienne No. 1\",\n  },\n  {\n    slug: \"arabesque-l.-66-no.-1-in-e-major\",\n    composer: \"Claude Debussy\",\n    displayTitle: \"Arabesque L. 66 No. 1 in E major\",\n  },\n  {\n    slug: \"Fallen_Down_Undertale\",\n    composer: \"Toby Fox\",\n    displayTitle: \"Fallen Down (from Undertale)\",\n  },\n  {\n    slug: \"the-scientist---coldplay-piano-arrangement\",\n    composer: \"Coldplay\",\n    displayTitle: \"The Scientist\",\n  },\n  {\n    slug: \"ballade-pour-adeline---richard-clayderman\",\n    composer: \"Richard Clayderman\",\n    displayTitle: \"Ballade pour Adeline\",\n  },\n];\n","import { faGuitar, faUserGraduate } from \"@fortawesome/free-solid-svg-icons\";\nimport * as React from \"react\";\nimport styled, { css, keyframes } from \"styled-components\";\nimport { useLocalStorage } from \"usehooks-ts\";\nimport { playArpeggiatedChord } from \"../../../sampler/sampler\";\nimport { PITCH_CLASS_TO_LETTER } from \"../AnalysisGrid\";\nimport { Toggle } from \"../Toggle\";\nimport { FoldButton } from \"../editor/EditorStyles\";\nimport { TOP_100_COMPOSERS } from \"../top100Composers\";\nimport ChordStairs from \"./ChordStairs\";\nimport { CHROMATIC_CHORDS, MAJOR_MODE, MINOR_MODE, Mode } from \"./chords\";\nconst BLACK_KEYS = [1, 3, -1, 6, 8, 10, -1];\nconst WHITE_KEYS = [0, 2, 4, 5, 7, 9, 11];\n\nconst BLACK_KEY_LABELS = [\"b2\", \"b3\", -1, \"#4\", \"b6\", \"b7\", -1];\n\nconst KEY_WIDTH = 26;\nconst KEY_HEIGHT = 70;\nconst ROW_DISTANCE = 40;\nconst PADDING = 2.5;\nconst INLINE_KEY_WIDTH = 10;\nconst INLINE_KEY_HEIGHT = 24;\nconst INLINE_ROW_DISTANCE = 15;\nconst INLINE_PADDING = 2;\n\nconst keyPress = keyframes`\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(0.95);\n  }\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst PianoKey = styled.div<{ isPlaying?: boolean; isEnabled?: boolean }>`\n  position: absolute;\n  user-select: none;\n  font-size: 16px;\n  font-weight: 700;\n  text-align: center;\n  vertical-align: bottom;\n  color: white;\n  text-shadow:\n    0.5px 0.5px 0px black,\n    -0.5px 0.5px 0px black,\n    0.5px -0.5px 0px black,\n    -0.5px -0.5px 0px black;\n  display: grid;\n  align-content: end;\n  box-sizing: border-box;\n  transform-origin: top;\n  opacity: ${(props) => (props.isEnabled ? 1 : 0)};\n  ${(props) =>\n    props.isPlaying &&\n    css`\n      animation: ${keyPress} 0.2s ease-out;\n    `}\n`;\n\nconst ScaleLabel = styled.span`\n  cursor: pointer;\n  padding: 2px 6px;\n  border-radius: 4px;\n  transition: background-color 0.2s;\n  color: gray;\n\n  &:hover {\n    color: white;\n  }\n`;\n\nexport const PianoLegend: React.FC<{\n  currentTonic?: number;\n  inline?: boolean;\n  enabledPitches?: number[];\n}> = ({\n  currentTonic = 0,\n  inline = false,\n  enabledPitches = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n}) => {\n  const [playingNotes, setPlayingNotes] = React.useState<Set<number>>(\n    new Set(),\n  );\n\n  const playNote = (note: number) => {\n    if (!inline && enabledPitches.includes(note)) {\n      const transposedNote = note + currentTonic;\n      playArpeggiatedChord([transposedNote], false);\n      setPlayingNotes(new Set([...playingNotes, note]));\n      setTimeout(() => {\n        setPlayingNotes((prev) => {\n          const next = new Set(prev);\n          next.delete(note);\n          return next;\n        });\n      }, 200);\n    }\n  };\n\n  const keyWidth = inline ? INLINE_KEY_WIDTH : KEY_WIDTH;\n  const keyHeight = inline ? INLINE_KEY_HEIGHT : KEY_HEIGHT;\n  const rowDistance = inline ? INLINE_ROW_DISTANCE : ROW_DISTANCE;\n  const padding = inline ? INLINE_PADDING : PADDING;\n\n  return (\n    <div style={{ backgroundColor: \"black\", padding: \"0\", zIndex: 100000 }}>\n      <div\n        style={{\n          position: \"relative\",\n          width: WHITE_KEYS.length * (keyWidth + padding),\n          height: keyHeight + rowDistance,\n        }}\n      >\n        {[0, 1, 2, 3, 4, 5, 6].map((i) => (\n          <React.Fragment key={i}>\n            <PianoKey\n              key={`w_${i}`}\n              className={\n                (inline || enabledPitches.includes(WHITE_KEYS[i])) &&\n                `noteColor_${[WHITE_KEYS[i]]}_colors`\n              }\n              isEnabled={inline || enabledPitches.includes(WHITE_KEYS[i])}\n              isPlaying={playingNotes.has(WHITE_KEYS[i])}\n              style={{\n                top: rowDistance,\n                left: (keyWidth + padding) * i,\n                width: keyWidth,\n                height: keyHeight,\n                borderRadius: inline ? \"3px\" : \"5px\",\n                cursor:\n                  inline || enabledPitches.includes(WHITE_KEYS[i])\n                    ? \"pointer\"\n                    : \"default\",\n              }}\n              onClick={() => playNote(WHITE_KEYS[i])}\n            >\n              <div style={{ position: \"relative\" }}>\n                {!inline && (\n                  <>\n                    {i === 0 && (\n                      <span\n                        style={{\n                          position: \"absolute\",\n                          bottom: \"18px\",\n                          left: \"2px\",\n                          color: \"black\",\n                          fontWeight: \"bold\",\n                          width: \"0\",\n                          overflow: \"visible\",\n                          textAlign: \"center\",\n                          fontSize: \"14px\",\n                          textShadow: \"none\",\n                          zIndex: 3,\n                        }}\n                      >\n                        {PITCH_CLASS_TO_LETTER[currentTonic]}\n                      </span>\n                    )}\n                    {i + 1}\n                  </>\n                )}\n              </div>\n            </PianoKey>\n            {BLACK_KEYS[i] !== -1 ? (\n              <PianoKey\n                key={`b_${i}`}\n                className={\n                  (inline || enabledPitches.includes(BLACK_KEYS[i])) &&\n                  `noteColor_${[BLACK_KEYS[i]]}_colors`\n                }\n                isEnabled={inline || enabledPitches.includes(BLACK_KEYS[i])}\n                isPlaying={playingNotes.has(BLACK_KEYS[i])}\n                style={{\n                  top: 0,\n                  left: (keyWidth + padding) * (i + 0.5),\n                  zIndex: 2,\n                  width: keyWidth,\n                  height: keyHeight,\n                  borderRadius: inline ? \"3px\" : \"5px\",\n                  cursor:\n                    inline || enabledPitches.includes(BLACK_KEYS[i])\n                      ? \"pointer\"\n                      : \"default\",\n                  backgroundColor: \"black\",\n                }}\n                onClick={() => playNote(BLACK_KEYS[i])}\n              >\n                {!inline &&\n                  BLACK_KEY_LABELS[i]\n                    .toString()\n                    .replace(\"b\", \"\")\n                    .replace(\"#\", \"\")}\n              </PianoKey>\n            ) : null}\n          </React.Fragment>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport const InlinePianoLegend: React.FC<{ enabledPitches?: number[] }> = ({\n  enabledPitches = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n}) => {\n  return <PianoLegend inline enabledPitches={enabledPitches} />;\n};\n\nexport const FoldablePianoLegend: React.FC<{\n  slug?: string;\n  mode?: Mode | Mode[];\n  currentTonic?: number;\n  setHoveredColors?: (colors: string[] | null) => void;\n}> = ({ slug, mode, currentTonic, setHoveredColors }) => {\n  const [showLegend, setShowLegend] = useLocalStorage(\"showLegend\", true);\n  const [hoveredScale, setHoveredScale] = React.useState<\n    \"major\" | \"minor\" | null\n  >(null);\n  const [showGuitarChords, setShowGuitarChords] = React.useState(false);\n\n  const getEnabledPitches = () => {\n    if (hoveredScale === \"major\") {\n      return WHITE_KEYS;\n    } else if (hoveredScale === \"minor\") {\n      return [0, 2, 3, 5, 7, 8, 10];\n    }\n    return [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n  };\n\n  const chords = TOP_100_COMPOSERS.find(({ slug: _slug }) => slug === _slug)\n    ?.chords;\n\n  const content = React.useMemo(() => {\n    return (\n      <div\n        key=\"piano-legend\"\n        style={{ position: \"fixed\", bottom: 51, right: 36, zIndex: 100000 }}\n      >\n        {showLegend ? (\n          <div style={{ position: \"relative\", marginTop: \"30px\" }}>\n            <Toggle\n              leftIcon={faUserGraduate}\n              rightIcon={faGuitar}\n              isRight={showGuitarChords}\n              onToggle={() => setShowGuitarChords((prev) => !prev)}\n              leftTitle=\"Show Roman numerals\"\n              rightTitle=\"Show guitar chords\"\n            />\n            <FoldButton\n              position=\"top\"\n              isFolded={!showLegend}\n              onClick={() => setShowLegend(false)}\n            />\n\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                gap: 35,\n                backgroundColor: \"black\",\n                padding: 10,\n                border: \"1px solid #666\",\n                zIndex: 100000,\n              }}\n            >\n              {(Array.isArray(mode)\n                ? mode\n                : mode\n                ? [mode]\n                : [MAJOR_MODE, MINOR_MODE]\n              ).map((modeItem, index) => (\n                <ChordStairs\n                  key={`mode-${index}`}\n                  mode={modeItem}\n                  chapterChords={chords}\n                  currentTonic={currentTonic}\n                  setHoveredColors={setHoveredColors}\n                  showGuitarChords={showGuitarChords}\n                />\n              ))}\n              {chords && (\n                <ChordStairs\n                  mode={CHROMATIC_CHORDS}\n                  chapterChords={chords}\n                  currentTonic={currentTonic}\n                  setHoveredColors={setHoveredColors}\n                  showGuitarChords={showGuitarChords}\n                />\n              )}\n              <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n                <div\n                  style={{\n                    margin: \"auto\",\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                  }}\n                >\n                  <PianoLegend\n                    currentTonic={currentTonic ?? 0}\n                    enabledPitches={getEnabledPitches()}\n                  />\n                  <PianoLegend\n                    currentTonic={(currentTonic ?? 0) + 12}\n                    enabledPitches={getEnabledPitches()}\n                  />\n                </div>\n                <div\n                  style={{\n                    overflow: \"visible\",\n                    color: \"white\",\n                    display: \"flex\",\n                    gap: \"16px\",\n                    justifyContent: \"center\",\n                    marginTop: \"8px\",\n                  }}\n                >\n                  <ScaleLabel\n                    onMouseEnter={() => setHoveredScale(\"major\")}\n                    onMouseLeave={() => setHoveredScale(null)}\n                  >\n                    major\n                  </ScaleLabel>\n                  <ScaleLabel\n                    onMouseEnter={() => setHoveredScale(\"minor\")}\n                    onMouseLeave={() => setHoveredScale(null)}\n                  >\n                    natural minor\n                  </ScaleLabel>\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div style={{ position: \"relative\", marginTop: \"30px\" }}>\n            <FoldButton\n              position=\"top\"\n              isFolded={!showLegend}\n              onClick={() => setShowLegend(true)}\n            />\n            <button\n              onClick={() => setShowLegend(true)}\n              style={{\n                background: \"black\",\n                border: \"1px solid #333\",\n                padding: \"10px\",\n                cursor: \"pointer\",\n              }}\n            >\n              <InlinePianoLegend />\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }, [\n    showLegend,\n    slug,\n    mode,\n    currentTonic,\n    chords,\n    setShowLegend,\n    hoveredScale,\n    showGuitarChords,\n  ]);\n\n  return content;\n};\n","import * as React from \"react\";\nimport {\n  createContext,\n  useCallback,\n  useContext,\n  useRef,\n  useState,\n} from \"react\";\nimport styled, { css, keyframes } from \"styled-components\";\nimport {\n  ARPEGGIO_DELAY_MS,\n  playArpeggiatedChord,\n  playArpeggiatedChordSequence,\n} from \"../../../sampler/sampler\";\nimport { PitchClass } from \"../analysis\";\nimport { Mode } from \"../book/chapters\";\nimport { Chord, formatChordName, rehydrateChords } from \"./chords\";\nimport { convertChordToGuitarChord } from \"./guitarChords\";\n\nconst TITLE_HEIGHT = 27;\n\nconst NOTE_HEIGHT = 3;\nconst NOTE_WIDTH = 30;\nconst HORIZONTAL_GAP = 12;\n\nconst ChordNote = styled.div<{ isPlaying?: boolean; delay?: number }>`\n  user-select: none;\n  border-radius: 4px;\n  width: ${NOTE_WIDTH}px;\n  height: ${NOTE_HEIGHT * 2}px;\n  transform-origin: center;\n  ${(props) =>\n    props.isPlaying &&\n    css`\n      animation: ${scaleOut} 0.6s ease-out;\n      animation-delay: ${props.delay}ms;\n      animation-fill-mode: forwards;\n    `}\n`;\n\nconst scaleOut = keyframes`\n  0% {\n    transform: scale(1);\n  }\n  30% {\n    transform: scale(1.5);\n  }\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst ChordBoundingBox = styled.div<{\n  clickable?: boolean;\n}>`\n  position: absolute;\n  cursor: ${(props) => (props.clickable ? \"pointer\" : \"inherit\")};\n  background: transparent;\n  z-index: 1;\n  transform-origin: center;\n`;\n\nconst ChordContent = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n`;\n\nconst ChordName = styled.div`\n  width: ${NOTE_WIDTH}px;\n  display: flex;\n  justify-content: center;\n  text-align: center;\n  position: absolute;\n`;\n\n// Create the context\nconst TonicContext = createContext<number>(0);\n\n// Create the provider component\nexport const TonicProvider: React.FC<{\n  currentTonic: number;\n  children: React.ReactNode;\n}> = ({ currentTonic, children }) => {\n  return (\n    <TonicContext.Provider value={currentTonic}>\n      {children}\n    </TonicContext.Provider>\n  );\n};\n\n// Add a hook to use the context\nconst useTonicContext = () => {\n  const context = useContext(TonicContext);\n  return context;\n};\n\nconst ChordStairs: React.FC<{\n  mode: Mode;\n  chapterChords?: string[];\n  currentTonic?: number;\n  scale?: number;\n  playbackMode?: \"separate\" | \"together\" | \"no\";\n  setHoveredColors?: (colors: string[] | null) => void;\n  showGuitarChords?: boolean;\n}> = React.memo(\n  ({\n    mode,\n    chapterChords,\n    currentTonic: propTonic,\n    scale = 1,\n    playbackMode = \"separate\",\n    setHoveredColors,\n    showGuitarChords = false,\n  }) => {\n    const contextTonic = useTonicContext();\n    const currentTonic = propTonic ?? contextTonic;\n\n    const [playingStates, setPlayingStates] = useState<{\n      [key: number]: number;\n    }>({});\n    const timeoutRef = useRef<NodeJS.Timeout[]>([]);\n\n    const { title, chords } = mode;\n    const hideLabels = playbackMode !== \"separate\";\n    const titleHeight = hideLabels ? 0 : TITLE_HEIGHT;\n\n    // Check if we should show the chord stairs\n    const chapterChordsSet = new Set(chapterChords || []) as Set<Chord>;\n    const modeChordSet = new Set(mode.chords);\n    // Only remove V for intersection check\n    const modeChordSetWithoutV = new Set(modeChordSet);\n    modeChordSetWithoutV.delete(\"V\");\n    modeChordSetWithoutV.delete(\"V7\");\n    const hasIntersection = [...chapterChordsSet].some((chord) =>\n      modeChordSetWithoutV.has(chord),\n    );\n\n    // Use original modeChordSet (with V) for filtering\n    const filteredChords = chords.filter(\n      (chord) => !chapterChords || chapterChordsSet.has(chord),\n    );\n\n    const numChords = filteredChords.length;\n\n    const rehydratedChords = rehydrateChords(filteredChords);\n\n    // Find minimum position across all chords\n    const minPosition = Math.min(\n      ...rehydratedChords.flatMap((chord) => chord.positions),\n    );\n\n    // Find which chord and which note has the minimum position\n    const pitchOfMinPosition = rehydratedChords.find((chord) =>\n      chord.positions.includes(minPosition),\n    )?.pitches[0];\n\n    // Shift all positions up by the minimum position (making the lowest note at position 0)\n    rehydratedChords.forEach((chord) => {\n      chord.positions = chord.positions.map((pos) => pos - minPosition);\n    });\n\n    const maxPosition = Math.max(\n      ...rehydratedChords.flatMap((chord) => chord.positions),\n    );\n\n    const height = maxPosition + 1;\n\n    // Calculate total height including margin top and text, plus half note height for last note\n    const totalHeight = (height + 1) * NOTE_HEIGHT;\n\n    const tonicChordPosition = filteredChords.findIndex((chord) =>\n      /^(i|I)$/.test(chord),\n    );\n\n    // Scale the constants\n    const scaledNoteHeight = NOTE_HEIGHT * scale;\n    const scaledNoteWidth = NOTE_WIDTH * scale;\n    const scaledHorizontalGap = (hideLabels ? 0 : HORIZONTAL_GAP) * scale;\n    const scaledFontSize = 16 * scale;\n\n    const handleChordClick = useCallback(\n      (chord: Chord, positions: number[], pitchOfMinPosition: number) => {\n        if (playbackMode === \"no\") return;\n\n        // Clear any existing timeouts\n        timeoutRef.current.forEach((timeout) => clearTimeout(timeout));\n        timeoutRef.current = [];\n\n        if (playbackMode === \"together\") {\n          // Reset playing states\n          setPlayingStates({});\n\n          // Prepare chord sequence\n          const chordSequence = rehydratedChords.map((chordData) =>\n            chordData.positions.map(\n              (position) => position + pitchOfMinPosition + currentTonic,\n            ),\n          );\n\n          // Play the sequence with animation callbacks\n          playArpeggiatedChordSequence(\n            chordSequence,\n            (index) => {\n              setPlayingStates((prev) => ({\n                ...prev,\n                [index]: Date.now(),\n              }));\n            },\n            (index) => {\n              setPlayingStates((prev) => {\n                const newState = { ...prev };\n                delete newState[index];\n                return newState;\n              });\n            },\n          );\n        } else {\n          // For single chord playback\n          const clickedChordIndex = rehydratedChords.findIndex(\n            (c) => c.name === chord && c.positions === positions,\n          );\n\n          // Set new timestamp for this chord\n          setPlayingStates((prev) => ({\n            [clickedChordIndex]: Date.now(),\n          }));\n\n          const transposedNotes = positions.map(\n            (position) => position + pitchOfMinPosition + currentTonic,\n          );\n          playArpeggiatedChord(transposedNotes);\n\n          const timeout = setTimeout(() => {\n            setPlayingStates({});\n          }, 600);\n\n          timeoutRef.current = [timeout];\n        }\n      },\n      [currentTonic, playbackMode, rehydratedChords],\n    );\n\n    const handleChordMouseEnter = useCallback(\n      (pitches: number[]) => {\n        if (setHoveredColors) {\n          setHoveredColors(\n            pitches.map((pitch) => `noteColor_${pitch % 12}_colors`),\n          );\n        }\n      },\n      [setHoveredColors],\n    );\n\n    const handleChordMouseLeave = useCallback(() => {\n      if (setHoveredColors) {\n        setHoveredColors(null);\n      }\n    }, [setHoveredColors]);\n\n    const getDisplayChordName = (name: string, pitches: number[]) => {\n      if (!showGuitarChords) return formatChordName(name);\n\n      const root = pitches[0];\n      const intervals = pitches.slice(1).map((p, i) => p - pitches[i]);\n      const intervalString = intervals.join(\" \");\n\n      const guitarChord = convertChordToGuitarChord(\n        ((root + currentTonic) % 12) as PitchClass,\n        intervalString,\n      );\n\n      return guitarChord || formatChordName(name);\n    };\n\n    return !hasIntersection && chapterChords ? (\n      <></>\n    ) : (\n      <div\n        key={title}\n        style={{\n          width:\n            numChords * scaledNoteWidth + (numChords - 1) * scaledHorizontalGap,\n          height: totalHeight * scale + titleHeight,\n          position: \"relative\",\n          fontSize: scaledFontSize,\n          marginTop: titleHeight,\n          display: \"inline-block\",\n        }}\n      >\n        {rehydratedChords.map(({ name, pitches, positions }, chordIndex) => {\n          const topPosition =\n            (maxPosition - positions.at(-1)) * scaledNoteHeight;\n          const bottomPosition =\n            (maxPosition - positions[0]) * scaledNoteHeight;\n          const chordNameOffset =\n            (chordIndex < tonicChordPosition ? -29 : 14) * scale;\n          const height =\n            bottomPosition -\n            topPosition +\n            scaledNoteHeight * 2 +\n            Math.abs(chordNameOffset) +\n            20 * scale;\n\n          return (\n            <ChordBoundingBox\n              key={`bounding-box-${chordIndex}`}\n              onClick={() =>\n                handleChordClick(name, positions, pitchOfMinPosition)\n              }\n              onMouseEnter={() => handleChordMouseEnter(pitches)}\n              onMouseLeave={handleChordMouseLeave}\n              clickable={playbackMode !== \"no\"}\n              style={{\n                left: chordIndex * (scaledNoteWidth + scaledHorizontalGap),\n                top: Math.min(topPosition + chordNameOffset, topPosition),\n                width: scaledNoteWidth,\n                height,\n              }}\n            >\n              <ChordContent>\n                <>\n                  {pitches.map((pitch, pitchIndex) => (\n                    <ChordNote\n                      key={`${chordIndex}-${pitchIndex}-${\n                        playingStates[chordIndex] || 0\n                      }`}\n                      className={`noteColor_${pitch % 12}_colors`}\n                      isPlaying={chordIndex in playingStates}\n                      delay={pitchIndex * ARPEGGIO_DELAY_MS}\n                      style={{\n                        position: \"absolute\",\n                        width: scaledNoteWidth,\n                        height: scaledNoteHeight * 2,\n                        top:\n                          (maxPosition - positions[pitchIndex]) *\n                            scaledNoteHeight +\n                          -Math.min(topPosition + chordNameOffset, topPosition),\n                      }}\n                    />\n                  ))}\n                  {!hideLabels && (\n                    <ChordName\n                      style={{\n                        top:\n                          chordIndex < tonicChordPosition\n                            ? (maxPosition - positions.at(-1)) *\n                                scaledNoteHeight -\n                              29 +\n                              -Math.min(\n                                topPosition + chordNameOffset,\n                                topPosition,\n                              )\n                            : (maxPosition - positions[0]) * scaledNoteHeight +\n                              14 +\n                              -Math.min(\n                                topPosition + chordNameOffset,\n                                topPosition,\n                              ),\n                        userSelect: \"none\",\n                        pointerEvents: \"none\",\n                        fontFamily: \"Tahoma\",\n                      }}\n                    >\n                      {getDisplayChordName(name, pitches)}\n                    </ChordName>\n                  )}\n                </>\n              </ChordContent>\n            </ChordBoundingBox>\n          );\n        })}\n        {!hideLabels && title && (\n          <div\n            style={{\n              position: \"absolute\",\n              bottom: -titleHeight / 2,\n              left: 0,\n              fontSize: scaledFontSize * 0.9,\n              color: \"#aaa\",\n              userSelect: \"none\",\n            }}\n          >\n            {title}\n          </div>\n        )}\n      </div>\n    );\n  },\n);\n\nexport default ChordStairs;\n","import { faKeyboard } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport {\n  Chord,\n  MAJOR_MODE,\n  MINOR_MODE,\n  STRICT_NATURAL_MINOR,\n} from \"../legends/chords\";\nimport ChordStairs, { TonicProvider } from \"../legends/ChordStairs\";\nimport { PianoLegend } from \"../legends/PianoLegend\";\nimport { SnippetLink } from \"../snippets/SnippetLink\";\nimport { TOP_100_COMPOSERS } from \"../top100Composers\";\nimport { Citation } from \"./Citations\";\nimport { CITES } from \"./cites\";\nimport { FileDropBox } from \"./FileDropBox\";\nimport Metaphors from \"./Metaphors\";\n\nexport const MODULATIONS_CHAPTER_TITLE = \"Modulations\";\nexport const DOUBLE_TONIC_CHAPTER_TITLE = \"Double-tonic\";\n\nexport const P = styled.div`\n  margin-bottom: 30px;\n  line-height: 1.6;\n`;\n\nexport const UL = styled.ul`\n  list-style-type: none;\n  margin-left: 0;\n  padding-left: 0;\n\n  & > li {\n    margin-bottom: 30px;\n  }\n`;\n\nconst C = ({ c, title }: { c: Chord[]; title: string }) => (\n  <span\n    style={{\n      display: \"inline-block\",\n      position: \"relative\",\n      top: \"5px\",\n      padding: \"3px 3px\",\n    }}\n    title={title.replace(/b/g, \"\").replace(/#/g, \"\")}\n  >\n    <ChordStairs\n      mode={{ title: \"\", chords: c }}\n      scale={0.85}\n      playbackMode=\"together\"\n    />\n  </span>\n);\n\nexport const rn = (strings: TemplateStringsArray) => (\n  <span\n    style={{\n      fontFamily: \"Fira Sans\",\n      fontWeight: \"700\",\n      fontSize: \"1.1em\",\n    }}\n  >\n    {strings[0].replace(\"7\", \"\")}\n  </span>\n);\n\nexport const c = (strings: TemplateStringsArray) => {\n  const chordString = strings[0].trim();\n  const chords = chordString.split(/\\s+/);\n  return <C c={chords as Chord[]} title={chordString} />;\n};\n\nexport const rnc = (strings: TemplateStringsArray) => (\n  <>\n    <span style={{ whiteSpace: \"nowrap\" }}>\n      {rn(strings)} {c(strings)}\n    </span>\n  </>\n);\n\nexport const ct = (string: string, tonic: number) => (\n  <TonicProvider currentTonic={tonic}>{c([string] as any)}</TonicProvider>\n);\n\nexport const a = (href: string, text: string) => (\n  <a\n    href={href}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    style={{ color: \"orange\", whiteSpace: \"nowrap\" }}\n  >\n    {text}\n  </a>\n);\n\nexport const A = (href: string) => (\n  <a\n    href={`/f/${href}`}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    style={{ color: \"orange\", whiteSpace: \"nowrap\" }}\n  >\n    {href}\n  </a>\n);\n\nexport const s = (tags: TemplateStringsArray) => {\n  const tag = tags[0];\n  const [chapter, topic] = tag.split(\":\");\n  return (\n    <span style={{ position: \"relative\", top: \"6px\", margin: \"0px 10px\" }}>\n      <SnippetLink chapter={chapter} topic={topic} />\n    </span>\n  );\n};\n\nconst n = (text: TemplateStringsArray) => (\n  <span style={{ whiteSpace: \"nowrap\" }}>{text}</span>\n);\n\nexport const k = (layout: string, title?: string) => {\n  return (\n    <a\n      href={`https://vpavlenko.github.io/layouts/${layout}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      style={{\n        display: \"inline-block\",\n        color: \"white\",\n        margin: \"10px 20px 10px 0\",\n        padding: \"7px\",\n        borderRadius: \"3px\",\n        boxShadow: \"0 0 2px 2px gray\",\n      }}\n    >\n      <FontAwesomeIcon icon={faKeyboard} style={{ marginRight: \"10px\" }} />\n      {title ?? layout.replace(/-/g, \" \")}\n    </a>\n  );\n};\n\nexport const q = (citeKey: keyof typeof CITES) => (\n  <Citation citeKey={citeKey} />\n);\n\nexport const CHAPTER_GROUPS: Record<string, [number, number]> = {\n  intro: [1, 1],\n  \"loops: four-chord progressions\": [2, 6],\n  \"diatonic functional harmony\": [7, 11],\n  \"borrowed chords\": [12, 14],\n  \"applied chords and modulation\": [15, 19],\n  scales: [20, 20],\n  \"seventh and extended chords\": [21, 24],\n  style: [25, 25],\n};\n\nexport const CHAPTERS: Array<{\n  title: string;\n  titleChords?: Chord[];\n  mode?: Mode | Mode[];\n  pretext?: () => React.JSX.Element;\n  composers: (typeof TOP_100_COMPOSERS)[number][\"slug\"][];\n}> = [\n  {\n    title: \"Intro\",\n    titleChords: [\"I\"],\n    composers: [\"happy-birthday\"],\n    pretext: () => (\n      <>\n        <h2>Structures in Western music</h2>\n        <P>\n          I invite you to my journey through 100 pieces of composers whose music\n          is popular nowadays.\n        </P>\n        <P>\n          I use my own piano-roll-based notation with notes colored into 12\n          colors, always starting from the main note  <i>the tonic</i>.\n        </P>\n        <P>\n          This simplifies visual analysis: chords like {c`IV V I`} and other\n          structures become visible, scores become readable and interpretable.\n        </P>\n        <P>This is the color scheme we'll use through the entire book:</P>\n        <P>\n          <PianoLegend />\n        </P>\n        <P>\n          You don't need any knowledge of standard notation throughout this\n          journey.\n        </P>\n\n        <h2>12 notes</h2>\n        <P>\n          There are twelve notes in each octave of a piano:{\" \"}\n          {c`1 b2 2 b3 3 4 #4 5 b6 6 b7 7`}\n        </P>\n        <P>\n          Throughout the book I'll mention keyboard layouts to try out different\n          concepts by playing them directly from your computer keyboard. Here\n          are two keyboards showcasing all 12 notes:\n        </P>\n        <P>\n          {k(\"traditional-layout\")}\n          {k(\"flat-chromatic-layout\")}\n        </P>\n        <P>\n          Each color is present several times on a piano keyboard  in different\n          octaves: {c`1 3 5 1 3 5 1 3 5 1 3 5 1`}\n        </P>\n        {/* \n        <P>\n          The distance between two consecutive keys is called a semitone.{\" \"}\n          {c`1 b2`}, {c`4 #4`}, {c`b6 6`} and {c`6 b7`} are one semitone apart.\n          All distances between two consecutive notes on a piano keyboard is the\n          same since mid-19th century. {q(\"rings_tuning\")}\n        </P> */}\n\n        <h2>Chords in a major scale</h2>\n        <P>\n          Some pieces are built entirely on a subset of seven notes called a\n          major scale: {c`1 2 3 4 5 6 7 1 2 3 4 5 6 7 1`}\n        </P>\n        <P>{k(\"major-scale\")}</P>\n        <P>\n          If you play three colors, it's called <i>a chord</i>. How to draw a\n          nice chord from a scale? You pick a <i>root</i> color - eg. {c`1`},\n          and then you pick every other note after it: skip {c`2`}, take {c`3`},\n          skip {c`4`}, take {c`5`}. This way we get a \"one\" chord - {n`1-3-5`}{\" \"}\n          {c`1 3 5`} {c`I`}.\n        </P>\n        <P>\n          We can do this from any note of the scale:\n          <ul>\n            <li>\n              {n`2-4-6`} {c`2 4 6`} {c`ii`}\n            </li>\n            <li>\n              {n`3-5-7`} {c`3 5 7`} {c`iii`}\n            </li>\n            <li>\n              {n`4-6-1`} {c`4 6 1`} {c`IV`}  in seven-note scales 8=1, 9=2 etc.\n            </li>\n            <li>\n              {n`5-7-2`} {c`5 7 2`} {c`V`}\n            </li>\n            <li>\n              {n`6-1-3`} {c`6 1 3`} {c`vi`}\n            </li>\n            <li>\n              {n`7-2-4`} {c`7 2 4`} {c`viio`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Chords are words in the Western musical language. Western music is\n          melody plus chords.\n        </P>\n        <P>\n          Here are all seven chords that we can build on a major scale this way:{\" \"}\n          {c`I ii iii IV V vi viio I`}\n        </P>\n        <P>\n          In this intro we'll have a close look at the song \"Happy Birthday\".\n          The arrangement we're gonna analyze uses three chords played in the\n          left hand, underneath the melody: {c`I`}, {c`IV`} and {c`V`}, in this\n          order: {c`I V V I I IV V I`}\n        </P>\n        <P>Click on the link below to open the score:</P>\n        {/* <P>\n          However, our arrangement builds a major scale starting from the note\n          F.\n        </P>\n        <P>\n          <PianoLegend currentTonic={5} />\n        </P>\n        <P>\n          This is legal: all musical structures are relative and can be shifted\n          up or down a fixed amount of semitones.\n        </P>\n        <P>\n          For instance, let's consider this string of chords in C major:{\" \"}\n          {c`I V V I I IV V I`}\n        </P>\n        <P>\n          <TonicProvider currentTonic={1}>\n            In C# major it looks the same but sounds differently:{\" \"}\n            {c`I V V I I IV V I`}\n          </TonicProvider>\n        </P>\n        <P>\n          Now, open the score of \"Happy Birthday\" and let's start analyzing.\n        </P> */}\n      </>\n    ),\n  },\n  {\n    title: \"Single loop in major\",\n    titleChords: [\"I\", \"iii\", \"vi\", \"IV\"],\n    mode: {\n      title: \"6 common triads in a major mode\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Our path</h2>\n        <P>\n          The word <i>harmony</i> in music theory means \"which colors are\n          combined together in a given piece or a style\". Usually colors are\n          organized in chords, so a talk on harmony starts with \"what's the\n          order or chords\".\n        </P>\n        <P>\n          The chapters of this book go through pieces in order of increasing\n          harmonic complexity. We start with pieces which use only seven colors\n          (<i>pitch classes</i>):\n          <ul>\n            <li>major scale: {c`1 2 3 4 5 6 7 1`}</li>\n            <li>minor scale: {c`1 2 b3 4 5 b6 b7 1`}</li>\n          </ul>\n        </P>\n        <P>\n          We begin with the pieces with simple harmony  like{\" \"}\n          {c`I vi IV V I vi IV V`} or {c`i i bVI V i i bVI V`}  the diatonic\n          harmony.\n        </P>\n        <P>\n          Then we progress all the way to complex chromatic harmony, like{\" \"}\n          {c`i iio7 V43 i6 Ger viio7/V i64 V7b9 i`} and{\" \"}\n          {c`Imaj7 V7/IV IVmaj7 iv7 Imaj7 V7/ii V7/V V7 Imaj7`}\n        </P>\n\n        <P>\n          Many things influence each piece: a composer combines ideas of\n          harmony, melody, voice-leading, texture, rhythm, form. I picked\n          harmony as the main axis of this book. I discuss other aspects of\n          music as a set of questions and answers below the scores of each\n          piece.\n        </P>\n\n        <h2>Loops</h2>\n        <P>In Western music, chords usually change at regular times.</P>\n        <P>\n          The easiest way of organizing chords is to put them in a loop. The\n          most common length of the loop is four chords.\n        </P>\n        <P>\n          There are six common chords that can be built on a major scale:{\" \"}\n          {c`I ii iii IV V vi I`}\n        </P>\n        <P>\n          We have four places to fill in with chords in a loop. If you put{\" \"}\n          {c`I`} on the first place, you can fill in the rest three distinct\n          chords in {n`5  4  3 = 60`} ways:\n        </P>\n        <P style={{ width: \"100vw\" }}>\n          <UL>\n            <li>\n              {c`I ii iii IV`} {c`I ii iii V`} {c`I ii iii vi`} {c`I ii IV iii`}{\" \"}\n              {c`I ii IV V`} {c`I ii IV vi`}{\" \"}\n            </li>\n            <li>\n              {c`I ii V iii`} {c`I ii V IV`} {c`I ii V vi`} {c`I ii vi iii`}{\" \"}\n              {c`I ii vi IV`} {c`I ii vi V`}{\" \"}\n            </li>\n            <li>\n              {c`I iii ii IV`} {c`I iii ii V`} {c`I iii ii vi`} {c`I iii IV ii`}{\" \"}\n              {c`I iii IV V`} {c`I iii IV vi`}{\" \"}\n            </li>\n            <li>\n              {c`I iii V ii`} {c`I iii V IV`} {c`I iii V vi`} {c`I iii vi ii`}{\" \"}\n              {c`I iii vi IV`} {c`I iii vi V`}{\" \"}\n            </li>\n            <li>\n              {c`I IV ii iii`} {c`I IV ii V`} {c`I IV ii vi`} {c`I IV iii ii`}{\" \"}\n              {c`I IV iii V`} {c`I IV iii vi`}{\" \"}\n            </li>\n            <li>\n              {c`I IV V ii`} {c`I IV V iii`} {c`I IV V vi`} {c`I IV vi ii`}{\" \"}\n              {c`I IV vi iii`} {c`I IV vi V`}{\" \"}\n            </li>\n            <li>\n              {c`I V ii iii`} {c`I V ii IV`} {c`I V ii vi`} {c`I V iii ii`}{\" \"}\n              {c`I V iii IV`} {c`I V iii vi`}{\" \"}\n            </li>\n            <li>\n              {c`I V IV ii`} {c`I V IV iii`} {c`I V IV vi`} {c`I V vi ii`}{\" \"}\n              {c`I V vi iii`} {c`I V vi IV`}{\" \"}\n            </li>\n            <li>\n              {c`I vi ii iii`} {c`I vi ii IV`} {c`I vi ii V`} {c`I vi iii ii`}{\" \"}\n              {c`I vi iii IV`} {c`I vi iii V`}{\" \"}\n            </li>\n            <li>\n              {c`I vi IV ii`} {c`I vi IV iii`} {c`I vi IV V`} {c`I vi V ii`}{\" \"}\n              {c`I vi V iii`} {c`I vi V IV`}{\" \"}\n            </li>\n          </UL>\n        </P>\n        <P>\n          However, historically just a few of these hypothetical loops take up\n          the majority of the songs. Some popular loops are:\n          <ul>\n            <li>\n              {a(\n                \"https://en.wikipedia.org/wiki/%2750s_progression\",\n                \"'50s progression\",\n              )}{\" \"}\n              has two common rotations:\n              <ul style={{ marginBottom: \"1em\" }}>\n                <li> {c`I vi IV V I vi IV V`}</li>\n                <li>{c`IV V I vi IV V I vi`}</li>\n              </ul>\n            </li>\n            <li>{c`I iii vi IV I iii vi IV`}</li>\n          </ul>\n        </P>\n        <h2>Roman numeral analysis</h2>\n        <P>\n          Let's notate six chords that we find in pieces built on a major scale\n          by using Roman numeral analysis.\n        </P>\n        <P>\n          <ChordStairs\n            mode={{\n              title: \"\",\n              chords: [\"I\", \"ii\", \"iii\", \"IV\", \"V\", \"vi\"],\n            }}\n          />\n        </P>\n        <P>\n          Pronounced: \"a one chord\", \"a two chord\", \"a three chord\", \"a four\n          chord\", \"a five chord\", \"a six chord\".\n        </P>\n        <P>\n          If we look at the intervals of each chord starting from the root,\n          there are two types of chords:\n          <ul>\n            <li>\n              {rn`I`} {c`I`}, {rn`IV`} {c`IV`}, {rn`V`} {c`V`}  intervals 4+3,\n              major chords written in uppercase Roman numerals\n            </li>\n            <li>\n              {rn`ii`} {c`ii`}, {rn`iii`} {c`iii`}, {rn`vi`} {c`vi`}  intervals\n              3+4, minor chords written in lowercase Roman numeral\n            </li>\n          </ul>\n        </P>\n\n        <P>\n          Be careful: the terms \"major chord\" / \"minor chord\" are not the same\n          thing as \"major scale\" / \"minor scale\". As we see, in a major scale we\n          have three major chords and three minor chords. We'll clarify this\n          when we reach a chapter on pieces in a minor scale.\n        </P>\n        <P>\n          Listen to the songs below and analyze the loops they are built upon.\n        </P>\n      </>\n    ),\n    composers: [\n      \"the-office\",\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n      \"doki-doki-literature-club-ost---your-reality\",\n\n      \"Viva_La_Vida_Coldplay\",\n    ],\n  },\n  {\n    title: \"Different loops for verse/chorus\",\n    titleChords: [\"I\", \"V\", \"vi\", \"IV\"],\n    mode: {\n      title: \"6 common triads in a major mode\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Form</h2>\n        <P>\n          The word <i>form</i> in music theory means \"how parts of a piece are\n          organized together\". How are they different, and what is common in\n          them that holds the whole piece together.\n        </P>\n        <P>\n          A song may have several parts: intro, verse, pre-chorus, chorus,\n          bridge. Some songs use different loops for different parts. For\n          example, a verse can go like {c`I vi IV V I vi IV V`} and a chorus can\n          go like {c`vi IV I V vi IV I V`}\n        </P>\n        <P>\n          Throughout the book you can hover over colorful chords to see their\n          Roman numerals.\n        </P>\n        <P>\n          As you analyze pieces in this chapter, listen to them on YouTube and\n          read the lyrics to understand which parts they have. Then, as you\n          follow the score below, see if different parts use contrasting loops.\n        </P>\n        <h2>Timeline of loops</h2>\n        <P>\n          Making pieces entirely of four-chord loops is a recent innovation  it\n          gained popularity in the 1950s. {q(\"tagg_loops\")} {q(\"nobile\")}{\" \"}\n          Neither Mozart nor Chopin composed like that.\n        </P>\n        <P>In the songs below you'll find another popular loop: </P>\n        <P>\n          {a(\n            \"https://en.wikipedia.org/wiki/I%E2%80%93V%E2%80%93vi%E2%80%93IV_progression\",\n            \"IVviIV progression\",\n          )}{\" \"}\n          has two common rotations: {c`I V vi IV I V vi IV`} and{\" \"}\n          {c`vi IV I V vi IV I V`}\n        </P>\n        <P>\n          Unlike the{\" \"}\n          {a(\n            \"https://en.wikipedia.org/wiki/%2750s_progression\",\n            \"'50s progression\",\n          )}{\" \"}\n          {c`I vi IV V`}, the {c`I V vi IV`} only started gaining popularity\n          after the '70s and peaked in 2000s - as you can check on Wikipedia\n          sorting examples by year. This is an arbitrary cultural event - the\n          history might as well go the other way around.\n        </P>\n        <P>\n          As you have heard many old songs through radio and films during your\n          lifetime, you might have learned their precedence. Do you hear the\n          former progression as \"older\", \"more ancient\"?\n        </P>\n\n        <h2>Intervals</h2>\n        <P>\n          A smallest interval between the two notes in Western music is called a\n          semitone. Here are semitones built up from all notes of a major scale:{\" \"}\n          {c`1 b2`}, {c`2 b3`}, {c`3 4`}, {c`4 #4`}, {c`5 b6`}, {c`6 b7`},{\" \"}\n          {c`7 1`} Physically, all semitones between two consecutive notes are\n          the same.\n        </P>\n        {/* <P>Another two intervals that are important are three semitones and four semitones</P> */}\n        <h2>Other resources</h2>\n        <P>\n          If you're lost in my narrative, try these instead:\n          <ul>\n            <li>{a(\"https://www.lightnote.co/\", \"Lightnote\")}</li>\n            <li>{a(\"https://book-one.hooktheory.com/\", \"Hooktheory\")}</li>\n            <li>\n              {a(\n                \"https://learningmusic.ableton.com/\",\n                \"Ableton's Guide on Music\",\n              )}\n            </li>\n          </ul>\n        </P>\n        <h2>Drop your MIDI files</h2>\n        <P>\n          If you have your own MIDI file and you want to see it colored, drag\n          and drop it to this website.\n        </P>\n        <P>\n          <FileDropBox />\n        </P>\n        <P>\n          If you want me to color a specific piece, reach out via{\" \"}\n          <a href=\"mailto:cxielamiko@gmail.com\">cxielamiko@gmail.com</a> or{\" \"}\n          <a href=\"https://t.me/vitalypavlenko\">https://t.me/vitalypavlenko</a>\n        </P>\n      </>\n    ),\n    composers: [\n      \"someone-like-you\",\n      \"someone-you-loved-lewis-capaldi\",\n      \"Ed_Sheeran_Perfect\",\n      \"dont-stop-believing-piano\",\n      \"sign-of-the-times---harry-styles\",\n      \"A_Thousand_Miles\",\n    ],\n  },\n  {\n    title: \"Loops in minor\",\n    titleChords: [\"iv\", \"i\"],\n    mode: {\n      title: \"natural minor without bIII\",\n      chords: [\"iv\", \"v\", \"bVI\", \"bVII\", \"i\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Chords in natural minor</h2>\n        <P>\n          Another scale that's widely used in Western music is a natural minor\n          scale: {c`1 2 b3 4 5 b6 b7 1 2 b3 4 5 b6 b7 1`}\n        </P>\n        <P>\n          For this scale we can also form chords by taking every other note from\n          each root. This way we'll get seven chords:{\" \"}\n          {c`i iio bIII iv v bVI bVII i`}\n        </P>\n        <P>\n          In this chapter we'll look at pieces which have loops made of a subset\n          of these chords:\n        </P>\n        <P>\n          <ChordStairs mode={STRICT_NATURAL_MINOR} />\n        </P>\n        <P>A note on pronunciation: {rn`VI`} is a \"flat-six major chord\"</P>\n        <P>\n          Some of these pieces have four-chord loops, while others have longer\n          strings of chords. As you analyze them, try to find any patterns. Is\n          there a pair of chords which often go together? Is there a frequent\n          sequence of three chords?\n        </P>\n        <h2>Major and minor chords</h2>\n        <P>\n          There are two types of triads commonly used in Western music: major\n          chords and minor chords.\n        </P>\n        <P>\n          Here are pairs of minor vs major chords - not in any particular mode,\n          just \"in the air\":\n          <ul>\n            <li>\n              {c`i`} {c`I`}\n            </li>\n            <li>\n              {c`ii`} {c`II`}\n            </li>\n            <li>\n              {c`biii`} {c`bIII`}\n            </li>\n            <li>\n              {c`iii`} {c`III`}\n            </li>\n            <li>\n              {c`iv`} {c`IV`}\n            </li>\n            <li>\n              {c`v`} {c`V`}\n            </li>\n            <li>\n              {c`bvi`} {c`bVI`}\n            </li>\n            <li>\n              {c`vi`} {c`VI`}\n            </li>\n            <li>\n              {c`bvii`} {c`bVII`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Minor chords have a smaller interval of three semitones at the bottom\n          and a bigger interval of four semitones at the top.\n        </P>\n        <P>\n          Major chords has a smaller interval of three semitones at the top and\n          a bigger interval of four semitones at the bottom.\n        </P>\n        <P>\n          One interesting observation is that chords built on roots 1 {c`1`}, 4{\" \"}\n          {c`4`} and 5 {c`5`} are:\n          <ul>\n            <li>\n              major chords {c`I`} {c`IV`} {c`V`} if built on a major scale{\" \"}\n              {c`1 2 3 4 5 6 7 1`}\n            </li>\n            <li>\n              minor chords {c`i`} {c`iv`} {c`v`} if built on a minor scale{\" \"}\n              {c`1 2 b3 4 5 b6 b7 1`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          So that's the connection between a major scale and major chords, and\n          also between a minor scale and minor chords.\n        </P>\n      </>\n    ),\n    composers: [\n      \"still-dre---variation-composition\",\n      \"Im_Blue_Eiffel_65\",\n      \"Never_Gonna_Give_You_Up\",\n      \"Lovely_Billie_Eilish\",\n      \"Interstellar\",\n    ],\n  },\n\n  {\n    title: \"i i VI V\",\n    titleChords: [\"i\", \"i\", \"bVI\", \"V\"],\n    mode: {\n      title: \"\",\n      chords: [\"i\", \"bVI\", \"V\"],\n    },\n    pretext: () => (\n      <>\n        <h2>i i VI V</h2>\n        <P>\n          These songs exploit an endless loop of {c`i i bVI V i i bVI V`}. So,\n          they don't fit within the natural minor scale {c`1 2 b3 4 5 b6 b7 1`},\n          since {c`V`} uses a note {c`7`}\n        </P>\n        <P>\n          You might say that these songs are using an extended minor scale:{\" \"}\n          {c`1 2 b3 4 5 b6 b7 7 1`}\n        </P>\n        <P>\n          Or you might say that the chord {c`V`} is drawn from a harmonic minor\n          scale, unlike all other chords: {c`1 2 b3 4 5 b6 7 1`}\n        </P>\n        <P>\n          Songs besides the top 100 that have the same pattern:\n          <ul>\n            <li>\n              {a(\n                \"/f/road-trippin---red-hot-chili-peppers\",\n                \"Red Hot Chili Peppers. Road trippin'\",\n              )}\n            </li>\n            <li>\n              {a(\n                \"/f/seven-nation-army-arr.-nikodem-lorenz\",\n                \"The White Stripes. Seven Nations Army\",\n              )}\n            </li>\n            <li>\n              {a(\n                \"/f/loonboon---laura-shigihara-arranged-by-piano-keyng\",\n                \"Laura Shigihara. Loonboon\",\n              )}\n            </li>\n          </ul>\n        </P>\n        {/* <h2>Historical context</h2>\n        <P>\n          Until a natural minor mode gained popularity, a minor mode mostly used{\" \"}\n          {c`V`}. However, the examples below are modern, because they are made\n          of an endless four-measure loop  which is also a modern thing. The\n          truly old examples will appear in the next chapter.\n        </P> */}\n      </>\n    ),\n    composers: [\n      \"Requiem_for_a_Dream\",\n      \"we-are-number-one-but-it-s-a-piano-transcript\",\n      \"Believer_-_Imagine_Dragons\",\n    ],\n  },\n\n  {\n    title: DOUBLE_TONIC_CHAPTER_TITLE,\n    pretext: () => (\n      <>\n        <h2>Natural minor = major</h2>\n        <P>Here's a C major scale: {c`1 2 3 4 5 6 7`}</P>\n        <P>Here's an A minor scale: {ct(`1 2 b3 4 5 b6 b7`, -3)}</P>\n        <P>\n          Here's an A minor scale played the note 3:\n          {ct(`b3 4 5 b6 b7 1 2`, -3)}\n        </P>\n        <P>\n          Notice that C major scale and A minor scale played from {c`b3`} sound\n          exactly the same.\n        </P>\n        <P>\n          Therefore, these two sequences of chords sound the same even if they\n          look different:\n        </P>\n        <P>\n          <ul>\n            <li>{c`I ii iii IV V vi`} - in a C major scale</li>\n            <li>{ct(`bIII iv v bVI bVII i`, -3)} - in a A minor scale</li>\n          </ul>\n        </P>\n        <P>\n          This is a fundamental relation. Each major scale has a <i>relative</i>{\" \"}\n          minor scale. They both share the exact set of piano notes. What's\n          different is the tonic note from which we start to count the scale.\n        </P>\n        <P>\n          So, a scale isn't just a set of notes. What makes a set of notes a\n          scale is a sense of tonic. The tonic note {c`1`} should be played\n          frequently. Melodies often start with {c`1`} and almost always end on\n          it. The <i>tonic chord</i> - {c`I`} or {c`i`} - should be played at\n          key moments within the piece. When exactly?\n        </P>\n        <h2>Double-tonic loops</h2>\n        <P>Consider this loop in C major: {c`vi IV I V`}</P>\n        <P>\n          I can reinterpret the same notes in A minor:{\" \"}\n          {ct(`i bVI bIII bVII`, -3)}\n        </P>\n        <P>When a piece uses this loop, what's the correct interpretation?</P>\n        <P>\n          In short, the situation is as complex as it is: there's no single\n          correct interpretation. You may hear it one way or the other. The\n          other people in the internet may hear it not the same way as you.\n          Those people may argue about the correct tonic in a particular song.\n          These arguments may or may not make sense to you. Should you even\n          bother?\n        </P>\n        <P>This situation is called \"double-tonic\". {q(\"richards\")}</P>\n        <P>\n          Below I present two colorings: major next to minor. I've chosen the\n          minor coloring inside the scores. To learn how to change the coloring,\n          read instructions inside \"Despacito\".\n        </P>\n      </>\n    ),\n    composers: [\n      \"despacito-piano-cover-peter-bence\",\n      \"river-flows-in-you\",\n      \"Yann_Tiersen_Amelie\",\n      \"All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\",\n      \"Let_Her_Go_Passenger\",\n      \"Another_Love__-_Tom_Odell_Professional\",\n      \"alan-walker---alone-piano\",\n      \"old-town-road---lil-nas-x-ft.-billy-ray-cyrus\",\n    ],\n  },\n  {\n    title: \"Functional natural minor\",\n    titleChords: [\"bVII\", \"V\", \"i\"],\n    composers: [\n      \"game-of-thrones-main-piano\",\n      \"sadness-and-sorrow-for-piano-solo\",\n      \"gurenge--demon-slayer-kimetsu-no-yaiba-op\",\n      \"Hallelujah\",\n    ],\n    pretext: () => (\n      <>\n        <h2>Major and minor chords in modes</h2>\n        <P>\n          Recall: six common chords in a natural minor mode are{\" \"}\n          {c`i bIII iv v bVI\n        bVII`}\n          <ul>\n            <li>\n              Three minor chords in a minor mode are {c`i`}, {c`iv`} and {c`v`}\n            </li>\n            <li>\n              Three major chords in a minor mode are {c`bIII`}, {c`bVI`} and{\" \"}\n              {c`bVII`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Recall: six common chords in a major mode are {c`I ii iii IV V vi`}\n          <ul>\n            <li>\n              Three minor chords: {c`ii`}, {c`iii`} and {c`vi`}\n            </li>\n            <li>\n              Three major chords: {c`I`}, {c`IV`} and {c`V`}\n            </li>\n          </ul>\n        </P>\n        <h2>Historical context</h2>\n        <P>\n          Throughout the 19th century, there was no such thing as a natural\n          minor mode with solely {c`v`} chord and without any {c`7`} note in\n          minor. No composers wrote that way.\n        </P>\n        <P>\n          A modern natural minor is a recent invention  it gained popularity in\n          1970s. {q(\"alf_aeolian\")} So, all examples below are pretty modern.\n        </P>\n        <P>\n          We'll look at the older version of minor in the next few chapters.\n        </P>\n        <P>{s`minor_cadence:minor_v`}</P>\n      </>\n    ),\n  },\n  {\n    title: \"Triadic minor with V\",\n    titleChords: [\"V\", \"i\"],\n    pretext: () => (\n      <>\n        <h2>Chords in a minor with {rn`V`}</h2>\n        <P>\n          So, an older version of a minor mode has these chords:{\" \"}\n          {c`i bIII iv v V bVI bVII`}\n        </P>\n        <P>\n          Most sections end with {c`V`} or {c`V i`} chords  you'll see a lot of{\" \"}\n          {c`7`} notes at the right border of the scores.\n        </P>\n        <P>\n          The chord {c`v`} is usually used at the beginning of the section  eg.\n          as {c`i v`}. In most pieces it's not used at all.\n        </P>\n        <P>\n          In some pieces a {c`V`} is replaced with its synonym {c`V7`}.\n        </P>\n        <h2>Functional harmony</h2>\n        <P>\n          Some musicians call it \"functional harmony\". What does it mean? It\n          implies that chords aren't just being put at completely random orders\n          for each new piece.\n        </P>\n        <P>\n          Sections most often start with {c`i`}. They most often end with{\" \"}\n          {c`bVI bVII V i`}, {c`iv V i`}, {c`bVI V i`}.\n        </P>\n        <P>\n          Chord pairs {c`V i`} and {c`V bVI`} are frequent, whereas {c`V iv`} or{\" \"}\n          {c`V bVII`} are rare. {c`V v`} is extremely rare, it almost \"makes no\n          sense\".\n        </P>\n        <P>\n          A {c`i bVII`} will most likely be continued with {c`bVI`}\n        </P>\n        <P>\n          Some chord chunks are also frequent: {c`iv i V i`}, {c`i bVII bVI V`},{\" \"}\n          {c`bVII bIII`}. They are used like formulas.\n        </P>\n        <P>\n          Composers may use them consciously or subconsciously. As they compose,\n          they play a draft and discard something that \"doesn't sound well\". But\n          how can anything sound well?\n        </P>\n        <P>\n          We hear something as \"nice\" because it was very probable in all pieces\n          of music that we have been listening to throughout our whole life.\n        </P>\n        <P>\n          And our hearing system constantly tries to predict what will happen\n          next. So, if there are rules, probabilities, frequencies or other for\n          a brain to memorize pieces faster, then a brain will be constantly\n          extracting those rules and updating its model of Western music in\n          background - during our entire life.\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"minor with V\",\n      chords: [\"iv\", \"bVI\", \"i\", \"bIII\", \"v\", \"Vsus4\", \"V\", \"V7\", \"bVII\"],\n    },\n    composers: [\n      \"Bella_Ciao\",\n      \"Gravity_Falls_Opening\",\n      \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\",\n      \"Pokemon_Theme_Song\",\n      \"attack-on-titan-theme-guren-no-yumiya\",\n      \"Je_Te_Laisserai_Des_Mots_-_Patrick_Watson\",\n    ],\n  },\n  {\n    title: \"Functional major\",\n    titleChords: [\"V\", \"V7\", \"I\"],\n    mode: {\n      title: \"major\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\", \"V7\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Functional major</h2>\n        <P>\n          There's a functional harmony for major mode as well. Some chord pairs\n          and longer sequences are more probable than other.\n        </P>\n        <P>\n          Interestingly, functional major and functional minor modes have some\n          parallels. The most solid ending in them is {c`V I`} or {c`V i`},\n          respectively.\n        </P>\n        <P>\n          {k(\"v7-to-major-i\", \"V7 to I\")} {k(\"V7-to-minor-i\", \"V7 to i\")}\n        </P>\n        <P>\n          In both of them you can use {c`V7`} as a synonym for {c`V`}. And the\n          endings like {c`V7 I`} or {c`V7 i`} are even more solid.\n        </P>\n        <P>\n          {c`IV`} in major has a similar distribution around those two chords as{\" \"}\n          {c`iv`}.\n        </P>\n        <P>\n          As you listen to the pieces, pay attention to chord pairs. Do you hear\n          some of them as \"very common\"?\n        </P>\n        <h2>Common types of chords</h2>\n        <P>\n          Most modern Western pieces are built as two parallel streams: chords\n          and melody. Chords are \"aligned\" with the melody. Some notes in melody\n           downbeats, countour turnaround points  usually use one of the notes\n          of the current chord.\n        </P>\n        <P>\n          If we look at the intervals between notes of a chord, we'll see that\n          there are three types of chords that are used in modern Western music:\n          <ul>\n            <li>\n              Major chords (4 semitones + 3 semitones):{\" \"}\n              {c`I II bIII IV V bVI bVII`} etc. There are 12 different major\n              chords  you can build one on any of the twelve notes.\n            </li>\n            <li>\n              Minor chords (3 semitones + 4 semitones): {c`i ii iii iv v vi`}\n              etc. Again, there are 12 different minor chords.\n            </li>\n            <li>\n              Dominanth seventh chords (4 semitones + 3 semitones + 3\n              semitones): So far we've only seen {c`V7`}. However, there are\n              pieces where other chords of the same interval are used:{\" \"}\n              {c`I7 V7/V V7/vi IV7 V7 V7/ii V7/iii`}\n            </li>\n          </ul>\n        </P>\n        <h2>Why these colors?</h2>\n        <P>\n          Previously, people tried to design colored notations by assigning\n          colors to notes in a rainbow order. This is an obvious idea. However,\n          it doesn't help to highlight the structures that are actually frequent\n          in Western music.\n        </P>\n        <P>\n          There are three main groups of chords in functional harmony:\n          <ul>\n            <li>\n              tonic chords begin and end sections: {c`I`} and {c`i`}\n            </li>\n            <li>\n              dominants end sections or precede tonic chords at the end: {c`V`},{\" \"}\n              {c`V7`}, {c`bVII`}\n            </li>\n            <li>\n              predominants preced dominants at the end: {c`IV`}, {c`iv`},{\" \"}\n              {c`ii`} and others\n            </li>\n          </ul>\n        </P>\n        <P>\n          My coloring makes these three groups as visually distinct as possible.\n          And also, it makes colors of common chords to blend together. This is\n          because I also follow the rainbow, but in the order of thirds:\n          {c`b2 2 4 #4 b6 6 1 b3 3 5 b7 7`}\n        </P>\n        <P>\n          <Metaphors />\n        </P>\n        <P>\n          <ChordStairs mode={MAJOR_MODE} />\n        </P>\n        <P>\n          <ChordStairs mode={MINOR_MODE} />\n        </P>\n        <P>\n          Same vibe: <ul>{A(\"michishirube---violet-evergarden-ed\")}</ul>\n        </P>\n      </>\n    ),\n    composers: [\n      \"Canon_in_D\",\n      \"a-thousand-years\",\n      \"John_Lennon_Imagine\",\n\n      \"Cant_Help_Falling_In_Love\",\n    ],\n  },\n  {\n    title: \"Classical V7 i\",\n    titleChords: [\"V7\", \"i\"],\n    composers: [\n      \"Carol_of_the_Bells\",\n      \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\",\n      \"theme-from-schindler-s-list---piano-solo\",\n    ],\n  },\n  {\n    title: \"Circle of fifths\",\n    titleChords: [\"i\", \"iv\", \"bVII\", \"bIII\"],\n    pretext: () => (\n      <>\n        <h2>Circle of fifths in minor</h2>\n        <P>\n          If four-chord loops didn't quite appear throughout 17..19th centuries,\n          eight-chord loops did. The most important loop since Baroque era was\n          The Circle of Fifths progression.\n        </P>\n        <P>The model example: {c`i iv bVII bIII bVI iio V i`}</P>\n        <P>\n          The idea is to take the next chord's root three notes up from a\n          previous chord's root, going around a scale.\n        </P>\n        <P>Here are the roots of these chords: {c`1 4 b7 b3 b6 2 5 1`}</P>\n        <P>\n          There are options. A rare {c`iio`} chord may be replaced with {c`iv`},\n          which sounds \"similar\": these chords share two notes. This way we'll\n          get {c`i iv bVII bIII bVI iv V i`}\n        </P>\n        <P>{s`cycle_root_motion:5`}</P>\n      </>\n    ),\n    mode: {\n      title: \"circle of fifths\",\n      chords: [\"i\", \"iv\", \"bVII\", \"bIII\", \"bVI\", \"iio7\", \"bII\", \"V7\"],\n    },\n    composers: [\n      \"passacaglia---handel-halvorsen\",\n      \"g-minor-bach-original\",\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n      \"vivaldi---summer---piano\",\n    ],\n  },\n  {\n    title: \"IV in minor\",\n    titleChords: [\"IV\", \"i\"],\n    pretext: () => (\n      <>\n        <h2>Recap with some terminology</h2>\n        <P>\n          Most modern Western pieces are structured as follows: their entire\n          sections are either in a major mode {c`I ii iii IV V vi V7 I`} or in a\n          minor mode {c`i bIII iv v V bVI bVII V7 i`}.\n        </P>\n        <P>\n          This is called a <i>diatonic harmony</i>  meaning that we build\n          chords as three notes taken <i>in thirds</i> (1-3-5, 2-4-6 etc.) from\n          the mode's scale (with the exception of {c`V`}/{c`V7`} in a minor\n          mode).\n        </P>\n        <P>\n          One way of organizing chord changes is a loop or several loops. Loops\n          have a length of four measures. The time is therefore divided into\n          four-measure phrases which we show with white vertical bars.\n        </P>\n        <P>\n          Another way of organizing chord changes is a functional harmony: a\n          string of chords starts with a <i>tonic chord</i> {c`I`} or {c`i`} and\n          progresses according to local transition probabilities up to a{\" \"}\n          <i>cadential formula</i> (i.e. a typical ending)  most often ending\n          with {c`V I`} in a major mode and with {c`bVI bVII i`} or {c`V i`} in\n          minor mode.\n        </P>\n        <h2>Chromatic chords</h2>\n        <P>\n          A chromatic chord is a chord used in a mode where there's no way to\n          build it in thirds using mode's scale degrees. There are two popular\n          extensions of a diatonic harmony with chromatic chords: borrowed\n          chords and applied chords.\n        </P>\n        <P>\n          As we'll see further, chromatic chords are most often either major\n          chords, minor chords or dominant seventh chords. Therefore, the rule\n          \"to use common types of chords\" is more important for composers than\n          the rule \"to stick to a certain scale of 7 or 8 notes\".\n        </P>\n        <h2>Dorian {rn`IV`} in minor</h2>\n        <P>\n          Some pieces use a {c`IV`} chord inside an otherwise minor mode piece:{\" \"}\n          {c`i IV i`}. Therefore the total chord palette in that piece becomes{\" \"}\n          {c`i bIII iv IV v V bVI bVII V7 i`}\n        </P>\n        <P>Most pieces use this chord only at a single particular place.</P>\n        <P>\n          Some people say that {c`IV`} in {c`i IV i`} is <i>borrowed</i> from\n          major into minor.\n        </P>\n        <P>\n          Some people call this chord a <i>dorian</i>. Here's what they mean:\n          there's a concept of a dorian scale {c`1 2 b3 4 5 6 b7 1`}. If a piece\n          is using this scale as a primary one, then {c`IV`} is a diatonic to\n          it: it's in the scale. This scale yields these chords:{\" \"}\n          {c`i bIII IV v bVI bVII i`}\n        </P>\n        <P>\n          There are no pieces throughout top 100 corpus that are built entirely\n          using a dorian mode. There are degrees to which a {c`6`} note is used\n          within a minor mode, most often as a {c`IV`} chord. See examples:{\" \"}\n          {s`dorian: episodic`}\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"dorian minor\",\n      chords: [\"iv\", \"IV\", \"bVI\", \"i\", \"bIII\", \"v\", \"bVII\"],\n    },\n    composers: [\n      \"nothing-else-matters---metallica\",\n      \"dragonborn---skyrim-theme-song-piano-solo\",\n      \"solas---jamie-duffy\",\n      \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\",\n      \"Mad_world_Piano\",\n    ],\n  },\n  {\n    title: \"iv in major\",\n    titleChords: [\"iv\", \"I\"],\n    pretext: () => (\n      <>\n        <h2>{rn`iv`} in major</h2>\n        <P>{s`chromatic_chords:iv`}</P>\n      </>\n    ),\n    composers: [\n      \"calum-scott---you-are-the-reason-piano-sheet-lyrics-lyrics-version-link-in-description\",\n      \"how-far-i-ll-go-~-moana-ost\",\n    ],\n  },\n  {\n    title: \"VII in major\",\n    titleChords: [\"bVII\", \"I\"],\n    mode: {\n      title: \"Mario cadence\",\n      chords: [\"bVI\", \"bVII\", \"I\"],\n    },\n    composers: [\n      \"when-i-was-your-man---bruno-mars-600e3a\",\n      \"Take_on_me\",\n\n      \"Super_Mario_Bros_Main_Theme\",\n      \"welcome-to-the-black-parade---my-chemical-romance\",\n    ],\n  },\n  {\n    title: \"V7/V\",\n    titleChords: [\"V7/V\", \"V\"],\n    pretext: () => (\n      <>\n        <h2>Applied dominant: {rn`V7/V`}</h2>\n        <P>{c`I ii V7 I I V7/V V7 I`}</P>\n        <P>\n          There are diatonic major pieces where the only chromatic chord is{\" \"}\n          {c`II7`} or {c`II`} - a major chord built on a {c`2`} root instead of\n          a diatonic {c`ii`} chord. How to explain this chord?\n        </P>\n        <P>\n          Most often it's followed by the {c`V`} chord: {c`II7 V`}. Or, as they\n          say, {c`II7`} is resolved to {c`V`}.{\" \"}\n        </P>\n        <P>\n          Let's recolor it: let's treat this {c`V`} as a brief {ct(`I`, -5)}{\" \"}\n          tonic chord. So, a C major's {c`II7 V`} is a G major's{\" \"}\n          {ct(`V7 I`, -5)}. Because of that, the {c`V7/V`} chord is called{\" \"}\n          {rn`V7/V`} (pronounced \"five seven of five\"), especially when\n          preceding the {rn`V`} chord.\n        </P>\n        <P>\n          We briefly <i>tonicize</i> the {rn`V`} chord (or the {c`5`} scale\n          degree) - we make it a <i>local tonic</i> just for the duration of\n          these two chords. A {rn`V7/V`} chord is also called a{\" \"}\n          <i>secondary dominant</i> or an <i>applied dominant</i>.\n        </P>\n        <P>\n          Sometimes {c`II7`} is on its own, not followed by {c`V`}\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"\",\n      chords: [\"V7/V\", \"V7\", \"I\"],\n    },\n    composers: [\n      \"piano-man-piano\",\n      \"Disney_Pixar_Up_Theme\",\n      \"Test_Drive_How_to_Train_Your_Dragon\",\n      \"Dawn_Pride_and_Prejudice\",\n    ],\n  },\n  {\n    title: \"V7/vi\",\n    titleChords: [\"V7/vi\", \"vi\"],\n    mode: {\n      title: \"major with V/vi\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V/vi\", \"Vsus4\", \"V\", \"V7\"],\n    },\n    pretext: () => (\n      <>\n        <h2>{rn`V7/vi`}</h2>\n        <P>{ct(`I V7 I V7/vi vi V7 I`, -12)}</P>\n        <P>\n          Another applied chord that's common is {c`V/vi`} or {c`V7/vi`}. It's\n          usually resolved as {c`V7/vi vi`}, therefore tonicizing a {c`vi`}{\" \"}\n          chord making it a local tonic: {c`V7/vi vi`} in C major equals to{\" \"}\n          {ct(`V7 i`, -3)} in A minor. So, this applied chord tonicizes a\n          relative minor.\n        </P>\n      </>\n    ),\n    composers: [\n      \"your-song-piano\",\n      \"sia---snowman\",\n      \"my-lie-watashi-no-uso---your-lie-in-april\",\n      \"kimi-no-na-wa---sparkle-theishter-2016\",\n    ],\n  },\n  {\n    title: \"Vsus4\",\n    titleChords: [\"Vsus4\", \"V\"],\n    mode: [\n      { title: \"major\", chords: [...MAJOR_MODE.chords, \"Vsus4\"] },\n      { title: \"minor\", chords: [...MINOR_MODE.chords, \"Vsus4\"] },\n    ],\n    pretext: () => (\n      <>\n        <h2>{rn`Vsus4`}</h2>\n        <P>\n          There's a frequent diatonic chord that isn't either minor or major\n          chord: a {c`Vsus4`} chord. It has intervals of 5+2 semitones. It's\n          most commonly resolved as {c`Vsus4 V`}, maybe further as{\" \"}\n          {c`Vsus4 V I`}. Sometimes it's used as {c`Vsus47`}: {c`Vsus47 V7 I`}\n        </P>\n        <P>\n          <i>sus4</i> means that a {ct(`1`, 12)} in it - so called a{\" \"}\n          <i>perfect fourth</i> (i.e. 5 semitones) over the root - is{\" \"}\n          <i>suspended</i> and then resolved into {c`7`}: {c`1 7 Vsus4 V`}.\n          Although in modern composition it's not necessarily resolved:{\" \"}\n          {s`V:sus4`}, {s`V:sus4_unresolved`}\n        </P>\n      </>\n    ),\n    composers: [\n      \"Pokemon_Theme_Song\",\n      \"my-heart-will-go-on\",\n      \"Ed_Sheeran_Perfect\",\n    ],\n  },\n  {\n    title: \"V7/ii\",\n    titleChords: [\"V7/ii\", \"ii\"],\n    mode: [\n      MAJOR_MODE,\n      {\n        title: \"applied chords\",\n        chords: [\"V7/ii\", \"ii\", \"V7/V\", \"V\", \"V7/vi\", \"vi\"],\n      },\n    ],\n    pretext: () => (\n      <>\n        <h2>Applied chords in a major mode</h2>\n        <P>Let's list all possible applied chords in major.</P>\n        <P>\n          {rn`V7/I`} is just a {rn`V7`}: {c`V7 I`}\n        </P>\n        <P>\n          {rn`V7/ii`} is a major chord on {c`6`}, so instead of a diatonic{\" \"}\n          {c`vi`} we get a {c`V/ii`} or a {c`V7/ii`}. It's resolved to {c`ii`}.\n          I put it in a context to distinguish it from a standard {rn`V7`} in\n          another key: {c`I V7 I V7/ii ii V7 I`}\n        </P>\n        <P>\n          {rn`V7/iii`} is a major chord on {c`7`}, so instead of a rarely used\n          diminished 3+3 semitones chord {c`viio`} we get a {c`V/iii`} or a{\" \"}\n          {c`V7/iii`}: {c`I V7 I V7/iii iii V7 I`}\n        </P>\n        <p>\n          {rn`V/IV`} is simply {rn`I`} {c`I`}. However, {rn`V7/IV`} {c`V7/IV`}{\" \"}\n          makes sense: it's a non-diatonic chord. {c`I V7 I V7/IV IV V7 I`}\n        </p>\n      </>\n    ),\n    composers: [\n      \"Omori_Duet\",\n      \"abba--the-winner-takes-it-all\",\n      \"All_I_Want_for_Christmas_is_You\",\n    ],\n  },\n  {\n    title: MODULATIONS_CHAPTER_TITLE,\n    mode: {\n      chords: [\"V7\", \"I\", \"i\"],\n      title: \"\",\n    },\n    pretext: () => (\n      <>\n        <h2>Modulations in classical music: endless V7 to I and V7 to i</h2>\n      </>\n    ),\n    composers: [\n      \"minuet-bwv-anhang-114-in-g-major\",\n      \"flight-of-the-bumblebee\",\n\n      \"wa-mozart-marche-turque-turkish-march-fingered\",\n\n      \"Fr_Elise\",\n    ],\n  },\n  {\n    title: \"blues, penta, hexa\",\n    titleChords: [\"1\", \"b3\", \"4\", \"5\", \"b7\"],\n    pretext: () => (\n      <>\n        <P>\n          {k(\"blues-scale\")} {k(\"minor-pentatonic\")}\n        </P>\n        <P>\n          {s`scale:blues`} {s`scale:minor_pentatonic`}{\" \"}\n          {s`scale:major_pentatonic`} {s`scale:hexatonic_minor`}{\" \"}\n          {s`scale:hexatonic_major`}\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"scales of 5 and 6 notes\",\n      chords: [\"1\", \"b3\", \"4\", \"#4\", \"5\", \"b7\"],\n    },\n    composers: [\n      \"Undertale_-_Megalovania_Piano_ver._3\",\n      \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\",\n      \"fairy-tail-main-theme\",\n      \"africa---toto\",\n    ],\n  },\n  {\n    title: \"maj7\",\n    titleChords: [\"IVmaj7\", \"Imaj7\"],\n    mode: {\n      title: \"\",\n      chords: [\"ii7\", \"IVmaj7\", \"vi7\", \"Imaj7\", \"iii7\", \"V13\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Diatonic seventh chords</h2>\n        <P>\n          The most frequent chords in Western music are triads. They are built\n          on a scale by taking every other note starting from the root.\n        </P>\n        <P>\n          Let's see what we get if we take four notes instead of three using the\n          same idea. Here's a major scale: {c`1 2 3 4 5 6 7 1 2 3 4 5 6 7 1`}\n        </P>\n        <P>\n          <ul>\n            <li>\n              {c`1 3 5 7`} {c`Imaj7`} {rn`Imaj7`}  intervals 4+3+4, a\n              combination of {c`I iii`}, a major seventh chord\n            </li>\n            <li>\n              {c`2 4 6 1`} {c`ii7`} {rn`ii7`}  intervals 3+4+3, a combination\n              of {c`ii IV`}, a minor seventh chord\n            </li>\n            <li>\n              {c`3 5 7 2`} {c`iii7`} {rn`iii7`}  intervals 3+4+3, a combination\n              of {c`iii V`}, a minor seventh chord\n            </li>\n            <li>\n              {c`4 6 1 3`} {c`IVmaj7`} {rn`IVmaj7`}  intervals 4+3+4, a\n              combination of {c`IV vi`}\n            </li>\n            <li>\n              {c`5 7 2 4`} {c`V7`} {rn`V7`}  intervals 4+3+3, a combination of{\" \"}\n              {c`V viio`}, a dominant seventh chord\n            </li>\n            <li>\n              {c`6 1 3 5`} {c`vi7`} {rn`vi7`}  intervals 3+4+3, a combination\n              of {c`vi I`}, a minor seventh chord\n            </li>\n          </ul>\n        </P>\n        <P>\n          While it's easy to find minor seventh chords and dominanth seventh\n          chords in classical music (Mozart and Chopin), major seventh chords\n          emerged as a popular tool only since late 19th century. Erik Satie's\n          example below - {ct(`4 IVmaj7 IVmaj7 1 Imaj7 Imaj7`, 2)} - is the\n          earliest example I've found that consistently uses it as a main idea\n          of a piece. Also see {s`shuttle:IVmaj7_Imaj7`}\n        </P>\n      </>\n    ),\n    composers: [\n      \"Sweden_Minecraft\",\n      \"Golden_Hour__JVKE_Updated_Ver.\",\n      \"Gymnopdie_No._1__Satie\",\n      \"ylang-ylang---fkj-transcribed-by-lilroo\",\n      \"yuri-on-ice---piano-theme-full\",\n      \"congratulations---mac-miller\",\n      \"Clair_de_Lune__Debussy\",\n    ],\n  },\n  {\n    title: \"ii V I jazz\",\n    titleChords: [\"ii7\", \"V7\", \"Imaj7\"],\n    mode: {\n      title: \"jazz\",\n      chords: [\"ii7\", \"V7\", \"Imaj7\", \"ii7\", \"V7b9\", \"i7\"],\n    },\n    pretext: () => (\n      <>\n        <P>{s`cycle_root_motion:autumn_leaves`}</P>\n      </>\n    ),\n    composers: [\n      \"Fly_Me_to_the_Moon\",\n      \"autumn-leaves-jazz-piano\",\n      \"it-s-been-a-long-long-time---harry-james\",\n      \"Love_Like_You_Steven_Universe\",\n      \"ye-niqu-keru-yoru-ni-kakeru---racing-into-the-night\",\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n    ],\n  },\n  {\n    title: \"viio7, io7, biio7\",\n    titleChords: [\"viio7\", \"io7\", \"biio7\"],\n    pretext: () => (\n      <>\n        <h2>Fully diminished seventh chords</h2>\n        <P>\n          They have an intervalic structure 3+3+3(+3). There are exactly three\n          of them on a piano:\n        </P>\n        <P>\n          <ul>\n            <li>\n              {c`1 b3 #4 6`} {c`io7 biiio7 #ivo7 vio7`}\n            </li>\n            <li>\n              {c`b2 3 5 b7`} {c`biio7 iiio7 vo7 bviio7`}\n            </li>\n            <li>\n              {c`2 4 b6 7`} {c`iio7 ivo7 bvio7 viio7`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Or you can play them all together, which is even more fun:{\" \"}\n          {c`io7 biio7 iio7 biiio7 iiio7 ivo7 #ivo7 vo7 bvio7 vio7 bviio7 viio7`}\n        </P>\n        <P>\n          As you can see, they are fully symmetrical, so they don't have any{\" \"}\n          <i>root</i>. This makes them harder to notate.\n        </P>\n        <P>\n          They have many usages: {s`modulation:pivot`} {s`cto7:to_I`}{\" \"}\n          {s`cto7:to_V`} {s`applied:viio7/ii`} {s`applied:viio7/iv`}{\" \"}\n          {s`applied:viio7/V`}\n        </P>\n      </>\n    ),\n    composers: [\n      \"anastasia---once-upon-a-december\",\n      \"la-vie-en-rose-solo-accordion\",\n      \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\",\n      \"the_entertainer_scott_joplin\",\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n    ],\n  },\n  {\n    title: \"V/V/V\",\n    titleChords: [\"V7/vi\", \"V7/ii\", \"V7/V\", \"V7\"],\n    pretext: () => (\n      <>\n        <h2>Chain of dominants</h2>\n      </>\n    ),\n    composers: [\n      \"mii-channel-piano\",\n      \"Liebestraum_No._3_in_A_Major\",\n      \"dance-of-the-sugar-plum-fairy\",\n    ],\n  },\n\n  {\n    title: \"Style\",\n    pretext: () => (\n      <>\n        Here we present two most popular pieces by each composers. Can you see\n        that pieces of the same composer look more similar to each other than to\n        other composers?\n      </>\n    ),\n    composers: [\n      \"Fr_Elise\",\n      \"Sonate_No._14_Moonlight_1st_Movement\",\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n      \"One_Summers_Day_Spirited_Away\",\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n      \"Waltz_in_A_MinorChopin\",\n      \"Liebestraum_No._3_in_A_Major\",\n      \"tude_S._1413_in_G_Minor_La_Campanella__Liszt\",\n      \"river-flows-in-you\",\n      \"Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\",\n      \"Sweden_Minecraft\",\n      \"Wet_Hands_Minecraft\",\n      \"Gravity_Falls_Opening\",\n      \"eda-s-requiem---brad-breeck-piano\",\n\n      \"Maple_Leaf_Rag_Scott_Joplin\",\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n      \"kanye-west-homecoming-piano-cover\",\n      \"Viva_La_Vida_Coldplay\",\n      \"the-scientist---coldplay-piano-arrangement\",\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n      \"ballade-pour-adeline---richard-clayderman\",\n      \"Undertale_-_Megalovania_Piano_ver._3\",\n      \"Fallen_Down_Undertale\",\n      \"Clair_de_Lune__Debussy\",\n      \"arabesque-l.-66-no.-1-in-e-major\",\n      \"Super_Mario_Bros_Main_Theme\",\n      \"Zeldas_Lullaby\",\n      \"Gymnopdie_No._1__Satie\",\n      \"satie-e.---gnossienne-no.-1\",\n      \"wa-mozart-marche-turque-turkish-march-fingered\",\n      \"lacrimosa---requiem\",\n      \"Lovely_Billie_Eilish\",\n      \"Billie_Eilish_Bad_Guy\",\n      \"Ed_Sheeran_Perfect\",\n      \"Ed_Sheeran_Shape_of_you\",\n      \"Golden_Hour__JVKE_Updated_Ver.\",\n      \"what-falling-in-love-feels-like---jake25.17-fanmade-extended-version\",\n      \"dragonborn---skyrim-theme-song-piano-solo\",\n      \"secunda-the-elder-scrolls-v-skyrim\",\n      \"Dawn_Pride_and_Prejudice\",\n      \"liz-on-top-of-the-world\",\n      \"Canon_in_D\",\n      \"pachelbel-chaconne-in-f-minor\",\n      \"mii-channel-piano\",\n      \"wii-sports-theme-piano\",\n    ],\n  },\n];\n\nexport type Mode = { title: string; chords: Chord[] };\n","import autoBindReact from \"auto-bind/react\";\nimport React, { PureComponent } from \"react\";\nimport styled from \"styled-components\";\n\n// Slider color constants\nconst COLORS = {\n  TRACK_FILLED: \"#fff\", // Light gray for filled portion of track\n  TRACK_EMPTY: \"#000\", // Dark gray for empty portion of track\n  TRACK_BORDER: \"#888\", // Medium gray for borders\n  THUMB_BACKGROUND: \"#fff\", // Light gray for thumb (same as filled track)\n  THUMB_BORDER: \"#aaa\", // Medium gray for thumb border\n  THUMB_SHADOW: \"rgba(0, 0, 0, 0.4)\", // Semi-transparent black for shadow\n};\n\nconst SliderContainer = styled.div`\n  height: var(--charH);\n  padding: 0;\n  cursor: pointer;\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n  border: 0;\n  display: inline-block;\n`;\n\nconst SliderRail = styled.div`\n  width: calc(100% + var(--charW1));\n  height: 3px;\n  margin-top: -2px;\n  background: none;\n  position: absolute;\n  top: 50%;\n  box-sizing: border-box;\n  border: 1px solid var(--clickable);\n`;\n\nconst SliderKnob = styled.div`\n  height: var(--charH);\n  width: var(--charW1);\n  margin: 0;\n  border-radius: 0;\n  background-color: #fff;\n  position: absolute;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  left: ${(props) => props.pos};\n  transition: ${(props) => (props.dragging ? \"none\" : \"left 0.37s linear\")};\n`;\n\nexport const StyledRangeInput = styled.input.attrs({ type: \"range\" })`\n  -webkit-appearance: none;\n  background: transparent;\n  width: 100%;\n\n  &::-webkit-slider-runnable-track {\n    width: 100%;\n    height: 4px;\n    background: ${(props) => `linear-gradient(to right, \n      ${COLORS.TRACK_FILLED} ${(props.value / props.max) * 100}%, \n      ${COLORS.TRACK_EMPTY} ${(props.value / props.max) * 100}%)`};\n    border-radius: 2px;\n    border: 1px solid ${COLORS.TRACK_BORDER};\n  }\n\n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    height: 16px;\n    width: 16px;\n    border-radius: 50%;\n    background: ${COLORS.THUMB_BACKGROUND};\n    border: 1px solid ${COLORS.THUMB_BORDER};\n    margin-top: -7px; /* Centers the thumb on the track */\n    cursor: pointer;\n    box-shadow: 0 1px 3px ${COLORS.THUMB_SHADOW};\n  }\n\n  &::-moz-range-track {\n    width: 100%;\n    height: 4px;\n    background: ${(props) => `linear-gradient(to right, \n      ${COLORS.TRACK_FILLED} ${(props.value / props.max) * 100}%, \n      ${COLORS.TRACK_EMPTY} ${(props.value / props.max) * 100}%)`};\n    border-radius: 2px;\n    border: 1px solid ${COLORS.TRACK_BORDER};\n  }\n\n  &::-moz-range-progress {\n    background-color: ${COLORS.TRACK_FILLED};\n    height: 4px;\n    border-radius: 2px;\n  }\n\n  &::-moz-range-thumb {\n    height: 16px;\n    width: 16px;\n    border-radius: 50%;\n    background: ${COLORS.THUMB_BACKGROUND};\n    border: 1px solid ${COLORS.THUMB_BORDER};\n    cursor: pointer;\n    box-shadow: 0 1px 3px ${COLORS.THUMB_SHADOW};\n  }\n`;\n\nexport default class Slider extends PureComponent {\n  constructor(props) {\n    super(props);\n    autoBindReact(this);\n\n    this.node = React.createRef();\n    this.state = {\n      dragging: false,\n      draggedPos: null,\n    };\n  }\n\n  onMouseMove(event) {\n    if (this.state.dragging) {\n      const node = this.node.current;\n      const pos = Math.max(\n        Math.min((event.clientX - node.offsetLeft) / node.offsetWidth, 1),\n        0,\n      );\n      this.setState({\n        draggedPos: pos,\n      });\n      this.props.onDrag(pos);\n    }\n  }\n\n  onMouseDown(event) {\n    event.preventDefault();\n    event.persist();\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n    this.setState({ dragging: true }, () => this.onMouseMove(event));\n  }\n\n  onMouseUp(event) {\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n    // Wait a moment to prevent 'snapback' (pos momentarily won't match draggedPos)\n    setTimeout(() => {\n      this.setState({ dragging: false });\n    }, 150);\n    this.props.onChange(this.state.draggedPos);\n  }\n\n  render() {\n    const pos =\n      Math.max(\n        Math.min(\n          this.state.dragging ? this.state.draggedPos : this.props.pos,\n          1,\n        ),\n        0,\n      ) *\n        100 +\n      \"%\";\n\n    return (\n      <SliderContainer ref={this.node} onMouseDown={this.onMouseDown}>\n        <SliderRail />\n        <SliderKnob pos={pos} dragging={this.state.dragging} />\n      </SliderContainer>\n    );\n  }\n}\n","import { faDownload, faPause, faPlay } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { memo, useContext } from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"./AppContext\";\nimport { StyledRangeInput } from \"./Slider\";\nimport TimeSlider from \"./TimeSlider\";\n\nexport const FOOTER_HEIGHT = 25;\n\nconst StyledVolumeSlider = styled.div`\n  flex-shrink: 0;\n  width: 10%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0 10px;\n\n  &::before {\n    content: \"Vol\";\n    margin-right: 10px;\n  }\n\n  ${StyledRangeInput} {\n    width: 100%;\n  }\n`;\n\nconst StyledAppFooter = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: ${FOOTER_HEIGHT}px;\n  background: var(--background);\n  display: flex;\n  align-items: center;\n  padding: 0;\n  z-index: 10000000;\n  border-top: 1px solid var(--border);\n`;\n\nconst AppFooterMain = styled.div`\n  display: flex;\n  align-items: center;\n  flex: 1;\n  min-width: 0; // Prevents flex items from overflowing\n`;\n\nconst TempoSection = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-shrink: 0;\n  margin: 0 20px;\n  flex-direction: row;\n`;\n\nconst LatencySection = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 6.5em;\n  flex-shrink: 0;\n  margin: 0 20px;\n`;\n\nconst DownloadButton = styled.a`\n  width: 20px;\n  flex-shrink: 0;\n  text-align: center;\n  margin-left: 10px;\n`;\n\nconst PauseButton = styled.button`\n  width: 50px;\n  height: ${FOOTER_HEIGHT}px;\n  flex-shrink: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 16px;\n  line-height: 1;\n  margin-right: 10px;\n`;\n\nconst LatencyButton = styled.button`\n  height: ${FOOTER_HEIGHT}px;\n`;\n\nconst TimeSliderWrapper = styled.div`\n  flex: 2;\n  min-width: 300px;\n  margin: 0 10px;\n`;\n\nconst StyledTempoButton = styled.button`\n  width: 24px;\n  height: 24px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  color: #333;\n  border: 1px solid #999;\n  border-radius: 3px;\n  background: linear-gradient(to bottom, #f8f8f8 0%, #e0e0e0 100%);\n  box-shadow:\n    0 1px 2px rgba(0, 0, 0, 0.2),\n    inset 0 1px 0 rgba(255, 255, 255, 0.8),\n    inset 0 0 2px rgba(255, 255, 255, 0.5);\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  padding: 2px 0;\n  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);\n  transition: all 0.05s ease-in-out;\n  font-family:\n    Times New Roman,\n    serif;\n\n  &:active {\n    transform: translateY(1px);\n    box-shadow:\n      0 0 2px rgba(0, 0, 0, 0.2),\n      inset 0 1px 0 rgba(255, 255, 255, 0.8),\n      inset 0 0 2px rgba(255, 255, 255, 0.5);\n  }\n`;\n\nconst AppFooter: React.FC<\n  {\n    currentSongDurationMs: number;\n    ejected: boolean;\n    paused: boolean;\n    volume: number;\n    handleTimeSliderChange: any;\n    handleVolumeChange: any;\n    getCurrentPositionMs: any;\n    togglePause: any;\n    latencyCorrectionMs: number;\n    setLatencyCorrectionMs: (latency: number) => void;\n    tempo: number;\n    setTempo: (tempo: number) => void;\n  } & RouteComponentProps\n> = ({\n  currentSongDurationMs,\n  ejected,\n  paused,\n  volume,\n  handleTimeSliderChange,\n  handleVolumeChange,\n  getCurrentPositionMs,\n  togglePause,\n  latencyCorrectionMs,\n  setLatencyCorrectionMs,\n  location,\n  tempo,\n  setTempo,\n}) => {\n  const context = useContext(AppContext);\n  const canDownload = context?.currentMidiBuffer && context?.currentMidi;\n\n  const createBlobUrl = () => {\n    if (!context?.currentMidiBuffer) return \"\";\n    const blob = new Blob([context.currentMidiBuffer], { type: \"audio/midi\" });\n    return URL.createObjectURL(blob);\n  };\n\n  const getDownloadFilename = () => {\n    if (!context?.currentMidi) return \"download.mid\";\n    return `${context.currentMidi.title}.mid`;\n  };\n\n  const { pathname } = location;\n\n  const segments = pathname.split(\"/\").filter(Boolean);\n\n  let lastSegment = segments.length > 0 ? segments[segments.length - 1] : \"\";\n  if (!lastSegment.endsWith(\".mid\")) {\n    lastSegment = `${lastSegment}.mid`;\n  }\n\n  const handleTempoChange = (delta: number) => {\n    const newTempo = Math.max(0.1, Math.min(4, tempo + delta));\n    setTempo(Number(newTempo.toFixed(2)));\n  };\n\n  const formatTempo = (tempo: number) => {\n    const fixed = tempo.toFixed(2);\n    const [integer, decimal] = fixed.split(\".\");\n    if (decimal === \"00\") return integer;\n    if (decimal.endsWith(\"0\")) return `${integer}.${decimal[0]}`;\n    return fixed;\n  };\n\n  return (\n    <StyledAppFooter>\n      <AppFooterMain>\n        <PauseButton\n          onClick={togglePause}\n          title={paused ? \"Resume (use Space)\" : \"Pause (use Space)\"}\n          disabled={ejected}\n        >\n          <FontAwesomeIcon icon={paused ? faPlay : faPause} />\n        </PauseButton>\n\n        <TimeSliderWrapper>\n          <TimeSlider\n            paused={paused}\n            currentSongDurationMs={currentSongDurationMs}\n            getCurrentPositionMs={getCurrentPositionMs}\n            onChange={handleTimeSliderChange}\n          />\n        </TimeSliderWrapper>\n\n        <TempoSection>\n          <StyledTempoButton\n            onClick={() => handleTempoChange(-0.1)}\n            title={`Change tempo (Minus key)`}\n          >\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                height: \"100%\",\n                transform: \"translateY(-1px)\", // Fine-tuned adjustment\n              }}\n            >\n              <span\n                style={{\n                  fontSize: \"16px\",\n                  lineHeight: \"0.8\",\n                  fontWeight: \"bold\",\n                  marginBottom: \"-3px\", // Overlap adjustment\n                }}\n              >\n                _\n              </span>\n              <span\n                style={{\n                  fontSize: \"16px\",\n                  lineHeight: \"0.8\",\n                  fontWeight: \"bold\",\n                }}\n              >\n                -\n              </span>\n            </div>\n          </StyledTempoButton>\n          <span\n            style={{\n              // margin: \"0 15px\",\n              fontFamily: \"monospace\",\n              width: \"3em\",\n              textAlign: \"center\",\n              display: \"inline-block\",\n            }}\n          >\n            {formatTempo(tempo)}x\n          </span>\n          <StyledTempoButton\n            onClick={() => handleTempoChange(0.1)}\n            title={`Change tempo (Plus key)`}\n          >\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                height: \"100%\",\n                transform: \"translateY(-1px)\", // Fine-tuned adjustment\n              }}\n            >\n              <span\n                style={{\n                  fontSize: \"16px\",\n                  lineHeight: \"0.8\",\n                  fontWeight: \"bold\",\n                  marginBottom: \"-3px\", // Overlap adjustment\n                }}\n              >\n                +\n              </span>\n              <span\n                style={{\n                  fontSize: \"16px\",\n                  lineHeight: \"0.8\",\n                  fontWeight: \"bold\",\n                }}\n              >\n                =\n              </span>\n            </div>\n          </StyledTempoButton>\n        </TempoSection>\n\n        <LatencySection>\n          <LatencyButton\n            onClick={() => setLatencyCorrectionMs(latencyCorrectionMs - 100)}\n          >\n            \n          </LatencyButton>\n          <span style={{ fontFamily: \"monospace\" }}>\n            {`${\n              Math.sign(latencyCorrectionMs / 1000) >= 0 ? \"+\" : \"-\"\n            }${Math.abs(latencyCorrectionMs / 1000)\n              .toFixed(2)\n              .charAt(0)}.${Math.abs(latencyCorrectionMs / 1000)\n              .toFixed(2)\n              .charAt(2)}`}\n            s\n          </span>\n          <LatencyButton\n            onClick={() => setLatencyCorrectionMs(latencyCorrectionMs + 100)}\n          >\n            \n          </LatencyButton>\n        </LatencySection>\n\n        <StyledVolumeSlider>\n          <StyledRangeInput\n            title=\"Volume\"\n            min={0}\n            max={150}\n            step={1}\n            onChange={(e) => handleVolumeChange(e.target.value)}\n            onDoubleClick={(e) => {\n              handleVolumeChange(100);\n              e.preventDefault();\n              e.stopPropagation();\n            }}\n            value={volume}\n          />\n        </StyledVolumeSlider>\n\n        <DownloadButton\n          style={{\n            color: canDownload ? \"var(--neutral4)\" : \"var(--neutral6)\",\n            cursor: canDownload ? \"pointer\" : \"not-allowed\",\n            pointerEvents: canDownload ? \"auto\" : \"none\",\n            opacity: canDownload ? 1 : 0.5,\n            height: \"100%\",\n          }}\n          href={createBlobUrl()}\n          download={getDownloadFilename()}\n          title={\n            canDownload ? \"Download MIDI file\" : \"No MIDI file to download\"\n          }\n        >\n          <FontAwesomeIcon icon={faDownload} style={{ height: \"100%\" }} />\n        </DownloadButton>\n      </AppFooterMain>\n    </StyledAppFooter>\n  );\n};\n\nexport default memo(withRouter(AppFooter));\n","import * as Tone from \"tone\";\n\n// Add type definitions for our custom method\ndeclare module \"tone/build/esm/core/context/BaseContext\" {\n  interface BaseContext {\n    addAudioWorklet: () => Promise<void>;\n  }\n}\n\nexport const ARPEGGIO_DELAY_MS = 30;\nconst CHORD_SPACING = 1; // 1 second\nlet samplerLoaded = false;\nlet loadingPromise: Promise<void> | null = null;\n\nconst BASE_URL = \"https://tonejs.github.io/audio/salamander/\";\n\nexport const sampler = new Tone.Sampler({\n  urls: {\n    A0: \"A0.mp3\",\n    C1: \"C1.mp3\",\n    \"D#1\": \"Ds1.mp3\",\n    \"F#1\": \"Fs1.mp3\",\n    A1: \"A1.mp3\",\n    C2: \"C2.mp3\",\n    \"D#2\": \"Ds2.mp3\",\n    \"F#2\": \"Fs2.mp3\",\n    A2: \"A2.mp3\",\n    C3: \"C3.mp3\",\n    \"D#3\": \"Ds3.mp3\",\n    \"F#3\": \"Fs3.mp3\",\n    A3: \"A3.mp3\",\n    C4: \"C4.mp3\",\n    \"D#4\": \"Ds4.mp3\",\n    \"F#4\": \"Fs4.mp3\",\n    A4: \"A4.mp3\",\n    C5: \"C5.mp3\",\n    \"D#5\": \"Ds5.mp3\",\n    \"F#5\": \"Fs5.mp3\",\n    A5: \"A5.mp3\",\n    C6: \"C6.mp3\",\n    \"D#6\": \"Ds6.mp3\",\n    \"F#6\": \"Fs6.mp3\",\n    A6: \"A6.mp3\",\n    C7: \"C7.mp3\",\n    \"D#7\": \"Ds7.mp3\",\n    \"F#7\": \"Fs7.mp3\",\n    A7: \"A7.mp3\",\n    C8: \"C8.mp3\",\n  },\n  baseUrl: BASE_URL,\n  onload: () => {\n    console.log(\"Sampler loaded\");\n    console.log(\"Audio Context State:\", Tone.getContext().state);\n    samplerLoaded = true;\n  },\n})\n  .toDestination()\n  .set({\n    volume: -6,\n  });\n\n// Enable Audio Worklet processing\nTone.getContext().addAudioWorklet = async () => {\n  const context = Tone.getContext().rawContext;\n  if (context.audioWorklet) {\n    try {\n      await context.audioWorklet.addModule(\n        `data:text/javascript;charset=utf-8,\n        class ToneProcessor extends AudioWorkletProcessor {\n          process(inputs, outputs) {\n            // Pass audio through\n            const output = outputs[0];\n            const input = inputs[0];\n            for (let channel = 0; channel < output.length; ++channel) {\n              const inputChannel = input[channel];\n              const outputChannel = output[channel];\n              for (let i = 0; i < outputChannel.length; ++i) {\n                outputChannel[i] = inputChannel ? inputChannel[i] : 0;\n              }\n            }\n            return true;\n          }\n        }\n        registerProcessor('tone-processor', ToneProcessor);`,\n      );\n\n      const workletNode = new AudioWorkletNode(context, \"tone-processor\");\n      sampler.connect(workletNode);\n      workletNode.connect(context.destination);\n      console.log(\"Audio Worklet enabled successfully\");\n    } catch (error) {\n      console.error(\"Failed to add Audio Worklet:\", error);\n    }\n  }\n};\n\nconst originalTriggerAttack = sampler.triggerAttack;\nsampler.triggerAttack = function (...args) {\n  console.log(\"Audio Context State:\", Tone.getContext().state);\n  return originalTriggerAttack.apply(this, args);\n};\n\nconst originalTriggerRelease = sampler.triggerRelease;\nsampler.triggerRelease = function (...args) {\n  console.log(\"Audio Context State:\", Tone.getContext().state);\n  return originalTriggerRelease.apply(this, args);\n};\n\nexport const getAudioContextState = () => {\n  return Tone.getContext().state;\n};\n\nexport const startAudioContext = async () => {\n  try {\n    await Tone.start();\n    await Tone.getContext().addAudioWorklet();\n    console.log(\"Audio context started successfully with Audio Worklet\");\n    return true;\n  } catch (error) {\n    console.error(\"Failed to start audio context:\", error);\n    throw error;\n  }\n};\n\nexport const ensureSamplerLoaded = async () => {\n  if (samplerLoaded) {\n    return;\n  }\n\n  if (loadingPromise) {\n    return loadingPromise;\n  }\n\n  loadingPromise = new Promise((resolve) => {\n    if (sampler.loaded) {\n      console.log(\"Sampler already loaded\");\n      samplerLoaded = true;\n      resolve();\n      return;\n    }\n\n    const checkLoaded = () => {\n      if (sampler.loaded) {\n        console.log(\"Sampler loaded successfully\");\n        samplerLoaded = true;\n        resolve();\n      } else {\n        setTimeout(checkLoaded, 100);\n      }\n    };\n\n    checkLoaded();\n  });\n\n  await loadingPromise;\n  console.log(\"Sampler loaded, audio context state:\", getAudioContextState());\n};\n\nexport const resumeAudioContext = async () => {\n  await Tone.start();\n  console.log(\"resuming audio context\");\n};\n\nconst C3_MIDI_NUMBER = 48;\n\nlet activeEvents: number[] = [];\nlet activeNotes: string[] = [];\n\nexport const playArpeggiatedChord = async (\n  chordNumbers: number[],\n  cancelPreviousSounds = true,\n) => {\n  await ensureSamplerLoaded();\n\n  // Only cancel previous sounds if explicitly requested\n  if (cancelPreviousSounds) {\n    // 1. Stop all currently playing sounds immediately\n    sampler.releaseAll(0);\n\n    // 2. Clear all scheduled events\n    activeEvents.forEach((id) => Tone.Transport.clear(id));\n    Tone.Transport.cancel();\n\n    // 3. Reset our tracking arrays\n    activeEvents = [];\n    activeNotes = [];\n  }\n\n  // 4. Convert to MIDI notes starting from C3\n  const midiNotes = chordNumbers.map((note) => C3_MIDI_NUMBER + note);\n  const noteNames = midiNotes.map((midi) =>\n    Tone.Frequency(midi, \"midi\").toNote(),\n  );\n\n  // 5. Ensure Transport is started\n  if (Tone.Transport.state !== \"started\") {\n    Tone.Transport.start();\n  }\n\n  // 6. Schedule notes using Transport time\n  const currentTransportTime = Tone.Transport.seconds;\n\n  noteNames.forEach((note, index) => {\n    const scheduleTime =\n      currentTransportTime + (index * ARPEGGIO_DELAY_MS) / 1000;\n\n    const eventId = Tone.Transport.schedule((time) => {\n      activeNotes.push(note);\n      sampler.triggerAttackRelease(note, 0.5, time);\n    }, scheduleTime);\n\n    activeEvents.push(eventId);\n  });\n};\n\n// Add new function for playing raw MIDI notes\nexport const playRawMidiNote = async (midiNumber: number, duration: number) => {\n  await ensureSamplerLoaded();\n\n  sampler.releaseAll(0);\n  activeEvents.forEach((id) => Tone.Transport.clear(id));\n  Tone.Transport.cancel();\n\n  activeEvents = [];\n  activeNotes = [];\n\n  const noteName = Tone.Frequency(midiNumber, \"midi\").toNote();\n\n  if (Tone.Transport.state !== \"started\") {\n    Tone.Transport.start();\n  }\n\n  const eventId = Tone.Transport.schedule((time) => {\n    activeNotes.push(noteName);\n    sampler.triggerAttackRelease(noteName, duration / 1000, time);\n  }, Tone.Transport.seconds);\n\n  activeEvents.push(eventId);\n};\n\n// Add a cleanup function that can be called when needed (e.g., component unmount)\nexport const cleanupArpeggiator = () => {\n  sampler.releaseAll(0);\n  activeEvents.forEach((id) => Tone.Transport.clear(id));\n  Tone.Transport.cancel();\n  activeEvents = [];\n  activeNotes = [];\n};\n\nexport const playArpeggiatedChordSequence = async (\n  chordSequence: number[][],\n  onChordStart?: (index: number) => void,\n  onChordEnd?: (index: number) => void,\n) => {\n  await ensureSamplerLoaded();\n\n  // Clear any existing events\n  Tone.Transport.cancel();\n  sampler.releaseAll(0);\n  activeEvents = [];\n  activeNotes = [];\n\n  // Ensure transport is started\n  if (Tone.Transport.state !== \"started\") {\n    Tone.Transport.start();\n  }\n\n  const currentTime = Tone.Transport.seconds;\n\n  chordSequence.forEach((chord, chordIndex) => {\n    // Schedule each note in the chord\n    chord.forEach((note, noteIndex) => {\n      const noteTime =\n        currentTime +\n        chordIndex * CHORD_SPACING + // Delay for each chord\n        (noteIndex * ARPEGGIO_DELAY_MS) / 1000; // Arpeggio delay within chord\n\n      const eventId = Tone.Transport.schedule((time) => {\n        sampler.triggerAttackRelease(\n          Tone.Frequency(note + C3_MIDI_NUMBER, \"midi\").toNote(),\n          CHORD_SPACING,\n          time,\n        );\n\n        // Call onChordStart only for the first note of each chord\n        if (noteIndex === 0 && onChordStart) {\n          onChordStart(chordIndex);\n        }\n\n        // Schedule chord end callback after last note\n        if (noteIndex === chord.length - 1 && onChordEnd) {\n          Tone.Transport.schedule(() => {\n            onChordEnd(chordIndex);\n          }, time + 0.7); // 600ms animation duration\n        }\n      }, noteTime);\n\n      activeEvents.push(eventId);\n    });\n  });\n};\n","import { faList } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { beautifySlug } from \"./utils\";\n\nconst badgeStyle = {\n  container: {\n    fontSize: \"0.9em\",\n    letterSpacing: \"0.05em\",\n    color: \"#ddd\",\n    textDecoration: \"none\",\n    cursor: \"pointer\",\n  } as const,\n  icon: faList,\n  iconColor: \"#ddd\",\n};\n\nconst LOWERCASE_WORDS = [\"de\", \"and\"];\n\nconst capitalizeWords = (text: string): string => {\n  return text\n    .split(\" \")\n    .map((word, index) => {\n      if (LOWERCASE_WORDS.includes(word.toLowerCase()) && index !== 0) {\n        return word.toLowerCase();\n      }\n      return word.charAt(0).toUpperCase() + word.slice(1);\n    })\n    .join(\" \");\n};\n\nexport const CorpusLink: React.FC<{ slug: string }> = ({ slug }) => {\n  return (\n    <Link\n      to={`/corpus/${slug}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      style={{\n        ...badgeStyle.container,\n        whiteSpace: \"nowrap\",\n        cursor: \"pointer\",\n      }}\n    >\n      <FontAwesomeIcon\n        icon={badgeStyle.icon}\n        style={{\n          width: \"12px\",\n          marginRight: \"6px\",\n          color: badgeStyle.iconColor,\n        }}\n      />\n      {capitalizeWords(beautifySlug(slug))}\n    </Link>\n  );\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport {\n  GenreItem,\n  GenreList,\n  getEmojis,\n  getUniqueStyles,\n  hasMetadata,\n} from \"../../utils/corpusUtils\";\nimport { Snippet } from \"./analysis\";\nimport { corpora } from \"./corpora/corpora\";\nimport SnippetItem, { PX_IN_MEASURE } from \"./SnippetItem\";\n\nconst SnippetListContainer = styled.div<{ isPreview?: boolean }>`\n  display: flex;\n  flex-wrap: wrap;\n  gap: ${(props) => (props.isPreview ? \"60px\" : \"20px\")};\n  padding-bottom: 10px;\n`;\n\nconst SnippetItemWrapper = styled.div<{\n  isPreview?: boolean;\n  measureCount: number;\n  isLoading?: boolean;\n}>`\n  flex: 0 0 auto;\n  margin-bottom: ${(props) => (props.isPreview ? \"0px\" : \"20px\")};\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  cursor: pointer;\n  width: ${(props) => props.measureCount * PX_IN_MEASURE}px;\n  align-items: start;\n  gap: 4px;\n\n  ${(props) =>\n    props.isLoading &&\n    `\n    &::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.7);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 10000;\n    }\n    \n    &::before {\n      content: '';\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 20px;\n      height: 20px;\n      border: 2px solid #fff;\n      border-top-color: transparent;\n      border-radius: 50%;\n      z-index: 10001;\n      animation: spinner 1s linear infinite;\n    }\n    \n    @keyframes spinner {\n      to {transform: translate(-50%, -50%) rotate(360deg);}\n    }\n  `}\n`;\n\nconst SlugLabel = styled.div`\n  color: #fff;\n  font-size: 12px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n  margin: 0;\n`;\n\nconst SnippetContainer = styled.div`\n  min-width: 0;\n  width: 100%;\n  margin: 0;\n`;\n\nconst ComposerInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  padding: 4px;\n  font-size: 0.8rem;\n  color: #fff;\n  border-top: 1px solid #333;\n  margin-top: 4px;\n`;\n\nconst ComposerHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst ComposerName = styled.span`\n  color: #fff;\n`;\n\nconst YearInfo = styled.span`\n  color: #999;\n  font-size: 0.8em;\n`;\n\ninterface SnippetListProps {\n  snippets: Snippet[];\n  slugs?: string[];\n  onSnippetClick: (snippet: Snippet) => void;\n  isPreview?: boolean;\n  noteHeight?: number;\n  loadingSnippets?: Set<string>;\n  deleteSnippet?: (index: number) => void;\n  hoveredColors?: string[] | null;\n}\n\nconst getComposerInfo = (midiSlug: string) => {\n  const matchingCorpora = corpora.filter((corpus) =>\n    corpus.midis.some((midi) => midi === midiSlug),\n  );\n  return matchingCorpora.find(hasMetadata) || null;\n};\n\nconst SnippetList: React.FC<SnippetListProps> = ({\n  snippets,\n  slugs,\n  onSnippetClick,\n  isPreview = false,\n  noteHeight = 3,\n  loadingSnippets = new Set(),\n  deleteSnippet,\n  hoveredColors,\n}) => {\n  return (\n    <SnippetListContainer isPreview={isPreview}>\n      {snippets.map((snippet, index) => {\n        const measureCount =\n          snippet.measuresSpan[1] - snippet.measuresSpan[0] + 1;\n        const composerSlug = (snippet as any).composerSlug;\n        const midiSlug = slugs?.[index];\n        const composerInfo = midiSlug ? getComposerInfo(midiSlug) : null;\n\n        return (\n          <SnippetItemWrapper\n            key={index}\n            isPreview={isPreview}\n            measureCount={measureCount}\n            onClick={() => onSnippetClick(snippet)}\n            isLoading={loadingSnippets.has(composerSlug)}\n          >\n            {midiSlug && <SlugLabel>{midiSlug}</SlugLabel>}\n            <SnippetContainer>\n              <SnippetItem\n                snippet={snippet}\n                index={index}\n                isPreview={isPreview}\n                noteHeight={noteHeight}\n                deleteSnippet={deleteSnippet}\n                hoveredColors={hoveredColors}\n              />\n            </SnippetContainer>\n            {composerInfo && (\n              <ComposerInfo>\n                <ComposerHeader>\n                  <ComposerName>\n                    {composerInfo.slug\n                      .split(\"_\")\n                      .map(\n                        (word) => word.charAt(0).toUpperCase() + word.slice(1),\n                      )\n                      .join(\" \")}\n                  </ComposerName>\n                  {composerInfo.country && (\n                    <div>{getEmojis(composerInfo.country)}</div>\n                  )}\n                  {composerInfo.composerBirthYear && (\n                    <YearInfo>({composerInfo.composerBirthYear})</YearInfo>\n                  )}\n                </ComposerHeader>\n                {(composerInfo.genre || composerInfo.style) && (\n                  <GenreList>\n                    {getUniqueStyles(\n                      composerInfo.genre,\n                      composerInfo.style,\n                    ).map((style, index) => (\n                      <GenreItem key={index}>{style}</GenreItem>\n                    ))}\n                  </GenreList>\n                )}\n              </ComposerInfo>\n            )}\n          </SnippetItemWrapper>\n        );\n      })}\n    </SnippetListContainer>\n  );\n};\n\nexport default SnippetList;\n","const keySlugMapping: Record<string, string> = {\n  \"match-1\": \"Maple_Leaf_Rag_Scott_Joplin\",\n  \"match-2\": \"s.-xarhakos---stoy-thoma---greek-music-055\",\n  \"match-3\": \"may-be---yiruma\",\n  \"match-4\": \"Sweden_Minecraft\",\n  \"match-5\": \"arabesque-l.-66-no.-1-in-e-major\",\n  \"match-6\": \"gol-e-sang---anoushiravan-rohani\",\n  \"match-7\": \"philip-glass---facades\",\n  \"match-8\": \"fear-not-this-night-guild-wars-2-piano-version\",\n  \"match-9\": \"dragonborn---skyrim-theme-song-piano-solo\",\n  \"match-10\": \"s.-xarhakos---mpoyrnovalia---greek-music-079\",\n  \"match-11\": \"Clair_de_Lune__Debussy\",\n  \"match-12\": \"il-coure-mio---anoushiravan-rohani\",\n  \"match-13\": \"philip-glass---pruit-igoe\",\n  \"match-14\": \"the_entertainer_scott_joplin\",\n  \"match-15\": \"it-s-your-day---yiruma\",\n  \"match-16\": \"dry-hands-minecraft\",\n\n  \"river-1\": \"river_flows_in_you_minus1\",\n  \"river-2\": \"river_flows_in_you_0\",\n  \"river-3\": \"river_flows_in_you_plus1\",\n  \"river-4\": \"river_flows_in_you_plus2\",\n  \"river-5\": \"river_flows_in_you_plus3\",\n  \"river-6\": \"river_flows_in_you_plus4\",\n  \"river-7\": \"river_flows_in_you_plus5\",\n\n  \"epoch-1\": \"sadness-and-sorrow-for-piano-solo\",\n  \"epoch-2\":\n    \"unravel-acoustic-ver-tokyo-ghoul-theishter-sheet-music-full-sheets\",\n  \"epoch-3\":\n    \"slow-waltz-24-pieces-for-children-op.39-no.-23---dmitry-kabalevsky\",\n  \"epoch-4\": \"souvenir-de-porto-rico-200-i.e.-206-follower-special\",\n  \"epoch-5\": \"lost-patrol-main-theme---chris-glaister-jonathan-dunn\",\n  \"epoch-6\": \"nocturne-op.21-no1---ignacy-feliks-dobrzynski\",\n  \"epoch-7\": \"grieg_lyric_2_waltz_yaskawa\",\n  \"epoch-8\": \"neon-mixtape-tour---choose-your-seeds\",\n  \"epoch-9\": \"saman---olafur-arnalds\",\n  \"epoch-10\": \"mendelssohn-opus-67-no.-2-aka-lost-illusions\",\n};\n\nexport default keySlugMapping;\n","import React, { Component, ErrorInfo, ReactNode } from \"react\";\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  public state: State = {\n    hasError: false,\n  };\n\n  public static getDerivedStateFromError(_: Error): State {\n    return { hasError: true };\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error(\"Uncaught error:\", error, errorInfo);\n  }\n\n  public render() {\n    if (this.state.hasError) {\n      return this.props.fallback || <h1>Sorry.. there was an error</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import {\n  faArrowUpRightFromSquare,\n  faLink,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport {\n  GenreList,\n  getEmojis,\n  getUniqueStyles,\n  hasMetadata,\n} from \"../../utils/corpusUtils\";\nimport { ComposerTitle } from \"./book/Book\";\nimport { corpora, MUSESCORE_TOP_100_SLUG } from \"./corpora/corpora\";\nimport { CorpusLink } from \"./corpora/CorpusLink\";\nimport { TOP_100_COMPOSERS } from \"./top100Composers\";\n\nconst MUSESCORE_ICON = `\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 32\">\n  <path d=\"M5.529 8.944h.087c.088-3.375 2.677-6.18 5.968-6.18 2.15 0 3.685.92 4.475 2.19-1.14.482-2.018 1.622-2.018 3.025 0 1.885 1.58 3.331 3.51 3.331 1.93 0 3.51-1.622 3.51-3.769 0-3.638-3.334-6.97-7.766-6.97-4.43 0-7.81 3.55-7.81 7.715 0 .175 0 .35.044.657m13.69 13.369 3.64-5.61L6.363 9.644l-.044.043 12.9 12.624Zm4.65-3.726c0 4.821-4.125 8.152-8.336 8.152-3.291 0-5.705-1.183-6.889-2.805 1.492-.877 2.37-2.367 2.37-4.251 0-2.806-2.282-5.085-5.31-5.085C2.502 14.597 0 17.183 0 20.558c0 5.48 5.177 10.87 12.329 10.87C19.48 31.429 24 25.819 24 19.464c0-.351 0-.57-.044-.877h-.087Z\" fill=\"white\"/>\n</svg>\n`;\n\nexport type CompositionTitleProps = {\n  slug: string;\n  sourceUrl: string | null;\n  onSourceUrlUpdate: (newUrl: string) => void;\n};\n\nconst MetadataContainer = styled.div`\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  margin-left: 10px;\n`;\n\nexport const RelatedCorpora = styled.div<{ horizontal?: boolean }>`\n  display: flex;\n  flex-direction: ${(props) => (props.horizontal ? \"row\" : \"column\")};\n  gap: ${(props) => (props.horizontal ? \"30px\" : \"8px\")};\n`;\n\nexport const CorpusRow = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nexport const RelatedCorporaDisplay: React.FC<{\n  slug: string;\n  horizontal?: boolean;\n  showMetadata?: boolean;\n}> = ({ slug, horizontal = false, showMetadata = true }) => {\n  const relatedCorporaSlugs = React.useMemo(() => {\n    return corpora\n      .filter((corpus) => corpus.midis.includes(slug))\n      .filter((corpus) => corpus.slug !== MUSESCORE_TOP_100_SLUG)\n      .map((corpus) => corpus.slug);\n  }, [slug]);\n\n  if (relatedCorporaSlugs.length === 0) return null;\n\n  return (\n    <RelatedCorpora horizontal={horizontal}>\n      {relatedCorporaSlugs.map((corpusSlug) => {\n        const corpus = corpora.find((c) => c.slug === corpusSlug);\n        if (!corpus) return null;\n\n        return (\n          <CorpusRow key={corpusSlug}>\n            <CorpusLink slug={corpusSlug} />\n            {showMetadata && hasMetadata(corpus) && (\n              <MetadataContainer>\n                {corpus.country && <div>{getEmojis(corpus.country)}</div>}\n                {(corpus.genre || corpus.style) && (\n                  <GenreList>\n                    {getUniqueStyles(corpus.genre, corpus.style).join(\", \")}\n                  </GenreList>\n                )}\n                {corpus.composerBirthYear && (\n                  <span style={{ color: \"#999\" }}>\n                    *{corpus.composerBirthYear}\n                  </span>\n                )}\n              </MetadataContainer>\n            )}\n          </CorpusRow>\n        );\n      })}\n    </RelatedCorpora>\n  );\n};\n\nconst CompositionTitle: React.FC<CompositionTitleProps> = ({\n  slug,\n  sourceUrl,\n  onSourceUrlUpdate,\n}) => {\n  const [editedUrl, setEditedUrl] = React.useState(sourceUrl || \"\");\n\n  const handleSave = () => {\n    if (editedUrl !== sourceUrl) {\n      onSourceUrlUpdate(editedUrl);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") {\n      handleSave();\n    }\n  };\n\n  const formattedTitle = slug\n    .replace(/---/g, \"  \")\n    .replace(/-/g, \" \")\n    .replace(/_/g, \" \");\n\n  const composerInfo = React.useMemo(() => {\n    return TOP_100_COMPOSERS.find((composer) => composer.slug === slug);\n  }, [slug]);\n\n  const searchQuery = encodeURIComponent(formattedTitle);\n  const museScoreUrl = `https://musescore.com/sheetmusic?sort=view_count&text=${searchQuery}`;\n\n  return (\n    <div\n      style={{\n        padding: \"10px\",\n        backgroundColor: \"rgba(0, 0, 0, 0.8)\",\n        color: \"white\",\n        fontSize: \"16px\",\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n      }}\n    >\n      <h1\n        style={{\n          margin: 0,\n          fontSize: \"1em\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: \"8px\",\n          alignItems: \"flex-start\",\n        }}\n      >\n        <div>\n          {composerInfo ? (\n            <ComposerTitle\n              composer={composerInfo.composer}\n              displayTitle={composerInfo.displayTitle}\n            />\n          ) : (\n            formattedTitle\n          )}\n          {sourceUrl ? (\n            <a\n              href={sourceUrl}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              style={{\n                color: \"gray\",\n                textDecoration: \"none\",\n                cursor: \"pointer\",\n              }}\n            >\n              {sourceUrl.includes(\"musescore.com\") ? (\n                <span\n                  style={{\n                    display: \"inline-block\",\n                    width: \"12px\",\n                    height: \"12px\",\n                    marginLeft: \"20px\",\n                  }}\n                  dangerouslySetInnerHTML={{ __html: MUSESCORE_ICON }}\n                />\n              ) : (\n                <FontAwesomeIcon\n                  icon={faArrowUpRightFromSquare}\n                  style={{ width: \"15px\", marginLeft: \"10px\" }}\n                />\n              )}\n            </a>\n          ) : (\n            <>\n              <input\n                type=\"text\"\n                value={editedUrl}\n                onChange={(e) => setEditedUrl(e.target.value)}\n                onKeyDown={handleKeyDown}\n                onBlur={handleSave}\n                style={{\n                  marginLeft: \"10px\",\n                  fontSize: \"0.8em\",\n                  width: \"200px\",\n                  background: \"rgba(255, 255, 255, 0.1)\",\n                  border: \"none\",\n                  color: \"white\",\n                  padding: \"2px 5px\",\n                }}\n                placeholder=\"Enter source URL\"\n              />\n              <a\n                href={museScoreUrl}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                style={{\n                  color: \"gray\",\n                  textDecoration: \"none\",\n                  cursor: \"pointer\",\n                  marginLeft: \"10px\",\n                }}\n                title=\"Search on MuseScore\"\n              >\n                <FontAwesomeIcon icon={faLink} />\n              </a>\n            </>\n          )}\n        </div>\n\n        <RelatedCorporaDisplay slug={slug} />\n      </h1>\n    </div>\n  );\n};\n\nexport default CompositionTitle;\n","export const beautifySlug = (slug: string): string => {\n  return slug.replace(/---/g, \"  \").replace(/-/g, \" \").replace(/_/g, \" \");\n};\n","import React, { useCallback, useContext, useMemo } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport { Snippet, rehydrateSnippet } from \"./analysis\";\nimport EnhancedFrozenNotes from \"./FrozenNotes\";\n\nexport const PX_IN_MEASURE = 90;\n\nconst SnippetItemContainer = styled.div<{\n  width: number;\n  isPreview?: boolean;\n  isPreviewWithoutTime?: boolean;\n}>`\n  display: flex;\n  flex-direction: column;\n  width: ${(props) => props.width}px;\n  border-radius: ${(props) => (props.isPreview ? \"0\" : \"5px\")};\n  overflow: hidden;\n`;\n\nconst SnippetHeader = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  background-color: #222;\n`;\n\nconst TimingInfo = styled.div`\n  color: #888;\n  font-size: 0.8em;\n  margin-top: 4px;\n  text-align: center;\n`;\n\nconst SnippetContent = styled.div`\n  overflow-y: auto;\n  overflow-x: hidden;\n`;\n\nconst DeleteButton = styled.button`\n  background-color: #ff4136;\n  color: white;\n  border: none;\n  padding: 5px 10px;\n  border-radius: 3px;\n  cursor: pointer;\n  &:hover {\n    background-color: #ff7066;\n  }\n`;\n\nconst PlaybackCursor = styled.div`\n  position: absolute;\n  width: 2px;\n  height: 100%;\n  background-color: #ff6b00;\n  pointer-events: none;\n  z-index: 9999;\n  opacity: 0.8;\n  top: 0;\n  left: 0;\n  will-change: transform;\n  transform: translateX(0);\n  backface-visibility: hidden;\n`;\n\ninterface SnippetItemProps {\n  snippet: Snippet;\n  index: number;\n  deleteSnippet?: (index: number) => void;\n  noteHeight: number;\n  isPreview?: boolean;\n  hoveredColors?: string[] | null;\n}\n\nconst SnippetItem: React.FC<SnippetItemProps> = ({\n  snippet,\n  index,\n  deleteSnippet,\n  noteHeight,\n  isPreview = false,\n  hoveredColors,\n}) => {\n  const appContext = useContext(AppContext);\n  const { currentMidi } = appContext;\n\n  const { rehydratedNotes, rehydratedAnalysis, rehydratedMeasuresAndBeats } =\n    useMemo(() => rehydrateSnippet(snippet), [snippet]);\n\n  const paddedMeasuresAndBeats = useMemo(() => {\n    const startMeasure = snippet.measuresSpan[0];\n    const endMeasure = snippet.measuresSpan[1];\n\n    // Ensure we don't create an array with negative length\n    const paddingLength = Math.max(0, startMeasure - 1);\n\n    // Slice the measures array to include only the selected range\n    const slicedMeasures = rehydratedMeasuresAndBeats.measures.slice(\n      0,\n      endMeasure + 1,\n    );\n\n    const paddedMeasures = [\n      ...Array(paddingLength).fill(rehydratedMeasuresAndBeats.measures[0] || 0),\n      ...slicedMeasures,\n    ];\n\n    return {\n      ...rehydratedMeasuresAndBeats,\n      measures: paddedMeasures,\n    };\n  }, [snippet, rehydratedMeasuresAndBeats]);\n\n  const snippetMidiRange = useMemo(() => {\n    let min = Infinity;\n    let max = -Infinity;\n    rehydratedNotes.forEach((voiceNotes) => {\n      voiceNotes.forEach((note) => {\n        const midiNumber = note.note.midiNumber;\n        min = Math.min(min, midiNumber);\n        max = Math.max(max, midiNumber);\n      });\n    });\n    return [min, max] as [number, number];\n  }, [rehydratedNotes]);\n\n  const snippetMidiNumberToY = useCallback(\n    (midiNumber: number) => (snippetMidiRange[1] - midiNumber + 1) * noteHeight,\n    [snippetMidiRange, noteHeight],\n  );\n\n  const timeRange = useMemo(() => {\n    const startMeasure = snippet.measuresSpan[0];\n    const endMeasure = snippet.measuresSpan[1];\n    const startTime = paddedMeasuresAndBeats.measures[startMeasure - 1] || 0;\n    const endTime = paddedMeasuresAndBeats.measures[endMeasure] || startTime;\n    return [startTime, endTime] as [number, number];\n  }, [snippet, paddedMeasuresAndBeats]);\n\n  const containerWidth = useMemo(() => {\n    return (rehydratedMeasuresAndBeats.measures.length - 1) * PX_IN_MEASURE;\n  }, [timeRange]);\n\n  const toX = useCallback(\n    (seconds: number) => {\n      const normalizedTime =\n        (seconds - timeRange[0]) / (timeRange[1] - timeRange[0]);\n      return isNaN(normalizedTime) ? 0 : normalizedTime * containerWidth; // Use containerWidth instead of 400\n    },\n    [timeRange, containerWidth],\n  );\n\n  const isCurrentlyPlaying = useMemo(() => {\n    const snippetSlug = (snippet as any).composerSlug;\n    if (!currentMidi || !snippet.secondsSpan) return false;\n\n    const isPlaying = currentMidi.slug === snippetSlug;\n\n    return isPlaying;\n  }, [currentMidi, snippet]);\n\n  const cursorPosition = useMemo(() => {\n    if (\n      !isCurrentlyPlaying ||\n      !snippet.secondsSpan ||\n      appContext.currentPlaybackTime === null ||\n      appContext.currentPlaybackTime < snippet.secondsSpan[0]\n    ) {\n      return null;\n    }\n\n    const [start, end] = snippet.secondsSpan;\n    const currentTime = appContext.currentPlaybackTime;\n\n    // Calculate position as a percentage of the time range\n    const timeProgress = (currentTime - start) / (end - start);\n    const xPos = timeProgress * containerWidth;\n\n    return xPos;\n  }, [\n    isCurrentlyPlaying,\n    snippet.secondsSpan,\n    appContext.currentPlaybackTime,\n    containerWidth,\n  ]);\n\n  return (\n    <SnippetItemContainer\n      width={containerWidth}\n      isPreview={isPreview}\n      isPreviewWithoutTime={isPreview && snippet.secondsSpan === undefined}\n    >\n      {!isPreview && (\n        <SnippetHeader>\n          {!isPreview && deleteSnippet && (\n            <DeleteButton onClick={() => deleteSnippet(index)}>\n              Delete\n            </DeleteButton>\n          )}\n          <span>\n            {snippet.tag.replace(\":\", \": \")}{\" \"}\n            <span style={{ color: \"gray\" }}>\n              {snippet.measuresSpan.join(\"..\")}\n            </span>\n          </span>\n          {snippet.secondsSpan &&\n            Array.isArray(snippet.secondsSpan) &&\n            typeof snippet.secondsSpan[0] === \"number\" && (\n              <TimingInfo>\n                {snippet.secondsSpan[0].toFixed(2)}s -{\" \"}\n                {snippet.secondsSpan[1].toFixed(2)}s\n              </TimingInfo>\n            )}\n        </SnippetHeader>\n      )}\n      <SnippetContent style={{ position: \"relative\" }}>\n        {cursorPosition !== null && (\n          <PlaybackCursor\n            style={{\n              transform: `translateX(${cursorPosition}px)`,\n              transition:\n                appContext.currentPlaybackTime > snippet.secondsSpan[0]\n                  ? \"transform 0.74s linear\"\n                  : \"none\",\n            }}\n          />\n        )}\n        <EnhancedFrozenNotes\n          notes={rehydratedNotes}\n          midiNumberToY={snippetMidiNumberToY}\n          maxWidth={containerWidth}\n          analysis={rehydratedAnalysis}\n          measuresAndBeats={paddedMeasuresAndBeats}\n          noteHeight={noteHeight}\n          startMeasure={snippet.measuresSpan[0]}\n          toX={toX}\n          timeRange={timeRange}\n          isPreview={isPreview}\n          phraseStarts={snippet.phraseStarts || []}\n          hoveredColors={hoveredColors}\n        />\n      </SnippetContent>\n    </SnippetItemContainer>\n  );\n};\n\nexport default SnippetItem;\n","import * as React from \"react\";\nimport { SecondsConverter, SecondsSpan } from \"./Rawl\";\nimport { ColoredNote, Note, PitchBendPoint } from \"./parseMidi\";\n\n// Also useful emojis\n//      \n\n// https://www.stevenestrella.com/midi/gmdrums.gif\nconst GM_DRUM_KIT = {\n  28: \"\",\n  31: \"\", //\"Metronome Click\",\n  35: \"\", //\"Acoustic Bass Drum\",\n  36: \"\", //\"Bass Drum 1\",\n  37: \"\", //\"Side Stick\",\n  38: \"\", //\"Acoustic Snare\",\n  39: \"\", //\"Hand Clap\",\n  40: \"\", //\"Electric Snare\",\n  41: \"0\", //\"Low Floor Tom\",\n  42: \"\", // \"Closed Hi Hat\",\n  43: \"1\", //\"High Floor Tom\",\n  44: \"\", //\"Pedal Hi-Hat\",\n  45: \"2\", //\"Low Tom\",\n  46: \"\", //\"Open Hi-Hat\",\n  47: \"3\", // \"Low-Mid Tom\",\n  48: \"4\", //\"Hi-Mid Tom\",\n  49: \"\", //\"Crash Cymbal 1\",\n  50: \"5\", //\"High Tom\",\n  51: \"\", //\"Ride Cymbal 1\",\n  52: \"\", //\"Chinese Cymbal\",\n  53: \"\", //\"Ride Bell\",\n  54: \"\", //\"Tambourine\",\n  55: \"\", //\"Splash Cymbal\",\n  56: \"\",\n  57: \"\", //\"Crash Cymbal 2\",\n  58: \"\",\n  59: \"\", //\"Ride Cymbal 2\",\n  60: \"\",\n  61: \"\",\n  62: \"\",\n  63: \"\",\n  64: \"\",\n  65: \"\",\n  66: \"\",\n  67: \"\",\n  68: \"\",\n  69: \"\",\n  70: \"\",\n  71: \"\",\n  72: \"\",\n  73: \"#\",\n  74: \"\",\n  75: \"\",\n  76: \"\",\n  77: \"\",\n  78: \"\",\n  79: \"\",\n  80: \"\",\n  81: \"\",\n  82: \"\", //'Shaker',\n  83: \"\", //\"Jingle Bell\",\n  84: \"\",\n  85: \"\",\n  86: \"\",\n  87: \"\",\n};\n\ntype MouseEventHanlder = (note: Note) => void;\nexport type MouseHandlers = {\n  handleNoteClick: MouseEventHanlder | null;\n  handleMouseEnter: MouseEventHanlder;\n  handleMouseLeave: () => void;\n  hoveredNote: Note | null;\n  systemClickHandler: (\n    e: React.MouseEvent,\n    xToSeconds?: (number) => number,\n  ) => void;\n};\n\nconst convertPitchBendToPathData = (\n  pitchBendData: PitchBendPoint[],\n  span: SecondsSpan,\n  noteHeight: number,\n  secondsToX: SecondsConverter,\n): string => {\n  const pitchBendRange = 8192;\n  const noteDuration = span[1] - span[0];\n  const noteStartX = secondsToX(span[0]);\n\n  const pitchBendToY = (value) => {\n    const normalizedValue = (value + pitchBendRange) / (2 * pitchBendRange); // Normalize to 0-1\n    return noteHeight * (1 - normalizedValue) * 4 + noteHeight / 2; // Invert because SVG's Y increases downwards\n  };\n\n  // Map a time value to the SVG's X coordinate, relative to the note's duration\n  const timeToX = (time) => {\n    const relativeTime = time - span[0]; // Time relative to the note's start\n    const normalizedTime = relativeTime / noteDuration; // Normalize to 0-1\n    return normalizedTime * (secondsToX(span[1]) - noteStartX); // Scale to note's width\n  };\n\n  // Start the path data string at the first pitch bend point\n  let pathData = `M ${timeToX(pitchBendData[0].time)} ${pitchBendToY(\n    pitchBendData[0].value,\n  )}`;\n\n  // Add line segments to each subsequent pitch bend point\n  pitchBendData.forEach((point, index) => {\n    if (index > 0) {\n      // Skip the first point as it's already used in 'M'\n      pathData += ` L ${timeToX(point.time)} ${pitchBendToY(point.value)}`;\n    }\n  });\n\n  return pathData;\n};\n\nexport const getNoteRectangles = (\n  notes: ColoredNote[],\n  midiNumberToY: (number: number) => number,\n  noteHeight: number,\n  handleNoteClick: MouseEventHanlder,\n  handleMouseEnter: MouseEventHanlder,\n  handleMouseLeave: () => void,\n  secondsToX: SecondsConverter,\n  enableManualRemeasuring: boolean,\n  hoveredColors: string[] | null,\n) => {\n  return notes.map((note) => {\n    const {\n      isDrum,\n      note: { midiNumber, relativeNumber },\n      color,\n      voiceIndex,\n      isActive,\n    } = note;\n    const number = relativeNumber === undefined ? midiNumber : relativeNumber;\n    const top = midiNumberToY(isDrum ? number + 12 : number) - noteHeight;\n    const left = secondsToX(note.span[0]);\n\n    const pathData = note.chipState?.on?.pitchBend\n      ? convertPitchBendToPathData(\n          note.chipState.on.pitchBend,\n          note.span,\n          noteHeight,\n          secondsToX,\n        )\n      : null;\n    const width = secondsToX(note.span[1]) - secondsToX(note.span[0]);\n\n    const isHighlighted = !hoveredColors || hoveredColors.includes(color);\n\n    return isDrum ? (\n      isActive && (\n        <div\n          style={{\n            position: \"absolute\",\n            fontSize: \"16px\",\n            height: \"10px\",\n            width: \"auto\",\n            overflow: \"visible\",\n            left,\n            top,\n            fontFamily: \"Helvetica, sans-serif\",\n            color: \"white\",\n            placeItems: \"center\",\n            transform: \"translateX(-50%)\", // Shift the div left by half its width\n            whiteSpace: \"nowrap\", // Prevent text wrapping\n            zIndex: 1000,\n          }}\n        >\n          {GM_DRUM_KIT[midiNumber] || midiNumber}\n        </div>\n      )\n    ) : (\n      <div\n        key={`nr_${note.id}`}\n        className={`${color} voiceShape-${voiceIndex}`}\n        style={{\n          position: \"absolute\",\n          height: `${isActive && isHighlighted ? noteHeight * 2 : 0.5}px`,\n          width,\n          overflow: \"visible\",\n          top: isActive && isHighlighted ? top : top + noteHeight * 2 - 0.5,\n          left,\n          pointerEvents: handleNoteClick ? \"auto\" : \"none\",\n          zIndex: Math.round(10 + (width > 0 ? 1000 / width : 1000)),\n          boxSizing: \"border-box\",\n          display: \"grid\",\n          boxShadow: isActive && isHighlighted ? \"0 0 0px 0.5px black\" : \"\",\n          cursor: enableManualRemeasuring\n            ? \"e-resize\"\n            : handleNoteClick\n            ? \"pointer\"\n            : \"default\",\n        }}\n        onClick={(e) => {\n          e.stopPropagation();\n          if (handleNoteClick) {\n            handleNoteClick(note);\n          }\n        }}\n        onMouseEnter={(e) => !isDrum && handleMouseEnter(note)}\n        onMouseLeave={() => !isDrum && handleMouseLeave()}\n      >\n        {pathData && isActive && isHighlighted && (\n          <div style={{ position: \"relative\", width: \"100%\", height: \"100%\" }}>\n            <svg\n              style={{\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                height: \"100%\",\n                width: \"100%\",\n                overflow: \"visible\",\n              }}\n            >\n              <path d={pathData} stroke=\"white\" strokeWidth=\"4\" fill=\"none\" />\n              <path d={pathData} stroke=\"black\" strokeWidth=\"2\" fill=\"none\" />\n            </svg>\n          </div>\n        )}\n      </div>\n    );\n  });\n};\n","import { IconDefinition } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nconst ToggleContainer = styled.div`\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  z-index: 3;\n  padding: 2px;\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.2);\n`;\n\nconst ToggleIcon = styled.div<{ active: boolean }>`\n  color: ${(props) => (props.active ? \"white\" : \"#666\")};\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst ToggleSlider = styled.div`\n  width: 32px;\n  height: 16px;\n  background: #444;\n  border-radius: 8px;\n  position: relative;\n  cursor: pointer;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background: #555;\n  }\n`;\n\nconst SliderKnob = styled.div<{ isRight: boolean }>`\n  width: 12px;\n  height: 12px;\n  background: white;\n  border-radius: 50%;\n  position: absolute;\n  top: 2px;\n  left: 2px;\n  transition: transform 0.2s;\n  transform: translateX(${(props) => (props.isRight ? \"16px\" : \"0\")});\n`;\n\ninterface ToggleProps {\n  leftIcon: IconDefinition;\n  rightIcon: IconDefinition;\n  isRight: boolean;\n  onToggle: () => void;\n  leftTitle?: string;\n  rightTitle?: string;\n}\n\nexport const Toggle: React.FC<ToggleProps> = ({\n  leftIcon,\n  rightIcon,\n  isRight,\n  onToggle,\n  leftTitle,\n  rightTitle,\n}) => {\n  return (\n    <ToggleContainer>\n      <ToggleIcon active={!isRight}>\n        <FontAwesomeIcon icon={leftIcon} />\n      </ToggleIcon>\n      <ToggleSlider onClick={onToggle} title={isRight ? leftTitle : rightTitle}>\n        <SliderKnob isRight={isRight} />\n      </ToggleSlider>\n      <ToggleIcon active={isRight}>\n        <FontAwesomeIcon icon={rightIcon} />\n      </ToggleIcon>\n    </ToggleContainer>\n  );\n};\n","import styled from \"styled-components\";\nimport { FOOTER_HEIGHT } from \"../../AppFooter\";\n\ninterface EditorContainerProps {\n  height?: string;\n}\n\nexport const EditorContainer = styled.div<EditorContainerProps>`\n  position: relative;\n  width: 100%;\n  height: ${(props) => props.height || \"100%\"};\n  min-height: 200px;\n`;\n\nexport const RawlContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  z-index: 1;\n`;\n\nexport const EditorPanel = styled.div<{ isFolded: boolean; height?: string }>`\n  position: fixed;\n  bottom: ${FOOTER_HEIGHT}px;\n  right: 0;\n  width: calc(100% - 40px);\n  height: ${(props) => props.height || \"50vh\"};\n  background: #1e1e1e;\n  display: grid;\n  grid-template-columns: ${(props) => (props.isFolded ? \"auto\" : \"1fr 1fr\")};\n  transition: transform 0.1s ease;\n  transform: translateX(${(props) => (props.isFolded ? \"100%\" : \"0\")});\n  border-top: 1px solid #333;\n  border-left: 1px solid #333;\n  z-index: 1000;\n`;\n\nexport const DebugPanel = styled.div`\n  flex: 1;\n  background-color: #1e1e1e;\n  border-right: 1px solid #333;\n  padding: 20px;\n  overflow: auto;\n  color: #d4d4d4;\n  font-family: \"Menlo\", \"Monaco\", \"Courier New\", monospace;\n  font-size: 12px;\n`;\n\nexport const EditorContent = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const CodeMirrorWrapper = styled.div`\n  position: relative;\n  flex: 1;\n  isolation: isolate;\n  background-color: #1e1e1e;\n  z-index: 100000;\n\n  /* Ensure all CodeMirror elements stay on top */\n  & * {\n    z-index: 100001;\n  }\n\n  .cm-editor {\n    position: absolute !important;\n    inset: 0;\n    height: 100%;\n    font-family: \"Menlo\", \"Monaco\", \"Courier New\", monospace;\n    font-size: 14px;\n    line-height: calc(1.4em + 4px);\n    z-index: 100002;\n\n    /* Selection styles */\n    .cm-selectionBackground {\n      background-color: rgba(255, 255, 255, 0.2) !important;\n    }\n\n    .cm-focused .cm-selectionBackground {\n      background-color: rgba(255, 255, 255, 0.3) !important;\n    }\n\n    &::selection,\n    *::selection {\n      background-color: rgba(255, 255, 255, 0.3) !important;\n      color: #ffffff !important;\n    }\n\n    .cm-cursor {\n      border-left: 1px solid #ffa500 !important;\n      border-left-width: 1px !important;\n      height: 2em !important;\n      margin-top: -0.5em !important;\n    }\n\n    .cm-line {\n      padding-top: 2px;\n      padding-bottom: 2px;\n    }\n  }\n\n  /* Comment styling */\n  .comment {\n    color: #666666 !important;\n    font-style: italic;\n  }\n\n  .cm-scroller,\n  .cm-content,\n  .cm-line,\n  .cm-activeLine,\n  .cm-activeLineGutter {\n    z-index: 100003;\n    position: relative;\n  }\n\n  .cm-editor .cm-gutters {\n    position: relative;\n    z-index: 100004;\n  }\n\n  /* Add padding to gutter line numbers */\n  .cm-lineNumbers .cm-gutterElement:not(:first-child) {\n    padding-top: 2px;\n  }\n\n  /* Command styling */\n  .command-name {\n    font-weight: bold;\n  }\n\n  .source-span {\n    text-decoration: underline;\n    text-decoration-style: dotted;\n    text-decoration-thickness: 1px;\n    text-underline-offset: 3px;\n  }\n\n  .invalid-command {\n    text-decoration-color: white;\n    opacity: 0.5;\n  }\n\n  /* Override text colors for note backgrounds */\n  .noteColor_0_colors {\n    color: #000000 !important;\n    background-color: white !important;\n    --background-color: white;\n  }\n  .noteColor_1_colors {\n    color: #ffffff !important;\n    background-color: rgb(130, 0, 0) !important;\n    --background-color: rgb(130, 0, 0);\n  }\n  .noteColor_2_colors {\n    color: #000000 !important;\n    background-color: red !important;\n    --background-color: red;\n  }\n  .noteColor_3_colors {\n    color: #ffffff !important;\n    background-color: #007000 !important;\n    --background-color: #007000;\n  }\n  .noteColor_4_colors {\n    color: #000000 !important;\n    background-color: #00fb47 !important;\n    --background-color: #00fb47;\n  }\n  .noteColor_5_colors {\n    color: #ffffff !important;\n    background-color: #9500b3 !important;\n    --background-color: #9500b3;\n  }\n  .noteColor_6_colors {\n    color: #000000 !important;\n    background-color: #ea7eff !important;\n    --background-color: #ea7eff;\n  }\n  .noteColor_7_colors {\n    color: #000000 !important;\n    background-color: rgb(120, 120, 120) !important;\n    --background-color: rgb(120, 120, 120);\n  }\n  .noteColor_8_colors {\n    color: #ffffff !important;\n    background-color: rgb(0, 0, 255) !important;\n    --background-color: rgb(0, 0, 255);\n  }\n  .noteColor_9_colors {\n    color: #000000 !important;\n    background-color: #03b9d5 !important;\n    --background-color: #03b9d5;\n  }\n  .noteColor_10_colors {\n    color: #ffffff !important;\n    background-color: #ff7328 !important;\n    --background-color: #ff7328;\n  }\n  .noteColor_11_colors {\n    color: #000000 !important;\n    background-color: yellow !important;\n    --background-color: yellow;\n  }\n\n  /* Add dot styles */\n  .dotAbove {\n    position: relative;\n  }\n  .dotAbove::before {\n    content: \"\";\n    position: absolute;\n    width: 0;\n    height: 0;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n    border-bottom: 5px solid;\n    border-bottom-color: var(--background-color, background-color);\n    top: -5px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n  .dotBelow {\n    position: relative;\n  }\n  .dotBelow::before {\n    content: \"\";\n    position: absolute;\n    width: 0;\n    height: 0;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n    border-top: 5px solid;\n    border-top-color: var(--background-color, background-color);\n    bottom: -5px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n`;\n\nexport const FoldButton = styled.button<{\n  position?: \"top\" | \"side\";\n  isFolded?: boolean;\n}>`\n  position: absolute;\n  background: #1e1e1e;\n  border: 1px solid #333;\n  color: #d4d4d4;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.2s;\n  z-index: 1001;\n  font-size: 14px;\n\n  &::after {\n    content: \"${(props) =>\n      props.position === \"top\"\n        ? props.isFolded\n          ? \"\"\n          : \"\"\n        : props.isFolded\n        ? \"\"\n        : \"\"}\";\n  }\n\n  ${(props) =>\n    props.position === \"top\"\n      ? `\n    top: -30px;\n    right: -1px;\n    width: 60px;\n    height: 30px;\n    border-bottom: none;\n    border-radius: 4px 4px 0 0;\n  `\n      : `\n    left: -30px;\n    top: -1px;\n    width: 30px;\n    height: 60px;\n    border-right: none;\n    border-radius: 4px 0 0 4px;\n  `}\n\n  &:hover {\n    background-color: #2d2d2d;\n  }\n`;\n\nexport const ErrorMessage = styled.div`\n  color: #ff6b6b;\n  font-size: 12px;\n  margin-top: 4px;\n`;\n\nexport const ResizeHandle = styled.div`\n  position: absolute;\n  top: -3px;\n  left: 0;\n  right: 0;\n  height: 6px;\n  background: transparent;\n  cursor: row-resize;\n  z-index: 1001;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  &:active {\n    background: rgba(255, 255, 255, 0.2);\n  }\n`;\n","const EXPLANATIONS: Record<string, string> = {\n  \"parallel:symmetry\": \"Mixed use of I and i within the same section\",\n  \"form:sentence\":\n    \"Idea (2 measures), its restatement (2 measures), fragmentation of the idea (1+1 measures), cadence (2 measures)\",\n};\n\nexport default EXPLANATIONS;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\ninterface SnippetLinkProps {\n  chapter: string;\n  topic: string;\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n}\n\nexport const SnippetLink: React.FC<SnippetLinkProps> = ({\n  chapter,\n  topic,\n  onMouseEnter,\n  onMouseLeave,\n}) => {\n  return (\n    <Link\n      to={`/s/${encodeURIComponent(chapter.trim())}/${encodeURIComponent(\n        topic.trim(),\n      )}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      onClick={(e) => e.stopPropagation()}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      style={{\n        textDecoration: \"none\",\n        color: \"inherit\",\n        display: \"inline-block\",\n        lineHeight: \"0.9\",\n        position: \"relative\",\n      }}\n    >\n      <div>\n        <span style={{ color: \"#777\" }}>{chapter.replace(/_/g, \" \")}</span>\n        <span style={{ color: \"#ccc\", display: \"block\" }}>\n          {topic.replace(/_/g, \" \")}\n        </span>\n      </div>\n    </Link>\n  );\n};\n","import React, { ReactNode, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useLocalStorage } from \"usehooks-ts\";\nimport { a, c, k, q } from \"./book/chapters\";\nimport { TonicProvider } from \"./legends/ChordStairs\";\n\nconst Pp = styled.div`\n  margin-bottom: 15px;\n`;\n\nconst Label = styled.span`\n  font-weight: bold;\n  color: #666;\n`;\n\nconst m = (n: number) => <>m. {n}</>;\n\nconst FoldButton = styled.button`\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  border: none;\n  font-size: 18px;\n  cursor: pointer;\n  width: 25px;\n  height: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100001;\n  background: #ccc;\n  color: black;\n  &:hover {\n    background: #444;\n  }\n`;\n\ntype QAPair = {\n  q: string | ReactNode;\n  a?: ReactNode;\n};\n\nexport const NARRATIVES: Record<string, { qa: QAPair[] }> = {\n  \"happy-birthday\": {\n    qa: [\n      {\n        q: \"How many colors are in this score?\",\n        a: (\n          <>\n            Seven colors. This is an C major scale starting from a white note (a{\" \"}\n            <i>tonic</i>). Play with this scale: {k(\"white-keys\")}\n          </>\n        ),\n      },\n      {\n        q: 'Click on the \"melody\" in the top right panel to solo the melody. Listen to it separately. What repeats four times in it?',\n        a: \"A motive starting with two short notes is repeated four times, starting at the ends of measures 1, 3, 5, and 7.\",\n      },\n      // {\n      //   q: (\n      //     <>\n      //       If you have stereo sound output now, enable the{\" \"}\n      //       {FORCED_PANNING_LABEL} mode (the page will refresh). Now listen to\n      //       the song again. What do you hear?\n      //     </>\n      //   ),\n      //   a: \"The melody is now in the right ear and the accompaniment in the left one.\",\n      // },\n    ],\n  },\n  \"someone-like-you\": {\n    qa: [\n      {\n        q: (\n          <>\n            <Pp>\n              This score follows{\" \"}\n              {a(\n                \"https://www.youtube.com/watch?v=hLQl3WQQoQ0\",\n                \"the YouTube version\",\n              )}{\" \"}\n              closely.{\" \"}\n              {a(\n                \"https://genius.com/Adele-someone-like-you-lyrics\",\n                \"Lyrics on Genius\",\n              )}\n            </Pp>\n            <Pp>\n              Name the chords of the loop that's used in the intro and in all\n              verses.\n            </Pp>\n          </>\n        ),\n        a: <>It's {c`I iii vi IV`}</>,\n      },\n      {\n        q: <>The loop in the chorus is slightly different. Name its chords.</>,\n        a: <>It's {c`I V vi IV`}</>,\n      },\n      {\n        q: (\n          <>\n            Solo the vocal part - click on the \"Choir Aahs\" in the top right\n            voice legend. The main motive of the verse melody is one measure\n            long, starting from the end of {m(4)}. How many times does it repeat\n            almost verbatim and what happens with it afterwards?\n          </>\n        ),\n        a: (\n          <>\n            The {c`5 3 2 1 6`} repeats about five times and then mutates with\n            each measure - uses different contours for the same notes, gets more\n            shorter notes to the end.\n          </>\n        ),\n      },\n    ],\n  },\n  \"despacito-piano-cover-peter-bence\": {\n    qa: [\n      {\n        q: (\n          <>\n            People argue about the tonic here. {q(\"vice_despacito\")} I'll teach\n            you how to recolor. Select the measure number 1. Then, hover any\n            note to make it a white tonic note. To apply the coloring, click on\n            the desired tonic.\n          </>\n        ),\n      },\n    ],\n  },\n};\n\nexport const SongNarrative: React.FC<{\n  slug: string;\n  currentTonic?: number;\n}> = ({ slug, currentTonic }) => {\n  const [lastOpenedIndex, setLastOpenedIndex] = useState(0);\n  const [showNarrative, setShowNarrative] = useLocalStorage(\n    \"showNarrative\",\n    true,\n  );\n\n  const narrative = NARRATIVES[slug as keyof typeof NARRATIVES];\n\n  if (!narrative) {\n    return null;\n  }\n\n  const content = (\n    <div\n      style={{\n        position: \"absolute\",\n        top: 10,\n        right: -10,\n        width: \"457px\",\n        zIndex: 100000,\n      }}\n    >\n      {showNarrative ? (\n        <div>\n          <FoldButton onClick={() => setShowNarrative(false)}>x</FoldButton>\n          <div\n            style={{\n              backgroundColor: \"black\",\n              padding: 10,\n              border: \"1px solid #666\",\n              zIndex: 100000,\n              maxWidth: \"40em\",\n            }}\n          >\n            {narrative.qa.map((qa, index) => {\n              if (index > lastOpenedIndex) {\n                return null;\n              }\n\n              return (\n                <TonicProvider currentTonic={currentTonic}>\n                  <div key={index} style={{ marginBottom: \"2.5rem\" }}>\n                    <div style={{ marginBottom: \"0.5rem\" }}>\n                      <Label>Q:</Label>{\" \"}\n                      <span style={{ color: \"#fff\" }}>{qa.q}</span>\n                    </div>\n\n                    {index < lastOpenedIndex\n                      ? qa.a && (\n                          <div style={{ paddingTop: \"10px\" }}>\n                            <Label>A:</Label>{\" \"}\n                            <span style={{ color: \"#fff\" }}>{qa.a}</span>\n                          </div>\n                        )\n                      : (qa.a || index < narrative.qa.length - 1) && (\n                          <button\n                            style={{\n                              padding: \"10px\",\n                              marginTop: \"10px\",\n                              backgroundColor: \"#4a90e2\",\n                              color: \"white\",\n                              border: \"none\",\n                              borderRadius: \"4px\",\n                              cursor: \"pointer\",\n                            }}\n                            onClick={() => setLastOpenedIndex(index + 1)}\n                          >\n                            {qa.a ? \"Show answer\" : \"Show next question\"}\n                          </button>\n                        )}\n                  </div>\n                </TonicProvider>\n              );\n            })}\n          </div>\n        </div>\n      ) : (\n        <button\n          onClick={() => setShowNarrative(true)}\n          style={{\n            position: \"absolute\",\n            top: 0,\n            right: 0,\n            background: \"none\",\n            border: \"none\",\n            cursor: \"pointer\",\n            fontSize: \"24px\",\n            padding: 0,\n          }}\n        >\n          \n        </button>\n      )}\n    </div>\n  );\n\n  return content;\n};\n","import { User } from \"firebase/auth\";\nimport React from \"react\";\nimport { Analysis, MeasuresSpan } from \"./rawl/analysis\";\nimport { RawlProps } from \"./rawl/Rawl\";\n\nexport type CurrentMidi = {\n  id: string;\n  title: string;\n  slug: string;\n  sourceUrl: string | null;\n  isHiddenRoute: boolean;\n} | null;\n\nexport interface AppContextType {\n  handleSongClick: (slug: string, isHiddenRoute?: boolean) => Promise<void>;\n  rawlProps: RawlProps | null;\n  setRawlProps: (rawlProps: RawlProps | null) => void;\n  analyses: Record<string, Analysis>;\n  saveAnalysis: (analysis: Analysis) => void;\n  resetMidiPlayerState: () => void;\n  registerKeyboardHandler: (\n    id: string,\n    handler: (e: KeyboardEvent) => void,\n  ) => void;\n  unregisterKeyboardHandler: (id: string) => void;\n  currentMidi: CurrentMidi | null;\n  setCurrentMidi: (currentMidi: CurrentMidi | null) => void;\n  user: User | null;\n  seek: (seekMs: number) => void;\n  currentPlaybackTime: number | null;\n  eject: () => void;\n  currentMidiBuffer: ArrayBuffer | null;\n  hoveredMeasuresSpan: MeasuresSpan | null;\n  setHoveredMeasuresSpan: (span: MeasuresSpan | null) => void;\n  togglePause: () => void;\n  handleLogin: () => void;\n  handleLogout: () => void;\n  handleToggleAnalysis: () => void;\n  analysisEnabled: boolean;\n  playSongBuffer: (\n    filepath: string,\n    buffer: ArrayBuffer | Uint8Array,\n    shouldAutoPlay?: boolean,\n  ) => Promise<void>;\n  latencyCorrectionMs: number;\n  tempo: number;\n}\n\nexport const AppContext = React.createContext<AppContextType | undefined>(\n  undefined,\n);\n","import { TICKS_PER_QUARTER } from \"../forge/constants\";\nimport {\n  BeatPosition,\n  Command,\n  CommandContext,\n  getScaleMapForMode,\n  KeySignature,\n  LogicalNote,\n  MeasureSpan,\n  NOTE_LETTER_MAP,\n  TimeSignature,\n} from \"./types\";\n\nexport interface Note {\n  midiNumber: number;\n  startTick: number;\n  durationTicks: number;\n  channel: number;\n}\n\nexport interface TrackCommand {\n  type: \"track\";\n  track: number;\n  baseOctave: number;\n}\n\nexport const parseKey = (keyString: string): KeySignature | null => {\n  // Changed regex to make accidentals optional and include new modes\n  const match = keyString.match(\n    /^([A-G][b#]?)\\s+(major|minor|lydian|mixolydian|dorian|phrygian)$/i,\n  );\n  if (!match) return null;\n\n  const [_, root, mode] = match;\n\n  // Map note names to numbers (0 = C, 1 = C#/Db, etc.)\n  const noteToNumber: { [key: string]: number } = {\n    C: 0,\n    \"C#\": 1,\n    Db: 1,\n    D: 2,\n    \"D#\": 3,\n    Eb: 3,\n    E: 4,\n    F: 5,\n    \"F#\": 6,\n    Gb: 6,\n    G: 7,\n    \"G#\": 8,\n    Ab: 8,\n    A: 9,\n    \"A#\": 10,\n    Bb: 10,\n    B: 11,\n  };\n\n  const tonic = noteToNumber[root];\n\n  if (tonic === undefined) return null;\n\n  return {\n    tonic,\n    mode: mode.toLowerCase() as KeySignature[\"mode\"],\n  };\n};\n\nexport const parseCopyCommand = (\n  line: string,\n  timeSignatures: TimeSignature[] = [],\n): Command | null => {\n  // Match the command format: coordinate c sourceMeasureSpan [sequenceOfShifts]\n  // Examples:\n  // \"2b1.5 c 1b1-8b4 0\" - explicit beat positions\n  // \"2 c 1-8 0\" - implicit beat positions (1b1-9b1)\n  // \"2 c 1 0\" - single measure (1b1-2b1)\n  // \"2 c 1\" - single measure with default shift of 0\n  // \"2 c 1 0 x 0\" - with rest marker 'x' to skip a copy\n  // \"2 c 1 -3 -2 -5 -4 -7 -4 -3\" - with negative shifts for Pachelbel's progression\n  // \"2 c 1 2&5\" - with & syntax to layer multiple shifts at same position\n  const match = line.match(\n    /^(\\d+)(?:b(\\d+(?:\\.\\d+)?))?\\s+(?:c|ac)\\s+(\\d+)(?:b(\\d+(?:\\.\\d+)?))?(?:-(\\d+)(?:b(\\d+(?:\\.\\d+)?))?)?\\s*((?:x|[+-]?\\d+(?:&[+-]?\\d+)*(?:\\s+(?:x|[+-]?\\d+(?:&[+-]?\\d+)*))*)*)$/,\n  );\n  if (!match) return null;\n\n  const [\n    _,\n    measureStr,\n    beatStr,\n    sourceStartStr,\n    sourceStartBeatStr,\n    sourceEndStr,\n    sourceEndBeatStr,\n    shiftsStr,\n  ] = match;\n  const targetMeasure = parseInt(measureStr);\n  const targetBeat = beatStr ? parseFloat(beatStr) : 1;\n\n  // Parse source measure(s)\n  const sourceStart = parseInt(sourceStartStr);\n  // If no beat specified for start, default to beat 1 of same measure\n  const sourceStartBeat = sourceStartBeatStr\n    ? parseFloat(sourceStartBeatStr)\n    : 1;\n\n  let sourceEnd: number;\n  let sourceEndBeat: number;\n\n  if (sourceEndStr) {\n    // If there's an explicit end measure\n    sourceEnd = parseInt(sourceEndStr);\n    if (sourceEndBeatStr) {\n      // If there's an explicit end beat, use it\n      sourceEndBeat = parseFloat(sourceEndBeatStr);\n    } else {\n      // If no explicit end beat, default to beat 1 of next measure\n      sourceEnd = sourceEnd + 1;\n      sourceEndBeat = 1;\n    }\n  } else {\n    // Single measure specified - default to beat 1 of next measure\n    sourceEnd = sourceStart + 1;\n    sourceEndBeat = 1;\n  }\n\n  // Validate all measures and beats\n  if (\n    targetMeasure < 1 ||\n    sourceStart < 1 ||\n    sourceEnd < sourceStart ||\n    targetBeat < 1 ||\n    sourceStartBeat < 1 ||\n    sourceEndBeat < 1\n  ) {\n    return null;\n  }\n\n  // Extract all shifts by matching numbers or 'x', supporting & syntax for layered shifts\n  // If no shifts provided, default to [\"0\"]\n  const shifts = (shiftsStr || \"0\")\n    .trim()\n    .split(/\\s+/)\n    .filter(Boolean)\n    .map((token): (number | \"x\")[] => {\n      if (token === \"x\") return [\"x\"];\n      // If token contains &, it represents layered shifts at the same position\n      if (token.includes(\"&\")) {\n        return token.split(\"&\").map(Number);\n      }\n      return [Number(token)];\n    });\n\n  // Determine if this is a regular copy or an all-channels copy\n  const isAllChannels = line.trim().split(/\\s+/)[1] === \"ac\";\n\n  return {\n    type: isAllChannels ? \"ac\" : \"copy\",\n    targetMeasure,\n    targetBeat,\n    sourceStart,\n    sourceStartBeat,\n    sourceEnd,\n    sourceEndBeat,\n    shifts: shifts.map((shiftGroup) => ({ type: \"group\", shifts: shiftGroup })),\n  };\n};\n\nexport const parseTimeSignatures = (line: string): TimeSignature[] | null => {\n  const parts = line.trim().split(/\\s+/);\n  const signatures: TimeSignature[] = [];\n  let currentMeasure = 1;\n\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n\n    // Parse time signature format (numerator/4)\n    if (part.includes(\"/\")) {\n      const [numerator, denominator] = part.split(\"/\");\n      const num = parseInt(numerator);\n\n      // Validate format - only check that numerator is positive and denominator is 4\n      if (isNaN(num) || denominator !== \"4\" || num <= 0) {\n        return null;\n      }\n\n      signatures.push({\n        numerator: num,\n        measureStart: currentMeasure,\n      });\n    } else {\n      // Must be a measure number\n      const measure = parseInt(part);\n      if (isNaN(measure) || measure <= currentMeasure) {\n        return null;\n      }\n\n      // Next part must be a time signature\n      if (i + 1 >= parts.length || !parts[i + 1].includes(\"/\")) {\n        return null;\n      }\n\n      currentMeasure = measure;\n    }\n  }\n\n  return signatures.length > 0 ? signatures : null;\n};\n\nexport const getTimeSignatureAt = (\n  measure: number,\n  timeSignatures: TimeSignature[],\n): number => {\n  // Default to 4/4 if no time signatures defined\n  if (!timeSignatures.length) return 4;\n\n  // Find the last time signature that starts before or at this measure\n  for (let i = timeSignatures.length - 1; i >= 0; i--) {\n    if (timeSignatures[i].measureStart <= measure) {\n      return timeSignatures[i].numerator;\n    }\n  }\n\n  // If no time signature found before this measure, use the first one\n  return timeSignatures[0].numerator;\n};\n\nexport const parseCommand = (\n  line: string,\n  context: CommandContext,\n): Command | null => {\n  // If we're in comment-to-end-of-file mode, return null immediately\n  if (context.commentToEndOfFile) return null;\n\n  // Handle single % comment that comments out everything to end of file\n  if (line.trim() === \"%\") {\n    context.commentToEndOfFile = true;\n    return null;\n  }\n\n  // Remove comments\n  const cleanLine = line.split(\"%\")[0].trim();\n  if (!cleanLine) return null;\n\n  // Try parsing as track command first\n  const trackCommand = parseTrackCommand(cleanLine, context);\n  if (trackCommand) return trackCommand;\n\n  // Try parsing as time signature command\n  if (cleanLine.includes(\"/4\")) {\n    const signatures = parseTimeSignatures(cleanLine);\n    if (signatures) return { type: \"time\", signatures };\n  }\n\n  // Try parsing as key command\n  const key = parseKey(cleanLine);\n  if (key) return { type: \"key\", key };\n\n  // Try parsing as BPM command\n  const bpmMatch = cleanLine.match(/^bpm\\s+(\\d+)$/i);\n  if (bpmMatch) {\n    const tempo = parseInt(bpmMatch[1], 10);\n    if (tempo > 0) {\n      return { type: \"bpm\", tempo };\n    }\n    return null;\n  }\n\n  // Try parsing as copy command\n  const copyCmd = parseCopyCommand(cleanLine, context.timeSignatures);\n  if (copyCmd) return copyCmd;\n\n  // Parse as note insert command\n  const match = cleanLine.match(/^\\s*(\\d+)(?:b(\\d+(?:\\.\\d+)?))?\\s+i\\s+(.+)$/);\n  if (match) {\n    const [_, measureStr, beatStr, melodyPart] = match;\n    const startMeasure = parseInt(measureStr);\n    const startBeat = beatStr ? parseFloat(beatStr) : 1;\n    const key = context.currentKey;\n\n    // Validate measure and beat\n    if (\n      isNaN(startMeasure) ||\n      startMeasure < 1 ||\n      isNaN(startBeat) ||\n      startBeat < 1\n    )\n      return null;\n\n    // Get time signature for this measure and validate beat\n    const beatsInMeasure = getTimeSignatureAt(\n      startMeasure,\n      context.timeSignatures,\n    );\n    const beatsPerMeasure = beatsInMeasure || 4; // Fallback to 4/4 if no time signature\n\n    const notes = parseMelodyString(cleanLine, {\n      ...context,\n      beatsPerMeasure,\n    });\n    if (notes.length > 0) return { type: \"insert\", notes };\n  }\n\n  return null;\n};\n\n// Helper function to calculate MIDI number from scale degree and key\nexport const calculateMidiNumber = (\n  scaleDegree: number | string,\n  accidental: number | undefined,\n  octaveShift: number,\n  key: KeySignature,\n  track: number, // 1 for RH, 2 for LH\n  context: CommandContext,\n): number | null => {\n  if (scaleDegree === -Infinity) return null; // Rest\n\n  // Get absolute scale degree\n  const absoluteScaleDegree =\n    typeof scaleDegree === \"string\"\n      ? NOTE_LETTER_MAP[scaleDegree.toLowerCase()] || 0\n      : scaleDegree;\n\n  // Calculate which octave this scale degree belongs to\n  const baseDegree = absoluteScaleDegree % 7;\n  const octave = Math.floor(absoluteScaleDegree / 7);\n\n  // Get the semitone offset for this scale degree based on mode\n  const scaleMap = getScaleMapForMode(key.mode);\n  const semitoneOffset = scaleMap[baseDegree];\n\n  // Use the appropriate base octave from context\n  const baseOctave = getBaseOctaveForTrack(track, context);\n\n  // Calculate final MIDI number\n  const midiNumber =\n    key.tonic + semitoneOffset + (baseOctave + octave) * 12 + (accidental || 0);\n\n  // Ensure the note is within MIDI range (0-127)\n  if (midiNumber < 0 || midiNumber > 127) return null;\n\n  return midiNumber;\n};\n\n// Helper to calculate the global beat position for a measure and beat\nexport const calculateGlobalBeatPosition = (\n  measure: number,\n  beatInMeasure: number,\n  timeSignatures: TimeSignature[],\n): BeatPosition => {\n  let totalBeats = 0;\n  let currentMeasure = 1;\n\n  // Add up beats for all complete measures before the target measure\n  while (currentMeasure < measure) {\n    const beatsInMeasure = getTimeSignatureAt(currentMeasure, timeSignatures);\n    totalBeats += beatsInMeasure;\n    currentMeasure++;\n  }\n\n  // Add the beats within the target measure\n  // Ensure we don't exceed the measure's time signature\n  const measureBeats = getTimeSignatureAt(measure, timeSignatures);\n  const clampedBeatInMeasure = Math.min(beatInMeasure, measureBeats);\n  return totalBeats + (clampedBeatInMeasure - 1);\n};\n\n// Helper to convert a global beat position back to measure and beat\nexport const globalBeatToMeasureAndBeat = (\n  globalBeat: BeatPosition,\n  timeSignatures: TimeSignature[],\n): { measure: number; beatInMeasure: number } => {\n  let measure = 1;\n  let remainingBeats = globalBeat;\n\n  // Subtract complete measures until we can't anymore\n  while (remainingBeats >= getTimeSignatureAt(measure, timeSignatures)) {\n    remainingBeats -= getTimeSignatureAt(measure, timeSignatures);\n    measure++;\n  }\n\n  return {\n    measure,\n    beatInMeasure: remainingBeats + 1,\n  };\n};\n\nexport const parseMelodyString = (\n  melodyString: string,\n  context: CommandContext,\n): LogicalNote[] => {\n  const lines = melodyString.split(\"\\n\").filter((line) => line.trim());\n\n  return lines.flatMap((line) => {\n    const match = line.match(/^\\s*(\\d+)(?:b(\\d+(?:\\.\\d+)?))?\\s+i\\s+(.+)$/);\n    if (!match) {\n      return [];\n    }\n\n    const [_, measureStr, beatStr, melodyPart] = match;\n\n    const startMeasure = parseInt(measureStr);\n    const startBeat = beatStr ? parseFloat(beatStr) : 1;\n    const key = context.currentKey;\n\n    // Calculate the global beat position for the start\n    let currentPosition = calculateGlobalBeatPosition(\n      startMeasure,\n      startBeat,\n      context.timeSignatures,\n    );\n\n    // Process tokens\n    const tokens = processTokens(melodyPart);\n    const result: LogicalNote[] = [];\n\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n      if (!token.trim()) continue;\n\n      // Check if this token is a duration marker\n      const isDurationMarker = /^[+_\\-=,'\"][.:]?$/.test(token);\n\n      if (isDurationMarker) {\n        // Apply this duration to the previous note(s)\n        const duration = getDuration(token, context.beatsPerMeasure || 4);\n\n        // Find the last group of notes (could be a single note or chord)\n        let lastNoteIndex = result.length - 1;\n        while (\n          lastNoteIndex >= 0 &&\n          result[lastNoteIndex].span.start ===\n            result[result.length - 1].span.start\n        ) {\n          result[lastNoteIndex].duration = duration * TICKS_PER_QUARTER;\n          result[lastNoteIndex].span.end =\n            result[lastNoteIndex].span.start + duration;\n          lastNoteIndex--;\n        }\n\n        // Update position for next note\n        if (result.length > 0) {\n          currentPosition = result[result.length - 1].span.end;\n        }\n        continue;\n      }\n\n      // Handle note or chord\n      // First split into tokens by commas and whitespace\n      const rawNoteTokens = token.split(/[,\\s]+/);\n      const noteTokens = rawNoteTokens.filter(Boolean);\n\n      const span: MeasureSpan = {\n        start: currentPosition,\n        end: currentPosition + 1, // Default to one beat duration\n      };\n\n      // Process each token\n      for (const noteToken of noteTokens) {\n        // Skip duration markers\n        if (/^[+_\\-=,'\"][.:]?$/.test(noteToken)) continue;\n\n        // Check for accidental prefix\n        let accidental: -1 | 0 | 1 = 0;\n        let actualNote = noteToken;\n\n        // Handle accidentals at start of token\n        if (noteToken.startsWith(\"b\")) {\n          accidental = -1;\n          actualNote = noteToken.slice(1);\n        } else if (noteToken.startsWith(\"#\")) {\n          accidental = 1;\n          actualNote = noteToken.slice(1);\n        }\n\n        // Skip if not a valid note\n        if (!/^[a-zA-Z1-90x]$/.test(actualNote)) continue;\n\n        // Handle rest\n        if (actualNote === \"x\") {\n          result.push({\n            scaleDegree: -Infinity,\n            duration: TICKS_PER_QUARTER,\n            span: { ...span },\n            midiNumber: null,\n          });\n          continue;\n        }\n\n        const absoluteScaleDegree = NOTE_LETTER_MAP[actualNote.toLowerCase()];\n        if (absoluteScaleDegree === undefined) continue;\n\n        const midiNumber = calculateMidiNumber(\n          absoluteScaleDegree,\n          accidental,\n          0,\n          key,\n          context.currentTrack,\n          context,\n        );\n\n        if (midiNumber !== null) {\n          result.push({\n            scaleDegree: absoluteScaleDegree,\n            duration: TICKS_PER_QUARTER,\n            span: { ...span },\n            midiNumber,\n            accidental,\n          });\n        }\n      }\n\n      // If this is the last token and it's not a duration marker,\n      // advance the position by one beat\n      if (i === tokens.length - 1 && !isDurationMarker) {\n        currentPosition += 1;\n      }\n    }\n\n    return result;\n  });\n};\n\nconst getDuration = (marker: string, beatsPerMeasure: number = 4): number => {\n  // Split marker into base duration and check for dot and triplet\n  const hasDot = marker.includes(\".\");\n  const hasTriplet = marker.includes(\":\");\n  const baseDuration = marker.split(/[.:]/, 1)[0];\n  let duration: number;\n\n  switch (baseDuration) {\n    case \"+\":\n      duration = beatsPerMeasure; // length of time signature at insertion\n      break;\n    case \"_\":\n      duration = 2; // half note\n      break;\n    case \",\":\n      duration = 1; // quarter note (comma)\n      break;\n    case \"-\":\n      duration = 0.5; // eighth note\n      break;\n    case \"=\":\n      duration = 0.25; // sixteenth note\n      break;\n    case \"'\":\n      duration = 0.125; // thirty-second note\n      break;\n    case '\"':\n      duration = 0.0625; // sixty-fourth note\n      break;\n    default:\n      duration = 1; // default to quarter note\n  }\n\n  // If there's a dot, increase duration by half of the original duration\n  if (hasDot) {\n    duration = duration + duration / 2;\n  }\n\n  // If there's a triplet marker, multiply duration by 2/3\n  if (hasTriplet) {\n    duration = duration * (2 / 3);\n  }\n\n  return duration;\n};\n\n// Helper to process melody string into tokens\nconst processTokens = (melodyPart: string): string[] => {\n  // Remove all spaces from melody part before processing\n  const cleanMelodyPart = melodyPart.replace(/\\s+/g, \"\");\n\n  // Split input into tokens, preserving duration markers and their modifiers\n  const tokens: string[] = [];\n  let currentToken = \"\";\n\n  for (let i = 0; i < cleanMelodyPart.length; i++) {\n    const char = cleanMelodyPart[i];\n\n    if (/[+_\\-=,'\"]/.test(char)) {\n      // If we have accumulated a token, push it\n      if (currentToken) {\n        tokens.push(currentToken);\n        currentToken = \"\";\n      }\n\n      // Look ahead for modifiers (. or :)\n      let durationToken = char;\n      if (\n        i + 1 < cleanMelodyPart.length &&\n        /[.:]/.test(cleanMelodyPart[i + 1])\n      ) {\n        durationToken += cleanMelodyPart[i + 1];\n        i++; // Skip the modifier in next iteration\n      }\n      tokens.push(durationToken);\n    } else if (/[.:]/.test(char)) {\n      continue;\n    } else if (/[#b]/.test(char)) {\n      // Handle accidentals - they should be part of the next note\n      if (currentToken) {\n        // If we have a token already, push it before starting new one with accidental\n        tokens.push(currentToken);\n        currentToken = \"\";\n      }\n      currentToken = char;\n    } else if (/[a-zA-Z1-90x]/.test(char)) {\n      currentToken += char;\n      // If this is a complete note (accidental + note or just note), push it\n      if (\n        currentToken.length === 2 ||\n        (currentToken.length === 1 && !/[#b]/.test(currentToken))\n      ) {\n        tokens.push(currentToken);\n        currentToken = \"\";\n      }\n    }\n  }\n\n  // Push any remaining token\n  if (currentToken) {\n    tokens.push(currentToken);\n  }\n\n  return tokens;\n};\n\n// Helper to calculate scale degree shift and resulting MIDI number adjustment\nexport const calculateShiftedNote = (\n  originalDegree: number,\n  shift: number,\n  key: KeySignature,\n  accidental: number = 0,\n  track: number,\n  context: CommandContext,\n): { newDegree: number; newMidi: number } => {\n  const newDegree = originalDegree + shift;\n\n  // Implement proper modulo that always gives positive result\n  const properModulo = (n: number, m: number): number => {\n    return ((n % m) + m) % m;\n  };\n\n  // Get positive base degree (0-6) and adjust octave accordingly\n  const baseDegree = properModulo(newDegree, 7);\n  const octave = Math.floor(newDegree / 7);\n\n  // Get the scale map based on mode\n  const scaleMap = getScaleMapForMode(key.mode);\n\n  // Use the appropriate base octave from context\n  const baseOctave = getBaseOctaveForTrack(track, context);\n\n  // Include baseOctave in calculation\n  const newMidi =\n    key.tonic + scaleMap[baseDegree] + (baseOctave + octave) * 12 + accidental;\n\n  return { newDegree, newMidi };\n};\n\n// Modify logicalNoteToMidi to use global beat positions\nexport const logicalNoteToMidi = (\n  note: LogicalNote,\n  track: number,\n  timeSignatures: TimeSignature[],\n): Note | null => {\n  if (note.midiNumber === null) return null;\n\n  return {\n    midiNumber: note.midiNumber,\n    startTick: note.span.start * TICKS_PER_QUARTER,\n    durationTicks: note.duration,\n    channel: track - 1, // Convert 1-based track to 0-based channel\n  };\n};\n\nfunction parseTrackCommand(\n  cleanLine: string,\n  context: CommandContext,\n): TrackCommand | null {\n  // Try new channel syntax first\n  const channelMatch = cleanLine.match(/^ch(\\d+)(?:\\s+(\\d+))?$/i);\n  if (channelMatch) {\n    const channel = parseInt(channelMatch[1], 10);\n    if (channel < 0 || channel > 15) {\n      throw new Error(\"MIDI channel must be between 0 and 15\");\n    }\n    const baseOctave = channelMatch[2]\n      ? parseInt(channelMatch[2], 10)\n      : channel === 1\n      ? 3\n      : 5;\n    context.channelOctaves[channel] = baseOctave;\n    const track = channel + 1; // Convert channel to 1-based track number\n    return {\n      type: \"track\",\n      track,\n      baseOctave,\n    };\n  }\n\n  // Backward compatibility for lh/rh\n  const trackMatch = cleanLine.match(/^(lh|rh)(?:\\s+(\\d+))?$/i);\n  if (trackMatch) {\n    const [, hand, octave] = trackMatch;\n    const track = hand.toLowerCase() === \"lh\" ? 2 : 1;\n    const channel = track - 1;\n    const baseOctave = octave ? parseInt(octave, 10) : track === 2 ? 3 : 5;\n    context.channelOctaves[channel] = baseOctave;\n    return {\n      type: \"track\",\n      track,\n      baseOctave,\n    };\n  }\n\n  return null;\n}\n\nfunction getBaseOctaveForTrack(track: number, context: CommandContext): number {\n  const channel = track - 1;\n  return context.channelOctaves[channel] ?? (channel === 1 ? 3 : 5);\n}\n","// Scale maps for major and minor scales\nexport const MINOR_SCALE_MAP = [0, 2, 3, 5, 7, 8, 10];\nexport const MAJOR_SCALE_MAP = [0, 2, 4, 5, 7, 9, 11];\nexport const LYDIAN_SCALE_MAP = [0, 2, 4, 6, 7, 9, 11]; // Major with #4\nexport const MIXOLYDIAN_SCALE_MAP = [0, 2, 4, 5, 7, 9, 10]; // Major with b7\nexport const DORIAN_SCALE_MAP = [0, 2, 3, 5, 7, 9, 10]; // Minor with natural 6\nexport const PHRYGIAN_SCALE_MAP = [0, 1, 3, 5, 7, 8, 10]; // Minor with b2\n\n// Utility function to get scale map for a mode\nexport function getScaleMapForMode(\n  mode: \"major\" | \"minor\" | \"lydian\" | \"mixolydian\" | \"dorian\" | \"phrygian\",\n): number[] {\n  switch (mode) {\n    case \"major\":\n      return MAJOR_SCALE_MAP;\n    case \"minor\":\n      return MINOR_SCALE_MAP;\n    case \"lydian\":\n      return LYDIAN_SCALE_MAP;\n    case \"mixolydian\":\n      return MIXOLYDIAN_SCALE_MAP;\n    case \"dorian\":\n      return DORIAN_SCALE_MAP;\n    case \"phrygian\":\n      return PHRYGIAN_SCALE_MAP;\n  }\n}\n\n// Note letter to number mapping\nexport const NOTE_LETTER_MAP: { [key: string]: number } = {\n  // First octave (numeric)\n  \"1\": 0,\n  \"2\": 1,\n  \"3\": 2,\n  \"4\": 3,\n  \"5\": 4,\n  \"6\": 5,\n  \"7\": 6,\n  \"8\": 7,\n  \"9\": 8,\n  \"0\": 9,\n\n  // Second octave (letters)\n  q: 7,\n  w: 8,\n  e: 9,\n  r: 10,\n  t: 11,\n  y: 12,\n  u: 13,\n\n  // Third octave\n  i: 14,\n  o: 15,\n  p: 16,\n  a: 14,\n  s: 15,\n  d: 16, // Alternative fingering\n  f: 17,\n  g: 18,\n  h: 19,\n  j: 20,\n  k: 21,\n  l: 22,\n};\n\n// Type definitions\nexport type TimeSignature = {\n  numerator: number; // Only numerator is stored since denominator is always 4\n  measureStart: number; // Which measure this time signature starts at\n};\n\nexport type KeySignature = {\n  tonic: number; // 0 = C, 1 = C#/Db, etc.\n  mode: \"major\" | \"minor\" | \"lydian\" | \"mixolydian\" | \"dorian\" | \"phrygian\";\n};\n\nexport type BeatPosition = number; // Integer part is beat number, fraction is position within beat\n\nexport type MeasureSpan = {\n  start: BeatPosition;\n  end: BeatPosition;\n};\n\nexport type LogicalNote = {\n  scaleDegree: number; // 1-7 with optional accidentals (for copying)\n  duration: number; // in MIDI ticks\n  span: MeasureSpan; // When this note occurs\n  accidental?: -1 | 0 | 1; // -1 for flat, 1 for sharp (for copying)\n  midiNumber: number | null; // Calculated MIDI number at creation time (null for rests)\n};\n\nexport type Command =\n  | { type: \"key\"; key: KeySignature }\n  | { type: \"insert\"; notes: LogicalNote[] }\n  | {\n      type: \"copy\";\n      targetMeasure: number;\n      targetBeat: number;\n      sourceStart: number;\n      sourceStartBeat: number;\n      sourceEnd: number;\n      sourceEndBeat: number;\n      shifts: { type: \"group\"; shifts: (number | \"x\")[] }[]; // Array of shift groups, each containing one or more shifts to be applied at the same position\n    }\n  | {\n      type: \"ac\"; // All channels copy\n      targetMeasure: number;\n      targetBeat: number;\n      sourceStart: number;\n      sourceStartBeat: number;\n      sourceEnd: number;\n      sourceEndBeat: number;\n      shifts: { type: \"group\"; shifts: (number | \"x\")[] }[]; // Array of shift groups, each containing one or more shifts to be applied at the same position\n    }\n  | { type: \"track\"; track: number; baseOctave?: number }\n  | { type: \"time\"; signatures: TimeSignature[] }\n  | { type: \"bpm\"; tempo: number };\n\nexport interface CommandContext {\n  currentKey: KeySignature;\n  existingNotes?: LogicalNote[];\n  lastNoteIndex?: number; // Index of last note before current command\n  currentTrack: number;\n  timeSignatures: TimeSignature[];\n  beatsPerMeasure?: number; // Optional because only needed during note parsing\n  channelOctaves: { [channel: number]: number }; // Map of channel numbers to their base octaves\n  commentToEndOfFile?: boolean;\n  currentBpm: number; // Default will be 120\n}\n","export const scores: { [key: string]: string } = {\n  schubert_d365_09: `Ab major\n3/4\nbpm 160\n\nlh\n2   i 5,wtu,wtu,\n3   c 2     0 x x 0\n7   c 6-6b3\n7b3 i rtu,\n18  i 5,rtu,rtu,\n19  c 18    0 x x 0 0\n\n4   i 5,eti,eti,\n5   c 4\n8   i q,\n8b2 c 4b2\n9   i q,eti-\n20  c 8     0 0 x x 0\n25  c 9\n\n\nrh\n1b2 i x-8'9'8=7-8-\n2   i w,4,4,\n3   i 4_6-5-\n4   i 4,3,5-8-5,.\n5   c 1\n6   i e-w-4,4,\n7   i 4,.r-e-w-\n8   i w,q,3-5-3,.\n\n17b2 i x-5-b5-5-\n18   i 6,2,2,\n19   i w,.q-7-6-\n20   i 5,e,3,q,.\n21b2 c 17b2-20b3 7\n24b3 i e-t-i,.\n\n\n9    ac 1-9\n25b2 ac 17b2-25\n`,\n  \"wima.e480-schubert_de.-tanz-d.365.25\": `3/4\nE major\nbpm 160\n\nlh\n2   i 5,rtu,rtu, q,eti,eti,\n4   c 2-3 0 0\n8   c 2\n9   i qeti_\n18  c 2-9\n\n\nrh\n1b3  i e,\n2    i 7-y-r-w-\n3    i q-i-t-e-\n4    i t-f-s-u-\n5    i q_\n5    c 1-5\n\n17b3 i e,\n18   i y-7-w-r-\n19   i a-q-e-t-\n20   i s-t-u-o-\n21   i d,\n21   c 17-20\n25   i a,\n\n\nch2\n2b3 i 5'6'5-.\n3   c 2     0 2 x 2 3 2\n18  c 2     11 12 14\n22  c 18-21 0 0 0 \n\n\n9    ac 1-9\n25b3 ac 17b3-25\n`,\n  \"wima.1124-schubert_de.-tanz-d.365.26\": `3/4\nE major\nbpm 180\n\nlh\n2   i 5,rtu,rtu,\n3   i q,eti,eti,\n4   c 2       0 x 0 x 0\n5   c 3       0 x 0\n9   i qeti_\n18  c 2-9\n\n\nrh\n1b3 i 5=t-. \n2   i bw=w-.5-,e=r-.\n3   i 7=8-.5,e'r'e-.\n4   i 7-w-r-y-o-u-\n5   i t=g-.d-\n5   c 1-4\n9   i a_\n\n17b3 i t,\n18   i   4-6-9-7-5-\n19   i   q-e-y-t-e-\n20   c 18      7\n21   i a=k=g-d-a-t-\n22   c 18-20b3\n24b3 i t=g-.a,\n\n\n9b3  ac 1b3-9\n25b3 ac 17b3-25`,\n  \"wima.4be9-schubert_de.-tanz-d.365.28\": `A major\nbpm 160\n3/4\n\nlh\n2 i x,et,et, x,rt,rt, x,et,et, x,rt,rt, x,wrt,wrt, x,et,e, x,wr,wr, qe,\n2 i q_.      w_.      q_.      w_.      5_.        q_.     5_.      \n18 c 6    0 0 x x 0\n20 c 4        0 0 x 0 \n24 c 8-9\n\nrh 4\n8b2  i 7-:w-:r-:\n18   c 8        2 9 x x 9 8 0\n20b2 i e-:t-:i-:\n21   c 20 7\n17b3 i q, 7,x,7-x- x_7-x- q,x,q-x- x_a-x- u,x,u-x- t,x,t-x- 5,x,5,q,\n\n1b3 i t'y't-. q,t-a-q, 7_\n3   c 1-3\n5b3 i t'y't-. 7,r-s-7, q,e-a-5_x,5,q,\n\n\n9    ac 1-9\n25b2 ac 17b2-25\n`,\n  \"idea-22---gibran-alcocer\": `3/4\nC minor\n\nlh\n99 i 7wr_.\n100 c 99 0 0\n\n1   i 6,yad,\n1b3 c 1b2-1b3 0 0 0 0\n3   i q,tip,\n3b3 c 3b2-3b3 0 0 0 0\n5   c 1-4\n\n9   c 1 -2 x x 0\n10  c 3 0 -1\n13  c 9-12\n17  c 16b2-16b3 0 0 0\n18  i yip_.\n\n19  c 9 2 0\n21  c 10-11\n23  c 19-22 0 0 0\n35  c 34b2-34b3 0 0 0\n36  i ruo_.\n\n37  c 19\n38  c 19b1-19b2 7\n38b2 c 37b2-37b3 0 0\n39  c 21\n40  i t,\n40b2 c 39b2-39b3 0 0\n41  c 37-40 0 0\n49  c 37-39\n52  i t_.\n\n53  c 9-18\n\n64  c 19-35\n\n81  c 19-34`,\n  \"idea-15---gibran-alcocer\": `3/4\nDb minor\n\nlh\n2 i 4r,ry,ry,q,ry,ry,\n4 c 2-3 2 4 3\n10 c 2-9\n18 i uo+.\n20 c 2-19 0 0 0 0\n92 i h-d-a-h-d-a-\n93 c 92 0 0 0\n96 i g-d-a-g-d-a- g-d-a-g-d-a- f-s-u-f-s-u-g-s-u-g-s-u-\n100 c 92-99\n\nrh\n16 i w_.e_.y_.t_.\n38 c 2-19 0 x 0\n1 i x,x-8-8-7-6+ x-q-q-w-e+ x,.q-t,t,t,t,e,e-w+ \n9 i x,x-w-e-w-6+x-6-6-7-q_.t,. x-r-r-t_e_r_\n\n20 i y-e-q- y-e-q- u-e-q- y-e-q-\n22 c 20-21\n24 i t-e-q- t-e-q-\n25 c 21\n26 c 24 -1\n27 c 22 -1\n28 c 20-27\n36 i y_.t_.\n56 c 20-37\n\n38 i q_.y_t,\n40 c 38-39\n42 i e_e,e_r,w_w,w,e,w,6_.\n47 c 39-43\n92 c 38-55 7\n`,\n  \"der-flohwalzer\": `4/4\nGb major\nlh 3\n60 i 1_\nrh 3\n1b4 i y-t-\n2 c 1 0 0 x 0 \n6 c 2-5\n21 c 1\n22 c 18-21\n42 c 2-17\n`,\n\n  Gravity_Falls_Opening: `D minor\nlh\n\n1 i 1+3+5+5_5_\n1 c 1-4 7\n5 i 1-5-q-5-e-q-5-q-\n\n7 c 5 2 2 5 5\n11 c 5-5b4 6\n11b4 i r-7-7-w-t-w-u-t-w-5-\n13 i 1-5-q-5-\n13b3 c 13-13b3 0 0 x 2 2 2 2 5 5 5 5 6 x 4 4 0 x 2 2 5 5 6 6 4 4\n\nrh\n1 i e-q-5-q-x_ e-7-5-7-x_ w-7-5-7-\n1b3 c 1-3\n4 c 3-3b3\n4b3 i w,t,q_.w,e+t_r,t,7+q_x,w,e_w_r_t_r_e_\n\n13b2 i e,e,e,t,t,r,e,x,t,t,t,r,t,r,e,\n17 c 13-15\n21 c 13-14\n23b2 i y,y,y,r_u_t_u_\n\n5 c 5-25 -7\n27 i aq+`,\n  \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\": `C minor\n3/4\n\nlh 2\n1 i q,x_5,x_\n3 c 1-2 0 0 0 0\n11 i w,x_5,x_\n13 c 11-12 0 0 0\n\n\n\n1 c 1-77 7\n221 i 1q\n\n\nrh 4\n5 i t_.e_w,q+q,w,e,q,e,t_y,t_.r_.\n13 c 5-6 -1 x x x 0 x -1\n\nch2 3\n1b2 i qet,\n1b3 c 1b2-1b3\n2 c 1 0 0 0\n\nEb major\nrh 4 \n79 i q_.q_.q,7,6,5,\n95 c 79-82 2 1`,\n\n  chopsticks: `C major\nbpm 184\n3/4\n\nlh\n1 i t,us,us,\n3 i t,da,da,\n4 c 3\n2 c 1 0 x x 0 0 -4 -4\n9 c 1-7\n16 i q,\n17 c 5-8 0 0 0 \n29 c 13-16\n49 i t,usf,usf,\n50 c 49\n51 i q,tad,tad,\n52 c 51\n53 c 49-52 0 0 \n61 c 49-51\n64 i q,\n33 c 17-32 0 x 0\n\nrh\n16b3 i d,s,x,a,u,x,y,t,x+t,r,\n22b3 i r,e,\n16 c 16-23 -2\n24 c 16-21\n48 c 16-32\n51b2 i t=y-:u=i-:s=d-:f=g\n\n\n`,\n  \"the-two-happy-coons---theodore-h.-northrup-1891\": `G major\n\nrh\n3 i 7,q,w,e\n3 c 3 2&5\n\n\n\nlh 2\n5 i q,tad,q,yaf,\n6 c 5\n7 c 5-5b3\n\n\nC major\n93 i a\n\n\n`,\n\n  \"passacaglia---handel-halvorsen\": `A minor\nlh\n1 i 1-q-t-e-a-e-t-e-\n2 c 1 0 0 3 -1 2 -2 -4 -3 0\n11 c 3-10 0 0 0 0 0 0 0\n74 i qa+\nrh\n3 i 3-e-w-e-q-e-7-e-6-e-5-e-4-e-3-e-\n5 c 3-4 -1 -2\n19 c 3-8 7`,\n};\n","import MIDIEvents from \"midievents\";\nimport { SecondsSpan } from \"./Rawl\";\nimport { MeasuresAndBeats } from \"./SystemLayout\";\n\nconst DRUM_CHANNEL = 9;\n\nexport type Note = {\n  note: {\n    midiNumber: number;\n    relativeNumber?: number;\n  };\n  isDrum: boolean;\n  id: number;\n  span: SecondsSpan;\n  chipState?: { on: any; off: any };\n  voiceIndex: number;\n};\n\nexport type ColoredNote = Note & {\n  color: string;\n  isActive: boolean;\n};\n\nexport type PitchBendPoint = {\n  time: number;\n  value: number;\n};\n\nexport type NotesInVoices = Note[][];\n\nexport type ColoredNotesInVoices = ColoredNote[][];\n\nexport type MidiSource = {\n  events: any;\n  activeChannels: any;\n  timebase: any;\n  timeEvents: any;\n  ticksPerBeat: number;\n};\n\nexport type ParsingResult = {\n  notes: NotesInVoices;\n  measuresAndBeats?: MeasuresAndBeats;\n};\n\nlet id = 0;\n\nconst getNotes = (events, channel, voiceIndex): Note[] => {\n  const notes: Note[] = [];\n  const noteOn = {};\n  events.forEach((event) => {\n    if (event.channel === channel && event.type === MIDIEvents.EVENT_MIDI) {\n      const midiNumber = event.param1;\n      if (\n        event.subtype === MIDIEvents.EVENT_MIDI_NOTE_OFF ||\n        (event.subtype === MIDIEvents.EVENT_MIDI_NOTE_ON && noteOn[midiNumber])\n      ) {\n        if (channel === DRUM_CHANNEL && midiNumber > 87) {\n          return;\n          // probably a bug? can't be played by a default MIDI sound font\n        }\n        if (midiNumber in noteOn) {\n          if (channel !== DRUM_CHANNEL && noteOn[midiNumber].param2 === 0) {\n            return;\n          }\n          if (event.playTime >= noteOn[midiNumber].playTime) {\n            notes.push({\n              note: {\n                midiNumber,\n              },\n              id,\n              isDrum: channel === DRUM_CHANNEL,\n              span: [noteOn[midiNumber].playTime / 1000, event.playTime / 1000],\n              chipState: { on: noteOn[midiNumber], off: event },\n              voiceIndex,\n            });\n\n            id++;\n          }\n          delete noteOn[midiNumber];\n        }\n      }\n      if (event.subtype === MIDIEvents.EVENT_MIDI_PITCH_BEND) {\n        // TODO: Process pitch bend range change messages.\n        // https://chat.openai.com/share/8332f454-6d52-4911-a40c-f11c251fea1b\n        for (const midiNumber in noteOn) {\n          (noteOn[midiNumber].pitchBend ||= []).push({\n            time: event.playTime / 1000,\n            value: (event.param2 << 7) + event.param1,\n          });\n        }\n      }\n      if (event.subtype === MIDIEvents.EVENT_MIDI_NOTE_ON) {\n        noteOn[midiNumber] = event;\n      }\n    }\n  });\n  if (channel === DRUM_CHANNEL) {\n    const uniqueMidiNumbers = [\n      ...new Set(notes.map((note) => note.note.midiNumber)),\n    ].sort((a, b) => a - b);\n\n    const midiToRelativeNumberMap = new Map();\n    uniqueMidiNumbers.forEach((midiNumber, index) => {\n      midiToRelativeNumberMap.set(midiNumber, index * 2);\n    });\n\n    notes.forEach((note) => {\n      note.note.relativeNumber = midiToRelativeNumberMap.get(\n        note.note.midiNumber,\n      );\n    });\n  }\n  return notes;\n};\n\n// We can also find key events:\n// key: 0,\n// scale: 0,\n// subtype: 89,\n// type: 255,\n// Except that in practice these events are always key=0 scale=0 (no one is setting them)\n// Although classical music MIDI might have it.\n\nfunction calculateMeasureAndBeats(timeEvents, timebase) {\n  const measures = [0];\n  const beats = [];\n  const measuresInTicks = [0];\n  let secondsPerQuarterNote = 0.5;\n  let numerator = 4;\n  let denominator = 4;\n  let lastBeatFractionGone = 0;\n  let constructedBeatsInLastMeasure = 0;\n  let lastBeatTime = 0; // either measures[-1] or beats[-1]\n  let lastTick = 0; // Track the last tick time\n\n  const createNewBeat = (timeUntil, tick) => {\n    const newBeatEndTime =\n      lastBeatTime +\n      (1 - lastBeatFractionGone) * ((secondsPerQuarterNote / denominator) * 4);\n\n    const newBeatEndTick =\n      lastTick + (1 - lastBeatFractionGone) * ((timebase / denominator) * 4);\n\n    if (newBeatEndTime - 0.005 <= timeUntil) {\n      if (constructedBeatsInLastMeasure + 1 >= numerator) {\n        measures.push(newBeatEndTime);\n        measuresInTicks.push(Math.round(newBeatEndTick)); // Push measure in ticks\n        constructedBeatsInLastMeasure = 0;\n      } else {\n        beats.push(newBeatEndTime);\n        constructedBeatsInLastMeasure++;\n      }\n      lastBeatFractionGone = 0;\n      lastBeatTime = newBeatEndTime;\n      lastTick = newBeatEndTick;\n      return true;\n    } else {\n      lastBeatFractionGone +=\n        (timeUntil - lastBeatTime) /\n        ((secondsPerQuarterNote / denominator) * 4);\n      lastBeatTime = timeUntil;\n      lastTick = tick; // Update the last tick position\n      return false;\n    }\n  };\n\n  timeEvents.forEach((event) => {\n    const { bpm, playTime, tick } = event;\n\n    while (createNewBeat(playTime / 1000, tick));\n\n    if (event.type === \"timeSignature\") {\n      numerator = event.numerator;\n      denominator = 2 ** event.denominatorPower;\n    } else {\n      secondsPerQuarterNote = 60 / bpm;\n    }\n  });\n\n  if (measures.length >= 2) {\n    measures.push(2 * measures.at(-1) - measures.at(-2));\n    measuresInTicks.push(2 * measuresInTicks.at(-1) - measuresInTicks.at(-2));\n  }\n\n  return { measures, beats, ticks: { measures: measuresInTicks } };\n}\n\nexport const parseNotes = ({\n  events,\n  activeChannels,\n  timeEvents,\n  timebase,\n}: MidiSource): ParsingResult => {\n  const measuresAndBeats = calculateMeasureAndBeats(timeEvents, timebase);\n  events.forEach((event) => {\n    if (event.subtype === MIDIEvents.EVENT_META_KEY_SIGNATURE) {\n      console.log(\"KEY SIGNATURE\" + JSON.stringify(event));\n    }\n  });\n  const notes = activeChannels.map((channel, index) =>\n    getNotes(events, channel, index),\n  );\n\n  // Remove last measure if second-to-last measure is empty\n  if (measuresAndBeats.measures.length > 2) {\n    const secondToLastMeasureStart =\n      measuresAndBeats.measures[measuresAndBeats.measures.length - 2];\n    const hasNotesInSecondToLastMeasure = notes.some((voiceNotes) =>\n      voiceNotes.some((note) => note.span[1] > secondToLastMeasureStart),\n    );\n\n    if (!hasNotesInSecondToLastMeasure) {\n      measuresAndBeats.measures.pop();\n      measuresAndBeats.ticks.measures.pop();\n      measuresAndBeats.beats = measuresAndBeats.beats.filter(\n        (beat) =>\n          beat <\n          measuresAndBeats.measures[measuresAndBeats.measures.length - 1],\n      );\n    }\n  }\n\n  return {\n    measuresAndBeats,\n    notes,\n  };\n};\n","'use strict';\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  require('promise/lib/rejection-tracking').enable();\n  window.Promise = require('promise/lib/es6-extensions.js');\n}\n\n// fetch() polyfill for making API calls.\nrequire('whatwg-fetch');\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = require('object-assign');\n\n// In tests, polyfill requestAnimationFrame since jsdom doesn't provide it yet.\n// We don't polyfill it in the browser--this is user's responsibility.\nif (process.env.NODE_ENV === 'test') {\n  require('raf').polyfill(global);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nReactDOM.render((\n  <Router basename={process.env.PUBLIC_URL}>\n    <App/>\n  </Router>\n), document.getElementById('root'));\n","/*eslint-disable*/\n\nvar CHIP_CORE = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  \n  return (\nfunction(moduleArg = {}) {\n\nvar Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=true;var ENVIRONMENT_IS_WORKER=false;var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=title=>document.title=title}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!=\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort(text)}}var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAP64,HEAPU64,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module[\"HEAP8\"]=HEAP8=new Int8Array(b);Module[\"HEAP16\"]=HEAP16=new Int16Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(b);Module[\"HEAP32\"]=HEAP32=new Int32Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(b);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(b);Module[\"HEAP64\"]=HEAP64=new BigInt64Array(b);Module[\"HEAPU64\"]=HEAPU64=new BigUint64Array(b)}var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;if(!Module[\"noFSInit\"]&&!FS.init.initialized)FS.init();FS.ignorePermissions=false;TTY.init();callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function getUniqueRunDependency(id){return id}function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}var wasmBinaryFile;wasmBinaryFile=\"chip-core.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+binaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(()=>getBinarySync(binaryFile))}}return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(instance=>instance).then(receiver,reason=>{err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(binaryFile)&&typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err(`wasm streaming compile failed: ${reason}`);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(binaryFile,imports,callback)})})}return instantiateArrayBuffer(binaryFile,imports,callback)}function createWasm(){var info={\"a\":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports[\"r\"];updateMemoryViews();wasmTable=wasmExports[\"pb\"];addOnInit(wasmExports[\"s\"]);removeRunDependency(\"wasm-instantiate\");return exports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}if(Module[\"instantiateWasm\"]){try{return Module[\"instantiateWasm\"](info,receiveInstance)}catch(e){err(`Module.instantiateWasm callback failed with error: ${e}`);readyPromiseReject(e)}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject);return{}}var ASM_CONSTS={510956:$0=>{console.log(\"Error during V2M conversion.\",$0)}};var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};function getValue(ptr,type=\"i8\"){if(type.endsWith(\"*\"))type=\"*\";switch(type){case\"i1\":return HEAP8[ptr>>0];case\"i8\":return HEAP8[ptr>>0];case\"i16\":return HEAP16[ptr>>1];case\"i32\":return HEAP32[ptr>>2];case\"i64\":return HEAP64[ptr>>3];case\"float\":return HEAPF32[ptr>>2];case\"double\":return HEAPF64[ptr>>3];case\"*\":return HEAPU32[ptr>>2];default:abort(`invalid type for getValue: ${type}`)}}function setValue(ptr,value,type=\"i8\"){if(type.endsWith(\"*\"))type=\"*\";switch(type){case\"i1\":HEAP8[ptr>>0]=value;break;case\"i8\":HEAP8[ptr>>0]=value;break;case\"i16\":HEAP16[ptr>>1]=value;break;case\"i32\":HEAP32[ptr>>2]=value;break;case\"i64\":HEAP64[ptr>>3]=BigInt(value);break;case\"float\":HEAPF32[ptr>>2]=value;break;case\"double\":HEAPF64[ptr>>3]=value;break;case\"*\":HEAPU32[ptr>>2]=value;break;default:abort(`invalid type for setValue: ${type}`)}}var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;var UTF8ArrayToString=(heapOrArray,idx,maxBytesToRead)=>{var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\";var ___assert_fail=(condition,filename,line,func)=>{abort(`Assertion failed: ${UTF8ToString(condition)}, at: `+[filename?UTF8ToString(filename):\"unknown filename\",line,func?UTF8ToString(func):\"unknown function\"])};function ExceptionInfo(excPtr){this.excPtr=excPtr;this.ptr=excPtr-24;this.set_type=function(type){HEAPU32[this.ptr+4>>2]=type};this.get_type=function(){return HEAPU32[this.ptr+4>>2]};this.set_destructor=function(destructor){HEAPU32[this.ptr+8>>2]=destructor};this.get_destructor=function(){return HEAPU32[this.ptr+8>>2]};this.set_caught=function(caught){caught=caught?1:0;HEAP8[this.ptr+12>>0]=caught};this.get_caught=function(){return HEAP8[this.ptr+12>>0]!=0};this.set_rethrown=function(rethrown){rethrown=rethrown?1:0;HEAP8[this.ptr+13>>0]=rethrown};this.get_rethrown=function(){return HEAP8[this.ptr+13>>0]!=0};this.init=function(type,destructor){this.set_adjusted_ptr(0);this.set_type(type);this.set_destructor(destructor)};this.set_adjusted_ptr=function(adjustedPtr){HEAPU32[this.ptr+16>>2]=adjustedPtr};this.get_adjusted_ptr=function(){return HEAPU32[this.ptr+16>>2]};this.get_exception_ptr=function(){var isPointer=___cxa_is_pointer_type(this.get_type());if(isPointer){return HEAPU32[this.excPtr>>2]}var adjusted=this.get_adjusted_ptr();if(adjusted!==0)return adjusted;return this.excPtr}}var exceptionLast=0;var uncaughtExceptionCount=0;var ___cxa_throw=(ptr,type,destructor)=>{var info=new ExceptionInfo(ptr);info.init(type,destructor);exceptionLast=ptr;uncaughtExceptionCount++;throw exceptionLast};var setErrNo=value=>{HEAP32[___errno_location()>>2]=value;return value};var PATH={isAbs:path=>path.charAt(0)===\"/\",splitPath:filename=>{var splitPathRe=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:(parts,allowAboveRoot)=>{var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last===\".\"){parts.splice(i,1)}else if(last===\"..\"){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift(\"..\")}}return parts},normalize:path=>{var isAbsolute=PATH.isAbs(path),trailingSlash=path.substr(-1)===\"/\";path=PATH.normalizeArray(path.split(\"/\").filter(p=>!!p),!isAbsolute).join(\"/\");if(!path&&!isAbsolute){path=\".\"}if(path&&trailingSlash){path+=\"/\"}return(isAbsolute?\"/\":\"\")+path},dirname:path=>{var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return\".\"}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:path=>{if(path===\"/\")return\"/\";path=PATH.normalize(path);path=path.replace(/\\/$/,\"\");var lastSlash=path.lastIndexOf(\"/\");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},join:function(){var paths=Array.prototype.slice.call(arguments);return PATH.normalize(paths.join(\"/\"))},join2:(l,r)=>PATH.normalize(l+\"/\"+r)};var initRandomFill=()=>{if(typeof crypto==\"object\"&&typeof crypto[\"getRandomValues\"]==\"function\"){return view=>crypto.getRandomValues(view)}else abort(\"initRandomDevice\")};var randomFill=view=>(randomFill=initRandomFill())(view);var PATH_FS={resolve:function(){var resolvedPath=\"\",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:FS.cwd();if(typeof path!=\"string\"){throw new TypeError(\"Arguments to path.resolve must be strings\")}else if(!path){return\"\"}resolvedPath=path+\"/\"+resolvedPath;resolvedAbsolute=PATH.isAbs(path)}resolvedPath=PATH.normalizeArray(resolvedPath.split(\"/\").filter(p=>!!p),!resolvedAbsolute).join(\"/\");return(resolvedAbsolute?\"/\":\"\")+resolvedPath||\".\"},relative:(from,to)=>{from=PATH_FS.resolve(from).substr(1);to=PATH_FS.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!==\"\")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!==\"\")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split(\"/\"));var toParts=trim(to.split(\"/\"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push(\"..\")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join(\"/\")}};var FS_stdin_getChar_buffer=[];var lengthBytesUTF8=str=>{var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++}else if(c<=2047){len+=2}else if(c>=55296&&c<=57343){len+=4;++i}else{len+=3}}return len};var stringToUTF8Array=(str,heap,outIdx,maxBytesToWrite)=>{if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx};function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1;var u8array=new Array(len);var numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);if(dontAddNull)u8array.length=numBytesWritten;return u8array}var FS_stdin_getChar=()=>{if(!FS_stdin_getChar_buffer.length){var result=null;if(typeof window!=\"undefined\"&&typeof window.prompt==\"function\"){result=window.prompt(\"Input: \");if(result!==null){result+=\"\\n\"}}else if(typeof readline==\"function\"){result=readline();if(result!==null){result+=\"\\n\"}}if(!result){return null}FS_stdin_getChar_buffer=intArrayFromString(result,true)}return FS_stdin_getChar_buffer.shift()};var TTY={ttys:[],init(){},shutdown(){},register(dev,ops){TTY.ttys[dev]={input:[],output:[],ops:ops};FS.registerDevice(dev,TTY.stream_ops)},stream_ops:{open(stream){var tty=TTY.ttys[stream.node.rdev];if(!tty){throw new FS.ErrnoError(43)}stream.tty=tty;stream.seekable=false},close(stream){stream.tty.ops.fsync(stream.tty)},fsync(stream){stream.tty.ops.fsync(stream.tty)},read(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.get_char){throw new FS.ErrnoError(60)}var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=stream.tty.ops.get_char(stream.tty)}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.put_char){throw new FS.ErrnoError(60)}try{for(var i=0;i<length;i++){stream.tty.ops.put_char(stream.tty,buffer[offset+i])}}catch(e){throw new FS.ErrnoError(29)}if(length){stream.node.timestamp=Date.now()}return i}},default_tty_ops:{get_char(tty){return FS_stdin_getChar()},put_char(tty,val){if(val===null||val===10){out(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},fsync(tty){if(tty.output&&tty.output.length>0){out(UTF8ArrayToString(tty.output,0));tty.output=[]}},ioctl_tcgets(tty){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(tty,optional_actions,data){return 0},ioctl_tiocgwinsz(tty){return[24,80]}},default_tty1_ops:{put_char(tty,val){if(val===null||val===10){err(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},fsync(tty){if(tty.output&&tty.output.length>0){err(UTF8ArrayToString(tty.output,0));tty.output=[]}}}};var zeroMemory=(address,size)=>{HEAPU8.fill(0,address,address+size);return address};var alignMemory=(size,alignment)=>Math.ceil(size/alignment)*alignment;var mmapAlloc=size=>{size=alignMemory(size,65536);var ptr=_emscripten_builtin_memalign(65536,size);if(!ptr)return 0;return zeroMemory(ptr,size)};var MEMFS={ops_table:null,mount(mount){return MEMFS.createNode(null,\"/\",16384|511,0)},createNode(parent,name,mode,dev){if(FS.isBlkdev(mode)||FS.isFIFO(mode)){throw new FS.ErrnoError(63)}if(!MEMFS.ops_table){MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}}}var node=FS.createNode(parent,name,mode,dev);if(FS.isDir(node.mode)){node.node_ops=MEMFS.ops_table.dir.node;node.stream_ops=MEMFS.ops_table.dir.stream;node.contents={}}else if(FS.isFile(node.mode)){node.node_ops=MEMFS.ops_table.file.node;node.stream_ops=MEMFS.ops_table.file.stream;node.usedBytes=0;node.contents=null}else if(FS.isLink(node.mode)){node.node_ops=MEMFS.ops_table.link.node;node.stream_ops=MEMFS.ops_table.link.stream}else if(FS.isChrdev(node.mode)){node.node_ops=MEMFS.ops_table.chrdev.node;node.stream_ops=MEMFS.ops_table.chrdev.stream}node.timestamp=Date.now();if(parent){parent.contents[name]=node;parent.timestamp=node.timestamp}return node},getFileDataAsTypedArray(node){if(!node.contents)return new Uint8Array(0);if(node.contents.subarray)return node.contents.subarray(0,node.usedBytes);return new Uint8Array(node.contents)},expandFileStorage(node,newCapacity){var prevCapacity=node.contents?node.contents.length:0;if(prevCapacity>=newCapacity)return;var CAPACITY_DOUBLING_MAX=1024*1024;newCapacity=Math.max(newCapacity,prevCapacity*(prevCapacity<CAPACITY_DOUBLING_MAX?2:1.125)>>>0);if(prevCapacity!=0)newCapacity=Math.max(newCapacity,256);var oldContents=node.contents;node.contents=new Uint8Array(newCapacity);if(node.usedBytes>0)node.contents.set(oldContents.subarray(0,node.usedBytes),0)},resizeFileStorage(node,newSize){if(node.usedBytes==newSize)return;if(newSize==0){node.contents=null;node.usedBytes=0}else{var oldContents=node.contents;node.contents=new Uint8Array(newSize);if(oldContents){node.contents.set(oldContents.subarray(0,Math.min(newSize,node.usedBytes)))}node.usedBytes=newSize}},node_ops:{getattr(node){var attr={};attr.dev=FS.isChrdev(node.mode)?node.id:1;attr.ino=node.id;attr.mode=node.mode;attr.nlink=1;attr.uid=0;attr.gid=0;attr.rdev=node.rdev;if(FS.isDir(node.mode)){attr.size=4096}else if(FS.isFile(node.mode)){attr.size=node.usedBytes}else if(FS.isLink(node.mode)){attr.size=node.link.length}else{attr.size=0}attr.atime=new Date(node.timestamp);attr.mtime=new Date(node.timestamp);attr.ctime=new Date(node.timestamp);attr.blksize=4096;attr.blocks=Math.ceil(attr.size/attr.blksize);return attr},setattr(node,attr){if(attr.mode!==undefined){node.mode=attr.mode}if(attr.timestamp!==undefined){node.timestamp=attr.timestamp}if(attr.size!==undefined){MEMFS.resizeFileStorage(node,attr.size)}},lookup(parent,name){throw FS.genericErrors[44]},mknod(parent,name,mode,dev){return MEMFS.createNode(parent,name,mode,dev)},rename(old_node,new_dir,new_name){if(FS.isDir(old_node.mode)){var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(new_node){for(var i in new_node.contents){throw new FS.ErrnoError(55)}}}delete old_node.parent.contents[old_node.name];old_node.parent.timestamp=Date.now();old_node.name=new_name;new_dir.contents[new_name]=old_node;new_dir.timestamp=old_node.parent.timestamp;old_node.parent=new_dir},unlink(parent,name){delete parent.contents[name];parent.timestamp=Date.now()},rmdir(parent,name){var node=FS.lookupNode(parent,name);for(var i in node.contents){throw new FS.ErrnoError(55)}delete parent.contents[name];parent.timestamp=Date.now()},readdir(node){var entries=[\".\",\"..\"];for(var key in node.contents){if(!node.contents.hasOwnProperty(key)){continue}entries.push(key)}return entries},symlink(parent,newname,oldpath){var node=MEMFS.createNode(parent,newname,511|40960,0);node.link=oldpath;return node},readlink(node){if(!FS.isLink(node.mode)){throw new FS.ErrnoError(28)}return node.link}},stream_ops:{read(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=stream.node.usedBytes)return 0;var size=Math.min(stream.node.usedBytes-position,length);if(size>8&&contents.subarray){buffer.set(contents.subarray(position,position+size),offset)}else{for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i]}return size},write(stream,buffer,offset,length,position,canOwn){if(buffer.buffer===HEAP8.buffer){canOwn=false}if(!length)return 0;var node=stream.node;node.timestamp=Date.now();if(buffer.subarray&&(!node.contents||node.contents.subarray)){if(canOwn){node.contents=buffer.subarray(offset,offset+length);node.usedBytes=length;return length}else if(node.usedBytes===0&&position===0){node.contents=buffer.slice(offset,offset+length);node.usedBytes=length;return length}else if(position+length<=node.usedBytes){node.contents.set(buffer.subarray(offset,offset+length),position);return length}}MEMFS.expandFileStorage(node,position+length);if(node.contents.subarray&&buffer.subarray){node.contents.set(buffer.subarray(offset,offset+length),position)}else{for(var i=0;i<length;i++){node.contents[position+i]=buffer[offset+i]}}node.usedBytes=Math.max(node.usedBytes,position+length);return length},llseek(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){position+=stream.node.usedBytes}}if(position<0){throw new FS.ErrnoError(28)}return position},allocate(stream,offset,length){MEMFS.expandFileStorage(stream.node,offset+length);stream.node.usedBytes=Math.max(stream.node.usedBytes,offset+length)},mmap(stream,length,position,prot,flags){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}var ptr;var allocated;var contents=stream.node.contents;if(!(flags&2)&&contents.buffer===HEAP8.buffer){allocated=false;ptr=contents.byteOffset}else{if(position>0||position+length<contents.length){if(contents.subarray){contents=contents.subarray(position,position+length)}else{contents=Array.prototype.slice.call(contents,position,position+length)}}allocated=true;ptr=mmapAlloc(length);if(!ptr){throw new FS.ErrnoError(48)}HEAP8.set(contents,ptr)}return{ptr:ptr,allocated:allocated}},msync(stream,buffer,offset,length,mmapFlags){MEMFS.stream_ops.write(stream,buffer,0,length,offset,false);return 0}}};var asyncLoad=(url,onload,onerror,noRunDep)=>{var dep=!noRunDep?getUniqueRunDependency(`al ${url}`):\"\";readAsync(url,arrayBuffer=>{assert(arrayBuffer,`Loading data file \"${url}\" failed (no arrayBuffer).`);onload(new Uint8Array(arrayBuffer));if(dep)removeRunDependency(dep)},event=>{if(onerror){onerror()}else{throw`Loading data file \"${url}\" failed.`}});if(dep)addRunDependency(dep)};var preloadPlugins=Module[\"preloadPlugins\"]||[];var FS_handledByPreloadPlugin=(byteArray,fullname,finish,onerror)=>{if(typeof Browser!=\"undefined\")Browser.init();var handled=false;preloadPlugins.forEach(plugin=>{if(handled)return;if(plugin[\"canHandle\"](fullname)){plugin[\"handle\"](byteArray,fullname,finish,onerror);handled=true}});return handled};var FS_createPreloadedFile=(parent,name,url,canRead,canWrite,onload,onerror,dontCreateFile,canOwn,preFinish)=>{var fullname=name?PATH_FS.resolve(PATH.join2(parent,name)):parent;var dep=getUniqueRunDependency(`cp ${fullname}`);function processData(byteArray){function finish(byteArray){if(preFinish)preFinish();if(!dontCreateFile){FS.createDataFile(parent,name,byteArray,canRead,canWrite,canOwn)}if(onload)onload();removeRunDependency(dep)}if(FS_handledByPreloadPlugin(byteArray,fullname,finish,()=>{if(onerror)onerror();removeRunDependency(dep)})){return}finish(byteArray)}addRunDependency(dep);if(typeof url==\"string\"){asyncLoad(url,byteArray=>processData(byteArray),onerror)}else{processData(url)}};var FS_modeStringToFlags=str=>{var flagModes={\"r\":0,\"r+\":2,\"w\":512|64|1,\"w+\":512|64|2,\"a\":1024|64|1,\"a+\":1024|64|2};var flags=flagModes[str];if(typeof flags==\"undefined\"){throw new Error(`Unknown file open mode: ${str}`)}return flags};var FS_getMode=(canRead,canWrite)=>{var mode=0;if(canRead)mode|=292|73;if(canWrite)mode|=146;return mode};var IDBFS={dbs:{},indexedDB:()=>{if(typeof indexedDB!=\"undefined\")return indexedDB;var ret=null;if(typeof window==\"object\")ret=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;assert(ret,\"IDBFS used, but indexedDB not supported\");return ret},DB_VERSION:21,DB_STORE_NAME:\"FILE_DATA\",mount:function(mount){return MEMFS.mount.apply(null,arguments)},syncfs:(mount,populate,callback)=>{IDBFS.getLocalSet(mount,(err,local)=>{if(err)return callback(err);IDBFS.getRemoteSet(mount,(err,remote)=>{if(err)return callback(err);var src=populate?remote:local;var dst=populate?local:remote;IDBFS.reconcile(src,dst,callback)})})},quit:()=>{Object.values(IDBFS.dbs).forEach(value=>value.close());IDBFS.dbs={}},getDB:(name,callback)=>{var db=IDBFS.dbs[name];if(db){return callback(null,db)}var req;try{req=IDBFS.indexedDB().open(name,IDBFS.DB_VERSION)}catch(e){return callback(e)}if(!req){return callback(\"Unable to connect to IndexedDB\")}req.onupgradeneeded=e=>{var db=e.target.result;var transaction=e.target.transaction;var fileStore;if(db.objectStoreNames.contains(IDBFS.DB_STORE_NAME)){fileStore=transaction.objectStore(IDBFS.DB_STORE_NAME)}else{fileStore=db.createObjectStore(IDBFS.DB_STORE_NAME)}if(!fileStore.indexNames.contains(\"timestamp\")){fileStore.createIndex(\"timestamp\",\"timestamp\",{unique:false})}};req.onsuccess=()=>{db=req.result;IDBFS.dbs[name]=db;callback(null,db)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},getLocalSet:(mount,callback)=>{var entries={};function isRealDir(p){return p!==\".\"&&p!==\"..\"}function toAbsolute(root){return p=>PATH.join2(root,p)}var check=FS.readdir(mount.mountpoint).filter(isRealDir).map(toAbsolute(mount.mountpoint));while(check.length){var path=check.pop();var stat;try{stat=FS.stat(path)}catch(e){return callback(e)}if(FS.isDir(stat.mode)){check.push.apply(check,FS.readdir(path).filter(isRealDir).map(toAbsolute(path)))}entries[path]={\"timestamp\":stat.mtime}}return callback(null,{type:\"local\",entries:entries})},getRemoteSet:(mount,callback)=>{var entries={};IDBFS.getDB(mount.mountpoint,(err,db)=>{if(err)return callback(err);try{var transaction=db.transaction([IDBFS.DB_STORE_NAME],\"readonly\");transaction.onerror=e=>{callback(e.target.error);e.preventDefault()};var store=transaction.objectStore(IDBFS.DB_STORE_NAME);var index=store.index(\"timestamp\");index.openKeyCursor().onsuccess=event=>{var cursor=event.target.result;if(!cursor){return callback(null,{type:\"remote\",db:db,entries:entries})}entries[cursor.primaryKey]={\"timestamp\":cursor.key};cursor.continue()}}catch(e){return callback(e)}})},loadLocalEntry:(path,callback)=>{var stat,node;try{var lookup=FS.lookupPath(path);node=lookup.node;stat=FS.stat(path)}catch(e){return callback(e)}if(FS.isDir(stat.mode)){return callback(null,{\"timestamp\":stat.mtime,\"mode\":stat.mode})}else if(FS.isFile(stat.mode)){node.contents=MEMFS.getFileDataAsTypedArray(node);return callback(null,{\"timestamp\":stat.mtime,\"mode\":stat.mode,\"contents\":node.contents})}else{return callback(new Error(\"node type not supported\"))}},storeLocalEntry:(path,entry,callback)=>{try{if(FS.isDir(entry[\"mode\"])){FS.mkdirTree(path,entry[\"mode\"])}else if(FS.isFile(entry[\"mode\"])){FS.writeFile(path,entry[\"contents\"],{canOwn:true})}else{return callback(new Error(\"node type not supported\"))}FS.chmod(path,entry[\"mode\"]);FS.utime(path,entry[\"timestamp\"],entry[\"timestamp\"])}catch(e){return callback(e)}callback(null)},removeLocalEntry:(path,callback)=>{try{var stat=FS.stat(path);if(FS.isDir(stat.mode)){FS.rmdir(path)}else if(FS.isFile(stat.mode)){FS.unlink(path)}}catch(e){return callback(e)}callback(null)},loadRemoteEntry:(store,path,callback)=>{var req=store.get(path);req.onsuccess=event=>{callback(null,event.target.result)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},storeRemoteEntry:(store,path,entry,callback)=>{try{var req=store.put(entry,path)}catch(e){callback(e);return}req.onsuccess=()=>{callback(null)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},removeRemoteEntry:(store,path,callback)=>{var req=store.delete(path);req.onsuccess=()=>{callback(null)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},reconcile:(src,dst,callback)=>{var total=0;var create=[];Object.keys(src.entries).forEach(function(key){var e=src.entries[key];var e2=dst.entries[key];if(!e2||e[\"timestamp\"].getTime()!=e2[\"timestamp\"].getTime()){create.push(key);total++}});var remove=[];Object.keys(dst.entries).forEach(function(key){if(!src.entries[key]){remove.push(key);total++}});if(!total){return callback(null)}var errored=false;var db=src.type===\"remote\"?src.db:dst.db;var transaction=db.transaction([IDBFS.DB_STORE_NAME],\"readwrite\");var store=transaction.objectStore(IDBFS.DB_STORE_NAME);function done(err){if(err&&!errored){errored=true;return callback(err)}}transaction.onerror=e=>{done(this.error);e.preventDefault()};transaction.oncomplete=e=>{if(!errored){callback(null)}};create.sort().forEach(path=>{if(dst.type===\"local\"){IDBFS.loadRemoteEntry(store,path,(err,entry)=>{if(err)return done(err);IDBFS.storeLocalEntry(path,entry,done)})}else{IDBFS.loadLocalEntry(path,(err,entry)=>{if(err)return done(err);IDBFS.storeRemoteEntry(store,path,entry,done)})}});remove.sort().reverse().forEach(path=>{if(dst.type===\"local\"){IDBFS.removeLocalEntry(path,done)}else{IDBFS.removeRemoteEntry(store,path,done)}})}};var FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:\"/\",initialized:false,ignorePermissions:true,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(path,opts={}){path=PATH_FS.resolve(path);if(!path)return{path:\"\",node:null};var defaults={follow_mount:true,recurse_count:0};opts=Object.assign(defaults,opts);if(opts.recurse_count>8){throw new FS.ErrnoError(32)}var parts=path.split(\"/\").filter(p=>!!p);var current=FS.root;var current_path=\"/\";for(var i=0;i<parts.length;i++){var islast=i===parts.length-1;if(islast&&opts.parent){break}current=FS.lookupNode(current,parts[i]);current_path=PATH.join2(current_path,parts[i]);if(FS.isMountpoint(current)){if(!islast||islast&&opts.follow_mount){current=current.mounted.root}}if(!islast||opts.follow){var count=0;while(FS.isLink(current.mode)){var link=FS.readlink(current_path);current_path=PATH_FS.resolve(PATH.dirname(current_path),link);var lookup=FS.lookupPath(current_path,{recurse_count:opts.recurse_count+1});current=lookup.node;if(count++>40){throw new FS.ErrnoError(32)}}}}return{path:current_path,node:current}},getPath(node){var path;while(true){if(FS.isRoot(node)){var mount=node.mount.mountpoint;if(!path)return mount;return mount[mount.length-1]!==\"/\"?`${mount}/${path}`:mount+path}path=path?`${node.name}/${path}`:node.name;node=node.parent}},hashName(parentid,name){var hash=0;for(var i=0;i<name.length;i++){hash=(hash<<5)-hash+name.charCodeAt(i)|0}return(parentid+hash>>>0)%FS.nameTable.length},hashAddNode(node){var hash=FS.hashName(node.parent.id,node.name);node.name_next=FS.nameTable[hash];FS.nameTable[hash]=node},hashRemoveNode(node){var hash=FS.hashName(node.parent.id,node.name);if(FS.nameTable[hash]===node){FS.nameTable[hash]=node.name_next}else{var current=FS.nameTable[hash];while(current){if(current.name_next===node){current.name_next=node.name_next;break}current=current.name_next}}},lookupNode(parent,name){var errCode=FS.mayLookup(parent);if(errCode){throw new FS.ErrnoError(errCode,parent)}var hash=FS.hashName(parent.id,name);for(var node=FS.nameTable[hash];node;node=node.name_next){var nodeName=node.name;if(node.parent.id===parent.id&&nodeName===name){return node}}return FS.lookup(parent,name)},createNode(parent,name,mode,rdev){var node=new FS.FSNode(parent,name,mode,rdev);FS.hashAddNode(node);return node},destroyNode(node){FS.hashRemoveNode(node)},isRoot(node){return node===node.parent},isMountpoint(node){return!!node.mounted},isFile(mode){return(mode&61440)===32768},isDir(mode){return(mode&61440)===16384},isLink(mode){return(mode&61440)===40960},isChrdev(mode){return(mode&61440)===8192},isBlkdev(mode){return(mode&61440)===24576},isFIFO(mode){return(mode&61440)===4096},isSocket(mode){return(mode&49152)===49152},flagsToPermissionString(flag){var perms=[\"r\",\"w\",\"rw\"][flag&3];if(flag&512){perms+=\"w\"}return perms},nodePermissions(node,perms){if(FS.ignorePermissions){return 0}if(perms.includes(\"r\")&&!(node.mode&292)){return 2}else if(perms.includes(\"w\")&&!(node.mode&146)){return 2}else if(perms.includes(\"x\")&&!(node.mode&73)){return 2}return 0},mayLookup(dir){var errCode=FS.nodePermissions(dir,\"x\");if(errCode)return errCode;if(!dir.node_ops.lookup)return 2;return 0},mayCreate(dir,name){try{var node=FS.lookupNode(dir,name);return 20}catch(e){}return FS.nodePermissions(dir,\"wx\")},mayDelete(dir,name,isdir){var node;try{node=FS.lookupNode(dir,name)}catch(e){return e.errno}var errCode=FS.nodePermissions(dir,\"wx\");if(errCode){return errCode}if(isdir){if(!FS.isDir(node.mode)){return 54}if(FS.isRoot(node)||FS.getPath(node)===FS.cwd()){return 10}}else{if(FS.isDir(node.mode)){return 31}}return 0},mayOpen(node,flags){if(!node){return 44}if(FS.isLink(node.mode)){return 32}else if(FS.isDir(node.mode)){if(FS.flagsToPermissionString(flags)!==\"r\"||flags&512){return 31}}return FS.nodePermissions(node,FS.flagsToPermissionString(flags))},MAX_OPEN_FDS:4096,nextfd(){for(var fd=0;fd<=FS.MAX_OPEN_FDS;fd++){if(!FS.streams[fd]){return fd}}throw new FS.ErrnoError(33)},getStreamChecked(fd){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}return stream},getStream:fd=>FS.streams[fd],createStream(stream,fd=-1){if(!FS.FSStream){FS.FSStream=function(){this.shared={}};FS.FSStream.prototype={};Object.defineProperties(FS.FSStream.prototype,{object:{get(){return this.node},set(val){this.node=val}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(val){this.shared.flags=val}},position:{get(){return this.shared.position},set(val){this.shared.position=val}}})}stream=Object.assign(new FS.FSStream,stream);if(fd==-1){fd=FS.nextfd()}stream.fd=fd;FS.streams[fd]=stream;return stream},closeStream(fd){FS.streams[fd]=null},chrdev_stream_ops:{open(stream){var device=FS.getDevice(stream.node.rdev);stream.stream_ops=device.stream_ops;if(stream.stream_ops.open){stream.stream_ops.open(stream)}},llseek(){throw new FS.ErrnoError(70)}},major:dev=>dev>>8,minor:dev=>dev&255,makedev:(ma,mi)=>ma<<8|mi,registerDevice(dev,ops){FS.devices[dev]={stream_ops:ops}},getDevice:dev=>FS.devices[dev],getMounts(mount){var mounts=[];var check=[mount];while(check.length){var m=check.pop();mounts.push(m);check.push.apply(check,m.mounts)}return mounts},syncfs(populate,callback){if(typeof populate==\"function\"){callback=populate;populate=false}FS.syncFSRequests++;if(FS.syncFSRequests>1){err(`warning: ${FS.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`)}var mounts=FS.getMounts(FS.root.mount);var completed=0;function doCallback(errCode){FS.syncFSRequests--;return callback(errCode)}function done(errCode){if(errCode){if(!done.errored){done.errored=true;return doCallback(errCode)}return}if(++completed>=mounts.length){doCallback(null)}}mounts.forEach(mount=>{if(!mount.type.syncfs){return done(null)}mount.type.syncfs(mount,populate,done)})},mount(type,opts,mountpoint){var root=mountpoint===\"/\";var pseudo=!mountpoint;var node;if(root&&FS.root){throw new FS.ErrnoError(10)}else if(!root&&!pseudo){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});mountpoint=lookup.path;node=lookup.node;if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}if(!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}}var mount={type:type,opts:opts,mountpoint:mountpoint,mounts:[]};var mountRoot=type.mount(mount);mountRoot.mount=mount;mount.root=mountRoot;if(root){FS.root=mountRoot}else if(node){node.mounted=mount;if(node.mount){node.mount.mounts.push(mount)}}return mountRoot},unmount(mountpoint){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});if(!FS.isMountpoint(lookup.node)){throw new FS.ErrnoError(28)}var node=lookup.node;var mount=node.mounted;var mounts=FS.getMounts(mount);Object.keys(FS.nameTable).forEach(hash=>{var current=FS.nameTable[hash];while(current){var next=current.name_next;if(mounts.includes(current.mount)){FS.destroyNode(current)}current=next}});node.mounted=null;var idx=node.mount.mounts.indexOf(mount);node.mount.mounts.splice(idx,1)},lookup(parent,name){return parent.node_ops.lookup(parent,name)},mknod(path,mode,dev){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);if(!name||name===\".\"||name===\"..\"){throw new FS.ErrnoError(28)}var errCode=FS.mayCreate(parent,name);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.mknod){throw new FS.ErrnoError(63)}return parent.node_ops.mknod(parent,name,mode,dev)},create(path,mode){mode=mode!==undefined?mode:438;mode&=4095;mode|=32768;return FS.mknod(path,mode,0)},mkdir(path,mode){mode=mode!==undefined?mode:511;mode&=511|512;mode|=16384;return FS.mknod(path,mode,0)},mkdirTree(path,mode){var dirs=path.split(\"/\");var d=\"\";for(var i=0;i<dirs.length;++i){if(!dirs[i])continue;d+=\"/\"+dirs[i];try{FS.mkdir(d,mode)}catch(e){if(e.errno!=20)throw e}}},mkdev(path,mode,dev){if(typeof dev==\"undefined\"){dev=mode;mode=438}mode|=8192;return FS.mknod(path,mode,dev)},symlink(oldpath,newpath){if(!PATH_FS.resolve(oldpath)){throw new FS.ErrnoError(44)}var lookup=FS.lookupPath(newpath,{parent:true});var parent=lookup.node;if(!parent){throw new FS.ErrnoError(44)}var newname=PATH.basename(newpath);var errCode=FS.mayCreate(parent,newname);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.symlink){throw new FS.ErrnoError(63)}return parent.node_ops.symlink(parent,newname,oldpath)},rename(old_path,new_path){var old_dirname=PATH.dirname(old_path);var new_dirname=PATH.dirname(new_path);var old_name=PATH.basename(old_path);var new_name=PATH.basename(new_path);var lookup,old_dir,new_dir;lookup=FS.lookupPath(old_path,{parent:true});old_dir=lookup.node;lookup=FS.lookupPath(new_path,{parent:true});new_dir=lookup.node;if(!old_dir||!new_dir)throw new FS.ErrnoError(44);if(old_dir.mount!==new_dir.mount){throw new FS.ErrnoError(75)}var old_node=FS.lookupNode(old_dir,old_name);var relative=PATH_FS.relative(old_path,new_dirname);if(relative.charAt(0)!==\".\"){throw new FS.ErrnoError(28)}relative=PATH_FS.relative(new_path,old_dirname);if(relative.charAt(0)!==\".\"){throw new FS.ErrnoError(55)}var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(old_node===new_node){return}var isdir=FS.isDir(old_node.mode);var errCode=FS.mayDelete(old_dir,old_name,isdir);if(errCode){throw new FS.ErrnoError(errCode)}errCode=new_node?FS.mayDelete(new_dir,new_name,isdir):FS.mayCreate(new_dir,new_name);if(errCode){throw new FS.ErrnoError(errCode)}if(!old_dir.node_ops.rename){throw new FS.ErrnoError(63)}if(FS.isMountpoint(old_node)||new_node&&FS.isMountpoint(new_node)){throw new FS.ErrnoError(10)}if(new_dir!==old_dir){errCode=FS.nodePermissions(old_dir,\"w\");if(errCode){throw new FS.ErrnoError(errCode)}}FS.hashRemoveNode(old_node);try{old_dir.node_ops.rename(old_node,new_dir,new_name)}catch(e){throw e}finally{FS.hashAddNode(old_node)}},rmdir(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,true);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.rmdir){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}parent.node_ops.rmdir(parent,name);FS.destroyNode(node)},readdir(path){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;if(!node.node_ops.readdir){throw new FS.ErrnoError(54)}return node.node_ops.readdir(node)},unlink(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;if(!parent){throw new FS.ErrnoError(44)}var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,false);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.unlink){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}parent.node_ops.unlink(parent,name);FS.destroyNode(node)},readlink(path){var lookup=FS.lookupPath(path);var link=lookup.node;if(!link){throw new FS.ErrnoError(44)}if(!link.node_ops.readlink){throw new FS.ErrnoError(28)}return PATH_FS.resolve(FS.getPath(link.parent),link.node_ops.readlink(link))},stat(path,dontFollow){var lookup=FS.lookupPath(path,{follow:!dontFollow});var node=lookup.node;if(!node){throw new FS.ErrnoError(44)}if(!node.node_ops.getattr){throw new FS.ErrnoError(63)}return node.node_ops.getattr(node)},lstat(path){return FS.stat(path,true)},chmod(path,mode,dontFollow){var node;if(typeof path==\"string\"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{mode:mode&4095|node.mode&~4095,timestamp:Date.now()})},lchmod(path,mode){FS.chmod(path,mode,true)},fchmod(fd,mode){var stream=FS.getStreamChecked(fd);FS.chmod(stream.node,mode)},chown(path,uid,gid,dontFollow){var node;if(typeof path==\"string\"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{timestamp:Date.now()})},lchown(path,uid,gid){FS.chown(path,uid,gid,true)},fchown(fd,uid,gid){var stream=FS.getStreamChecked(fd);FS.chown(stream.node,uid,gid)},truncate(path,len){if(len<0){throw new FS.ErrnoError(28)}var node;if(typeof path==\"string\"){var lookup=FS.lookupPath(path,{follow:true});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}if(FS.isDir(node.mode)){throw new FS.ErrnoError(31)}if(!FS.isFile(node.mode)){throw new FS.ErrnoError(28)}var errCode=FS.nodePermissions(node,\"w\");if(errCode){throw new FS.ErrnoError(errCode)}node.node_ops.setattr(node,{size:len,timestamp:Date.now()})},ftruncate(fd,len){var stream=FS.getStreamChecked(fd);if((stream.flags&2097155)===0){throw new FS.ErrnoError(28)}FS.truncate(stream.node,len)},utime(path,atime,mtime){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;node.node_ops.setattr(node,{timestamp:Math.max(atime,mtime)})},open(path,flags,mode){if(path===\"\"){throw new FS.ErrnoError(44)}flags=typeof flags==\"string\"?FS_modeStringToFlags(flags):flags;mode=typeof mode==\"undefined\"?438:mode;if(flags&64){mode=mode&4095|32768}else{mode=0}var node;if(typeof path==\"object\"){node=path}else{path=PATH.normalize(path);try{var lookup=FS.lookupPath(path,{follow:!(flags&131072)});node=lookup.node}catch(e){}}var created=false;if(flags&64){if(node){if(flags&128){throw new FS.ErrnoError(20)}}else{node=FS.mknod(path,mode,0);created=true}}if(!node){throw new FS.ErrnoError(44)}if(FS.isChrdev(node.mode)){flags&=~512}if(flags&65536&&!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}if(!created){var errCode=FS.mayOpen(node,flags);if(errCode){throw new FS.ErrnoError(errCode)}}if(flags&512&&!created){FS.truncate(node,0)}flags&=~(128|512|131072);var stream=FS.createStream({node:node,path:FS.getPath(node),flags:flags,seekable:true,position:0,stream_ops:node.stream_ops,ungotten:[],error:false});if(stream.stream_ops.open){stream.stream_ops.open(stream)}if(Module[\"logReadFiles\"]&&!(flags&1)){if(!FS.readFiles)FS.readFiles={};if(!(path in FS.readFiles)){FS.readFiles[path]=1}}return stream},close(stream){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(stream.getdents)stream.getdents=null;try{if(stream.stream_ops.close){stream.stream_ops.close(stream)}}catch(e){throw e}finally{FS.closeStream(stream.fd)}stream.fd=null},isClosed(stream){return stream.fd===null},llseek(stream,offset,whence){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(!stream.seekable||!stream.stream_ops.llseek){throw new FS.ErrnoError(70)}if(whence!=0&&whence!=1&&whence!=2){throw new FS.ErrnoError(28)}stream.position=stream.stream_ops.llseek(stream,offset,whence);stream.ungotten=[];return stream.position},read(stream,buffer,offset,length,position){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.read){throw new FS.ErrnoError(28)}var seeking=typeof position!=\"undefined\";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesRead=stream.stream_ops.read(stream,buffer,offset,length,position);if(!seeking)stream.position+=bytesRead;return bytesRead},write(stream,buffer,offset,length,position,canOwn){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.write){throw new FS.ErrnoError(28)}if(stream.seekable&&stream.flags&1024){FS.llseek(stream,0,2)}var seeking=typeof position!=\"undefined\";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesWritten=stream.stream_ops.write(stream,buffer,offset,length,position,canOwn);if(!seeking)stream.position+=bytesWritten;return bytesWritten},allocate(stream,offset,length){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(offset<0||length<=0){throw new FS.ErrnoError(28)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(!FS.isFile(stream.node.mode)&&!FS.isDir(stream.node.mode)){throw new FS.ErrnoError(43)}if(!stream.stream_ops.allocate){throw new FS.ErrnoError(138)}stream.stream_ops.allocate(stream,offset,length)},mmap(stream,length,position,prot,flags){if((prot&2)!==0&&(flags&2)===0&&(stream.flags&2097155)!==2){throw new FS.ErrnoError(2)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(2)}if(!stream.stream_ops.mmap){throw new FS.ErrnoError(43)}return stream.stream_ops.mmap(stream,length,position,prot,flags)},msync(stream,buffer,offset,length,mmapFlags){if(!stream.stream_ops.msync){return 0}return stream.stream_ops.msync(stream,buffer,offset,length,mmapFlags)},munmap:stream=>0,ioctl(stream,cmd,arg){if(!stream.stream_ops.ioctl){throw new FS.ErrnoError(59)}return stream.stream_ops.ioctl(stream,cmd,arg)},readFile(path,opts={}){opts.flags=opts.flags||0;opts.encoding=opts.encoding||\"binary\";if(opts.encoding!==\"utf8\"&&opts.encoding!==\"binary\"){throw new Error(`Invalid encoding type \"${opts.encoding}\"`)}var ret;var stream=FS.open(path,opts.flags);var stat=FS.stat(path);var length=stat.size;var buf=new Uint8Array(length);FS.read(stream,buf,0,length,0);if(opts.encoding===\"utf8\"){ret=UTF8ArrayToString(buf,0)}else if(opts.encoding===\"binary\"){ret=buf}FS.close(stream);return ret},writeFile(path,data,opts={}){opts.flags=opts.flags||577;var stream=FS.open(path,opts.flags,opts.mode);if(typeof data==\"string\"){var buf=new Uint8Array(lengthBytesUTF8(data)+1);var actualNumBytes=stringToUTF8Array(data,buf,0,buf.length);FS.write(stream,buf,0,actualNumBytes,undefined,opts.canOwn)}else if(ArrayBuffer.isView(data)){FS.write(stream,data,0,data.byteLength,undefined,opts.canOwn)}else{throw new Error(\"Unsupported data type\")}FS.close(stream)},cwd:()=>FS.currentPath,chdir(path){var lookup=FS.lookupPath(path,{follow:true});if(lookup.node===null){throw new FS.ErrnoError(44)}if(!FS.isDir(lookup.node.mode)){throw new FS.ErrnoError(54)}var errCode=FS.nodePermissions(lookup.node,\"x\");if(errCode){throw new FS.ErrnoError(errCode)}FS.currentPath=lookup.path},createDefaultDirectories(){FS.mkdir(\"/tmp\");FS.mkdir(\"/home\");FS.mkdir(\"/home/web_user\")},createDefaultDevices(){FS.mkdir(\"/dev\");FS.registerDevice(FS.makedev(1,3),{read:()=>0,write:(stream,buffer,offset,length,pos)=>length});FS.mkdev(\"/dev/null\",FS.makedev(1,3));TTY.register(FS.makedev(5,0),TTY.default_tty_ops);TTY.register(FS.makedev(6,0),TTY.default_tty1_ops);FS.mkdev(\"/dev/tty\",FS.makedev(5,0));FS.mkdev(\"/dev/tty1\",FS.makedev(6,0));var randomBuffer=new Uint8Array(1024),randomLeft=0;var randomByte=()=>{if(randomLeft===0){randomLeft=randomFill(randomBuffer).byteLength}return randomBuffer[--randomLeft]};FS.createDevice(\"/dev\",\"random\",randomByte);FS.createDevice(\"/dev\",\"urandom\",randomByte);FS.mkdir(\"/dev/shm\");FS.mkdir(\"/dev/shm/tmp\")},createSpecialDirectories(){FS.mkdir(\"/proc\");var proc_self=FS.mkdir(\"/proc/self\");FS.mkdir(\"/proc/self/fd\");FS.mount({mount(){var node=FS.createNode(proc_self,\"fd\",16384|511,73);node.node_ops={lookup(parent,name){var fd=+name;var stream=FS.getStreamChecked(fd);var ret={parent:null,mount:{mountpoint:\"fake\"},node_ops:{readlink:()=>stream.path}};ret.parent=ret;return ret}};return node}},{},\"/proc/self/fd\")},createStandardStreams(){if(Module[\"stdin\"]){FS.createDevice(\"/dev\",\"stdin\",Module[\"stdin\"])}else{FS.symlink(\"/dev/tty\",\"/dev/stdin\")}if(Module[\"stdout\"]){FS.createDevice(\"/dev\",\"stdout\",null,Module[\"stdout\"])}else{FS.symlink(\"/dev/tty\",\"/dev/stdout\")}if(Module[\"stderr\"]){FS.createDevice(\"/dev\",\"stderr\",null,Module[\"stderr\"])}else{FS.symlink(\"/dev/tty1\",\"/dev/stderr\")}var stdin=FS.open(\"/dev/stdin\",0);var stdout=FS.open(\"/dev/stdout\",1);var stderr=FS.open(\"/dev/stderr\",1)},ensureErrnoError(){if(FS.ErrnoError)return;FS.ErrnoError=function ErrnoError(errno,node){this.name=\"ErrnoError\";this.node=node;this.setErrno=function(errno){this.errno=errno};this.setErrno(errno);this.message=\"FS error\"};FS.ErrnoError.prototype=new Error;FS.ErrnoError.prototype.constructor=FS.ErrnoError;[44].forEach(code=>{FS.genericErrors[code]=new FS.ErrnoError(code);FS.genericErrors[code].stack=\"<generic error, no stack>\"})},staticInit(){FS.ensureErrnoError();FS.nameTable=new Array(4096);FS.mount(MEMFS,{},\"/\");FS.createDefaultDirectories();FS.createDefaultDevices();FS.createSpecialDirectories();FS.filesystems={\"MEMFS\":MEMFS,\"IDBFS\":IDBFS}},init(input,output,error){FS.init.initialized=true;FS.ensureErrnoError();Module[\"stdin\"]=input||Module[\"stdin\"];Module[\"stdout\"]=output||Module[\"stdout\"];Module[\"stderr\"]=error||Module[\"stderr\"];FS.createStandardStreams()},quit(){FS.init.initialized=false;for(var i=0;i<FS.streams.length;i++){var stream=FS.streams[i];if(!stream){continue}FS.close(stream)}},findObject(path,dontResolveLastLink){var ret=FS.analyzePath(path,dontResolveLastLink);if(!ret.exists){return null}return ret.object},analyzePath(path,dontResolveLastLink){try{var lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});path=lookup.path}catch(e){}var ret={isRoot:false,exists:false,error:0,name:null,path:null,object:null,parentExists:false,parentPath:null,parentObject:null};try{var lookup=FS.lookupPath(path,{parent:true});ret.parentExists=true;ret.parentPath=lookup.path;ret.parentObject=lookup.node;ret.name=PATH.basename(path);lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});ret.exists=true;ret.path=lookup.path;ret.object=lookup.node;ret.name=lookup.node.name;ret.isRoot=lookup.path===\"/\"}catch(e){ret.error=e.errno}return ret},createPath(parent,path,canRead,canWrite){parent=typeof parent==\"string\"?parent:FS.getPath(parent);var parts=path.split(\"/\").reverse();while(parts.length){var part=parts.pop();if(!part)continue;var current=PATH.join2(parent,part);try{FS.mkdir(current)}catch(e){}parent=current}return current},createFile(parent,name,properties,canRead,canWrite){var path=PATH.join2(typeof parent==\"string\"?parent:FS.getPath(parent),name);var mode=FS_getMode(canRead,canWrite);return FS.create(path,mode)},createDataFile(parent,name,data,canRead,canWrite,canOwn){var path=name;if(parent){parent=typeof parent==\"string\"?parent:FS.getPath(parent);path=name?PATH.join2(parent,name):parent}var mode=FS_getMode(canRead,canWrite);var node=FS.create(path,mode);if(data){if(typeof data==\"string\"){var arr=new Array(data.length);for(var i=0,len=data.length;i<len;++i)arr[i]=data.charCodeAt(i);data=arr}FS.chmod(node,mode|146);var stream=FS.open(node,577);FS.write(stream,data,0,data.length,0,canOwn);FS.close(stream);FS.chmod(node,mode)}return node},createDevice(parent,name,input,output){var path=PATH.join2(typeof parent==\"string\"?parent:FS.getPath(parent),name);var mode=FS_getMode(!!input,!!output);if(!FS.createDevice.major)FS.createDevice.major=64;var dev=FS.makedev(FS.createDevice.major++,0);FS.registerDevice(dev,{open(stream){stream.seekable=false},close(stream){if(output&&output.buffer&&output.buffer.length){output(10)}},read(stream,buffer,offset,length,pos){var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=input()}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write(stream,buffer,offset,length,pos){for(var i=0;i<length;i++){try{output(buffer[offset+i])}catch(e){throw new FS.ErrnoError(29)}}if(length){stream.node.timestamp=Date.now()}return i}});return FS.mkdev(path,mode,dev)},forceLoadFile(obj){if(obj.isDevice||obj.isFolder||obj.link||obj.contents)return true;if(typeof XMLHttpRequest!=\"undefined\"){throw new Error(\"Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.\")}else if(read_){try{obj.contents=intArrayFromString(read_(obj.url),true);obj.usedBytes=obj.contents.length}catch(e){throw new FS.ErrnoError(29)}}else{throw new Error(\"Cannot load without read() or XMLHttpRequest.\")}},createLazyFile(parent,name,url,canRead,canWrite){function LazyUint8Array(){this.lengthKnown=false;this.chunks=[]}LazyUint8Array.prototype.get=function LazyUint8Array_get(idx){if(idx>this.length-1||idx<0){return undefined}var chunkOffset=idx%this.chunkSize;var chunkNum=idx/this.chunkSize|0;return this.getter(chunkNum)[chunkOffset]};LazyUint8Array.prototype.setDataGetter=function LazyUint8Array_setDataGetter(getter){this.getter=getter};LazyUint8Array.prototype.cacheLength=function LazyUint8Array_cacheLength(){var xhr=new XMLHttpRequest;xhr.open(\"HEAD\",url,false);xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error(\"Couldn't load \"+url+\". Status: \"+xhr.status);var datalength=Number(xhr.getResponseHeader(\"Content-length\"));var header;var hasByteServing=(header=xhr.getResponseHeader(\"Accept-Ranges\"))&&header===\"bytes\";var usesGzip=(header=xhr.getResponseHeader(\"Content-Encoding\"))&&header===\"gzip\";var chunkSize=1024*1024;if(!hasByteServing)chunkSize=datalength;var doXHR=(from,to)=>{if(from>to)throw new Error(\"invalid range (\"+from+\", \"+to+\") or no bytes requested!\");if(to>datalength-1)throw new Error(\"only \"+datalength+\" bytes available! programmer error!\");var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);if(datalength!==chunkSize)xhr.setRequestHeader(\"Range\",\"bytes=\"+from+\"-\"+to);xhr.responseType=\"arraybuffer\";if(xhr.overrideMimeType){xhr.overrideMimeType(\"text/plain; charset=x-user-defined\")}xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error(\"Couldn't load \"+url+\". Status: \"+xhr.status);if(xhr.response!==undefined){return new Uint8Array(xhr.response||[])}return intArrayFromString(xhr.responseText||\"\",true)};var lazyArray=this;lazyArray.setDataGetter(chunkNum=>{var start=chunkNum*chunkSize;var end=(chunkNum+1)*chunkSize-1;end=Math.min(end,datalength-1);if(typeof lazyArray.chunks[chunkNum]==\"undefined\"){lazyArray.chunks[chunkNum]=doXHR(start,end)}if(typeof lazyArray.chunks[chunkNum]==\"undefined\")throw new Error(\"doXHR failed!\");return lazyArray.chunks[chunkNum]});if(usesGzip||!datalength){chunkSize=datalength=1;datalength=this.getter(0).length;chunkSize=datalength;out(\"LazyFiles on gzip forces download of the whole file when length is accessed\")}this._length=datalength;this._chunkSize=chunkSize;this.lengthKnown=true};if(typeof XMLHttpRequest!=\"undefined\"){if(!ENVIRONMENT_IS_WORKER)throw\"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc\";var lazyArray=new LazyUint8Array;Object.defineProperties(lazyArray,{length:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._length}},chunkSize:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._chunkSize}}});var properties={isDevice:false,contents:lazyArray}}else{var properties={isDevice:false,url:url}}var node=FS.createFile(parent,name,properties,canRead,canWrite);if(properties.contents){node.contents=properties.contents}else if(properties.url){node.contents=null;node.url=properties.url}Object.defineProperties(node,{usedBytes:{get:function(){return this.contents.length}}});var stream_ops={};var keys=Object.keys(node.stream_ops);keys.forEach(key=>{var fn=node.stream_ops[key];stream_ops[key]=function forceLoadLazyFile(){FS.forceLoadFile(node);return fn.apply(null,arguments)}});function writeChunks(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=contents.length)return 0;var size=Math.min(contents.length-position,length);if(contents.slice){for(var i=0;i<size;i++){buffer[offset+i]=contents[position+i]}}else{for(var i=0;i<size;i++){buffer[offset+i]=contents.get(position+i)}}return size}stream_ops.read=(stream,buffer,offset,length,position)=>{FS.forceLoadFile(node);return writeChunks(stream,buffer,offset,length,position)};stream_ops.mmap=(stream,length,position,prot,flags)=>{FS.forceLoadFile(node);var ptr=mmapAlloc(length);if(!ptr){throw new FS.ErrnoError(48)}writeChunks(stream,HEAP8,ptr,length,position);return{ptr:ptr,allocated:true}};node.stream_ops=stream_ops;return node}};var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt(dirfd,path,allowEmpty){if(PATH.isAbs(path)){return path}var dir;if(dirfd===-100){dir=FS.cwd()}else{var dirstream=SYSCALLS.getStreamFromFD(dirfd);dir=dirstream.path}if(path.length==0){if(!allowEmpty){throw new FS.ErrnoError(44)}return dir}return PATH.join2(dir,path)},doStat(func,path,buf){try{var stat=func(path)}catch(e){if(e&&e.node&&PATH.normalize(path)!==PATH.normalize(FS.getPath(e.node))){return-54}throw e}HEAP32[buf>>2]=stat.dev;HEAP32[buf+4>>2]=stat.mode;HEAPU32[buf+8>>2]=stat.nlink;HEAP32[buf+12>>2]=stat.uid;HEAP32[buf+16>>2]=stat.gid;HEAP32[buf+20>>2]=stat.rdev;HEAP64[buf+24>>3]=BigInt(stat.size);HEAP32[buf+32>>2]=4096;HEAP32[buf+36>>2]=stat.blocks;var atime=stat.atime.getTime();var mtime=stat.mtime.getTime();var ctime=stat.ctime.getTime();HEAP64[buf+40>>3]=BigInt(Math.floor(atime/1e3));HEAPU32[buf+48>>2]=atime%1e3*1e3;HEAP64[buf+56>>3]=BigInt(Math.floor(mtime/1e3));HEAPU32[buf+64>>2]=mtime%1e3*1e3;HEAP64[buf+72>>3]=BigInt(Math.floor(ctime/1e3));HEAPU32[buf+80>>2]=ctime%1e3*1e3;HEAP64[buf+88>>3]=BigInt(stat.ino);return 0},doMsync(addr,stream,len,flags,offset){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}if(flags&2){return 0}var buffer=HEAPU8.slice(addr,addr+len);FS.msync(stream,buffer,offset,len,flags)},varargs:undefined,get(){var ret=HEAP32[SYSCALLS.varargs>>2];SYSCALLS.varargs+=4;return ret},getp(){return SYSCALLS.get()},getStr(ptr){var ret=UTF8ToString(ptr);return ret},getStreamFromFD(fd){var stream=FS.getStreamChecked(fd);return stream}};function ___syscall_fcntl64(fd,cmd,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(cmd){case 0:{var arg=SYSCALLS.get();if(arg<0){return-28}while(FS.streams[arg]){arg++}var newStream;newStream=FS.createStream(stream,arg);return newStream.fd}case 1:case 2:return 0;case 3:return stream.flags;case 4:{var arg=SYSCALLS.get();stream.flags|=arg;return 0}case 5:{var arg=SYSCALLS.getp();var offset=0;HEAP16[arg+offset>>1]=2;return 0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:setErrNo(28);return-1;default:{return-28}}}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}function ___syscall_ioctl(fd,op,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(op){case 21509:{if(!stream.tty)return-59;return 0}case 21505:{if(!stream.tty)return-59;if(stream.tty.ops.ioctl_tcgets){var termios=stream.tty.ops.ioctl_tcgets(stream);var argp=SYSCALLS.getp();HEAP32[argp>>2]=termios.c_iflag||0;HEAP32[argp+4>>2]=termios.c_oflag||0;HEAP32[argp+8>>2]=termios.c_cflag||0;HEAP32[argp+12>>2]=termios.c_lflag||0;for(var i=0;i<32;i++){HEAP8[argp+i+17>>0]=termios.c_cc[i]||0}return 0}return 0}case 21510:case 21511:case 21512:{if(!stream.tty)return-59;return 0}case 21506:case 21507:case 21508:{if(!stream.tty)return-59;if(stream.tty.ops.ioctl_tcsets){var argp=SYSCALLS.getp();var c_iflag=HEAP32[argp>>2];var c_oflag=HEAP32[argp+4>>2];var c_cflag=HEAP32[argp+8>>2];var c_lflag=HEAP32[argp+12>>2];var c_cc=[];for(var i=0;i<32;i++){c_cc.push(HEAP8[argp+i+17>>0])}return stream.tty.ops.ioctl_tcsets(stream.tty,op,{c_iflag:c_iflag,c_oflag:c_oflag,c_cflag:c_cflag,c_lflag:c_lflag,c_cc:c_cc})}return 0}case 21519:{if(!stream.tty)return-59;var argp=SYSCALLS.getp();HEAP32[argp>>2]=0;return 0}case 21520:{if(!stream.tty)return-59;return-28}case 21531:{var argp=SYSCALLS.getp();return FS.ioctl(stream,op,argp)}case 21523:{if(!stream.tty)return-59;if(stream.tty.ops.ioctl_tiocgwinsz){var winsize=stream.tty.ops.ioctl_tiocgwinsz(stream.tty);var argp=SYSCALLS.getp();HEAP16[argp>>1]=winsize[0];HEAP16[argp+2>>1]=winsize[1]}return 0}case 21524:{if(!stream.tty)return-59;return 0}case 21515:{if(!stream.tty)return-59;return 0}default:return-28}}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}function ___syscall_openat(dirfd,path,flags,varargs){SYSCALLS.varargs=varargs;try{path=SYSCALLS.getStr(path);path=SYSCALLS.calculateAt(dirfd,path);var mode=varargs?SYSCALLS.get():0;return FS.open(path,flags,mode).fd}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}function ___syscall_stat64(path,buf){try{path=SYSCALLS.getStr(path);return SYSCALLS.doStat(FS.stat,path,buf)}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}var MAX_INT53=9007199254740992;var MIN_INT53=-9007199254740992;var bigintToI53Checked=num=>num<MIN_INT53||num>MAX_INT53?NaN:Number(num);function __munmap_js(addr,len,prot,flags,fd,offset){offset=bigintToI53Checked(offset);try{if(isNaN(offset))return 61;var stream=SYSCALLS.getStreamFromFD(fd);if(prot&2){SYSCALLS.doMsync(addr,stream,len,flags,offset)}FS.munmap(stream)}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}var _abort=()=>{abort(\"\")};var readEmAsmArgsArray=[];var readEmAsmArgs=(sigPtr,buf)=>{readEmAsmArgsArray.length=0;var ch;while(ch=HEAPU8[sigPtr++]){buf+=ch!=105&&buf%8?4:0;readEmAsmArgsArray.push(ch==106?HEAP64[buf>>3]:ch==105?HEAP32[buf>>2]:HEAPF64[buf>>3]);buf+=ch==105?4:8}return readEmAsmArgsArray};var runEmAsmFunction=(code,sigPtr,argbuf)=>{var args=readEmAsmArgs(sigPtr,argbuf);return ASM_CONSTS[code].apply(null,args)};var _emscripten_asm_const_int=(code,sigPtr,argbuf)=>runEmAsmFunction(code,sigPtr,argbuf);var _emscripten_memcpy_big=(dest,src,num)=>HEAPU8.copyWithin(dest,src,src+num);var getHeapMax=()=>2147483648;var growMemory=size=>{var b=wasmMemory.buffer;var pages=(size-b.byteLength+65535)/65536;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=requestedSize=>{var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false};var ENV={};var getExecutableName=()=>thisProgram||\"./this.program\";var getEnvStrings=()=>{if(!getEnvStrings.strings){var lang=(typeof navigator==\"object\"&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\";var env={\"USER\":\"web_user\",\"LOGNAME\":\"web_user\",\"PATH\":\"/\",\"PWD\":\"/\",\"HOME\":\"/home/web_user\",\"LANG\":lang,\"_\":getExecutableName()};for(var x in ENV){if(ENV[x]===undefined)delete env[x];else env[x]=ENV[x]}var strings=[];for(var x in env){strings.push(`${x}=${env[x]}`)}getEnvStrings.strings=strings}return getEnvStrings.strings};var stringToAscii=(str,buffer)=>{for(var i=0;i<str.length;++i){HEAP8[buffer++>>0]=str.charCodeAt(i)}HEAP8[buffer>>0]=0};var _environ_get=(__environ,environ_buf)=>{var bufSize=0;getEnvStrings().forEach((string,i)=>{var ptr=environ_buf+bufSize;HEAPU32[__environ+i*4>>2]=ptr;stringToAscii(string,ptr);bufSize+=string.length+1});return 0};var _environ_sizes_get=(penviron_count,penviron_buf_size)=>{var strings=getEnvStrings();HEAPU32[penviron_count>>2]=strings.length;var bufSize=0;strings.forEach(string=>bufSize+=string.length+1);HEAPU32[penviron_buf_size>>2]=bufSize;return 0};function _fd_close(fd){try{var stream=SYSCALLS.getStreamFromFD(fd);FS.close(stream);return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}var doReadv=(stream,iov,iovcnt,offset)=>{var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;var curr=FS.read(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr;if(curr<len)break;if(typeof offset!==\"undefined\"){offset+=curr}}return ret};function _fd_read(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=doReadv(stream,iov,iovcnt);HEAPU32[pnum>>2]=num;return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}function _fd_seek(fd,offset,whence,newOffset){offset=bigintToI53Checked(offset);try{if(isNaN(offset))return 61;var stream=SYSCALLS.getStreamFromFD(fd);FS.llseek(stream,offset,whence);HEAP64[newOffset>>3]=BigInt(stream.position);if(stream.getdents&&offset===0&&whence===0)stream.getdents=null;return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}var doWritev=(stream,iov,iovcnt,offset)=>{var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;var curr=FS.write(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr;if(typeof offset!==\"undefined\"){offset+=curr}}return ret};function _fd_write(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=doWritev(stream,iov,iovcnt);HEAPU32[pnum>>2]=num;return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}var ALLOC_NORMAL=0;var getCFunc=ident=>{var func=Module[\"_\"+ident];return func};var writeArrayToMemory=(array,buffer)=>{HEAP8.set(array,buffer)};var stringToUTF8=(str,outPtr,maxBytesToWrite)=>stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);var stringToUTF8OnStack=str=>{var size=lengthBytesUTF8(str)+1;var ret=stackAlloc(size);stringToUTF8(str,ret,size);return ret};var ccall=(ident,returnType,argTypes,args,opts)=>{var toC={\"string\":str=>{var ret=0;if(str!==null&&str!==undefined&&str!==0){ret=stringToUTF8OnStack(str)}return ret},\"array\":arr=>{var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType===\"string\"){return UTF8ToString(ret)}if(returnType===\"boolean\")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);function onDone(ret){if(stack!==0)stackRestore(stack);return convertReturnValue(ret)}ret=onDone(ret);return ret};var FSNode=function(parent,name,mode,rdev){if(!parent){parent=this}this.parent=parent;this.mount=parent.mount;this.mounted=null;this.id=FS.nextInode++;this.name=name;this.mode=mode;this.node_ops={};this.stream_ops={};this.rdev=rdev};var readMode=292|73;var writeMode=146;Object.defineProperties(FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(val){val?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(val){val?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}});FS.FSNode=FSNode;FS.createPreloadedFile=FS_createPreloadedFile;FS.staticInit();var wasmImports={a:___assert_fail,b:___cxa_throw,c:___syscall_fcntl64,h:___syscall_ioctl,i:___syscall_openat,o:___syscall_stat64,p:__munmap_js,e:_abort,k:_emscripten_asm_const_int,j:_emscripten_memcpy_big,n:_emscripten_resize_heap,l:_environ_get,m:_environ_sizes_get,d:_fd_close,g:_fd_read,q:_fd_seek,f:_fd_write};var wasmExports=createWasm();var ___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports[\"s\"])();var _cqt_init=Module[\"_cqt_init\"]=(a0,a1,a2,a3,a4,a5)=>(_cqt_init=Module[\"_cqt_init\"]=wasmExports[\"t\"])(a0,a1,a2,a3,a4,a5);var _cqt_calc=Module[\"_cqt_calc\"]=(a0,a1)=>(_cqt_calc=Module[\"_cqt_calc\"]=wasmExports[\"u\"])(a0,a1);var _cqt_render_line=Module[\"_cqt_render_line\"]=a0=>(_cqt_render_line=Module[\"_cqt_render_line\"]=wasmExports[\"v\"])(a0);var _cqt_bin_to_freq=Module[\"_cqt_bin_to_freq\"]=a0=>(_cqt_bin_to_freq=Module[\"_cqt_bin_to_freq\"]=wasmExports[\"w\"])(a0);var _fluid_synth_noteon=Module[\"_fluid_synth_noteon\"]=(a0,a1,a2,a3)=>(_fluid_synth_noteon=Module[\"_fluid_synth_noteon\"]=wasmExports[\"x\"])(a0,a1,a2,a3);var _fluid_synth_noteoff=Module[\"_fluid_synth_noteoff\"]=(a0,a1,a2)=>(_fluid_synth_noteoff=Module[\"_fluid_synth_noteoff\"]=wasmExports[\"y\"])(a0,a1,a2);var _fluid_synth_write_float=Module[\"_fluid_synth_write_float\"]=(a0,a1,a2,a3,a4,a5,a6,a7)=>(_fluid_synth_write_float=Module[\"_fluid_synth_write_float\"]=wasmExports[\"z\"])(a0,a1,a2,a3,a4,a5,a6,a7);var _fluid_synth_all_notes_off=Module[\"_fluid_synth_all_notes_off\"]=(a0,a1)=>(_fluid_synth_all_notes_off=Module[\"_fluid_synth_all_notes_off\"]=wasmExports[\"A\"])(a0,a1);var _adl_rt_noteOn=Module[\"_adl_rt_noteOn\"]=(a0,a1,a2,a3)=>(_adl_rt_noteOn=Module[\"_adl_rt_noteOn\"]=wasmExports[\"B\"])(a0,a1,a2,a3);var _adl_rt_noteOff=Module[\"_adl_rt_noteOff\"]=(a0,a1,a2)=>(_adl_rt_noteOff=Module[\"_adl_rt_noteOff\"]=wasmExports[\"C\"])(a0,a1,a2);var _adl_rt_patchChange=Module[\"_adl_rt_patchChange\"]=(a0,a1,a2)=>(_adl_rt_patchChange=Module[\"_adl_rt_patchChange\"]=wasmExports[\"D\"])(a0,a1,a2);var _adl_rt_pitchBend=Module[\"_adl_rt_pitchBend\"]=(a0,a1,a2)=>(_adl_rt_pitchBend=Module[\"_adl_rt_pitchBend\"]=wasmExports[\"E\"])(a0,a1,a2);var _adl_rt_controllerChange=Module[\"_adl_rt_controllerChange\"]=(a0,a1,a2,a3)=>(_adl_rt_controllerChange=Module[\"_adl_rt_controllerChange\"]=wasmExports[\"F\"])(a0,a1,a2,a3);var _adl_rt_channelAfterTouch=Module[\"_adl_rt_channelAfterTouch\"]=(a0,a1,a2)=>(_adl_rt_channelAfterTouch=Module[\"_adl_rt_channelAfterTouch\"]=wasmExports[\"G\"])(a0,a1,a2);var _adl_panic=Module[\"_adl_panic\"]=a0=>(_adl_panic=Module[\"_adl_panic\"]=wasmExports[\"H\"])(a0);var _adl_rt_resetState=Module[\"_adl_rt_resetState\"]=a0=>(_adl_rt_resetState=Module[\"_adl_rt_resetState\"]=wasmExports[\"I\"])(a0);var _tp_note_on=Module[\"_tp_note_on\"]=(a0,a1,a2)=>(_tp_note_on=Module[\"_tp_note_on\"]=wasmExports[\"J\"])(a0,a1,a2);var _tp_note_off=Module[\"_tp_note_off\"]=(a0,a1)=>(_tp_note_off=Module[\"_tp_note_off\"]=wasmExports[\"K\"])(a0,a1);var _tp_program_change=Module[\"_tp_program_change\"]=(a0,a1)=>(_tp_program_change=Module[\"_tp_program_change\"]=wasmExports[\"L\"])(a0,a1);var _tp_pitch_bend=Module[\"_tp_pitch_bend\"]=(a0,a1)=>(_tp_pitch_bend=Module[\"_tp_pitch_bend\"]=wasmExports[\"M\"])(a0,a1);var _tp_control_change=Module[\"_tp_control_change\"]=(a0,a1,a2)=>(_tp_control_change=Module[\"_tp_control_change\"]=wasmExports[\"N\"])(a0,a1,a2);var _tp_channel_pressure=Module[\"_tp_channel_pressure\"]=(a0,a1)=>(_tp_channel_pressure=Module[\"_tp_channel_pressure\"]=wasmExports[\"O\"])(a0,a1);var _tp_render=Module[\"_tp_render\"]=(a0,a1)=>(_tp_render=Module[\"_tp_render\"]=wasmExports[\"P\"])(a0,a1);var _tp_panic=Module[\"_tp_panic\"]=()=>(_tp_panic=Module[\"_tp_panic\"]=wasmExports[\"Q\"])();var _tp_panic_channel=Module[\"_tp_panic_channel\"]=a0=>(_tp_panic_channel=Module[\"_tp_panic_channel\"]=wasmExports[\"R\"])(a0);var _tp_reset=Module[\"_tp_reset\"]=()=>(_tp_reset=Module[\"_tp_reset\"]=wasmExports[\"S\"])();var _tp_init=Module[\"_tp_init\"]=a0=>(_tp_init=Module[\"_tp_init\"]=wasmExports[\"T\"])(a0);var _new_fluid_settings=Module[\"_new_fluid_settings\"]=()=>(_new_fluid_settings=Module[\"_new_fluid_settings\"]=wasmExports[\"U\"])();var _fluid_settings_setstr=Module[\"_fluid_settings_setstr\"]=(a0,a1,a2)=>(_fluid_settings_setstr=Module[\"_fluid_settings_setstr\"]=wasmExports[\"V\"])(a0,a1,a2);var _fluid_settings_setint=Module[\"_fluid_settings_setint\"]=(a0,a1,a2)=>(_fluid_settings_setint=Module[\"_fluid_settings_setint\"]=wasmExports[\"W\"])(a0,a1,a2);var _fluid_settings_setnum=Module[\"_fluid_settings_setnum\"]=(a0,a1,a2)=>(_fluid_settings_setnum=Module[\"_fluid_settings_setnum\"]=wasmExports[\"X\"])(a0,a1,a2);var _new_fluid_synth=Module[\"_new_fluid_synth\"]=a0=>(_new_fluid_synth=Module[\"_new_fluid_synth\"]=wasmExports[\"Y\"])(a0);var _fluid_synth_set_interp_method=Module[\"_fluid_synth_set_interp_method\"]=(a0,a1,a2)=>(_fluid_synth_set_interp_method=Module[\"_fluid_synth_set_interp_method\"]=wasmExports[\"Z\"])(a0,a1,a2);var _adl_init=Module[\"_adl_init\"]=a0=>(_adl_init=Module[\"_adl_init\"]=wasmExports[\"_\"])(a0);var _adl_setSoftPanEnabled=Module[\"_adl_setSoftPanEnabled\"]=(a0,a1)=>(_adl_setSoftPanEnabled=Module[\"_adl_setSoftPanEnabled\"]=wasmExports[\"$\"])(a0,a1);var _adl_setNumChips=Module[\"_adl_setNumChips\"]=(a0,a1)=>(_adl_setNumChips=Module[\"_adl_setNumChips\"]=wasmExports[\"aa\"])(a0,a1);var _tp_unload_soundfont=Module[\"_tp_unload_soundfont\"]=()=>(_tp_unload_soundfont=Module[\"_tp_unload_soundfont\"]=wasmExports[\"ba\"])();var _tp_load_soundfont=Module[\"_tp_load_soundfont\"]=a0=>(_tp_load_soundfont=Module[\"_tp_load_soundfont\"]=wasmExports[\"ca\"])(a0);var _fluid_synth_sfload=Module[\"_fluid_synth_sfload\"]=(a0,a1,a2)=>(_fluid_synth_sfload=Module[\"_fluid_synth_sfload\"]=wasmExports[\"da\"])(a0,a1,a2);var _tp_add_soundfont=Module[\"_tp_add_soundfont\"]=a0=>(_tp_add_soundfont=Module[\"_tp_add_soundfont\"]=wasmExports[\"ea\"])(a0);var _tp_set_reverb=Module[\"_tp_set_reverb\"]=a0=>(_tp_set_reverb=Module[\"_tp_set_reverb\"]=wasmExports[\"fa\"])(a0);var _fluid_synth_set_reverb_on=Module[\"_fluid_synth_set_reverb_on\"]=(a0,a1)=>(_fluid_synth_set_reverb_on=Module[\"_fluid_synth_set_reverb_on\"]=wasmExports[\"ga\"])(a0,a1);var _fluid_synth_set_reverb=Module[\"_fluid_synth_set_reverb\"]=(a0,a1,a2,a3,a4)=>(_fluid_synth_set_reverb=Module[\"_fluid_synth_set_reverb\"]=wasmExports[\"ha\"])(a0,a1,a2,a3,a4);var _tp_get_polyphony=Module[\"_tp_get_polyphony\"]=()=>(_tp_get_polyphony=Module[\"_tp_get_polyphony\"]=wasmExports[\"ia\"])();var _fluid_synth_get_polyphony=Module[\"_fluid_synth_get_polyphony\"]=a0=>(_fluid_synth_get_polyphony=Module[\"_fluid_synth_get_polyphony\"]=wasmExports[\"ja\"])(a0);var _tp_set_polyphony=Module[\"_tp_set_polyphony\"]=a0=>(_tp_set_polyphony=Module[\"_tp_set_polyphony\"]=wasmExports[\"ka\"])(a0);var _fluid_synth_set_polyphony=Module[\"_fluid_synth_set_polyphony\"]=(a0,a1)=>(_fluid_synth_set_polyphony=Module[\"_fluid_synth_set_polyphony\"]=wasmExports[\"la\"])(a0,a1);var _tp_get_channel_in_use=Module[\"_tp_get_channel_in_use\"]=a0=>(_tp_get_channel_in_use=Module[\"_tp_get_channel_in_use\"]=wasmExports[\"ma\"])(a0);var _tp_get_channel_program=Module[\"_tp_get_channel_program\"]=a0=>(_tp_get_channel_program=Module[\"_tp_get_channel_program\"]=wasmExports[\"na\"])(a0);var _tp_set_channel_mute=Module[\"_tp_set_channel_mute\"]=(a0,a1)=>(_tp_set_channel_mute=Module[\"_tp_set_channel_mute\"]=wasmExports[\"oa\"])(a0,a1);var _tp_set_bank=Module[\"_tp_set_bank\"]=a0=>(_tp_set_bank=Module[\"_tp_set_bank\"]=wasmExports[\"pa\"])(a0);var _adl_setBank=Module[\"_adl_setBank\"]=(a0,a1)=>(_adl_setBank=Module[\"_adl_setBank\"]=wasmExports[\"qa\"])(a0,a1);var _tp_set_synth_engine=Module[\"_tp_set_synth_engine\"]=a0=>(_tp_set_synth_engine=Module[\"_tp_set_synth_engine\"]=wasmExports[\"ra\"])(a0);var _tp_set_ch10_melodic=Module[\"_tp_set_ch10_melodic\"]=a0=>(_tp_set_ch10_melodic=Module[\"_tp_set_ch10_melodic\"]=wasmExports[\"sa\"])(a0);var _fluid_synth_bank_select=Module[\"_fluid_synth_bank_select\"]=(a0,a1,a2)=>(_fluid_synth_bank_select=Module[\"_fluid_synth_bank_select\"]=wasmExports[\"ta\"])(a0,a1,a2);var _tp_get_fluid_synth=Module[\"_tp_get_fluid_synth\"]=()=>(_tp_get_fluid_synth=Module[\"_tp_get_fluid_synth\"]=wasmExports[\"ua\"])();var _malloc=Module[\"_malloc\"]=a0=>(_malloc=Module[\"_malloc\"]=wasmExports[\"va\"])(a0);var _gme_open_data=Module[\"_gme_open_data\"]=(a0,a1,a2,a3)=>(_gme_open_data=Module[\"_gme_open_data\"]=wasmExports[\"wa\"])(a0,a1,a2,a3);var _gme_delete=Module[\"_gme_delete\"]=a0=>(_gme_delete=Module[\"_gme_delete\"]=wasmExports[\"xa\"])(a0);var _gme_track_count=Module[\"_gme_track_count\"]=a0=>(_gme_track_count=Module[\"_gme_track_count\"]=wasmExports[\"ya\"])(a0);var _gme_track_info=Module[\"_gme_track_info\"]=(a0,a1,a2)=>(_gme_track_info=Module[\"_gme_track_info\"]=wasmExports[\"za\"])(a0,a1,a2);var _gme_start_track=Module[\"_gme_start_track\"]=(a0,a1)=>(_gme_start_track=Module[\"_gme_start_track\"]=wasmExports[\"Aa\"])(a0,a1);var _gme_play=Module[\"_gme_play\"]=(a0,a1,a2)=>(_gme_play=Module[\"_gme_play\"]=wasmExports[\"Ba\"])(a0,a1,a2);var _gme_set_fade=Module[\"_gme_set_fade\"]=(a0,a1,a2)=>(_gme_set_fade=Module[\"_gme_set_fade\"]=wasmExports[\"Ca\"])(a0,a1,a2);var _gme_track_ended=Module[\"_gme_track_ended\"]=a0=>(_gme_track_ended=Module[\"_gme_track_ended\"]=wasmExports[\"Da\"])(a0);var _gme_tell_scaled=Module[\"_gme_tell_scaled\"]=a0=>(_gme_tell_scaled=Module[\"_gme_tell_scaled\"]=wasmExports[\"Ea\"])(a0);var _gme_seek_scaled=Module[\"_gme_seek_scaled\"]=(a0,a1)=>(_gme_seek_scaled=Module[\"_gme_seek_scaled\"]=wasmExports[\"Fa\"])(a0,a1);var _gme_voice_count=Module[\"_gme_voice_count\"]=a0=>(_gme_voice_count=Module[\"_gme_voice_count\"]=wasmExports[\"Ga\"])(a0);var _gme_ignore_silence=Module[\"_gme_ignore_silence\"]=(a0,a1)=>(_gme_ignore_silence=Module[\"_gme_ignore_silence\"]=wasmExports[\"Ha\"])(a0,a1);var _gme_set_tempo=Module[\"_gme_set_tempo\"]=(a0,a1)=>(_gme_set_tempo=Module[\"_gme_set_tempo\"]=wasmExports[\"Ia\"])(a0,a1);var _gme_mute_voices=Module[\"_gme_mute_voices\"]=(a0,a1)=>(_gme_mute_voices=Module[\"_gme_mute_voices\"]=wasmExports[\"Ja\"])(a0,a1);var _gme_voice_name=Module[\"_gme_voice_name\"]=(a0,a1)=>(_gme_voice_name=Module[\"_gme_voice_name\"]=wasmExports[\"Ka\"])(a0,a1);var _gme_get_chip_state=Module[\"_gme_get_chip_state\"]=a0=>(_gme_get_chip_state=Module[\"_gme_get_chip_state\"]=wasmExports[\"La\"])(a0);var _xmp_start_player=Module[\"_xmp_start_player\"]=(a0,a1,a2)=>(_xmp_start_player=Module[\"_xmp_start_player\"]=wasmExports[\"Ma\"])(a0,a1,a2);var _xmp_end_player=Module[\"_xmp_end_player\"]=a0=>(_xmp_end_player=Module[\"_xmp_end_player\"]=wasmExports[\"Na\"])(a0);var _xmp_play_buffer=Module[\"_xmp_play_buffer\"]=(a0,a1,a2,a3)=>(_xmp_play_buffer=Module[\"_xmp_play_buffer\"]=wasmExports[\"Oa\"])(a0,a1,a2,a3);var _xmp_get_frame_info=Module[\"_xmp_get_frame_info\"]=(a0,a1)=>(_xmp_get_frame_info=Module[\"_xmp_get_frame_info\"]=wasmExports[\"Pa\"])(a0,a1);var _xmp_get_module_info=Module[\"_xmp_get_module_info\"]=(a0,a1)=>(_xmp_get_module_info=Module[\"_xmp_get_module_info\"]=wasmExports[\"Qa\"])(a0,a1);var _xmp_create_context=Module[\"_xmp_create_context\"]=()=>(_xmp_create_context=Module[\"_xmp_create_context\"]=wasmExports[\"Ra\"])();var _xmp_stop_module=Module[\"_xmp_stop_module\"]=a0=>(_xmp_stop_module=Module[\"_xmp_stop_module\"]=wasmExports[\"Sa\"])(a0);var _xmp_restart_module=Module[\"_xmp_restart_module\"]=a0=>(_xmp_restart_module=Module[\"_xmp_restart_module\"]=wasmExports[\"Ta\"])(a0);var _xmp_seek_time=Module[\"_xmp_seek_time\"]=(a0,a1)=>(_xmp_seek_time=Module[\"_xmp_seek_time\"]=wasmExports[\"Ua\"])(a0,a1);var _xmp_channel_mute=Module[\"_xmp_channel_mute\"]=(a0,a1,a2)=>(_xmp_channel_mute=Module[\"_xmp_channel_mute\"]=wasmExports[\"Va\"])(a0,a1,a2);var _xmp_get_player=Module[\"_xmp_get_player\"]=(a0,a1)=>(_xmp_get_player=Module[\"_xmp_get_player\"]=wasmExports[\"Wa\"])(a0,a1);var _xmp_get_format_list=Module[\"_xmp_get_format_list\"]=()=>(_xmp_get_format_list=Module[\"_xmp_get_format_list\"]=wasmExports[\"Xa\"])();var _xmp_inject_event=Module[\"_xmp_inject_event\"]=(a0,a1,a2)=>(_xmp_inject_event=Module[\"_xmp_inject_event\"]=wasmExports[\"Ya\"])(a0,a1,a2);var _xmp_load_module_from_memory=Module[\"_xmp_load_module_from_memory\"]=(a0,a1,a2)=>(_xmp_load_module_from_memory=Module[\"_xmp_load_module_from_memory\"]=wasmExports[\"Za\"])(a0,a1,a2);var _lvgm_init=Module[\"_lvgm_init\"]=a0=>(_lvgm_init=Module[\"_lvgm_init\"]=wasmExports[\"_a\"])(a0);var _lvgm_load_data=Module[\"_lvgm_load_data\"]=(a0,a1,a2)=>(_lvgm_load_data=Module[\"_lvgm_load_data\"]=wasmExports[\"$a\"])(a0,a1,a2);var _lvgm_get_position_ms=Module[\"_lvgm_get_position_ms\"]=a0=>(_lvgm_get_position_ms=Module[\"_lvgm_get_position_ms\"]=wasmExports[\"ab\"])(a0);var _lvgm_get_duration_ms=Module[\"_lvgm_get_duration_ms\"]=a0=>(_lvgm_get_duration_ms=Module[\"_lvgm_get_duration_ms\"]=wasmExports[\"bb\"])(a0);var _lvgm_start=Module[\"_lvgm_start\"]=a0=>(_lvgm_start=Module[\"_lvgm_start\"]=wasmExports[\"cb\"])(a0);var _lvgm_render=Module[\"_lvgm_render\"]=(a0,a1,a2)=>(_lvgm_render=Module[\"_lvgm_render\"]=wasmExports[\"db\"])(a0,a1,a2);var _lvgm_stop=Module[\"_lvgm_stop\"]=a0=>(_lvgm_stop=Module[\"_lvgm_stop\"]=wasmExports[\"eb\"])(a0);var _lvgm_reset=Module[\"_lvgm_reset\"]=a0=>(_lvgm_reset=Module[\"_lvgm_reset\"]=wasmExports[\"fb\"])(a0);var _lvgm_set_playback_speed=Module[\"_lvgm_set_playback_speed\"]=(a0,a1)=>(_lvgm_set_playback_speed=Module[\"_lvgm_set_playback_speed\"]=wasmExports[\"gb\"])(a0,a1);var _lvgm_get_playback_speed=Module[\"_lvgm_get_playback_speed\"]=a0=>(_lvgm_get_playback_speed=Module[\"_lvgm_get_playback_speed\"]=wasmExports[\"hb\"])(a0);var _lvgm_seek_ms=Module[\"_lvgm_seek_ms\"]=(a0,a1)=>(_lvgm_seek_ms=Module[\"_lvgm_seek_ms\"]=wasmExports[\"ib\"])(a0,a1);var _lvgm_get_metadata=Module[\"_lvgm_get_metadata\"]=a0=>(_lvgm_get_metadata=Module[\"_lvgm_get_metadata\"]=wasmExports[\"jb\"])(a0);var _lvgm_get_voice_count=Module[\"_lvgm_get_voice_count\"]=a0=>(_lvgm_get_voice_count=Module[\"_lvgm_get_voice_count\"]=wasmExports[\"kb\"])(a0);var _lvgm_get_voice_name=Module[\"_lvgm_get_voice_name\"]=(a0,a1)=>(_lvgm_get_voice_name=Module[\"_lvgm_get_voice_name\"]=wasmExports[\"lb\"])(a0,a1);var _lvgm_get_chip_state=Module[\"_lvgm_get_chip_state\"]=a0=>(_lvgm_get_chip_state=Module[\"_lvgm_get_chip_state\"]=wasmExports[\"mb\"])(a0);var _lvgm_set_voice_mask=Module[\"_lvgm_set_voice_mask\"]=(a0,a1)=>(_lvgm_set_voice_mask=Module[\"_lvgm_set_voice_mask\"]=wasmExports[\"nb\"])(a0,a1);var _lvgm_get_voice_mask=Module[\"_lvgm_get_voice_mask\"]=a0=>(_lvgm_get_voice_mask=Module[\"_lvgm_get_voice_mask\"]=wasmExports[\"ob\"])(a0);var _fluid_synth_all_sounds_off=Module[\"_fluid_synth_all_sounds_off\"]=(a0,a1)=>(_fluid_synth_all_sounds_off=Module[\"_fluid_synth_all_sounds_off\"]=wasmExports[\"qb\"])(a0,a1);var _fluid_synth_set_chorus=Module[\"_fluid_synth_set_chorus\"]=(a0,a1,a2,a3,a4,a5)=>(_fluid_synth_set_chorus=Module[\"_fluid_synth_set_chorus\"]=wasmExports[\"rb\"])(a0,a1,a2,a3,a4,a5);var _fluid_synth_set_chorus_on=Module[\"_fluid_synth_set_chorus_on\"]=(a0,a1)=>(_fluid_synth_set_chorus_on=Module[\"_fluid_synth_set_chorus_on\"]=wasmExports[\"sb\"])(a0,a1);var _adl_getNumChips=Module[\"_adl_getNumChips\"]=a0=>(_adl_getNumChips=Module[\"_adl_getNumChips\"]=wasmExports[\"tb\"])(a0);var _adl_getBanksCount=Module[\"_adl_getBanksCount\"]=()=>(_adl_getBanksCount=Module[\"_adl_getBanksCount\"]=wasmExports[\"ub\"])();var _adl_getBankNames=Module[\"_adl_getBankNames\"]=()=>(_adl_getBankNames=Module[\"_adl_getBankNames\"]=wasmExports[\"vb\"])();var _adl_generate=Module[\"_adl_generate\"]=(a0,a1,a2)=>(_adl_generate=Module[\"_adl_generate\"]=wasmExports[\"wb\"])(a0,a1,a2);var _v2m_open=Module[\"_v2m_open\"]=(a0,a1,a2)=>(_v2m_open=Module[\"_v2m_open\"]=wasmExports[\"xb\"])(a0,a1,a2);var _v2m_write_audio=Module[\"_v2m_write_audio\"]=(a0,a1)=>(_v2m_write_audio=Module[\"_v2m_write_audio\"]=wasmExports[\"yb\"])(a0,a1);var _v2m_get_position_ms=Module[\"_v2m_get_position_ms\"]=()=>(_v2m_get_position_ms=Module[\"_v2m_get_position_ms\"]=wasmExports[\"zb\"])();var _v2m_get_duration_ms=Module[\"_v2m_get_duration_ms\"]=()=>(_v2m_get_duration_ms=Module[\"_v2m_get_duration_ms\"]=wasmExports[\"Ab\"])();var _v2m_seek_ms=Module[\"_v2m_seek_ms\"]=a0=>(_v2m_seek_ms=Module[\"_v2m_seek_ms\"]=wasmExports[\"Bb\"])(a0);var _v2m_set_speed=Module[\"_v2m_set_speed\"]=a0=>(_v2m_set_speed=Module[\"_v2m_set_speed\"]=wasmExports[\"Cb\"])(a0);var _v2m_close=Module[\"_v2m_close\"]=()=>(_v2m_close=Module[\"_v2m_close\"]=wasmExports[\"Db\"])();var ___errno_location=()=>(___errno_location=wasmExports[\"Eb\"])();var _n64_load_file=Module[\"_n64_load_file\"]=(a0,a1,a2,a3)=>(_n64_load_file=Module[\"_n64_load_file\"]=wasmExports[\"Fb\"])(a0,a1,a2,a3);var _n64_get_duration_ms=Module[\"_n64_get_duration_ms\"]=()=>(_n64_get_duration_ms=Module[\"_n64_get_duration_ms\"]=wasmExports[\"Gb\"])();var _n64_get_position_ms=Module[\"_n64_get_position_ms\"]=()=>(_n64_get_position_ms=Module[\"_n64_get_position_ms\"]=wasmExports[\"Hb\"])();var _n64_render_audio=Module[\"_n64_render_audio\"]=(a0,a1)=>(_n64_render_audio=Module[\"_n64_render_audio\"]=wasmExports[\"Ib\"])(a0,a1);var _n64_seek_ms=Module[\"_n64_seek_ms\"]=a0=>(_n64_seek_ms=Module[\"_n64_seek_ms\"]=wasmExports[\"Jb\"])(a0);var _n64_shutdown=Module[\"_n64_shutdown\"]=()=>(_n64_shutdown=Module[\"_n64_shutdown\"]=wasmExports[\"Kb\"])();var _mdx_open=Module[\"_mdx_open\"]=(a0,a1,a2)=>(_mdx_open=Module[\"_mdx_open\"]=wasmExports[\"Lb\"])(a0,a1,a2);var _mdx_set_dir=Module[\"_mdx_set_dir\"]=(a0,a1)=>(_mdx_set_dir=Module[\"_mdx_set_dir\"]=wasmExports[\"Mb\"])(a0,a1);var _mdx_set_rate=Module[\"_mdx_set_rate\"]=a0=>(_mdx_set_rate=Module[\"_mdx_set_rate\"]=wasmExports[\"Nb\"])(a0);var _mdx_set_max_loop=Module[\"_mdx_set_max_loop\"]=(a0,a1)=>(_mdx_set_max_loop=Module[\"_mdx_set_max_loop\"]=wasmExports[\"Ob\"])(a0,a1);var _mdx_next_frame=Module[\"_mdx_next_frame\"]=a0=>(_mdx_next_frame=Module[\"_mdx_next_frame\"]=wasmExports[\"Pb\"])(a0);var _mdx_frame_length=Module[\"_mdx_frame_length\"]=a0=>(_mdx_frame_length=Module[\"_mdx_frame_length\"]=wasmExports[\"Qb\"])(a0);var _mdx_calc_sample=Module[\"_mdx_calc_sample\"]=(a0,a1,a2)=>(_mdx_calc_sample=Module[\"_mdx_calc_sample\"]=wasmExports[\"Rb\"])(a0,a1,a2);var _mdx_calc_log=Module[\"_mdx_calc_log\"]=(a0,a1,a2)=>(_mdx_calc_log=Module[\"_mdx_calc_log\"]=wasmExports[\"Sb\"])(a0,a1,a2);var _mdx_get_title=Module[\"_mdx_get_title\"]=(a0,a1)=>(_mdx_get_title=Module[\"_mdx_get_title\"]=wasmExports[\"Tb\"])(a0,a1);var _mdx_get_length=Module[\"_mdx_get_length\"]=a0=>(_mdx_get_length=Module[\"_mdx_get_length\"]=wasmExports[\"Ub\"])(a0);var _mdx_get_tracks=Module[\"_mdx_get_tracks\"]=a0=>(_mdx_get_tracks=Module[\"_mdx_get_tracks\"]=wasmExports[\"Vb\"])(a0);var _mdx_get_current_notes=Module[\"_mdx_get_current_notes\"]=(a0,a1,a2)=>(_mdx_get_current_notes=Module[\"_mdx_get_current_notes\"]=wasmExports[\"Wb\"])(a0,a1,a2);var _mdx_close=Module[\"_mdx_close\"]=a0=>(_mdx_close=Module[\"_mdx_close\"]=wasmExports[\"Xb\"])(a0);var _mdx_create_context=Module[\"_mdx_create_context\"]=()=>(_mdx_create_context=Module[\"_mdx_create_context\"]=wasmExports[\"Yb\"])();var _mdx_get_position_ms=Module[\"_mdx_get_position_ms\"]=a0=>(_mdx_get_position_ms=Module[\"_mdx_get_position_ms\"]=wasmExports[\"Zb\"])(a0);var _mdx_set_speed=Module[\"_mdx_set_speed\"]=(a0,a1)=>(_mdx_set_speed=Module[\"_mdx_set_speed\"]=wasmExports[\"_b\"])(a0,a1);var _mdx_set_position_ms=Module[\"_mdx_set_position_ms\"]=(a0,a1)=>(_mdx_set_position_ms=Module[\"_mdx_set_position_ms\"]=wasmExports[\"$b\"])(a0,a1);var _mdx_get_pdx_filename=Module[\"_mdx_get_pdx_filename\"]=(a0,a1)=>(_mdx_get_pdx_filename=Module[\"_mdx_get_pdx_filename\"]=wasmExports[\"ac\"])(a0,a1);var _mdx_get_track_name=Module[\"_mdx_get_track_name\"]=(a0,a1)=>(_mdx_get_track_name=Module[\"_mdx_get_track_name\"]=wasmExports[\"bc\"])(a0,a1);var _mdx_get_track_mask=Module[\"_mdx_get_track_mask\"]=a0=>(_mdx_get_track_mask=Module[\"_mdx_get_track_mask\"]=wasmExports[\"cc\"])(a0);var _mdx_set_track_mask=Module[\"_mdx_set_track_mask\"]=(a0,a1)=>(_mdx_set_track_mask=Module[\"_mdx_set_track_mask\"]=wasmExports[\"dc\"])(a0,a1);var _emscripten_builtin_memalign=(a0,a1)=>(_emscripten_builtin_memalign=wasmExports[\"ec\"])(a0,a1);var stackSave=()=>(stackSave=wasmExports[\"fc\"])();var stackRestore=a0=>(stackRestore=wasmExports[\"gc\"])(a0);var stackAlloc=a0=>(stackAlloc=wasmExports[\"hc\"])(a0);var ___cxa_increment_exception_refcount=a0=>(___cxa_increment_exception_refcount=wasmExports[\"__cxa_increment_exception_refcount\"])(a0);var ___cxa_is_pointer_type=a0=>(___cxa_is_pointer_type=wasmExports[\"ic\"])(a0);var _xmp_version=Module[\"_xmp_version\"]=510632;var _xmp_vercode=Module[\"_xmp_vercode\"]=87556;Module[\"ccall\"]=ccall;Module[\"setValue\"]=setValue;Module[\"getValue\"]=getValue;Module[\"UTF8ToString\"]=UTF8ToString;Module[\"FS\"]=FS;Module[\"ALLOC_NORMAL\"]=ALLOC_NORMAL;var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();\n\n\n  return moduleArg.ready\n}\n\n);\n})();\nexport default CHIP_CORE;\n","export default {\n  apiKey: \"AIzaSyCgIxMCZDERKhgnKyr5FIEJVrKlYNbIA4k\",\n  authDomain: \"rawlrocks.firebaseapp.com\",\n  projectId: \"rawlrocks\",\n  storageBucket: \"rawlrocks.appspot.com\",\n  messagingSenderId: \"1068304431235\",\n  appId: \"1:1068304431235:web:7547aa7d9116376ccc03b6\",\n  measurementId: \"G-RMF5LJLXDG\",\n};\n","import { doc, getDoc, getFirestore } from \"firebase/firestore/lite\";\nimport { FirestoreMidiDocument, FirestoreMidiIndex } from \"../components/App\";\nimport keySlugMapping from \"../keySlugMapping\";\n\ntype HandleSongClickDependencies = {\n  setState: (state: any, callback?: () => void) => void;\n  loadMidi: (midiBlob: Blob, callback?: () => void) => void;\n  state: {\n    analyses: any;\n  };\n};\n\nexport const handleSongClick = async (\n  deps: HandleSongClickDependencies,\n  slug: string,\n  isHiddenRoute: boolean = false,\n): Promise<void> => {\n  const firestore = getFirestore();\n  try {\n    console.log(\"Fetching index document\");\n    const indexDoc = await getDoc(doc(firestore, \"indexes\", \"midis\"));\n    const indexData = indexDoc.data() as FirestoreMidiIndex;\n    console.log(\"Index document data:\", indexData);\n\n    if (!indexData) {\n      console.error(\"Index document not found\");\n      return;\n    }\n\n    let analysisKey;\n    let fSlug = slug;\n    if (isHiddenRoute) {\n      fSlug = keySlugMapping[slug] || slug;\n      analysisKey = `f/${fSlug}`;\n    } else {\n      analysisKey = `f/${slug}`;\n    }\n\n    console.log(\"Searching for MIDI info with slug:\", slug);\n    let midiInfo = indexData.midis.find(\n      (midi) => midi.slug === slug || midi.id === slug,\n    );\n    console.log(\"Found MIDI info:\", midiInfo);\n\n    if (!midiInfo) {\n      console.error(`No MIDI found for slug: ${slug}`);\n      return;\n    }\n\n    console.log(\"Fetching MIDI document with ID:\", midiInfo.id);\n    const midiDoc = await getDoc(doc(firestore, \"midis\", midiInfo.id));\n    if (midiDoc.exists()) {\n      const midiData = midiDoc.data() as FirestoreMidiDocument;\n      console.log(\"MIDI document data:\", midiData);\n\n      // Convert Firestore Bytes to Blob\n      const midiBlob = new Blob([midiData.blob.toUint8Array()], {\n        type: \"audio/midi\",\n      });\n      console.log(\"Created MIDI Blob:\", midiBlob);\n\n      const currentMidi = {\n        id: midiInfo.id,\n        title: midiData.title,\n        slug: fSlug,\n        sourceUrl: midiData.url,\n        isHiddenRoute: isHiddenRoute,\n      };\n      const savedAnalysis = deps.state.analyses[analysisKey];\n\n      return new Promise<void>((resolve) => {\n        deps.setState(\n          {\n            currentMidi,\n            rawlProps: {\n              savedAnalysis,\n              isHiddenRoute,\n            },\n          },\n          () => {\n            console.log(\"State updated with currentMidi:\", currentMidi);\n            console.log(\"State updated with rawlProps\");\n            // Create a promise that resolves when playback starts\n            const playbackPromise = new Promise<void>((playbackResolve) => {\n              deps.loadMidi(midiBlob, playbackResolve);\n            });\n            // Wait for playback to start before resolving the main promise\n            playbackPromise.then(() => {\n              resolve();\n            });\n          },\n        );\n      });\n    } else {\n      console.error(\"No such document!\");\n    }\n  } catch (error) {\n    console.error(\"Error loading MIDI:\", error);\n    throw error; // Re-throw to trigger the finally block in the click handler\n  }\n};\n","import MIDIEvents, { EVENT_MIDI, EVENT_MIDI_CONTROLLER } from \"midievents\";\nimport MIDIFile from \"midifile\";\n\nconst CC_102_TRACK_LOOP_START = 102;\nconst CC_103_TRACK_LOOP_END = 103;\nconst CC_123_ALL_NOTES_OFF = 123;\n\nclass EventIterator {\n  constructor(events) {\n    this.events = events;\n    this.curEvent = events[0];\n    this.pos = 0;\n    this.loopStartPos = null;\n    this.elapsedLoops = 0;\n    this.curTick = 0;\n  }\n\n  loop() {\n    // Sanity check\n    if (this.curTick < 1000000 && this.elapsedLoops < 1000) {\n      this.pos = this.loopStartPos;\n      console.debug(\n        \"Channel %d looped at tick %d (loop %d completed)\",\n        this.curEvent.channel,\n        this.curTick,\n        this.elapsedLoops,\n      );\n      this.elapsedLoops++;\n    }\n  }\n\n  next() {\n    const event = this.events[this.pos++];\n    if (!event) return null;\n\n    this.curTick += event.delta;\n\n    if (event.type === EVENT_MIDI && event.subtype === EVENT_MIDI_CONTROLLER) {\n      if (event.param1 === CC_102_TRACK_LOOP_START) {\n        // console.log('loop start ch %d id %d', event.channel, event.param2);\n        this.loopStartPos = this.pos;\n      }\n      if (event.param1 === CC_103_TRACK_LOOP_END) {\n        // console.log('loop end  ch %d id %d', event.channel, event.param2);\n        this.loop();\n      }\n    }\n\n    // Return a copy because track consolidation will mutate the events.\n    return { ...event };\n  }\n}\n\n// Monkey patch MIDIFile class.\nMIDIFile.prototype.getLoopedEvents = function (tracks, loopCount = 1) {\n  let event;\n  let playTime = 0;\n  const combinedEvents = [];\n  const format = this.header.getFormat();\n  let tickResolution = this.header.getTickResolution();\n  let i;\n  let j;\n  let smallestDelta;\n  let loopCountReached = false;\n  const type = null;\n  const subtype = null;\n\n  // Reading events\n  // if the read is sequential\n  if (1 !== format || 1 === this.tracks.length) {\n    for (i = 0, j = this.tracks.length; i < j; i++) {\n      // reset playtime if format is 2\n      playTime = 2 === format && playTime ? playTime : 0;\n      const eventIterator = new EventIterator(tracks[i]);\n      // loooping through events\n      event = eventIterator.next();\n      while (event) {\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n        }\n        // push the asked events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          combinedEvents.push(event);\n        }\n        event = eventIterator.next();\n      }\n    }\n    // the read is concurrent\n  } else {\n    smallestDelta = -1;\n\n    const trackIterators = [];\n\n    // Creating iterators\n    for (i = 0, j = tracks.length; i < j; i++) {\n      printTrack(i, tracks[i]);\n      trackIterators[i] = new EventIterator(tracks[i]);\n      trackIterators[i].curEvent = trackIterators[i].next();\n    }\n    // Filling events\n    do {\n      smallestDelta = -1;\n      // Find the shortest event\n      for (i = 0, j = trackIterators.length; i < j; i++) {\n        if (trackIterators[i].curEvent) {\n          if (\n            -1 === smallestDelta ||\n            trackIterators[i].curEvent.delta <\n              trackIterators[smallestDelta].curEvent.delta\n          ) {\n            smallestDelta = i;\n          } else if (\n            // Prioritize tracks that haven't caught up with the loop count\n            trackIterators[i].curEvent.delta ===\n              trackIterators[smallestDelta].curEvent.delta &&\n            trackIterators[i].elapsedLoops <\n              trackIterators[smallestDelta].elapsedLoops\n          ) {\n            smallestDelta = i;\n          }\n        }\n      }\n      if (-1 !== smallestDelta) {\n        // Subtract delta of previous events\n        for (i = 0, j = trackIterators.length; i < j; i++) {\n          if (i !== smallestDelta && trackIterators[i].curEvent) {\n            trackIterators[i].curEvent.delta -=\n              trackIterators[smallestDelta].curEvent.delta;\n          }\n        }\n        // filling values\n        event = trackIterators[smallestDelta].curEvent;\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n        }\n        // push midi events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          event.track = smallestDelta;\n          combinedEvents.push(event);\n        }\n        // get next event\n        trackIterators[smallestDelta].curEvent =\n          trackIterators[smallestDelta].next();\n\n        // check elapsed loops\n        loopCountReached = trackIterators.every(\n          (it) => it.curEvent == null || it.elapsedLoops >= loopCount,\n        );\n      }\n    } while (-1 !== smallestDelta && loopCountReached === false);\n\n    for (let i = 0; i < trackIterators.length; i++) {\n      if (trackIterators[i]?.curEvent) {\n        combinedEvents.push(\n          allNotesOff(i, trackIterators[i].curEvent.channel, playTime),\n        );\n      }\n    }\n  }\n  console.debug(combinedEvents);\n  return combinedEvents;\n};\n\n// Monkey patch MIDIFile class - for Chiptheory.\n// Probably there's no value in doing this filtering here - all these\n// events are available in noteParsers/midi.ts anyways\nMIDIFile.prototype.getTimeEvents = function (tracks) {\n  let event;\n  let playTime = 0;\n  const combinedEvents = [];\n  const format = this.header.getFormat();\n  let tickResolution = this.header.getTickResolution();\n  let i;\n  let j;\n  let smallestDelta;\n  // let loopCountReached = false;\n  const type = null;\n  const subtype = null;\n  const timeEvents = [];\n  let maxPlayTime = 0;\n  let tick = 0;\n\n  // Reading events\n  // if the read is sequential\n  console.log(\"MIDI format\", format);\n  if (1 !== format || 1 === this.tracks.length) {\n    for (i = 0, j = this.tracks.length; i < j; i++) {\n      // reset playtime if format is 2\n      playTime = 2 === format && playTime ? playTime : 0;\n      const eventIterator = new EventIterator(tracks[i]);\n      // loooping through events\n      event = eventIterator.next();\n      while (event) {\n        tick += event.delta ?? 0;\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            timeEvents.push({\n              type: \"bpm\",\n              bpm: event.tempoBPM,\n              playTime,\n              tick,\n            });\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n          if (event.subtype === MIDIEvents.EVENT_META_TIME_SIGNATURE) {\n            timeEvents.push({\n              type: \"timeSignature\",\n              numerator: event.param1,\n              denominatorPower: event.param2,\n              playTime,\n              tick,\n            });\n          }\n        }\n        // push the asked events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          event.tick = tick;\n          combinedEvents.push(event);\n        }\n        event = eventIterator.next();\n      }\n    }\n    // the read is concurrent\n  } else {\n    smallestDelta = -1;\n\n    const trackIterators = [];\n\n    // Creating iterators\n    for (i = 0, j = tracks.length; i < j; i++) {\n      printTrack(i, tracks[i]);\n      trackIterators[i] = new EventIterator(tracks[i]);\n      trackIterators[i].curEvent = trackIterators[i].next();\n    }\n    // Filling events\n    do {\n      smallestDelta = -1;\n      // Find the shortest event\n      for (i = 0, j = trackIterators.length; i < j; i++) {\n        if (trackIterators[i].curEvent) {\n          if (\n            -1 === smallestDelta ||\n            trackIterators[i].curEvent.delta <\n              trackIterators[smallestDelta].curEvent.delta\n          ) {\n            smallestDelta = i;\n          } else if (\n            // Prioritize tracks that haven't caught up with the loop count\n            trackIterators[i].curEvent.delta ===\n              trackIterators[smallestDelta].curEvent.delta &&\n            trackIterators[i].elapsedLoops <\n              trackIterators[smallestDelta].elapsedLoops\n          ) {\n            smallestDelta = i;\n          }\n        }\n      }\n      if (-1 !== smallestDelta) {\n        // Subtract delta of previous events\n        for (i = 0, j = trackIterators.length; i < j; i++) {\n          if (i !== smallestDelta && trackIterators[i].curEvent) {\n            trackIterators[i].curEvent.delta -=\n              trackIterators[smallestDelta].curEvent.delta;\n          }\n        }\n        // filling values\n        event = trackIterators[smallestDelta].curEvent;\n        tick += event.delta;\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            timeEvents.push({\n              type: \"bpm\",\n              bpm: event.tempoBPM,\n              playTime,\n              tick,\n            });\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n          if (event.subtype === MIDIEvents.EVENT_META_TIME_SIGNATURE) {\n            timeEvents.push({\n              type: \"timeSignature\",\n              numerator: event.param1,\n              denominatorPower: event.param2,\n              playTime,\n              tick,\n            });\n          }\n        }\n        // push midi events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          event.tick = tick;\n          event.track = smallestDelta;\n          combinedEvents.push(event);\n        }\n        // get next event\n        trackIterators[smallestDelta].curEvent =\n          trackIterators[smallestDelta].next();\n\n        // check elapsed loops\n        // loopCountReached = trackIterators.every(\n        //   (it) => it.curEvent == null || it.elapsedLoops >= loopCount,\n        // );\n      }\n    } while (-1 !== smallestDelta);\n\n    for (let i = 0; i < trackIterators.length; i++) {\n      if (trackIterators[i]?.curEvent) {\n        combinedEvents.push(\n          allNotesOff(i, trackIterators[i].curEvent.channel, playTime),\n        );\n      }\n    }\n  }\n  combinedEvents.forEach(({ playTime }) => {\n    if (playTime) maxPlayTime = Math.max(playTime, maxPlayTime);\n  });\n  timeEvents.push({\n    type: \"bpm\",\n    bpm: 120,\n    playTime: maxPlayTime,\n    tick: Math.max(...combinedEvents.map(({ tick }) => tick ?? 0)),\n  });\n  return timeEvents.sort((a, b) => a.playTime - b.playTime);\n};\n\nfunction isLoopStart(event) {\n  return (\n    event.param1 === CC_102_TRACK_LOOP_START &&\n    event.subtype === EVENT_MIDI_CONTROLLER &&\n    event.type === EVENT_MIDI\n  );\n}\n\nfunction isLoopEnd(event) {\n  return (\n    event.param1 === CC_103_TRACK_LOOP_END &&\n    event.subtype === EVENT_MIDI_CONTROLLER &&\n    event.type === EVENT_MIDI\n  );\n}\n\nfunction isAllNotesOff(event) {\n  return (\n    event.param1 === CC_123_ALL_NOTES_OFF &&\n    event.subtype === EVENT_MIDI_CONTROLLER &&\n    event.type === EVENT_MIDI\n  );\n}\n\nfunction allNotesOff(track, channel, playTime) {\n  return {\n    channel: channel,\n    track: track,\n    playTime: playTime,\n    type: EVENT_MIDI,\n    subtype: EVENT_MIDI_CONTROLLER,\n    param1: CC_123_ALL_NOTES_OFF,\n    delta: 0,\n  };\n}\n\nfunction printTrack(t, events) {\n  const ticksPerChar = 1000;\n  let charArr = [];\n  let tick = 0;\n  for (let i = 0; i < events.length; i++) {\n    const event = events[i];\n    tick += event.delta;\n    const j = Math.floor(tick / ticksPerChar);\n    if (isAllNotesOff(event)) {\n      charArr[j] = \"X\";\n      tick += ticksPerChar; // force next char so this doesn't get overwritten\n    } else if (isLoopStart(event)) {\n      charArr[j] = \">\";\n    } else if (isLoopEnd(event)) {\n      charArr[j] = \"<\";\n    } else if (charArr[j] == null) {\n      charArr[j] = \"\";\n    } else if (charArr[j] === \"\") {\n      charArr[j] = \"-\";\n    } else if (charArr[j] === \"-\") {\n      charArr[j] = \"=\";\n    }\n  }\n  t = (\"\" + t).padStart(2, \"0\");\n  const viz = [];\n  for (let k = 0; k < charArr.length; k++) {\n    viz[k] = charArr[k] || \" \";\n  }\n  console.debug(`Track ${t} |${viz.join(\"\")}|`);\n}\n","export default function promisify(xhr) {\n  const oldSend = xhr.send;\n  xhr.send = function () {\n    const xhrArguments = arguments;\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status < 200 || xhr.status >= 300) {\n          reject({\n            status: xhr.status,\n            statusText: xhr.statusText,\n          });\n        } else {\n          resolve(xhr);\n        }\n      };\n      xhr.onerror = function () {\n        reject({\n          status: xhr.status,\n          statusText: xhr.statusText,\n        });\n      };\n      try {\n        oldSend.apply(xhr, xhrArguments);\n      } catch (e) {}\n    });\n  };\n  return xhr;\n}\n","import React from \"react\";\n\nfunction Alert(props) {\n  const { handlePlayerError, playerError, showPlayerError } = props;\n\n  return (\n    <div hidden={!showPlayerError} className=\"error-box-outer\">\n      <div className=\"error-box\">\n        <div className=\"message\">Error: {playerError}</div>\n        <button onClick={() => handlePlayerError(null)}>Close</button>\n      </div>\n    </div>\n  );\n}\n\nexport default Alert;\n","import autoBindReact from \"auto-bind/react\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport Slider from \"./Slider\";\n\nconst TimeSliderContainer = styled.div`\n  flex-grow: 1;\n  margin-left: var(--charW2);\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  width: 95%;\n`;\n\nconst TimeLabel = styled.div`\n  margin-right: 15px;\n`;\n\nconst DurationLabel = styled.div`\n  margin-left: 20px;\n`;\n\n//  46 ms = 2048/44100 sec or 21.7 fps\n// 400 ms = 2.5 fps\nconst UPDATE_INTERVAL_MS = 100;\nconst pad = (n) => (n < 10 ? \"0\" + n : n);\n\nexport default class TimeSlider extends React.Component {\n  constructor(props) {\n    super(props);\n    autoBindReact(this);\n\n    this.state = {\n      draggedSongPositionMs: -1,\n      currentSongPositionMs: 0,\n    };\n    this.timer = null;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.paused === true && this.props.paused === false) {\n      this.timer = setInterval(() => {\n        const { getCurrentPositionMs, currentSongDurationMs } = this.props;\n        this.setState({\n          currentSongPositionMs: Math.min(\n            getCurrentPositionMs(),\n            currentSongDurationMs,\n          ),\n        });\n      }, UPDATE_INTERVAL_MS);\n    } else if (prevProps.paused === false && this.props.paused === true) {\n      clearInterval(this.timer);\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  getSongPos() {\n    return this.state.currentSongPositionMs / this.props.currentSongDurationMs;\n  }\n\n  getTimeLabel() {\n    const val =\n      this.state.draggedSongPositionMs >= 0\n        ? this.state.draggedSongPositionMs\n        : this.state.currentSongPositionMs;\n    return this.getTime(val);\n  }\n\n  getTime(ms) {\n    const sign = ms < 0 ? \"-\" : \"\";\n    ms = Math.abs(ms);\n    const min = Math.floor(ms / 60000);\n    const sec = (Math.floor((ms % 60000) / 100) / 10).toFixed(0);\n    return `${sign}${min}:${pad(sec)}`;\n  }\n\n  handlePositionDrag(event) {\n    const pos = event.target ? event.target.value : event;\n    // Update current time position label\n    this.setState({\n      draggedSongPositionMs: pos * this.props.currentSongDurationMs,\n    });\n  }\n\n  handlePositionDrop(event) {\n    this.setState({\n      draggedSongPositionMs: -1,\n      currentSongPositionMs: this.state.draggedSongPositionMs,\n    });\n    this.props.onChange(event);\n  }\n\n  render() {\n    return (\n      <TimeSliderContainer>\n        <TimeLabel>{this.getTimeLabel()}</TimeLabel>\n        <Slider\n          pos={this.getSongPos()}\n          onDrag={this.handlePositionDrag}\n          onChange={this.handlePositionDrop}\n        />\n        <DurationLabel>\n          {this.getTime(this.props.currentSongDurationMs)}\n        </DurationLabel>\n      </TimeSliderContainer>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { useContext } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport styled, { css } from \"styled-components\";\nimport { AppContext } from \"./AppContext\";\nimport SignIn from \"./SignIn\";\n\nconst HEADER_HEIGHT = \"30px\";\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: black;\n  height: ${HEADER_HEIGHT};\n  overflow: hidden;\n  z-index: 100000000;\n`;\n\nconst NavLinks = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst baseLinkStyles = css`\n  display: inline-flex;\n  align-items: center;\n  padding: 0px 24px;\n  text-decoration: none;\n  height: ${HEADER_HEIGHT};\n\n  &:hover {\n    text-decoration: none;\n    background: #333;\n  }\n`;\n\nconst HeaderLink = styled(Link)`\n  ${baseLinkStyles}\n`;\n\nconst ExternalLink = styled.a`\n  ${baseLinkStyles}\n`;\n\nconst ExternalLinks = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst AppHeader: React.FC = () => {\n  const location = useLocation();\n  const path = location.pathname;\n  const {\n    user,\n    handleLogin,\n    handleLogout,\n    analysisEnabled,\n    handleToggleAnalysis,\n  } = useContext(AppContext);\n\n  const getLinkStyle = (pathPrefix: string): React.CSSProperties => {\n    if (pathPrefix === \"/corpus\") {\n      return path === \"/corpus/\" ? { background: \"white\", color: \"black\" } : {};\n    }\n    return path.startsWith(pathPrefix)\n      ? { background: \"white\", color: \"black\" }\n      : {};\n  };\n\n  return (\n    <HeaderContainer>\n      <NavLinks>\n        <HeaderLink\n          className=\"AppHeader-title\"\n          to={{ pathname: \"/\" }}\n          style={getLinkStyle(\"/100\")}\n        >\n          Rawl\n        </HeaderLink>\n        <HeaderLink to=\"/s/\" style={getLinkStyle(\"/s\")}>\n          Structures\n        </HeaderLink>\n        <HeaderLink to=\"/corpus/\" style={getLinkStyle(\"/corpus\")}>\n          Pieces\n        </HeaderLink>\n        <HeaderLink to=\"/timeline/\" style={getLinkStyle(\"/timeline\")}>\n          Timeline\n        </HeaderLink>\n        <HeaderLink to=\"/forge/\" style={getLinkStyle(\"/forge\")}>\n          Forge\n        </HeaderLink>\n        <HeaderLink to=\"/e/\" style={getLinkStyle(\"/e\")}>\n          Editor\n        </HeaderLink>\n      </NavLinks>\n\n      <ExternalLinks>\n        <ExternalLink\n          href=\"https://github.com/vpavlenko/rawl\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <div className=\"octocat\" />\n        </ExternalLink>\n        <ExternalLink\n          href=\"https://vpavlenko.github.io/layouts\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          Layouts\n        </ExternalLink>\n        <ExternalLink\n          href=\"https://github.com/vpavlenko/study-music\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          Books\n        </ExternalLink>\n        <SignIn\n          user={user}\n          handleLogin={handleLogin}\n          handleLogout={handleLogout}\n          handleToggleAnalysis={handleToggleAnalysis}\n          analysisEnabled={analysisEnabled}\n        />\n      </ExternalLinks>\n    </HeaderContainer>\n  );\n};\n\nexport default AppHeader;\n","import React from \"react\";\n\nconst SignIn = ({\n  user,\n  handleLogin,\n  handleLogout,\n  handleToggleAnalysis,\n  analysisEnabled,\n}) => {\n  return (\n    <div>\n      {user && (\n        <label className=\"inline\">\n          <input\n            onChange={handleToggleAnalysis}\n            type=\"checkbox\"\n            checked={analysisEnabled}\n            name=\"analysis-enabled\"\n          />\n          Manual remeasuring\n        </label>\n      )}\n      {user ? (\n        <>\n          {\"  \"}\n          Logged in as {user.email}.{\" \"}\n          <a href=\"#\" onClick={handleLogout}>\n            Logout\n          </a>\n        </>\n      ) : (\n        <>\n          <a href=\"#\" onClick={handleLogin} style={{ color: \"#222\" }}>\n            {\".\"}\n          </a>{\" \"}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default SignIn;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\n\nconst MessageBoxOuter = styled.div`\n  position: absolute;\n  z-index: 100;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  padding: var(--charH) var(--charW2);\n  box-sizing: border-box;\n\n  &[hidden] {\n    visibility: hidden;\n  }\n`;\n\nconst MessageBox = styled.div`\n  background-color: var(--button);\n  padding: var(--charH) var(--charW2);\n  box-shadow: var(--charW1) var(--charW1) var(--shadow);\n  box-sizing: border-box;\n  display: flex;\n  transition: all 250ms steps(5);\n  visibility: visible;\n  overflow: hidden;\n  max-height: 100%;\n  pointer-events: all;\n  flex-direction: column;\n  width: calc(90 * var(--charW1));\n  height: calc(40 * var(--charH));\n\n  &[hidden] {\n    width: 0;\n    height: 0;\n    visibility: hidden;\n\n    .message-box-inner {\n      overflow: hidden;\n    }\n  }\n\n  &.drop-message {\n    height: calc(9 * var(--charH) + 1px);\n    width: calc(60 * var(--charW1));\n    text-align: center;\n  }\n`;\n\nconst MessageBoxInner = styled.div`\n  color: var(--clickable);\n  border: 1px solid var(--clickable);\n  padding: var(--charH) var(--charW2);\n  overflow: auto;\n  scrollbar-gutter: stable;\n\n  &:hover {\n    scrollbar-gutter: stable;\n  }\n\n  .drop-message & {\n    overflow: hidden;\n    display: flex;\n    flex-grow: 1;\n    align-items: center;\n    justify-content: center;\n    white-space: nowrap;\n  }\n`;\n\nconst DropMessage: React.FC<{\n  dropzoneProps: {\n    isDragActive: boolean;\n  };\n}> = ({ dropzoneProps }) => (\n  <MessageBoxOuter hidden={!dropzoneProps.isDragActive}>\n    <MessageBox hidden={!dropzoneProps.isDragActive} className=\"drop-message\">\n      <MessageBoxInner>Drop a MIDI file to play.</MessageBoxInner>\n    </MessageBox>\n  </MessageBoxOuter>\n);\n\nexport default React.memo(DropMessage);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport {\n  formatComposerName,\n  GenreItem,\n  GenreList,\n  getEmojis,\n  getUniqueStyles,\n  HasMetadata,\n} from \"../utils/corpusUtils\";\nimport { corpora } from \"./rawl/corpora/corpora\";\n\nconst TimelineContainer = styled.div`\n  padding: 2rem;\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n\nconst TimelineWrapper = styled.div`\n  position: relative;\n  padding-left: 100px;\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    left: 80px;\n    top: 0;\n    bottom: 0;\n    width: 2px;\n    background: #666;\n  }\n`;\n\nconst TimelineYear = styled.div`\n  position: relative;\n  margin-bottom: 2rem;\n`;\n\nconst YearMarker = styled.div`\n  position: absolute;\n  left: -100px;\n  width: 80px;\n  text-align: right;\n`;\n\nconst YearLabel = styled.span`\n  padding: 4px 8px;\n  border-radius: 4px;\n  position: relative;\n  top: 0.2rem;\n  color: #999;\n  font-weight: bold;\n`;\n\nconst ComposersGroup = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n`;\n\nconst ComposerCard = styled.div`\n  cursor: default;\n  font-size: 0.9rem;\n`;\n\nconst ComposerLink = styled(Link)`\n  text-decoration: none;\n  color: inherit;\n  display: inline-block;\n`;\n\ntype Composer = HasMetadata & {\n  slug: string;\n  midis: string[];\n};\n\nconst ComposerHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  > a {\n    flex: 0 1 auto;\n  }\n`;\n\nconst ComposerName = styled.h3`\n  margin: 0;\n  color: #fff;\n`;\n\nconst CountryFlag = styled.span`\n  cursor: pointer;\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst FilterIndicator = styled.div`\n  position: fixed;\n  top: 50px;\n  right: 20px;\n  padding: 8px 16px;\n  border-radius: 4px;\n  background: #333;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst CloseFilter = styled.button`\n  background: none;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 4px;\n  font-size: 1.2rem;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst Timeline: React.FC = () => {\n  const [selectedCountry, setSelectedCountry] = React.useState<string | null>(\n    null,\n  );\n  const [selectedStyle, setSelectedStyle] = React.useState<string | null>(null);\n\n  const composers = corpora\n    .filter(\n      (composer): composer is Composer & { composerBirthYear: number } =>\n        typeof composer.composerBirthYear === \"number\",\n    )\n    .sort((a, b) => b.composerBirthYear - a.composerBirthYear);\n\n  const composersWithoutYear = corpora.filter(\n    (composer) => typeof composer.composerBirthYear !== \"number\",\n  );\n\n  const handleCountryClick = (country: string) => {\n    setSelectedStyle(null);\n    setSelectedCountry(country);\n  };\n\n  const handleStyleClick = (style: string) => {\n    setSelectedCountry(null);\n    setSelectedStyle(style);\n  };\n\n  const clearFilter = () => {\n    setSelectedCountry(null);\n    setSelectedStyle(null);\n  };\n\n  const filteredComposers = composers.filter((composer) => {\n    if (selectedCountry) {\n      return composer.country\n        ?.split(\",\")\n        .map((c) => c.trim())\n        .includes(selectedCountry);\n    }\n    if (selectedStyle) {\n      const styles = getUniqueStyles(composer.genre, composer.style);\n      return styles.includes(selectedStyle);\n    }\n    return true;\n  });\n\n  const filteredYears = [\n    ...new Set(filteredComposers.map((c) => c.composerBirthYear)),\n  ];\n\n  const ComposerCardContent = ({ composer }: { composer: Composer }) => {\n    const styles = getUniqueStyles(composer.genre, composer.style);\n\n    return (\n      <ComposerCard key={composer.slug}>\n        <ComposerHeader>\n          <ComposerLink to={`/corpus/${composer.slug}`}>\n            <ComposerName>{formatComposerName(composer.slug)}</ComposerName>\n          </ComposerLink>\n          {composer.country && (\n            <div>\n              {composer.country.split(\",\").map((c) => (\n                <CountryFlag\n                  key={c.trim()}\n                  onClick={() => handleCountryClick(c.trim())}\n                >\n                  {getEmojis(c.trim())}\n                </CountryFlag>\n              ))}\n            </div>\n          )}\n        </ComposerHeader>\n        {styles.length > 0 && (\n          <GenreList>\n            {styles.map((style, index) => (\n              <GenreItem\n                key={index}\n                onClick={() => handleStyleClick(style)}\n                style={{ cursor: \"pointer\" }}\n              >\n                {index === styles.length - 1 ? style : `${style},`}\n              </GenreItem>\n            ))}\n          </GenreList>\n        )}\n      </ComposerCard>\n    );\n  };\n\n  return (\n    <TimelineContainer>\n      <div style={{ color: \"#999\", marginBottom: 40 }}>\n        All years are approximate composer birth years.\n      </div>\n      {(selectedCountry || selectedStyle) && (\n        <FilterIndicator>\n          <span>\n            {selectedCountry && (\n              <>\n                {selectedCountry} {getEmojis(selectedCountry)}\n              </>\n            )}\n            {selectedStyle && selectedStyle}\n          </span>\n          <CloseFilter onClick={clearFilter}></CloseFilter>\n        </FilterIndicator>\n      )}\n      <TimelineWrapper>\n        {filteredYears.map((year) => (\n          <TimelineYear key={year}>\n            <YearMarker>\n              <YearLabel>{year}</YearLabel>\n            </YearMarker>\n            <ComposersGroup>\n              {filteredComposers\n                .filter((composer) => composer.composerBirthYear === year)\n                .map((composer) => (\n                  <ComposerCardContent\n                    key={composer.slug}\n                    composer={composer}\n                  />\n                ))}\n            </ComposersGroup>\n          </TimelineYear>\n        ))}\n      </TimelineWrapper>\n      {composersWithoutYear.length > 0 && (\n        <>\n          <ComposersGroup>\n            {composersWithoutYear\n              .filter((composer) => {\n                if (selectedCountry) {\n                  return composer.country\n                    ?.split(\",\")\n                    .map((c) => c.trim())\n                    .includes(selectedCountry);\n                }\n                if (selectedStyle) {\n                  const styles = getUniqueStyles(\n                    composer.genre,\n                    composer.style,\n                  );\n                  return styles.includes(selectedStyle);\n                }\n                return true;\n              })\n              .map((composer) => (\n                <ComposerCardContent key={composer.slug} composer={composer} />\n              ))}\n          </ComposersGroup>\n        </>\n      )}\n    </TimelineContainer>\n  );\n};\n\nexport default Timeline;\n","import * as React from \"react\";\nimport { ReadableTextBlock } from \"./Book\";\nimport { A } from \"./chapters\";\n\nconst AboutTop100Corpus = (\n  <ReadableTextBlock>\n    <h2>How did I pick the pieces?</h2>\n    <p>\n      I went through{\" \"}\n      <a\n        href=\"https://musescore.com/sheetmusic/non-official?sort=view_count\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        https://musescore.com/sheetmusic/non-official?sort=view_count\n      </a>\n      . My goal was to find 100 most popular composers and take the most popular\n      score from each of them.\n    </p>\n\n    <p>\n      I've gathered the corpus on Oct 31, 2024. The view count on the most\n      popular work doesn't equal the work's popularity even on MuseScore. Eg.\n      \"River flows in you\" has 7.3M on the most popular arrangement, but their\n      next top 5 arrangements (out of 687 community scores of this title) have\n      1.5M more view counts. I don't add up all view counts across all versions,\n      I purely use the top 1 - which makes a bit of a random selection at the\n      lower end of the top 100.\n    </p>\n\n    <p>\n      Some compositions which almost made it to top 100 by a very narrow margin\n      are BTS's \"I Need You\", as well as themes from \"Godfather\" and \"The Pink\n      Panther\". Next time!\n    </p>\n\n    <p>\n      I don't use the number of view counts (position within the top 100)\n      throughout the book on harmony. I care about the total range of harmonic\n      devices used, not about their relative popularity weighted by each work's\n      popularity.\n    </p>\n\n    <p>\n      Neither do I want it to be weighted by the number of distinct pieces of\n      the same composer which are popular. So, as a result of my method I\n      include \"Fr Elise\" and therefore I exclude \"Moonlight\" and \"Tempest\". Out\n      of the entire Bach heritage I include exactly a single WTC-1 C major\n      prelude. As a benefit, I don't get 7 works of Chopin into the top 100 as I\n      would otherwise. Also we cut on Liszt, Joe Hisaishi, Koji Kondo, Ed\n      Sheeran etc.\n    </p>\n\n    <p>\n      In most cases, I take the same arrangement that scored the most views.\n      Sometimes I find an arrangement that suits better to my narrative - maybe\n      by having less mistakes, original key, better MIDI sound or so.\n    </p>\n\n    <p>\n      I only take solo piano arrangements because I want to focus on harmony,\n      not on the arrangement. For \"We Are Number One\" the most popular version\n      is a band arrangement, and I represent this piece by its piano\n      arrangement. \"Solo piano\" doesn't guarantee that the arrangement is\n      actually playable by a mortal two-handed human  some of them incorporate\n      more lines like octave bass + chords + melody. Since we study structures\n      and harmony in general, rather that a piano-specific idiom, this is\n      acceptable.\n    </p>\n\n    <p>\n      In the special case of \"He's a Pirate\", I attribute it to Klaus Badelt to\n      avoid excluding it because of Hans Zimmer's \"Interstellar\". Call it data\n      manipulation, but they are even written in different minors (major V vs\n      natural).\n    </p>\n\n    <p>\n      I attribute \"Runaway\" to Kanye West, since the melody and the bass line\n      was probably created by him first and only later arranged by Ramin\n      Djawadi.\n    </p>\n\n    <p>\n      In the case of \"G Minor Bach\" the original harmony was modernized so much\n      (departing from {A(\"prelude-no.-2-bwv-847-in-c-minor\")}) that I include\n      this track under Luo Ni.\n    </p>\n\n    <p>\n      Also, I ignore Turkish tabs from Musa etiner's account. This is a great\n      material which I'd look into separately. I'm not sure these view counts\n      are coming from anywhere outside of the Turkish-speaking world.\n    </p>\n\n    <p>\n      For ABBA, I take \"The Winner Takes It All\" instead of \"Chiquitita\",\n      because \"Chiquitita\", although higher in view counts, is represented only\n      by its ending.\n    </p>\n\n    <p>\n      As I understand, the copyright takedowns of community scores didn't affect\n      my corpus - even John Williams got represented.\n    </p>\n  </ReadableTextBlock>\n);\n\nexport default AboutTop100Corpus;\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { components, Theme } from \"react-select\";\nimport CreatableSelect from \"react-select/creatable\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport {\n  Analysis,\n  CompressedNotes,\n  deltaCoding,\n  FrozenNotesType,\n  getPhraseStarts,\n  PitchClass,\n  rehydrateSnippet,\n  Snippet,\n  TIME_SCALE_FACTOR,\n} from \"./analysis\";\nimport { getModulations, SecondsSpan } from \"./Rawl\";\nimport SnippetItem from \"./SnippetItem\";\nimport SnippetList from \"./SnippetList\";\nimport { SystemLayoutProps } from \"./SystemLayout\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  background-color: black;\n  color: white;\n`;\n\nconst DebugContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n`;\n\nconst DebugColumn = styled.div`\n  width: 48%;\n`;\n\nconst FrozenNotesDisplay = styled.div`\n  margin-bottom: 20px;\n`;\n\nconst JsonDisplay = styled.pre`\n  white-space: pre-wrap;\n  word-break: break-all;\n  cursor: pointer;\n  &:active {\n    background-color: #333;\n  }\n  font-size: 8px;\n`;\n\nconst RangeInputs = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n\nconst NumberInput = styled.input`\n  width: 60px;\n  margin-right: 10px;\n`;\n\nconst CopyIndicator = styled.div<{ visible: boolean }>`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 10px 20px;\n  border-radius: 5px;\n  opacity: ${(props) => (props.visible ? 1 : 0)};\n  transition: opacity 0.3s;\n  z-index: 9999;\n`;\n\nconst SnippetListContainer = styled.div`\n  margin-top: 20px;\n  border-top: 1px solid #444;\n  padding-top: 20px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n`;\n\nconst ErrorMessage = styled.div`\n  color: #ff6b6b;\n  margin-top: 10px;\n`;\n\nconst StyledSelect = styled(CreatableSelect).attrs({\n  classNamePrefix: \"react-select\",\n})`\n  width: 600px;\n  margin-left: 10px;\n\n  .react-select__menu {\n    z-index: 9999;\n  }\n\n  .react-select__option--is-focused {\n    background-color: #deebff;\n  }\n`;\n\nconst SaveButton = styled.button<{ unsaved: boolean }>`\n  margin-top: 10px;\n  background-color: ${(props) => (props.unsaved ? \"#4CAF50\" : \"#808080\")};\n  color: white;\n  padding: 10px 20px;\n  border: none;\n  border-radius: 5px;\n  cursor: ${(props) => (props.unsaved ? \"pointer\" : \"default\")};\n  transition: background-color 0.3s;\n\n  &:hover {\n    background-color: ${(props) => (props.unsaved ? \"#45a049\" : \"#808080\")};\n  }\n`;\n\nconst FlashOverlay = styled.div<{ visible: boolean }>`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.5);\n  opacity: ${(props) => (props.visible ? 1 : 0)};\n  transition: opacity 0.3s;\n  pointer-events: none;\n  z-index: 9999;\n`;\n\n// Custom components for react-select\nconst customComponents = {\n  Option: (props) => (\n    <components.Option {...props}>\n      {props.isSelected ? \" \" : \"\"}\n      {props.label}\n    </components.Option>\n  ),\n};\n\n// Custom theme for react-select\nconst selectTheme = (theme: Theme) => ({\n  ...theme,\n  colors: {\n    ...theme.colors,\n    primary: \"#4a90e2\",\n    primary75: \"#4a90e2cc\",\n    primary50: \"#4a90e280\",\n    primary25: \"#4a90e240\",\n    danger: \"#de350b\",\n    dangerLight: \"#de350b40\",\n    neutral0: \"white\",\n    neutral5: \"#f2f2f2\",\n    neutral10: \"#e6e6e6\",\n    neutral20: \"#cccccc\",\n    neutral30: \"#b3b3b3\",\n    neutral40: \"#999999\",\n    neutral50: \"#808080\",\n    neutral60: \"#666666\",\n    neutral70: \"#4d4d4d\",\n    neutral80: \"#333333\",\n    neutral90: \"#1a1a1a\",\n  },\n});\n\n// Custom styles for react-select\nconst selectStyles = {\n  control: (provided) => ({\n    ...provided,\n    backgroundColor: \"white\",\n    borderColor: \"#cccccc\",\n  }),\n  menu: (provided) => ({\n    ...provided,\n    backgroundColor: \"white\",\n    zIndex: 9999,\n  }),\n  option: (provided, state) => ({\n    ...provided,\n    backgroundColor: state.isSelected ? \"#4a90e2\" : \"white\",\n    color: state.isSelected ? \"white\" : \"black\",\n    \"&:hover\": {\n      backgroundColor: \"#f0f0f0\",\n      color: \"black\",\n    },\n  }),\n  singleValue: (provided) => ({\n    ...provided,\n    color: \"black\",\n  }),\n  input: (provided) => ({\n    ...provided,\n    color: \"black\",\n  }),\n  placeholder: (provided) => ({\n    ...provided,\n    color: \"#808080\",\n  }),\n  indicatorSeparator: (provided) => ({\n    ...provided,\n    display: \"none\",\n  }),\n  dropdownIndicator: (provided) => ({\n    ...provided,\n    color: \"#666666\",\n    \"&:hover\": {\n      color: \"#333333\",\n    },\n  }),\n  clearIndicator: (provided) => ({\n    ...provided,\n    color: \"#666666\",\n    \"&:hover\": {\n      color: \"#333333\",\n    },\n  }),\n};\n\ninterface FrozenNotesLayoutProps extends SystemLayoutProps {\n  saveAnalysis: (analysis: Analysis) => void;\n}\n\n// Add this new function to count tag occurrences\nconst countTagOccurrences = (\n  analyses: Record<string, Analysis>,\n): Record<string, number> => {\n  const tagCounts: Record<string, number> = {};\n  Object.values(analyses).forEach((analysis) => {\n    if (analysis.snippets) {\n      analysis.snippets.forEach((snippet) => {\n        if (snippet.tag) {\n          tagCounts[snippet.tag] = (tagCounts[snippet.tag] || 0) + 1;\n        }\n      });\n    }\n  });\n  return tagCounts;\n};\n\nconst MeasureTimesContainer = styled.div`\n  margin-top: 20px;\n  padding-top: 20px;\n  border-top: 1px solid #444;\n`;\n\nconst MeasureTimesList = styled.pre`\n  font-size: 12px;\n  color: #888;\n  white-space: pre-wrap;\n  word-break: break-all;\n`;\n\nconst updateSnippetPhraseStarts = (\n  snippet: Snippet,\n  analysis: Analysis,\n  maxMeasures: number,\n): Snippet => {\n  if (!snippet.phraseStarts) {\n    const allPhraseStarts = getPhraseStarts(analysis, maxMeasures);\n    const snippetPhraseStarts = allPhraseStarts.filter(\n      (measure) =>\n        measure >= snippet.measuresSpan[0] &&\n        measure <= snippet.measuresSpan[1],\n    );\n    return {\n      ...snippet,\n      phraseStarts: snippetPhraseStarts,\n    };\n  }\n  return snippet;\n};\n\nconst FrozenNotesLayout: React.FC<FrozenNotesLayoutProps> = ({\n  frozenNotes,\n  measuresAndBeats,\n  analysis,\n  saveAnalysis,\n}) => {\n  const { analyses } = useContext(AppContext);\n  const [dataRange, setDataRange] = useState<[number, number]>([1, 4]);\n  const [inputRange, setInputRange] = useState<[string, string]>([\"1\", \"4\"]);\n  const [tagName, setTagName] = useState<{\n    value: string;\n    label: string;\n  } | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [copyIndicatorVisible, setCopyIndicatorVisible] = useState(false);\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n  const [tagError, setTagError] = useState<string | null>(null);\n  const [unsavedChanges, setUnsavedChanges] = useState(false);\n  const [flashVisible, setFlashVisible] = useState(false);\n  const [phraseStartsUpdated, setPhraseStartsUpdated] =\n    useState<boolean>(false);\n\n  const maxMeasure = measuresAndBeats?.measures.length || 1;\n\n  const validateAndUpdateRange = useCallback(\n    (newRange: [string, string]) => {\n      const [start, end] = newRange.map((val) => {\n        const num = parseInt(val, 10);\n        return isNaN(num) ? 0 : Math.max(1, Math.min(num, maxMeasure));\n      });\n\n      if (start > 0 && end > 0 && start <= end) {\n        setDataRange([start, end]);\n        setError(null);\n      } else {\n        setError(\"Please enter a valid measure range.\");\n      }\n    },\n    [maxMeasure],\n  );\n\n  const handleRangeChange = useCallback(\n    (index: number) => (e: React.ChangeEvent<HTMLInputElement>) => {\n      const newValue = e.target.value;\n      const newRange = [...inputRange] as [string, string];\n      newRange[index] = newValue;\n\n      // If measureStart > measureEnd, set measureEnd := measureStart\n      if (index === 0 && parseInt(newValue, 10) > parseInt(newRange[1], 10)) {\n        newRange[1] = newValue;\n      }\n\n      setInputRange(newRange);\n\n      if (newValue !== \"\") {\n        validateAndUpdateRange(newRange);\n      }\n      setUnsavedChanges(true);\n    },\n    [inputRange, validateAndUpdateRange],\n  );\n\n  const handleRangeBlur = useCallback(\n    (index: number) => () => {\n      const newRange = [...inputRange] as [string, string];\n      if (newRange[index] === \"\") {\n        newRange[index] = index === 0 ? \"1\" : maxMeasure.toString();\n      }\n      setInputRange(newRange);\n      validateAndUpdateRange(newRange);\n    },\n    [inputRange, maxMeasure, validateAndUpdateRange],\n  );\n\n  const createFrozenNotes = useCallback((): FrozenNotesType | null => {\n    if (!frozenNotes || !measuresAndBeats || !analysis) {\n      console.error(\"Missing required props in createFrozenNotes\");\n      return null;\n    }\n\n    const startMeasure = Math.max(0, dataRange[0] - 1);\n    const endMeasure = Math.min(dataRange[1], maxMeasure) - 1;\n\n    const startTime = measuresAndBeats.measures[startMeasure];\n    const endTime = measuresAndBeats.measures[endMeasure + 1];\n\n    const notesInVoices: FrozenNotesType[\"notesInVoices\"] = frozenNotes\n      // First filter out any voice that only contains drum notes\n      .filter((voiceNotes) => voiceNotes.some((note) => !note.isDrum))\n      .map((voiceNotes) => {\n        const lengthToNotes: CompressedNotes = {};\n        // Then filter out drum notes within each voice\n        voiceNotes\n          .filter((note) => !note.isDrum)\n          .forEach((note) => {\n            if (note.span[1] >= startTime && note.span[0] < endTime) {\n              const start = Math.round(\n                (note.span[0] - startTime) * TIME_SCALE_FACTOR,\n              );\n              const length = Math.round(\n                (note.span[1] - note.span[0]) * TIME_SCALE_FACTOR,\n              );\n              const midiNumber = note.note.midiNumber;\n\n              if (!lengthToNotes[length]) {\n                lengthToNotes[length] = {};\n              }\n              if (!lengthToNotes[length][midiNumber]) {\n                lengthToNotes[length][midiNumber] = [start];\n              } else {\n                (lengthToNotes[length][midiNumber] as number[]).push(start);\n              }\n            }\n          });\n\n        // Apply delta coding to the start times\n        Object.values(lengthToNotes).forEach((midiNumbers) => {\n          Object.keys(midiNumbers).forEach((midiNumber) => {\n            const starts = midiNumbers[midiNumber] as number[];\n            midiNumbers[midiNumber] = deltaCoding(starts.sort((a, b) => a - b));\n          });\n        });\n\n        return lengthToNotes;\n      });\n\n    const modulations = getModulations(analysis);\n    // Find the latest modulation that occurs before or at the start measure\n    const initialModulation = modulations\n      .filter((mod) => mod.measure <= startMeasure)\n      .reduce(\n        (latest, current) =>\n          current.measure > latest.measure ? current : latest,\n        { measure: -1, tonic: 0 as PitchClass }, // Default to C if no previous modulations\n      );\n\n    // Get all modulations within our slice, including the initial one\n    const relevantModulations = [\n      initialModulation,\n      ...modulations.filter(\n        (mod) => mod.measure > startMeasure && mod.measure <= endMeasure,\n      ),\n    ];\n\n    const frozenAnalysis: FrozenNotesType[\"analysis\"] = {\n      modulations: Object.fromEntries(\n        relevantModulations.map((mod) => [\n          mod.measure === initialModulation.measure\n            ? 1\n            : mod.measure - startMeasure + 1,\n          mod.tonic,\n        ]),\n      ),\n      measuresAndBeats: {\n        measures: deltaCoding(\n          measuresAndBeats.measures\n            .slice(startMeasure, endMeasure + 2)\n            .map((time) => Math.round((time - startTime) * TIME_SCALE_FACTOR)),\n        ),\n        beats: deltaCoding(\n          measuresAndBeats.beats\n            .filter((time) => time >= startTime && time < endTime)\n            .map((time) => Math.round((time - startTime) * TIME_SCALE_FACTOR)),\n        ),\n      },\n    };\n\n    return {\n      notesInVoices,\n      analysis: frozenAnalysis,\n    };\n  }, [frozenNotes, dataRange, measuresAndBeats, analysis, maxMeasure]);\n\n  const snippet: Snippet | null = useMemo(() => {\n    const frozenNotesData = createFrozenNotes();\n    if (!frozenNotesData) return null;\n\n    // Get phrase starts from the analysis for the current measure range\n    const allPhraseStarts = getPhraseStarts(\n      analysis,\n      measuresAndBeats.measures.length,\n    );\n    const snippetPhraseStarts = allPhraseStarts.filter(\n      (measure) => measure >= dataRange[0] && measure <= dataRange[1],\n    );\n\n    return {\n      tag: tagName?.value || \"\",\n      frozenNotes: frozenNotesData,\n      measuresSpan: dataRange,\n      phraseStarts: snippetPhraseStarts,\n    };\n  }, [\n    createFrozenNotes,\n    tagName,\n    dataRange,\n    analysis,\n    measuresAndBeats?.measures.length,\n  ]);\n\n  const exportString = useMemo(() => {\n    return snippet ? JSON.stringify(snippet) : \"\";\n  }, [snippet]);\n\n  const resetToDefaults = useCallback(() => {\n    setInputRange([\"1\", \"4\"]);\n    setDataRange([1, 4]);\n    setTagName(null);\n  }, []);\n\n  const saveSnippet = useCallback(() => {\n    if (!snippet) return;\n    if (!tagName || !tagName.value.trim()) {\n      setTagError(\"Please enter a tag name before saving.\");\n      return;\n    }\n    setTagError(null);\n    const updatedAnalysis: Analysis = {\n      ...analysis,\n      snippets: [...(analysis.snippets || []), snippet],\n    };\n    saveAnalysis(updatedAnalysis);\n    setUnsavedChanges(false);\n    setFlashVisible(true);\n    setTimeout(() => setFlashVisible(false), 300);\n\n    // Reset input fields to defaults\n    resetToDefaults();\n  }, [analysis, saveAnalysis, snippet, tagName, resetToDefaults]);\n\n  const deleteSnippet = useCallback(\n    (index: number) => {\n      const snippetToDelete = analysis.snippets?.[index];\n      const updatedAnalysis: Analysis = {\n        ...analysis,\n        snippets: (analysis.snippets || []).filter((_, i) => i !== index),\n      };\n      saveAnalysis(updatedAnalysis);\n\n      // Set the measure range of the deleted snippet into input fields\n      if (snippetToDelete && snippetToDelete.measuresSpan) {\n        const [start, end] = snippetToDelete.measuresSpan;\n        setInputRange([start.toString(), end.toString()]);\n        setDataRange([start, end]);\n      }\n\n      // Clear the tag name\n      setTagName(null);\n\n      // Set unsaved changes to true\n      setUnsavedChanges(true);\n\n      // Set focus to the tag input\n      setTimeout(() => {\n        if (selectRef.current) {\n          selectRef.current.focus();\n        }\n      }, 0);\n    },\n    [analysis, saveAnalysis, setInputRange, setDataRange],\n  );\n\n  const copyToClipboard = useCallback(() => {\n    if (!exportString) return;\n    navigator.clipboard.writeText(exportString).then(() => {\n      setCopyIndicatorVisible(true);\n      setTimeout(() => setCopyIndicatorVisible(false), 2000);\n    });\n  }, [exportString]);\n\n  const noteHeight = 3; // Match the initial value in StackedSystemLayout\n\n  const allTags = useMemo(() => {\n    const tagSet = new Set<string>();\n    const tagCounts = countTagOccurrences(analyses);\n    Object.values(analyses).forEach((analysis) => {\n      if (analysis.snippets) {\n        analysis.snippets.forEach((snippet) => {\n          if (snippet.tag) {\n            tagSet.add(snippet.tag);\n          }\n        });\n      }\n    });\n    return Array.from(tagSet).map((tag) => ({\n      value: tag,\n      label: `${tag} (${tagCounts[tag]})`,\n    }));\n  }, [analyses]);\n\n  const rehydratedSnippet = useMemo(() => {\n    if (!snippet) return null;\n    return rehydrateSnippet(snippet);\n  }, [snippet]);\n\n  const selectRef = useRef(null);\n\n  const saveButtonRef = useRef<HTMLButtonElement>(null);\n\n  const handleSelectChange = (selectedOption, actionMeta) => {\n    if (actionMeta.action === \"create-option\") {\n      setTagName({ value: selectedOption.value, label: selectedOption.value });\n    } else {\n      setTagName(selectedOption as { value: string; label: string } | null);\n    }\n    setMenuIsOpen(false);\n    setUnsavedChanges(true);\n\n    // Move focus to Save Snippet button after creating a new tag or selecting an existing one\n    setTimeout(() => {\n      saveButtonRef.current?.focus();\n    }, 0);\n  };\n\n  const measureStartRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (measureStartRef.current) {\n      measureStartRef.current.focus();\n      measureStartRef.current.select(); // Select the content\n    }\n  }, []);\n\n  // Add useEffect to handle book:index tag on entry\n  useEffect(() => {\n    if (!measuresAndBeats || !analysis?.snippets) return;\n\n    const bookIndexSnippets = analysis.snippets.filter((s) =>\n      s.tag.startsWith(\"book:index\"),\n    );\n\n    const needsUpdate = bookIndexSnippets.some((s) => !s.secondsSpan);\n    if (needsUpdate) {\n      // Update all book:index snippets with secondsSpan\n      const updatedSnippets = analysis.snippets.map((s) => {\n        if (\n          s.tag.startsWith(\"book:index\") &&\n          s.measuresSpan &&\n          !s.secondsSpan\n        ) {\n          const [startMeasure, endMeasure] = s.measuresSpan;\n          const startTime = measuresAndBeats.measures[startMeasure - 1];\n          const endTime = measuresAndBeats.measures[endMeasure];\n\n          return {\n            ...s,\n            secondsSpan: [startTime, endTime] as SecondsSpan,\n          };\n        }\n        return s;\n      });\n\n      // Save the updated analysis\n      saveAnalysis({\n        ...analysis,\n        snippets: updatedSnippets,\n      });\n\n      // Show toast notification\n      setCopyIndicatorVisible(true);\n      setTimeout(() => setCopyIndicatorVisible(false), 2000);\n    }\n  }, [analysis, measuresAndBeats, saveAnalysis]);\n\n  useEffect(() => {\n    if (phraseStartsUpdated || !analysis?.snippets || !measuresAndBeats) return;\n\n    const snippetsNeedingUpdate = analysis.snippets.filter(\n      (s) => !s.phraseStarts,\n    );\n\n    if (snippetsNeedingUpdate.length > 0) {\n      const maxMeasures = measuresAndBeats.measures.length;\n      const updatedSnippets = analysis.snippets.map((s) =>\n        updateSnippetPhraseStarts(s, analysis, maxMeasures),\n      );\n\n      // Only update if there are actual changes\n      if (\n        JSON.stringify(updatedSnippets) !== JSON.stringify(analysis.snippets)\n      ) {\n        saveAnalysis({\n          ...analysis,\n          snippets: updatedSnippets,\n        });\n\n        setCopyIndicatorVisible(true);\n        setTimeout(() => setCopyIndicatorVisible(false), 2000);\n        setPhraseStartsUpdated(true);\n      }\n    }\n  }, [analysis, measuresAndBeats, phraseStartsUpdated, saveAnalysis]);\n\n  // Add this check after all hooks have been called\n  if (!frozenNotes || !measuresAndBeats || !analysis) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <ErrorBoundary>\n      <Container>\n        <FlashOverlay visible={flashVisible} />\n        <FrozenNotesDisplay>\n          <h2>Frozen Notes</h2>\n          <RangeInputs>\n            <label>Measures:&nbsp;</label>\n            <NumberInput\n              ref={measureStartRef}\n              type=\"number\"\n              min=\"1\"\n              max={maxMeasure}\n              value={inputRange[0]}\n              onChange={handleRangeChange(0)}\n              onBlur={handleRangeBlur(0)}\n            />\n            <span>to&nbsp;</span>\n            <NumberInput\n              type=\"number\"\n              min=\"1\"\n              max={maxMeasure}\n              value={inputRange[1]}\n              onChange={handleRangeChange(1)}\n              onBlur={handleRangeBlur(1)}\n            />\n\n            <StyledSelect\n              ref={selectRef}\n              value={tagName}\n              onChange={(selectedOption, actionMeta) => {\n                handleSelectChange(selectedOption, actionMeta);\n                setUnsavedChanges(true);\n              }}\n              options={allTags}\n              isClearable\n              placeholder=\"Select or create a tag\"\n              theme={selectTheme}\n              styles={selectStyles}\n              components={customComponents}\n              menuIsOpen={menuIsOpen}\n              onMenuOpen={() => setMenuIsOpen(true)}\n              onMenuClose={() => setMenuIsOpen(false)}\n              onBlur={() => setMenuIsOpen(false)}\n            />\n          </RangeInputs>\n          {error && <ErrorMessage>{error}</ErrorMessage>}\n          {tagError && <ErrorMessage>{tagError}</ErrorMessage>}\n          {!error && snippet && (\n            <>\n              <h3>Rehydrated Notes</h3>\n              <SnippetItem\n                snippet={snippet}\n                index={-1}\n                noteHeight={noteHeight}\n              />\n              <JsonDisplay onClick={copyToClipboard}>\n                {exportString}\n              </JsonDisplay>\n              <SaveButton\n                ref={saveButtonRef}\n                onClick={saveSnippet}\n                unsaved={unsavedChanges}\n                disabled={!unsavedChanges}\n              >\n                {unsavedChanges ? \"Save Snippet\" : \"Snippet Saved\"}\n              </SaveButton>\n            </>\n          )}\n        </FrozenNotesDisplay>\n\n        <SnippetListContainer>\n          <h3>Saved Snippets</h3>\n          <SnippetList\n            snippets={analysis.snippets || []}\n            noteHeight={noteHeight}\n            onSnippetClick={() => {}}\n            deleteSnippet={deleteSnippet}\n          />\n        </SnippetListContainer>\n\n        <CopyIndicator visible={copyIndicatorVisible}>\n          {phraseStartsUpdated\n            ? `phraseStarts updated for ${analysis.snippets\n                ?.filter((s) => !s.phraseStarts || s.phraseStarts.length === 0)\n                .map((s) => s.tag)\n                .filter(Boolean)\n                .join(\", \")}`\n            : \"Copied to clipboard!\"}\n        </CopyIndicator>\n      </Container>\n    </ErrorBoundary>\n  );\n};\n\nexport default FrozenNotesLayout;\n","const API_BASE = \"https://corsproxy.io/?https://gifx.co/chip\";\nconst CATALOG_PREFIX = \"https://corsproxy.io/?https://gifx.co/music/\";\nconst SOUNDFONT_URL_PATH = \"https://rawl.rocks\";\nconst MAX_VOICES = 64;\nconst ERROR_FLASH_DURATION_MS = 6000;\nconst FORMATS = [\n  \"ay\",\n  \"gbs\",\n  \"it\",\n  \"mdx\",\n  \"mid\",\n  \"miniusf\",\n  \"mod\",\n  \"nsf\",\n  \"nsfe\",\n  \"sgc\",\n  \"spc\",\n  \"s3m\",\n  \"smf\",\n  \"v2m\",\n  \"vgm\",\n  \"vgz\",\n  \"xm\",\n];\nconst SOUNDFONT_MOUNTPOINT = \"/soundfonts\";\nconst SOUNDFONTS = [\n  {\n    label: \"User SoundFonts (Drop .sf2 to add)\",\n    items: [],\n  },\n  {\n    label: \"Small Soundfonts\",\n    items: [\n      { label: \"GMGSx Plus (6.2 MB)\", value: \"gmgsx-plus.sf2\" },\n      { label: \"Roland SC-55/SCC1 (3.3 MB)\", value: \"Scc1t2.sf2\" },\n      { label: \"Yamaha DB50XG (3.9 MB)\", value: \"Yamaha DB50XG.sf2\" },\n      {\n        label: \"Gravis Ultrasound (5.9 MB)\",\n        value: \"Gravis_Ultrasound_Classic_PachSet_v1.6.sf2\",\n      },\n      { label: \"Tim GM (6 MB)\", value: \"TimGM6mb.sf2\" },\n      { label: \"Alan Chan 5MBGMGS (4.9 MB)\", value: \"5MBGMGS.SF2\" },\n      { label: \"E-mu 2MBGMGS (2.1 MB)\", value: \"2MBGMGS.SF2\" },\n      { label: \"E-mu 8MBGMGS (8.2 MB)\", value: \"8MBGMGS.SF2\" },\n    ],\n  },\n  {\n    label: \"Large Soundfonts\",\n    items: [\n      { label: \"Masquerade 55 v006 (18.4 MB)\", value: \"masquerade55v006.sf2\" },\n      { label: \"GeneralUser GS v1.471 (31.3 MB)\", value: \"generaluser.sf2\" },\n      { label: \"Chorium Revision A (28.9 MB)\", value: \"choriumreva.sf2\" },\n      { label: \"Unison (29.3 MB)\", value: \"Unison.SF2\" },\n      { label: \"Creative 28MBGM (29.7 MB)\", value: \"28MBGM.sf2\" },\n      { label: \"Musica Theoria 2 (30.5 MB)\", value: \"mustheory2.sf2\" },\n      { label: \"Personal Copy Lite (31.4 MB)\", value: \"PCLite.sf2\" },\n      { label: \"AnotherXG (31.4 MB)\", value: \"bennetng_AnotherXG_v2-1.sf2\" },\n      { label: \"NTONYX 32Mb GM Stereo (32.5 MB)\", value: \"32MbGMStereo.sf2\" },\n      { label: \"Weeds GM 3 (54.9 MB)\", value: \"weedsgm3.sf2\" },\n    ],\n  },\n  {\n    label: \"Novelty Soundfonts\",\n    items: [\n      { label: \"PC Beep (31 KB)\", value: \"pcbeep.sf2\" },\n      { label: \"Nokia 6230i (227 KB)\", value: \"Nokia_6230i_RM-72_.sf2\" },\n      {\n        label: \"Kirby's Dream Land (271 KB)\",\n        value: \"Kirby's_Dream_Land_3.sf2\",\n      },\n      {\n        label: \"Vintage Waves v2 (315 KB)\",\n        value: \"Vintage Dreams Waves v2.sf2\",\n      },\n      {\n        label: \"Setzer's SPC Soundfont (1.2 MB)\",\n        value: \"Setzer's_SPC_Soundfont.sf2\",\n      },\n      {\n        label: \"SNES GM (1.9 MB)\",\n        value: \"Super_Nintendo_Unofficial_update.sf2\",\n      },\n      { label: \"Nokia 30 (2.2 MB)\", value: \"Nokia_30.sf2\" },\n      {\n        label: \"LG Wink/Motorola ROKR (3.3 MB)\",\n        value: \"LG_Wink_Style_T310_Soundfont.sf2\",\n      },\n      {\n        label: \"Diddy Kong Racing DS (13.7 MB)\",\n        value: \"Diddy_Kong_Racing_DS_Soundfont.sf2\",\n      },\n      {\n        label: \"Regression FM v1.99g (14.4 MB)\",\n        value: \"R_FM_v1.99g-beta.sf2\",\n      },\n      {\n        label: \"Ultimate Megadrive (63.2 MB)\",\n        value: \"The Ultimate Megadrive Soundfont.sf2\",\n      },\n    ],\n  },\n  {\n    label: \"Piano Soundfonts\",\n    items: [\n      {\n        label: \"Yamaha Grand Lite v1.1 (21.8 MB)\",\n        value: \"Yamaha-Grand-Lite-v1.1.sf2\",\n      },\n      {\n        label: \"Abbey Steinway D v1.9 (40.2 MB)\",\n        value: \"Abbey-Steinway-D-v1.9.sf2\",\n      },\n      {\n        label: \"Chateau Grand Lite v1.0 (49.1 MB)\",\n        value: \"Chateau Grand Lite-v1.0.sf2\",\n      },\n      {\n        label: \"Steinway Grand v1.0 (145 MB)\",\n        value: \"Steinway Grand-SF4U-v1.sf2\",\n      },\n    ],\n  },\n];\n\n// needs to be a CommonJS module - used in node.js server\nmodule.exports = {\n  API_BASE,\n  CATALOG_PREFIX,\n  ERROR_FLASH_DURATION_MS,\n  FORMATS,\n  MAX_VOICES,\n  SOUNDFONT_MOUNTPOINT,\n  SOUNDFONT_URL_PATH,\n  SOUNDFONTS,\n};\n","import React, { useCallback, useMemo } from \"react\";\nimport styled from \"styled-components\";\nimport { Analysis, MeasuresSpan } from \"./analysis\";\nimport { AnalysisGrid } from \"./AnalysisGrid\";\nimport { getNoteRectangles as getSystemNoteRectangles } from \"./getNoteRectangles\";\nimport { ColoredNote, Note } from \"./parseMidi\";\nimport { getNoteColor } from \"./Rawl\";\nimport { MeasuresAndBeats, MidiRange } from \"./SystemLayout\";\n\ninterface EnhancedFrozenNotesProps {\n  notes: Note[][];\n  toX: (seconds: number) => number;\n  midiNumberToY: (midiNumber: number) => number;\n  maxWidth: number;\n  noteHeight: number;\n  timeRange: [number, number];\n  analysis: Analysis;\n  measuresAndBeats: MeasuresAndBeats;\n  startMeasure: number;\n  phraseStarts?: number[];\n  isPreview?: boolean;\n  hoveredColors?: string[] | null;\n}\n\nconst FrozenNotesContainer = styled.div`\n  position: relative;\n  overflow: hidden;\n`;\n\nconst HeaderStaff = styled.div`\n  position: relative;\n  height: 16px;\n  margin-bottom: 0px;\n`;\n\nconst EnhancedFrozenNotes: React.FC<EnhancedFrozenNotesProps> = ({\n  notes,\n  midiNumberToY,\n  maxWidth,\n  analysis,\n  measuresAndBeats,\n  noteHeight,\n  startMeasure,\n  toX,\n  timeRange,\n  phraseStarts,\n  isPreview = false,\n  hoveredColors,\n}) => {\n  const midiRange = useMemo(() => {\n    let min = Infinity;\n    let max = -Infinity;\n    notes.forEach((voiceNotes) => {\n      voiceNotes.forEach((note) => {\n        const midiNumber = note.note.midiNumber;\n        min = Math.min(min, midiNumber);\n        max = Math.max(max, midiNumber);\n      });\n    });\n    return [min, max] as MidiRange;\n  }, [notes]);\n\n  const height = (midiRange[1] - midiRange[0] + 2) * noteHeight;\n\n  const adjustedNotes = useMemo(() => {\n    return notes.map((voiceNotes) =>\n      voiceNotes.map((note) => ({\n        ...note,\n        color: getNoteColor(note, analysis, measuresAndBeats.measures),\n        isActive: true,\n      })),\n    );\n  }, [notes, analysis, measuresAndBeats.measures]);\n\n  const getNoteRectangles = useCallback(\n    (notes: ColoredNote[]) =>\n      getSystemNoteRectangles(\n        notes,\n        midiNumberToY,\n        noteHeight,\n        null, // handleNoteClick\n        () => {}, // handleMouseEnter\n        () => {}, // handleMouseLeave\n        toX,\n        false, // enableManualRemeasuring\n        hoveredColors,\n      ),\n    [midiNumberToY, noteHeight, toX, hoveredColors],\n  );\n\n  const dummyMeasureSelection = useMemo(\n    () => ({\n      selectedMeasure: null,\n      selectMeasure: () => {},\n      splitAtMeasure: () => {},\n      mergeAtMeasure: () => {},\n      renumberMeasure: () => {},\n    }),\n    [],\n  );\n\n  const sectionSpan: MeasuresSpan = useMemo(() => {\n    const paddingLength = startMeasure - 1;\n    const endMeasure = measuresAndBeats.measures.length - 1;\n    return [paddingLength, endMeasure];\n  }, [startMeasure, measuresAndBeats.measures.length]);\n\n  const memoizedNoteRectangles = useMemo(() => {\n    return adjustedNotes.map((voiceNotes) =>\n      getNoteRectangles(voiceNotes as ColoredNote[]),\n    );\n  }, [adjustedNotes, getNoteRectangles]);\n\n  return (\n    <FrozenNotesContainer>\n      <HeaderStaff>\n        <AnalysisGrid\n          analysis={analysis}\n          measuresAndBeats={measuresAndBeats}\n          midiNumberToY={() => 0}\n          noteHeight={16}\n          phraseStarts={phraseStarts || []}\n          midiRange={[0, 0]}\n          measureSelection={dummyMeasureSelection}\n          showHeader={true}\n          showTonalGrid={false}\n          secondsToX={toX}\n          sectionSpan={sectionSpan}\n        />\n      </HeaderStaff>\n      <div\n        style={{\n          width: `${maxWidth}px`,\n          height: `${height}px`,\n          position: \"relative\",\n          overflow: \"hidden\",\n        }}\n      >\n        <AnalysisGrid\n          analysis={analysis}\n          measuresAndBeats={measuresAndBeats}\n          midiNumberToY={midiNumberToY}\n          noteHeight={noteHeight}\n          phraseStarts={phraseStarts || []}\n          midiRange={midiRange}\n          measureSelection={dummyMeasureSelection}\n          showHeader={false}\n          showTonalGrid={true}\n          secondsToX={toX}\n          sectionSpan={sectionSpan}\n        />\n        <div\n          style={{\n            position: \"relative\",\n            height: `${height}px`,\n            width: `${maxWidth}px`,\n            overflow: \"hidden\",\n          }}\n        >\n          {memoizedNoteRectangles.map((voiceRectangles, index) => (\n            <div key={index}>{voiceRectangles}</div>\n          ))}\n        </div>\n      </div>\n    </FrozenNotesContainer>\n  );\n};\n\nexport default EnhancedFrozenNotes;\n","import * as React from \"react\";\nimport {\n  ReactNode,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { DUMMY_CALLBACK, VoiceMask } from \"../App\";\nimport { Analysis, getPhraseStarts, MeasuresSpan } from \"./analysis\";\nimport { AnalysisGrid, Cursor, MeasureSelection } from \"./AnalysisGrid\";\nimport { getNoteRectangles, MouseHandlers } from \"./getNoteRectangles\";\nimport ControlPanel, { debounce } from \"./layouts/ControlPanel\";\nimport { MeasureNumbers } from \"./layouts/MeasureNumbers\";\nimport MergedVoicesLegend from \"./layouts/MergedVoicesLegend\";\nimport { VoiceName } from \"./layouts/VoiceName\";\nimport { ColoredNote, ColoredNotesInVoices, Note } from \"./parseMidi\";\nimport { SecondsConverter, SecondsSpan, SetVoiceMask } from \"./Rawl\";\n\nexport type MeasuresAndBeats = {\n  measures: number[];\n  beats: number[];\n  ticks?: { measures: number[] };\n};\n\nconst getAverageMidiNumber = (notes: Note[]) =>\n  notes.length > 0\n    ? notes[0].isDrum\n      ? 0\n      : notes.reduce((sum, note) => sum + note.note.midiNumber, 0) /\n        notes.length\n    : Infinity;\n\nexport type MidiRange = [number, number];\n\nconst getMidiRange = (notes: Note[], span?: SecondsSpan): MidiRange => {\n  let min = +Infinity;\n  let max = -Infinity;\n  for (const note of notes) {\n    if (span && (note.span[1] < span[0] || note.span[0] > span[1])) {\n      continue;\n    }\n    const { midiNumber, relativeNumber } = note.note;\n    const number = relativeNumber === undefined ? midiNumber : relativeNumber;\n    min = Math.min(min, number);\n    max = Math.max(max, number);\n  }\n  return [min, max];\n};\n\nexport type ScrollInfo = {\n  left: number;\n  right: number;\n};\n\nexport const Voice: React.FC<{\n  notes: ColoredNote[];\n  measuresAndBeats: MeasuresAndBeats;\n  analysis: Analysis;\n  cursor: ReactNode;\n  phraseStarts: number[];\n  mouseHandlers: MouseHandlers;\n  measureSelection: MeasureSelection;\n  scrollInfo: ScrollInfo;\n  voiceName: string;\n  setVoiceMask: SetVoiceMask;\n  voiceIndex: number;\n  voiceMask: VoiceMask;\n  showTonalGrid?: boolean;\n  noteHeight: number;\n  secondsToX: SecondsConverter;\n  xToSeconds: SecondsConverter;\n  sectionSpan?: MeasuresSpan;\n  enableManualRemeasuring: boolean;\n  hoveredColors: string[] | null;\n}> = ({\n  notes,\n  measuresAndBeats,\n  analysis,\n  mouseHandlers,\n  measureSelection,\n  cursor,\n  phraseStarts,\n  scrollInfo,\n  voiceName,\n  voiceIndex = -1,\n  setVoiceMask = (mask) => {},\n  voiceMask,\n  showTonalGrid = true,\n  noteHeight,\n  secondsToX,\n  xToSeconds,\n  sectionSpan,\n  enableManualRemeasuring,\n  hoveredColors,\n}) => {\n  // To restore it, we need to lock the calculation of frozenRange and frozenHeight\n  // and don't change it after loading the notes.\n\n  const localMidiRange = useMemo(\n    () =>\n      getMidiRange(notes, [\n        xToSeconds(scrollInfo.left),\n        xToSeconds(scrollInfo.right),\n      ]),\n    [notes, scrollInfo, xToSeconds],\n  );\n  const midiRange = useMemo(() => getMidiRange(notes), [notes]);\n\n  const { systemClickHandler, handleNoteClick, handleMouseEnter } =\n    mouseHandlers;\n\n  const height =\n    (midiRange[0] === +Infinity ? 0 : midiRange[1] - midiRange[0] + 1) *\n    noteHeight;\n\n  const midiNumberToY = useCallback(\n    (midiNumber) => height - (midiNumber - midiRange[0] + 1) * noteHeight,\n    [height, midiRange, noteHeight],\n  );\n\n  // The frozenHeight machinery was used when I experimented with smart\n  // collapse/expand of every Voice relative to its current range on a current screen.\n  // I'm not sure it's used anymore.\n  const { noteRectangles, frozenHeight, frozenMidiRange } = useMemo(\n    () => ({\n      noteRectangles: getNoteRectangles(\n        notes,\n        midiNumberToY,\n        noteHeight,\n        handleNoteClick,\n        handleMouseEnter,\n        DUMMY_CALLBACK,\n        secondsToX,\n        enableManualRemeasuring,\n        hoveredColors,\n      ),\n      frozenHeight: height,\n      frozenMidiRange: midiRange,\n    }),\n    [\n      notes,\n      analysis,\n      handleNoteClick,\n      handleMouseEnter,\n      voiceMask,\n      noteHeight,\n      secondsToX,\n      enableManualRemeasuring,\n      hoveredColors,\n    ],\n  );\n\n  const { measures } = measuresAndBeats;\n  // TODO: make smarter once Stacked is implemented\n  const hasVisibleNotes =\n    voiceMask[voiceIndex] &&\n    (!!sectionSpan || localMidiRange[1] >= localMidiRange[0]);\n\n  return (\n    <div\n      key={`voice_${voiceIndex}_${measuresAndBeats.measures.at(-1)}_parent`}\n      style={{\n        width: secondsToX(measures[sectionSpan?.[1] ?? measures.length - 1]),\n        height: hasVisibleNotes ? height : 1,\n        position: \"relative\",\n        marginTop: hasVisibleNotes ? \"15px\" : 0,\n        marginBottom: hasVisibleNotes ? \"0px\" : 0,\n        marginLeft: \"0px\",\n        // borderBottom: hasVisibleNotes ? \"1px solid #888\" : \"\",\n        zIndex: 1,\n        backgroundColor: \"black\",\n      }}\n      onClick={(e) => systemClickHandler(e, xToSeconds)}\n    >\n      <div\n        style={{\n          position: \"relative\",\n          top:\n            height -\n            frozenHeight +\n            (midiRange[0] - frozenMidiRange[0]) * noteHeight,\n        }}\n      >\n        {voiceMask[voiceIndex] ? noteRectangles : null}\n      </div>\n      {hasVisibleNotes ? (\n        <AnalysisGrid\n          analysis={analysis}\n          measuresAndBeats={measuresAndBeats}\n          midiNumberToY={midiNumberToY}\n          noteHeight={noteHeight}\n          measureSelection={measureSelection}\n          phraseStarts={phraseStarts}\n          midiRange={midiRange}\n          showHeader={false}\n          showTonalGrid={showTonalGrid && !notes[0]?.isDrum}\n          secondsToX={secondsToX}\n          sectionSpan={sectionSpan}\n        />\n      ) : null}\n      {cursor}\n      {hasVisibleNotes &&\n      voiceMask.length > 1 &&\n      (sectionSpan?.[0] ?? 0) === 0 &&\n      voiceName ? (\n        <VoiceName\n          voiceName={voiceName}\n          voiceMask={voiceMask}\n          setVoiceMask={setVoiceMask}\n          voiceIndex={voiceIndex}\n          scrollInfo={scrollInfo}\n          secondsToX={secondsToX}\n          midiNumberToY={midiNumberToY}\n        />\n      ) : null}\n    </div>\n  );\n};\n\ntype Section = {\n  sectionSpan: MeasuresSpan;\n  secondsToX: SecondsConverter;\n  xToSeconds: SecondsConverter;\n  voices: { voiceIndex: number; notes: ColoredNote[] }[];\n};\n\nexport type SystemLayoutProps = {\n  notes: ColoredNotesInVoices;\n  voiceNames: string[];\n  voiceMask: VoiceMask;\n  measuresAndBeats: MeasuresAndBeats;\n  positionSeconds: number;\n  analysis: Analysis;\n  mouseHandlers: MouseHandlers;\n  measureSelection: MeasureSelection;\n  setVoiceMask: SetVoiceMask;\n  frozenNotes: ColoredNote[][];\n  enableManualRemeasuring?: boolean;\n  measureStart?: number;\n  isHiddenRoute?: boolean;\n  slug?: string;\n  currentTonic: number;\n  togglePause?: () => void;\n  seek?: (ms: number) => void;\n  hoveredColors: string[] | null;\n  setHoveredColors: (colors: string[] | null) => void;\n};\n\nexport const StackedSystemLayout: React.FC<\n  SystemLayoutProps & { measureStart?: number; isEmbedded?: boolean }\n> = ({\n  notes,\n  voiceNames,\n  voiceMask,\n  measuresAndBeats,\n  positionSeconds,\n  analysis,\n  mouseHandlers,\n  measureSelection,\n  setVoiceMask,\n  enableManualRemeasuring = false,\n  measureStart,\n  isEmbedded = false,\n  isHiddenRoute = false,\n  slug,\n  currentTonic,\n  togglePause,\n  seek,\n  hoveredColors,\n  setHoveredColors,\n}) => {\n  const [noteHeight, setNoteHeight] = useState<number>(3);\n  const [secondWidth, setSecondWidth] = useState<number>(40);\n  const setSecondWidthCalled = useRef(false);\n\n  useEffect(() => {\n    setSecondWidthCalled.current = false;\n  }, [secondWidth]);\n\n  const prevPositionSeconds = useRef<number>(0);\n  useEffect(() => {\n    prevPositionSeconds.current = positionSeconds;\n  }, [positionSeconds]);\n\n  const voicesSortedByAverageMidiNumber = useMemo(\n    () =>\n      notes\n        .map((voice, voiceIndex) => ({\n          average: getAverageMidiNumber(voice),\n          voiceIndex,\n        }))\n        .sort((a, b) => b.average - a.average)\n        .map(({ voiceIndex }) => ({\n          voiceIndex,\n          notes: notes[voiceIndex],\n        })),\n    [notes],\n  );\n\n  const phraseStarts = useMemo(\n    () => getPhraseStarts(analysis, measuresAndBeats.measures.length),\n    [analysis, measuresAndBeats],\n  );\n\n  const sectionSpans = useMemo(() => {\n    return (analysis.sections ?? [0]).map((sectionStartInPhrases, index) => {\n      const { measures } = measuresAndBeats;\n      const start = phraseStarts[sectionStartInPhrases] - 1;\n      const end =\n        (index + 1 < (analysis.sections ?? [0]).length\n          ? phraseStarts[(analysis.sections ?? [0])[index + 1]]\n          : measures.length) - 1;\n      return [start, end] as MeasuresSpan;\n    });\n  }, [analysis.sections, measuresAndBeats, phraseStarts]);\n\n  const optimalSecondWidth = useMemo(() => {\n    const viewportWidth = window.innerWidth;\n    const targetWidthPercentage = 0.92;\n    const targetWidth = viewportWidth * targetWidthPercentage;\n\n    const annotatedSections = sectionSpans.filter(\n      (span) => span[1] - span[0] < 25,\n    );\n\n    const longestSection = annotatedSections.reduce((longest, current) => {\n      const currentLength =\n        measuresAndBeats.measures[current[1]] -\n        measuresAndBeats.measures[current[0]];\n      const longestLength =\n        measuresAndBeats.measures[longest[1]] -\n        measuresAndBeats.measures[longest[0]];\n      return currentLength > longestLength ? current : longest;\n    }, sectionSpans[0]);\n\n    if (longestSection && annotatedSections.length >= 1) {\n      const longestSectionLength =\n        measuresAndBeats.measures[longestSection[1]] -\n        measuresAndBeats.measures[longestSection[0]];\n      return targetWidth / longestSectionLength;\n    }\n    return secondWidth;\n  }, [notes]); // Only recalculate when notes change\n\n  useEffect(() => {\n    setSecondWidth(optimalSecondWidth);\n  }, [optimalSecondWidth]);\n\n  const sections: Section[] = useMemo(() => {\n    return sectionSpans.map((sectionSpan) => {\n      const secondsToX = (seconds) =>\n        (seconds - measuresAndBeats.measures[sectionSpan[0]]) * secondWidth;\n      const xToSeconds = (x) =>\n        x / secondWidth + measuresAndBeats.measures[sectionSpan[0]];\n      return {\n        sectionSpan,\n        secondsToX,\n        xToSeconds,\n        voices: voicesSortedByAverageMidiNumber.map(\n          ({ voiceIndex, notes }) => ({\n            voiceIndex,\n            notes: notes.filter(\n              (note) =>\n                note.span[1] >= measuresAndBeats.measures[sectionSpan[0]] &&\n                note.span[0] + (note.isDrum ? -0.01 : 1e-2) <\n                  measuresAndBeats.measures[sectionSpan[1]],\n            ),\n          }),\n        ),\n      };\n    });\n  }, [\n    sectionSpans,\n    measuresAndBeats,\n    secondWidth,\n    voicesSortedByAverageMidiNumber,\n  ]);\n\n  const parentRef = useRef(null);\n  const sectionRefs = useRef<(HTMLDivElement | null)[]>([]);\n\n  const [scrollInfo, setScrollInfo] = useState<ScrollInfo>({\n    left: -1,\n    right: 100000,\n  });\n\n  const debouncedScroll = useCallback(\n    debounce(\n      (left, right) =>\n        setScrollInfo({\n          left,\n          right,\n        }),\n      50,\n    ),\n    [],\n  );\n\n  const handleScroll = () => {\n    const { scrollLeft, offsetWidth } = parentRef.current;\n    const scrollRight = scrollLeft + offsetWidth;\n\n    debouncedScroll(scrollLeft, scrollRight);\n  };\n\n  useEffect(() => {\n    const parentDiv = parentRef.current;\n    if (parentDiv) {\n      parentDiv.addEventListener(\"scroll\", handleScroll);\n      handleScroll();\n    }\n\n    return () => {\n      if (parentDiv) {\n        parentDiv.removeEventListener(\"scroll\", handleScroll);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (\n      measureStart !== undefined &&\n      parentRef.current &&\n      sectionRefs.current.length > 0\n    ) {\n      const sectionIndex = sections.findIndex(\n        ({ sectionSpan }) =>\n          measureStart >= sectionSpan[0] && measureStart <= sectionSpan[1],\n      );\n\n      if (sectionIndex !== -1) {\n        const sectionElement = sectionRefs.current[sectionIndex];\n        if (sectionElement) {\n          sectionElement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n        }\n      }\n    }\n  }, [measureStart, sections]);\n\n  return (\n    <>\n      <div\n        key=\"innerLeftPanel\"\n        style={{\n          margin: 0,\n          padding: 0,\n          position: \"relative\",\n          overflowX: \"scroll\",\n          overflowY: \"scroll\",\n          width: \"100%\",\n          backgroundColor: \"black\",\n        }}\n        ref={parentRef}\n        className=\"SplitLayout\"\n      >\n        {sections.map(\n          ({ sectionSpan, secondsToX, xToSeconds, voices }, order) => (\n            <div\n              style={{ paddingTop: 10 + noteHeight * 5 }}\n              key={order}\n              ref={(el) => (sectionRefs.current[order] = el)}\n            >\n              <MeasureNumbers\n                measuresAndBeats={measuresAndBeats}\n                analysis={analysis}\n                phraseStarts={phraseStarts}\n                measureSelection={measureSelection}\n                noteHeight={noteHeight}\n                secondsToX={secondsToX}\n                xToSeconds={xToSeconds}\n                sectionSpan={sectionSpan}\n                isHiddenRoute={isHiddenRoute}\n                mouseHandlers={mouseHandlers}\n                togglePause={togglePause}\n                seek={seek}\n              />\n              {voices.map(({ notes, voiceIndex }) => (\n                <div\n                  key={voiceIndex}\n                  style={{ display: \"flex\", flexDirection: \"row\" }}\n                >\n                  <Voice\n                    voiceName={voiceNames[voiceIndex]}\n                    notes={notes}\n                    measuresAndBeats={measuresAndBeats}\n                    analysis={analysis}\n                    mouseHandlers={mouseHandlers}\n                    measureSelection={measureSelection}\n                    cursor={\n                      positionSeconds <\n                        measuresAndBeats.measures[sectionSpan[1]] && (\n                        <Cursor\n                          key={\"cursor\"}\n                          style={{\n                            transition:\n                              !setSecondWidthCalled.current &&\n                              Math.abs(\n                                prevPositionSeconds.current - positionSeconds,\n                              ) < 2\n                                ? \"left 0.37s linear\"\n                                : \"\",\n                            left: secondsToX(positionSeconds),\n                          }}\n                        />\n                      )\n                    }\n                    phraseStarts={phraseStarts}\n                    scrollInfo={scrollInfo}\n                    voiceMask={voiceMask}\n                    setVoiceMask={setVoiceMask}\n                    voiceIndex={voiceIndex}\n                    noteHeight={noteHeight}\n                    secondsToX={secondsToX}\n                    xToSeconds={xToSeconds}\n                    sectionSpan={sectionSpan}\n                    enableManualRemeasuring={enableManualRemeasuring}\n                    hoveredColors={hoveredColors}\n                  />\n                </div>\n              ))}\n            </div>\n          ),\n        )}\n\n        <div style={{ height: 100 }} />\n\n        {!isEmbedded && (\n          <ControlPanel\n            noteHeight={noteHeight}\n            setNoteHeight={setNoteHeight}\n            secondWidth={secondWidth}\n            setSecondWidth={setSecondWidth}\n            slug={slug}\n            currentTonic={currentTonic}\n            setHoveredColors={setHoveredColors}\n          />\n        )}\n      </div>\n    </>\n  );\n};\n\nconst MERGED_VOICE_NAMES = [\"merged\"];\nconst MERGED_VOICE_MASK = [true];\n\nexport const MergedSystemLayout: React.FC<\n  SystemLayoutProps & { isEmbedded?: boolean }\n> = (props) => {\n  const {\n    notes,\n    voiceNames,\n    voiceMask,\n    setVoiceMask,\n    enableManualRemeasuring = false,\n    isEmbedded = false,\n    slug,\n    currentTonic,\n    hoveredColors,\n    setHoveredColors,\n  } = props;\n\n  const flattenedNotes = useMemo(\n    () => [\n      notes\n        .filter((notes) => (notes && notes[0].isActive) || !notes[0].isDrum)\n        .flat(),\n    ],\n    [notes],\n  );\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <StackedSystemLayout\n        {...props}\n        notes={flattenedNotes}\n        voiceNames={MERGED_VOICE_NAMES}\n        voiceMask={MERGED_VOICE_MASK}\n        enableManualRemeasuring={enableManualRemeasuring}\n        isEmbedded={isEmbedded}\n        slug={slug}\n        hoveredColors={hoveredColors}\n        setHoveredColors={setHoveredColors}\n      />\n      {!isEmbedded && (\n        <MergedVoicesLegend\n          voiceNames={voiceNames}\n          voiceMask={voiceMask}\n          setVoiceMask={setVoiceMask}\n          slug={slug}\n          currentTonic={currentTonic}\n        />\n      )}\n    </div>\n  );\n};\n","import clamp from \"lodash/clamp\";\nimport React, { useCallback, useContext, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { StyledRangeInput } from \"../../Slider\";\nimport { FoldablePianoLegend } from \"../legends/PianoLegend\";\n\nconst TinyLetter = styled.span`\n  font-size: 10px;\n  color: #fff;\n`;\n\nexport const debounce = (func, delay) => {\n  let timer;\n  let frameId;\n\n  return (...args) => {\n    clearTimeout(timer);\n    cancelAnimationFrame(frameId);\n\n    timer = setTimeout(() => {\n      frameId = requestAnimationFrame(() => {\n        func.apply(this, args);\n      });\n    }, delay);\n  };\n};\n\ntype ControlPanelProps = {\n  noteHeight: number;\n  setNoteHeight: (height: number) => void;\n  secondWidth: number;\n  setSecondWidth: (width: number) => void;\n  slug?: string;\n  currentTonic?: number;\n  setHoveredColors: (colors: string[] | null) => void;\n};\n\nconst ControlPanel: React.FC<ControlPanelProps> = ({\n  noteHeight,\n  setNoteHeight,\n  secondWidth,\n  setSecondWidth,\n  slug,\n  currentTonic,\n  setHoveredColors,\n}) => {\n  const { registerKeyboardHandler, unregisterKeyboardHandler } =\n    useContext(AppContext);\n\n  const debounceSetNoteHeight = useCallback(debounce(setNoteHeight, 50), []);\n  const debounceSetSecondWidth = useCallback(debounce(setSecondWidth, 50), []);\n\n  const handleSecondWidthChange = useCallback(\n    (newWidth: number) => {\n      setSecondWidth(clamp(newWidth, 2, 150));\n    },\n    [setSecondWidth],\n  );\n\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      switch (e.key) {\n        case \"a\":\n          handleSecondWidthChange(secondWidth - 2);\n          break;\n        case \"d\":\n          handleSecondWidthChange(secondWidth + 2);\n          break;\n        case \"s\":\n          debounceSetNoteHeight(Math.min(noteHeight + 0.25, 10));\n          break;\n        case \"w\":\n          debounceSetNoteHeight(Math.max(noteHeight - 0.25, 1));\n          break;\n      }\n    };\n\n    registerKeyboardHandler(\"controlPanel\", handleKeyPress);\n\n    return () => {\n      unregisterKeyboardHandler(\"controlPanel\");\n    };\n  }, [\n    registerKeyboardHandler,\n    unregisterKeyboardHandler,\n    secondWidth,\n    handleSecondWidthChange,\n    noteHeight,\n    debounceSetNoteHeight,\n  ]);\n\n  return (\n    <>\n      <FoldablePianoLegend\n        slug={slug}\n        currentTonic={currentTonic}\n        setHoveredColors={setHoveredColors}\n      />\n      <div\n        style={{\n          position: \"fixed\",\n          bottom: 221,\n          right: -131,\n          zIndex: 100000,\n        }}\n      >\n        <span style={{ position: \"relative\", top: -3, left: 12 }}>\n          <TinyLetter>w</TinyLetter>\n        </span>\n        <span\n          style={{\n            position: \"relative\",\n            top: 169,\n            left: 6,\n          }}\n        >\n          <TinyLetter>s</TinyLetter>\n        </span>\n        <StyledRangeInput\n          min=\"1\"\n          max=\"10\"\n          value={noteHeight}\n          onChange={(e) => debounceSetNoteHeight(parseInt(e.target.value, 10))}\n          style={{\n            transform: \"rotate(90deg)\",\n            transformOrigin: \"bottom left\",\n            width: 160,\n          }}\n        />\n      </div>\n      <div\n        style={{\n          position: \"fixed\",\n          bottom: 35,\n          right: 33,\n          zIndex: 100000,\n        }}\n      >\n        <span style={{ position: \"relative\", top: 0, left: 0 }}>\n          <TinyLetter>a</TinyLetter>\n        </span>\n        <StyledRangeInput\n          min=\"2\"\n          max=\"150\"\n          value={secondWidth}\n          onChange={(e) => debounceSetSecondWidth(parseInt(e.target.value, 10))}\n          style={{\n            width: 240,\n          }}\n        />\n        <span style={{ position: \"relative\", top: 0, left: 0 }}>\n          <TinyLetter>d</TinyLetter>\n        </span>\n      </div>\n    </>\n  );\n};\n\nexport default ControlPanel;\n","import { PitchClass } from \"../analysis\";\n\nconst CHORD_TYPES: { [key: string]: string } = {\n  \"4 3\": \"\",\n  \"3 4\": \"m\",\n  \"3 4 3\": \"m7\",\n  \"4 3 3\": \"7\",\n  \"4 3 4\": \"maj7\",\n  \"3 3 4\": \"7\",\n};\n\nconst PITCH_CLASS_TO_GUITAR_LETTER = {\n  0: \"C\",\n  1: \"C#\",\n  2: \"D\",\n  3: \"D#\",\n  4: \"E\",\n  5: \"F\",\n  6: \"F#\",\n  7: \"G\",\n  8: \"G#\",\n  9: \"A\",\n  10: \"A#\",\n  11: \"B\",\n};\n\nexport const convertChordToGuitarChord = (\n  absoluteRoot: PitchClass,\n  chordType: string,\n): string | null => {\n  if (chordType in CHORD_TYPES) {\n    return `${PITCH_CLASS_TO_GUITAR_LETTER[absoluteRoot]}${CHORD_TYPES[chordType]}`;\n  }\n  return null;\n};\n","import * as React from \"react\";\nimport { useContext } from \"react\";\nimport { AppContext } from \"../../AppContext\";\nimport {\n  Analysis,\n  MeasuresSpan,\n  Snippet,\n  filterSnippetsByAccess,\n} from \"../analysis\";\nimport { AnalysisGrid, MeasureSelection } from \"../AnalysisGrid\";\nimport EXPLANATIONS from \"../corpora/explanations\";\nimport { MouseHandlers } from \"../getNoteRectangles\";\nimport { SecondsConverter } from \"../Rawl\";\nimport { SnippetLink } from \"../snippets/SnippetLink\";\nimport { MeasuresAndBeats } from \"../SystemLayout\";\n\nconst InlineSnippets: React.FC<{\n  measuresAndBeats: MeasuresAndBeats;\n  snippets: Snippet[];\n  secondsToX: SecondsConverter;\n  sectionSpan?: MeasuresSpan;\n  analysis: Analysis;\n  togglePause?: () => void;\n  seek?: (ms: number) => void;\n}> = ({\n  measuresAndBeats,\n  snippets,\n  secondsToX,\n  sectionSpan,\n  analysis,\n  togglePause,\n  seek,\n}) => {\n  const appContext = useContext(AppContext);\n  const { setHoveredMeasuresSpan } = appContext;\n  const [hoveredSnippetIndex, setHoveredSnippetIndex] = React.useState<\n    string | null\n  >(null);\n\n  const filteredSnippets = React.useMemo(() => {\n    return filterSnippetsByAccess(snippets);\n  }, [snippets]);\n\n  const [groupedItems, setGroupedItems] = React.useState<\n    Record<\n      number,\n      Array<{\n        type: \"snippet\" | \"formSection\" | \"explanation\";\n        content: any;\n        sourceSnippet?: Snippet;\n      }>\n    >\n  >({});\n  const itemRefs = React.useRef<(HTMLDivElement | null)[]>([]);\n\n  React.useEffect(() => {\n    // Group snippets, formSections, and explanations by measure\n    const grouped = {} as Record<\n      number,\n      Array<{\n        type: \"snippet\" | \"formSection\" | \"explanation\";\n        content: any;\n        sourceSnippet?: Snippet;\n      }>\n    >;\n\n    // Add formSections first\n    if (analysis.form) {\n      Object.entries(analysis.form).forEach(([measure, section]) => {\n        const measureNum = parseInt(measure);\n        if (!grouped[measureNum]) {\n          grouped[measureNum] = [];\n        }\n        grouped[measureNum].push({ type: \"formSection\", content: section });\n      });\n    }\n\n    // Add snippets and their explanations\n    filteredSnippets.forEach((snippet) => {\n      const measureStart = snippet.measuresSpan[0];\n      if (!grouped[measureStart]) {\n        grouped[measureStart] = [];\n      }\n      grouped[measureStart].push({ type: \"snippet\", content: snippet });\n\n      // If this snippet is hovered and has an explanation, add it\n      if (\n        hoveredSnippetIndex === `${measureStart}-${snippet.tag}` &&\n        EXPLANATIONS[snippet.tag]\n      ) {\n        grouped[measureStart].push({\n          type: \"explanation\",\n          content: EXPLANATIONS[snippet.tag],\n          sourceSnippet: snippet,\n        });\n      }\n    });\n\n    setGroupedItems(grouped);\n  }, [filteredSnippets, analysis.form, hoveredSnippetIndex]);\n\n  React.useEffect(() => {\n    const checkOverlaps = () => {\n      let prevRight = -Infinity;\n      let prevIndex = -1;\n\n      itemRefs.current.forEach((ref, index) => {\n        if (ref) {\n          const rect = ref.getBoundingClientRect();\n          if (rect.left < prevRight) {\n            // Overlap detected\n            const prevMeasure = parseInt(Object.keys(groupedItems)[prevIndex]);\n            const currentMeasure = parseInt(Object.keys(groupedItems)[index]);\n\n            setGroupedItems((prev) => {\n              const updated = { ...prev };\n              updated[prevMeasure] = [\n                ...updated[prevMeasure],\n                ...updated[currentMeasure],\n              ];\n              delete updated[currentMeasure];\n              return updated;\n            });\n          } else {\n            prevRight = rect.right;\n            prevIndex = index;\n          }\n        }\n      });\n    };\n\n    const timeoutId = setTimeout(checkOverlaps, 100);\n    return () => clearTimeout(timeoutId);\n  }, [groupedItems]);\n\n  return (\n    <>\n      {Object.entries(groupedItems).map(([measureStart, items], groupIndex) => {\n        const start = parseInt(measureStart);\n        if (\n          sectionSpan &&\n          (start <= sectionSpan[0] || start > sectionSpan[1])\n        ) {\n          return null;\n        }\n        const left = secondsToX(measuresAndBeats.measures[start - 1]);\n\n        return (\n          <div\n            key={start}\n            ref={(el) => (itemRefs.current[groupIndex] = el)}\n            style={{\n              position: \"absolute\",\n              top: \"-20px\",\n              left: `${left}px`,\n              textAlign: \"left\",\n              color: \"#777\",\n              fontSize: \"11px\",\n              display: \"flex\",\n              flexDirection: \"row\",\n              flexWrap: \"nowrap\",\n            }}\n          >\n            {items.map((item, index) => {\n              if (item.type === \"formSection\") {\n                return (\n                  <div\n                    key={`form_${index}`}\n                    style={{\n                      color: \"#bbb\",\n                      userSelect: \"none\",\n                      marginRight: \"10px\",\n                      fontSize: \"1.2em\",\n                      position: \"relative\",\n                      top: \"5px\",\n                      cursor: \"pointer\",\n                      transition: \"color 0.2s ease\",\n                    }}\n                    onClick={(e) => {\n                      if (seek && togglePause) {\n                        const seekTime =\n                          measuresAndBeats.measures[start - 1] * 1000 - 1000;\n                        seek(seekTime);\n                        // togglePause();\n                        e.stopPropagation();\n                      }\n                    }}\n                    onMouseEnter={(e) => {\n                      e.currentTarget.style.color = \"#fff\";\n                    }}\n                    onMouseLeave={(e) => {\n                      e.currentTarget.style.color = \"#bbb\";\n                    }}\n                  >\n                    {item.content}\n                  </div>\n                );\n              } else if (item.type === \"explanation\") {\n                return (\n                  <div\n                    key={`explanation_${index}`}\n                    style={{\n                      color: \"#fff\",\n                      marginRight: \"10px\",\n                      whiteSpace: \"nowrap\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                    }}\n                  >\n                     {item.content}\n                  </div>\n                );\n              } else {\n                const snippet = item.content;\n                const [chapter, topic] = snippet.tag.split(\":\");\n                const snippetKey = `${measureStart}-${snippet.tag}`;\n\n                return (\n                  <div style={{ marginRight: \"10px\" }}>\n                    <SnippetLink\n                      key={`snippet_${index}`}\n                      chapter={chapter}\n                      topic={topic}\n                      onMouseEnter={() => {\n                        setHoveredMeasuresSpan(snippet.measuresSpan);\n                        setHoveredSnippetIndex(snippetKey);\n                      }}\n                      onMouseLeave={() => {\n                        setHoveredMeasuresSpan(null);\n                        setHoveredSnippetIndex(null);\n                      }}\n                    />\n                  </div>\n                );\n              }\n            })}\n          </div>\n        );\n      })}\n    </>\n  );\n};\n\nexport const MeasureNumbers: React.FC<{\n  measuresAndBeats: MeasuresAndBeats;\n  analysis: Analysis;\n  phraseStarts: number[];\n  measureSelection: MeasureSelection;\n  noteHeight: number;\n  secondsToX: SecondsConverter;\n  xToSeconds: SecondsConverter;\n  sectionSpan?: MeasuresSpan;\n  isHiddenRoute?: boolean;\n  mouseHandlers: MouseHandlers;\n  togglePause?: () => void;\n  seek?: (ms: number) => void;\n}> = ({\n  measuresAndBeats,\n  analysis,\n  phraseStarts,\n  measureSelection,\n  noteHeight,\n  secondsToX,\n  xToSeconds,\n  sectionSpan,\n  isHiddenRoute = false,\n  mouseHandlers,\n  togglePause,\n  seek,\n}) => {\n  const { systemClickHandler } = mouseHandlers;\n\n  return (\n    <div\n      key=\"measure_header\"\n      style={{\n        width:\n          secondsToX(\n            Math.max(\n              measuresAndBeats.measures.at(-1),\n              measuresAndBeats.beats.at(-1),\n            ),\n          ) + 300,\n        height: 16,\n        marginBottom: \"-15px\",\n        marginLeft: \"0px\",\n        zIndex: 90000,\n        position: sectionSpan ? \"relative\" : \"sticky\",\n        top: 0,\n      }}\n      onClick={(e) => systemClickHandler(e, xToSeconds)}\n    >\n      {!isHiddenRoute && (\n        <InlineSnippets\n          measuresAndBeats={measuresAndBeats}\n          snippets={analysis.snippets || []}\n          secondsToX={secondsToX}\n          sectionSpan={sectionSpan}\n          analysis={analysis}\n          togglePause={togglePause}\n          seek={seek}\n        />\n      )}\n      <AnalysisGrid\n        analysis={analysis}\n        measuresAndBeats={measuresAndBeats}\n        midiNumberToY={() => 0}\n        noteHeight={noteHeight}\n        measureSelection={measureSelection}\n        phraseStarts={phraseStarts}\n        midiRange={[0, 0]}\n        showHeader={true}\n        showTonalGrid={false}\n        secondsToX={secondsToX}\n        sectionSpan={sectionSpan}\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useLocalStorage } from \"usehooks-ts\";\nimport { SongNarrative } from \"../SongNarrative\";\n\nexport const FORCED_PANNING_LABEL = \"\";\n\ntype MergedVoicesLegendProps = {\n  voiceNames: string[];\n  voiceMask: boolean[];\n  setVoiceMask: (mask: boolean[]) => void;\n  onForcedPanningChange?: (enabled: boolean) => void;\n  slug: string;\n  currentTonic?: number;\n};\n\nconst MergedVoicesLegend: React.FC<MergedVoicesLegendProps> = ({\n  voiceNames,\n  voiceMask,\n  setVoiceMask,\n  onForcedPanningChange,\n  slug,\n  currentTonic,\n}) => {\n  const [forcedPanning, setForcedPanning] = useLocalStorage(\n    \"forcedPanning\",\n    false,\n  );\n  const isSingleActive = voiceMask.filter((voice) => voice).length === 1;\n\n  const handlePanningToggle = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.checked;\n    setForcedPanning(newValue);\n    onForcedPanningChange?.(newValue);\n    window.location.reload();\n  };\n\n  return (\n    voiceNames.length > 1 && (\n      <div\n        style={{\n          position: \"fixed\",\n          top: 20,\n          right: 0,\n          zIndex: 90000,\n          backgroundColor: \"transparent\",\n          padding: 10,\n        }}\n      >\n        <div\n          style={{\n            marginBottom: 10,\n            borderBottom: \"0.5px solid #333\",\n            paddingBottom: 5,\n          }}\n        >\n          <input\n            type=\"checkbox\"\n            id=\"forcedPanning\"\n            checked={forcedPanning}\n            onChange={handlePanningToggle}\n          />\n          <label\n            htmlFor=\"forcedPanning\"\n            style={{\n              margin: \"0px 0px 0px 0px\",\n              height: 11,\n              display: \"inline\",\n            }}\n          >\n            {FORCED_PANNING_LABEL}\n          </label>\n        </div>\n        {voiceNames.map((voiceName, voiceIndex) => (\n          <div key={voiceIndex}>\n            <input\n              title=\"active\"\n              type=\"checkbox\"\n              onChange={(e) => {\n                e.stopPropagation();\n                let newVoiceMask = voiceMask.map((value, i) =>\n                  i === voiceIndex ? !value : value,\n                );\n                if (newVoiceMask.filter((voice) => voice).length === 0) {\n                  newVoiceMask = voiceMask.map(() => true);\n                }\n                setVoiceMask(newVoiceMask);\n              }}\n              checked={voiceMask[voiceIndex]}\n              style={{\n                margin: \"0px 0px 0px 17px\",\n                height: 11,\n                display: \"inline\",\n              }}\n            />{\" \"}\n            <span\n              style={{\n                cursor: \"pointer\",\n                userSelect: \"none\",\n              }}\n              onClick={(e) => {\n                e.stopPropagation();\n                isSingleActive && voiceMask[voiceIndex]\n                  ? setVoiceMask(voiceMask.map(() => true))\n                  : setVoiceMask(voiceMask.map((_, i) => i === voiceIndex));\n              }}\n            >\n              <span\n                className={`voiceShape-${voiceIndex}`}\n                style={{\n                  display: \"inline-block\",\n                  backgroundColor: voiceMask[voiceIndex] ? \"white\" : \"black\",\n                  padding: \"0px 6px\",\n                  fontSize: \"12px\",\n                  marginRight: 5,\n                  verticalAlign: \"middle\",\n                  color: voiceMask[voiceIndex] ? \"black\" : \"white\",\n                }}\n              >\n                {voiceName}\n              </span>\n            </span>\n          </div>\n        ))}\n        <div style={{ position: \"relative\" }}>\n          <SongNarrative slug={slug} currentTonic={currentTonic} />\n        </div>\n      </div>\n    )\n  );\n};\n\nexport default MergedVoicesLegend;\n","import { faQuoteRight } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Cite from \"citation-js\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { CITES } from \"./cites\";\n\nconst CitationContainer = styled.div`\n  position: relative;\n  display: inline-block;\n  width: 12px;\n`;\n\nconst CitationIcon = styled.span<{ hasUrl?: boolean }>`\n  position: relative;\n  left: -12px;\n  top: -8px;\n  cursor: pointer;\n  color: #666;\n  margin-left: 8px;\n\n  &:hover {\n    color: #999;\n  }\n`;\n\nconst CitationPopup = styled.div<{ position: \"right\" | \"below-left\" }>`\n  position: absolute;\n  ${(props) =>\n    props.position === \"right\"\n      ? `\n    left: calc(100% + 12px);\n    top: 50%;\n    transform: translateY(-50%);\n  `\n      : `\n    right: -12px;\n    top: calc(100% + 12px);\n    transform: none;\n  `}\n  background: rgba(0, 0, 0, 0.95);\n  padding: 20px;\n  border-radius: 8px;\n  border: 1px solid #444;\n  width: 300px;\n  color: #ddd;\n  font-size: 14px;\n  z-index: 1000;\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    ${(props) =>\n      props.position === \"right\"\n        ? `\n      left: -6px;\n      top: 50%;\n      transform: translateY(-50%);\n      border-right: 6px solid #444;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-left: none;\n    `\n        : `\n      top: -6px;\n      right: 12px;\n      transform: none;\n      border-bottom: 6px solid #444;\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-top: none;\n    `}\n    width: 0;\n    height: 0;\n  }\n`;\n\ninterface CitationProps {\n  citeKey: keyof typeof CITES;\n}\n\nexport const Citation: React.FC<CitationProps> = ({ citeKey }) => {\n  const [showCitation, setShowCitation] = React.useState(false);\n  const [formattedCitation, setFormattedCitation] = React.useState<string>(\"\");\n  const [citationUrl, setCitationUrl] = React.useState<string | undefined>();\n  const [position, setPosition] = React.useState<\"right\" | \"below-left\">(\n    \"right\",\n  );\n  const iconRef = React.useRef<HTMLSpanElement>(null);\n\n  React.useEffect(() => {\n    const cite = new Cite(CITES[citeKey].bibtex);\n    const data = cite.format(\"data\", { format: \"object\" })[0];\n\n    // Store URL if it exists\n    setCitationUrl(data.URL || undefined);\n\n    // Format authors/editors\n    let authors = \"\";\n    if (data.author) {\n      authors = data.author\n        .map((author) => `${author.given} ${author.family}`)\n        .join(\" and \");\n    } else if (data.editor) {\n      authors = data.editor\n        .map((editor) => `${editor.given} ${editor.family}`)\n        .join(\" and \");\n    }\n\n    const year = data.issued?.[\"date-parts\"]?.[0]?.[0] || \"\";\n    const title = data.title || \"\";\n\n    // Format where field with optional chaining\n    const whereText = CITES[citeKey]?.where\n      ? ` <span class=\"grey-text\">${CITES[citeKey].where}</span>`\n      : \"\";\n\n    // Combine with italics for authors and year\n    const formattedText = `<i>${authors}</i> (<i>${year}</i>). ${title}.${whereText}`;\n    setFormattedCitation(formattedText);\n  }, [citeKey]);\n\n  const handleMouseEnter = () => {\n    if (iconRef.current) {\n      const rect = iconRef.current.getBoundingClientRect();\n      const rightSpace = window.innerWidth - rect.right;\n      // If there's not enough space on the right (300px for tooltip + 32px padding), show below-left\n      setPosition(rightSpace < 332 ? \"below-left\" : \"right\");\n    }\n    setShowCitation(true);\n  };\n\n  const handleIconClick = (e: React.MouseEvent) => {\n    if (citationUrl) {\n      e.stopPropagation();\n      window.open(citationUrl, \"_blank\", \"noopener,noreferrer\");\n    }\n  };\n\n  return (\n    <CitationContainer>\n      <CitationIcon\n        ref={iconRef}\n        hasUrl={!!citationUrl}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={() => setShowCitation(false)}\n        onClick={handleIconClick}\n      >\n        <FontAwesomeIcon icon={faQuoteRight} size=\"sm\" />\n      </CitationIcon>\n\n      {showCitation && (\n        <CitationPopup position={position}>\n          <style>{`.grey-text { color: #888; }`}</style>\n          <span dangerouslySetInnerHTML={{ __html: formattedCitation }} />\n        </CitationPopup>\n      )}\n    </CitationContainer>\n  );\n};\n","interface Citation {\n  bibtex: string;\n  where?: string;\n}\n\nexport const CITES: Record<string, Citation> = {\n  rings_tuning: {\n    bibtex: `@book{book:2550186,\n   title =     {The Oxford handbook of critical concepts in music theory},\n   editor =    {Steven Rings and Alexander Rehding},\n   publisher = {},\n   isbn =      {9780190454746,0190454741},\n   year =      {2019},\n   series =    {},\n   edition =   {},\n   volume =    {},\n   url = {https://annas-archive.org/md5/e157064be938ddab29b4aab7633dd0a5}\n}`,\n    where: \"pp. 16-20\",\n  },\n  alf_aeolian: {\n    bibtex: `@misc{bjornberg1984aeolian,\n  author = {Alf Bjrnberg},\n  title = {On Aeolian Harmony in Contemporary Popular Music},\n  year = {1984},\n  url = {https://www.tagg.org/xpdfs/bjbgeol.pdf}\n}\n`,\n  },\n  tagg_loops: {\n    bibtex: `@book{tagg2017everyday,\n  title ={Everyday Tonality II: Towards a Tonal Theory of what Most People Hear},\n  author={Tagg, Philip},\n  year={2017},\n  publisher={Mass Media Music Scholars' Press},\n  url={https://hugoribeiro.com.br/area-restrita/Tagg-Everyday_tonality.pdf}\n}\n`,\n    where: \"ch. 13\",\n  },\n  nobile: {\n    bibtex: `@book{book:2586637,\n   title =     {Form as Harmony in Rock Music (Oxford Studies in Music Theory)},\n   author =    {Drew Nobile},\n   publisher = {},\n   isbn =      {2020932174,9780190948368,9780190948351},\n   year =      {2020},\n   series =    {},\n   edition =   {},\n   volume =    {},\n   url =       {https://annas-archive.org/md5/8e6e4c92afc8e11ac3ff486582c5d0c4}\n}\n`,\n  },\n  richards: {\n    bibtex: `@article{richards2017tonal,\n  title={Tonal Ambiguity in Popular Musics Axis Progressions},\n  author={Richards, Mark},\n  journal={Music Theory Online},\n  volume={23},\n  number={3},\n  year={2017},\n  publisher={Society for Music Theory},\n  url={https://mtosmt.org/issues/mto.17.23.3/mto.17.23.3.richards.html}\n}\n`,\n  },\n  vice_despacito: {\n    bibtex: `@online{vice_despacito,\n  author    = {Emily Bootle},\n  title     = {The Actual Science Behind Why Despacito Bangs So Damn Hard},\n  year      = {2017},\n  url       = {https://www.vice.com/en/article/why-despacito-is-so-catchy-music-theory},\n  urldate   = {2024-12-25},\n  note      = {Accessed: 2024-12-25}\n}\n`,\n  },\n} as const;\n","import { faMusic } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nconst DropBox = styled.div`\n  border: 4px dashed #0f0; /* Neon green dashed border */\n  padding: 20px;\n  border-radius: 10px;\n  text-align: center;\n  transition: all 0.2s ease-in-out;\n  background: #000; /* Black background */\n  box-shadow: 0 0 10px #0f0; /* Neon glow effect */\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  font-size: 48px;\n  color: #0f0; /* Neon green color */\n`;\n\nconst Text = styled.p`\n  margin-top: 15px;\n  font-size: 16px;\n  color: #0f0; /* Neon green text */\n`;\n\nexport const FileDropBox: React.FC = () => (\n  <DropBox>\n    <Icon icon={faMusic} />\n    <Text>Drag & Drop your MIDI files here (or anywhere really)</Text>\n  </DropBox>\n);\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst GradientText = styled.span`\n  font-weight: 900;\n  display: inline-block;\n  background-clip: text !important;\n  -webkit-background-clip: text !important;\n  -webkit-text-fill-color: transparent !important;\n  color: transparent !important;\n`;\n\nconst GradientGreen = styled(GradientText)`\n  background: linear-gradient(\n    to right,\n    white,\n    #007000,\n    #00fb47,\n    rgb(120, 120, 120)\n  );\n`;\n\nconst GradientCool = styled(GradientText)`\n  background: linear-gradient(\n    to right,\n    #9500b3,\n    #ea7eff,\n    #0000ff,\n    #03b9d5,\n    #007000,\n    #00fb47\n  );\n`;\n\nconst GradientWarm = styled(GradientText)`\n  background: linear-gradient(to right, #ff0, #ff7328, red, #9500b3);\n`;\n\nconst GradientBright = styled(GradientText)`\n  background: linear-gradient(to right, #00fb47, #03b9d5, #ff0);\n`;\n\nconst GradientDark = styled(GradientText)`\n  background: linear-gradient(to right, #007000, #0000ff, #ff7328);\n`;\n\nconst Container = styled.div`\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n  gap: 7px;\n`;\n\nconst TextLine = styled.span`\n  font-weight: 900;\n`;\n\nconst Metaphors = () => {\n  return (\n    <Container>\n      <span>\n        <TextLine>the tonic note is always white</TextLine>\n      </span>\n      <span>\n        <GradientGreen>tonic chords have a green pitch</GradientGreen>\n      </span>\n      <span>\n        <GradientCool>predominants are in cool colors</GradientCool>\n      </span>\n      <span>\n        <GradientWarm>dominants are in warm colors</GradientWarm>\n      </span>\n      <span>\n        <GradientBright>major mode is brighter</GradientBright>\n      </span>\n      <span>\n        <GradientDark>minor mode is darker</GradientDark>\n      </span>\n    </Container>\n  );\n};\n\nexport default Metaphors;\n","import * as React from \"react\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { VoiceMask } from \"../../App\";\nimport { SecondsConverter, SetVoiceMask } from \"../Rawl\";\nimport { ScrollInfo } from \"../SystemLayout\";\n\nexport const VoiceName: React.FC<{\n  voiceName: string;\n  voiceMask: VoiceMask;\n  setVoiceMask: SetVoiceMask;\n  voiceIndex: number;\n  scrollInfo: ScrollInfo;\n  secondsToX: SecondsConverter;\n  midiNumberToY: (number) => number;\n}> = ({\n  voiceName,\n  voiceMask,\n  setVoiceMask,\n  voiceIndex,\n  scrollInfo,\n  secondsToX,\n  midiNumberToY,\n}) => {\n  const isSingleActive =\n    voiceMask[voiceIndex] && voiceMask.filter((voice) => voice).length === 1;\n\n  const ref = useRef(null);\n  const [top, setTop] = useState(0);\n\n  const updatePosition = () => {\n    if (ref.current) {\n      const outerComponentRect =\n        ref.current.parentElement.getBoundingClientRect();\n      setTop(outerComponentRect.top + window.scrollY - 5);\n    }\n  };\n\n  useEffect(updatePosition, [scrollInfo, secondsToX, midiNumberToY]);\n\n  useEffect(() => {\n    ref.current\n      .closest(\".SplitLayout\")\n      ?.addEventListener(\"scroll\", updatePosition);\n\n    ref.current.closest(\".Rawl\")?.addEventListener(\"scroll\", updatePosition);\n\n    return () => {\n      ref.current\n        .closest(\".SplitLayout\")\n        ?.removeEventListener(\"scroll\", updatePosition);\n      ref.current\n        .closest(\".Rawl\")\n        ?.removeEventListener(\"scroll\", updatePosition);\n    };\n  }, []);\n\n  return (\n    <span\n      style={{\n        position: \"fixed\",\n        top,\n        left: 2,\n        marginLeft: 2,\n        marginTop: 7,\n        fontFamily: \"sans-serif\",\n        fontSize: 12,\n        textShadow: \"0 0 1px black, 0 0 3px black, 0 0 6px black\",\n        userSelect: \"none\",\n        zIndex: 100,\n      }}\n      ref={ref}\n      onClick={(e) => {\n        e.stopPropagation();\n      }}\n    >\n      <span>\n        <button\n          style={{\n            cursor: \"pointer\",\n            userSelect: \"none\",\n            fontFamily: \"sans-serif\",\n            fontSize: 12,\n          }}\n          onClick={(e) => {\n            e.stopPropagation();\n            isSingleActive\n              ? setVoiceMask(voiceMask.map(() => true))\n              : setVoiceMask(voiceMask.map((_, i) => i === voiceIndex));\n          }}\n        >\n          {isSingleActive ? \"Unsolo All\" : \"Solo\"}\n        </button>\n\n        <input\n          title=\"active\"\n          type=\"checkbox\"\n          onChange={(e) => {\n            e.stopPropagation();\n            setVoiceMask(\n              voiceMask.map((value, i) => (i === voiceIndex ? !value : value)),\n            );\n          }}\n          checked={voiceMask[voiceIndex]}\n          style={{\n            margin: \"0px 0px 0px 17px\",\n            height: 11,\n            display: isSingleActive ? \"none\" : \"inline\",\n          }}\n        />\n      </span>\n      <span\n        style={{\n          color: voiceMask[voiceIndex] ? \"white\" : \"#444\",\n          marginLeft: \"10px\",\n          zIndex: 100,\n        }}\n      >\n        {voiceName}\n      </span>\n    </span>\n  );\n};\n","// The simplest possible algorithm:\n// Count all pitched midi events, find a fifth where min count of two notes\n// will be the highest\n\nimport { MeasuresAndBeats } from \"./SystemLayout\";\nimport { PitchClass } from \"./analysis\";\nimport { Note } from \"./parseMidi\";\n\nexport const findTonic = (notes: Note[]): PitchClass | -1 => {\n  const countPitchClasses = [];\n  for (let i = 0; i < 12; ++i) {\n    countPitchClasses.push(0);\n  }\n  notes.forEach(\n    (note) =>\n      (countPitchClasses[note.note.midiNumber % 12] +=\n        note.span[1] - note.span[0]),\n  );\n  let bestTonic = -1;\n  let bestValue = -Infinity;\n  const scores = [];\n  for (let i = 0; i < 12; ++i) {\n    const currentValue =\n      1.5 * countPitchClasses[i] +\n      0.7 * countPitchClasses[(i + 4) % 12] +\n      countPitchClasses[(i + 7) % 12] -\n      5 *\n        Math.min(\n          countPitchClasses[(i + 3) % 12],\n          countPitchClasses[(i + 4) % 12],\n        ) -\n      20 * countPitchClasses[(i + 1) % 12] -\n      7 * countPitchClasses[(i + 6) % 12];\n\n    scores.push(currentValue);\n    if (currentValue > bestValue) {\n      bestTonic = i;\n      bestValue = currentValue;\n    }\n  }\n  console.log(\"count\", countPitchClasses);\n  console.log(\"scores\", scores);\n  console.log(\"bestValue\", bestValue);\n  console.log(\"bestTonic\", bestTonic);\n  return bestTonic as PitchClass | -1;\n};\n\nexport const findFirstPhraseStart = (\n  notes: Note[],\n  measuresAndBeats: MeasuresAndBeats,\n): number => {\n  let result = -1;\n  const { measures, beats } = measuresAndBeats;\n  // Find left-most note with pitch. If it's on beat 1, that's the measure. Otherwise it's anacrusis.\n  let earliestOnset = Math.min(\n    ...notes.filter((note) => !note.isDrum).map((note) => note.span[0]),\n  );\n\n  while (result + 1 < measures.length) {\n    if (earliestOnset < measures[result + 1]) {\n      break;\n    }\n    result++;\n  }\n  if (\n    earliestOnset > measures[result] * 0.75 + measures[result + 1] * 0.25 ||\n    beats.filter(\n      (beat) => beat > measures[result] && beat < measures[result + 1],\n    ).length <\n      beats.filter(\n        (beat) => beat > measures[result + 1] && beat < measures[result + 2],\n      ).length\n  ) {\n    result++;\n  }\n  return result;\n};\n","import React, { useContext, useEffect } from \"react\";\nimport { AppContext } from \"../../AppContext\";\n\nexport type SystemLayout = \"merged\" | \"frozen\";\n\ninterface LayoutSelectorProps {\n  setSystemLayout: React.Dispatch<React.SetStateAction<SystemLayout>>;\n}\n\nconst LayoutSelector: React.FC<LayoutSelectorProps> = ({ setSystemLayout }) => {\n  const { registerKeyboardHandler, unregisterKeyboardHandler } =\n    useContext(AppContext);\n\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (e.key === \"f\") {\n        setSystemLayout((prevLayout) => {\n          if (prevLayout === \"frozen\") return \"merged\";\n          return \"frozen\";\n        });\n      }\n    };\n\n    registerKeyboardHandler(\"frozenLayoutSwitch\", handleKeyPress);\n    return () => {\n      unregisterKeyboardHandler(\"frozenLayoutSwitch\");\n    };\n  }, [registerKeyboardHandler, unregisterKeyboardHandler, setSystemLayout]);\n\n  return <></>;\n};\n\nexport default LayoutSelector;\n","import minBy from \"lodash/minBy\";\nimport { MeasuresAndBeats } from \"./SystemLayout\";\nimport { ManualMeasures } from \"./analysis\";\nimport { Note } from \"./parseMidi\";\n\nconst snap = (time: number, notes: Note[]) =>\n  minBy(notes, ({ span: [start] }) => Math.abs(time - start)).span[0];\n\nexport const buildManualMeasuresAndBeats = (\n  manualMeasures: ManualMeasures,\n  notes: Note[],\n): MeasuresAndBeats => {\n  const { measureStarts, beatsPerMeasure } = manualMeasures;\n  const measures = [measureStarts[1] ?? 0];\n  const beats = [];\n  let currentBeatsPerMeasure = beatsPerMeasure[1] ?? 4;\n  let previousBeatsPerMeasure = currentBeatsPerMeasure;\n  let measureIndex = 1;\n  let currentMeasureLength = 1.0;\n  while (true) {\n    measureIndex++;\n    let newMeasure =\n      measureStarts[measureIndex] ??\n      snap(\n        measures.at(-1) +\n          (currentMeasureLength * currentBeatsPerMeasure) /\n            previousBeatsPerMeasure,\n        notes,\n      );\n    if (newMeasure - measures.at(-1) < 0.01) {\n      newMeasure = measures.at(-1) + 2;\n    }\n    for (let i = 1; i < currentBeatsPerMeasure; ++i) {\n      beats.push(\n        (measures.at(-1) * (currentBeatsPerMeasure - i)) /\n          currentBeatsPerMeasure +\n          (newMeasure * i) / currentBeatsPerMeasure,\n      );\n    }\n    previousBeatsPerMeasure = currentBeatsPerMeasure;\n    currentBeatsPerMeasure =\n      beatsPerMeasure[measureIndex] ?? currentBeatsPerMeasure;\n    currentMeasureLength = newMeasure - measures.at(-1);\n    measures.push(newMeasure);\n    if (notes.every((note) => note.span[1] < newMeasure)) {\n      break;\n    }\n  }\n  return { measures, beats };\n};\n","import * as React from \"react\";\nimport { CorpusLink } from \"../corpora/CorpusLink\";\nimport { Chord } from \"../legends/chords\";\nimport { A, c, ct, Mode, P, rnc, s, UL } from \"./chapters\";\n\nexport const BEYOND_CHAPTER_GROUPS: Record<string, [number, number]> = {\n  intro: [1, 10],\n};\n\nexport const BEYOND_CHAPTERS: Array<{\n  title: string;\n  titleChords?: Chord[];\n  mode?: Mode | Mode[];\n  pretext?: () => React.JSX.Element;\n  composers: string[];\n}> = [\n  {\n    title: \"Blues\",\n    titleChords: [\"I7\"],\n    composers: [],\n    pretext: () => (\n      <>\n        <h2>Blues</h2>\n        <P>\n          Surprisingly, there is no instance of {s`form:12-bar_blues`} inside\n          the top 100.\n        </P>\n        <P>\n          The main harmonic ideas in the blues is the usage of three main\n          dominant seventh chords: {rnc`I7`}, {rnc`IV7`}, and {rnc`V7`}.\n        </P>\n        <P>There are several forms of a 12-bar blues progression:</P>\n        <P>\n          <UL>\n            <li>\n              {c`I7 I7 I7 I7 IV7 IV7 I7 I7 V7 V7 I7 I7`} - simple, ancient\n            </li>\n            <li>{c`I7 I7 I7 I7 IV7 IV7 I7 I7 V7 IV7 I7 I7`} - most common</li>\n            <li>\n              {c`Imaj7 Imaj7 Imaj7 I7 IV7 IV7 Imaj7 V7/ii ii7 V7 Imaj7 V7`} - a\n              possible blues in jazz\n            </li>\n            <li>{c`i7 i7 i7 i7 iv7 iv7 i7 i7 v7 iv7 i7 i7`} - a minor blues</li>\n          </UL>\n        </P>\n        <P>\n          <UL>\n            <li>{s`scale:blues`}</li>\n            <li>{s`chord_scale:IV7`}</li>\n            <li>{s`form:8-bar_blues`}</li>\n            <li>\n              <CorpusLink slug={\"boogie_woogie\"} />\n            </li>\n          </UL>\n        </P>\n      </>\n    ),\n  },\n  {\n    title: \"Constant structures\",\n    titleChords: [\"I\", \"bII\", \"II\", \"bIII\", \"III\"],\n    composers: [],\n    pretext: () => (\n      <>\n        <h2>Constant structures</h2>\n        <P>{s`constant_structures:major_chords`}</P>\n      </>\n    ),\n  },\n  {\n    title: \"Neo-Riemannian\",\n    titleChords: [\"i\", \"bvi\"],\n    composers: [],\n    pretext: () => (\n      <>\n        <h2>Two minor triads</h2>\n        <P></P>\n        <P>\n          There are 11 ways to follow a minor triad with a minor triad. Some of\n          these ways have a diatonic interpretation, some others - sorta tonal\n          interpretation, yet another ones are picant, modern, VGMy.\n        </P>\n        <P>\n          <UL>\n            <li>{c`i bii`}</li>\n            <li>{c`i ii`}</li>\n            <li>{c`i biii`}</li>\n            <li>{c`i iii`}</li>\n            <li>\n              {c`i iv`} is native to natural minor,{\" \"}\n              {A(\"still-dre---variation-composition\")}\n            </li>\n            <li>{c`i #iv`}</li>\n            <li>{c`i v`}</li>\n            <li>\n              {c`i bvi`} {s`chromatic_chords:minor_bvi`}\n            </li>\n            <li>{c`i vi`}</li>\n            <li>{c`i bvii`}</li>\n            <li>{c`i vii`}</li>\n          </UL>\n        </P>\n      </>\n    ),\n  },\n  {\n    title: \"Parallel symmetry\",\n    titleChords: [\"V7\", \"i\", \"V7\", \"I\"],\n    composers: [],\n    pretext: () => (\n      <>\n        <h2>Parallel symmetry</h2>\n        <P>{s`parallel:symmetry`}</P>\n        <P>{s`parallel:picardy_third`}</P>\n      </>\n    ),\n  },\n  {\n    title: \"Greek b2 natural 3\",\n    titleChords: [\"bvii\", \"I\"],\n    composers: [],\n    pretext: () => (\n      <>\n        <h2>Greek b2</h2>\n        <P>\n          Let's consider the corpus <CorpusLink slug={\"greek_music\"} />. Some\n          songs in it are quite standard Western. However, there are others\n          which exploit a scale specific to the Balkans: {c`1 b2 3 4 5 b6 b7 1`}\n          . For a lack of better universal name, let's call it a C phrygian\n          dominant.\n        </P>\n        <P>\n          Technically, it's a rotation of a {ct(\"1 2 b3 4 5 b6 7 1\", 5)}:{\" \"}\n          {ct(\"5 b6 7 1 2 b3 4 5\", -7)}. However, due to the positioning of\n          chords within the section, due to cadential formulas (like {c`bvii I`}\n          ) and the structure of melodies another note is tonicized in it, and\n          therefore I recolor. The most common first and last chord in those\n          pieces is {c`I`}.\n        </P>\n        <P>\n          {c`iv I bvii I`}, {c`bII I bvii I`}\n        </P>\n        <P>{s`b2:3`}</P>\n        <P>\n          {A(\"a.-kaldaras---nyhtose-horis-feggari---greek-music-037\")},{\" \"}\n          {A(\"s.-xarhakos---stoy-thoma---greek-music-055\")},{\" \"}\n          {A(\"s.-xarhakos---mpoyrnovalia---greek-music-079\")}\n        </P>\n      </>\n    ),\n  },\n];\n","import * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { formatComposerName, getEmojis } from \"../../utils/corpusUtils\";\nimport { corpora } from \"./corpora/corpora\";\n\nconst highlightMatch = (text: string, term: string) => {\n  if (!term) return text;\n  const regex = new RegExp(\n    `(${term.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\")})`,\n    \"gi\",\n  );\n  const parts = text.split(regex);\n  return parts.map((part, index) =>\n    regex.test(part) ? <mark key={index}>{part}</mark> : part,\n  );\n};\n\nconst SearchContainer = styled.div`\n  max-width: 100%;\n`;\n\nconst SearchInputContainer = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n\nconst SearchInput = styled.input`\n  flex-grow: 1;\n  padding: 10px;\n  box-sizing: border-box;\n`;\n\nconst TotalCount = styled.span`\n  margin-left: 10px;\n  color: #888;\n  font-size: 0.9em;\n`;\n\nconst ResultsContainer = styled.div`\n  width: 100%;\n  overflow-y: auto;\n  text-align: left;\n`;\n\nconst ColumnContainer = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 20px;\n  width: 100%;\n`;\n\nconst CorpusSearch: React.FC = () => {\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\n  const searchInputRef = React.useRef<HTMLInputElement>(null);\n  const [totalMidis, setTotalMidis] = React.useState(0);\n\n  React.useEffect(() => {\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n\n    const uniqueMidis = new Set(corpora.flatMap((corpus) => corpus.midis));\n    setTotalMidis(uniqueMidis.size);\n  }, []);\n\n  const filteredCorpora = corpora.filter((corpus) => {\n    if (searchTerm === \"\") return corpus.midis.length >= 1;\n\n    const searchTerms = searchTerm.toLowerCase().split(/\\s+/);\n    const corpusWords = corpus.slug.toLowerCase().split(/[-_\\s]+/);\n    const midiWords = corpus.midis.flatMap((midi) =>\n      midi.toLowerCase().split(/[-_\\s]+/),\n    );\n\n    return searchTerms.every(\n      (term) =>\n        corpusWords.some((word) => word.includes(term)) ||\n        midiWords.some((word) => word.includes(term)),\n    );\n  });\n\n  const renderEmptySearchResults = () => {\n    const sortedCorpora = filteredCorpora.sort(\n      (a, b) => b.midis.length - a.midis.length,\n    );\n\n    // Group corpora by country\n    const groupedCorpora = sortedCorpora.reduce(\n      (acc, corpus) => {\n        const group = corpus.country || \"Styles\";\n        if (!acc[group]) {\n          acc[group] = [];\n        }\n        acc[group].push(corpus);\n        return acc;\n      },\n      {} as Record<string, typeof corpora>,\n    );\n\n    // Sort countries by number of corpora (not pieces)\n    const sortedGroups = Object.entries(groupedCorpora).sort((a, b) => {\n      if (a[0] === \"Styles\") return -1;\n      if (b[0] === \"Styles\") return 1;\n      return b[1].length - a[1].length;\n    });\n\n    // Separate single-corpus countries\n    const multiCorpusGroups = sortedGroups.filter(\n      ([country, corpora]) => corpora.length > 1 || country === \"Styles\",\n    );\n    const singleCorpusEntries = sortedGroups\n      .filter(\n        ([country, corpora]) => corpora.length === 1 && country !== \"Styles\",\n      )\n      .flatMap(([country, corpora]) =>\n        corpora.map((corpus) => ({ country, corpus })),\n      )\n      .sort((a, b) => b.corpus.midis.length - a.corpus.midis.length);\n\n    return (\n      <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"50px\" }}>\n        {/* Multi-corpus countries */}\n        {multiCorpusGroups.map(([country, corpora]) => (\n          <div key={country} style={{ textAlign: \"left\" }}>\n            <h3 style={{ marginBottom: \"10px\" }}>\n              {country} {country !== \"Styles\" && getEmojis(country)}\n              <span\n                style={{\n                  fontSize: \"0.6em\",\n                  color: \"gray\",\n                  marginLeft: \"8px\",\n                }}\n              >\n                {corpora.reduce((sum, corpus) => sum + corpus.midis.length, 0)}\n              </span>\n            </h3>\n            <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"10px\" }}>\n              {corpora.map(({ slug, midis }) => (\n                <div key={slug} style={{ marginRight: \"20px\" }}>\n                  <Link to={`/corpus/${slug}`}>\n                    {formatComposerName(slug)}{\" \"}\n                    <span style={{ fontSize: \"0.6em\", color: \"gray\" }}>\n                      {midis.length}\n                    </span>\n                  </Link>\n                </div>\n              ))}\n            </div>\n          </div>\n        ))}\n\n        {/* Single-corpus countries */}\n        {singleCorpusEntries.length > 0 && (\n          <div style={{ textAlign: \"left\" }}>\n            <h3 style={{ marginBottom: \"10px\" }}>Single Composers</h3>\n            <div\n              style={{\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                gap: \"16px\",\n                alignItems: \"center\",\n              }}\n            >\n              {singleCorpusEntries.map(({ country, corpus }) => (\n                <div\n                  key={corpus.slug}\n                  style={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: \"8px\",\n                    minWidth: \"200px\",\n                  }}\n                >\n                  {getEmojis(country)}\n                  <Link to={`/corpus/${corpus.slug}`}>\n                    {formatComposerName(corpus.slug)}\n                    <span\n                      style={{\n                        fontSize: \"0.6em\",\n                        color: \"gray\",\n                      }}\n                    >\n                      {corpus.midis.length}\n                    </span>\n                  </Link>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <SearchContainer>\n      <SearchInputContainer>\n        <SearchInput\n          ref={searchInputRef}\n          type=\"text\"\n          placeholder=\"Search composers or songs, eg. 'nocturne', 'entertainer', 'jaws', 'autumn leaves', 'succession', 'bts', 'chopin', 'mario'\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n        />\n        <TotalCount>{totalMidis} MIDIs</TotalCount>\n      </SearchInputContainer>\n      <ResultsContainer>\n        {searchTerm === \"\"\n          ? renderEmptySearchResults()\n          : filteredCorpora.map(({ slug, midis }) => {\n              const searchTerms = searchTerm.toLowerCase().split(/\\s+/);\n              const composerMatched = searchTerms.every((term) =>\n                slug\n                  .toLowerCase()\n                  .split(/[-_\\s]+/)\n                  .some((word) => word.includes(term)),\n              );\n              const matchingMidis = midis.filter((midi) =>\n                searchTerms.every((term) =>\n                  midi\n                    .toLowerCase()\n                    .split(/[-_\\s]+/)\n                    .some((word) => word.includes(term)),\n                ),\n              );\n\n              return (\n                <div\n                  key={slug}\n                  style={{\n                    borderLeft: composerMatched ? \"3px solid yellow\" : \"none\",\n                    paddingLeft: composerMatched ? \"10px\" : \"0\",\n                    marginBottom: \"15px\",\n                    textAlign: \"left\",\n                  }}\n                >\n                  <Link to={`/corpus/${slug}`}>\n                    {highlightMatch(slug.replace(/_/g, \" \"), searchTerm)}{\" \"}\n                    <span style={{ color: \"white\", fontSize: \"0.6em\" }}>\n                      {midis.length}\n                    </span>\n                  </Link>\n                  {(composerMatched || searchTerm) &&\n                    matchingMidis.map((midi) => (\n                      <div key={midi} style={{ paddingLeft: \"20px\" }}>\n                        <a\n                          href={`/f/${midi}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                        >\n                          {highlightMatch(\n                            midi.replace(/---/g, \"  \").replace(/-/g, \" \"),\n                            searchTerm,\n                          )}\n                        </a>\n                      </div>\n                    ))}\n                </div>\n              );\n            })}\n      </ResultsContainer>\n    </SearchContainer>\n  );\n};\n\nexport default CorpusSearch;\n","import * as React from \"react\";\nimport { ReactNode } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { InlinePianoLegend } from \"./legends/PianoLegend\";\n\nconst NeonLink = styled.a`\n  display: inline-block;\n  padding: 2px 6px; // Adjust padding as needed\n  color: #fff; // White text color for the neon effect\n  font-size: 17px;\n  font-family: \"Helvetica Neue\", Arial, sans-serif; // Sexy sans-serif font\n  text-decoration: none;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-right: 40px;\n\n  &:hover,\n  &:visited:hover {\n    color: #fff; // Lighter pink color on hover for added interaction\n    text-shadow:\n      0 0 5px #660,\n      0 0 15px #660;\n  }\n`;\n\nconst Example: React.FC<{ name: string; pathname: string; bad?: boolean }> = ({\n  name,\n  pathname,\n  bad = false,\n}) => (\n  <NeonLink key={pathname} href={pathname} target=\"_blank\">\n    <span style={bad ? { textDecoration: \"line-through\" } : {}}>{name}</span>\n  </NeonLink>\n);\n\nconst Container = styled.div`\n  display: flex;\n  width: 100vw; // Set container width to 100% of the viewport width\n  justify-content: center; // Center the children horizontally\n`;\n\nconst Side = styled.div<{ sideImage: string }>`\n  flex-grow: 1;\n  background-size: cover;\n  background-position: center;\n  // Basic structure for the background-image, actual gradient will be defined in LeftSide and RightSide\n  background-image: url(${(props) => props.sideImage});\n`;\n\nconst LeftSide = styled(Side)`\n  margin-right: 20px;\n  background-image: linear-gradient(\n      to right,\n      rgba(0, 0, 0, 0) 0%,\n      rgba(0, 0, 0, 1) 100%\n    ),\n    url(${(props) => props.sideImage});\n`;\n\nconst RightSide = styled(Side)`\n  margin-left: 20px;\n  background-image: linear-gradient(\n      to left,\n      rgba(0, 0, 0, 0) 0%,\n      rgba(0, 0, 0, 1) 100%\n    ),\n    url(${(props) => props.sideImage});\n`;\n\nconst Content = styled.div`\n  width: 900px; // Set a fixed width for the content\n  margin: auto; // Center the content block horizontally within its container\n\n  display: flex; // Enable flexbox for this container\n  flex-direction: column; // Stack children vertically\n  justify-content: center; // Center children vertically in the container\n  align-items: center; // Center children horizontally in the container\n\n  text-align: center; // Center text inside the content (if needed)\n\n  @media (max-width: 900px) {\n    width: 100%; // Make width 100% on smaller screens\n    padding: 0 20px; // Add padding to avoid touching the screen edges\n  }\n`;\n\nexport const ChordStairsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 100px;\n  margin-top: 30px;\n  margin-bottom: 30px;\n\n  @media (max-width: 900px) {\n    flex-direction: column;\n  }\n`;\n\nconst LegendAndMetaphorsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 100px;\n  margin-top: 30px;\n  margin-bottom: 30px;\n\n  @media (max-width: 900px) {\n    gap: 20px;\n  }\n`;\n\nconst Section: React.FC<{\n  title: string;\n  children: ReactNode;\n  scale?: number[];\n}> = ({ title, children, scale }) => {\n  return (\n    <div\n      style={{\n        marginTop: 50,\n        textAlign: \"left\",\n        width: \"100%\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        gap: 5,\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: 5,\n        }}\n      >\n        <span style={{ color: \"gray\", width: 120 }}>{title} </span>\n        {scale && <InlinePianoLegend enabledPitches={scale} />}\n      </div>\n      <div>{children}</div>\n    </div>\n  );\n};\n\nconst OldLandingPage = () => (\n  <Container>\n    <Content>\n      <div style={{ margin: \"100px 0 100px 0\" }}>\n        <iframe\n          width=\"560\"\n          height=\"315\"\n          src=\"https://www.youtube.com/embed/uW7r-nehi7o?si=zjR312K-CGekpBwU\"\n          title=\"YouTube video player\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n          allowFullScreen\n          style={{ border: \"0px\" }}\n        />\n      </div>\n\n      <Section title=\"EdMAC 2024\">\n        <div style={{ color: \"gray\" }}>Gavottes</div>\n        <Example\n          name={\"Mozart, Piano Sonata in D, K. 284\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%206,%20K284.mid\"\n          }\n        />\n        <Example\n          name={\"Hndel HWV 491\"}\n          pathname={\"f/gavotte_in_g_major_hwv_491_handel_george_frideric\"}\n        />\n        <Example name={\"F. J. Gossec\"} pathname={\"f/gavotte_f_j_gossec\"} />\n        {/* <Example\n          name={\"Mahler, Symphony #4, mov. 3\"}\n          pathname={\"f/mahler_4_3\"}\n          bad={true}\n        /> */}\n        <div style={{ color: \"gray\" }}>Bruckner</div>\n        <Example name={\"8/1\"} pathname={\"f/bruckner_8\"} />\n        <Example name={\"8/1 (another file)\"} pathname={\"f/symphony_8_1\"} />\n        <Example name={\"7/1\"} pathname={\"f/bruckner_7_1\"} />\n        <Example name={\"7/2\"} pathname={\"f/bruckner_7_2\"} />\n        <div style={{ color: \"gray\" }}>\n          Structural Versus Rhetorical Musical Borrowing\n        </div>\n        <Example\n          name={\"Ravel, Pavane pour une infante dfunte\"}\n          pathname={\"f/pavane_pour_une_infante_defunte_ravel_recorder\"}\n        />\n        <Example name={\"The Lamp is Low\"} pathname={\"f/the_lamp_is_low\"} />\n        <Example name={\"Debussy, Rverie\"} pathname={\"f/reverie_galimberti\"} />\n        <div style={{ color: \"gray\" }}>Energetic Overflow</div>\n        <Example\n          name={\"Chopin, Ballade in F minor, op. 52\"}\n          pathname={\"f/chopin_ballade_no_4_piano_solo\"}\n        />\n        <Example\n          name={\"Brahms, Intermezzo op. 118 no. 1 in A minor\"}\n          pathname={\"f/brahms_op118_1\"}\n        />\n        <div style={{ color: \"gray\" }}>Eleanor Rigby</div>\n        <Example\n          name={\"The Beatles\"}\n          pathname={\"c/MIDI/The%20Beatles/Eleanor%20Rigby.4.mid\"}\n        />\n        <Example\n          name={\"Cody Fry\"}\n          pathname={\"/f/eleanor_rigby_cody_fry_no_perc1\"}\n        />\n\n        <div style={{ color: \"gray\" }}>Piazzolla, Histoire du Tango:</div>\n        <Example\n          name={\"Bordel 1900\"}\n          pathname={\"f/piazzolla_histoire_du_tango_bordel_1900\"}\n        />\n        <Example\n          name={\"Cafe 1930\"}\n          pathname={\"f/piazzolla_histoire_du_tango_cafe_1930\"}\n        />\n        <Example\n          name={\"Nightclub 1960\"}\n          pathname={\"f/piazzolla_histoire_du_tango_nightclub_1960\"}\n        />\n        <Example\n          name={\"Concert d'aujourd'hui\"}\n          pathname={\"f/piazzolla_histoire_du_tango_concert_aujourdhui\"}\n        />\n        {/* <div style={{ color: \"gray\" }}>Tigran Hamasyan:</div>\n        <Example name={\"Kars 1\"} pathname={\"f/kars_1_tigran_hamasyan\"} /> */}\n        <div style={{ color: \"gray\" }}>Max Steiner</div>\n        <Example\n          name={\"Now Voyager Suite (choose  in top-right, mute chords)\"}\n          pathname={\"f/now_voyager_suite_max_steiner\"}\n        />\n        <div style={{ color: \"gray\" }}>Rachmaninoff, piano concert #4:</div>\n        <Example name={\"1\"} pathname={\"f/rachmaninoff_piano_concerto_4_1\"} />\n        <Example\n          name={\"2\"}\n          pathname={\"f/piano_concerto_no_4_op_40_sergei_rachmaninoff_ii_largo\"}\n          bad={true}\n        />\n        <Example\n          name={\"3\"}\n          pathname={\n            \"f/piano_concerto_no_4_op_40_sergei_rachmaninoff_iii_allegro_vivace\"\n          }\n          bad={true}\n        />\n      </Section>\n      <Section title=\"Yoel Greenberg, How Sonata Forms (2022)\">\n        <Example\n          name={\"2.1. Scarlatti, K. 159\"}\n          pathname={\"f/sonata_k159_scarlatti\"}\n        />\n        <Example\n          name={\"4.1. Corelli, op. 1 no. 8, II\"}\n          pathname={\"f/corelli_op1_no8_ii\"}\n        />\n      </Section>\n      <Section title=\"Third school\">\n        <Example name={\"ABBA, SOS\"} pathname={\"c/MIDI/ABBA/S.O.S.mid\"} />\n        <Example\n          name={\"Ed Sheeran, Shivers\"}\n          pathname={\"f/shivers_ed_sheeran_shivers_ed_sheeran_mixed_ensemble\"}\n        />\n        <Example\n          name={\"Earth, Wind & Fire, September\"}\n          pathname={\"f/earth_wind_fire_september\"}\n        />\n        <Example\n          name={\"Michael Jackson Rock With You\"}\n          pathname={\"c/MIDI/Michael%20Jackson/Rock%20With%20You.mid\"}\n        />\n        <Example\n          name={\"The Korgis, Everybodys Got to Learn Sometime\"}\n          pathname={\n            \"c/MIDI/Korgis/Everybody%27s%20Got%20to%20Learn%20Sometime.mid\"\n          }\n        />\n        <Example\n          name={\"Simply Red, If You Dont Know Me By Now\"}\n          pathname={\n            \"c/MIDI/Simply%20Red/If%20You%20Don%27t%20Know%20Me%20By%20Now.mid\"\n          }\n        />\n        <Example\n          name={\"Gotye (feat. Kimbra), Somebody That I Used to Know\"}\n          pathname={\"f/gotye_feat_kimbra_somebody_that_i_used_to_know\"}\n        />\n        <Example\n          name={\"Peter Gabriel, Solsbury Hill\"}\n          pathname={\"c/MIDI/Peter%20Gabriel/Solsbury%20Hill.mid\"}\n        />\n        <Example\n          name={\"Bjrk, Hyperballad\"}\n          pathname={\"c/MIDI/Bjork/Hyper-Ballad.mid\"}\n        />\n        <Example\n          name={\"Coldplay, Viva la Vida\"}\n          pathname={\"f/Viva_La_Vida_Coldplay\"}\n        />\n      </Section>\n      <Section title=\"major\" scale={[0, 2, 4, 5, 7, 9, 11]}>\n        <Example name={\"Feliz Navidad\"} pathname={\"f/Feliz_Navidad\"} />\n        <Example\n          name={\"John Lennon  Imagine\"}\n          pathname={\"f/John_Lennon_Imagine\"}\n        />\n        <Example\n          name={\"Ed Sheeran  Perfect\"}\n          pathname={\"f/Ed_Sheeran_Perfect\"}\n        />\n        <Example name={\"Jingle Bell Rock\"} pathname={\"f/Jingle_Bell_Rock\"} />\n        <Example\n          name={\"Joe Hisaishi  Summer\"}\n          pathname={\"f/Summer_Joe_Hisaishi\"}\n        />\n        <Example\n          name={\"Super Mario Bros\"}\n          pathname={\"f/Super_Mario_Bros_Main_Theme\"}\n        />\n        <Example name={\"Disney  Up\"} pathname={\"f/Disney_Pixar_Up_Theme\"} />\n        <Example\n          name={\"Yiruma  Kiss the Rain\"}\n          pathname={\n            \"f/Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\"\n          }\n        />\n        <Example\n          name={\"Julius Fuk  Entrance of the Gladiators\"}\n          pathname={\"f/Entry_of_the_Gladiators_-_Julius_Fuk_-_1897\"}\n        />\n      </Section>\n      <Section title=\"natural minor\" scale={[0, 2, 3, 5, 7, 8, 10]}>\n        <Example\n          name={\"Game of Thrones\"}\n          pathname={\"f/Game_of_Thrones_Easy_piano\"}\n        />\n        <Example name={\"Hallelujah\"} pathname={\"f/Hallelujah\"} />\n        <Example name={\"Jolene\"} pathname={\"f/Jolene\"} />\n        <Example\n          name={\"John Legend  All of Me\"}\n          pathname={\"f/All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\"}\n        />\n        <Example name={\"Minecraft  Sweden\"} pathname={\"f/Sweden_Minecraft\"} />\n        <Example\n          name={\"Yann Tiersen  Amlie\"}\n          pathname={\"f/Yann_Tiersen_Amelie\"}\n        />\n        <Example name={\"Despacito\"} pathname={\"f/Despacito\"} />\n      </Section>\n      <Section title=\"harmonic minor\" scale={[0, 2, 3, 5, 7, 8, 11]}>\n        <Example\n          name={\"Imagine Dragons  Believer\"}\n          pathname={\"f/Believer_-_Imagine_Dragons\"}\n        />\n        <Example name={\"Bella Ciao\"} pathname={\"f/Bella_Ciao\"} />\n        <Example\n          name={\"Requiem for a Dream\"}\n          pathname={\"f/Requiem_for_a_Dream\"}\n        />\n      </Section>\n      <Section title=\"mixed minor\" scale={[0, 2, 3, 5, 7, 8, 10, 11]}>\n        <Example name={\"Tetris\"} pathname={\"f/Tetris_Theme\"} />\n        <Example\n          name={\"Tetris (arr. Kyle Landry)\"}\n          pathname={\n            \"f/Kyle_Landrys_Tetris_Theme_Variations_for_Piano_SoloKorobeiniki\"\n          }\n        />\n        <Example\n          name={\"Pirates of the Caribbean\"}\n          pathname={\"f/Pirates_of_the_Caribbean_-_Hes_a_Pirate\"}\n        />\n        <Example\n          name={\"Carol of the Bells\"}\n          pathname={\"f/Carol_of_the_Bells\"}\n        />\n        <Example name={\"Godfather\"} pathname={\"f/Godfather\"} />\n        <Example name={\"Pokmon\"} pathname={\"f/Pokemon_Theme_Song\"} />\n        <Example name={\"Gravity Falls\"} pathname={\"f/Gravity_Falls_Opening\"} />\n      </Section>\n      <Section title=\"blues scale\" scale={[0, 3, 5, 6, 7, 10]}>\n        <Example name={\"Pink Panther\"} pathname={\"f/Pink_Panther\"} />\n        <Example\n          name={\"Megalovania\"}\n          pathname={\"f/Undertale_-_Megalovania_Piano_ver._3\"}\n        />\n        <Example name={\"Hit the Road Jack\"} pathname={\"f/Hit_the_Road_Jack\"} />\n      </Section>\n      <Section title=\"hijaz\" scale={[0, 1, 4, 5, 7, 8, 10]}>\n        <Example name={\"Underground Cocek\"} pathname={\"f/underground-cocek\"} />\n        <Example name={\"Tetris\"} pathname={\"f/korobeiniki-tetris\"} />\n        <Example\n          name={\"Dunavsko horo\"}\n          pathname={\"f/dunavsko-horo---diko-iliev-diko-iliev\"}\n        />\n      </Section>\n      <Section title=\"relative keys\">\n        <Example\n          name={\"Fly Me to the Moon\"}\n          pathname={\"f/Fly_Me_to_the_Moon\"}\n        />\n        <Example name={\"Titanic\"} pathname={\"f/Titanic\"} />\n      </Section>\n      <Section title=\"parallel keys\">\n        <Example\n          name={\"George Bizet  Habanera (from Carmen)\"}\n          pathname={\"f/Habanera_-_Piano_Solo_-_Georges_Bizet\"}\n        />\n        <Example name={\"Gymnopedie\"} pathname={\"f/Gymnopdie_No._1__Satie\"} />\n        <Example\n          name={\"Mozart  Piano Sonata No. 11, mov. 1 (variations)\"}\n          pathname={\"f/mozart_sonata_11_1st\"}\n        />\n      </Section>\n      <Section title=\"modulations\">\n        <Example\n          name={\"Michel Legrand  Umbrellas\"}\n          pathname={\n            \"c/Classical%20MIDI/Legrand/Michel%20Legrand%20-%20Umbrellas%201.mid\"\n          }\n        />\n        <Example\n          name={\"Attack on Titan\"}\n          pathname={\"f/Attack_on_Titan_Shinzou_wo_Sasageyo\"}\n        />\n        <Example\n          name={\"Disney  Frozen\"}\n          pathname={\"f/Let_It_Go_Disney_Frozen\"}\n        />\n        <Example\n          name={\"Chopin  Military Polonaise\"}\n          pathname={\"f/chopin_military_polonaise\"}\n        />\n\n        <Example\n          name={\"Beethoven  Sonata No. 5, mov. 1\"}\n          pathname={\"f/beethoven_sonate_5_1st\"}\n        />\n        <Example\n          name={\"George Bizet  Prelude to Act 1 of Carmen\"}\n          pathname={\"f/Prlude_to_Act_1_of_Carmen_-_Piano_Solo_-_Bizet\"}\n        />\n      </Section>\n      <Section title=\"chromatic\">\n        <Example\n          name={\"Tchaikovsky. Sugar Plum Fairy\"}\n          pathname={\n            \"c/Classical%20MIDI/Tchaikovsky/The%20Nutcracker%20(Suite%20from%20the%20Ballet),%20Op.%2071a%20%203.%20Dance%20of%20the%20Sugar-Plum%20Fairy%20(D.%20Ganetz).mid\"\n          }\n        />\n      </Section>\n      <Section title=\"Balkan brass\">\n        <Example name={\"Underground Cocek\"} pathname={\"f/underground-cocek\"} />\n        <Example name={\"Bubamara\"} pathname={\"f/bubamara\"} />\n        <Example name={\"Ederlezi\"} pathname={\"f/ederlezi\"} />\n        <Example name={\"Hava Nagila\"} pathname={\"f/hava-nagila\"} />\n        <Example name={\"Kalashnjikov\"} pathname={\"f/kalasnjikov\"} />\n        <Example name={\"Tetris\"} pathname={\"f/korobeiniki-tetris\"} />\n        <Example name={\"Mesecina\"} pathname={\"f/mesecina\"} />\n      </Section>\n      <Section title=\"preludes by Chopin\">\n        <Example\n          name={\"4 (E minor)\"}\n          pathname={\n            \"c/Classical%20MIDI/Chopin/24%20Preludes,%20Op.%2028%20%20No.%204%20in%20E%20minor%20('Suffocation')%20(J.%20Sirulnikoff).mid\"\n          }\n        />\n      </Section>\n      <Section title=\"symphonies\">\n        <Example\n          name={\"Rachmaninoff 1/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Rachmaninoff/Symphony%20No.%201%20in%20D%20minor,%20Op.%2013%20for%20piano%20duet%20-%20I.%20Grave,%20Allegro%20ma%20non%20troppo.mid\"\n          }\n        />\n        <Example\n          name={\"Shostakovich 5/ii (solo piano)\"}\n          pathname={\"f/shostakovich_symphony_no5_2nd_movement_for_piano_solo\"}\n        />\n      </Section>\n      <Section title=\"John Williams\">\n        <Example\n          name={\"Double Trouble\"}\n          pathname={\n            \"c/Classical%20MIDI/Williams/Harry%20Potter/Prisoner%20of%20Azkaban%20-%20Double%20Trouble.mid\"\n          }\n        />\n      </Section>\n      <Section title=\"ragtimes by Scott Joplin\">\n        <Example\n          name={\"The Entertainer\"}\n          pathname={\"f/the_entertainer_scott_joplin\"}\n        />\n        <Example\n          name={\"Maple Leaf Rag\"}\n          pathname={\"f/Maple_Leaf_Rag_Scott_Joplin\"}\n        />\n        <Example\n          name={\"Pine Apple Rag\"}\n          pathname={\"f/Pine_Apple_Rag_-_Scott_Joplin_-_1908.mscz\"}\n        />\n        <Example\n          name={\"The Ragtime Dance\"}\n          pathname={\"f/the_ragtime_dance_scott_joplin_1906_arrangement\"}\n        />\n        <Example\n          name={\"Country Club\"}\n          pathname={\"f/country_club_ragtime_two_step_scott_joplin_1909\"}\n        />\n      </Section>\n      <Section title=\"jazz\">\n        <Example name={\"Misty\"} pathname={\"f/Misty_piano_solo\"} />\n        <Example name={\"White Christmas\"} pathname={\"f/white_christmas\"} />\n        <Example name={\"Tams Dek  Vzis\"} pathname={\"f/vizisi\"} />\n        <Example\n          name={\"George Gershwin  Rhapsody in Blue\"}\n          pathname={\"f/Gershwin_Rhapsody_in_Blue_Piano_solo\"}\n        />\n      </Section>\n      <Section title=\"sheet music\">\n        <Example\n          name={\"Scott Joplin  The Entertainer\"}\n          pathname=\"https://musescore.com/user/39031562/scores/15664612\"\n        />\n        <Example\n          name={\"Jingle Bell Rock (arr. John Herbert)\"}\n          pathname=\"https://musescore.com/user/39031562/scores/15670804\"\n        />\n        <Example\n          name={\"Jingle Bell Rock (arr. SkyRecon, in D)\"}\n          pathname=\"https://musescore.com/user/39031562/scores/15671017\"\n        />\n      </Section>\n      <Section title=\"James Hepokoski. A&nbsp;Sonata Theory Handbook (2020)\">\n        <Example\n          name={\"Mozart, Piano Sonata in B-flat, K. 333/i (Allegro)\"}\n          pathname={\"f/sonata_no_13_1st_movement_k_333\"}\n        />\n        <Example\n          name={\n            \"Mozart, Symphony No. 34 in C, K. 338/ii (Andante di molto pi tosto Allegretto)\"\n          }\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2034,%20K338%20%20II.%20Andante%20di%20molto.mid\"\n          }\n        />\n        <Example\n          name={`Haydn, Symphony No. 100 in G, \"Military,\" first movement (Adagio-Allegro)`}\n          pathname={\"f/haydn_100_1\"}\n        />\n        <Example\n          name={`Haydn, String Quartet in G, op. 76 no. 1/i (Allegro con spirito)`}\n          pathname={\n            \"f/string_quartet_in_g_major_hob_iii_75_op_76_no_1_joseph_haydn\"\n          }\n        />\n        <Example\n          name={`Beethoven, Symphony No. 2 in D, op. 36/i (Adagio molto - Allegro con brio)`}\n          pathname={\n            \"c/Classical%20MIDI/Beethoven/Symphony%20No.%202%20(Lucarelli)%20-%201.mid\"\n          }\n        />\n        <Example\n          name={`Beethoven, String Quartet in E Minor, op. 59 no. 2/i (Allegro)`}\n          pathname={\"f/string_quartet_no_8_in_e_minor_opus_59_rasumovsky_no_2\"}\n        />\n        <Example\n          name={`Schubert, String Quartet No. 14 in D Minor, D. 810/i (Allegro)`}\n          pathname={\"f/schubert_death_and_maiden_string_quartet\"}\n        />\n        <div style={{ color: \"gray\" }}>also mentioned:</div>\n        <Example\n          name={`Mozart, Symphony No. 28 in C, K. 200/i (Allegro)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2028,%20K200%20%20I.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={`Mozart, Symphony No. 30 in D, K. 202/i (Allegro)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2030,%20K202%20%20I.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={`Mozart, Piano Sonata in F, K. 332/i (Allegro)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2013,%20K332%20%20I.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={`Mozart, Symphony No. 39 in E-flat, K. 543/iv (Finale, Allegro Molto)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2039,%20K543%20%20IV.%20Finale%20(Allegro%20molto).mid\"\n          }\n        />\n      </Section>\n      <Section title=\"William E.&nbsp;Caplin. Analyzing Classical Form (2013)\">\n        <div>\n          <a\n            href=\"https://www.music.mcgill.ca/acf/\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            the original companion website\n          </a>\n        </div>\n        <Example\n          name={\"2.1. Beethoven, Piano Sonata in F minor, Op. 2, No. 1\"}\n          pathname={\"f/beethoven_sonata_in_f_minor_op_2_no_1_movement_i\"}\n        />\n        <Example\n          name={\"2.2. Mozart, Rondo in D, K. 485\"}\n          pathname={\n            \"f/mozart_rondo_in_d_major_k_485_professional_production_score\"\n          }\n        />\n        <Example\n          name={\"2.3. Beethoven, Piano Sonata in G, Op. 14, No. 2/i\"}\n          pathname={\"f/beethoven_sonata_in_g_op_14_no_2_movement_i\"}\n        />\n        <Example\n          name={\"2.6. Mozart, Piano Sonata in C, K. 330/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2011,%20K330%20%20I.%20Allegro%20moderato.mid\"\n          }\n        />\n        <Example\n          name={\"2.7. Beethoven, Bagatelle in G minor, Op. 119, No. 1\"}\n          pathname={\n            \"f/bagatelle_in_g_minor_op_119_no_1_ludwig_van_beethoven_16_07_1770_26_03_1827_piano_solo\"\n          }\n        />\n        <Example\n          name={\"2.9. Mozart, Piano Sonata in G, K. 283/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%205,%20K283.mid\"\n          }\n        />\n        <Example\n          name={`2.10. Mozart, String Quartet in C (\"Dissonance\"), K. 465/i`}\n          pathname={\"f/mozart_string_quartet_no_19_in_c_major_k465_dissonance\"}\n        />\n        <Example\n          name={`2.11. Mozart, Piano Sonata in C, K. 309/iii`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2010,%20K309%20%20III.%20Presto.mid\"\n          }\n        />\n        <Example\n          name={\"2.13. Beethoven, Piano Sonata in G, Op. 14, No. 2/i\"}\n          pathname={\"f/beethoven_sonata_in_g_op_14_no_2_movement_i\"}\n        />\n        <Example\n          name={\"2.14. Mozart, Piano Sonata in C, K. 330/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2011,%20K330%20%20I.%20Allegro%20moderato.mid\"\n          }\n        />\n        <Example\n          name={`2.15. Mozart, Piano Sonata in C, K. 309/iii`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2010,%20K309%20%20III.%20Presto.mid\"\n          }\n        />\n        <Example\n          name={`2.16. Mozart, Piano Sonata in D, K. 311/iii`}\n          pathname={\"f/sonata_no_9_3rd_movement_k_311\"}\n        />\n        <Example\n          name={`2.17. Mozart, String Quartet in C (\"Dissonance\"), K. 465/i`}\n          pathname={\"f/mozart_string_quartet_no_19_in_c_major_k465_dissonance\"}\n        />\n        <Example\n          name={\"2.18. Beethoven, Bagatelle in G minor, Op. 119, No. 1\"}\n          pathname={\n            \"f/bagatelle_in_g_minor_op_119_no_1_ludwig_van_beethoven_16_07_1770_26_03_1827_piano_solo\"\n          }\n        />\n        <Example\n          name={\"2.23. Beethoven, Piano Sonata in C, Op. 2, No. 3/i\"}\n          pathname={\n            \"f/piano_sonata_no_3_in_c_major_op_2_no_3_ludwig_van_beethoven_piano_sonata_no_3_in_c_major_op_2_no_3_complete\"\n          }\n        />\n        <Example\n          name={\"2.25. Mozart, String Quartet in A, K. 464/ii (from m. 546)\"}\n          pathname={\"f/mozart_string_quartet_no_18_in_a_major_k464\"}\n        />\n        <Example\n          name={\"2.26. Mozart, Piano Sonata in F, K. 332/ii\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2013,%20K332%20%20II.%20Menuetto.mid\"\n          }\n        />\n        <Example\n          name={\"2.27. Beethoven, Symphony No. 5 in C minor, Op. 67/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Beethoven/Symphony%20No.%205%20(Galimberti)%20-%201.mid\"\n          }\n        />\n        <Example\n          name={\"2.29. Beethoven (?), Piano Sonatina in G, Anh. 5/i\"}\n          pathname={\"f/sonatina_in_g_beethoven_anh_5_no_1_beethoven\"}\n        />\n        <Example\n          name={\"2.30. Mozart, Fantasy for Piano in D minor, K. 397\"}\n          pathname={\"f/fantasia_in_d_minor_k_397_385g_wolfgang_amadeus_mozart\"}\n        />\n        <Example\n          name={\"2.33. Mozart, Piano Sonata in F, K. 332/iii\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2013,%20K332%20%20III.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={\"2.34. Beethoven, Piano Trio in B-flat, Op. 11/ii\"}\n          pathname={\n            \"f/beethoven_trio_for_clarinet_cello_and_piano_no_4_op_11_2nd_movement\"\n          }\n        />\n        <Example\n          name={\"2.35. Haydn, Piano Sonata in E minor, H. 34/ii\"}\n          pathname={\n            \"f/sonata_in_e_minor_hob_xvi_34_joseph_haydn_piano_sonata_hob_xvi_34_2_adagio\"\n          }\n        />\n      </Section>\n\n      <Section title=\"Barbershop\">\n        <Example\n          name={\"Kristofer Maddigan, Cuphead  A Quick Break\"}\n          pathname={\"f/cuphead_a_quick_break\"}\n        />\n        <Example\n          name={\n            \"Kristofer Maddigan, Cuphead  Don't Deal With The Devil (incomplete arrangement)\"\n          }\n          pathname={\"f/don_t_deal_with_the_devil_barbershop_quartet_cuphead\"}\n        />\n        <Example\n          name={\"God Only Knows, arr. Clay Hine (OST 'Bioshock Infinite')\"}\n          pathname={\"f/god_only_knows_bioshock_infinite_2013\"}\n        />\n        <Example\n          name={\"Chauncey Olcott, My Wild Irish Rose (polecat)\"}\n          pathname={\"f/my_wild_irish_rose\"}\n        />\n        <Example\n          name={\n            \"Never Gonna Give You Up (Rick Roll) - not a barbershop harmony\"\n          }\n          pathname={\"f/never_gunna_give_you_up_barbershop\"}\n        />\n      </Section>\n\n      {/* <Section title=\"Drew Nobile. Form as Harmony in Rock Music\">\n        <Example\n          name={\"2.1. Beethoven, Piano Sonata in F minor, Op. 2, No. 1\"}\n          pathname={\"f/beethoven_sonata_in_f_minor_op_2_no_1_movement_i\"}\n        />\n      </Section> */}\n\n      {/* <Example\n          name={\"Fr Elise\"}\n          pathname={\"f/Fr_Elise\"}\n        /> */}\n\n      {/* <Example\n          name={\"Interstellar\"}\n          pathname={\"f/Interstellar\"}\n        />\n        <Example\n          name={\"Moonlight Sonata\"}\n          pathname={\n            \"f/Sonate_No._14_Moonlight_1st_Movement\"\n          }\n        /> */}\n\n      {/* <Example\n          name={\"Minecraft  Wet Hands\"}\n          pathname={\n            \"f/Wet_Hands_Minecraft\"\n          }\n        /> */}\n\n      {/* <Example\n          name={\"Ed Sheeran  Shape of You\"}\n          pathname={\n            \"f/Ed_Sheeran_Shape_of_you\"\n          }\n        /> */}\n      {/* <Example\n          name={\"Ed Sheeran  Photograph\"}\n          pathname={\n            \"f/Photograph_Ed_Sheeran\"\n          }\n        /> */}\n\n      {/* <Example\n          name={\"Billie Eilish  Bad Guy\"}\n          pathname={\n            \"f/Billie_Eilish_Bad_Guy\"\n          }\n        /> */}\n\n      <div style={{ marginTop: 100 }}>\n        <Link to={{ pathname: \"/course\" }} style={{ fontSize: 26 }}>\n          A course on rock harmony and arrangement\n        </Link>\n      </div>\n      <div style={{ marginTop: 100 }}>\n        I'm{\" \"}\n        <a href=\"mailto:cxielamiko@gmail.com\" target=\"_blank\" rel=\"noreferrer\">\n          Vitaly Pavlenko\n        </a>\n        . I explain my approach in{\" \"}\n        <a\n          href=\"https://twitter.com/vitalypavlenko/status/1771820942680830417\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          39 tweets\n        </a>\n        . The code is{\" \"}\n        <a\n          href=\"https://github.com/vpavlenko/rawl\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          on Github\n        </a>\n        . I also collect{\" \"}\n        <a\n          href=\"https://github.com/vpavlenko/study-music\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          resources on music theory\n        </a>\n      </div>\n    </Content>\n  </Container>\n);\n\nexport default OldLandingPage;\n","import React from \"react\";\n\nconst shortcuts = {\n  Global: {\n    h: \"Toggle this help modal\",\n    Space: \"Play/Pause\",\n    \"-\": \"Decrease speed by 0.1\",\n    _: \"Decrease speed by 0.01\",\n    \"=\": \"Increase speed by 0.1\",\n    \"+\": \"Increase speed by 0.01\",\n    ArrowLeft: \"Seek backward 5 seconds\",\n    ArrowRight: \"Seek forward 5 seconds\",\n    f: \"Switch to frozen layout\",\n  },\n};\n\nconst styles = {\n  container: {\n    fontFamily: \"Arial, sans-serif\",\n    color: \"#ffffff\",\n    padding: \"20px\",\n    maxWidth: \"600px\",\n    margin: \"0 auto\",\n  },\n  h2: {\n    borderBottom: \"1px solid #444\",\n    paddingBottom: \"10px\",\n    marginBottom: \"20px\",\n  },\n  category: {\n    marginBottom: \"20px\",\n  },\n  h3: {\n    color: \"#bb86fc\",\n    marginBottom: \"10px\",\n  },\n  table: {\n    width: \"100%\",\n    borderCollapse: \"collapse\" as const,\n  },\n  tr: {\n    borderBottom: \"1px solid #333\",\n  },\n  td: {\n    padding: \"8px 0\",\n  },\n  kbd: {\n    backgroundColor: \"#333\",\n    color: \"#fff\",\n    padding: \"2px 5px\",\n    borderRadius: \"3px\",\n    fontFamily: \"monospace\",\n    fontSize: \"0.9em\",\n  },\n};\n\nexport const ShortcutHelp: React.FC = () => (\n  <div style={styles.container}>\n    <h2 style={styles.h2}>Keyboard Shortcuts</h2>\n    {Object.entries(shortcuts).map(([category, categoryShortcuts]) => (\n      <div key={category} style={styles.category}>\n        <h3 style={styles.h3}>{category}</h3>\n        <table style={styles.table}>\n          <tbody>\n            {Object.entries(categoryShortcuts).map(([key, description]) => (\n              <tr key={key} style={styles.tr}>\n                <td style={styles.td}>\n                  <kbd style={styles.kbd}>{key}</kbd>\n                </td>\n                <td style={styles.td}>{description}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    ))}\n  </div>\n);\n","import * as React from \"react\";\nimport { AppContext } from \"../../AppContext\";\nimport { filterSnippetsByAccess, getSnippetTags } from \"../analysis\";\nimport { ComposerTitle } from \"../book/Book\";\nimport { TOP_100_COMPOSERS, type Top100Composer } from \"../top100Composers\";\nimport { corpora } from \"./corpora\";\nimport { beautifySlug } from \"./utils\";\n\ninterface ComposerInfo {\n  slug: string;\n  composer: string;\n  order?: number;\n}\n\nconst Corpus: React.FC<{\n  slug: string;\n  composers?: ComposerInfo[];\n}> = ({ slug, composers }) => {\n  const { analyses } = React.useContext(AppContext);\n  const searchInputRef = React.useRef<HTMLInputElement>(null);\n\n  React.useEffect(() => {\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }, []);\n\n  const getTagsForMidi = (midiSlug: string) => {\n    const analysis = analyses[`f/${midiSlug}`];\n    if (analysis) {\n      const filteredAnalysis = {\n        ...analysis,\n        snippets: filterSnippetsByAccess(analysis.snippets || []),\n      };\n      const tags = getSnippetTags(filteredAnalysis);\n      return tags.length > 0 ? tags : null;\n    }\n    return null;\n  };\n\n  const getComposerOrder = (midiSlug: string) => {\n    if (!composers) return undefined;\n    const composer = composers.find((c) => c.slug === midiSlug);\n    return composer?.order;\n  };\n\n  const getComposerInfo = (midiSlug: string): Top100Composer | undefined => {\n    return TOP_100_COMPOSERS.find((c) => c.slug === midiSlug);\n  };\n\n  const corpus = corpora.filter((corpus) => corpus.slug === slug)?.[0];\n  if (!corpus) {\n    return <div>Corpus {slug} not found</div>;\n  }\n\n  return (\n    <div style={{ marginBottom: \"100px\" }}>\n      <h1>{beautifySlug(slug)}</h1>\n      {corpus.posttext}\n      {corpus.midis.map((midiSlug, index) => {\n        const order = getComposerOrder(midiSlug);\n        const hasOrder = order !== undefined;\n        const composerInfo = getComposerInfo(midiSlug);\n\n        return (\n          <div\n            key={midiSlug}\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              marginBottom: \"10px\",\n            }}\n          >\n            <span style={{ marginRight: \"0.3em\", color: \"gray\" }}>{`${\n              index + 1\n            }. `}</span>\n            <a\n              href={`/f/${midiSlug}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              style={{\n                textDecoration: hasOrder ? \"line-through\" : \"none\",\n                color: hasOrder ? \"gray\" : \"#ffaa00\",\n              }}\n            >\n              {composerInfo ? (\n                <ComposerTitle\n                  composer={composerInfo.composer}\n                  displayTitle={composerInfo.displayTitle}\n                  style={{\n                    color: hasOrder ? \"gray\" : \"inherit\",\n                  }}\n                />\n              ) : (\n                beautifySlug(midiSlug)\n              )}\n              {hasOrder && <span style={{ marginLeft: \"5px\" }}>({order})</span>}\n            </a>\n            {getTagsForMidi(midiSlug) && (\n              <div\n                style={{\n                  marginLeft: \"50px\",\n                  display: \"flex\",\n                  flexWrap: \"wrap\",\n                }}\n              >\n                {getTagsForMidi(midiSlug).map((tag, index) => {\n                  const [chapter, topic] = tag.split(\":\");\n                  return (\n                    <div\n                      key={index}\n                      style={{\n                        color: hasOrder ? \"gray\" : \"inherit\",\n                        fontSize: \"0.7em\",\n                        marginRight: \"10px\",\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        alignItems: \"left\",\n                        lineHeight: \"1.2\",\n                      }}\n                    >\n                      <span style={{ color: \"gray\" }}>\n                        {chapter?.replace(/_/g, \" \")}\n                      </span>\n                      <span style={{ color: \"white\" }}>\n                        {topic?.replace(/_/g, \" \")}\n                      </span>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Corpus;\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { Analysis, filterSnippetsByAccess, Snippet } from \"../analysis\";\nimport InlineRawlPlayer from \"../InlineRawlPlayer\";\nimport SnippetList from \"../SnippetList\";\nimport EXPLANATIONS from \"./explanations\";\n\nconst PathContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  margin: 10px 0 0 0;\n  padding: 0;\n`;\n\nconst MenuContainer = styled.div<{ isRawlVisible?: boolean }>`\n  width: 100%;\n  height: ${(props) =>\n    props.isRawlVisible ? \"calc(50vh - 30px)\" : \"calc(100vh - 30px)\"};\n  overflow-y: auto;\n  background-color: black;\n  transition: height 0.3s ease-in-out;\n`;\n\nconst ChapterRow = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: black;\n  width: 100%;\n`;\n\nconst ScrollableContent = styled.div`\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden; // Remove horizontal scrolling\n  padding-top: 0; // Adjust padding to account for fixed menus\n`;\n\nconst ChapterButton = styled.button<{ active: boolean }>`\n  padding: 0px 5px;\n  text-align: left;\n  background-color: ${(props) => (props.active ? \"white\" : \"black\")};\n  color: ${(props) => (props.active ? \"black\" : \"white\")};\n  border: none;\n  cursor: pointer;\n  white-space: nowrap;\n  font-size: 14px;\n  border-radius: 4px;\n  width: fit-content;\n  user-select: none;\n\n  &:hover {\n    background-color: ${(props) => (props.active ? \"white\" : \"#333\")};\n  }\n`;\n\nconst CategorySection = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 16px;\n  width: fit-content;\n`;\n\nconst CategoryHeader = styled.div`\n  padding-left: 5px;\n  color: #999;\n  font-size: 14px;\n  letter-spacing: 0.5px;\n  text-align: left;\n  user-select: none;\n`;\n\nconst ChaptersContainer = styled.div<{ twoColumns?: boolean }>`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  width: fit-content;\n\n  ${(props) =>\n    props.twoColumns &&\n    `\n    flex-direction: row;\n    gap: 0px;\n    \n    > div {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n    }\n  `}\n`;\n\nconst TopicContainer = styled.div`\n  padding: 0; // Remove padding since we don't need spacing between topics anymore\n`;\n\nconst TopicCard = styled.div`\n  background-color: #000000;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  width: 100%;\n  box-sizing: border-box;\n`;\n\nconst ErrorMessage = styled.div`\n  color: red;\n  margin-bottom: 10px;\n`;\n\nconst HomeChapter = styled.div`\n  font-size: 24px;\n  color: white;\n  text-align: center;\n  padding: 20px;\n`;\n\nconst TopicMenu = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  padding: 0px 16px 16px 16px;\n  background-color: black;\n  position: sticky;\n  top: 0;\n  z-index: 100000;\n`;\n\nconst TopicBubble = styled.span<{ active: boolean }>`\n  cursor: pointer;\n  background-color: ${(props) => (props.active ? \"white\" : \"black\")};\n  color: ${(props) => (props.active ? \"black\" : \"white\")};\n  padding: 6px 12px;\n  border-radius: 16px;\n  font-size: 14px;\n  text-decoration: none;\n  user-select: none;\n\n  &:hover {\n    background-color: ${(props) => (props.active ? \"white\" : \"#333\")};\n  }\n`;\n\nconst EjectButton = styled.button`\n  position: absolute;\n  top: -29px; // Position it above the player\n  right: 0;\n  background: #333;\n  color: white;\n  border: none;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  padding: 4px 8px;\n  cursor: pointer;\n  z-index: 100001; // Higher than TopicMenu\n  transition: background-color 0.2s;\n\n  &:hover {\n    background: #444;\n  }\n`;\n\nconst ChapterCategories = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 24px;\n  padding: 8px;\n`;\n\ntype ChapterCategories = {\n  [category: string]: string[];\n};\n\nconst CHAPTER_CATEGORIES: ChapterCategories = {\n  order_of_chords: [\n    \"major_cadence\",\n    \"progression\",\n    \"cycle_root_motion\",\n    \"shuttle\",\n    \"stasis\",\n    \"chunks\",\n    \"minor_cadence\",\n    \"last_chords\",\n  ],\n  texture: [\n    \"bass\",\n    \"voicing\",\n    \"LH\",\n    \"RH\",\n    \"doubling\",\n    \"arpeggio\",\n    \"texture\",\n    \"voice-leading\",\n    \"interval\",\n    \"inversion\",\n  ],\n  melody: [\"melody\", \"nonchord_tone\", \"ornament\", \"reharmonization\"],\n  chromaticism: [\n    \"applied\",\n    \"6_b6\",\n    \"chromatic_chords\",\n    \"cto7\",\n    \"rare_functional\",\n    \"chord_scale\",\n    \"b2\",\n    \"constant_structures\",\n    \"symmetric_chords\",\n    \"vgm_chromatic\",\n  ],\n  modulation: [\"modulation\", \"relative\", \"parallel\"],\n  scale: [\n    \"scale\",\n    \"dorian\",\n    \"mixolydian\",\n    \"modal_interchange\",\n    \"steady_scale\",\n    \"minor\",\n    \"predominants\",\n    \"pure_major\",\n    \"root_motion\",\n  ],\n  chord_types: [\n    \"chords\",\n    \"seventh_chords\",\n    \"V\",\n    \"extensions\",\n    \"ninth_chords\",\n    \"jazz\",\n  ],\n  rhythm_and_meter: [\"meter\", \"rhythm\", \"hypermeter\", \"harmonic_rhythm\"],\n  misc: [],\n};\n\nexport interface StructuresProps {\n  analyses: { [key: string]: Analysis };\n  initialChapter?: string;\n  initialTopic?: string;\n}\n\ninterface SnippetWithSlug {\n  snippet: Snippet;\n  slug: string;\n}\n\ninterface ChapterData {\n  chapter: string;\n  topics: {\n    topic: string;\n    snippets: SnippetWithSlug[];\n  }[];\n}\n\nconst formatCategoryLabel = (category: string) => {\n  return category\n    .split(\"_\")\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(\" \");\n};\n\nconst getMiscChapters = (\n  chapterData: ChapterData[],\n  categories: ChapterCategories,\n) => {\n  const allCategorizedChapters = new Set<string>();\n\n  Object.values(categories).forEach((contents) => {\n    contents.forEach((chapter) => allCategorizedChapters.add(chapter));\n  });\n\n  return chapterData.filter(\n    (chapter) => !allCategorizedChapters.has(chapter.chapter),\n  );\n};\n\n// Add this new component to render topic content\nconst TopicContent: React.FC<{\n  activeTopic: string;\n  activeChapter: number;\n  chapterData: ChapterData[];\n  snippets: { topic: string; snippets: SnippetWithSlug[] }[];\n  handleSnippetClick: (\n    slug: string,\n    measureStart: number,\n    topic: string,\n  ) => void;\n  loadingSnippets: Set<string>;\n}> = ({\n  activeTopic,\n  activeChapter,\n  chapterData,\n  snippets,\n  handleSnippetClick,\n  loadingSnippets,\n}) => {\n  console.log(\"TopicContent render, loadingSnippets:\", loadingSnippets);\n\n  return (\n    <ScrollableContent>\n      {activeTopic &&\n        snippets\n          .filter(({ topic }) => topic === activeTopic)\n          .map(({ topic, snippets }) => {\n            console.log(\"Rendering snippets for topic:\", topic);\n            console.log(\"Current loadingSnippets:\", loadingSnippets);\n\n            const fullTag = `${chapterData[activeChapter].chapter}:${topic}`;\n            const explanation = EXPLANATIONS[fullTag];\n\n            return (\n              <TopicContainer key={topic}>\n                {explanation && (\n                  <div\n                    style={{\n                      color: \"white\",\n                      fontSize: \"16px\",\n                      padding: \"16px 16px\",\n                    }}\n                  >\n                    {explanation}\n                  </div>\n                )}\n                <TopicCard>\n                  <SnippetList\n                    snippets={snippets.map(({ snippet }) => snippet)}\n                    slugs={snippets.map(({ slug }) => {\n                      console.log(\n                        \"Snippet slug:\",\n                        slug,\n                        \"isLoading:\",\n                        loadingSnippets.has(slug),\n                      );\n                      return slug;\n                    })}\n                    onSnippetClick={(snippet) => {\n                      const matchingSnippet = snippets.find(\n                        (s) => s.snippet === snippet,\n                      );\n                      if (matchingSnippet) {\n                        console.log(\"Snippet clicked:\", matchingSnippet.slug);\n                        handleSnippetClick(\n                          matchingSnippet.slug,\n                          snippet.measuresSpan[0],\n                          topic,\n                        );\n                      }\n                    }}\n                    isPreview={true}\n                    noteHeight={3}\n                    loadingSnippets={loadingSnippets}\n                  />\n                </TopicCard>\n              </TopicContainer>\n            );\n          })}\n    </ScrollableContent>\n  );\n};\n\nconst Structures: React.FC<StructuresProps> = ({\n  analyses,\n  initialChapter,\n  initialTopic,\n}) => {\n  const { handleSongClick, currentMidi, rawlProps, eject, togglePause } =\n    useContext(AppContext);\n  const location = useLocation();\n  const history = useHistory();\n  const [loading, setLoading] = useState(true);\n  const [errorMessages, setErrorMessages] = useState<string[]>([]);\n  const [chapterData, setChapterData] = useState<ChapterData[]>([]);\n  const [activeChapter, setActiveChapter] = useState(0);\n  const [selectedMeasureStart, setSelectedMeasureStart] = useState<\n    number | undefined\n  >(undefined);\n  const [isRawlVisible, setIsRawlVisible] = useState(false);\n  const [activeTopic, setActiveTopic] = useState<string | undefined>(() => {\n    return initialTopic;\n  });\n  const [loadingSnippets, setLoadingSnippets] = useState<Set<string>>(\n    new Set(),\n  );\n\n  // Add this function to select first topic\n  const selectFirstTopicFromChapter = useCallback(\n    (chapterIndex: number) => {\n      if (chapterData[chapterIndex]?.topics.length > 0) {\n        const firstTopic = chapterData[chapterIndex].topics[0].topic;\n        setActiveTopic(firstTopic);\n        history.push(`/s/${chapterData[chapterIndex].chapter}/${firstTopic}`);\n      }\n    },\n    [chapterData, history],\n  );\n\n  // Modify the chapter selection handler\n  const handleChapterSelect = useCallback(\n    (index: number) => {\n      eject(); // Eject current playback when changing chapter\n      setIsRawlVisible(false); // Hide the InlineRawl\n      setActiveChapter(index);\n      selectFirstTopicFromChapter(index);\n    },\n    [selectFirstTopicFromChapter, eject],\n  );\n\n  const processAnalyses = useCallback(() => {\n    const data: { [chapter: string]: ChapterData } = {};\n    const errors: string[] = [];\n\n    Object.entries(analyses).forEach(([path, analysis]) => {\n      const slug = path.startsWith(\"f/\") ? path.slice(2) : path;\n\n      if (analysis.snippets && analysis.snippets.length > 0) {\n        filterSnippetsByAccess(analysis.snippets).forEach((snippet) => {\n          const snippetWithSlug = {\n            ...snippet,\n            composerSlug: slug,\n          };\n\n          const [chapter, topic] = snippet.tag.split(\":\");\n          if (!chapter || !topic) {\n            errors.push(`Invalid tag format: ${snippet.tag}`);\n            return;\n          }\n\n          if (!data[chapter]) {\n            data[chapter] = {\n              chapter,\n              topics: [],\n            };\n          }\n\n          let topicData = data[chapter].topics.find((t) => t.topic === topic);\n          if (!topicData) {\n            topicData = {\n              topic,\n              snippets: [],\n            };\n            data[chapter].topics.push(topicData);\n          }\n\n          topicData.snippets.push({\n            snippet: snippetWithSlug,\n            slug,\n          });\n        });\n      }\n    });\n\n    setErrorMessages(errors);\n    setChapterData(Object.values(data));\n    setLoading(false);\n  }, [analyses]);\n\n  useEffect(() => {\n    processAnalyses();\n  }, [processAnalyses]);\n\n  useEffect(() => {\n    if (initialChapter) {\n      const chapterIndex = chapterData.findIndex(\n        (c) => c.chapter === initialChapter,\n      );\n\n      if (chapterIndex !== -1) {\n        setActiveChapter(chapterIndex);\n        if (initialTopic) {\n          setActiveTopic(initialTopic);\n        } else {\n          selectFirstTopicFromChapter(chapterIndex);\n        }\n      }\n    } else if (chapterData.length > 0) {\n      // If no initialChapter is provided and we have chapters, select the first one\n      setActiveChapter(0);\n      selectFirstTopicFromChapter(0);\n    }\n  }, [initialChapter, initialTopic, chapterData, selectFirstTopicFromChapter]);\n\n  useEffect(() => {\n    setIsRawlVisible(!!currentMidi);\n  }, [currentMidi]);\n\n  // Modify handleTopicClick to eject current playback\n  const handleTopicClick = (topic: string) => {\n    eject(); // Eject current playback when changing topic\n    setIsRawlVisible(false); // Hide the InlineRawl\n    setActiveTopic(topic);\n  };\n\n  const handleSnippetClick = useCallback(\n    async (slug: string, measureStart: number, topic: string) => {\n      console.log(\"[Structures] handleSnippetClick - Starting with:\", {\n        slug,\n        measureStart,\n        topic,\n      });\n\n      // Eject current playback before loading new snippet\n      if (currentMidi && currentMidi.slug !== slug) {\n        eject();\n      }\n\n      setLoadingSnippets((prev) => {\n        const next = new Set([...prev, slug]);\n        console.log(\"[Structures] Setting loadingSnippets to:\", next);\n        return next;\n      });\n\n      try {\n        console.log(\"[Structures] Calling handleSongClick...\");\n        await handleSongClick(slug);\n        console.log(\"[Structures] handleSongClick completed\");\n\n        setSelectedMeasureStart(measureStart);\n        console.log(\"[Structures] Set measure start to:\", measureStart);\n\n        // Don't call handleTopicClick here since it ejects the playback\n        if (topic && topic !== activeTopic) {\n          setActiveTopic(topic);\n        }\n\n        // Force playback to start\n        if (currentMidi?.slug === slug) {\n          console.log(\"[Structures] Starting playback for:\", slug);\n          togglePause();\n        }\n      } finally {\n        setLoadingSnippets((prev) => {\n          const next = new Set(prev);\n          next.delete(slug);\n          console.log(\"[Structures] Removing from loadingSnippets:\", next);\n          return next;\n        });\n      }\n    },\n    [handleSongClick, activeTopic, currentMidi, togglePause, eject],\n  );\n\n  // Add useEffect to handle initial navigation into Structures\n  useEffect(() => {\n    const path = location.pathname;\n    if (!path.startsWith(\"/s/\")) {\n      eject();\n      setIsRawlVisible(false); // Hide the InlineRawl\n    }\n  }, [location, eject]);\n\n  return (\n    <PathContainer>\n      <MenuContainer isRawlVisible={isRawlVisible}>\n        <ChapterRow>\n          <ChapterCategories>\n            {Object.entries(CHAPTER_CATEGORIES).map(([category, contents]) => {\n              let categoryChapters = chapterData.filter((chapter) => {\n                if (category === \"misc\") {\n                  return getMiscChapters(chapterData, CHAPTER_CATEGORIES).some(\n                    (c) => c.chapter === chapter.chapter,\n                  );\n                }\n                return contents.includes(chapter.chapter);\n              });\n\n              // Sort chapters alphabetically\n              categoryChapters.sort((a, b) =>\n                a.chapter.localeCompare(b.chapter),\n              );\n\n              if (categoryChapters.length === 0) return null;\n\n              const shouldUseTwoColumns = categoryChapters.length > 5;\n              const midPoint = Math.ceil(categoryChapters.length / 2);\n\n              return (\n                <CategorySection key={category}>\n                  <CategoryHeader>\n                    {formatCategoryLabel(category)}\n                  </CategoryHeader>\n                  <ChaptersContainer twoColumns={shouldUseTwoColumns}>\n                    {shouldUseTwoColumns ? (\n                      <>\n                        <div>\n                          {categoryChapters\n                            .slice(0, midPoint)\n                            .map((chapter) => {\n                              const index = chapterData.findIndex(\n                                (c) => c.chapter === chapter.chapter,\n                              );\n                              return (\n                                <ChapterButton\n                                  key={chapter.chapter}\n                                  active={activeChapter === index}\n                                  onClick={() => handleChapterSelect(index)}\n                                >\n                                  {chapter.chapter.replace(/_/g, \" \")}\n                                </ChapterButton>\n                              );\n                            })}\n                        </div>\n                        <div>\n                          {categoryChapters.slice(midPoint).map((chapter) => {\n                            const index = chapterData.findIndex(\n                              (c) => c.chapter === chapter.chapter,\n                            );\n                            return (\n                              <ChapterButton\n                                key={chapter.chapter}\n                                active={activeChapter === index}\n                                onClick={() => handleChapterSelect(index)}\n                              >\n                                {chapter.chapter.replace(/_/g, \" \")}\n                              </ChapterButton>\n                            );\n                          })}\n                        </div>\n                      </>\n                    ) : (\n                      categoryChapters.map((chapter) => {\n                        const index = chapterData.findIndex(\n                          (c) => c.chapter === chapter.chapter,\n                        );\n                        return (\n                          <ChapterButton\n                            key={chapter.chapter}\n                            active={activeChapter === index}\n                            onClick={() => handleChapterSelect(index)}\n                          >\n                            {chapter.chapter.replace(/_/g, \" \")}\n                          </ChapterButton>\n                        );\n                      })\n                    )}\n                  </ChaptersContainer>\n                </CategorySection>\n              );\n            })}\n          </ChapterCategories>\n        </ChapterRow>\n        {!loading && chapterData[activeChapter] && (\n          <TopicMenu>\n            {chapterData[activeChapter].topics\n              .slice()\n              .sort((a, b) => a.topic.localeCompare(b.topic))\n              .map(({ topic }) => (\n                <TopicBubble\n                  key={topic}\n                  active={activeTopic === topic}\n                  onClick={() => {\n                    handleTopicClick(topic);\n                    history.push(\n                      `/s/${chapterData[activeChapter].chapter}/${topic}`,\n                    );\n                  }}\n                >\n                  {topic.replace(/_/g, \" \")}\n                </TopicBubble>\n              ))}\n          </TopicMenu>\n        )}\n        <ScrollableContent>\n          {loading ? (\n            <HomeChapter>Loading...</HomeChapter>\n          ) : errorMessages.length > 0 ? (\n            errorMessages.map((error, index) => (\n              <ErrorMessage key={index}>{error}</ErrorMessage>\n            ))\n          ) : (\n            <CategorySection>\n              <TopicContent\n                activeTopic={activeTopic}\n                activeChapter={activeChapter}\n                chapterData={chapterData}\n                snippets={chapterData[activeChapter]?.topics || []}\n                handleSnippetClick={handleSnippetClick}\n                loadingSnippets={loadingSnippets}\n              />\n            </CategorySection>\n          )}\n        </ScrollableContent>\n      </MenuContainer>\n      {isRawlVisible && currentMidi && (\n        <div style={{ position: \"relative\" }}>\n          <EjectButton\n            onClick={() => {\n              eject();\n              setIsRawlVisible(false);\n            }}\n          >\n            \n          </EjectButton>\n          <InlineRawlPlayer {...rawlProps} measureStart={selectedMeasureStart}>\n            <TopicContent\n              activeTopic={activeTopic}\n              activeChapter={activeChapter}\n              chapterData={chapterData}\n              snippets={chapterData[activeChapter]?.topics || []}\n              handleSnippetClick={handleSnippetClick}\n              loadingSnippets={loadingSnippets}\n            />\n          </InlineRawlPlayer>\n        </div>\n      )}\n    </PathContainer>\n  );\n};\n\nexport default Structures;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport Rawl from \"./Rawl\";\n\nconst ContentArea = styled.div<{ isRawlVisible: boolean }>`\n  flex-grow: 1;\n  height: ${(props) =>\n    props.isRawlVisible ? \"calc(50vh - 30px)\" : \"calc(100vh - 30px)\"};\n  overflow-y: auto;\n  transition: height 0.3s ease-in-out;\n`;\n\nconst RawlContainer = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 50vh;\n  background-color: #000;\n  z-index: 200000;\n  overflow: auto;\n`;\n\ninterface InlineRawlPlayerProps {\n  children: React.ReactNode;\n  measureStart?: number;\n}\n\nconst InlineRawlPlayer: React.FC<InlineRawlPlayerProps> = ({\n  children,\n  measureStart,\n}) => {\n  const { currentMidi, rawlProps, saveAnalysis } = useContext(AppContext);\n  const [isRawlVisible, setIsRawlVisible] = useState(false);\n\n  useEffect(() => {\n    setIsRawlVisible(!!currentMidi);\n  }, [currentMidi]);\n\n  return (\n    <>\n      <ContentArea isRawlVisible={isRawlVisible}>{children}</ContentArea>\n      {currentMidi && rawlProps && rawlProps?.parsingResult && (\n        <RawlContainer>\n          <Rawl\n            parsingResult={rawlProps.parsingResult}\n            getCurrentPositionMs={rawlProps.getCurrentPositionMs}\n            savedAnalysis={rawlProps.savedAnalysis}\n            saveAnalysis={saveAnalysis}\n            voiceNames={rawlProps.voiceNames}\n            voiceMask={rawlProps.voiceMask}\n            setVoiceMask={rawlProps.setVoiceMask}\n            showAnalysisBox={rawlProps.showAnalysisBox}\n            seek={rawlProps.seek}\n            latencyCorrectionMs={rawlProps.latencyCorrectionMs}\n            sourceUrl={currentMidi.sourceUrl}\n            measureStart={measureStart}\n            isEmbedded={true}\n          />\n        </RawlContainer>\n      )}\n    </>\n  );\n};\n\nexport default InlineRawlPlayer;\n","import { toggleComment } from \"@codemirror/commands\";\nimport { StreamLanguage } from \"@codemirror/language\";\nimport { keymap } from \"@codemirror/view\";\nimport CodeMirror from \"@uiw/react-codemirror\";\nimport {\n  addDoc,\n  collection,\n  doc,\n  getDoc,\n  getFirestore,\n} from \"firebase/firestore/lite\";\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { RouteComponentProps, useParams, withRouter } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { PitchClass } from \"../analysis\";\nimport { TICKS_PER_QUARTER } from \"../forge/constants\";\nimport Rawl from \"../Rawl\";\nimport {\n  calculateGlobalBeatPosition,\n  calculateShiftedNote,\n  logicalNoteToMidi,\n  parseCommand,\n} from \"./commandParser\";\nimport { characterBackgroundsPlugin, customTheme } from \"./EditorDecorations\";\nimport EditorIndex from \"./EditorIndex\";\nimport { generateMidiWithMetadata } from \"./EditorMidi\";\nimport {\n  EditorPanel as BaseEditorPanel,\n  CodeMirrorWrapper,\n  EditorContainer,\n  EditorContent,\n  ErrorMessage,\n  FoldButton,\n  RawlContainer,\n  ResizeHandle,\n} from \"./EditorStyles\";\nimport Manual from \"./Manual\";\nimport { scores } from \"./scores\";\nimport { Command, CommandContext, LogicalNote } from \"./types\";\n\n// Define a simple language for the editor that supports % comments\nconst rawlLanguage = StreamLanguage.define({\n  name: \"rawl\",\n  languageData: {\n    commentTokens: { line: \"%\" },\n  },\n  // Basic token method required by StreamLanguage\n  token(stream) {\n    // Skip whitespace\n    if (stream.eatSpace()) return null;\n\n    // Handle comments\n    if (stream.match(\"%\")) {\n      stream.skipToEnd();\n      return \"comment\";\n    }\n\n    // Skip to next token\n    stream.next();\n    return null;\n  },\n});\n\n// Types for command handling\ndeclare global {\n  interface Window {\n    __disableGlobalShortcuts?: boolean;\n  }\n}\n\ntype MidiNote = {\n  pitch: number;\n  velocity: number;\n  startTime: number;\n  duration: number;\n  channel: number;\n};\n\n// Add new styled component after EditorPanel\nconst KeyboardLayout = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  background: #1e1e1e;\n  border-right: 1px solid #333;\n  height: 100%;\n  min-height: 0;\n  overflow-y: auto;\n  flex: 0 0 250px;\n  font-size: 12px;\n  color: #ccc;\n  line-height: 1.6;\n\n  .top-section {\n    display: flex;\n    flex-direction: row;\n    margin-bottom: 20px;\n  }\n\n  .left-column {\n    flex: 0 0 15vw;\n    margin-right: 5px;\n  }\n\n  .right-column {\n    flex: 1;\n  }\n\n  .full-width-section {\n    width: 100%;\n  }\n\n  img {\n    width: 100%;\n    height: auto;\n    object-fit: contain;\n    z-index: 1;\n  }\n\n  .image-caption {\n    margin-top: 4px;\n    width: 100%;\n    color: #999;\n  }\n\n  code {\n    color: white;\n    background: #2a2a2a;\n    padding: 1px 4px;\n    border-radius: 3px;\n    white-space: nowrap;\n  }\n\n  .grid {\n    display: grid;\n    grid-template-columns: 190px 1fr;\n    gap: 4px 8px;\n    margin: 8px 0;\n    align-items: center;\n  }\n\n  .note-col {\n    text-align: right;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    gap: 4px;\n  }\n\n  .section {\n    margin: 24px;\n  }\n\n  .section:first-child {\n    margin-top: 0;\n  }\n\n  .section h3 {\n    margin: 0px;\n  }\n\n  /* Customize scrollbar */\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #1e1e1e;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #333;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #444;\n  }\n`;\n\nconst ButtonBar = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 10px;\n  border-bottom: 1px solid #333;\n  gap: 12px;\n`;\n\nconst PublishButton = styled.button<{\n  isPublishing?: boolean;\n  hasChanges: boolean;\n}>`\n  background: ${(props) => (props.isPublishing ? \"#999\" : \"#bbb\")};\n  color: black;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  position: relative;\n\n  &:hover {\n    background: ${(props) => (props.isPublishing ? \"#999\" : \"#ddd\")};\n  }\n\n  &:active {\n    background: ${(props) =>\n      props.isPublishing ? \"#999\" : \"rgb(255, 255, 255)\"};\n  }\n\n  &:disabled {\n    background: #666;\n    cursor: not-allowed;\n    color: black;\n\n    &:hover::after {\n      content: \"No changes made\";\n      position: absolute;\n      bottom: -30px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      padding: 4px 8px;\n      border-radius: 4px;\n      font-size: 12px;\n      white-space: nowrap;\n      pointer-events: none;\n    }\n  }\n\n  .spinner {\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n`;\n\nconst PublishedUrl = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background: #2a2a2a;\n  padding: 6px 12px;\n  border-radius: 4px;\n  font-size: 14px;\n  color: #ddd;\n  cursor: pointer;\n  user-select: none;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background: #333;\n  }\n\n  .copy-button {\n    color: #999;\n    transition: color 0.2s;\n  }\n\n  &:hover .copy-button {\n    color: #fff;\n  }\n`;\n\nconst NoteBase = styled.div`\n  position: relative;\n  height: 6px;\n  background: white;\n  margin: 0 4px;\n  display: inline-block;\n  box-shadow: 0 0 0px 0.5px black;\n  cursor: pointer;\n  vertical-align: middle;\n  border-radius: 2px;\n`;\n\nconst BeatMarker = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  background: gray;\n`;\n\ninterface NoteExampleProps {\n  beats: number; // Number of beats (e.g. 4 for whole note, 2 for half note)\n  style?: { width: string };\n}\n\nconst NoteExample: React.FC<NoteExampleProps> = ({ beats, style }) => {\n  const beatMarkers = [];\n\n  // Add a marker for each internal beat division\n  // For n beats we need n-1 markers\n  for (let i = 1; i < beats; i++) {\n    beatMarkers.push(<BeatMarker key={i} style={{ right: `${i * 30}px` }} />);\n  }\n\n  return <NoteBase style={style}>{beatMarkers}</NoteBase>;\n};\n\ninterface EditorProps extends RouteComponentProps {\n  // Add any other props here if needed\n}\n\nconst Editor: React.FC<EditorProps> = ({ history }) => {\n  // Update useParams to handle both slug and id\n  const { slug, id } = useParams<{ slug?: string; id?: string }>();\n  // Use either id or slug as the effective slug\n  const effectiveSlug = id || slug;\n\n  const [error, setError] = useState<string | null>(null);\n  const [isFolded, setIsFolded] = useState(false);\n  const editorRef = useRef<any>(null);\n  const cycleTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const debounceTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const { playSongBuffer, rawlProps, analyses, latencyCorrectionMs, tempo } =\n    useContext(AppContext);\n  const [score, setScore] = useState(\"\");\n  const [isEditorFocused, setIsEditorFocused] = useState(false);\n  const [currentLine, setCurrentLine] = useState<number | null>(null);\n  const [shadowScore, setShadowScore] = useState<string | null>(null);\n  const [isPlayingFromShadow, setIsPlayingFromShadow] = useState(false);\n  const [context, setContext] = useState<CommandContext>({\n    currentKey: { tonic: 0, mode: \"major\" },\n    currentTrack: 1,\n    timeSignatures: [{ numerator: 4, measureStart: 1 }],\n    channelOctaves: {\n      0: 5, // RH default\n      1: 3, // LH default\n    },\n    commentToEndOfFile: false,\n    currentBpm: 120, // Default BPM\n  });\n  const [panelHeight, setPanelHeight] = useState(() => {\n    const saved = localStorage.getItem(\"editorPanelHeight\");\n    return saved || \"50vh\";\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const dragStartY = useRef(0);\n  const dragStartHeight = useRef(0);\n  const [isPublishing, setIsPublishing] = useState(false);\n  const [publishedUrl, setPublishedUrl] = useState<string | null>(null);\n  const [showCopyFeedback, setShowCopyFeedback] = useState(false);\n  const [initialSource, setInitialSource] = useState<string>(\"\");\n\n  // Get the analysis for this slug if it exists\n  // For /ef/<id> URLs, use the mocked analysis\n  const analysis =\n    effectiveSlug?.startsWith(\"ef/\") || id\n      ? analyses[\"f/wima.e480-schubert_de.-tanz-d.365.25\"]\n      : analyses[`f/${effectiveSlug}`];\n\n  // Signal to App that this route should not have global shortcuts when editor is focused\n  useEffect(() => {\n    if (isEditorFocused) {\n      window.__disableGlobalShortcuts = true;\n    } else {\n      delete window.__disableGlobalShortcuts;\n    }\n  }, [isEditorFocused]);\n\n  const handleMouseDown = useCallback(\n    (e: React.MouseEvent) => {\n      console.log(\"Mouse down event triggered\");\n      setIsDragging(true);\n      dragStartY.current = e.clientY;\n      const currentHeight = window.innerHeight * (parseInt(panelHeight) / 100);\n      dragStartHeight.current = currentHeight;\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    [panelHeight],\n  );\n\n  const handleMouseMove = useCallback(\n    (e: MouseEvent) => {\n      if (!isDragging) return;\n\n      const delta = e.clientY - dragStartY.current;\n      console.log(\"Dragging:\", { delta, startHeight: dragStartHeight.current });\n      const newHeight = Math.max(200, dragStartHeight.current - delta);\n      const heightVh = Math.round((newHeight / window.innerHeight) * 100);\n      setPanelHeight(`${heightVh}vh`);\n      localStorage.setItem(\"editorPanelHeight\", `${heightVh}vh`);\n    },\n    [isDragging],\n  );\n\n  const handleMouseUp = useCallback(() => {\n    console.log(\"Mouse up event triggered\");\n    if (isDragging) {\n      setIsDragging(false);\n    }\n  }, [isDragging]);\n\n  useEffect(() => {\n    if (isDragging) {\n      console.log(\"Adding global mouse event listeners\");\n      window.addEventListener(\"mousemove\", handleMouseMove, { capture: true });\n      window.addEventListener(\"mouseup\", handleMouseUp, { capture: true });\n      return () => {\n        console.log(\"Removing global mouse event listeners\");\n        window.removeEventListener(\"mousemove\", handleMouseMove, {\n          capture: true,\n        });\n        window.removeEventListener(\"mouseup\", handleMouseUp, { capture: true });\n      };\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp]);\n\n  // Create a debounced version of handleMelodyPlayback\n  const debouncedMelodyPlayback = useCallback(\n    (() => {\n      let timeoutId: NodeJS.Timeout;\n      return (text: string, autoplay: boolean) => {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(() => {\n          try {\n            // First pass: find if there's a % on empty line and where it is\n            const allLines = text.split(\"\\n\");\n            const commentLineIndex = allLines.findIndex(\n              (line) => line.trim() === \"%\",\n            );\n\n            // Filter lines and stop at % if found\n            const lines = allLines\n              .slice(0, commentLineIndex >= 0 ? commentLineIndex : undefined)\n              .filter((line) => line.trim());\n\n            if (lines.length === 0) {\n              setError(\"No valid notes found\");\n              return;\n            }\n\n            setError(null);\n            const newContext: CommandContext = {\n              currentKey: { tonic: 0, mode: \"major\" },\n              currentTrack: 1,\n              timeSignatures: [{ numerator: 4, measureStart: 1 }],\n              channelOctaves: {\n                0: 5, // RH default\n                1: 3, // LH default\n              },\n              currentBpm: 120, // Default BPM\n            };\n\n            // Use a map to store notes for each track\n            const scoreByTrack = new Map<number, LogicalNote[]>();\n\n            for (const line of lines) {\n              const command = parseCommand(line, newContext);\n              if (!command) {\n                continue;\n              }\n\n              switch (command.type) {\n                case \"track\":\n                  const oldTrack = newContext.currentTrack;\n                  newContext.currentTrack = command.track;\n                  if (command.baseOctave !== undefined) {\n                    const channel = command.track - 1;\n                    newContext.channelOctaves[channel] = command.baseOctave;\n                  }\n                  break;\n\n                case \"key\":\n                  newContext.currentKey = command.key;\n                  // Store first key in analysis\n                  if (\n                    !analysis?.modulations ||\n                    Object.keys(analysis.modulations).length === 0\n                  ) {\n                    const newModulations = {\n                      \"1\": command.key.tonic as PitchClass,\n                    };\n                    // Update the analysis state directly\n                    if (analysis) {\n                      analysis.modulations = newModulations;\n                    }\n                  }\n                  break;\n\n                case \"time\":\n                  newContext.timeSignatures = command.signatures;\n                  break;\n\n                case \"bpm\":\n                  newContext.currentBpm = command.tempo;\n                  break;\n\n                case \"insert\": {\n                  const currentTrackNotes =\n                    scoreByTrack.get(newContext.currentTrack) || [];\n                  scoreByTrack.set(newContext.currentTrack, [\n                    ...currentTrackNotes,\n                    ...command.notes,\n                  ]);\n                  break;\n                }\n\n                case \"copy\": {\n                  // Execute copy for just the current track\n                  executeCopyForChannels(\n                    command,\n                    [newContext.currentTrack],\n                    newContext,\n                    scoreByTrack,\n                  );\n                  break;\n                }\n\n                case \"ac\": {\n                  // Get all non-empty channels\n                  const nonEmptyChannels = Array.from(scoreByTrack.keys());\n\n                  // Execute copy for all channels\n                  executeCopyForChannels(\n                    command,\n                    nonEmptyChannels,\n                    newContext,\n                    scoreByTrack,\n                  );\n                  break;\n                }\n              }\n            }\n\n            if (scoreByTrack.size === 0) {\n              setError(\"No valid notes found\");\n              return;\n            }\n\n            setContext(newContext);\n\n            // Convert all tracks to MIDI notes\n            const allMidiNotes = Array.from(scoreByTrack.entries()).flatMap(\n              ([track, notes]) => {\n                const trackNotes = notes\n                  .map((n) => {\n                    const midiNote = logicalNoteToMidi(\n                      n,\n                      track,\n                      newContext.timeSignatures,\n                    );\n                    if (!midiNote) {\n                      return null;\n                    }\n                    const resultNote = {\n                      pitch: midiNote.midiNumber,\n                      velocity: track === 2 ? 70 : 100, // Set velocity to 70 for LH (track 2), 100 for others\n                      startTime: midiNote.startTick,\n                      duration: midiNote.durationTicks - 1,\n                      channel: track - 1, // Convert 1-based track number back to 0-based channel\n                    };\n                    return resultNote;\n                  })\n                  .filter((n): n is MidiNote => n !== null);\n                return trackNotes;\n              },\n            );\n\n            const notesByChannel = new Map<number, MidiNote[]>();\n            allMidiNotes.forEach((note) => {\n              const channelNotes = notesByChannel.get(note.channel) || [];\n              channelNotes.push(note);\n              notesByChannel.set(note.channel, channelNotes);\n            });\n\n            const midiResult = generateMidiWithMetadata(\n              allMidiNotes,\n              `melody-${effectiveSlug}`,\n              newContext.currentBpm, // Use the current BPM from context\n              newContext.timeSignatures,\n            );\n\n            if (playSongBuffer) {\n              playSongBuffer(\n                midiResult.midiInfo.id,\n                midiResult.midiData,\n                autoplay,\n              );\n            }\n          } catch (e) {\n            console.error(\"Error during playback:\", e);\n            setError(\n              e instanceof Error ? e.message : \"Unknown error during playback\",\n            );\n          }\n        }, 0);\n      };\n    })(),\n    [playSongBuffer, effectiveSlug],\n  );\n\n  // Add helper function to clean up blinking state\n  const cleanupBlinkingState = useCallback(() => {\n    if (cycleTimeoutRef.current) {\n      clearTimeout(cycleTimeoutRef.current);\n      cycleTimeoutRef.current = null;\n    }\n    if (debounceTimeoutRef.current) {\n      clearTimeout(debounceTimeoutRef.current);\n      debounceTimeoutRef.current = null;\n    }\n    setShadowScore(null);\n    setIsPlayingFromShadow(false);\n  }, []);\n\n  // Modified handleTextChange to immediately flush blinking state\n  const handleTextChange = useCallback(\n    (value: string) => {\n      setScore(value);\n      // Always clean up any pending or active blinking state on edit\n      cleanupBlinkingState();\n      // Always trigger MIDI playback with the new value\n      debouncedMelodyPlayback(value, false);\n    },\n    [debouncedMelodyPlayback, cleanupBlinkingState],\n  );\n\n  // Update score when effectiveSlug changes\n  useEffect(() => {\n    const loadScore = async () => {\n      if (effectiveSlug) {\n        if (id || effectiveSlug.startsWith(\"ef/\")) {\n          // For /ef/<id> URLs, fetch from Firebase edits collection\n          const editId = id || effectiveSlug.replace(\"ef/\", \"\");\n\n          try {\n            const db = getFirestore();\n            const docRef = doc(db, \"edits\", editId);\n            const docSnap = await getDoc(docRef);\n\n            if (docSnap.exists()) {\n              const data = docSnap.data();\n              const newScore = data.source;\n              setScore(newScore);\n              setInitialSource(newScore); // Save initial source\n              // Trigger initial MIDI generation after a delay\n              setTimeout(() => {\n                debouncedMelodyPlayback(newScore, true);\n              }, 1000);\n            } else {\n              setError(\"Edit not found\");\n              setScore(\"\");\n              setInitialSource(\"\");\n            }\n          } catch (error) {\n            console.error(\"Error fetching edit:\", error);\n            setError(\"Failed to load edit\");\n            setScore(\"\");\n            setInitialSource(\"\");\n          }\n        } else if (scores[effectiveSlug]) {\n          const newScore = scores[effectiveSlug];\n          setScore(newScore);\n          setInitialSource(newScore); // Save initial source\n          // Trigger initial MIDI generation after a delay\n          setTimeout(() => {\n            debouncedMelodyPlayback(newScore, true);\n          }, 1000);\n        } else {\n          setScore(\"\");\n          setInitialSource(\"\");\n        }\n      } else {\n        setScore(\"\");\n        setInitialSource(\"\");\n      }\n    };\n\n    loadScore();\n  }, [effectiveSlug, debouncedMelodyPlayback]);\n\n  const handlePublish = async () => {\n    try {\n      setIsPublishing(true);\n      setPublishedUrl(null);\n\n      // Check if source has anacrusis\n      const hasAnacrusis = score.toLowerCase().includes(\"anacrusis\");\n\n      // Prepend anacrusis if needed\n      const finalSource = hasAnacrusis ? score : `anacrusis 4\\n${score}`;\n\n      // Get Firestore instance\n      const db = getFirestore();\n\n      // Add document to edits collection\n      const docRef = await addDoc(collection(db, \"edits\"), {\n        source: finalSource,\n        createdAt: new Date(),\n        parent: id ? `/ef/${id}` : slug ? `/e/${slug}` : null,\n      });\n\n      // Set the published URL\n      const newUrl = `/ef/${docRef.id}`;\n      setPublishedUrl(newUrl);\n\n      // Redirect to the new document\n      history.push(newUrl);\n    } catch (error) {\n      console.error(\"Error publishing:\", error);\n      setError(\"Failed to publish. Please try again.\");\n    } finally {\n      setIsPublishing(false);\n    }\n  };\n\n  const handleCopyUrl = () => {\n    if (publishedUrl) {\n      const fullUrl = window.location.origin + publishedUrl;\n      navigator.clipboard.writeText(fullUrl);\n      setShowCopyFeedback(true);\n      setTimeout(() => {\n        setShowCopyFeedback(false);\n      }, 2000); // Increased timeout since message is longer\n    }\n  };\n\n  // Add logging to verify rawlProps and analysis\n  useEffect(() => {\n    console.log(\"Current rawlProps:\", rawlProps);\n    console.log(\"Current analysis:\", analysis);\n  }, [rawlProps, analysis]);\n\n  // Update handleCursorChange to use the cleanup function\n  const handleCursorChange = useCallback(\n    (viewUpdate: any) => {\n      const line = viewUpdate.state.selection.main.head;\n      const lineNumber = viewUpdate.state.doc.lineAt(line).number;\n      const hasSelection = !viewUpdate.state.selection.main.empty;\n\n      if (lineNumber !== currentLine && !hasSelection) {\n        // Clean up any existing blinking state\n        cleanupBlinkingState();\n        debouncedMelodyPlayback(score, false);\n\n        setCurrentLine(lineNumber);\n\n        // Create shadow copy and start the comment/uncomment cycle\n        const lines = score.split(\"\\n\");\n        const currentLineText = lines[lineNumber - 1]?.trim();\n\n        // Only proceed if line is not empty and contains a command\n        if (currentLineText) {\n          // Parse the command to check if it's a c, i, or ac command\n          const command = parseCommand(currentLineText, context);\n          if (\n            command &&\n            (command.type === \"copy\" ||\n              command.type === \"insert\" ||\n              command.type === \"ac\")\n          ) {\n            // Add debounce before starting the cycle\n            debounceTimeoutRef.current = setTimeout(() => {\n              let cycleCount = 0;\n\n              const startCycle = () => {\n                if (cycleCount < 4) {\n                  // Use requestAnimationFrame to ensure smooth timing\n                  requestAnimationFrame(() => {\n                    // Toggle comment\n                    const newLines = [...lines];\n                    if (cycleCount % 2 === 0) {\n                      // Comment the line\n                      newLines[lineNumber - 1] =\n                        \"% \" + newLines[lineNumber - 1];\n                    } else {\n                      // Uncomment the line\n                      newLines[lineNumber - 1] = newLines[\n                        lineNumber - 1\n                      ].replace(/^% /, \"\");\n                    }\n\n                    const newScore = newLines.join(\"\\n\");\n                    setShadowScore(newScore);\n                    setIsPlayingFromShadow(true);\n\n                    // Trigger MIDI generation with shadow score\n                    debouncedMelodyPlayback(newScore, false);\n\n                    cycleCount++;\n                    // Use setTimeout with requestAnimationFrame for next cycle\n                    cycleTimeoutRef.current = setTimeout(() => {\n                      requestAnimationFrame(startCycle);\n                    }, 200);\n                  });\n                } else {\n                  cleanupBlinkingState();\n                  debouncedMelodyPlayback(score, false);\n                }\n              };\n\n              startCycle();\n            }, 300); // 300ms debounce\n          }\n        }\n      }\n    },\n    [\n      currentLine,\n      score,\n      debouncedMelodyPlayback,\n      context,\n      cleanupBlinkingState,\n    ],\n  );\n\n  // Update cleanup effect to use the cleanup function\n  useEffect(() => {\n    return () => {\n      cleanupBlinkingState();\n    };\n  }, [cleanupBlinkingState]);\n\n  // If no effectiveSlug is provided, show the index\n  if (!effectiveSlug) {\n    return <EditorIndex />;\n  }\n\n  return (\n    <EditorContainer>\n      <div style={{ paddingBottom: \"100vh\", position: \"relative\" }}>\n        <RawlContainer>\n          {rawlProps && (\n            <Rawl\n              {...rawlProps}\n              savedAnalysis={analysis}\n              latencyCorrectionMs={latencyCorrectionMs * tempo}\n            />\n          )}\n        </RawlContainer>\n      </div>\n      <BaseEditorPanel isFolded={isFolded} height={panelHeight}>\n        <ResizeHandle onMouseDown={handleMouseDown} />\n        <FoldButton\n          position=\"side\"\n          isFolded={isFolded}\n          onClick={() => setIsFolded(!isFolded)}\n        />\n        <EditorContent>\n          <CodeMirrorWrapper>\n            <CodeMirror\n              ref={editorRef}\n              value={score}\n              onChange={handleTextChange}\n              onUpdate={handleCursorChange}\n              theme={customTheme}\n              height=\"100%\"\n              style={{ flex: 1 }}\n              extensions={[\n                characterBackgroundsPlugin,\n                rawlLanguage,\n                keymap.of([\n                  {\n                    key: \"Mod-/\",\n                    run: toggleComment,\n                  },\n                ]),\n              ]}\n              basicSetup={{\n                lineNumbers: true,\n                highlightActiveLineGutter: true,\n                highlightActiveLine: true,\n                foldGutter: true,\n              }}\n              onFocus={() => setIsEditorFocused(true)}\n              onBlur={() => setIsEditorFocused(false)}\n            />\n          </CodeMirrorWrapper>\n          {error && <ErrorMessage>{error}</ErrorMessage>}\n        </EditorContent>\n        <Manual\n          score={score}\n          initialSource={initialSource}\n          id={id}\n          slug={slug}\n          history={history}\n          setError={setError}\n        />\n      </BaseEditorPanel>\n    </EditorContainer>\n  );\n};\n\n// Helper function to execute copy command for given channels\nfunction executeCopyForChannels(\n  command: Command & { type: \"copy\" | \"ac\" },\n  channels: number[],\n  context: CommandContext,\n  scoreByTrack: Map<number, LogicalNote[]>,\n) {\n  // Save current track\n  const originalTrack = context.currentTrack;\n\n  // Convert all positions to absolute beats first\n  const sourceStartAbsBeat = calculateGlobalBeatPosition(\n    command.sourceStart,\n    command.sourceStartBeat,\n    context.timeSignatures,\n  );\n\n  const sourceEndAbsBeat = calculateGlobalBeatPosition(\n    command.sourceEnd,\n    command.sourceEndBeat,\n    context.timeSignatures,\n  );\n\n  const targetStartAbsBeat = calculateGlobalBeatPosition(\n    command.targetMeasure,\n    command.targetBeat,\n    context.timeSignatures,\n  );\n\n  const spanLengthInBeats = sourceEndAbsBeat - sourceStartAbsBeat;\n\n  // For each channel, execute the copy\n  for (const track of channels) {\n    // Set current track\n    context.currentTrack = track;\n\n    const currentTrackNotes = scoreByTrack.get(track) || [];\n    const sourceNotes = currentTrackNotes.filter((n) => {\n      return (\n        n.span.start >= sourceStartAbsBeat && n.span.start < sourceEndAbsBeat\n      );\n    });\n\n    if (sourceNotes.length === 0) {\n      continue;\n    }\n\n    const allCopies = command.shifts\n      .map((shiftGroup, idx) => {\n        const copyStartBeat = targetStartAbsBeat + idx * spanLengthInBeats;\n\n        // If any shift in the group is 'x', the entire group becomes a rest\n        if (shiftGroup.shifts.includes(\"x\")) {\n          return [\n            {\n              scaleDegree: -Infinity,\n              duration: spanLengthInBeats * TICKS_PER_QUARTER,\n              span: {\n                start: copyStartBeat,\n                end: copyStartBeat + spanLengthInBeats,\n              },\n              midiNumber: null,\n            },\n          ];\n        }\n\n        // For each shift in the group, create a copy of all source notes with that shift\n        return shiftGroup.shifts.flatMap((shift) => {\n          return sourceNotes.map((n) => {\n            // Calculate relative position from the start of the source\n            const relativePosition = n.span.start - sourceStartAbsBeat;\n            // Apply this relative position to the copy start\n            const targetPosition = copyStartBeat + relativePosition;\n\n            if (n.midiNumber === null) {\n              return {\n                ...n,\n                span: {\n                  start: targetPosition,\n                  end: targetPosition + (n.span.end - n.span.start),\n                },\n              };\n            }\n\n            const { newDegree, newMidi } = calculateShiftedNote(\n              n.scaleDegree,\n              shift as number,\n              context.currentKey,\n              n.accidental || 0,\n              track,\n              context,\n            );\n\n            return {\n              ...n,\n              span: {\n                start: targetPosition,\n                end: targetPosition + (n.span.end - n.span.start),\n              },\n              scaleDegree: newDegree,\n              midiNumber: newMidi,\n              accidental: n.accidental,\n            };\n          });\n        });\n      })\n      .flat();\n\n    scoreByTrack.set(track, [...currentTrackNotes, ...allCopies]);\n  }\n\n  // Restore original track\n  context.currentTrack = originalTrack;\n}\n\nexport default withRouter(Editor);\n","import { RangeSetBuilder } from \"@codemirror/state\";\nimport {\n  Decoration,\n  DecorationSet,\n  EditorView,\n  ViewPlugin,\n  ViewUpdate,\n} from \"@codemirror/view\";\nimport { tags } from \"@lezer/highlight\";\nimport { createTheme } from \"@uiw/codemirror-themes\";\nimport { parseCommand } from \"./commandParser\";\nimport {\n  CommandContext,\n  getScaleMapForMode,\n  KeySignature,\n  NOTE_LETTER_MAP,\n} from \"./types\";\n\n// Types for the new architecture\ninterface ParsedNote {\n  pitch: string;\n  accidental?: \"b\" | \"#\";\n  duration?: string;\n  position: {\n    start: number;\n    end: number;\n    durationStart?: number; // Optional to indicate if this note is part of a chord\n  };\n  degree: number;\n  isPartOfChord?: boolean;\n}\n\ninterface NoteColor {\n  colorIndex: number;\n  dotClass: string;\n}\n\n// Function to get background colors for each character in a line\nexport const getBackgroundsForLine = (\n  line: string,\n  currentKey: KeySignature,\n  allLines: string[],\n  lineIndex: number,\n) => {\n  // Get the base decorations first (for backgrounds)\n  let baseDecorations = Array.from(line).map(() => ({ class: null }));\n\n  // Skip empty lines and comments\n  const cleanLine = line.split(\"%\")[0].trim();\n  if (!cleanLine) return baseDecorations;\n\n  // Create a context for command parsing\n  const context: CommandContext = {\n    currentKey,\n    currentTrack: 1,\n    timeSignatures: [{ numerator: 4, measureStart: 1 }],\n    channelOctaves: {\n      0: 5,\n      1: 3,\n    },\n    currentBpm: 120,\n  };\n\n  // Try to parse the line as a command\n  const isValidCommand = parseCommand(cleanLine, context) !== null;\n\n  // If the line is not a valid command, apply strikethrough to all non-whitespace characters\n  if (!isValidCommand) {\n    let inWhitespace = true;\n    baseDecorations = Array.from(line).map((char) => {\n      if (char.trim() === \"\") {\n        inWhitespace = true;\n        return { class: null };\n      }\n      if (inWhitespace) {\n        inWhitespace = false;\n      }\n      return { class: \"invalid-command\" };\n    });\n  }\n\n  // Debug logging\n  console.log(\"Processing line:\", JSON.stringify(line));\n\n  // Process key signature and note colors first\n  if (\n    line.match(\n      /^([A-G][b#]?)\\s+(major|minor|lydian|mixolydian|dorian|phrygian)$/i,\n    )\n  ) {\n    baseDecorations = processKeySignature(line, currentKey);\n  } else if (line.match(/^\\s*(\\d+(?:b\\d+(?:\\.\\d+)?)?)\\s+i\\s+/)) {\n    // Handle 'i' command with more flexible measure format\n    const match = line.match(/^\\s*(\\d+(?:b\\d+(?:\\.\\d+)?)?)\\s+(i)\\s+/);\n    if (match) {\n      console.log(\"Found i command:\", match);\n      // Use word boundary matching for 'i' command\n      const cmdMatch = line.match(/\\bi\\b/);\n      if (cmdMatch && cmdMatch.index !== undefined) {\n        console.log(\"Styling i command at index:\", cmdMatch.index);\n        baseDecorations[cmdMatch.index] = { class: \"command-name\" };\n        console.log(\"Applied command-name class at index:\", cmdMatch.index);\n      }\n    }\n    // Process note colors but preserve command styling\n    const noteDecorations = processNoteColors(\n      line,\n      currentKey,\n      allLines,\n      lineIndex,\n    );\n    baseDecorations = baseDecorations.map((dec, i) => {\n      const result = {\n        class: dec.class ? dec.class : noteDecorations[i].class,\n      };\n      if (dec.class === \"command-name\") {\n        console.log(\"Preserving command-name class at index:\", i);\n      }\n      return result;\n    });\n  } else {\n    // Handle 'c' and 'ac' commands with more flexible patterns\n    // Match patterns like:\n    // \"19  c 18    0 x x 0 0\"\n    // \"21b2 c 17b2-20b3 7\"\n    // \"7   c 6-6b3 0\"\n    // \"9    ac 1-9     0\"\n    // \"2    c 1\" - with default shift of 0\n    const copyMatch = line.match(\n      /^\\s*(\\d+(?:b\\d+(?:\\.\\d+)?)?)\\s+(c|ac)\\s+(\\d+(?:b\\d+)?(?:-\\d+(?:b\\d+)?)?)\\s*/,\n    );\n\n    if (copyMatch) {\n      console.log(\"Found copy command:\", copyMatch);\n      const [fullMatch, targetMeasure, cmd, sourceSpan] = copyMatch;\n      console.log(\"Command details:\", { targetMeasure, cmd, sourceSpan });\n\n      // Find exact indices to handle var\n      const cmdMatch = line.match(new RegExp(`\\\\b${cmd}\\\\b`));\n\n      if (cmdMatch && cmdMatch.index !== undefined) {\n        console.log(\"Styling command at index:\", cmdMatch.index);\n        // Style the command\n        for (let i = cmdMatch.index; i < cmdMatch.index + cmd.length; i++) {\n          baseDecorations[i] = { class: \"command-name\" };\n        }\n\n        // Find the source span after the command token\n        const afterCmd = line.slice(cmdMatch.index + cmd.length);\n        const spanMatch = afterCmd.match(new RegExp(`\\\\b${sourceSpan}\\\\b`));\n\n        if (spanMatch && spanMatch.index !== undefined) {\n          // Adjust the index to be relative to the full line\n          const spanStartIndex = cmdMatch.index + cmd.length + spanMatch.index;\n          // Style the source span\n          for (\n            let i = spanStartIndex;\n            i < spanStartIndex + sourceSpan.length;\n            i++\n          ) {\n            baseDecorations[i] = { class: \"source-span\" };\n          }\n        }\n      } else {\n        // Debug when no match is found\n        console.log(\"No command match found for line\");\n      }\n    } else {\n      // Debug when no match is found\n      console.log(\"No command match found for line\");\n    }\n  }\n\n  // Then handle comments, preserving any background colors\n  // Check if any previous line is just '%'\n  for (let i = 0; i < lineIndex; i++) {\n    if (allLines[i].trim() === \"%\") {\n      return baseDecorations.map((decoration) => ({\n        class: decoration.class ? `${decoration.class} comment` : \"comment\",\n      }));\n    }\n  }\n\n  // Check for comments in current line\n  const commentIndex = line.indexOf(\"%\");\n  if (commentIndex !== -1) {\n    return baseDecorations.map((decoration, index) => ({\n      class:\n        index >= commentIndex\n          ? decoration.class\n            ? `${decoration.class} comment`\n            : \"comment\"\n          : decoration.class,\n    }));\n  }\n\n  return baseDecorations;\n};\n\n// Helper function to process key signature styling\nconst processKeySignature = (line: string, currentKey: KeySignature) => {\n  const [_, root, mode] = line.match(\n    /^([A-G][b#]?)\\s+(major|minor|lydian|mixolydian|dorian|phrygian)$/i,\n  )!;\n  const modeStartIndex = line.toLowerCase().indexOf(mode.toLowerCase());\n  const scaleMap = getScaleMapForMode(\n    mode.toLowerCase() as KeySignature[\"mode\"],\n  );\n  const UNSTABLE_PITCHES = [1, 2, 3, 5, 6];\n\n  return Array.from(line).map((char, index) => {\n    if (index >= modeStartIndex && index < modeStartIndex + mode.length) {\n      const letterIndex = index - modeStartIndex;\n      const unstablePitch = UNSTABLE_PITCHES[letterIndex];\n      const colorIndex = scaleMap[unstablePitch];\n      return { class: `noteColor_${colorIndex}_colors` };\n    }\n    return { class: null };\n  });\n};\n\n// Parse a single note from a position in the melody string\nconst parseNote = (\n  melody: string,\n  startIndex: number,\n  isPartOfChord: boolean = false,\n): { note: ParsedNote | null; nextIndex: number; hasDuration: boolean } => {\n  let i = startIndex;\n\n  // Skip any whitespace\n  while (i < melody.length && /\\s/.test(melody[i])) i++;\n  if (i >= melody.length)\n    return { note: null, nextIndex: i, hasDuration: false };\n\n  const noteStart = i;\n\n  // Check for accidental\n  let accidental: \"b\" | \"#\" | undefined;\n  if (melody[i] === \"b\" || melody[i] === \"#\") {\n    accidental = melody[i] as \"b\" | \"#\";\n    i++;\n  }\n\n  // Get pitch\n  if (i >= melody.length)\n    return { note: null, nextIndex: i, hasDuration: false };\n  const pitch = melody[i];\n  const degree = NOTE_LETTER_MAP[pitch.toLowerCase()];\n  if (degree === undefined)\n    return { note: null, nextIndex: startIndex + 1, hasDuration: false };\n  i++;\n\n  // Look for duration\n  let duration = \"\";\n  let durationStart: number | undefined;\n  let hasDuration = false;\n\n  while (i < melody.length) {\n    // Check for duration marker\n    if (/[+_\\-=,'\"]/.test(melody[i])) {\n      hasDuration = true;\n      durationStart = i;\n      duration += melody[i];\n      i++;\n      // Check for dot or triplet\n      if (i < melody.length && (melody[i] === \".\" || melody[i] === \":\")) {\n        duration += melody[i];\n        i++;\n      }\n      break;\n    }\n    // If we see another note or accidental, stop\n    if (/[a-zA-Z1-90x]|[b#]/.test(melody[i])) {\n      break;\n    }\n    i++;\n  }\n\n  const note: ParsedNote = {\n    pitch,\n    accidental,\n    duration: duration || undefined,\n    position: {\n      start: noteStart,\n      end: i, // Now includes duration for single notes\n      durationStart,\n    },\n    degree,\n    isPartOfChord,\n  };\n\n  return { note, nextIndex: i, hasDuration };\n};\n\n// Parse all notes from a melody string\nconst parseMelody = (melody: string): ParsedNote[] => {\n  const notes: ParsedNote[] = [];\n  let i = 0;\n\n  while (i < melody.length) {\n    // Try to parse as a chord first\n    let chordNotes: ParsedNote[] = [];\n    let currentIndex = i;\n    let isChord = false;\n    let lastNextIndex = i;\n\n    // Look ahead for multiple consecutive notes without duration markers\n    while (currentIndex < melody.length) {\n      const { note, nextIndex, hasDuration } = parseNote(\n        melody,\n        currentIndex,\n        true,\n      );\n      if (!note) break;\n\n      chordNotes.push(note);\n      lastNextIndex = nextIndex;\n\n      if (hasDuration) {\n        isChord = chordNotes.length > 1;\n        break;\n      }\n      currentIndex = nextIndex;\n    }\n\n    if (isChord) {\n      // Add all chord notes without the duration styling\n      notes.push(...chordNotes);\n      // Move past the last note and its duration\n      i = lastNextIndex;\n    } else {\n      // Parse as a single note\n      const { note, nextIndex } = parseNote(melody, i, false);\n      if (note) {\n        notes.push(note);\n      }\n      i = nextIndex;\n    }\n  }\n\n  return notes;\n};\n\n// Calculate color for a note based on its properties and key\nconst calculateNoteColor = (note: ParsedNote, key: KeySignature): NoteColor => {\n  const scaleDegree = note.degree % 7;\n  const scaleMap = getScaleMapForMode(key.mode);\n  const accidentalValue =\n    note.accidental === \"b\" ? -1 : note.accidental === \"#\" ? 1 : 0;\n  const colorIndex = (scaleMap[scaleDegree] + accidentalValue + 12) % 12;\n\n  let dotClass = \"\";\n  if (note.degree >= 14) {\n    dotClass = \" dotAbove\";\n  } else if (note.degree <= 6) {\n    dotClass = \" dotBelow\";\n  }\n\n  return { colorIndex, dotClass };\n};\n\n// Apply colors to create decorations\nconst applyNoteColors = (\n  notes: ParsedNote[],\n  colors: NoteColor[],\n  melodyStartIndex: number,\n  lineLength: number,\n): Array<{ class: string | null }> => {\n  // Validate input parameters\n  if (melodyStartIndex < 0 || lineLength <= 0) {\n    return [];\n  }\n\n  const decorations = Array(lineLength).fill({ class: null });\n\n  // First, identify chord groups\n  const chordGroups = new Set<number>();\n  let currentChordStart = -1;\n\n  for (let i = 0; i < notes.length; i++) {\n    if (notes[i].isPartOfChord) {\n      if (currentChordStart === -1) {\n        currentChordStart = i;\n      }\n      chordGroups.add(i);\n    } else if (currentChordStart !== -1) {\n      // End of chord group\n      currentChordStart = -1;\n    }\n  }\n\n  notes.forEach((note, index) => {\n    const color = colors[index];\n    const colorClass = `noteColor_${color.colorIndex}_colors${color.dotClass}`;\n\n    // Calculate the absolute positions in the line\n    const absoluteStart = melodyStartIndex + note.position.start;\n    const absoluteEnd = melodyStartIndex + note.position.end;\n    const absoluteDurationStart =\n      note.position.durationStart !== undefined\n        ? melodyStartIndex + note.position.durationStart\n        : absoluteEnd;\n\n    // Ensure we don't exceed array bounds\n    if (absoluteStart >= lineLength) {\n      return;\n    }\n\n    if (chordGroups.has(index)) {\n      // For chord notes, only color the pitch and accidental\n      const end = Math.min(absoluteDurationStart, lineLength);\n      for (let i = absoluteStart; i < end; i++) {\n        decorations[i] = { class: colorClass };\n      }\n    } else {\n      // For single notes, color the entire span including duration\n      const end = Math.min(absoluteEnd, lineLength);\n      for (let i = absoluteStart; i < end; i++) {\n        decorations[i] = { class: colorClass };\n      }\n    }\n  });\n\n  return decorations;\n};\n\n// Main function to process note colors\nconst processNoteColors = (\n  line: string,\n  currentKey: KeySignature,\n  allLines: string[],\n  lineIndex: number,\n) => {\n  // Update current key based on previous lines\n  for (let i = 0; i < lineIndex; i++) {\n    const prevLine = allLines[i].trim();\n    const keyMatch = prevLine.match(\n      /^([A-G][b#]?)\\s+(major|minor|lydian|mixolydian|dorian|phrygian)$/i,\n    );\n    if (keyMatch) {\n      const [_, root, mode] = keyMatch;\n      const noteToNumber: { [key: string]: number } = {\n        C: 0,\n        \"C#\": 1,\n        Db: 1,\n        D: 2,\n        \"D#\": 3,\n        Eb: 3,\n        E: 4,\n        F: 5,\n        \"F#\": 6,\n        Gb: 6,\n        G: 7,\n        \"G#\": 8,\n        Ab: 8,\n        A: 9,\n        \"A#\": 10,\n        Bb: 10,\n        B: 11,\n      };\n      currentKey = {\n        tonic: noteToNumber[root],\n        mode: mode.toLowerCase() as KeySignature[\"mode\"],\n      };\n    }\n  }\n\n  const match = line.match(/^\\s*(\\d+)(?:b(\\d+(?:\\.\\d+)?))?\\s+i\\s+(.+)$/);\n  if (!match) {\n    return Array.from(line).map(() => ({ class: null }));\n  }\n\n  const [_, measureStr, beatStr, melodyPart] = match;\n  const melodyStartIndex = line.indexOf(melodyPart);\n\n  // Parse melody into structured notes\n  const notes = parseMelody(melodyPart);\n\n  // Calculate colors for each note\n  const colors = notes.map((note) => calculateNoteColor(note, currentKey));\n\n  // Apply colors to create decorations\n  return applyNoteColors(notes, colors, melodyStartIndex, line.length);\n};\n\n// CodeMirror theme\nexport const customTheme = createTheme({\n  theme: \"dark\",\n  settings: {\n    background: \"#1e1e1e\",\n    foreground: \"#ffffff\",\n    caret: \"#ffa500\",\n    selection: \"rgba(255, 255, 255, 0.2)\",\n    selectionMatch: \"rgba(255, 255, 255, 0.2)\",\n    lineHighlight: \"#8a91991a\",\n    gutterBackground: \"#1e1e1e\",\n    gutterForeground: \"#8a919966\",\n  },\n  styles: [{ tag: tags.comment, color: \"#666666\", fontStyle: \"italic\" }],\n});\n\n// CodeMirror plugin for character backgrounds\nexport const characterBackgroundsPlugin = ViewPlugin.fromClass(\n  class {\n    decorations: DecorationSet;\n\n    constructor(view: EditorView) {\n      this.decorations = this.buildDecorations(view);\n    }\n\n    update(update: ViewUpdate) {\n      if (update.docChanged || update.viewportChanged) {\n        this.decorations = this.buildDecorations(update.view);\n      }\n    }\n\n    buildDecorations(view: EditorView) {\n      const builder = new RangeSetBuilder<Decoration>();\n      const doc = view.state.doc;\n      const allLines = doc.toString().split(\"\\n\");\n\n      // Start with C major as default\n      let currentKey: KeySignature = { tonic: 0, mode: \"major\" };\n\n      // Iterate through visible lines\n      for (let { from, to } of view.visibleRanges) {\n        let pos = from;\n        while (pos <= to) {\n          const line = view.state.doc.lineAt(pos);\n          const lineIndex = doc.lineAt(pos).number - 1;\n\n          const backgrounds = getBackgroundsForLine(\n            line.text,\n            currentKey,\n            allLines,\n            lineIndex,\n          );\n\n          // Apply background to each character\n          for (let i = 0; i < line.length; i++) {\n            const charPos = line.from + i;\n            if (charPos < line.to) {\n              const decoration = backgrounds[i];\n              if (decoration && decoration.class) {\n                builder.add(\n                  charPos,\n                  charPos + 1,\n                  Decoration.mark({ class: decoration.class }),\n                );\n              }\n            }\n          }\n          pos = line.to + 1;\n        }\n      }\n\n      return builder.finish();\n    }\n  },\n  {\n    decorations: (v) => v.decorations,\n  },\n);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { scores } from \"./scores\";\n\nconst EditorIndexContainer = styled.div`\n  padding: 20px;\n  max-width: 800px;\n  margin: 0 auto;\n`;\n\nconst EditorIndexTitle = styled.h1`\n  color: #d4d4d4;\n  margin-bottom: 20px;\n`;\n\nconst EditorIndexList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`;\n\nconst EditorIndexItem = styled(Link)`\n  padding: 10px;\n  background: #1e1e1e;\n  border: 1px solid #333;\n  border-radius: 4px;\n  color: #d4d4d4;\n  text-decoration: none;\n  display: block;\n\n  &:hover {\n    background: #2d2d2d;\n    color: #fff;\n  }\n`;\n\nconst EditorIndex: React.FC = () => {\n  return (\n    <EditorIndexContainer>\n      <EditorIndexTitle>Available Scores</EditorIndexTitle>\n      <EditorIndexList>\n        {Object.keys(scores).map((slug) => (\n          <EditorIndexItem key={slug} to={`/e/${slug}`}>\n            {slug.replace(/---/g, \"  \").replace(/-/g, \" \")}\n          </EditorIndexItem>\n        ))}\n      </EditorIndexList>\n    </EditorIndexContainer>\n  );\n};\n\nexport default EditorIndex;\n","import MidiWriter from \"midi-writer-js\";\nimport { Analysis, PitchClass } from \"../analysis\";\nimport { Note } from \"../forge/ForgeGenerator\";\n\n// Define TimeSignature type locally since we can't import it\ntype TimeSignature = {\n  numerator: number;\n  measureStart: number;\n};\n\n// Define Track type with time signature method\ntype Track = {\n  addTrackName(name: string): void;\n  setTempo(tempo: number): void;\n  addEvent(event: any): void;\n  setTimeSignature(\n    numerator: number,\n    denominator: number,\n    midiclockspertick: number,\n    notespermidiclock: number,\n  ): Track;\n};\n\n// Type assertion for the imported MidiWriter\nconst { Track: MidiTrack, NoteEvent, Writer } = MidiWriter;\n\n// Mid-level representation of musical events\ninterface MusicalEvent {\n  pitches: number[];\n  startTick: number;\n  duration: number;\n  velocity: number;\n  channel: number;\n}\n\n// Constants for MIDI meta events\nconst META_EVENT_TYPE = 0xff;\nconst META_TIME_SIGNATURE = 0x58;\n\n// Helper to create a time signature meta event\nconst createTimeSignatureEvent = (\n  numerator: number,\n  denominator: number = 4,\n) => {\n  // Time signature meta event format:\n  // FF 58 04 nn dd cc bb\n  // nn = numerator\n  // dd = denominator (as power of 2: 2 = quarter note, 3 = eighth note, etc.)\n  // cc = MIDI clocks per metronome click (usually 24)\n  // bb = number of 32nd notes per MIDI quarter note (usually 8)\n  return {\n    type: META_EVENT_TYPE,\n    subtype: META_TIME_SIGNATURE,\n    data: new Uint8Array([\n      numerator,\n      Math.log2(denominator), // 2 for quarter note (2^2 = 4)\n      24, // MIDI clocks per click\n      8, // 32nd notes per quarter\n    ]),\n    deltaTime: 0,\n  };\n};\n\nexport interface MidiGenerationResult {\n  midiData: Uint8Array;\n  midiInfo: {\n    id: string;\n    title: string;\n    slug: string;\n    sourceUrl: null;\n    isHiddenRoute: boolean;\n  };\n  analysis: Analysis;\n}\n\n// Convert raw notes to musical events (mid-level representation)\nconst convertToMusicalEvents = (notes: Note[]): MusicalEvent[] => {\n  const sortedNotes = [...notes].sort((a, b) => a.startTime - b.startTime);\n  const events: MusicalEvent[] = [];\n\n  let currentStartTime = -1;\n  let currentChannel = -1;\n  let currentPitches: number[] = [];\n\n  const addEvent = (\n    startTime: number,\n    pitches: number[],\n    duration: number,\n    channel: number,\n    velocity: number,\n  ) => {\n    events.push({\n      pitches,\n      startTick: startTime,\n      duration,\n      velocity,\n      channel,\n    });\n  };\n\n  sortedNotes.forEach((note, index) => {\n    if (\n      note.startTime !== currentStartTime ||\n      note.channel !== currentChannel\n    ) {\n      // Add previous group if it exists\n      if (currentPitches.length > 0) {\n        addEvent(\n          currentStartTime,\n          currentPitches,\n          sortedNotes[index - 1].duration,\n          sortedNotes[index - 1].channel || 0,\n          sortedNotes[index - 1].velocity || 100,\n        );\n      }\n      // Start new group\n      currentStartTime = note.startTime;\n      currentChannel = note.channel || 0;\n      currentPitches = [note.pitch];\n    } else {\n      // Add to current group\n      currentPitches.push(note.pitch);\n    }\n  });\n\n  // Add the last group\n  if (currentPitches.length > 0) {\n    addEvent(\n      currentStartTime,\n      currentPitches,\n      sortedNotes[sortedNotes.length - 1].duration,\n      sortedNotes[sortedNotes.length - 1].channel || 0,\n      sortedNotes[sortedNotes.length - 1].velocity || 100,\n    );\n  }\n\n  return events;\n};\n\n// Convert musical events to MIDI file\nconst generateMidiFromEvents = (\n  events: MusicalEvent[],\n  bpm: number,\n  timeSignatures: TimeSignature[],\n): Uint8Array => {\n  const eventsByChannel = new Map<number, MusicalEvent[]>();\n  const trackNames = new Map<number, string>();\n\n  events.forEach((event) => {\n    const channelEvents = eventsByChannel.get(event.channel) || [];\n    channelEvents.push(event);\n    eventsByChannel.set(event.channel, channelEvents);\n  });\n\n  // Create separate tracks for each channel\n  const tracks = new Map<number, Track>();\n\n  // Create a tempo/time signature track (track 0)\n  const tempoTrack = new MidiTrack() as Track;\n  const tempoTrackName = \"Tempo and Time Signatures\";\n  tempoTrack.addTrackName(tempoTrackName);\n  trackNames.set(-1, tempoTrackName);\n  tempoTrack.setTempo(bpm);\n\n  // Add time signatures using the official API\n  timeSignatures.forEach((ts) => {\n    tempoTrack.setTimeSignature(ts.numerator, 4, 24, 8);\n  });\n\n  tracks.set(-1, tempoTrack); // Special track for tempo/time sig\n\n  events.forEach((event) => {\n    if (!tracks.has(event.channel)) {\n      const track = new MidiTrack() as Track;\n      // Give each track a name based on its channel\n      const trackName =\n        event.channel === 0\n          ? \"Right Hand (Channel 0)\"\n          : event.channel === 1\n          ? \"Left Hand (Channel 1)\"\n          : `Channel ${event.channel}`;\n\n      track.addTrackName(trackName);\n      trackNames.set(event.channel, trackName);\n      tracks.set(event.channel, track);\n    }\n\n    const track = tracks.get(event.channel)!;\n    track.addEvent(\n      new NoteEvent({\n        pitch: event.pitches,\n        duration: \"T\" + event.duration,\n        velocity: event.velocity,\n        startTick: event.startTick,\n        channel: event.channel, // Ensure channel number is preserved\n      }),\n    );\n  });\n\n  // Sort tracks by channel number to ensure consistent order\n  const sortedTracks = Array.from(tracks.entries())\n    .sort(([a], [b]) => a - b)\n    .map(([channel, track]) => ({ channel, track }));\n\n  const writer = new Writer(sortedTracks.map(({ track }) => track));\n  const base64Data = writer.dataUri().split(\",\")[1];\n\n  // Convert base64 to Uint8Array\n  const binaryString = window.atob(base64Data);\n  const bytes = new Uint8Array(binaryString.length);\n  for (let i = 0; i < binaryString.length; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n\n  return bytes;\n};\n\n// Main MIDI generation function now uses the two-step process\nexport const generateMidiFile = (\n  notes: Note[],\n  bpm: number,\n  timeSignatures: TimeSignature[],\n): Uint8Array => {\n  const musicalEvents = convertToMusicalEvents(notes);\n  return generateMidiFromEvents(musicalEvents, bpm, timeSignatures);\n};\n\nexport const generateInitialAnalysis = (title: string): Analysis => {\n  return {\n    modulations: {\n      1: 0 as PitchClass,\n    },\n    comment: title,\n    tags: [\"generated\", \"melody\"],\n    form: {},\n    phrasePatch: [],\n    sections: [0],\n  };\n};\n\nexport const generateMidiWithMetadata = (\n  notes: Note[],\n  title: string,\n  bpm: number,\n  timeSignatures: TimeSignature[],\n): MidiGenerationResult => {\n  const midiData = generateMidiFile(notes, bpm, timeSignatures);\n\n  return {\n    midiData,\n    midiInfo: {\n      id: title,\n      title,\n      slug: title,\n      sourceUrl: null,\n      isHiddenRoute: false,\n    },\n    analysis: generateInitialAnalysis(title),\n  };\n};\n","import {\n  faCloudArrowUp,\n  faCopy,\n  faSpinner,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { addDoc, collection, getFirestore } from \"firebase/firestore/lite\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport editorMajorLayout from \"../../../images/editor_major_layout.png\";\n\nconst KeyboardLayout = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  background: #1e1e1e;\n  border-right: 1px solid #333;\n  height: 100%;\n  min-height: 0;\n  overflow-y: auto;\n  flex: 0 0 250px;\n  font-size: 12px;\n  color: #ccc;\n  line-height: 1.6;\n\n  .top-section {\n    display: flex;\n    flex-direction: row;\n    margin-bottom: 20px;\n  }\n\n  .left-column {\n    flex: 0 0 15vw;\n    margin-right: 5px;\n  }\n\n  .right-column {\n    flex: 1;\n  }\n\n  .full-width-section {\n    width: 100%;\n  }\n\n  img {\n    width: 100%;\n    height: auto;\n    object-fit: contain;\n    z-index: 1;\n  }\n\n  .image-caption {\n    margin-top: 4px;\n    width: 100%;\n    color: #999;\n  }\n\n  code {\n    color: white;\n    background: #2a2a2a;\n    padding: 1px 4px;\n    border-radius: 3px;\n    white-space: nowrap;\n  }\n\n  .grid {\n    display: grid;\n    grid-template-columns: 190px 1fr;\n    gap: 4px 8px;\n    margin: 8px 0;\n    align-items: center;\n  }\n\n  .note-col {\n    text-align: right;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    gap: 4px;\n  }\n\n  .section {\n    margin: 24px;\n  }\n\n  .section:first-child {\n    margin-top: 0;\n  }\n\n  .section h3 {\n    margin: 0px;\n  }\n\n  /* Customize scrollbar */\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #1e1e1e;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #333;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #444;\n  }\n`;\n\nconst ButtonBar = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 10px;\n  border-bottom: 1px solid #333;\n  gap: 12px;\n`;\n\nconst PublishButton = styled.button<{\n  isPublishing?: boolean;\n  hasChanges: boolean;\n}>`\n  background: ${(props) => (props.isPublishing ? \"#999\" : \"#bbb\")};\n  color: black;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  position: relative;\n\n  &:hover {\n    background: ${(props) => (props.isPublishing ? \"#999\" : \"#ddd\")};\n  }\n\n  &:active {\n    background: ${(props) =>\n      props.isPublishing ? \"#999\" : \"rgb(255, 255, 255)\"};\n  }\n\n  &:disabled {\n    background: #666;\n    cursor: not-allowed;\n    color: black;\n\n    &:hover::after {\n      content: \"No changes made\";\n      position: absolute;\n      bottom: -30px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      padding: 4px 8px;\n      border-radius: 4px;\n      font-size: 12px;\n      white-space: nowrap;\n      pointer-events: none;\n    }\n  }\n\n  .spinner {\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n`;\n\nconst PublishedUrl = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background: #2a2a2a;\n  padding: 6px 12px;\n  border-radius: 4px;\n  font-size: 14px;\n  color: #ddd;\n  cursor: pointer;\n  user-select: none;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background: #333;\n  }\n\n  .copy-button {\n    color: #999;\n    transition: color 0.2s;\n  }\n\n  &:hover .copy-button {\n    color: #fff;\n  }\n`;\n\nconst TelegramInput = styled.input`\n  background: #2a2a2a;\n  border: 1px solid #444;\n  color: #ddd;\n  padding: 8px 12px;\n  border-radius: 4px;\n  font-size: 14px;\n  width: 300px;\n  margin-right: auto;\n\n  &:focus {\n    outline: none;\n    border-color: #666;\n  }\n\n  &::placeholder {\n    color: #888;\n  }\n`;\n\nconst NoteBase = styled.div`\n  position: relative;\n  height: 6px;\n  background: white;\n  margin: 0 4px;\n  display: inline-block;\n  box-shadow: 0 0 0px 0.5px black;\n  cursor: pointer;\n  vertical-align: middle;\n  border-radius: 2px;\n`;\n\nconst BeatMarker = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  background: gray;\n`;\n\ninterface NoteExampleProps {\n  beats: number;\n  style?: { width: string };\n}\n\nconst NoteExample: React.FC<NoteExampleProps> = ({ beats, style }) => {\n  const beatMarkers = [];\n\n  for (let i = 1; i < beats; i++) {\n    beatMarkers.push(<BeatMarker key={i} style={{ right: `${i * 30}px` }} />);\n  }\n\n  return <NoteBase style={style}>{beatMarkers}</NoteBase>;\n};\n\ninterface ManualProps {\n  score: string;\n  initialSource: string;\n  id?: string;\n  slug?: string;\n  history: any;\n  setError: (error: string | null) => void;\n}\n\nconst Manual: React.FC<ManualProps> = ({\n  score,\n  initialSource,\n  id,\n  slug,\n  history,\n  setError,\n}) => {\n  const [isPublishing, setIsPublishing] = useState(false);\n  const [publishedUrl, setPublishedUrl] = useState<string | null>(null);\n  const [showCopyFeedback, setShowCopyFeedback] = useState(false);\n  const [telegramUsername, setTelegramUsername] = useState(\n    () => localStorage.getItem(\"telegramUsername\") || \"\",\n  );\n  const [showUsernameInput, setShowUsernameInput] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Focus the input when it becomes visible\n  useEffect(() => {\n    if (showUsernameInput && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [showUsernameInput]);\n\n  const handlePublishClick = () => {\n    if (!telegramUsername) {\n      setShowUsernameInput(true);\n    } else {\n      handlePublish();\n    }\n  };\n\n  const handlePublish = async () => {\n    // Don't proceed if username is required but empty\n    if (!telegramUsername) {\n      return;\n    }\n\n    try {\n      setIsPublishing(true);\n      setPublishedUrl(null);\n\n      // Store username in localStorage\n      localStorage.setItem(\"telegramUsername\", telegramUsername);\n\n      // Check if source has anacrusis\n      const hasAnacrusis = score.toLowerCase().includes(\"anacrusis\");\n\n      // Prepend anacrusis if needed\n      const finalSource = hasAnacrusis ? score : `anacrusis 4\\n${score}`;\n\n      // Get Firestore instance\n      const db = getFirestore();\n\n      // Add document to edits collection with username\n      const docRef = await addDoc(collection(db, \"edits\"), {\n        source: finalSource,\n        createdAt: new Date(),\n        parent: id ? `/ef/${id}` : slug ? `/e/${slug}` : null,\n        username: telegramUsername,\n      });\n\n      // Set the published URL\n      const newUrl = `/ef/${docRef.id}`;\n      setPublishedUrl(newUrl);\n      setShowUsernameInput(false);\n\n      // Redirect to the new document\n      history.push(newUrl);\n    } catch (error) {\n      console.error(\"Error publishing:\", error);\n      setError(\"Failed to publish. Please try again.\");\n    } finally {\n      setIsPublishing(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\" && telegramUsername.trim()) {\n      handlePublish();\n    }\n  };\n\n  const handleCopyUrl = () => {\n    if (publishedUrl) {\n      const fullUrl = window.location.origin + publishedUrl;\n      navigator.clipboard.writeText(fullUrl);\n      setShowCopyFeedback(true);\n      setTimeout(() => {\n        setShowCopyFeedback(false);\n      }, 2000);\n    }\n  };\n\n  return (\n    <KeyboardLayout>\n      <ButtonBar>\n        {showUsernameInput && (\n          <TelegramInput\n            ref={inputRef}\n            placeholder=\"What's your Telegram @username or email?\"\n            value={telegramUsername}\n            onChange={(e) => setTelegramUsername(e.target.value)}\n            onKeyDown={handleKeyDown}\n          />\n        )}\n        {publishedUrl && (\n          <PublishedUrl onClick={handleCopyUrl}>\n            {showCopyFeedback\n              ? score !== initialSource\n                ? \"Link to last published version is copied to clipboard\"\n                : \"Link is copied to clipboard\"\n              : publishedUrl}\n            <FontAwesomeIcon\n              icon={faCopy}\n              className=\"copy-button\"\n              title=\"Copy URL to clipboard\"\n            />\n          </PublishedUrl>\n        )}\n        <PublishButton\n          onClick={handlePublishClick}\n          isPublishing={isPublishing}\n          disabled={\n            isPublishing ||\n            score === initialSource ||\n            (showUsernameInput && !telegramUsername.trim())\n          }\n          hasChanges={score !== initialSource}\n        >\n          {isPublishing ? (\n            <>\n              Publishing\n              <FontAwesomeIcon icon={faSpinner} className=\"spinner\" />\n            </>\n          ) : (\n            <>\n              Publish\n              <FontAwesomeIcon icon={faCloudArrowUp} />\n            </>\n          )}\n        </PublishButton>\n      </ButtonBar>\n      <div className=\"top-section\">\n        <div className=\"left-column\">\n          <img src={editorMajorLayout} alt=\"Keyboard Layout\" />\n          <div className=\"image-caption\">\n            Prepend note pitch with b and # to lower/raise by semitone, eg. b2,\n            #r\n          </div>\n        </div>\n        <div className=\"right-column\">\n          <div className=\"section\">\n            <div className=\"grid\">\n              <div className=\"note-col\">\n                <NoteExample beats={4} style={{ width: \"120px\" }} />\n              </div>\n              <span>\n                <code>+</code> 4 beats (whole note)\n              </span>\n\n              <div className=\"note-col\">\n                <NoteExample beats={3} style={{ width: \"90px\" }} />\n              </div>\n              <span>\n                <code>_.</code> 2  3/2 = 3 beats (<code>.</code> elongates by\n                half)\n              </span>\n\n              <div className=\"note-col\">\n                <NoteExample beats={2} style={{ width: \"60px\" }} />\n              </div>\n              <span>\n                <code>_</code> 2 beats (half note)\n              </span>\n\n              <div className=\"note-col\">\n                <NoteExample beats={1.33} style={{ width: \"40px\" }} />\n              </div>\n              <span>\n                <code>_:</code> 2    1.33 beats (for triplets, <code>:</code>{\" \"}\n                reduces by 1/3)\n              </span>\n\n              <div className=\"note-col\">\n                <NoteExample beats={1} style={{ width: \"30px\" }} />\n              </div>\n              <span>\n                <code>,</code> 1 beat (quarter note)\n              </span>\n\n              <div className=\"note-col\">\n                <NoteExample beats={0.5} style={{ width: \"15px\" }} />\n              </div>\n              <span>\n                <code>-</code>  beat (eighth note)\n              </span>\n\n              <div className=\"note-col\">\n                <NoteExample beats={0.25} style={{ width: \"7.5px\" }} />\n              </div>\n              <span>\n                <code>=</code>  beat (sixteenth note)\n              </span>\n\n              <div className=\"note-col\">\n                <NoteExample beats={0.125} style={{ width: \"3.75px\" }} />\n              </div>\n              <span>\n                <code>'</code>  beat (thirty-second note)\n              </span>\n\n              <div className=\"note-col\">\n                <NoteExample beats={0.0625} style={{ width: \"1.875px\" }} />\n              </div>\n              <span>\n                <code>\"</code> 1/16 beat (sixty-fourth note)\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"full-width-section\">\n        <div className=\"section\">\n          <h3>Insert/copy</h3>\n          <div className=\"grid\">\n            <code>2b2 i q,.x-eti,</code>\n            <span>\n              Insert at measure 2 beat 2: 1+1/2 beats (,.) of scale degree one\n              (tonic) in middle octave, then a rest (x) of 1/2 beats, then a\n              beat of a chord 3-5-1, where 1 is in upper octave. Several note\n              pitches under one duration is a chord\n            </span>\n            <code>5&nbsp;&nbsp;&nbsp;c 1-4&nbsp;&nbsp;&nbsp;0 -4 x 7</code>\n            <span>\n              Copy measures 1..4 to measure 5 several times. 0 means \"verbatim\n              copy, don't shift note pitches\", -4 means \"shift down 4 scale\n              degrees\", x means \"rest for the duration of slice\", 7 means \"shift\n              up 7 scale degrees, i.e. one octave\"\n            </span>\n            <code>2b2 c 1b2-1b4</code>\n            <span>\n              Copy two beats (measure 1 beats 2 to 3), no target defaults to \"0\"\n              (one verbatim copy)\n            </span>\n            <code>9&nbsp;&nbsp;&nbsp;ac 1-8</code>\n            <span>All Copy: copy notes in all channels</span>\n            <code>1&nbsp;&nbsp;&nbsp;c 1&nbsp;&nbsp;&nbsp;2&5</code>\n            <span>\n              Layer multiple shifts at same position - for doubling in\n              thirds/sixths etc.\n            </span>\n          </div>\n        </div>\n        <div className=\"section\">\n          <h3>Other commands</h3>\n          <div className=\"grid\">\n            <code>C major, Ab minor</code>\n            <span>\n              Key signature. Modes: major, minor, lydian, mixolydian, dorian,\n              phrygian\n            </span>\n            <code>3/4</code> <span>Time signature</span>\n            <code>bpm 120</code> <span>Tempo</span>\n            <code>lh</code>{\" \"}\n            <span>Left hand (ch1, velocity 70), octave range 2-4</span>\n            <code>rh</code>{\" \"}\n            <span>Right hand (ch0, velocity 100), octave range 4-6</span>\n            <code>ch2, ch3, ...</code>\n            <span>Channels 2 to 15 (velocity 100), octave range 4-6</span>\n            <code>rh 3</code>{\" \"}\n            <span>\n              Change octave range to 3-5, can apply to lh, rh or ch2..15\n            </span>\n            <code>% line</code>{\" \"}\n            <span>\n              Comment using %. Select several lines and press Cmd+/ (Ctrl+/) to\n              toggle\n            </span>\n          </div>\n        </div>\n      </div>\n    </KeyboardLayout>\n  );\n};\n\nexport default Manual;\n","module.exports = __webpack_public_path__ + \"static/media/editor_major_layout.75188da2.png\";","import { isEqual } from \"lodash\";\nimport * as React from \"react\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { PITCH_CLASS_TO_LETTER } from \"../AnalysisGrid\";\nimport Rawl from \"../Rawl\";\nimport {\n  ForgeConfig,\n  generateNotes,\n  PATTERNS,\n  PlaybackStyle,\n  PROGRESSIONS,\n  ProgressionType,\n  SCALE_CHORDS,\n} from \"./ForgeGenerator\";\nimport { generateMidiWithMetadata } from \"./ForgeMidi\";\n\nconst ForgeContainer = styled.div`\n  padding: 20px;\n  width: 100vw;\n  color: white;\n  box-sizing: border-box;\n`;\n\nconst SelectorContainer = styled.div`\n  display: flex;\n  gap: 24px;\n  margin: 20px 0;\n  padding: 8px;\n`;\n\nconst CategorySection = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 16px;\n  width: fit-content;\n`;\n\nconst HorizontalCategorySection = styled(CategorySection)`\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: center;\n  width: auto;\n\n  > button {\n    width: auto;\n    margin: 0;\n  }\n`;\n\nconst CategoryHeader = styled.div`\n  padding-left: 5px;\n  color: #999;\n  font-size: 14px;\n  letter-spacing: 0.5px;\n  text-align: left;\n  user-select: none;\n  margin-bottom: 4px;\n`;\n\nconst Button = styled.button<{ active: boolean }>`\n  padding: 8px 12px;\n  text-align: left;\n  background-color: ${(props) => (props.active ? \"white\" : \"black\")};\n  color: ${(props) => (props.active ? \"black\" : \"white\")};\n  border: none;\n  cursor: pointer;\n  white-space: nowrap;\n  font-size: 14px;\n  user-select: none;\n\n  &:hover {\n    background-color: ${(props) => (props.active ? \"white\" : \"#333\")};\n  }\n\n  ${CategorySection}:not(${HorizontalCategorySection}) & {\n    width: 100%;\n    border-radius: 0;\n\n    &:first-of-type {\n      border-top-left-radius: 4px;\n      border-top-right-radius: 4px;\n    }\n\n    &:last-child {\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n    }\n  }\n\n  ${HorizontalCategorySection} & {\n    display: inline-flex;\n    border-radius: 0;\n    margin: 0;\n    width: auto;\n\n    &:first-child {\n      border-top-left-radius: 4px;\n      border-bottom-left-radius: 4px;\n    }\n\n    &:last-child {\n      border-top-right-radius: 4px;\n      border-bottom-right-radius: 4px;\n    }\n  }\n`;\n\nconst TopControls = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 24px;\n  margin-bottom: 20px;\n  align-items: flex-start;\n`;\n\nconst BPMSlider = styled.input`\n  width: 200px;\n  margin: 0 10px;\n`;\n\nconst BPMLabel = styled.span`\n  font-family: monospace;\n  color: #999;\n  font-size: 14px;\n  letter-spacing: 0.5px;\n`;\n\nconst BPMValue = styled.span`\n  font-family: monospace;\n  color: white;\n  width: 40px;\n  display: inline-block;\n  text-align: right;\n`;\n\ninterface ForgeButtonProps<T extends keyof ForgeUIState> {\n  propName: T;\n  value: ForgeUIState[T];\n  children: React.ReactNode;\n  description: string;\n  className?: string;\n}\n\nconst ForgeButton = <T extends keyof ForgeUIState>({\n  propName,\n  value,\n  children,\n  description,\n  className,\n}: ForgeButtonProps<T>) => {\n  const { state, handleStyleInteraction } = useForgeContext();\n  return (\n    <Button\n      className={className}\n      active={state[propName] === value}\n      onClick={() =>\n        handleStyleInteraction({ [propName]: value }, description, \"click\")\n      }\n      onMouseEnter={() =>\n        handleStyleInteraction({ [propName]: value }, description, \"hover\")\n      }\n      onMouseLeave={() =>\n        handleStyleInteraction(\n          { [propName]: state[propName] },\n          description,\n          \"leave\",\n        )\n      }\n    >\n      {children}\n    </Button>\n  );\n};\n\nconst ProgressionButton = styled(ForgeButton)`\n  font-family: monospace;\n`;\n\nconst PatternButton = styled(ForgeButton)`\n  font-family: monospace;\n`;\n\n// Add pattern type\nexport type PatternIndex = 0 | 1 | 2 | 3 | 4 | 5 | 6;\n\nconst INITIAL_STATE: ForgeUIState = {\n  mode: \"major\",\n  patternIndex: 0,\n  progression: \"CLASSIC\",\n  playbackStyle: \"arpeggio\",\n  wholeNoteStyle: \"triad\",\n  alternationStyle: \"half\",\n  tonic: 0,\n  melodyRhythm: \"eighth\",\n  melodyType: \"static\",\n  bpm: 120,\n};\n\ninterface ForgeUIState {\n  mode: ForgeConfig[\"mode\"];\n  patternIndex: PatternIndex;\n  progression: ProgressionType;\n  playbackStyle: PlaybackStyle;\n  wholeNoteStyle: ForgeConfig[\"wholeNoteStyle\"];\n  alternationStyle: ForgeConfig[\"alternationStyle\"];\n  tonic: number;\n  melodyRhythm: ForgeConfig[\"melodyRhythm\"];\n  melodyType: ForgeConfig[\"melodyType\"];\n  bpm: number;\n}\n\nconst MODE_OPTIONS: Array<{ value: ForgeUIState[\"mode\"]; label: string }> = [\n  { value: \"major\", label: \"Major\" },\n  { value: \"minor\", label: \"Minor\" },\n  { value: \"natural_minor\", label: \"Natural Minor\" },\n];\n\nconst PLAYBACK_STYLES: Array<{\n  value: ForgeUIState[\"playbackStyle\"];\n  label: string;\n}> = [\n  { value: \"arpeggio\", label: \"Arpeggio\" },\n  { value: \"whole_notes\", label: \"Whole Notes\" },\n  { value: \"root_chord_alternation\", label: \"Root-Chord Alternation\" },\n];\n\nconst WHOLE_NOTE_STYLES: Array<{\n  value: ForgeUIState[\"wholeNoteStyle\"];\n  label: string;\n}> = [\n  { value: \"root\", label: \"Root\" },\n  { value: \"octave\", label: \"Octave\" },\n  { value: \"power\", label: \"Power\" },\n  { value: \"triad\", label: \"Triad\" },\n  { value: \"triad_octave\", label: \"Triad Octave\" },\n];\n\nconst ALTERNATION_STYLES: Array<{\n  value: ForgeUIState[\"alternationStyle\"];\n  label: string;\n}> = [\n  { value: \"half\", label: \"Half Notes\" },\n  { value: \"quarter\", label: \"Quarter Notes\" },\n  { value: \"quarter_fifth\", label: \"Quarter Notes with Fifth\" },\n];\n\nconst MELODY_RHYTHMS: Array<{\n  value: ForgeUIState[\"melodyRhythm\"];\n  label: string;\n}> = [\n  { value: \"quarter\", label: \"Quarter Notes\" },\n  { value: \"eighth\", label: \"Eighth Notes\" },\n  { value: \"sixteenth\", label: \"Sixteenth Notes\" },\n];\n\nconst MELODY_TYPES: Array<{\n  value: ForgeUIState[\"melodyType\"];\n  label: string;\n}> = [\n  { value: \"static\", label: \"Static Scale\" },\n  { value: \"chord_based\", label: \"Chord Based\" },\n];\n\ninterface ForgeContextType {\n  state: ForgeUIState;\n  handleStyleInteraction: (\n    updates: Partial<ForgeUIState>,\n    description: string,\n    eventType?: \"click\" | \"hover\" | \"leave\",\n  ) => void;\n}\n\nconst ForgeContext = React.createContext<ForgeContextType | null>(null);\n\nconst useForgeContext = () => {\n  const context = useContext(ForgeContext);\n  if (!context) {\n    throw new Error(\n      \"useForgeContext must be used within a ForgeContextProvider\",\n    );\n  }\n  return context;\n};\n\ninterface ButtonOption<T> {\n  value: T;\n  label: string;\n}\n\ninterface ButtonSectionProps<T extends keyof ForgeUIState> {\n  title: string;\n  options: ButtonOption<ForgeUIState[T]>[];\n  propName: T;\n  customButton?: React.ComponentType<ForgeButtonProps<T>>;\n  horizontal?: boolean;\n}\n\nconst ButtonSection = <T extends keyof ForgeUIState>({\n  title,\n  options,\n  propName,\n  customButton: CustomButton,\n  horizontal = false,\n}: ButtonSectionProps<T> & { horizontal?: boolean }) => {\n  const ButtonComponent = CustomButton || ForgeButton;\n  const SectionComponent = horizontal\n    ? HorizontalCategorySection\n    : CategorySection;\n  return (\n    <SectionComponent>\n      <CategoryHeader>{title}</CategoryHeader>\n      {options.map(({ value, label }) => (\n        <ButtonComponent\n          key={value.toString()}\n          propName={propName}\n          value={value}\n          description={`${title} ${label}`}\n        >\n          {label}\n        </ButtonComponent>\n      ))}\n    </SectionComponent>\n  );\n};\n\nconst TONIC_OPTIONS = Object.entries(PITCH_CLASS_TO_LETTER).map(\n  ([pitchClass, letter]) => ({\n    value: parseInt(pitchClass),\n    label: letter,\n  }),\n);\n\nconst ForgeUI: React.FC = () => {\n  const [state, setState] = useState<ForgeUIState>(INITIAL_STATE);\n  const [lastClickedState, setLastClickedState] =\n    useState<ForgeUIState>(INITIAL_STATE);\n  const [lastGeneratedConfig, setLastGeneratedConfig] =\n    useState<ForgeUIState>(INITIAL_STATE);\n  const [isDraggingBPM, setIsDraggingBPM] = useState(false);\n\n  const {\n    currentMidi,\n    setCurrentMidi,\n    playSongBuffer,\n    rawlProps,\n    setRawlProps,\n  } = useContext(AppContext);\n\n  // Add ref to track if change is from click\n  const isClickPending = useRef(false);\n\n  // Pattern sequences for display - derived directly from PATTERNS\n  const patternSequences = PATTERNS.map((pattern) => pattern.join(\" \"));\n\n  const handleStyleInteraction = async (\n    updates: Partial<ForgeUIState>,\n    description: string,\n    eventType: \"click\" | \"hover\" | \"leave\" = \"click\",\n  ) => {\n    console.log(`[Forge] ${description} ${eventType}`);\n    const shouldAutoPlay = eventType === \"click\";\n\n    if (eventType === \"click\") {\n      isClickPending.current = true;\n      const newState = { ...state, ...updates };\n      setState(newState);\n      setLastClickedState(newState);\n    } else if (eventType === \"hover\") {\n      setState((prev) => ({ ...prev, ...updates }));\n    } else if (eventType === \"leave\") {\n      setState(lastClickedState);\n    }\n\n    const newConfig =\n      eventType === \"leave\" ? lastClickedState : { ...state, ...updates };\n    await prepareMidi(newConfig, shouldAutoPlay);\n  };\n\n  const prepareMidi = async (\n    newConfig: ForgeUIState,\n    shouldAutoPlay: boolean = false,\n  ) => {\n    // Compare against last generated config using lodash isEqual\n    if (!shouldAutoPlay && isEqual(newConfig, lastGeneratedConfig)) {\n      console.log(\n        \"[Forge] Skipping MIDI generation - values match last generated config\",\n      );\n      return null;\n    }\n\n    console.log(\"[Forge] Preparing MIDI generation for:\", newConfig);\n\n    try {\n      // Convert ForgeUIState to ForgeConfig\n      const config: ForgeConfig = {\n        ...newConfig,\n        pattern: newConfig.patternIndex,\n      };\n\n      // Generate notes using the configuration\n      const { melody, chords } = generateNotes(config);\n      const notes = { melody, chords };\n      console.log(\"[Forge] Generated notes:\", notes);\n\n      // Generate MIDI with metadata\n      const { midiData, midiInfo, analysis } = generateMidiWithMetadata(\n        notes,\n        config.mode,\n        config.tonic,\n        config,\n      );\n      console.log(\"[Forge] Generated MIDI data:\", midiData.length, \"bytes\");\n\n      // Update last generated config\n      setLastGeneratedConfig(newConfig);\n\n      // Set the current MIDI info in global context with download-friendly title\n      const downloadableInfo = {\n        ...midiInfo,\n        title: `${PROGRESSIONS[config.progression].join(\"-\")} ${\n          config.playbackStyle === \"arpeggio\"\n            ? `arpeggio-${config.pattern + 1}`\n            : config.playbackStyle === \"whole_notes\"\n            ? config.wholeNoteStyle\n            : config.alternationStyle\n        } ${config.melodyType}-${config.melodyRhythm}`,\n      };\n      console.log(\"[Forge] Setting currentMidi:\", downloadableInfo);\n      setCurrentMidi(downloadableInfo);\n\n      // Set rawlProps with the generated analysis\n      if (rawlProps) {\n        setRawlProps({\n          ...rawlProps,\n          savedAnalysis: analysis,\n        });\n      }\n\n      // Use playSongBuffer to load the MIDI data globally, with autoplay parameter\n      console.log(\"[Forge] Calling playSongBuffer with:\", {\n        filename: downloadableInfo.title + \".mid\",\n        midiDataLength: midiData.length,\n        shouldAutoPlay,\n      });\n      await playSongBuffer(\n        downloadableInfo.title + \".mid\",\n        midiData,\n        shouldAutoPlay,\n      );\n\n      return { midiData, midiInfo: downloadableInfo };\n    } catch (error) {\n      console.error(\"[Forge] Error preparing MIDI:\", error);\n      return null;\n    }\n  };\n\n  // Prepare MIDI on state change\n  useEffect(() => {\n    if (!isClickPending.current) {\n      prepareMidi(state, false);\n    }\n    isClickPending.current = false;\n  }, [state]);\n\n  const getProgressionDisplay = (prog: ProgressionType) => {\n    const chords = PROGRESSIONS[prog].map(\n      (degree) =>\n        SCALE_CHORDS[state.mode][\n          degree as keyof (typeof SCALE_CHORDS)[typeof state.mode]\n        ],\n    );\n    return chords.join(\" \");\n  };\n\n  const getInteractionProps = (\n    updates: Partial<ForgeUIState>,\n    description: string,\n  ) => ({\n    onClick: () => handleStyleInteraction(updates, description),\n  });\n\n  const handleBPMChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newBPM = parseInt(event.target.value);\n    setState((prev) => ({ ...prev, bpm: newBPM }));\n  };\n\n  const handleBPMDragStart = () => {\n    setIsDraggingBPM(true);\n  };\n\n  const handleBPMDragEnd = () => {\n    setIsDraggingBPM(false);\n    setLastClickedState(state);\n    prepareMidi(state, true);\n  };\n\n  const contextValue = {\n    state,\n    handleStyleInteraction,\n  };\n\n  return (\n    <ForgeContext.Provider value={contextValue}>\n      <ForgeContainer>\n        <TopControls>\n          <ButtonSection\n            title=\"Tonic\"\n            options={TONIC_OPTIONS}\n            propName=\"tonic\"\n            horizontal\n          />\n          <ButtonSection\n            title=\"Mode\"\n            options={MODE_OPTIONS}\n            propName=\"mode\"\n            horizontal\n          />\n          <div style={{ display: \"flex\", alignItems: \"center\" }}>\n            <BPMLabel>BPM</BPMLabel>\n            <BPMSlider\n              type=\"range\"\n              min=\"60\"\n              max=\"240\"\n              value={state.bpm}\n              onChange={handleBPMChange}\n              onMouseDown={handleBPMDragStart}\n              onMouseUp={handleBPMDragEnd}\n            />\n            <BPMValue>{state.bpm}</BPMValue>\n          </div>\n        </TopControls>\n\n        <SelectorContainer>\n          <ButtonSection\n            title=\"Progression\"\n            options={Object.keys(PROGRESSIONS).map((prog) => ({\n              value: prog as ProgressionType,\n              label: getProgressionDisplay(prog as ProgressionType),\n            }))}\n            propName=\"progression\"\n            customButton={ProgressionButton}\n          />\n\n          <ButtonSection\n            title=\"Playback Style\"\n            options={PLAYBACK_STYLES}\n            propName=\"playbackStyle\"\n          />\n\n          {state.playbackStyle === \"whole_notes\" && (\n            <ButtonSection\n              title=\"Whole Note Style\"\n              options={WHOLE_NOTE_STYLES}\n              propName=\"wholeNoteStyle\"\n            />\n          )}\n\n          {state.playbackStyle === \"root_chord_alternation\" && (\n            <ButtonSection\n              title=\"Alternation Style\"\n              options={ALTERNATION_STYLES}\n              propName=\"alternationStyle\"\n            />\n          )}\n\n          {state.playbackStyle === \"arpeggio\" && (\n            <ButtonSection\n              title=\"Pattern\"\n              options={patternSequences.map((seq, idx) => ({\n                value: idx as PatternIndex,\n                label: seq,\n              }))}\n              propName=\"patternIndex\"\n              customButton={PatternButton}\n            />\n          )}\n\n          <ButtonSection\n            title=\"Melody Rhythm\"\n            options={MELODY_RHYTHMS}\n            propName=\"melodyRhythm\"\n          />\n\n          <ButtonSection\n            title=\"Melody Type\"\n            options={MELODY_TYPES}\n            propName=\"melodyType\"\n          />\n        </SelectorContainer>\n        {currentMidi && rawlProps && rawlProps.parsingResult && (\n          <Rawl {...rawlProps} />\n        )}\n      </ForgeContainer>\n    </ForgeContext.Provider>\n  );\n};\n\nexport default ForgeUI;\n","import { Chord, rehydrateChords } from \"../legends/chords\";\nimport {\n  C3,\n  DEFAULT_NOTE_DURATION_PADDING,\n  DEFAULT_VELOCITY,\n  MEASURE_LENGTH,\n  TICKS_PER_QUARTER,\n} from \"./constants\";\nimport { getBaseNoteParams } from \"./noteUtils\";\n\n// Constants\nexport const SCALE_CHORDS = {\n  major: {\n    1: \"I\",\n    2: \"ii\",\n    3: \"iii\",\n    4: \"IV\",\n    5: \"V\",\n    6: \"vi\",\n    7: \"viio\",\n  },\n  minor: {\n    1: \"i\",\n    2: \"iio\",\n    3: \"bIII\",\n    4: \"iv\",\n    5: \"V\",\n    6: \"bVI\",\n    7: \"viio\",\n  },\n  natural_minor: {\n    1: \"i\",\n    2: \"iio\",\n    3: \"bIII\",\n    4: \"iv\",\n    5: \"v\",\n    6: \"bVI\",\n    7: \"bVII\",\n  },\n} as const;\n\nexport const PROGRESSIONS = {\n  CLASSIC: [1, 6, 4, 5] as number[],\n  ALTERNATE_1: [1, 5, 6, 4] as number[],\n  ALTERNATE_2: [1, 3, 4, 5] as number[],\n  DESCENDING: [4, 3, 2, 1] as number[],\n  MINOR_RISE: [6, 5, 1, 3] as number[],\n};\n\nexport type ProgressionType = keyof typeof PROGRESSIONS;\n\n// Types\nexport interface Note {\n  pitch: number; // MIDI note number\n  velocity: number;\n  startTime: number; // in ticks (128 per quarter note)\n  duration: number; // in ticks\n  channel?: number; // MIDI channel (0-15)\n}\n\nexport type PlaybackStyle =\n  | \"arpeggio\"\n  | \"whole_notes\"\n  | \"root_chord_alternation\";\n\nexport interface ForgeConfig {\n  mode: \"major\" | \"minor\" | \"natural_minor\";\n  pattern: number;\n  progression: ProgressionType;\n  playbackStyle: PlaybackStyle;\n  wholeNoteStyle?: \"root\" | \"octave\" | \"power\" | \"triad\" | \"triad_octave\";\n  alternationStyle?: \"half\" | \"quarter\" | \"quarter_fifth\";\n  tonic: number;\n  melodyRhythm: \"eighth\" | \"quarter\" | \"sixteenth\";\n  melodyType: \"static\" | \"chord_based\";\n  bpm: number;\n}\n\n// Convert scale degree to chord\nconst getChord = (scaleDegree: number, mode: ForgeConfig[\"mode\"]): Chord => {\n  return SCALE_CHORDS[mode][\n    scaleDegree as keyof (typeof SCALE_CHORDS)[typeof mode]\n  ] as Chord;\n};\n\n// Adjust base pitch based on tonic\nconst getAdjustedBasePitch = (basePitch: number, tonic: number): number => {\n  return basePitch + tonic;\n};\n\n// Patterns defined as sequences where:\n// 0 is root, 1 is next chord tone up, 2 is next up, etc.\n// Negative numbers go down from root (-1 is fifth below root)\n// Numbers > 2 access next octave (3 is root octave up)\nexport const PATTERNS = [\n  [0, 1, 2, 1, 2, 1, 2, 1], // Classic r m u m u m u m\n  [0, 1, 2, 1, 0, 1, 2, 1], // Alternate r m u m r m u m\n  [0, 2, 3, 2, 3, 2, 3, 2], // New pattern 1\n  [0, 2, 3, 2, 4, 2, 3, 2], // New pattern 2\n  [0, 2, 4, 2, 4, 2, 4, 2], // New pattern 3\n  [0, 2, 3, 2, 0, 2, 3, 2], // New pattern 4\n  [0, 3, 5, 4, 6, 4, 5, 4], // New pattern 5\n] as const;\n\n// Helper to create a note with common parameters\nconst createNote = (\n  basePitch: number,\n  pitchOffset: number,\n  tonic: number,\n  startTime: number,\n  duration: number,\n  channel: number = 1,\n): Note => ({\n  pitch: getAdjustedBasePitch(basePitch + pitchOffset, tonic),\n  velocity:\n    channel === 1 ? Math.floor(DEFAULT_VELOCITY * 0.4) : DEFAULT_VELOCITY,\n  startTime,\n  duration: duration - DEFAULT_NOTE_DURATION_PADDING,\n  channel,\n});\n\n// Find index of a pitch in scale degrees\nconst findPitchInScale = (pitch: number, scaleDegrees: number[]): number => {\n  const normalizedPitch = pitch % 12;\n  return scaleDegrees.findIndex((deg) => deg % 12 === normalizedPitch);\n};\n\n// Generate melody notes going up the scale from each chord's root\nconst generateMelody = (\n  progression: number[],\n  mode: ForgeConfig[\"mode\"],\n  melodyRhythm: ForgeConfig[\"melodyRhythm\"],\n  melodyType: ForgeConfig[\"melodyType\"],\n  tonic: number = 0,\n): Note[] => {\n  const notes: Note[] = [];\n  const chords = progression.map((degree) => getChord(degree, mode));\n  const rehydratedChords = rehydrateChords(chords);\n  const chordPitches = rehydratedChords.map((chord) => chord.pitches);\n  const scaleDegrees = getScaleDegrees(mode);\n\n  const notesPerMeasure =\n    melodyRhythm === \"sixteenth\" ? 16 : melodyRhythm === \"eighth\" ? 8 : 4;\n  const noteDuration = TICKS_PER_QUARTER / (notesPerMeasure / 4);\n\n  for (let repeat = 0; repeat < 2; repeat++) {\n    for (let measure = 0; measure < 4; measure++) {\n      const chord = chordPitches[measure];\n      const currentChord = chords[measure];\n\n      const { baseTime, basePitch } = getBaseNoteParams(\n        measure,\n        repeat,\n        currentChord,\n        C3 + 12, // Move melody up one octave\n      );\n\n      if (melodyType === \"static\") {\n        // Generate notes going up the scale from tonic, same pattern each measure\n        for (let i = 0; i < notesPerMeasure; i++) {\n          const octaveOffset = Math.floor(i / 7) * 12;\n          const currentDegree = scaleDegrees[i % 7];\n\n          notes.push(\n            createNote(\n              basePitch,\n              currentDegree + octaveOffset,\n              tonic,\n              baseTime + i * noteDuration,\n              noteDuration,\n              0,\n            ),\n          );\n        }\n      } else {\n        // Generate notes based on chord root\n        const rootPitch = chord[0] % 12;\n        let scaleIndex = findPitchInScale(rootPitch, scaleDegrees);\n\n        for (let i = 0; i < notesPerMeasure; i++) {\n          const octaveOffset = Math.floor((scaleIndex + i) / 7) * 12;\n          const currentDegree = scaleDegrees[(scaleIndex + i) % 7];\n\n          notes.push(\n            createNote(\n              basePitch,\n              currentDegree + octaveOffset,\n              tonic,\n              baseTime + i * noteDuration,\n              noteDuration,\n              0,\n            ),\n          );\n        }\n      }\n    }\n  }\n  return notes;\n};\n\n// Generate whole notes with different voicings\nconst generateWholeNotes = (\n  progression: number[],\n  mode: ForgeConfig[\"mode\"],\n  style: ForgeConfig[\"wholeNoteStyle\"] = \"triad\",\n  tonic: number = 0,\n): Note[] => {\n  const notes: Note[] = [];\n  const chords = progression.map((degree) => getChord(degree, mode));\n  const rehydratedChords = rehydrateChords(chords);\n  const chordPitches = rehydratedChords.map((chord) => chord.pitches);\n\n  for (let repeat = 0; repeat < 2; repeat++) {\n    for (let measure = 0; measure < 4; measure++) {\n      const chord = chordPitches[measure];\n      const currentChord = chords[measure];\n\n      const { baseTime, basePitch } = getBaseNoteParams(\n        measure,\n        repeat,\n        currentChord,\n        C3,\n      );\n\n      // Base note is always the root\n      notes.push(\n        createNote(basePitch, chord[0], tonic, baseTime, MEASURE_LENGTH),\n      );\n\n      // Add additional notes based on style\n      switch (style) {\n        case \"octave\":\n          notes.push(\n            createNote(\n              basePitch,\n              chord[0] + 12,\n              tonic,\n              baseTime,\n              MEASURE_LENGTH,\n            ),\n          );\n          break;\n        case \"power\":\n          notes.push(\n            createNote(\n              basePitch,\n              chord[0] + 7,\n              tonic,\n              baseTime,\n              MEASURE_LENGTH,\n            ),\n          );\n          break;\n        case \"triad\":\n        case \"triad_octave\":\n          notes.push(\n            createNote(basePitch, chord[1], tonic, baseTime, MEASURE_LENGTH),\n            createNote(basePitch, chord[2], tonic, baseTime, MEASURE_LENGTH),\n          );\n          if (style === \"triad_octave\") {\n            notes.push(\n              createNote(\n                basePitch,\n                chord[0] + 12,\n                tonic,\n                baseTime,\n                MEASURE_LENGTH,\n              ),\n            );\n          }\n          break;\n      }\n    }\n  }\n  return notes;\n};\n\n// Generate root-chord alternation patterns\nconst generateRootChordAlternation = (\n  progression: number[],\n  mode: ForgeConfig[\"mode\"],\n  style: ForgeConfig[\"alternationStyle\"] = \"half\",\n  tonic: number = 0,\n): Note[] => {\n  const notes: Note[] = [];\n  const chords = progression.map((degree) => getChord(degree, mode));\n  const rehydratedChords = rehydrateChords(chords);\n  const chordPitches = rehydratedChords.map((chord) => chord.pitches);\n\n  for (let repeat = 0; repeat < 2; repeat++) {\n    for (let measure = 0; measure < 4; measure++) {\n      const chord = chordPitches[measure];\n      const currentChord = chords[measure];\n\n      const { baseTime, basePitch } = getBaseNoteParams(\n        measure,\n        repeat,\n        currentChord,\n        C3,\n      );\n\n      switch (style) {\n        case \"half\":\n          notes.push(\n            createNote(\n              basePitch,\n              chord[0],\n              tonic,\n              baseTime,\n              MEASURE_LENGTH / 2,\n            ),\n          );\n          chord.forEach((pitch) => {\n            notes.push(\n              createNote(\n                basePitch,\n                pitch,\n                tonic,\n                baseTime + MEASURE_LENGTH / 2,\n                MEASURE_LENGTH / 2,\n              ),\n            );\n          });\n          break;\n        case \"quarter\":\n          for (let quarter = 0; quarter < 4; quarter++) {\n            if (quarter % 2 === 0) {\n              notes.push(\n                createNote(\n                  basePitch,\n                  chord[0],\n                  tonic,\n                  baseTime + quarter * TICKS_PER_QUARTER,\n                  TICKS_PER_QUARTER,\n                ),\n              );\n            } else {\n              chord.forEach((pitch) => {\n                notes.push(\n                  createNote(\n                    basePitch,\n                    pitch,\n                    tonic,\n                    baseTime + quarter * TICKS_PER_QUARTER,\n                    TICKS_PER_QUARTER,\n                  ),\n                );\n              });\n            }\n          }\n          break;\n        case \"quarter_fifth\":\n          for (let quarter = 0; quarter < 4; quarter++) {\n            if (quarter % 2 === 0) {\n              notes.push(\n                createNote(\n                  basePitch,\n                  quarter === 0 ? chord[0] : chord[2] - 12,\n                  tonic,\n                  baseTime + quarter * TICKS_PER_QUARTER,\n                  TICKS_PER_QUARTER,\n                ),\n              );\n            } else {\n              chord.forEach((pitch) => {\n                notes.push(\n                  createNote(\n                    basePitch,\n                    pitch,\n                    tonic,\n                    baseTime + quarter * TICKS_PER_QUARTER,\n                    TICKS_PER_QUARTER,\n                  ),\n                );\n              });\n            }\n          }\n          break;\n      }\n    }\n  }\n  return notes;\n};\n\n// Convert chord to pattern in IR\nexport const generateAlbertiPattern = (\n  progression: number[],\n  mode: ForgeConfig[\"mode\"],\n  patternIndex: number,\n  tonic: number = 0,\n): Note[] => {\n  const EIGHTH_NOTE = TICKS_PER_QUARTER / 2;\n  const selectedPattern = PATTERNS[patternIndex] || PATTERNS[0];\n  const notes: Note[] = [];\n\n  const chords = progression.map((degree) => getChord(degree, mode));\n  const rehydratedChords = rehydrateChords(chords);\n  const chordPitches = rehydratedChords.map((chord) => chord.pitches);\n\n  for (let repeat = 0; repeat < 2; repeat++) {\n    for (let measure = 0; measure < 4; measure++) {\n      const chord = chordPitches[measure];\n      const currentChord = chords[measure];\n\n      const { baseTime, basePitch } = getBaseNoteParams(\n        measure,\n        repeat,\n        currentChord,\n        C3,\n      );\n\n      for (let i = 0; i < 8; i++) {\n        const patternValue = selectedPattern[i];\n        const octaveOffset =\n          Math.floor(Math.abs(patternValue) / 3) * 12 * Math.sign(patternValue);\n        const chordIndex = ((patternValue % 3) + 3) % 3;\n\n        notes.push(\n          createNote(\n            basePitch,\n            chord[chordIndex] + octaveOffset,\n            tonic,\n            baseTime + i * EIGHTH_NOTE,\n            EIGHTH_NOTE,\n          ),\n        );\n      }\n    }\n  }\n  return notes;\n};\n\n// Get scale degrees based on mode\nconst getScaleDegrees = (mode: ForgeConfig[\"mode\"]): number[] => {\n  switch (mode) {\n    case \"minor\":\n      // Harmonic minor: W H W W H WH H\n      return [0, 2, 3, 5, 7, 8, 11, 12];\n    case \"natural_minor\":\n      // Natural minor: W H W W H W W\n      return [0, 2, 3, 5, 7, 8, 10, 12];\n    case \"major\":\n    default:\n      // Major scale: W W H W W W H\n      return [0, 2, 4, 5, 7, 9, 11, 12];\n  }\n};\n\nexport const generateNotes = (\n  config: ForgeConfig,\n): { melody: Note[]; chords: Note[] } => {\n  const progression = PROGRESSIONS[config.progression];\n  const chordNotes = (() => {\n    let notes: Note[];\n    switch (config.playbackStyle) {\n      case \"whole_notes\":\n        notes = generateWholeNotes(\n          progression,\n          config.mode,\n          config.wholeNoteStyle,\n          config.tonic,\n        );\n        break;\n      case \"root_chord_alternation\":\n        notes = generateRootChordAlternation(\n          progression,\n          config.mode,\n          config.alternationStyle,\n          config.tonic,\n        );\n        break;\n      case \"arpeggio\":\n      default:\n        notes = generateAlbertiPattern(\n          progression,\n          config.mode,\n          config.pattern,\n          config.tonic,\n        );\n    }\n    // Move accompaniment down an octave only for scale degrees 4-7\n    return notes.map((note) => ({\n      ...note,\n      channel: 1,\n      pitch:\n        note.pitch -\n        (progression[Math.floor(note.startTime / MEASURE_LENGTH) % 4] >= 4\n          ? 12\n          : 0),\n    }));\n  })();\n\n  const melodyNotes = generateMelody(\n    progression,\n    config.mode,\n    config.melodyRhythm,\n    config.melodyType,\n    config.tonic,\n  );\n\n  return {\n    melody: melodyNotes,\n    chords: chordNotes,\n  };\n};\n","import { Chord } from \"../legends/chords\";\nimport { CHORD_OCTAVE_ADJUSTMENTS, MEASURE_LENGTH } from \"./constants\";\n\nexport interface BaseNoteParams {\n  baseTime: number;\n  basePitch: number;\n}\n\nexport const getBaseNoteParams = (\n  measure: number,\n  repeat: number,\n  currentChord: Chord,\n  basePitch: number,\n): BaseNoteParams => ({\n  baseTime: (repeat * 4 + measure) * MEASURE_LENGTH,\n  basePitch:\n    basePitch +\n    (CHORD_OCTAVE_ADJUSTMENTS[\n      currentChord as keyof typeof CHORD_OCTAVE_ADJUSTMENTS\n    ] || 0),\n});\n","import MidiWriter from \"midi-writer-js\";\nimport { Analysis, PitchClass } from \"../analysis\";\nimport { DEFAULT_VELOCITY } from \"./constants\";\nimport { ForgeConfig, Note } from \"./ForgeGenerator\";\n\ntype Track = {\n  addTrackName(name: string): void;\n  setTempo(tempo: number): void;\n  addEvent(event: any): void;\n};\n\ntype NoteEventParams = {\n  pitch: number[];\n  duration: string;\n  velocity: number;\n  startTick: number;\n  channel: number;\n};\n\n// Type assertion for the imported MidiWriter\nconst { Track, NoteEvent, Writer } = MidiWriter as {\n  Track: new () => Track;\n  NoteEvent: new (params: NoteEventParams) => any;\n  Writer: new (tracks: Track[]) => { dataUri(): string };\n};\n\nexport const FORGE_MOCK_ID = \"forge_mock\";\n\n// Mid-level representation of musical events\ninterface MusicalEvent {\n  pitches: number[];\n  startTick: number;\n  duration: number;\n  velocity: number;\n  channel: number;\n}\n\nexport interface MidiGenerationResult {\n  midiData: Uint8Array;\n  midiInfo: {\n    id: string;\n    title: string;\n    slug: string;\n    sourceUrl: null;\n    isHiddenRoute: boolean;\n  };\n  analysis: Analysis;\n}\n\n// Convert raw notes to musical events (mid-level representation)\nconst convertToMusicalEvents = (notes: Note[]): MusicalEvent[] => {\n  const sortedNotes = [...notes].sort((a, b) => a.startTime - b.startTime);\n  const events: MusicalEvent[] = [];\n\n  let currentStartTime = -1;\n  let currentChannel = -1;\n  let currentPitches: number[] = [];\n\n  const addEvent = (\n    startTime: number,\n    pitches: number[],\n    duration: number,\n    channel: number,\n  ) => {\n    events.push({\n      pitches,\n      startTick: startTime,\n      duration,\n      velocity: DEFAULT_VELOCITY,\n      channel,\n    });\n  };\n\n  sortedNotes.forEach((note, index) => {\n    if (\n      note.startTime !== currentStartTime ||\n      note.channel !== currentChannel\n    ) {\n      // Add previous group if it exists\n      if (currentPitches.length > 0) {\n        addEvent(\n          currentStartTime,\n          currentPitches,\n          sortedNotes[index - 1].duration,\n          sortedNotes[index - 1].channel || 0,\n        );\n      }\n      // Start new group\n      currentStartTime = note.startTime;\n      currentChannel = note.channel || 0;\n      currentPitches = [note.pitch];\n    } else {\n      // Add to current group\n      currentPitches.push(note.pitch);\n    }\n  });\n\n  // Add the last group\n  if (currentPitches.length > 0) {\n    addEvent(\n      currentStartTime,\n      currentPitches,\n      sortedNotes[sortedNotes.length - 1].duration,\n      sortedNotes[sortedNotes.length - 1].channel || 0,\n    );\n  }\n\n  return events;\n};\n\n// Convert musical events to MIDI file\nconst generateMidiFromEvents = (\n  events: MusicalEvent[],\n  config: ForgeConfig,\n): Uint8Array => {\n  // Create separate tracks for each channel\n  const tracks = new Map<number, Track>();\n\n  events.forEach((event) => {\n    if (!tracks.has(event.channel)) {\n      const track = new Track();\n      if (event.channel === 0) {\n        track.addTrackName(\"Melody\");\n      } else if (event.channel === 1) {\n        track.addTrackName(\"Chords\");\n      }\n      track.setTempo(config.bpm);\n      tracks.set(event.channel, track);\n    }\n\n    const track = tracks.get(event.channel)!;\n    track.addEvent(\n      new NoteEvent({\n        pitch: event.pitches,\n        duration: \"T\" + event.duration,\n        velocity: event.velocity,\n        startTick: event.startTick,\n        channel: event.channel,\n      }),\n    );\n  });\n\n  const writer = new Writer(Array.from(tracks.values()));\n  const base64Data = writer.dataUri().split(\",\")[1];\n\n  // Convert base64 to Uint8Array\n  const binaryString = window.atob(base64Data);\n  const bytes = new Uint8Array(binaryString.length);\n  for (let i = 0; i < binaryString.length; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n\n  return bytes;\n};\n\n// Main MIDI generation function now uses the two-step process\nexport const generateMidiFile = (\n  notes: Note[],\n  config: ForgeConfig,\n): Uint8Array => {\n  const musicalEvents = convertToMusicalEvents(notes);\n  return generateMidiFromEvents(musicalEvents, config);\n};\n\nexport const generateInitialAnalysis = (\n  mode: ForgeConfig[\"mode\"],\n  tonic: number,\n): Analysis => {\n  return {\n    modulations: {\n      1: tonic as PitchClass,\n    },\n    comment: `Generated ${mode} Alberti pattern - eight measures in 4/4 time`,\n    tags: [\"generated\", \"alberti\", mode],\n    form: {},\n    phrasePatch: [],\n    sections: [0],\n  };\n};\n\nexport const generateMidiWithMetadata = (\n  { melody, chords }: { melody: Note[]; chords: Note[] },\n  mode: ForgeConfig[\"mode\"],\n  tonic: number,\n  config: ForgeConfig,\n): MidiGenerationResult => {\n  const midiData = generateMidiFile([...melody, ...chords], config);\n\n  return {\n    midiData,\n    midiInfo: {\n      id: FORGE_MOCK_ID,\n      title: `Generated ${mode} Pattern with Melody`,\n      slug: FORGE_MOCK_ID,\n      sourceUrl: null,\n      isHiddenRoute: false,\n    },\n    analysis: generateInitialAnalysis(mode, tonic),\n  };\n};\n","import {\n  Bytes,\n  addDoc,\n  arrayUnion,\n  collection,\n  doc,\n  getDocs,\n  getFirestore,\n  query,\n  updateDoc,\n  where,\n} from \"firebase/firestore/lite\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { slugify } from \"transliteration\";\nimport { FOOTER_HEIGHT } from \"../AppFooter\";\n\nconst saveMidi = async (\n  title: string,\n  sourceUrl: string,\n  midi: ArrayBuffer,\n) => {\n  let slug = slugify(title);\n  const firestore = getFirestore();\n\n  // Check if the slug already exists\n  const checkSlugExists = async (slugToCheck: string) => {\n    const q = query(\n      collection(firestore, \"midis\"),\n      where(\"slug\", \"==\", slugToCheck),\n    );\n    const querySnapshot = await getDocs(q);\n    return !querySnapshot.empty;\n  };\n\n  // If slug exists, append random characters\n  if (await checkSlugExists(slug)) {\n    const randomChars = Math.random().toString(16).substring(2, 8);\n    slug = `${slug}-${randomChars}`;\n  }\n\n  const firestoreBlob = Bytes.fromUint8Array(new Uint8Array(midi));\n\n  const docRef = await addDoc(collection(firestore, \"midis\"), {\n    blob: firestoreBlob,\n    url: sourceUrl, // This is correct, we're storing it as 'url' in Firestore\n    title,\n    slug,\n  });\n  console.log(\"Document written with ID:\", docRef.id);\n\n  const indexRef = doc(firestore, \"indexes\", \"midis\");\n  await updateDoc(indexRef, {\n    midis: arrayUnion({ title, slug, id: docRef.id }),\n  });\n  window.location.href = `/f/${slug}`;\n};\n\nexport const saveMidiFromLink = async (link: string) => {\n  try {\n    const params = new URLSearchParams(window.location.search);\n\n    const link = atob(params.get(\"link\") || \"\");\n    const url = atob(params.get(\"pageUrl\") || \"\");\n    const title = decodeURIComponent(\n      atob(decodeURIComponent(params.get(\"title\") || \"\"))\n        .split(\"\")\n        .map((char) => \"%\" + (\"00\" + char.charCodeAt(0).toString(16)).slice(-2))\n        .join(\"\"),\n    );\n\n    const response = await fetch(`${link}`, {\n      method: \"GET\",\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error. Status: ${response.status}`);\n    }\n\n    const midi = await (await response.blob()).arrayBuffer();\n    saveMidi(title, url, midi);\n  } catch (error) {\n    alert(`Fetching binary file failed: ${JSON.stringify(error)}`);\n  }\n};\n\nexport const DropSaveForm: React.FC<{\n  midi: ArrayBuffer;\n  filename: string;\n}> = ({ midi, filename }) => {\n  const [title, setTitle] = useState<string>(filename);\n  const [sourceUrl, setSourceUrl] = useState<string>(\"\");\n  const titleInputRef = React.useRef<HTMLInputElement>(null);\n\n  // Add useEffect hook to focus and select the title input\n  React.useEffect(() => {\n    if (titleInputRef.current) {\n      titleInputRef.current.focus();\n      titleInputRef.current.select();\n    }\n  }, []);\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setTitle(event.target.value);\n  };\n\n  const handleUrlChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSourceUrl(event.target.value);\n  };\n\n  const handleSave = () => {\n    if (title.trim() !== \"\") {\n      saveMidi(title, sourceUrl || \"drop\", midi);\n    } else {\n      if (titleInputRef.current) {\n        titleInputRef.current.style.backgroundColor = \"red\";\n        setTimeout(() => {\n          if (titleInputRef.current) {\n            titleInputRef.current.style.backgroundColor = \"\";\n          }\n        }, 1000);\n      }\n    }\n  };\n\n  const handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === \"Enter\") {\n      handleSave();\n    }\n  };\n\n  return (\n    <div style={{ position: \"fixed\", bottom: FOOTER_HEIGHT }}>\n      <input\n        ref={titleInputRef}\n        type=\"text\"\n        placeholder=\"Enter a title\"\n        value={title}\n        onChange={handleInputChange}\n        onKeyDown={handleKeyPress}\n        style={{ width: \"30em\" }}\n      />\n      <input\n        type=\"text\"\n        placeholder=\"Enter a source URL (optional)\"\n        value={sourceUrl}\n        onChange={handleUrlChange}\n        onKeyDown={handleKeyPress}\n        style={{ width: \"30em\", marginTop: \"10px\" }}\n      />\n      <button onClick={handleSave} style={{ marginTop: \"10px\" }}>\n        Save\n      </button>\n    </div>\n  );\n};\n","import * as React from \"react\";\nimport reaperImage from \"../../../assets/images/reaper_colormap.png\";\n\nconst DAW = () => {\n  return (\n    <div style={{ marginLeft: 250, width: 600 }}>\n      <h2>DAWs with 12 colors</h2>\n      <h3>REAPER</h3>\n      <h4>How to use</h4>\n      <ul>\n        <li>\n          <a href={reaperImage} download=\"reaper_colormap.png\">\n            <img src={reaperImage} alt=\"Reaper\" style={{ maxWidth: \"100%\" }} />\n          </a>\n        </li>\n        <li>\n          Preferences - Editing behavior - MIDI Editor - Default note color map\n        </li>\n        <li>\n          Issue: will only work for C major / C minor, needs to be shifted for\n          other keys.\n        </li>\n      </ul>\n      <h4>How to update</h4>\n      <ul>\n        <li>\n          <a\n            href=\"https://reaper-midi-colormap-tool.netlify.app/\"\n            target=\"_blank\"\n          >\n            https://reaper-midi-colormap-tool.netlify.app/\n          </a>\n        </li>\n        <li>\n          <a\n            href=\"https://chat.openai.com/share/eb2b635a-0c55-414a-bfb0-830dbde0aba4\"\n            target=\"_blank\"\n          >\n            https://chat.openai.com/share/eb2b635a-0c55-414a-bfb0-830dbde0aba4\n          </a>\n        </li>\n      </ul>\n      <h3>Signal</h3>\n      <ul>\n        <li>\n          <a href=\"https://signal-jy5a-two.vercel.app/edit\" target=\"_blank\">\n            https://signal-jy5a-two.vercel.app/edit\n          </a>\n        </li>\n        <li>\n          <a\n            href=\"https://github.com/vpavlenko/signal/commits/12colors/\"\n            target=\"_blank\"\n          >\n            https://github.com/vpavlenko/signal/commits/12colors/\n          </a>{\" \"}\n          - anyone wants to debug WebGL-React?\n        </li>\n      </ul>\n      <h3>Cubase</h3>\n      Cubase has{\" \"}\n      <a\n        href=\"https://steinberg.help/cubase_pro/v12/en/cubase_nuendo/topics/midi_editors/midi_editors_pitch_colors_r.html\"\n        target=\"_blank\"\n      >\n        Pitch Colors Setup\n      </a>\n      , it may be{\" \"}\n      <a\n        href=\"https://chat.openai.com/share/14e28957-610e-4a3e-a5b5-d4cf47c149be\"\n        target=\"_blank\"\n      >\n        shareable\n      </a>\n      .<h3>MuseScore</h3>\n      <a\n        href=\"https://youtu.be/Eq3bUFgEcb4?si=IhXpNtcvvqtQhCv1&t=4470\"\n        target=\"_blank\"\n      >\n        Promised\n      </a>\n      <h3>Studio One</h3>\n      <a\n        href=\"https://answers.presonus.com/45430/want-change-the-color-for-each-pitch-of-midi-note-shown-below\"\n        target=\"_blank\"\n      >\n        https://answers.presonus.com/45430/want-change-the-color-for-each-pitch-of-midi-note-shown-below\n      </a>\n      <h3>Logic Pro</h3>\n      <a\n        href=\"https://logicpro.skydocu.com/en/preferences-project-settings-and-key-commands/project-settings/score-settings/colors-settings/\"\n        target=\"_blank\"\n      >\n        https://logicpro.skydocu.com/en/preferences-project-settings-and-key-commands/project-settings/score-settings/colors-settings/\n      </a>\n    </div>\n  );\n};\n\nexport default DAW;\n","module.exports = \"data:image/png;base64,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\"","import {\n  MidiData,\n  MidiEvent,\n  MidiNoteOffEvent,\n  MidiNoteOnEvent,\n  MidiPitchBendEvent,\n  parseMidi,\n  writeMidi,\n} from \"midi-file\";\n\ntype EnhancedMidiEvent = MidiEvent & {\n  absoluteTime: number;\n  originalTrack: number;\n};\n\nfunction isNoteOrPitchBendEvent(\n  event: MidiEvent,\n): event is MidiNoteOnEvent | MidiNoteOffEvent | MidiPitchBendEvent {\n  return (\n    event.type === \"noteOn\" ||\n    event.type === \"noteOff\" ||\n    event.type === \"pitchBend\"\n  );\n}\n\nfunction isGlobalMetaEvent(event: MidiEvent): boolean {\n  return (\n    \"subtype\" in event &&\n    typeof event.subtype === \"string\" &&\n    [\"setTempo\", \"timeSignature\", \"keySignature\"].includes(event.subtype)\n  );\n}\n\nfunction getTrackName(track: MidiEvent[]): string | undefined {\n  const nameEvent = track.find(\n    (event) => event.type === \"trackName\" && \"text\" in event,\n  );\n  if (nameEvent && \"text\" in nameEvent) {\n    return nameEvent.text;\n  }\n  return undefined;\n}\n\nfunction createTrackNameEvent(name: string, deltaTime: number = 0): MidiEvent {\n  return {\n    deltaTime,\n    type: \"trackName\",\n    text: name,\n  };\n}\n\nfunction createEndOfTrackEvent(deltaTime: number = 0): MidiEvent {\n  return {\n    deltaTime,\n    type: \"endOfTrack\",\n  };\n}\n\nfunction ensureTrackEnding(track: MidiEvent[]): MidiEvent[] {\n  // Remove any existing end of track events\n  const eventsWithoutEnd = track.filter((event) => event.type !== \"endOfTrack\");\n\n  // Add a new end of track event\n  return [...eventsWithoutEnd, createEndOfTrackEvent()];\n}\n\nfunction findUnusedChannel(\n  midi: MidiData,\n  usedChannels: Set<number>,\n): number | null {\n  // Find the first unused channel number between 0-15\n  for (let channel = 0; channel < 16; channel++) {\n    if (!usedChannels.has(channel)) {\n      return channel;\n    }\n  }\n  return null;\n}\n\nfunction getUsedChannels(midi: MidiData): Set<number> {\n  const usedChannels = new Set<number>();\n  midi.tracks.forEach((track) => {\n    track.forEach((event) => {\n      if (\"channel\" in event) {\n        usedChannels.add(event.channel);\n      }\n    });\n  });\n  return usedChannels;\n}\n\nfunction pushEventWithDeltaTime(\n  event: EnhancedMidiEvent,\n  events: EnhancedMidiEvent[],\n  lastEventTime: number,\n  targetChannel?: number,\n): number {\n  const deltaTime = event.absoluteTime - lastEventTime;\n  events.push({\n    ...event,\n    deltaTime,\n    ...(targetChannel !== undefined && { channel: targetChannel }),\n  } as EnhancedMidiEvent);\n  return event.absoluteTime;\n}\n\nfunction transformMidi(\n  inputData: Uint8Array,\n  _forcedPanning?: boolean,\n): Uint8Array {\n  // Read forcedPanning directly from localStorage, fallback to false if not set\n  const forcedPanning = localStorage.getItem(\"forcedPanning\") === \"true\";\n\n  const midi: MidiData = parseMidi(inputData);\n  const usedChannels = getUsedChannels(midi);\n\n  // Group tracks by channel\n  const channelTracks: Map<number, number[]> = new Map();\n  midi.tracks.forEach((track, trackIndex) => {\n    track.forEach((event) => {\n      if (isNoteOrPitchBendEvent(event)) {\n        const tracks = channelTracks.get(event.channel) || [];\n        if (!tracks.includes(trackIndex)) {\n          tracks.push(trackIndex);\n        }\n        channelTracks.set(event.channel, tracks);\n      }\n    });\n  });\n\n  // If no multi-track channels found, return original\n  const hasMultiTrackChannels = Array.from(channelTracks.values()).some(\n    (tracks) => tracks.length > 1,\n  );\n  if (!hasMultiTrackChannels) {\n    console.log(\"[transformMidi] skipping - no multi-track channels\");\n    return inputData;\n  }\n\n  // Step 1: Convert all tracks to absolute time and separate global meta events\n  const mergedEvents: EnhancedMidiEvent[] = [];\n  const globalMetaEvents: EnhancedMidiEvent[] = [];\n\n  midi.tracks.forEach((track, trackIndex) => {\n    let absoluteTime = 0;\n    track.forEach((event) => {\n      if (event.type === \"endOfTrack\") return;\n      absoluteTime += event.deltaTime;\n\n      const enhancedEvent = {\n        ...event,\n        absoluteTime,\n        originalTrack: trackIndex,\n      } as EnhancedMidiEvent;\n\n      if (isGlobalMetaEvent(event)) {\n        globalMetaEvents.push(enhancedEvent);\n      } else {\n        mergedEvents.push(enhancedEvent);\n      }\n    });\n  });\n\n  mergedEvents.sort((a, b) => a.absoluteTime - b.absoluteTime);\n  globalMetaEvents.sort((a, b) => a.absoluteTime - b.absoluteTime);\n\n  // Step 2: Split into new tracks\n  const newTracks: MidiEvent[][] = [];\n  const processedChannels = new Set<number>();\n\n  // Process multi-track channels\n  for (const [channel, trackIndices] of channelTracks.entries()) {\n    if (trackIndices.length <= 1) continue;\n\n    // Find an unused channel for the left hand\n    const leftHandChannel = findUnusedChannel(midi, usedChannels);\n    if (leftHandChannel === null) {\n      // Skip splitting this channel if no unused channels available\n      continue;\n    }\n\n    processedChannels.add(channel);\n    usedChannels.add(leftHandChannel); // Reserve this channel\n\n    const baseTrackName =\n      trackIndices\n        .map((idx) => getTrackName(midi.tracks[idx]))\n        .find((name) => name !== undefined) || \"\";\n\n    // Create left/right hand tracks\n    const leftHandEvents: EnhancedMidiEvent[] = [];\n    const rightHandEvents: EnhancedMidiEvent[] = [];\n\n    // Add track names\n    const leftName = baseTrackName\n      ? `${baseTrackName}: left hand`\n      : \"left hand\";\n    const rightName = baseTrackName\n      ? `${baseTrackName}: right hand`\n      : \"right hand\";\n    rightHandEvents.push({\n      ...createTrackNameEvent(rightName),\n      absoluteTime: 0,\n      originalTrack: trackIndices[0],\n    } as EnhancedMidiEvent);\n    leftHandEvents.push({\n      ...createTrackNameEvent(leftName),\n      absoluteTime: 0,\n      originalTrack: trackIndices[1],\n    } as EnhancedMidiEvent);\n\n    // Add global meta events to both tracks\n    let lastMetaTime = 0;\n    globalMetaEvents.forEach((event) => {\n      const deltaTime = event.absoluteTime - lastMetaTime;\n      rightHandEvents.push({ ...event, deltaTime } as EnhancedMidiEvent);\n      leftHandEvents.push({ ...event, deltaTime } as EnhancedMidiEvent);\n      lastMetaTime = event.absoluteTime;\n    });\n\n    if (forcedPanning) {\n      // Add pan right (CC #10 = 127) for right hand\n      rightHandEvents.push({\n        type: \"controller\",\n        controllerType: 10,\n        value: 127,\n        deltaTime: 0,\n        channel: channel,\n        originalTrack: trackIndices[0],\n        absoluteTime: 0,\n      } as EnhancedMidiEvent);\n\n      // Add pan left (CC #10 = 0) for left hand\n      leftHandEvents.push({\n        type: \"controller\",\n        controllerType: 10,\n        value: 0,\n        deltaTime: 0,\n        channel: leftHandChannel,\n        originalTrack: trackIndices[1],\n        absoluteTime: 0,\n      } as EnhancedMidiEvent);\n    }\n\n    let rightHandLastEventTime = 0;\n    let leftHandLastEventTime = 0;\n\n    // Split events between hands\n    mergedEvents.forEach((event) => {\n      if (!(\"channel\" in event)) {\n        // Handle non-channel events (except global meta events which were handled earlier)\n        if (!isGlobalMetaEvent(event)) {\n          rightHandLastEventTime = pushEventWithDeltaTime(\n            event,\n            rightHandEvents,\n            rightHandLastEventTime,\n          );\n          leftHandLastEventTime = pushEventWithDeltaTime(\n            event,\n            leftHandEvents,\n            leftHandLastEventTime,\n          );\n        }\n        return;\n      }\n\n      if (event.channel !== channel) return;\n\n      const isFirstTrack = event.originalTrack === trackIndices[0];\n      if (isNoteOrPitchBendEvent(event)) {\n        if (isFirstTrack || event.type === \"noteOff\") {\n          rightHandLastEventTime = pushEventWithDeltaTime(\n            event,\n            rightHandEvents,\n            rightHandLastEventTime,\n            channel,\n          );\n        }\n        if (!isFirstTrack || event.type === \"noteOff\") {\n          leftHandLastEventTime = pushEventWithDeltaTime(\n            event,\n            leftHandEvents,\n            leftHandLastEventTime,\n            leftHandChannel,\n          );\n        }\n      } else if (event.type === \"programChange\") {\n        // Copy program changes to both hands to maintain the same instrument\n        rightHandLastEventTime = pushEventWithDeltaTime(\n          event,\n          rightHandEvents,\n          rightHandLastEventTime,\n          channel,\n        );\n        leftHandLastEventTime = pushEventWithDeltaTime(\n          event,\n          leftHandEvents,\n          leftHandLastEventTime,\n          leftHandChannel,\n        );\n      } else {\n        // Skip existing pan control messages when forced panning is enabled\n        if (\n          forcedPanning &&\n          event.type === \"controller\" &&\n          event.controllerType === 10\n        ) {\n          return;\n        }\n\n        // Copy other channel events to both tracks\n        rightHandLastEventTime = pushEventWithDeltaTime(\n          event,\n          rightHandEvents,\n          rightHandLastEventTime,\n          channel,\n        );\n        leftHandLastEventTime = pushEventWithDeltaTime(\n          event,\n          leftHandEvents,\n          leftHandLastEventTime,\n          leftHandChannel,\n        );\n      }\n    });\n\n    // Clean up events and ensure track endings\n    const cleanedRightHandEvents = rightHandEvents.map(\n      ({ absoluteTime, originalTrack, ...event }) => event,\n    );\n    const cleanedLeftHandEvents = leftHandEvents.map(\n      ({ absoluteTime, originalTrack, ...event }) => event,\n    );\n\n    newTracks.push(\n      ensureTrackEnding(cleanedRightHandEvents),\n      ensureTrackEnding(cleanedLeftHandEvents),\n    );\n  }\n\n  // Add remaining tracks unchanged, ensuring they have end markers\n  midi.tracks.forEach((track, trackIndex) => {\n    const hasProcessedChannel = track.some(\n      (event) => \"channel\" in event && processedChannels.has(event.channel),\n    );\n    if (!hasProcessedChannel) {\n      newTracks.push(ensureTrackEnding(track));\n    }\n  });\n\n  // Create new MIDI file\n  const newMidiData: MidiData = {\n    header: midi.header,\n    tracks: newTracks,\n  };\n\n  // Write the modified MIDI data\n  const outputData = writeMidi(newMidiData);\n  return new Uint8Array(outputData);\n}\n\nexport default transformMidi;\n","export const GM_INSTRUMENTS = [\n  'Piano         ',\n  'Bright Piano  ',\n  'Electric Piano',\n  'Honky-tonk    ',\n  'Rhodes Piano  ',\n  'FM Piano      ',\n  'Harpsichord   ',\n  'Clavinet      ',\n  'Celesta       ',\n  'Glockenspiel  ',\n  'Music Box     ',\n  'Vibraphone    ',\n  'Marimba       ',\n  'Xylophone     ',\n  'Tubular Bells ',\n  'Dulcimer      ',\n  'Drawbar Organ ',\n  'Perc Organ    ',\n  'Rock Organ    ',\n  'Church Organ  ',\n  'Reed Organ    ',\n  'Accordion     ',\n  'Harmonica     ',\n  'Accordion     ',\n  'Steel Guitar  ',\n  'Nylon Guitar  ',\n  'Jazz Guitar   ',\n  'Clean Guitar  ',\n  'Muted Guitar  ',\n  'Overdrive Guit',\n  'Distort Guitar',\n  'Guit Harmonics',\n  'Acoustic Bass ',\n  'Finger Bass   ',\n  'Picked Bass   ',\n  'Fretless Bass ',\n  'Slap Bass 1   ',\n  'Slap Bass 2   ',\n  'Synth Bass 1  ',\n  'Synth Bass 2  ',\n  'Violin        ',\n  'Viola         ',\n  'Cello         ',\n  'Contrabass    ',\n  'Trem Strings  ',\n  'Pizz Strings  ',\n  'Harp          ',\n  'Timpani       ',\n  'String Ens 1  ',\n  'String Ens 2  ',\n  'Syn Strings 1 ',\n  'Syn Strings 2 ',\n  'Choir Aahs    ',\n  'Voice Oohs    ',\n  'Synth Voice   ',\n  'Orch Hit      ',\n  'Trumpet       ',\n  'Trombone      ',\n  'Tuba          ',\n  'Muted Trumpet ',\n  'French Horn   ',\n  'Brass Section ',\n  'SynthBrass 1  ',\n  'SynthBrass 2  ',\n  'Soprano Sax   ',\n  'Alto Sax      ',\n  'Tenor Sax     ',\n  'Baritone Sax  ',\n  'Oboe          ',\n  'English Horn  ',\n  'Bassoon       ',\n  'Clarinet      ',\n  'Piccolo       ',\n  'Flute         ',\n  'Recorder      ',\n  'Pan Flute     ',\n  'Blown Bottle  ',\n  'Shakuhachi    ',\n  'Whistle       ',\n  'Ocarina       ',\n  'Lead: Square  ',\n  'Lead: Sawtooth',\n  'Lead: Calliope',\n  'Lead: Chiff   ',\n  'Lead: Charang ',\n  'Lead: Voice   ',\n  'Lead: Fifths  ',\n  'Lead: Bass    ',\n  'Pad: New Age  ',\n  'Pad: Warm     ',\n  'Pad: Polysynth',\n  'Pad: Choir    ',\n  'Pad: Bowed    ',\n  'Pad: Metallic ',\n  'Pad: Halo     ',\n  'Pad: Sweep    ',\n  'FX: Rain      ',\n  'FX: Soundtrack',\n  'FX: Crystal   ',\n  'FX: Atmosphere',\n  'FX: Brightness',\n  'FX: Goblins   ',\n  'FX: Echoes    ',\n  'FX: Sci-fi    ',\n  'Sitar         ',\n  'Banjo         ',\n  'Shamisen      ',\n  'Koto          ',\n  'Kalimba       ',\n  'Bag pipe      ',\n  'Fiddle        ',\n  'Shanai        ',\n  'Tinkle Bell   ',\n  'Agogo         ',\n  'Steel Drums   ',\n  'Woodblock     ',\n  'Taiko Drum    ',\n  'Melodic Tom   ',\n  'Synth Drum    ',\n  'Reverse Cymbal',\n  'Fret Noise    ',\n  'Breath Noise  ',\n  'Seashore      ',\n  'Bird Tweet    ',\n  'Telephone Ring',\n  'Helicopter    ',\n  'Applause      ',\n  'Gunshot       ',\n];\n\nexport const GM_DRUM_KITS = {\n  0:  'Std Drum Kit  ',\n  8:  'Room Drum Kit ',\n  16: 'Power Drum Kit',\n  24: 'Elec Drum Kit ',\n  25: 'TR808 Drum Kit',\n  32: 'Jazz Drum Kit ',\n  40: 'Brush Drum Kit',\n};\n","import autoBind from \"auto-bind\";\nimport chardet from \"chardet\";\nimport iconv from \"iconv-lite\";\nimport { parseNotes } from \"../components/rawl/parseMidi\";\n\nconst MIDIEvents = require(\"midievents\");\nrequire(\"./midi/midi-helpers\");\n\n/**\n * The MIDIFilePlayer is the engine that parses MIDI file data, and fires\n * appropriate methods on a MIDI softsynth (noteOn, noteOff, etc.) or forwards\n * MIDI messages to Web MIDI devices.\n *\n * A lot of complexity was introduced in the MIDIFilePlayer in an effort to\n * play nicely with hardware MIDI devices. Behaviors that are deterministic\n * in a softsynth can be nondeterministic on a hardware device, such as\n * skipping silence at the beginning of a MIDI file, or seeking through the\n * file. Non-note events must be replayed in these cases, and throttled for\n * hardware devices, especially in the case of sysex commands that might make\n * the hardware busy for 0.5 seconds, such as a GM reset command sent to a\n * Roland SC-55. The time allowed for these events is a best-guess - so your\n * mileage may vary.\n */\n\n// Constants\nconst BUFFER_AHEAD = 33;\nconst DELAY_MS_PER_CC_EVENT = 2;\n// const DELAY_MS_PER_SYSEX_EVENT = 15;\nconst DELAY_MS_PER_SYSEX_BYTE = 0.5;\nconst DELAY_MS_PER_XG_SYSTEM_EVENT = 500;\n\nconst CC_SUSTAIN_PEDAL = 64;\nconst CC_ALL_SOUND_OFF = 120;\nconst CC_RESET_ALL_CONTROLLERS = 121;\nconst SYSEX_GM_RESET = [0x7e, 0x7f, 0x09, 0x01, 0xf7];\nconst SEQUENCED_CONTROLLERS = [6, 38, 96, 97, 98, 99, 100, 101];\nconst META_LABELS = {\n  [MIDIEvents.EVENT_META_TEXT]: \"Text\",\n  [MIDIEvents.EVENT_META_COPYRIGHT_NOTICE]: \"Copyright\",\n  [MIDIEvents.EVENT_META_TRACK_NAME]: \"Track\",\n  [MIDIEvents.EVENT_META_INSTRUMENT_NAME]: \"Instrument\",\n  [MIDIEvents.EVENT_META_LYRICS]: \"Lyrics\",\n  [MIDIEvents.EVENT_META_MARKER]: \"Marker\",\n  [MIDIEvents.EVENT_META_CUE_POINT]: \"Cue point\",\n};\n\nfunction printSysex(data) {\n  return (\n    \"[F0 \" +\n    data.map((n) => (\"0\" + n.toString(16)).slice(-2)).join(\" \") +\n    \"]\"\n  ).toUpperCase();\n}\n\n// MIDIPlayer constructor\nfunction MIDIPlayer(options) {\n  autoBind(this);\n  options = options || {};\n  this.output = options.output || null; // Web MIDI output device (has a .send() method)\n  this.synth = options.synth || null; // MIDI synth (has .noteOn(), .noteOff(), render()...)\n  this.programChangeCb = options.programChangeCb;\n  this.speed = 1;\n  this.skipSilence = options.skipSilence || false; // skip silence at beginning of file\n  this.lastProcessPlayTimestamp = 0;\n  this.lastSendTimestamp = 0;\n  this.events = [];\n  this.paused = true;\n  this.useWebMIDI = false;\n  this.sampleRate = options.sampleRate || 44100;\n\n  this.channelsInUse = [];\n  this.channelMask = [];\n  this.channelProgramNums = [];\n  this.textInfo = [];\n  this.setChipStateDump = options.setChipStateDump;\n  this.trackNames = {};\n  this.channelToTrack = {};\n\n  window.addEventListener(\"unload\", this.stop);\n}\n\n// Parsing all tracks and add their events in a single event queue\nMIDIPlayer.prototype.load = function (midiFile, useTrackLoops = false) {\n  this.stop();\n  this.position = 0;\n  this.elapsedTime = 0;\n\n  const tracks = midiFile.tracks.map((_, i) => midiFile.getTrackEvents(i));\n  if (useTrackLoops) {\n    console.debug(\"Processing MIDI track loops...\");\n    this.events = midiFile.getLoopedEvents(tracks, 2);\n  } else {\n    this.events = midiFile.getEvents();\n  }\n  const timeEvents = midiFile.getTimeEvents(tracks);\n  this.summarizeMidiEvents();\n\n  const activeChannels = [];\n  for (let i = 0; i < 16; i++) {\n    if (this.channelsInUse[i]) {\n      activeChannels.push(i);\n    }\n  }\n\n  const result = parseNotes({\n    events: this.events,\n    activeChannels,\n    timebase: midiFile.header.datas.getUint16(12),\n    timeEvents,\n  });\n\n  this.setChipStateDump?.(result);\n\n  return result;\n};\n\nMIDIPlayer.prototype.doSkipSilence = function () {\n  let firstNoteDelay = 0;\n  let messageDelay = 0;\n  let numSysexEvents = 0;\n  const firstNote = this.events.find(\n    (e) => e.subtype === MIDIEvents.EVENT_MIDI_NOTE_ON,\n  );\n  if (firstNote && firstNote.playTime > 0) {\n    // Accelerated playback of all events prior to first note\n    if (this.useWebMIDI) {\n      let message;\n      const eventList = [];\n      while (this.events[this.position] !== firstNote) {\n        const event = this.events[this.position];\n        this.position++;\n\n        // Throttle sysex events\n        // (In some cases this may actually increase the time to first note)\n        if (\n          event.type === MIDIEvents.EVENT_SYSEX ||\n          event.type === MIDIEvents.EVENT_DIVSYSEX\n        ) {\n          console.debug(\n            \"Sysex event at %s ms:\",\n            Math.floor(event.playTime),\n            printSysex(event.data),\n          );\n          if (event.data && event.data[3] === 0 && event.data[4] === 0) {\n            firstNoteDelay += DELAY_MS_PER_XG_SYSTEM_EVENT;\n            messageDelay += DELAY_MS_PER_XG_SYSTEM_EVENT;\n          } else {\n            const delay = DELAY_MS_PER_SYSEX_BYTE * event.length;\n            firstNoteDelay += delay;\n            messageDelay += delay;\n          }\n          numSysexEvents++;\n          message = [event.type, ...event.data];\n        } else if (\n          MIDIEvents.MIDI_1PARAM_EVENTS.indexOf(event.subtype) !== -1\n        ) {\n          firstNoteDelay += DELAY_MS_PER_CC_EVENT;\n          messageDelay += DELAY_MS_PER_CC_EVENT;\n          message = [(event.subtype << 4) + event.channel, event.param1];\n        } else if (\n          MIDIEvents.MIDI_2PARAMS_EVENTS.indexOf(event.subtype) !== -1\n        ) {\n          firstNoteDelay += DELAY_MS_PER_CC_EVENT;\n          messageDelay += DELAY_MS_PER_CC_EVENT;\n          message = [\n            (event.subtype << 4) + event.channel,\n            event.param1,\n            event.param2 || 0x00,\n          ];\n        } else {\n          continue;\n        }\n        eventList.push({\n          message: message,\n          timestamp: this.lastProcessPlayTimestamp + messageDelay,\n        });\n      }\n\n      eventList.forEach(({ message, timestamp }) => {\n        this.send(message, timestamp);\n      });\n      // Set lastProcessPlayTimestamp to a point in the past so that the first note event plays immediately.\n      console.log(\n        \"Time to first note %s ms was updated to %s ms; %s sysex events\",\n        Math.round(firstNote.playTime),\n        firstNoteDelay,\n        numSysexEvents,\n      );\n      this.lastProcessPlayTimestamp += firstNoteDelay - firstNote.playTime;\n    } else {\n      this.setPosition(firstNote.playTime - 1500);\n    }\n  }\n};\n\nMIDIPlayer.prototype.play = function (endCallback, playbackStartedCallback) {\n  if (0 === this.position) {\n    this.endCallback = endCallback;\n    this.reset();\n\n    this.lastProcessPlayTimestamp = performance.now();\n    if (this.skipSilence) {\n      this.doSkipSilence();\n    }\n\n    this.resume();\n    if (playbackStartedCallback) {\n      // Call the callback on the next tick to ensure playback has started\n      setTimeout(playbackStartedCallback, 0);\n    }\n    return 1;\n  }\n  return 0;\n};\n\nMIDIPlayer.prototype.processPlaySynth = function (buffer, bufferSize) {\n  this.lastProcessPlayTimestamp = performance.now();\n  const bufferStart = buffer;\n  let bytesWritten = 0;\n  let batchSize = 64;\n  let event = null;\n  const synth = this.synth;\n  const msPerBatch = (this.speed * 1000 * (batchSize / this.sampleRate)) / 2;\n\n  for (\n    let samplesRemaining = bufferSize * 2;\n    samplesRemaining > 0;\n    samplesRemaining -= batchSize\n  ) {\n    if (batchSize > samplesRemaining) batchSize = samplesRemaining;\n\n    if (!this.paused) {\n      let pos = this.position;\n      for (\n        this.elapsedTime += msPerBatch;\n        this.events[pos] && this.elapsedTime >= this.events[pos].playTime;\n        pos++\n      ) {\n        event = this.events[pos];\n        switch (event.subtype) {\n          case MIDIEvents.EVENT_MIDI_NOTE_ON:\n            if (!this.channelMask[event.channel]) break;\n            if (event.param2 === 0)\n              // velocity\n              synth.noteOff(event.channel, event.param1);\n            else synth.noteOn(event.channel, event.param1, event.param2);\n            break;\n          case MIDIEvents.EVENT_MIDI_NOTE_OFF:\n            synth.noteOff(event.channel, event.param1);\n            break;\n          case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n            this.handleProgramChange(event.channel, event.param1);\n            synth.programChange(event.channel, event.param1);\n            break;\n          case MIDIEvents.EVENT_MIDI_PITCH_BEND:\n            synth.pitchBend(event.channel, (event.param2 << 7) + event.param1);\n            break;\n          case MIDIEvents.EVENT_MIDI_CONTROLLER:\n            synth.controlChange(event.channel, event.param1, event.param2);\n            break;\n          // case MIDIEvents.EVENT_MIDI_CHANNEL_AFTERTOUCH:\n          //   synth.channelAftertouch(event.channel, event.param1);\n          //   break;\n          // case MIDIEvents.EVENT_MIDI_NOTE_AFTERTOUCH:\n          //   synth.noteAftertouch(event.channel, event.param1, event.param2);\n          //   break;\n          default:\n            break;\n        }\n      }\n      this.position = pos;\n    }\n\n    // Render the block of audio samples in float format\n    synth.render(buffer, batchSize);\n    buffer += batchSize * 4; // sizeof(float)\n    bytesWritten += batchSize;\n  }\n\n  if (this.position >= this.events.length) {\n    // Last MIDI event has been processed.\n    // Continue synthesis until silence is detected.\n    // This allows voices with a long release tail to complete.\n    // Fast method: when entire buffer is below threshold, consider it silence.\n    let synthStillActive = 0;\n    const threshold = 0.001;\n    for (let i = 0; i < bufferSize; i += 8) {\n      if (synth.getValue(bufferStart + i, \"float\") > threshold) {\n        // Check left channel only\n        synthStillActive = 1; // Exit early\n        break;\n      }\n    }\n    if (synthStillActive === 0) {\n      this.position = 0;\n      this.paused = true;\n      return 0;\n    }\n  }\n\n  return bytesWritten;\n};\n\nMIDIPlayer.prototype.processPlay = function () {\n  const now = performance.now();\n  const deltaTime = (now - this.lastProcessPlayTimestamp) * this.speed;\n  this.lastProcessPlayTimestamp = now;\n\n  if (this.paused) return;\n\n  let throttleDelayMs = 0;\n  let delay = 0;\n  let message = null;\n\n  this.elapsedTime += deltaTime;\n  let event = this.events[this.position];\n  while (\n    this.events[this.position] &&\n    event.playTime < this.elapsedTime + BUFFER_AHEAD\n  ) {\n    message = null;\n    delay = 0;\n    if (\n      event.type === MIDIEvents.EVENT_SYSEX ||\n      event.type === MIDIEvents.EVENT_DIVSYSEX\n    ) {\n      // Spread out scheduling of sysex messages. Example: Predator (XG).mid\n      message = [event.type, ...event.data];\n      if (event.data && event.data[3] === 0 && event.data[4] === 0) delay = 50;\n      else delay = event.data.length / 2;\n      if (throttleDelayMs > 0)\n        console.debug(\n          \"Sysex event at %s ms delayed %s ms:\",\n          Math.floor(event.playTime),\n          throttleDelayMs,\n          printSysex(event.data),\n        );\n      else\n        console.debug(\n          \"Sysex event at %s ms:\",\n          Math.floor(event.playTime),\n          printSysex(event.data),\n        );\n    } else {\n      switch (event.subtype) {\n        case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n          this.handleProgramChange(event.channel, event.param1);\n          message = [(event.subtype << 4) + event.channel, event.param1];\n          break;\n        case MIDIEvents.EVENT_MIDI_CHANNEL_AFTERTOUCH:\n          message = [(event.subtype << 4) + event.channel, event.param1];\n          break;\n        case MIDIEvents.EVENT_MIDI_NOTE_OFF:\n        case MIDIEvents.EVENT_MIDI_NOTE_ON:\n        case MIDIEvents.EVENT_MIDI_NOTE_AFTERTOUCH:\n        case MIDIEvents.EVENT_MIDI_CONTROLLER:\n        case MIDIEvents.EVENT_MIDI_PITCH_BEND:\n          if (!this.channelMask[event.channel]) break;\n          message = [\n            (event.subtype << 4) + event.channel,\n            event.param1,\n            event.param2 || 0x00,\n          ];\n          break;\n        default:\n      }\n    }\n    if (message) {\n      const scaledPlayTime =\n        (event.playTime - this.elapsedTime) / this.speed +\n        this.lastProcessPlayTimestamp;\n      this.send(message, scaledPlayTime + throttleDelayMs);\n      throttleDelayMs += delay;\n      this.lastSendTimestamp = scaledPlayTime;\n    }\n    this.position++;\n    event = this.events[this.position];\n  }\n\n  if (this.position >= this.events.length) {\n    setTimeout(this.endCallback, BUFFER_AHEAD + 100);\n    this.position = 0;\n    this.paused = true;\n  }\n};\n\nMIDIPlayer.prototype.handleProgramChange = function (channel, program) {\n  this.channelProgramNums[channel] = program;\n  this.programChangeCb?.();\n};\n\nMIDIPlayer.prototype.togglePause = function () {\n  this.paused = !this.paused;\n  if (this.paused === true) {\n    this.panic(this.lastSendTimestamp + 10);\n  }\n  return this.paused;\n};\n\nMIDIPlayer.prototype.resume = function () {\n  this.paused = false;\n};\n\nMIDIPlayer.prototype.stop = function () {\n  this.paused = true;\n  this.panic();\n};\n\nMIDIPlayer.prototype.send = function (message, timestamp) {\n  try {\n    this.output.send(message, timestamp);\n  } catch (e) {\n    console.warn(e);\n    console.warn(message);\n  }\n};\n\n// TODO: fix confusion between reset and panic\nMIDIPlayer.prototype.panic = function (timestamp) {\n  if (this.useWebMIDI) {\n    for (let ch = 0; ch < 16; ch++) {\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_SUSTAIN_PEDAL, 0],\n        timestamp,\n      );\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_ALL_SOUND_OFF, 0],\n        timestamp,\n      );\n      this.send(\n        [\n          (MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch,\n          CC_RESET_ALL_CONTROLLERS,\n          0,\n        ],\n        timestamp,\n      );\n    }\n  } else {\n    // Release sustain pedal on all channels\n    for (let ch = 0; ch < 16; ch++) {\n      this.synth?.controlChange(ch, CC_SUSTAIN_PEDAL, 0);\n    }\n    this.synth?.panic();\n  }\n};\n\nMIDIPlayer.prototype.reset = function (timestamp) {\n  if (this.useWebMIDI) {\n    this.send([MIDIEvents.EVENT_SYSEX, ...SYSEX_GM_RESET]);\n    for (let ch = 0; ch < 16; ch++) {\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_SUSTAIN_PEDAL, 0],\n        timestamp,\n      );\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_ALL_SOUND_OFF, 0],\n        timestamp,\n      );\n      this.send(\n        [\n          (MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch,\n          CC_RESET_ALL_CONTROLLERS,\n          0,\n        ],\n        timestamp,\n      );\n    }\n  } else {\n    this.synth.reset();\n  }\n  this.position = 0;\n  this.paused = true;\n};\n\n// --- Chip Player JS support ---\n\nMIDIPlayer.prototype.getDuration = function () {\n  if (this.events && this.events.length > 0) {\n    return this.events[this.events.length - 1].playTime;\n  }\n  return 0;\n};\n\nMIDIPlayer.prototype.getPosition = function () {\n  return this.elapsedTime;\n};\n\nMIDIPlayer.prototype.setOutput = function (output) {\n  this.panic(this.lastSendTimestamp + 10);\n  this.output = output;\n  // Trigger replay of all program change events\n  this.setPosition(this.getPosition() - 10);\n};\n\nMIDIPlayer.prototype.getSpeed = function () {\n  return this.speed;\n};\n\nMIDIPlayer.prototype.setSpeed = function (speed) {\n  this.speed = Math.max(0.1, Math.min(4, speed));\n};\n\nMIDIPlayer.prototype.setPositionSynth = function (eventList) {\n  const synth = this.synth;\n  eventList.forEach((event) => {\n    switch (event.subtype) {\n      case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n        // handleProgramChange() is called in setPosition()\n        synth.programChange(event.channel, event.param1);\n        break;\n      case MIDIEvents.EVENT_MIDI_CONTROLLER:\n      default:\n        synth.controlChange(event.channel, event.param1, event.param2);\n        break;\n    }\n  });\n};\n\nMIDIPlayer.prototype.setPositionWebMidi = function (ms, eventList) {\n  const wasPaused = this.paused;\n  this.paused = true;\n\n  let message;\n  eventList.forEach((event, i) => {\n    if (event.subtype === MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE) {\n      // handleProgramChange() is called in setPosition()\n      message = [(event.subtype << 4) + event.channel, event.param1];\n    } else if (event.subtype === MIDIEvents.EVENT_MIDI_CONTROLLER) {\n      message = [\n        (event.subtype << 4) + event.channel,\n        event.param1,\n        event.param2,\n      ];\n    }\n    this.send(message, this.lastSendTimestamp + 20 + i * DELAY_MS_PER_CC_EVENT);\n  });\n\n  const numEvents = eventList.length;\n  const messageDelay = numEvents * DELAY_MS_PER_CC_EVENT;\n  console.log(\n    \"Scheduled %s events. Resuming playback in %s ms...\",\n    numEvents,\n    messageDelay,\n  );\n  if (!wasPaused) {\n    setTimeout(this.resume, messageDelay);\n  }\n};\n\nMIDIPlayer.prototype.setPosition = function (ms) {\n  if (ms < 0 || ms > this.getDuration()) return;\n\n  this.lastProcessPlayTimestamp = performance.now();\n  this.panic(this.lastSendTimestamp + 10);\n  let eventMap = {};\n  let eventList = [];\n  let pos = this.position;\n\n  if (ms < this.elapsedTime) {\n    pos = 0;\n  }\n\n  for (const channel in this.channelsInUse) {\n    this.synth.pitchBend(channel, 8192);\n  }\n\n  // TODO: if we seek inside some notes, it's best to retrigger their noteOn, eg. for string pads.\n\n  while (this.events[pos] && this.events[pos].playTime < ms) {\n    const event = this.events[pos];\n    if (event.subtype === MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE) {\n      this.handleProgramChange(event.channel, event.param1);\n      eventMap[`${event.subtype}-${event.channel}`] = event;\n    } else if (event.subtype === MIDIEvents.EVENT_MIDI_CONTROLLER) {\n      // These controllers (RPN, NRPN, Data Entry) must be sequenced in order\n      if (SEQUENCED_CONTROLLERS.includes(event.param1)) {\n        // console.log('Sequenced event: ch %d -- %d - %d -- %d ms', event.channel, event.param1, event.param2, event.playTime);\n        eventList.push(event);\n      } else {\n        // All others, we only care about the last event\n        eventMap[`${event.subtype}-${event.channel}-${event.param1}`] = event;\n      }\n    }\n    pos++;\n  }\n\n  eventList = Object.values(eventMap).concat(eventList);\n\n  if (this.useWebMIDI) {\n    this.setPositionWebMidi(ms, eventList);\n  } else {\n    this.setPositionSynth(eventList);\n  }\n\n  this.elapsedTime = ms;\n  this.position = pos;\n};\n\nMIDIPlayer.prototype.getChannelInUse = function (ch) {\n  return !!this.channelsInUse[ch];\n};\n\nMIDIPlayer.prototype.getChannelProgramNum = function (ch) {\n  return this.channelProgramNums[ch];\n};\n\nMIDIPlayer.prototype.summarizeMidiEvents = function () {\n  this.textInfo = [];\n  const channelsInUse = this.channelsInUse;\n  const channelProgramNums = this.channelProgramNums;\n  const channelMask = this.channelMask;\n  for (let i = 0; i < 16; i++) {\n    channelsInUse[i] = 0;\n    channelProgramNums[i] = 0;\n    channelMask[i] = true;\n  }\n\n  for (let j = 0; j < this.events.length; j++) {\n    const event = this.events[j];\n    const { channel, track } = event;\n    if (typeof channel !== \"undefined\" && typeof track !== \"undefined\") {\n      this.channelToTrack[channel] = track;\n    }\n    switch (event.subtype) {\n      case MIDIEvents.EVENT_MIDI_NOTE_ON:\n        channelsInUse[channel] = 1;\n        break;\n      case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n        if (!channelProgramNums[channel])\n          this.handleProgramChange(channel, event.param1);\n        break;\n      case MIDIEvents.EVENT_META_TEXT:\n      case MIDIEvents.EVENT_META_COPYRIGHT_NOTICE:\n      case MIDIEvents.EVENT_META_TRACK_NAME:\n      // case MIDIEvents.EVENT_META_INSTRUMENT_NAME:\n      case MIDIEvents.EVENT_META_LYRICS:\n      case MIDIEvents.EVENT_META_MARKER:\n      case MIDIEvents.EVENT_META_CUE_POINT:\n        const text = event.data\n          .map((c) => String.fromCharCode(c))\n          .join(\"\")\n          .trim();\n        if (text && !text.match(/nstd/i))\n          this.textInfo.push(`${META_LABELS[event.subtype]}: ${text}`);\n        if (event.subtype === MIDIEvents.EVENT_META_TRACK_NAME) {\n          this.trackNames[track] = iconv.decode(\n            event.data,\n            chardet.detect(event.data),\n          );\n        }\n        break;\n      default:\n        break;\n    }\n  }\n};\n\nMIDIPlayer.prototype.setChannelMute = function (ch, isMuted) {\n  this.channelMask[ch] = !isMuted;\n  if (isMuted) {\n    // TODO separate synth from webMidi\n    const timestamp = this.lastSendTimestamp + 10;\n    this.send(\n      [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_SUSTAIN_PEDAL, 0],\n      timestamp,\n    );\n    this.send(\n      [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_ALL_SOUND_OFF, 0],\n      timestamp,\n    );\n    this.synth.panicChannel(ch);\n  }\n};\n\nMIDIPlayer.prototype.setUseWebMIDI = function (useWebMIDI) {\n  this.useWebMIDI = useWebMIDI;\n  // Trigger replay of all program change events\n  this.setPosition(this.getPosition() - 10);\n};\n\nexport default MIDIPlayer;\n","import EventEmitter from \"events\";\n//\n// Player can be viewed as a state machine with\n// 3 states (playing, paused, stopped) and 5 transitions\n// (open, pause, unpause, seek, stop).\n// If the player has reached end of the song,\n// it is in the terminal \"stopped\" state and is\n// no longer playable:\n//                          (seek) \n//                         ^          v\n//                           \n//   stopped (open)>     playing     (stop)> stopped \n//                            \n//                        |  ^\n//                (pause) > paused  (unpause)\n//                          \n//\n// In the \"open\" transition, the audioNode is connected.\n// In the \"stop\" transition, it is disconnected.\n// \"stopped\" is synonymous with closed/empty.\n//\nexport default class Player extends EventEmitter {\n  /**\n   * @param {object} core - Emscripten module\n   * @param {number} sampleRate - Audio sample rate\n   * @param {number} [bufferSize=2048] - Audio buffer size\n   * @param {boolean} [debug=false] - Enable debug logging\n   */\n  constructor(\n    core,\n    sampleRate,\n    bufferSize = 2048,\n    debug = false,\n    setChipStateDump,\n    appTogglePause,\n  ) {\n    super();\n\n    this.core = core;\n    this.paused = true;\n    this.stopped = true;\n    this.fileExtensions = [];\n    this.metadata = null;\n    this.sampleRate = sampleRate;\n    this.bufferSize = bufferSize;\n    this.debug = debug;\n    this.timeCount = 0;\n    this.renderTime = 0;\n    this.perfLoggingInterval = 100;\n    this.paramDefs = [];\n    this.params = {};\n    this.setChipStateDump = setChipStateDump;\n    this.appTogglePause = appTogglePause;\n  }\n\n  togglePause() {\n    this.paused = !this.paused;\n    return this.paused;\n  }\n\n  isPaused() {\n    return this.paused;\n  }\n\n  resume() {\n    this.stopped = false;\n    this.paused = false;\n  }\n\n  canPlay(fileExtension) {\n    return this.fileExtensions.indexOf(fileExtension.toLowerCase()) !== -1;\n  }\n\n  /**\n   * @param {ArrayBuffer} data - File contents\n   * @param {string} filename - Filename for metadata fallback\n   */\n  loadData(data, filename) {\n    throw Error(\"Player.loadData() must be implemented.\");\n  }\n\n  stop() {\n    throw Error(\"Player.stop() must be implemented.\");\n  }\n\n  isPlaying() {\n    throw Error(\"Player.isPlaying() must be implemented.\");\n  }\n\n  getTempo() {\n    // TODO: rename all tempo to speed\n    console.warn(\"Player.getTempo() not implemented for this player.\");\n    return 1;\n  }\n\n  setTempo() {\n    console.warn(\"Player.setTempo() not implemented for this player.\");\n  }\n\n  setFadeout(startMs) {\n    console.warn(\"Player.setFadeout() not implemented for this player.\");\n  }\n\n  getDurationMs() {\n    console.warn(\"Player.getDurationMs() not implemented for this player.\");\n    return 5000;\n  }\n\n  getPositionMs() {\n    console.warn(\"Player.getPositionMs() not implemented for this player.\");\n    return 0;\n  }\n\n  seekMs(ms) {\n    console.warn(\"Player.seekMs() not implemented for this player.\");\n  }\n\n  getVoiceName(index) {\n    console.warn(\"Player.getVoiceName() not implemented for this player.\");\n  }\n\n  getVoiceMask() {\n    console.warn(\"Player.getVoiceMask() not implemented for this player.\");\n    return [];\n  }\n\n  setVoiceMask() {\n    console.warn(\"Player.setVoiceMask() not implemented for this player.\");\n  }\n\n  getNumVoices() {\n    return 0;\n  }\n\n  getMetadata() {\n    return {\n      title: null,\n      author: null,\n    };\n  }\n\n  getParamDefs() {\n    return this.paramDefs;\n  }\n\n  getBasePlayerState() {\n    return {\n      metadata: this.getMetadata(),\n      durationMs: this.getDurationMs(),\n      positionMs: this.getPositionMs(),\n      numVoices: this.getNumVoices(),\n      paramDefs: this.getParamDefs(),\n      tempo: this.getTempo(),\n      voiceMask: this.getVoiceMask(),\n      voiceNames: [...Array(this.getNumVoices())].map((_, i) =>\n        this.getVoiceName(i),\n      ),\n      isStopped: this.stopped,\n      isPaused: this.paused,\n    };\n  }\n\n  suspend() {\n    // // this.stopped = true;\n    this.paused = true;\n    this.appTogglePause();\n    this.seekMs(0);\n  }\n\n  processAudio(output) {\n    const start = performance.now();\n    this.processAudioInner(output);\n    const end = performance.now();\n\n    if (this.debug) {\n      this.renderTime += end - start;\n      this.timeCount++;\n      if (this.timeCount >= this.perfLoggingInterval) {\n        const cost = this.renderTime / this.timeCount;\n        const budget = (1000 * this.bufferSize) / this.sampleRate;\n        console.log(\n          \"[%s] %s ms to render %d frames (%s ms) (%s% utilization)\",\n          this.constructor.name,\n          cost.toFixed(2),\n          this.bufferSize,\n          budget.toFixed(1),\n          ((100 * cost) / budget).toFixed(1),\n        );\n        this.renderTime = 0.0;\n        this.timeCount = 0;\n      }\n    }\n  }\n\n  processAudioInner() {\n    throw Error(\"Player.processAudioInner() must be implemented.\");\n  }\n\n  muteAudioDuringCall(audioNode, fn) {\n    if (\n      audioNode &&\n      audioNode.context.state === \"running\" &&\n      this.paused === false\n    ) {\n      const audioprocess = audioNode.onaudioprocess;\n      // Workaround to eliminate stuttering:\n      // Temporarily swap the audio process callback, and do the\n      // expensive operation only after buffer is filled with silence\n      audioNode.onaudioprocess = function (e) {\n        for (let i = 0; i < e.outputBuffer.numberOfChannels; i++) {\n          e.outputBuffer.getChannelData(i).fill(0);\n        }\n        fn();\n        audioNode.onaudioprocess = audioprocess;\n      };\n    } else {\n      fn();\n    }\n  }\n\n  handleFileSystemReady() {}\n\n  static metadataFromFilepath(filepath) {\n    // Guess metadata from path/filename for MIDI files.\n    // Assumes structure:  /Game MIDI/{game}/**/{title}\n    //             ...or:  /MIDI/{artist}/**/{title}\n    const parts = filepath.split(\"/\");\n    const meta = {};\n    meta.title = parts.pop();\n    meta.system = parts.shift();\n    if (meta.system === \"Game MIDI\") {\n      meta.game = parts.shift();\n    } else {\n      meta.artist = parts.shift();\n    }\n    return meta;\n  }\n}\n","import debounce from \"lodash/debounce\";\nimport MIDIFile from \"midifile\";\n\nimport autoBind from \"auto-bind\";\nimport range from \"lodash/range\";\nimport { DUMMY_CALLBACK } from \"../components/App\";\nimport {\n  SOUNDFONTS,\n  SOUNDFONT_MOUNTPOINT,\n  SOUNDFONT_URL_PATH,\n} from \"../config\";\nimport { GM_DRUM_KITS, GM_INSTRUMENTS } from \"../gm-patch-map\";\nimport { ensureEmscFileWithUrl, remap01 } from \"../util\";\nimport MIDIFilePlayer from \"./MIDIFilePlayer\";\nimport Player from \"./Player\";\n\nlet core = null;\n\nconst dummyMidiOutput = {\n  send: DUMMY_CALLBACK,\n};\n\nconst midiDevices = [dummyMidiOutput];\n\nconst fileExtensions = [\"mid\", \"midi\", \"smf\"];\n\nconst MIDI_ENGINE_LIBFLUIDLITE = 0;\nconst MIDI_ENGINE_LIBADLMIDI = 1;\nconst MIDI_ENGINE_WEBMIDI = 2;\n\nexport default class MIDIPlayer extends Player {\n  paramDefs = [\n    {\n      id: \"synthengine\",\n      label: \"Synth Engine\",\n      type: \"enum\",\n      options: [\n        {\n          label: \"MIDI Synthesis Engine\",\n          items: [\n            {\n              label: \"SoundFont (libFluidLite)\",\n              value: MIDI_ENGINE_LIBFLUIDLITE,\n            },\n            {\n              label: \"Adlib/OPL3 FM (libADLMIDI)\",\n              value: MIDI_ENGINE_LIBADLMIDI,\n            },\n            { label: \"MIDI Device (Web MIDI)\", value: MIDI_ENGINE_WEBMIDI },\n          ],\n        },\n      ],\n      defaultValue: 0,\n    },\n    {\n      id: \"soundfont\",\n      label: \"Soundfont\",\n      type: \"enum\",\n      options: SOUNDFONTS,\n      defaultValue: SOUNDFONTS[2].items[0].value,\n      // defaultValue: SOUNDFONTS[1].items[0].value,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"reverb\",\n      label: \"Reverb\",\n      type: \"number\",\n      min: 0.0,\n      max: 1.0,\n      step: 0.01,\n      defaultValue: 0.0,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"chorus\",\n      label: \"Chorus\",\n      type: \"number\",\n      min: 0.0,\n      max: 1.0,\n      step: 0.01,\n      defaultValue: 0.0,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"fluidpoly\",\n      label: \"Polyphony\",\n      type: \"number\",\n      min: 4,\n      max: 256,\n      step: 4,\n      defaultValue: 128,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"opl3bank\",\n      label: \"OPL3 Bank\",\n      type: \"enum\",\n      options: [],\n      defaultValue: 58, // Windows 95 bank\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBADLMIDI,\n      },\n    },\n    {\n      id: \"mididevice\",\n      label: \"MIDI Device\",\n      type: \"enum\",\n      options: [\n        {\n          label: \"MIDI Output Devices\",\n          items: [{ label: \"Dummy device\", value: 0 }],\n        },\n      ],\n      defaultValue: 0,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_WEBMIDI,\n      },\n    },\n    {\n      id: \"autoengine\",\n      label: \"Auto Synth Engine Switching\",\n      hint: 'Switch synth engine based on filenames. Files containing \"FM\" will play through Adlib/OPL3 synth.',\n      type: \"toggle\",\n      defaultValue: true,\n    },\n    {\n      id: \"gmreset\",\n      label: \"GM Reset\",\n      hint: \"Send a GM Reset sysex and reset all controllers on all channels.\",\n      type: \"button\",\n    },\n  ];\n\n  constructor(...args) {\n    super(...args);\n    autoBind(this);\n\n    core = this.core;\n    core._tp_init(this.sampleRate);\n\n    // Initialize Soundfont filesystem\n    core.FS.mkdir(SOUNDFONT_MOUNTPOINT);\n    core.FS.mount(core.FS.filesystems.IDBFS, {}, SOUNDFONT_MOUNTPOINT);\n\n    this.name = \"MIDI Player\";\n    this.fileExtensions = fileExtensions;\n    this.activeChannels = [];\n    this.buffer = core._malloc(this.bufferSize * 4 * 2); // f32 * 2 channels\n    this.filepathMeta = {};\n    this.midiFilePlayer = new MIDIFilePlayer({\n      // playerStateUpdate is debounced to prevent flooding program change events\n      programChangeCb: debounce(\n        () =>\n          this.emit(\"playerStateUpdate\", {\n            voiceNames: range(this.getNumVoices()).map(this.getVoiceName),\n          }),\n        200,\n      ),\n      output: dummyMidiOutput,\n      skipSilence: true,\n      sampleRate: this.sampleRate,\n      synth: {\n        // TODO: Consider removing the tiny player (tp), since a lot of MIDI is now implemented in JS.\n        //       All it's really doing is hiding the FluidSynth and libADLMIDI insances behind a singleton.\n        //       C object (\"context\") pointers could also be hidden at the JS layer, if those are annoying.\n        //       The original benefit was to tie in tml.h (MIDI file reader) which is not used any more.\n        //       Besides, MIDIPlayer.js already calls directly into libADLMIDI functions.\n        //       see also ../../scripts/build-chip-core.js:29\n        noteOn: core._tp_note_on,\n        noteOff: core._tp_note_off,\n        pitchBend: core._tp_pitch_bend,\n        controlChange: core._tp_control_change,\n        programChange: core._tp_program_change,\n        panic: core._tp_panic,\n        panicChannel: core._tp_panic_channel,\n        render: core._tp_render,\n        reset: core._tp_reset,\n        getValue: core.getValue,\n      },\n      setChipStateDump: this.setChipStateDump,\n    });\n\n    // Populate OPL3 banks\n    const numBanks = core._adl_getBanksCount();\n    const ptr = core._adl_getBankNames();\n    const oplBanks = [];\n    for (let i = 0; i < numBanks; i++) {\n      oplBanks.push({\n        label: core.UTF8ToString(core.getValue(ptr + i * 4, \"*\")),\n        value: i,\n      });\n    }\n    this.paramDefs.find((def) => def.id === \"opl3bank\").options = [\n      { label: \"OPL3 Bank\", items: oplBanks },\n    ];\n\n    this.webMidiIsInitialized = false;\n    // this.midiFilePlayer = new MIDIFilePlayer({ output: dummyMidiOutput });\n\n    // Initialize parameters\n    this.params = {};\n    // Transient parameters hold a parameter that is valid only for the current song.\n    // They are reset when another song is loaded.\n    this.transientParams = {};\n    this.paramDefs\n      .filter((p) => p.id !== \"soundfont\")\n      .forEach((p) => this.setParameter(p.id, p.defaultValue));\n  }\n\n  handleFileSystemReady() {\n    const soundfontParam = this.paramDefs.find(\n      (paramDef) => paramDef.id === \"soundfont\",\n    );\n    this.setParameter(soundfontParam.id, soundfontParam.defaultValue);\n    this.updateSoundfontParamDefs();\n  }\n\n  processAudioInner(channels) {\n    const useWebMIDI = this.params[\"synthengine\"] === MIDI_ENGINE_WEBMIDI;\n\n    // No early return or zero-fill during pause.\n    // Notes are allowed to ring out, and the MIDI synth behaves more like external hardware.\n\n    if (useWebMIDI) {\n      this.midiFilePlayer.processPlay();\n    } else {\n      if (this.midiFilePlayer.processPlaySynth(this.buffer, this.bufferSize)) {\n        for (let ch = 0; ch < channels.length; ch++) {\n          for (let i = 0; i < this.bufferSize; i++) {\n            channels[ch][i] = core.getValue(\n              this.buffer + // Interleaved channel format\n                i * 4 * 2 + // frame offset   * bytes per sample * num channels +\n                ch * 4, // channel offset * bytes per sample\n              \"float\",\n            );\n          }\n        }\n      } else {\n        this.stop();\n      }\n    }\n  }\n\n  metadataFromFilepath(filepath) {\n    filepath = decodeURIComponent(filepath); // unescape, %25 -> %\n    const parts = filepath.split(\"/\");\n    const len = parts.length;\n    const meta = {};\n    // HACK: MIDI metadata is guessed from filepath\n    // based on the directory structure of Chip Player catalog.\n    // Ideally, this data should be embedded in the MIDI files.\n    if (parts.length >= 3) {\n      meta.formatted = {\n        title: `${parts[1]} - ${parts[len - 1]}`,\n        subtitle: parts[0],\n      };\n    } else if (parts.length === 2) {\n      meta.formatted = {\n        title: parts[1],\n        subtitle: parts[0],\n      };\n    } else {\n      meta.formatted = {\n        title: parts[0],\n        subtitle: \"MIDI\",\n      };\n    }\n    return meta;\n  }\n\n  ensureWebMidiInitialized() {\n    if (this.webMidiIsInitialized === true) return;\n    this.webMidiIsInitialized = true;\n\n    // Initialize MIDI output devices\n    console.debug(\"Requesting MIDI output devices.\");\n    // if (typeof navigator.requestMIDIAccess === \"function\") {\n    //   navigator.requestMIDIAccess({ sysex: true }).then((access) => {\n    //     if (access.outputs.length === 0) {\n    //       console.warn(\"No MIDI output devices found.\");\n    //     } else {\n    //       [...access.outputs.values()].forEach((midiOutput) => {\n    //         console.debug(\"MIDI Output:\", midiOutput);\n    //         midiDevices.push(midiOutput);\n    //         this.paramDefs\n    //           .find((def) => def.id === \"mididevice\")\n    //           .options[0].items.push({\n    //             label: midiOutput.name,\n    //             value: midiDevices.length - 1,\n    //           });\n    //       });\n\n    //       // TODO: remove if removing Dummy Device\n    //       this.setParameter(\"mididevice\", 1);\n    //     }\n    //   });\n    // } else {\n    //   console.warn(\n    //     \"Web MIDI API not supported. Try Chrome if you want to use external MIDI output devices.\",\n    //   );\n    // }\n  }\n\n  async loadData(data, filepath, shouldAutoPlay = true) {\n    this.ensureWebMidiInitialized();\n    this.filepathMeta = this.metadataFromFilepath(filepath);\n\n    const newTransientParams = {};\n\n    // Transient params: synthengine, opl3bank, soundfont.\n    if (this.getParameter(\"autoengine\")) {\n      newTransientParams[\"synthengine\"] =\n        this.getSynthengineBasedOnFilename(filepath);\n      newTransientParams[\"opl3bank\"] =\n        this.getOpl3bankBasedOnFilename(filepath);\n    }\n\n    // Load custom Soundfont if present in the metadata response.\n    if (\n      this.getParameter(\"synthengine\") === MIDI_ENGINE_LIBFLUIDLITE &&\n      !filepath.startsWith(\"f:\")\n    ) {\n      core._tp_set_ch10_melodic(false);\n    }\n\n    // Apply transient params. Avoid thrashing of params that haven't changed.\n    Object.keys(this.params).forEach((key) => {\n      if (newTransientParams[key] !== this.transientParams[key]) {\n        this.setTransientParameter(key, newTransientParams[key]);\n      }\n    });\n\n    const midiFile = new MIDIFile(data);\n    const useTrackLoops = filepath.includes(\"SoundFont MIDI\");\n    const result = this.midiFilePlayer.load(midiFile, useTrackLoops);\n\n    // Only start playback if shouldAutoPlay is true\n    if (shouldAutoPlay) {\n      this.midiFilePlayer.play(\n        () => this.emit(\"playerStateUpdate\", { isStopped: true }),\n        () => {\n          this.emit(\"playerStateUpdate\", { isPlaying: true });\n          if (this.playbackStartedCallback) {\n            this.playbackStartedCallback();\n            this.playbackStartedCallback = null;\n          }\n        },\n      );\n    } else {\n      // Just load but don't start playing\n      this.midiFilePlayer.paused = true;\n      this.emit(\"playerStateUpdate\", { isPlaying: false });\n    }\n\n    this.activeChannels = [];\n    for (let i = 0; i < 16; i++) {\n      if (this.midiFilePlayer.getChannelInUse(i)) this.activeChannels.push(i);\n    }\n\n    this.resume();\n    this.emit(\"playerStateUpdate\", {\n      ...this.getBasePlayerState(),\n      isStopped: false,\n    });\n    return result;\n  }\n\n  getSynthengineBasedOnFilename(filepath) {\n    // Switch to OPL3 engine if filepath contains 'FM'\n    const fp = filepath.toLowerCase().replace(\"_\", \" \");\n    if (fp.match(/(\\bfm|fm\\b)/i)) {\n      return MIDI_ENGINE_LIBADLMIDI;\n    }\n    return null;\n  }\n\n  getOpl3bankBasedOnFilename(filepath) {\n    // Crude bank matching for a few specific games. :D\n    const fp = filepath.toLowerCase().replace(\"_\", \" \");\n    const opl3def = this.paramDefs.find((def) => def.id === \"opl3bank\");\n    if (opl3def) {\n      const opl3banks = opl3def.options[0].items;\n      const findBank = (str) =>\n        opl3banks.findIndex((bank) => bank.label.indexOf(str) > -1);\n      let bankId = opl3def.defaultValue;\n      if (fp.indexOf(\"[rick]\") > -1) {\n        bankId = findBank(\"Descent:: Rick\");\n      } else if (fp.indexOf(\"[ham]\") > -1) {\n        bankId = findBank(\"Descent:: Ham\");\n      } else if (fp.indexOf(\"[int]\") > -1) {\n        bankId = findBank(\"Descent:: Int\");\n      } else if (fp.indexOf(\"descent 2\") > -1) {\n        bankId = findBank(\"Descent 2\");\n      } else if (fp.indexOf(\"magic carpet\") > -1) {\n        bankId = findBank(\"Magic Carpet\");\n      } else if (fp.indexOf(\"duke nukem\") > -1) {\n        bankId = findBank(\"Duke Nukem\");\n      } else if (fp.indexOf(\"wacky wheels\") > -1) {\n        bankId = findBank(\"Apogee IMF\");\n      } else if (fp.indexOf(\"warcraft 2\") > -1) {\n        bankId = findBank(\"Warcraft 2\");\n      } else if (fp.indexOf(\"warcraft\") > -1) {\n        bankId = findBank(\"Warcraft\");\n      } else if (fp.indexOf(\"system shock\") > -1) {\n        bankId = findBank(\"System Shock\");\n      } else if (fp.indexOf(\"/hexen\") > -1 || fp.indexOf(\"/heretic\") > -1) {\n        bankId = findBank(\"Hexen\");\n      } else if (fp.indexOf(\"/raptor\") > -1) {\n        bankId = findBank(\"Raptor\");\n      } else if (fp.indexOf(\"/doom 2\") > -1) {\n        bankId = findBank(\"Doom 2\");\n      } else if (fp.indexOf(\"/doom\") > -1) {\n        bankId = findBank(\"DOOM\");\n      }\n      if (bankId > -1) {\n        return bankId;\n      }\n    }\n    return null;\n  }\n\n  isPlaying() {\n    return !this.midiFilePlayer.paused;\n  }\n\n  suspend() {\n    super.suspend();\n    this.midiFilePlayer.stop();\n  }\n\n  stop() {\n    this.suspend();\n    console.debug(\"MIDIPlayer.stop()\");\n    this.emit(\"playerStateUpdate\", { isStopped: true });\n  }\n\n  togglePause() {\n    return this.midiFilePlayer.togglePause();\n  }\n\n  getDurationMs() {\n    return this.midiFilePlayer.getDuration();\n  }\n\n  getPositionMs() {\n    return this.midiFilePlayer.getPosition();\n  }\n\n  seekMs(ms) {\n    return this.midiFilePlayer.setPosition(ms);\n  }\n\n  getTempo() {\n    return this.midiFilePlayer.getSpeed();\n  }\n\n  setTempo(tempo) {\n    this.midiFilePlayer.setSpeed(tempo);\n  }\n\n  getNumVoices() {\n    return this.activeChannels.length;\n  }\n\n  getVoiceName(index) {\n    const ch = this.activeChannels[index];\n    const pgm = this.midiFilePlayer.channelProgramNums[ch];\n    const instrumentName =\n      ch === 9 ? GM_DRUM_KITS[pgm] || GM_DRUM_KITS[0] : GM_INSTRUMENTS[pgm];\n    const areFirstTrackNamesDistinct =\n      new Set(\n        Object.values(this.midiFilePlayer.channelToTrack)\n          .map((track) => this.midiFilePlayer.trackNames[track])\n          .slice(0, 2),\n      ).size === 2;\n    const trackName = areFirstTrackNamesDistinct\n      ? this.midiFilePlayer.trackNames[this.midiFilePlayer.channelToTrack[ch]]\n      : null;\n    return trackName ?? instrumentName;\n  }\n\n  getVoiceMask() {\n    return this.activeChannels.map((ch) => this.midiFilePlayer.channelMask[ch]);\n  }\n\n  setVoiceMask(voiceMask) {\n    voiceMask.forEach((isEnabled, i) => {\n      const ch = this.activeChannels[i];\n      this.midiFilePlayer.setChannelMute(ch, !isEnabled);\n    });\n  }\n\n  getMetadata() {\n    return {\n      ...this.filepathMeta,\n    };\n  }\n\n  getParameter(id) {\n    if (id === \"fluidpoly\") return core._tp_get_polyphony();\n    if (this.transientParams[id] != null) return this.transientParams[id];\n    return this.params[id];\n  }\n\n  updateSoundfontParamDefs() {\n    this.paramDefs = this.paramDefs.map((paramDef) => {\n      if (paramDef.id === \"soundfont\") {\n        const userSoundfonts = paramDef.options[0];\n        const userSoundfontPath = `${SOUNDFONT_MOUNTPOINT}/user/`;\n        if (core.FS.analyzePath(userSoundfontPath).exists) {\n          userSoundfonts.items = core.FS.readdir(userSoundfontPath)\n            .filter((f) => f.match(/\\.sf2$/i))\n            .map((f) => ({\n              label: f,\n              value: `user/${f}`,\n            }));\n        }\n      }\n      return paramDef;\n    });\n  }\n\n  setTransientParameter(id, value) {\n    if (value == null) {\n      // Unset the transient parameter.\n      this.setParameter(id, this.params[id]);\n    } else {\n      this.setParameter(id, value, true);\n    }\n  }\n\n  setFluidChorus(value) {\n    const fluidSynth = core._tp_get_fluid_synth();\n    if (value === 0) {\n      core._fluid_synth_set_chorus_on(fluidSynth, false);\n    } else {\n      core._fluid_synth_set_chorus_on(fluidSynth, true);\n      // FLUID_CHORUS_DEFAULT_N 3 (0 to 99)\n      const nr = 3;\n      // FLUID_CHORUS_DEFAULT_LEVEL 2.0f (0 to 10)\n      const level = Math.round(remap01(value, 0, 4));\n      // FLUID_CHORUS_DEFAULT_SPEED 0.3f (0.29 to 5)\n      const speed = 0.3;\n      // FLUID_CHORUS_DEFAULT_DEPTH 8.0f (0 to ~100)\n      const depthMs = Math.round(remap01(value, 2, 14));\n      // FLUID_CHORUS_DEFAULT_TYPE FLUID_CHORUS_MOD_SINE\n      //   FLUID_CHORUS_MOD_SINE = 0,\n      //   FLUID_CHORUS_MOD_TRIANGLE = 1\n      const type = 0;\n      // (fluid_synth_t* synth, int nr, double level, double speed, double depth_ms, int type)\n      core._fluid_synth_set_chorus(fluidSynth, nr, level, speed, depthMs, type);\n    }\n  }\n\n  setParameter(id, value, isTransient = false) {\n    switch (id) {\n      case \"synthengine\":\n        value = parseInt(value, 10);\n        this.midiFilePlayer.panic();\n        if (value === MIDI_ENGINE_WEBMIDI) {\n          this.midiFilePlayer.setUseWebMIDI(true);\n        } else {\n          this.midiFilePlayer.setUseWebMIDI(false);\n          core._tp_set_synth_engine(value);\n        }\n        break;\n      case \"soundfont\":\n        const url = `${SOUNDFONT_URL_PATH}/${value}`;\n        ensureEmscFileWithUrl(\n          core,\n          `${SOUNDFONT_MOUNTPOINT}/${value}`,\n          url,\n        ).then((filename) => this._loadSoundfont(filename));\n        break;\n      case \"reverb\":\n        // TODO: call fluidsynth directly from JS, similar to chorus\n        value = parseFloat(value);\n        core._tp_set_reverb(value);\n        break;\n      case \"chorus\":\n        value = parseFloat(value);\n        this.setFluidChorus(value);\n        break;\n      case \"fluidpoly\":\n        // TODO: call fluidsynth directly from JS, similar to chorus\n        value = parseInt(value, 10);\n        core._tp_set_polyphony(value);\n        break;\n      case \"opl3bank\":\n        value = parseInt(value, 10);\n        core._tp_set_bank(value);\n        break;\n      case \"autoengine\":\n        value = !!value;\n        break;\n      case \"mididevice\":\n        this.midiFilePlayer.setOutput(midiDevices[value]);\n        break;\n      case \"gmreset\":\n        this.midiFilePlayer.reset();\n        break;\n      default:\n        console.warn('MIDIPlayer has no parameter with id \"%s\".', id);\n    }\n    // This should be the only place we modify transientParams.\n    if (isTransient) {\n      this.transientParams[id] = value;\n    } else {\n      delete this.transientParams[id];\n      this.params[id] = value;\n    }\n  }\n\n  _loadSoundfont(filename) {\n    console.log(\"Loading soundfont %s...\", filename);\n    this.muteAudioDuringCall(this.audioNode, () => {\n      const err = core.ccall(\n        \"tp_load_soundfont\",\n        \"number\",\n        [\"string\"],\n        [filename],\n      );\n      if (err !== -1) console.log(\"Loaded soundfont.\");\n    });\n  }\n\n  eject() {\n    this.stop();\n    this.midiFilePlayer.reset();\n    this.emit(\"playerStateUpdate\", { isStopped: true });\n  }\n\n  setPlaybackStartedCallback(callback) {\n    this.playbackStartedCallback = callback;\n  }\n\n  pause() {\n    this.midiFilePlayer.paused = true;\n    this.emit(\"playerStateUpdate\", { isPlaying: false });\n  }\n}\n","import { faArrowUpRightFromSquare } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { doc, getFirestore, updateDoc } from \"firebase/firestore\";\nimport * as React from \"react\";\nimport {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { playRawMidiNote } from \"../../sampler/sampler\";\nimport { VoiceMask } from \"../App\";\nimport { AppContext } from \"../AppContext\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport { MeasureSelection } from \"./AnalysisGrid\";\nimport CompositionTitle from \"./CompositionTitle\";\nimport FrozenNotesLayout from \"./FrozenNotesLayout\";\nimport { MergedSystemLayout, SystemLayoutProps } from \"./SystemLayout\";\nimport {\n  ANALYSIS_STUB,\n  Analysis,\n  PitchClass,\n  advanceAnalysis,\n  getNewAnalysis,\n  getPhraseStarts,\n} from \"./analysis\";\nimport { findFirstPhraseStart, findTonic } from \"./autoAnalysis\";\nimport { MouseHandlers } from \"./getNoteRectangles\";\nimport LayoutSelector, { SystemLayout } from \"./layouts/LayoutSelector\";\nimport { buildManualMeasuresAndBeats } from \"./measures\";\nimport { ColoredNotesInVoices, Note, ParsingResult } from \"./parseMidi\";\n\nexport type SecondsSpan = [number, number];\n\nconst SECOND_WIDTH = 40;\n\nexport type SecondsConverter = (number) => number;\nexport const secondsToX__: SecondsConverter = (seconds) =>\n  seconds * SECOND_WIDTH;\nexport const xToSeconds__: SecondsConverter = (x) => x / SECOND_WIDTH;\n\nexport type SetVoiceMask = (mask: boolean[]) => void;\n\nexport type AppStateForRawl = {\n  voiceNames: string[];\n  voiceMask: VoiceMask;\n  setVoiceMask: SetVoiceMask;\n  latencyCorrectionMs: number;\n};\n\nexport const getTonic = (measure: number, analysis: Analysis): PitchClass => {\n  const modulations = getModulations(analysis);\n  let i = 0;\n  while (i + 1 < modulations.length && modulations[i + 1].measure <= measure) {\n    i++;\n  }\n  return modulations[i].tonic as PitchClass;\n};\n\nexport const getModulations = (analysis: Analysis) =>\n  Object.entries(analysis.modulations || [])\n    .map((entry) => ({\n      measure: parseInt(entry[0], 10) - 1,\n      tonic: entry[1],\n    }))\n    .sort((a, b) => a.measure - b.measure);\n\nconst getSecondsMeasure = (\n  seconds: number,\n  measures: number[] | null,\n): number => {\n  if (!measures) {\n    return -1;\n  }\n  const result = measures.findIndex((time) => time >= seconds);\n  return (result === -1 ? measures.length - 1 : result) - 1;\n};\n\nconst getNoteMeasure = (note: Note, measures: number[] | null): number =>\n  getSecondsMeasure((note.span[0] + note.span[1]) / 2, measures);\n\nexport const getNoteColor = (\n  note: Note,\n  analysis: Analysis,\n  measures: number[],\n): string =>\n  `noteColor_${\n    analysis.modulations[1] === null\n      ? \"default\"\n      : (note.note.midiNumber -\n          getTonic(getNoteMeasure(note, measures), analysis)) %\n        12\n  }_colors`;\n\nexport type RenumberMeasureCallback = (\n  measure: number,\n  isShift: boolean,\n) => void;\n\nexport type RawlProps = {\n  parsingResult: ParsingResult;\n  getCurrentPositionMs: () => number;\n  savedAnalysis?: Analysis;\n  saveAnalysis: (analysis: Analysis) => void;\n  voiceNames: string[];\n  voiceMask: VoiceMask;\n  setVoiceMask: (mask: VoiceMask) => void;\n  showAnalysisBox: boolean;\n  seek: (ms: number) => void;\n  latencyCorrectionMs: number;\n  sourceUrl: string | null;\n  measureStart?: number;\n  isEmbedded?: boolean;\n  isHiddenRoute?: boolean;\n};\n\nconst Rawl: React.FC<RawlProps> = ({\n  parsingResult,\n  getCurrentPositionMs,\n  savedAnalysis,\n  saveAnalysis,\n  voiceNames,\n  voiceMask,\n  setVoiceMask,\n  showAnalysisBox: enableManualRemeasuring,\n  seek,\n  latencyCorrectionMs,\n  sourceUrl,\n  measureStart,\n  isEmbedded = false,\n  isHiddenRoute = false,\n}) => {\n  const { currentMidi, setCurrentMidi, rawlProps, togglePause } =\n    useContext(AppContext);\n  const slug = currentMidi?.slug || \"\";\n\n  const [analysis, setAnalysis] = useState<Analysis>(\n    savedAnalysis || rawlProps?.savedAnalysis || ANALYSIS_STUB,\n  );\n\n  useEffect(() => {\n    if (savedAnalysis) {\n      setAnalysis(savedAnalysis);\n    } else if (rawlProps?.savedAnalysis) {\n      setAnalysis(rawlProps.savedAnalysis);\n    }\n  }, [savedAnalysis, rawlProps?.savedAnalysis]);\n\n  const analysisRef = useRef(analysis);\n  useEffect(() => {\n    analysisRef.current = analysis;\n  }, [analysis]);\n\n  const [systemLayout, setSystemLayout] = useState<SystemLayout>(\"merged\");\n\n  const commitAnalysisUpdate = useCallback(\n    (analysisUpdate: Partial<Analysis>) => {\n      const updatedAnalysis = { ...analysis, ...analysisUpdate };\n      saveAnalysis(updatedAnalysis);\n      setAnalysis(updatedAnalysis);\n    },\n    [analysis, saveAnalysis],\n  );\n\n  const [selectedMeasure, setSelectedMeasure] = useState<number | null>(null);\n\n  const selectedMeasureRef = useRef(selectedMeasure);\n  useEffect(() => {\n    selectedMeasureRef.current = selectedMeasure;\n  }, [selectedMeasure]);\n\n  const { notes } = parsingResult;\n  const allNotes = useMemo(() => {\n    return notes.flat();\n  }, [notes]);\n\n  const [hoveredNote, setHoveredNote] = useState<Note | null>(null);\n\n  const playNote = useCallback((note: Note) => {\n    const duration = note.span[1] - note.span[0];\n    playRawMidiNote(note.note.midiNumber, duration * 1000);\n  }, []);\n\n  const handleMouseEnter = useCallback(\n    (note: Note) => {\n      if (!enableManualRemeasuring) {\n        if (selectedMeasureRef.current) {\n          setHoveredNote(note);\n        } else if (\n          window.event instanceof MouseEvent &&\n          window.event.shiftKey\n        ) {\n          playNote(note);\n        }\n      }\n    },\n    [enableManualRemeasuring, playNote],\n  );\n\n  const handleMouseLeave = useCallback(() => {\n    if (!enableManualRemeasuring) {\n      setHoveredNote(null);\n    }\n  }, [enableManualRemeasuring]);\n\n  const futureAnalysis = useMemo(() => {\n    return hoveredNote\n      ? getNewAnalysis(\n          hoveredNote,\n          selectedMeasureRef.current,\n          enableManualRemeasuring,\n          analysisRef.current,\n        )\n      : analysis;\n  }, [hoveredNote, analysis, enableManualRemeasuring]);\n\n  const measuresAndBeats = useMemo(() => {\n    if (futureAnalysis.measures) {\n      return buildManualMeasuresAndBeats(futureAnalysis.measures, allNotes);\n    }\n    return parsingResult?.measuresAndBeats;\n  }, [futureAnalysis, allNotes, parsingResult]);\n\n  const selectMeasure = useCallback(\n    (measure) => {\n      if (\n        selectedMeasure &&\n        getPhraseStarts(analysis, measuresAndBeats.measures.length).indexOf(\n          selectedMeasure,\n        ) !== -1\n      ) {\n        const diff = measure - selectedMeasure;\n        if (diff >= -4) {\n          // prevent accidental misclicks when a selection is forgotten by user\n          const analysisUpdate: Partial<Analysis> = {\n            phrasePatch: [\n              ...analysis.phrasePatch,\n              { measure: selectedMeasure, diff },\n            ],\n          };\n          setSelectedMeasure(null);\n          commitAnalysisUpdate(analysisUpdate);\n        }\n      } else {\n        setSelectedMeasure(measure);\n      }\n      setHoveredNote(null);\n    },\n    [selectedMeasure, analysis, measuresAndBeats],\n  );\n  const splitAtMeasure = useCallback(\n    (groupByPhrasesTillTheEnd: boolean, groupSize: number = 2) => {\n      const phraseStarts = getPhraseStarts(\n        analysis,\n        measuresAndBeats.measures.length,\n      );\n      const newSections = [phraseStarts.indexOf(selectedMeasure)];\n\n      if (newSections[0] === -1) {\n        alert(\n          `splitAtMeasure, not found ${selectedMeasure} in ${JSON.stringify(\n            phraseStarts,\n          )}`,\n        );\n      } else {\n        if (groupByPhrasesTillTheEnd) {\n          for (\n            let i = newSections[0];\n            i < phraseStarts.length - 1;\n            i += groupSize\n          ) {\n            newSections.push(i);\n          }\n        }\n\n        const analysisUpdate: Partial<Analysis> = {\n          sections: [\n            ...new Set([...(analysis.sections ?? [0]), ...newSections]),\n          ].sort((a, b) => a - b),\n        };\n        setSelectedMeasure(null);\n        commitAnalysisUpdate(analysisUpdate);\n      }\n    },\n    [selectedMeasure, analysis, measuresAndBeats],\n  );\n  const mergeAtMeasure = useCallback(() => {\n    const phraseStarts = getPhraseStarts(\n      analysis,\n      measuresAndBeats.measures.length,\n    );\n    const sectionToRemove = phraseStarts.indexOf(selectedMeasure);\n    if (sectionToRemove === -1) {\n      alert(\n        `mergeAtMeasure, not found ${selectedMeasure} in ${JSON.stringify(\n          phraseStarts,\n        )}`,\n      );\n    } else {\n      const analysisUpdate: Partial<Analysis> = {\n        sections: (analysis.sections ?? [0]).filter(\n          (section) => section !== sectionToRemove,\n        ),\n      };\n      setSelectedMeasure(null);\n      commitAnalysisUpdate(analysisUpdate);\n    }\n  }, [selectedMeasure, analysis, measuresAndBeats]);\n\n  const renumberMeasure = useCallback(\n    (displayNumber, isShift) => {\n      setSelectedMeasure(null);\n\n      const analysisUpdate =\n        enableManualRemeasuring && isShift\n          ? {\n              measures: {\n                beatsPerMeasure: {\n                  ...(analysis.measures?.beatsPerMeasure ?? {}),\n                  [selectedMeasure]: displayNumber,\n                },\n                measureStarts: analysis.measures?.measureStarts ?? {},\n              },\n            }\n          : {\n              measureRenumbering: {\n                [selectedMeasure]: displayNumber,\n              },\n            };\n      commitAnalysisUpdate(analysisUpdate);\n    },\n    [selectMeasure, analysis, selectedMeasure, enableManualRemeasuring],\n  );\n\n  useEffect(() => {\n    if (analysis.phrasePatch?.length > 0) {\n      return;\n    }\n\n    const firstPhraseStart = findFirstPhraseStart(allNotes, measuresAndBeats);\n    const diff: Partial<Analysis> = {};\n    if (firstPhraseStart !== -1) {\n      diff.phrasePatch = [{ measure: 1, diff: firstPhraseStart }];\n    }\n\n    const tonic = findTonic(allNotes);\n    if (tonic !== -1 && analysis.modulations[1] === null) {\n      diff.modulations = { 1: tonic };\n    }\n    setAnalysis({ ...analysis, ...diff });\n  }, [allNotes]);\n\n  const handleNoteClick = useCallback(\n    (note: Note) => {\n      if (selectedMeasureRef.current) {\n        advanceAnalysis(\n          note,\n          selectedMeasureRef.current,\n          enableManualRemeasuring,\n          setSelectedMeasure,\n          analysisRef.current,\n          commitAnalysisUpdate,\n        );\n      } else {\n        playNote(note);\n      }\n    },\n    [enableManualRemeasuring, commitAnalysisUpdate, playNote],\n  );\n\n  const [positionMs, setPositionMs] = useState(0);\n\n  useEffect(() => {\n    let running = true;\n\n    const animate = () => {\n      if (!running) {\n        return;\n      }\n\n      setPositionMs(getCurrentPositionMs() - latencyCorrectionMs);\n      requestAnimationFrame(animate);\n    };\n\n    animate();\n\n    return () => {\n      running = false;\n    };\n  }, [latencyCorrectionMs]);\n\n  useEffect(() => {\n    const handleEscapePress = (event) => {\n      if (event.key === \"Escape\" || event.keyCode === 27) {\n        selectMeasure(null);\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleEscapePress);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscapePress);\n    };\n  }, []);\n\n  const systemClickHandler = useCallback(\n    (e: React.MouseEvent, xToSeconds = xToSeconds__) => {\n      const targetElement = e.target as HTMLElement;\n      const rect = targetElement.getBoundingClientRect();\n      const distance = e.clientX - rect.left + targetElement.scrollLeft;\n      const time = xToSeconds(distance);\n\n      if (enableManualRemeasuring && selectedMeasure) {\n        advanceAnalysis(\n          {\n            span: [time, -1],\n            note: { midiNumber: -1 },\n            isDrum: false,\n            chipState: { on: {}, off: {} },\n            id: -1,\n            voiceIndex: -1,\n          },\n          selectedMeasureRef.current,\n          enableManualRemeasuring,\n          setSelectedMeasure,\n          analysisRef.current,\n          commitAnalysisUpdate,\n        );\n      } else {\n        selectMeasure(null);\n\n        seek(time * 1000);\n      }\n    },\n    [\n      seek,\n      selectMeasure,\n      selectedMeasure,\n      enableManualRemeasuring,\n      commitAnalysisUpdate,\n    ],\n  );\n\n  const positionSeconds = positionMs / 1000;\n\n  // Calculate current tonic based on position\n  const currentTonic = useMemo(() => {\n    if (!measuresAndBeats?.measures) return 0;\n    const currentMeasure = getSecondsMeasure(\n      positionSeconds,\n      measuresAndBeats.measures,\n    );\n    return getTonic(currentMeasure, futureAnalysis);\n  }, [positionSeconds, measuresAndBeats, futureAnalysis]);\n\n  const mouseHandlers: MouseHandlers = useMemo(\n    () => ({\n      handleNoteClick,\n      handleMouseEnter,\n      handleMouseLeave,\n      hoveredNote,\n      systemClickHandler,\n    }),\n    [\n      handleNoteClick,\n      handleMouseEnter,\n      handleMouseLeave,\n      hoveredNote,\n      systemClickHandler,\n    ],\n  );\n\n  const measureSelection: MeasureSelection = useMemo(\n    () => ({\n      selectedMeasure,\n      selectMeasure,\n      splitAtMeasure,\n      mergeAtMeasure,\n      renumberMeasure,\n    }),\n    [\n      selectedMeasure,\n      selectMeasure,\n      splitAtMeasure,\n      mergeAtMeasure,\n      renumberMeasure,\n    ],\n  );\n\n  const [hoveredColors, setHoveredColors] = useState<string[] | null>(null);\n\n  const coloredNotes: ColoredNotesInVoices = useMemo(\n    () =>\n      notes.map((notesInVoice, voiceIndex) =>\n        notesInVoice.map((note) => {\n          const colorPitchClass = note.isDrum ? -1 : note.note.midiNumber % 12;\n          return {\n            ...note,\n            color: note.isDrum\n              ? \"noteColor_drum\"\n              : getNoteColor(note, futureAnalysis, measuresAndBeats.measures),\n            isActive: voiceMask[voiceIndex],\n            colorPitchClass,\n          };\n        }),\n      ),\n    [notes, futureAnalysis, measuresAndBeats, voiceMask],\n  );\n\n  const systemLayoutProps: SystemLayoutProps = useMemo(\n    () => ({\n      notes: coloredNotes,\n      voiceMask,\n      voiceNames,\n      setVoiceMask,\n      measuresAndBeats,\n      positionSeconds,\n      mouseHandlers,\n      measureSelection,\n      analysis: futureAnalysis,\n      frozenNotes: coloredNotes,\n      saveAnalysis,\n      measureStart,\n      slug,\n      currentTonic,\n      togglePause,\n      seek,\n      hoveredColors,\n      setHoveredColors,\n    }),\n    [\n      coloredNotes,\n      voiceMask,\n      voiceNames,\n      setVoiceMask,\n      measuresAndBeats,\n      positionSeconds,\n      mouseHandlers,\n      measureSelection,\n      futureAnalysis,\n      saveAnalysis,\n      measureStart,\n      slug,\n      currentTonic,\n      togglePause,\n      seek,\n      hoveredColors,\n      setHoveredColors,\n    ],\n  );\n\n  useEffect(() => {\n    if (measureStart !== undefined && measuresAndBeats) {\n      const absoluteMeasureStart =\n        measureStart + (analysis.measureRenumbering?.[1] || 0) - 1;\n      const seekTime = measuresAndBeats.measures[absoluteMeasureStart] - 1;\n      if (seekTime !== undefined) {\n        seek(seekTime * 1000);\n      }\n    }\n  }, [measureStart, measuresAndBeats, analysis.measureRenumbering, seek]);\n\n  const handleSourceUrlUpdate = async (newUrl: string) => {\n    if (currentMidi) {\n      const db = getFirestore();\n      const midiDocRef = doc(db, \"midis\", currentMidi.id);\n\n      try {\n        await updateDoc(midiDocRef, { url: newUrl });\n        setCurrentMidi({ ...currentMidi, sourceUrl: newUrl });\n      } catch (error) {\n        console.error(\"Error updating source URL:\", error);\n        alert(\"Failed to update source URL. Please try again.\");\n      }\n    }\n  };\n\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        paddingLeft: \"30px\",\n        overflow: \"hidden\",\n      }}\n    >\n      {isEmbedded && (\n        <>\n          <div\n            style={{\n              borderTop: \"1px solid #666\",\n              flexShrink: 0,\n            }}\n          />\n          <Link\n            to={`/f/${slug}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{\n              position: \"fixed\",\n              top: \"calc(50vh + 1px)\",\n              right: \"10px\",\n              color: \"white\",\n              backgroundColor: \"black\",\n              padding: \"5px 10px\",\n              borderRadius: \"5px\",\n              textDecoration: \"none\",\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"5px\",\n              zIndex: 100000000,\n              fontSize: \"14px\",\n            }}\n          >\n            <span>\n              {slug\n                .replace(/---/g, \"  \")\n                .replace(/-/g, \" \")\n                .replace(/_/g, \" \")}\n            </span>\n            <FontAwesomeIcon icon={faArrowUpRightFromSquare} />\n          </Link>\n        </>\n      )}\n      <div\n        style={{\n          flexGrow: 1,\n          display: \"flex\",\n          flexDirection: \"column\",\n          overflow: \"hidden\",\n        }}\n      >\n        <div\n          key=\"innerLeftPanel\"\n          style={{\n            margin: 0,\n            padding: 0,\n            position: \"relative\",\n            overflowX: \"scroll\",\n            overflowY: \"scroll\",\n            flexGrow: 1,\n            backgroundColor: \"black\",\n          }}\n          className=\"Rawl\"\n        >\n          {slug && !isHiddenRoute && slug !== \"forge_mock\" && (\n            <CompositionTitle\n              slug={slug}\n              sourceUrl={sourceUrl}\n              onSourceUrlUpdate={handleSourceUrlUpdate}\n            />\n          )}\n          {systemLayout === \"merged\" ? (\n            <MergedSystemLayout\n              {...systemLayoutProps}\n              enableManualRemeasuring={enableManualRemeasuring}\n              isEmbedded={isEmbedded}\n            />\n          ) : (\n            <ErrorBoundary\n              fallback={<div>Error loading Frozen Notes Layout</div>}\n            >\n              <FrozenNotesLayout\n                {...systemLayoutProps}\n                saveAnalysis={saveAnalysis}\n              />\n            </ErrorBoundary>\n          )}\n        </div>\n        {!isEmbedded && <LayoutSelector setSystemLayout={setSystemLayout} />}\n      </div>\n      {slug !== \"forge_mock\" && (\n        <div style={{ color: \"gray\" }}>\n          Shift+hover or click the note to play it separately\n          <br />\n          Press \"Space\" to play/pause\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Rawl;\n","import cloneDeep from \"lodash/cloneDeep\";\nimport { Note } from \"./parseMidi\";\nimport { SecondsSpan } from \"./Rawl\";\nimport { MeasuresAndBeats } from \"./SystemLayout\";\n\nexport const TIME_SCALE_FACTOR = 100;\n\nexport type PitchClass = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11;\n\nexport type MeasuresSpan = [number, number]; // one-based numbering, last measure inclusive. [1, 8] is the first eight measures\n\nexport type Modulations = { [oneIndexedMeasureStart: number]: PitchClass };\n\nexport type MeasureRenumbering = {\n  [oneIndexedMeasureStart: number]: PitchClass;\n};\n\nexport type ManualMeasures = {\n  measureStarts: { [oneIndexedMeasureStart: number]: number };\n  beatsPerMeasure: { [oneIndexedMeasureStart: number]: number };\n};\n\n// Add this new type for delta-coded arrays\nexport type DeltaCoded<T extends number> = [T, ...number[]];\n\nexport interface CompressedNotes {\n  [length: number]: {\n    [midiNumber: number]: DeltaCoded<number>;\n  };\n}\n\nexport interface FrozenNotesType {\n  notesInVoices: CompressedNotes[];\n  analysis: FrozenAnalysis;\n}\n\nexport interface Snippet {\n  tag: string;\n  frozenNotes: FrozenNotesType;\n  measuresSpan: [number, number];\n  secondsSpan?: SecondsSpan;\n  phraseStarts?: number[];\n}\n\nexport type MidiNumberToNoteSpans = {\n  [midiNumber: number]: SecondsSpan[];\n};\n\nexport type FrozenAnalysis = {\n  modulations: Modulations;\n  measuresAndBeats: {\n    measures: DeltaCoded<number>;\n    beats: DeltaCoded<number>;\n  };\n};\n\nexport type FrozenNotes = {\n  notesInVoices: MidiNumberToNoteSpans[]; // first dimension is voice\n  analysis: FrozenAnalysis;\n};\n\nexport type Analysis = {\n  modulations: Modulations;\n  phrasePatch?: { measure: number; diff: number }[];\n  sections?: number[];\n  measureRenumbering?: MeasureRenumbering;\n  measures?: ManualMeasures;\n  snippets?: Snippet[];\n\n  // outdated, was used in winter 2023..24 for rock prototype\n  comment: string;\n  tags: string[];\n  form: { [oneIndexedMeasureStart: number]: string };\n};\n\nexport type Analyses = {\n  [path: string]: Analysis;\n};\n\nexport const ANALYSIS_STUB: Analysis = {\n  modulations: { 1: null },\n  comment: \"\",\n  tags: [],\n  form: {},\n  phrasePatch: [],\n  sections: [0], // in phrases\n};\n\nconst removeIdleModulations = (modulations: Modulations): Modulations => {\n  const sortedMeasures = Object.keys(modulations)\n    .map(Number)\n    .sort((a, b) => a - b);\n\n  let lastValue = modulations[sortedMeasures[0]];\n  const result: Modulations = { 1: lastValue };\n\n  for (const measure of sortedMeasures.slice(1)) {\n    const currentValue = modulations[measure];\n    if (currentValue !== lastValue) {\n      result[measure] = currentValue;\n      lastValue = currentValue;\n    }\n  }\n\n  return result;\n};\n\nexport const getNewAnalysis = (\n  note: Note | null,\n  selectedMeasure: number | null,\n  enableManualRemeasuring: boolean,\n  analysis: Analysis,\n): Analysis => {\n  let update: Partial<Analysis> = {};\n\n  if (note) {\n    if (enableManualRemeasuring) {\n      if (selectedMeasure) {\n        update.measures = cloneDeep(analysis.measures) ?? {\n          measureStarts: {},\n          beatsPerMeasure: {},\n        };\n        update.measures.measureStarts[selectedMeasure] = note.span[0];\n      }\n    } else {\n      // TODO: if !selectedMeasure, then only apply modulation if we're inside\n      // the very first modulatory region (if there's already two)\n      // This probably has a circular dependency since we probably need to\n      // build measures to know where exactly our note falls.\n      if (!selectedMeasure) {\n        return analysis;\n      }\n      let newModulations = {\n        ...(analysis.modulations || []),\n        [selectedMeasure]: (note.note.midiNumber % 12) as PitchClass,\n      };\n      update.modulations = removeIdleModulations(newModulations);\n    }\n  }\n\n  return { ...analysis, ...update };\n};\n\nexport const advanceAnalysis = (\n  note: Note | null,\n  selectedMeasure: number | null,\n  enableManualRemeasuring: boolean,\n  selectMeasure: (_: null) => void,\n  analysis: Analysis,\n  commitAnalysisUpdate: (analysisUpdate: Partial<Analysis>) => void,\n) => {\n  const newAnalysis = getNewAnalysis(\n    note,\n    selectedMeasure,\n    enableManualRemeasuring,\n    analysis,\n  );\n\n  selectMeasure(null);\n  commitAnalysisUpdate(newAnalysis);\n};\n\n// Add these utility functions for delta coding and decoding\nexport function deltaCoding(arr: number[]): DeltaCoded<number> {\n  if (arr.length === 0) return [0];\n  const result: DeltaCoded<number> = [arr[0]];\n  for (let i = 1; i < arr.length; i++) {\n    result.push(arr[i] - arr[i - 1]);\n  }\n  return result;\n}\n\nexport function deltaDecoding(encoded: DeltaCoded<number>): number[] {\n  const result: number[] = [encoded[0]];\n  for (let i = 1; i < encoded.length; i++) {\n    result.push(result[i - 1] + encoded[i]);\n  }\n  return result;\n}\n\nexport function undeltaCoding(encoded: DeltaCoded<number>): number[] {\n  return deltaDecoding(encoded);\n}\n\nexport function adjustModulations(\n  modulations: Modulations,\n  measureStart: number,\n): Modulations {\n  return Object.fromEntries(\n    Object.entries(modulations).map(([measure, tonic]) => [\n      parseInt(measure) + measureStart - 1,\n      tonic,\n    ]),\n  );\n}\n\nexport const rehydrateNotes = (snippet: Snippet): Note[][] => {\n  const { frozenNotes } = snippet;\n\n  return frozenNotes.notesInVoices.map((voice, voiceIndex) => {\n    const notes: Note[] = [];\n    Object.entries(voice).forEach(([length, midiNumbers]) => {\n      Object.entries(midiNumbers).forEach(([midiNumber, starts]) => {\n        const decodedStarts = deltaDecoding(starts as DeltaCoded<number>);\n        decodedStarts.forEach((start) => {\n          const startTime = start / TIME_SCALE_FACTOR;\n          const lengthTime = parseInt(length) / TIME_SCALE_FACTOR;\n          const absoluteSpan: [number, number] = [\n            startTime,\n            startTime + lengthTime,\n          ];\n          notes.push({\n            note: { midiNumber: parseInt(midiNumber) },\n            id: notes.length + 1, // Unique ID for each note\n            isDrum: false,\n            span: absoluteSpan,\n            voiceIndex,\n          });\n        });\n      });\n    });\n    return notes;\n  });\n};\n\nexport function rehydrateAnalysis(\n  frozenAnalysis: FrozenNotesType[\"analysis\"],\n  measureStart: number = 1,\n): {\n  analysis: Analysis;\n  measuresAndBeats: MeasuresAndBeats;\n} {\n  return {\n    analysis: {\n      modulations: adjustModulations(frozenAnalysis.modulations, measureStart),\n      comment: \"\",\n      tags: [],\n      form: {},\n    },\n    measuresAndBeats: {\n      measures: undeltaCoding(frozenAnalysis.measuresAndBeats.measures).map(\n        (time) => time / TIME_SCALE_FACTOR,\n      ),\n      beats: undeltaCoding(frozenAnalysis.measuresAndBeats.beats).map(\n        (time) => time / TIME_SCALE_FACTOR,\n      ),\n    },\n  };\n}\n\nexport function rehydrateSnippet(snippet: Snippet): {\n  rehydratedNotes: Note[][];\n  rehydratedAnalysis: Analysis;\n  rehydratedMeasuresAndBeats: MeasuresAndBeats;\n} {\n  const rehydratedNotes = rehydrateNotes(snippet);\n  const {\n    analysis: rehydratedAnalysis,\n    measuresAndBeats: rehydratedMeasuresAndBeats,\n  } = rehydrateAnalysis(snippet.frozenNotes.analysis, snippet.measuresSpan[0]);\n\n  // Ensure modulations are properly adjusted\n  rehydratedAnalysis.modulations = adjustModulations(\n    snippet.frozenNotes.analysis.modulations,\n    snippet.measuresSpan[0],\n  );\n\n  return {\n    rehydratedNotes,\n    rehydratedAnalysis,\n    rehydratedMeasuresAndBeats,\n  };\n}\n\nexport function getSnippetTags(analysis: Analysis): string[] {\n  return analysis.snippets?.flatMap((snippet) => snippet.tag.split(\" \")) || [];\n}\n\nexport const getPhraseStarts = (\n  analysis: Analysis,\n  numMeasures: number,\n): number[] => {\n  const result = [];\n  let i;\n  for (i = 1; i < numMeasures; i += 4) {\n    result.push(i);\n  }\n  result.push(i);\n  for (const { measure, diff } of analysis.phrasePatch || []) {\n    if (result.indexOf(measure) === -1) {\n      console.log(`bad phrasePatch, measure ${measure} not found`);\n      break;\n    }\n    for (let j = result.indexOf(measure); j < result.length; ++j) {\n      result[j] += diff;\n    }\n    while (result.at(-1) + 4 < numMeasures) {\n      result.push(result.at(-1) + 4);\n    }\n    if (result[0] !== 1) {\n      result.unshift(1);\n    }\n  }\n\n  return result;\n};\n\nexport function getSnippetsStartingAtMeasure(\n  snippets: Snippet[],\n  measure: number,\n): string[] {\n  return snippets\n    .filter((snippet) => snippet.measuresSpan[0] === measure)\n    .map((snippet) => snippet.tag);\n}\n\nexport function filterSnippetsByAccess(snippets: Snippet[]): Snippet[] {\n  return snippets.filter((snippet) => {\n    const [chapter] = snippet.tag.split(\":\");\n    return chapter.trim() !== \"book\";\n  });\n}\n","// Metadata filled in using 4o on Dec 6, 2024.\n\nimport AboutTop100Corpus from \"../book/AboutTop100Corpus\";\n\nexport type CorpusEntry = {\n  slug: string;\n  midis: string[];\n  composerBirthYear?: number;\n  genre?: string;\n  style?: string;\n  country?: string;\n  posttext?: React.ReactNode;\n};\n\nexport const MUSESCORE_TOP_100_SLUG = \"top_100_musescore_composers\";\n\nexport const corpora: CorpusEntry[] = [\n  {\n    slug: \"yiruma_misc\",\n    midis: [\n      \"yiruma_27_may\",\n      \"yiruma_chaconne\",\n      \"yiruma_do_you\",\n      \"yiruma_fairy_tale\",\n      \"yiruma_if_i_could_see_you_again\",\n      \"yiruma_its_your_day\",\n      \"yiruma_kiss_the_rain_easy\",\n      \"yiruma_love_me\",\n      \"yiruma_love_me_easy\",\n      \"yiruma_maybe\",\n      \"yiruma_prelude_in_g_minor\",\n      \"yiruma_reason\",\n      \"yiruma_reminiscent\",\n      \"yiruma_river_flows_in_you_easy\",\n      \"River_Flows_In_You\",\n      \"yiruma_room_with_a_view\",\n      \"yiruma_spring_time\",\n      \"yiruma_wait_there\",\n      \"yiruma_when_the_love_falls\",\n      \"Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\",\n    ],\n    composerBirthYear: 1978, // Yiruma\n    style: \"21st Century Piano\",\n    country: \"South Korea\",\n  },\n  {\n    slug: \"yiruma_first_love\",\n    midis: [\n      \"river-flows-in-you\",\n      \"may-be---yiruma\",\n      \"it-s-your-day---yiruma\",\n      \"yiruma---love-me\",\n      \"farewell---yiruma\",\n      \"time-forgets---yiruma\",\n      \"if-i-could-see-you-again---yiruma\",\n      \"i---yiruma\",\n      \"on-the-way---yiruma\",\n      \"till-i-find-you---yiruma\",\n      \"passing-by---yiruma\",\n      \"left-my-hearts---yiruma\",\n      \"dream-a-little-dream-of-me---yiruma\", // cover\n      \"when-the-love-falls---yiruma\", // cover\n    ],\n    composerBirthYear: 1978, // Same as above.\n    style: \"21st Century Piano\",\n    country: \"South Korea\",\n  },\n  {\n    slug: \"milan_dvorak\",\n    midis: [\"jazz-piano-etudes-book-2-no.-12---milan-dvorak\", \"etude-1\"],\n  },\n  {\n    slug: \"stephen_heller\",\n    midis: [\n      \"prelude-in-c-minor---stephen-heller-prelude-in-c-sharp-minor---stephen-heller\",\n      \"25-etudes-melodiques-op.-45-no.-2-avalanche-by-stephen-heller\",\n      \"prelude-opus-81-no.-2-in-a-minor---heller\",\n      \"prelude-opus-81-no.-3-in-g-major---heller\",\n    ],\n    composerBirthYear: 1813,\n    style: \"Romantic\",\n    country: \"Hungary\",\n  },\n  {\n    slug: \"greg_joy\",\n    midis: [\"greg-joy---wind-dance-of-the-fairies\"],\n    style: \"Guitar\",\n  },\n  {\n    slug: \"suzanne_ciani\",\n    midis: [\n      \"simple-song-~-suzanne-ciani\",\n      \"summer-s-day---suzanne-ciani\",\n      \"anthem---suzanne-ciani\",\n      \"turning\",\n      \"sargasso-sea-by-suzanne-ciani\",\n    ],\n    style: \"New Age\",\n  },\n  {\n    slug: \"aram_khachaturian\",\n    midis: [\n      \"masquerade-waltz---khachaturian\",\n      \"khachaturian---album-for-children-kinderalbum-no.-1-andantino\",\n    ],\n  },\n  {\n    slug: \"darius_milhaud\",\n    midis: [\n      \"darius-milhaud---scaramouche-op.-165b-iii.-brazileira\",\n      \"mazurka---darius-milhaud-1914\",\n    ],\n    composerBirthYear: 1892,\n    genre: \"Classical, Jazz\",\n    style: \"Jazz, Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"jim_brickman\",\n    midis: [\n      \"valentine---jim-brickman-with-martina-mcbride\",\n      \"beautiful\",\n      \"jim-brickman---night-prayer-uoc-gi\",\n    ],\n    composerBirthYear: 1961, // Jim Brickman\n    genre: \"Adult Contemporary, Pop\", // Focuses on contemporary ballads and easy-listening music.\n    style: \"Pop Piano, Contemporary Classical\",\n    country: \"USA\", // Jim Brickman is American.\n  },\n  {\n    slug: \"ryan_elder\",\n    midis: [\"rick-and-morty-main-theme---ryan-elder\"],\n    composerBirthYear: 1978, // Ryan Elder\n    genre: \"Television Music, Comedy\",\n    style: \"Electronic, Orchestral, Comedy Music\",\n    country: \"USA\", // Ryan Elder is American.\n  },\n  {\n    slug: \"eubie_blake\",\n    midis: [\n      \"charleston-rag-sounds-of-africa---james-hubert-eubie-blake-1899----copr.-1917\",\n    ],\n    composerBirthYear: 1887,\n    genre: \"Jazz, Ragtime\",\n  },\n  {\n    slug: \"matyas_seiber\",\n    midis: [\n      \"beast-of-england-animal-farm-1954---matyas-seiber-piano-transcription\",\n      \"dance-suite\",\n      \"jazz-etudiette\",\n      \"tango-ii-habanera---tango-ii-habanera\",\n    ],\n    composerBirthYear: 1905,\n    country: \"Hungary, UK\",\n  },\n  {\n    slug: \"garry_schyman\",\n    midis: [\n      \"bioshock-cohen-s-masterpiece-cohen-s-scherzo-no.-7---andante-con-passionato\",\n      \"bioshock-infinite---lighter-than-air\",\n      \"bioshock-2-how-she-sees-the-world\",\n    ],\n    composerBirthYear: 1955,\n    genre: \"Video Game Music, Film Score\",\n    country: \"USA\",\n  },\n  {\n    slug: \"giovanni_allevi\",\n    midis: [\n      \"amor-sacro---giovanni-allevi\",\n      \"la-stanza-dei-giochi---giovanni-allevi\",\n      \"come-sei-veramente-~-giovani-allevi\",\n      \"flowers---giovanni-allevi\",\n      \"aria-~-giovanni-allevi\",\n    ],\n    composerBirthYear: 1969, // Giovanni Allevi\n    genre: \"Classical, Contemporary Classical\",\n    style: \"Minimalism, Piano-driven Classical\",\n    country: \"Italy\", // Giovanni Allevi is Italian.\n  },\n\n  {\n    slug: \"daisuke_kikuta\",\n    midis: [\n      \"michishirube---violet-evergarden-ed\",\n      \"theishter-arr.-sincerely---violet-evergarden-op\",\n    ],\n    composerBirthYear: 1982,\n    genre: \"J-Pop, Anime Song\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"hiroki_kikuta\",\n    midis: [\n      \"phantom-and-...-a-rose---hiroki-kikuta-phantom-and-a-rose---hiroki-kikuta\",\n      \"angel-s-fear-secret-of-mana-soundtrack\",\n    ],\n    composerBirthYear: 1962,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"george_winston\",\n    midis: [\n      \"thanksgiving\",\n      \"colors-dance---george-winston\",\n      \"february-sea---george-winston-771567dfea6219c668f882216e7f8c356a9b6bc5\",\n      \"longing-love---george-winston\",\n      \"variations-on-the-canon-qia-nong-bian-zou-qu\",\n    ],\n    composerBirthYear: 1949, // George Winston\n    genre: \"New Age, Instrumental\",\n    style: \"Solo Piano, Minimalism\",\n    country: \"USA\", // George Winston is American.\n  },\n  {\n    slug: \"jun_ishikawa\",\n    midis: [\n      \"marx-theme-from-kirby-super-star---jun-ishikawa\",\n      \"gourmet-race---kirby-super-star-ultra-solo-piano-arrangement\",\n      \"pitch-black-horror---jun-ishikawa---kirby-and-the-forgotten-land\",\n      \"masked-dedede-kirby-triple-deluxe\",\n      \"sand-canyon-1---kirby-s-dreamland-3\",\n      \"green-greens---jun-ishikawa\",\n      \"elfilin-from-kirby-and-the-forgotten-land---hirokazu-ando-jun-ishikawa\",\n    ],\n    composerBirthYear: 1964,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"george_l_cobb\",\n    midis: [\n      \"russian-rag-by-george-cobb-1918\",\n      \"twilight-in-benares-1923\",\n      \"the-fakirs-1923\",\n    ],\n    composerBirthYear: 1886,\n    genre: \"Ragtime\",\n  },\n  {\n    slug: \"tomohito_nishiura\",\n    midis: [\"professor-layton-s-theme---piano\"],\n    composerBirthYear: 1982, // Tomohito Nishiura\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Japan\", // Tomohito Nishiura is Japanese.\n  },\n  {\n    slug: \"juergen_moser\",\n    midis: [\n      \"the-groover---jurgen-moser\",\n      \"new-orleans-blues-extended-version---jurgen-moser\",\n      \"latin-special---jurgen-moser\",\n      \"the-snow-is-falling---jurgen-moser\",\n    ],\n    composerBirthYear: 1949,\n    genre: \"Teacher Music\",\n    style: \"Classical, Contemporary\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"david_lanz\",\n    midis: [\n      \"cristofari-s-dream\",\n      \"moonlight-lake-by-david-lanz\",\n      \"angels-falling-by-david-lanz\",\n      \"wonder-wave-by-david-lanz\",\n      \"variations-on-a-theme-from-pachelbel-s-canon-in-d-major---david-lanz\",\n      \"a-whiter-shade-of-pale-~-david-lanz\",\n      \"what-child-is-this-~-david-lanz\",\n      \"david-lanz---lost_in_paradise\",\n      \"rain-dancer-returns-by-david-lanz\",\n      \"winter-sonata---david-lanz\",\n      \"as-rivers-flow-by-david-lanz\",\n      \"dream-of-the-forgotten-child---david-lanz\",\n      \"dark-horse---david-lanz-dark-horse\",\n\n      // Valentine Hill (2024)\n      \"david-lanz---the-bittersweet\",\n      \"david-lanz---and-again-more\",\n      \"david-lanz---a-valentine-moon\",\n    ],\n    composerBirthYear: 1950, // David Lanz\n    genre: \"New Age, Instrumental\",\n    style: \"Piano Solo, Contemporary Classical\",\n    country: \"USA\", // David Lanz is American.\n  },\n  {\n    slug: \"philip_glass\",\n    midis: [\n      \"glassworks-opening-1---philip-glass-opening-1---philip-glass\",\n      \"tales-from-the-loop\",\n      \"walk-to-school-tales-from-the-loop\",\n      \"it-was-always-you-helen-from-the-classic-horror-movie-candyman\",\n      \"philip-glass---prophecies\",\n      \"philip-glass---facades\",\n      \"night-train---philip-glass-arr.-for-solo-piano\",\n      \"philip-glass---spaceship\",\n      \"philip-glass---pruit-igoe\",\n      \"philip-glass---islands\",\n      \"akhnaten-prelude---philip-glass\",\n      \"dead-things\",\n      \"candyman\",\n      \"philip-glass---floe\",\n      \"philip-glass---satyagraha-act-3-ending\",\n    ],\n    composerBirthYear: 1937, // Philip Glass\n    genre: \"Minimalism, Classical\",\n    style: \"Minimalism, Avant-garde\",\n    country: \"USA\", // Philip Glass is American.\n  },\n  {\n    slug: \"machaut\",\n    midis: [\"machaut---messe-de-nostre-dame---kyrie\"],\n    composerBirthYear: 1300, // Guillaume de Machaut (estimated)\n    genre: \"Medieval, Sacred\",\n    style: \"Polyphonic Choral Music\",\n    country: \"France\", // Machaut was French.\n  },\n  {\n    slug: \"bela_bartok\",\n    midis: [\n      \"six-dances-in-bulgarian-rhythm-no.6-from-mikrokosmos-sz.107-bb-105---bela-bartok\",\n      \"an-evening-at-the-village---bartok-bela\",\n      \"b.-bartok-for-children-vol-1-nr-1-children-at-play\",\n      \"b.-bartok-for-children-vol.-1-nr-38-winter-solstice-song-sz42\",\n      \"b.-bartok-for-children-vol.-1-nr.3--quasi-adagio\",\n      \"b.-bartok-for-children-vol.-1-nr.29-pentatonic-tune-sz42\",\n    ],\n    composerBirthYear: 1881,\n    genre: \"Folk, Traditional\",\n    country: \"Hungary\",\n  },\n  {\n    slug: \"habanera\",\n    midis: [\n      \"la-cubana-danza-habanera-1850-de-florencio-lahoz\",\n      \"habanera---pascual-roch-1864---1921\",\n      \"la-paloma-habanera\",\n      \"habanera---bartolome-calatayud\",\n      \"soledad-.-habanera-par-ignazio-cervantes\",\n      \"emilia-habanera-pour-guitare-a.alba\",\n\n      \"piece-en-forme-de-habanera\",\n    ],\n    genre: \"Latin, Traditional\",\n    style: \"Habanera, Dance\",\n    country: \"Spain\", // The Habanera is a Spanish genre.\n  },\n  {\n    slug: \"ernesto_nazareth\",\n    midis: [\n      \"brejeiro---ernesto-nazareth\",\n      \"tango-habanera-vers-1925-by-ernesto-nazareth\",\n      \"apanhei-te-cavanquinho---ernesto-nazareth\",\n    ],\n    composerBirthYear: 1863, // Ernesto Nazareth\n    genre: \"Brazilian, Choro\",\n    style: \"Choro, Tango\",\n    country: \"Brazil\", // Ernesto Nazareth is Brazilian.\n  },\n  {\n    slug: \"georgian\",\n    midis: [\n      \"moxevis-k-alo-t-inao\",\n      \"c-angala-da-gogona\",\n      \"t-u-ase-turp-a-iqavi\",\n      \"nu-giqors-k-alav\",\n      \"mival-guriashi\",\n      \"kintouri\",\n    ],\n    composerBirthYear: undefined, // Traditional Georgian folk music\n    genre: \"Folk, Traditional\",\n    style: \"Georgian Polyphonic Singing\",\n    country: \"Georgia\", // The music is from Georgia (Caucasus region).\n  },\n  {\n    slug: \"elissa_milne\",\n    midis: [\n      \"mozzie---elissa-milne\",\n      \"cockatoo---elissa-milne\",\n      \"indigo-moon---elissa-milne\",\n      \"deadline---elissa-milne\",\n    ],\n    genre: \"Teacher Music\",\n    country: \"Australia\",\n    composerBirthYear: 1967,\n  },\n  {\n    slug: \"chris_zabriskie\",\n    midis: [\"preludes-by-chris-zabriskie-full-album\"],\n  },\n  {\n    slug: \"pam_wedgwood\",\n    midis: [\n      \"hungarian-stomp---pam-wedgwood-hungarian-stomp\",\n      \"the-detective---pam-wedgwood\",\n      \"ragamuffin-by-pamela-wedgwood-for-brass-quintet\",\n    ],\n    composerBirthYear: 1947,\n    genre: \"Teacher Music\",\n    country: \"UK\",\n  },\n  {\n    slug: \"big_maceo_merriweather\",\n    midis: [\"chicago-breakup\"],\n    composerBirthYear: 1905,\n    genre: \"Chicago Blues\",\n    country: \"USA\",\n  },\n  {\n    // also https://musescore.com/sheetmusic?text=%D1%82%D0%B0%D0%BD%D0%B3%D0%BE&type=non-official\n    // also https://musescore.com/sheetmusic?text=%E3%82%BF%E3%83%B3%E3%82%B4&type=non-official\n    // also https://musescore.com/sheetmusic?text=%E6%8E%A2%E6%88%88&type=non-official\n    slug: \"tango\",\n    midis: [\n      \"la-cumparsita\",\n      \"sankarin-tango-finnish-tango---petri-alanko-and-martti-suosalo\",\n      \"tango---traditionnel-paraguayen\",\n      \"catherine-s-tango---dustin-o-halloran\",\n      \"mi-noche-triste-tango---castriota-arr.-domingo-prat\",\n\n      \"spanish-tango\",\n      \"tango-to-evora\",\n      \"a-la-gran-muneca---tango\",\n      \"tango-ndeg3-op.50---jose-ferrer-y-esteve-1835---1916\", // ideal V/bIII\n      \"happy-birthday-tango\",\n      \"to-ostatnia-niedziela-last-sunday---polish-tango\",\n      \"ojos-negros-tango-by-vicente-greco\", // V-I compared to parallel V-i\n      \"shovel-knight-plague-of-shadows---tango-of-the-troupple-king\",\n      \"tango-habanera-vers-1925-by-ernesto-nazareth\",\n      \"ole-guapa-by-a.malando\",\n\n      \"saladillo-tango-pour-piano-de-vicente-greco-1888-1924\",\n      \"escorregando---tango-brasileiro\",\n      \"tango---isaac-albeniz\",\n      \"tango-flamenco---luis-de-soria-1851---1935\", // pure major\n\n      \"lagrima---tango---joao-teixeira-guimaraes-1883---1947\",\n      \"moon-tango---r.-clayderman\",\n      \"assassin-s_tango\",\n      \"tango-for-piano\",\n      \"tango-of-the-roses\",\n\n      \"carioca-1913\",\n      \"tango-el-choclo---angel-gregorio-villoldo\",\n      \"tango-por-una-cabeza\",\n      \"the-masochism-tango---tom-lehrer-the-masochism-tango---tom-lehrer-the-masochism-tango\",\n\n      \"tango-jealousy---jacob-gade\",\n      \"beleet-moy-parus-a.-mironov---gennadiy-gladkov\",\n      \"chicago---cell-block-tango---misc-soundtrack\",\n\n      \"tango-de-la-muerte\",\n      \"tango-pour-claude---richard-galliano\",\n      \"tango-from-schnittke-s-concerto-grosso-1\",\n\n      // el tango de roxanne\n      \"tango-lyubvi\",\n\n      \"malena---tango\", // exercise\n      \"tango-la-cumparsita---piano-solo-tutorial-parte-a\",\n      \"tango-till-you-drop-abrsm-grade-5-saxophone-b-3\", // melody for harmonization\n      \"Habanera_-_Piano_Solo_-_Georges_Bizet\",\n      \"tango-lyubvi\",\n      \"tango-do-k-f-12-stulev---o.-zacepin\",\n      \"underground_tango_goran_bregovic_string_quartet\",\n\n      \"satumaa-fairytale-land-volshebnaya-strana\",\n      \"punatukkaiselle-tytolleni\",\n    ],\n  },\n  {\n    slug: \"charles_ancliffe\",\n    midis: [\n      \"the-valley-of-poppies---charles-ancliffe\",\n      \"nights-of-gladness---charles-ancliffe-1912\",\n    ],\n  },\n  {\n    slug: \"astor_piazzolla\",\n    midis: [\n      \"piazzolla_histoire_du_tango_bordel_1900\",\n      \"piazzolla_histoire_du_tango_cafe_1930\",\n      \"piazzolla_histoire_du_tango_nightclub_1960\",\n      \"piazzolla_histoire_du_tango_concert_aujourdhui\",\n      \"astor-piazzolla---prologue-tango-apasionado\",\n      \"astor-piazzolla-adios-nonino-tango\",\n      \"street-tango-for-clarinet-and-piano\",\n      \"triunfal-tango-by-astor-piazzolla-in-edition-for-classical-guitar-from-victor-villadangos\",\n      \"calambre-tango-piazzolla\",\n      \"libertango\",\n    ],\n  },\n  {\n    slug: \"musette\",\n    midis: [\"sous-le-ciel-de-paris\", \"la-vie-en-rose-solo-accordion\"],\n  },\n  {\n    slug: \"klezmer\",\n    midis: [\n      \"odessa-bulgar-no.3\",\n      \"der-heyser-bulgar---misc-tunes-der-heyser-bulgar\",\n      \"freylekhe-mekhutonim\",\n      \"shloymke-s_freylekhs\",\n      \"freylekhs-2\",\n      \"freylekh-de-reconciliation\",\n      \"odessa-bulgarish-new-york-psycho-freylekhs\",\n      \"mr-zvonsky-s-freylekhs\",\n      \"freylekh-zain---frohlich-sein\",\n      \"lebedikh-un-freylekh---trad.-klezmer-for-flute-clarinet\",\n      \"varshaver-freylekhs-klezmer-tune\",\n      \"hava-nagila\",\n    ],\n  },\n  {\n    slug: \"fado\",\n    midis: [\n      \"fado-da-mouraria---anonimo\",\n      \"lisboa-antiga---fado-marcha---raul-portela\",\n      \"fado---alfredo-mantua\",\n      \"fado-dos-passarinhos---antonio-menano\",\n      \"fado---maria-se-fores-ao-baile\",\n      \"fado-bohemio---reinaldo-varella\",\n      \"fado-menina-e-moca\",\n      \"fado---villa-franca-4-piano\",\n      \"fado-saudade---adelino-d-almeida-couto\",\n      \"fado-nacional---anonimo\",\n      \"amor-eterno---l.-serra-e-moura\",\n      \"fado-de-monchique---alberto-de-vasconcelos-moraes\",\n      \"fado-portugues\",\n      \"fado-freo\",\n      \"fado-monte-estoril---reynaldo-varella\",\n      \"meu-fado-meu---mariza-meu-fado-meu\",\n      \"fado-lisboa---raul-ferrao\",\n      \"fado-de-coimbra---anonimo\",\n      \"fado---helena-rolim-g.-barba\",\n      \"fado---rosinha-dos-limoes-4-piano\",\n      \"fado---cancao-do-mar-solidao---recorder\",\n    ],\n  },\n  {\n    slug: \"bach_chorales\",\n    midis: [\n      \"ach-bleib-bei-uns-herr-jesu-christ\",\n      \"ach-bleib-bei-uns-herr-jesu-christ---j.-s.-bach---german-phrasing\",\n      \"ach-gott-erhor-mein-seufzen-bwv-254-and-original-setting\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque, Sacred\",\n    style: \"Choral, Sacred Music\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"heitor_villa-lobos\",\n    midis: [\"heitor-villa-lobos-prelude-no-1\", \"choros-ndeg1-h.-villa-lobos\"],\n    composerBirthYear: 1887, // Heitor Villa-Lobos\n    genre: \"Classical, Brazilian Music\",\n    style: \"Choro, Modern Classical\",\n    country: \"Brazil\", // Villa-Lobos was Brazilian.\n  },\n  {\n    slug: \"peter_mcconnell\",\n    midis: [\n      \"plants-vs-zombies-2-modern-day-piano-transcription\",\n      \"heartstone-pull-up-a-chair-piano\",\n      \"pvz2-ancient-egypt\",\n      \"pvz2-modern-day---ultimate-battle---peter-mcconnell\",\n      \"wild-west-main-theme\",\n      \"wip-plants-vs-zombies-garden-warfare-2---infinity-time-ost-only-piano---peter-mcconnell\",\n      \"neon-mixtape-tour---choose-your-seeds\",\n      \"swanky-maximo---grim-fandango\",\n      \"plants-vs-zombies-2-ballad-jam\",\n    ],\n    composerBirthYear: 1969, // Peter McConnell\n    genre: \"Video Game Music, Film Score\",\n    style: \"Orchestral, Cinematic, Jazz\",\n    country: \"USA\", // Peter McConnell is American.\n  },\n  {\n    slug: \"ari_pulkkinen\",\n    midis: [\n      \"angry-birds-theme---ari-pulkkinen-angry-birds-theme\",\n      \"throne-of-the-lost-king-trine-ost\",\n      \"waltz-of-the-temple-forest-elves-trine-2-soundtrack\",\n      \"trine-4-moonlit-forest\",\n      \"brambelstoke-village---trine---ari-pulkkinen\",\n      \"academy-hallways\",\n    ],\n    composerBirthYear: 1976, // Ari Pulkkinen\n    genre: \"Video Game Music\",\n    style: \"Cinematic, Orchestral, Electronic\",\n    country: \"Finland\", // Ari Pulkkinen is Finnish.\n  },\n  {\n    slug: \"masayoshi_soken\",\n    midis: [\n      \"each-drop-flow-piano-arrangement-ffxiv-endwalker---masayoshi-soken\",\n      \"finality-ffxiv-endwalker-dungeon-final-boss-theme---masayoshi-soken-ffxiv-endwalker---dungeon-final-boss-theme---masayoshi-soken\",\n    ],\n    composerBirthYear: 1976, // Masayoshi Soken\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Rock, Cinematic\",\n    country: \"Japan\", // Masayoshi Soken is Japanese.\n  },\n  {\n    slug: \"masashi_hamauzu\",\n    midis: [\n      \"besaid-island-final-fantasy-x-piano-collection---masashi-hamauzu\",\n      \"wish---masashi-hamauzu-final-fantasy-xiii-2-piano\",\n    ],\n    composerBirthYear: 1971, // Masashi Hamauzu\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Piano, Cinematic\",\n    country: \"Japan\", // Masashi Hamauzu is Japanese.\n  },\n  {\n    slug: \"nobuo_uematsu\",\n    midis: [\n      \"final-fantasy-i-matoya-s-cave---nobuo-uematsu\",\n      \"final-fantasy-prelude---nobuo-uematsu\",\n      \"ffiv-theme-of-love-piano-collections-by-nobuo-uematsu\",\n      \"dragonsong---nobuo-uematsu-advanced-solo-piano\",\n      \"super-smash-bros.-brawl-main-theme-piano-transcription\",\n      \"dou-uzhe-da-fighting-those-who-fight---final-fantasy-vii-ps1---nobuo-uematsu\",\n    ],\n    composerBirthYear: 1959, // Nobuo Uematsu\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Rock, Cinematic\",\n    country: \"Japan\", // Nobuo Uematsu is Japanese.\n  },\n  {\n    slug: \"elgar\",\n    midis: [\n      \"elgar_cello_concerto_1_adagio_moderato\",\n      \"salut-d-amour-op.12---edward-elgar\",\n      \"elgar---enigma-variations---xi.-nimrod\",\n      \"elgar-pomp-and-circumstance-march-no.-1-piano-solo-with-choral-finale\",\n    ],\n    composerBirthYear: 1857, // Edward Elgar\n    genre: \"Classical\",\n    style: \"Romantic, Orchestral\",\n    country: \"United Kingdom\", // Edward Elgar was British.\n  },\n\n  {\n    slug: \"toshio_kai\",\n    midis: [\"pacman\"],\n    composerBirthYear: 1943,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"masato_nakamura\",\n    midis: [\n      \"marble-zone-from-sonic-the-hedgehog\",\n      \"arrangement-special-stage-sonic-the-hedgehog---masato-nakamura\",\n      \"starlight-zone---sonic-the-hedgehog-1---masato-nakamura-sth-6-starlight-zone\",\n      \"sonic-the-hedgehog-2---chemical-plant-zone\",\n    ],\n    composerBirthYear: 1958,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"kotaro_nakagawa\",\n    midis: [\"the-master---code-geass\"],\n    composerBirthYear: 1969, // Kotaro Nakagawa\n    genre: \"Anime Music, Video Game Music\",\n    style: \"Orchestral, Electronic, Cinematic\",\n    country: \"Japan\", // Kotaro Nakagawa is Japanese.\n  },\n  {\n    slug: \"mike_morasky\",\n    midis: [\n      \"your-precious-moon---mike-morasky-wheatley-boss-fight-ending\",\n      \"thirty-seven-after-six\",\n      \"team-fortress---upgrade-station-piano---mike-morasky\",\n      \"rocket-jump-waltz-piano-solo\",\n      \"cara-mia-addio---full-piano-cover\",\n      \"soldier-of-dance\",\n      \"team-fortress---rise-of-the-living-bread---mike-morasky\",\n      \"team-fortress-2-main-theme---mike-morasky-team-fortress-2-piano-solo\", // blues scale\n      \"saxton-s-dilemma-sax-quartet---mike-morasky\",\n      \"machiavellian-bach\",\n      \"the-parish---mike-morasky\",\n      \"tf2---mannrobics---piano\",\n      \"counter-strike-2---main-menu-theme---mike-morasky-counter-strike-2---main-menu-theme-for-solo-piano\",\n      \"music-of-the-spheres\", // augmented vibes\n      \"half-life-alyx---ending-triumph\",\n      \"you-are-not-part-of-the-control-group\",\n      \"the-calm---valve-for-brass-quintet\",\n      \"medic\",\n      \"misfortune-teller---valve-studio-orchestra-.\",\n    ],\n    composerBirthYear: 1974, // Mike Morasky\n    genre: \"Video Game Music\",\n    style: \"Electronic, Cinematic, Experimental\",\n    country: \"USA\", // Mike Morasky is American.\n  },\n  {\n    slug: \"bach_misc\",\n    midis: [\n      \"bach-goldberg-variation-00-aria\",\n      \"bwv0565-toccata-and-fugue-in-dm-c\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque\",\n    style: \"Keyboard, Organ Music\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"olafur_arnalds\",\n    midis: [\n      \"saman---olafur-arnalds\",\n      \"happiness-does-not-wait---olafur-arnalds\",\n      \"olafur-arnalds---tomorrow-s-song\",\n      \"olafur-arnalds---raein\",\n      \"erla-s-waltz-olafur-arnalds\",\n    ],\n    composerBirthYear: 1986, // lafur Arnalds\n    genre: \"Classical, Electronic\",\n    style: \"Modern Classical, Ambient, Minimalism\",\n    country: \"Iceland\", // lafur Arnalds is Icelandic.\n  },\n  {\n    slug: \"bach_wtc\",\n    midis: [\n      \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\",\n      \"prelude-no.-2-bwv-847-in-c-minor\",\n      \"prelude-no.-3-bwv-848-in-c-major\", // very regular\n      \"prelude-no.-4-bwv-849-in-c-minor\",\n      \"prelude-no.-5-bwv-850-in-d-major\",\n      \"prelude-no.-6-bwv-851-in-d-minor\",\n      \"prelude-no.-7-bwv-852-in-e-major\",\n      \"prelude-no.-8-bwv-853-in-e-minor\",\n      \"prelude-no.-9-bwv-854-in-e-major\",\n      \"prelude-no.-10-bwv-855-in-e-minor\",\n      \"prelude-no.-11-bwv-856-in-f-major\", // decent\n      \"prelude-no.-12-bwv-857-in-f-minor\",\n      \"prelude-no.-13-bwv-858-in-f-major\",\n      \"prelude-no.-14-bwv-859-in-f-minor\",\n      \"prelude-no.-15-bwv-860-in-g-major\",\n      \"prelude-no.-16-bwv-861-in-g-minor\",\n      \"prelude-no.-17-bwv-862-in-a-major\",\n      \"prelude-no.-18-bwv-863-in-g-minor\",\n      \"prelude-no.-19-bwv-864-in-a-major\",\n      \"prelude-no.-20-bwv-865-in-a-minor\",\n      \"prelude-no.-21-bwv-866-in-b-major\",\n      \"prelude-no.-22-bwv-867-in-b-minor\",\n      \"prelude-no.-23-bwv-868-in-b-major\",\n      \"prelude-no.-24-bwv-869-in-b-minor\",\n      \"prelude-no.-1-bwv-870-in-c-major\",\n      \"prelude-no.-2-bwv-871-in-c-minor\",\n      \"prelude-no.-3-bwv-872-in-c-major\",\n      \"prelude-no.-4-bwv-873-in-c-minor\",\n      \"fugue-no.-3-bwv-848-in-c-major\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque\",\n    style: \"Fugue, Prelude, Keyboard Music\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"bach_french_suite_no2\",\n    midis: [\n      \"j.-s.-bach---sarabande-from-french-suite-no2-bwv-813\",\n      \"bach-allemande-bwv-813-french-suite-ii\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque\",\n    style: \"Keyboard Suite\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"lucrecia_roces_kasilag\",\n    midis: [\n      \"fantasia---lucrecia-roces-kasilag\",\n      \"prelude-etnika---piano-transcription\",\n      \"luwalhati---lucrecia-r.-kasilag\",\n    ],\n    composerBirthYear: 1918, // Lucrecia R. Kasilag\n    genre: \"Filipino Music, Classical\",\n    style: \"Folk, Ethno-Classical\",\n    country: \"Philippines\", // Lucrecia Kasilag was Filipino.\n  },\n  {\n    slug: \"sibelius\",\n    midis: [\"sydameni_laulu\", \"jean-sibelius---etude-op.-76-n.2\"],\n    composerBirthYear: 1865, // Jean Sibelius\n    genre: \"Classical\",\n    style: \"Romantic, Orchestral\",\n    country: \"Finland\", // Sibelius was Finnish.\n  },\n  {\n    slug: \"ernesto_lecuona\",\n    midis: [\n      \"danza-lucumi---e.-lecuona-original\",\n      \"la-comparsa---ernesto-lecuona\",\n      \"siboney---ernesto-lecuona\",\n      \"andalucia---ernesto-lecuona\",\n      \"malaguena---ernesto-lecuona\",\n      \"gitanerias\",\n    ],\n    composerBirthYear: 1895, // Ernesto Lecuona\n    genre: \"Cuban, Classical\",\n    style: \"Cuban Dances, Classical, Latin\",\n    country: \"Cuba\", // Ernesto Lecuona was Cuban.\n  },\n  {\n    slug: \"shamshi_kaldayakov\",\n    midis: [\n      \"my-kazakhstan\",\n      \"arys-zhagasynda---shamshi-kaldayakov-arys-zhag-asynda---sh-mshi-k-aldayak-ov-red.-ask-ar-lmak-tum\",\n    ],\n    composerBirthYear: 1924, // Shamshi Kaldayakov\n    genre: \"Kazakh, Classical\",\n    style: \"Folk, National Music\",\n    country: \"Kazakhstan\", // Shamshi Kaldayakov was Kazakh.\n  },\n  {\n    slug: \"malaguena\",\n    midis: [\n      \"malaguena---ernesto-lecuona\",\n      \"rumores-de-la-caleta-malaguena-albeniz\",\n      \"ndeg-3---malaguena\",\n      \"nuevo-metodo-pag.-20-malaguena---francisco-cimadevilla\",\n      \"malaguena-nocturna---l-elegiaque-malaguena-nocturna\",\n      \"malaguena-by-azpiazu\",\n      \"malaguena-sarasate\",\n      \"malaguena-salerosa\",\n      \"malaguena-facil\",\n      \"rumores-de-la-caleta-malaguena\",\n    ],\n    composerBirthYear: 1895, // Ernesto Lecuona (primarily) for \"Malaguea\"\n    genre: \"Classical, Latin\",\n    style: \"Cuban, Spanish\",\n    country: \"Cuba\", // Lecuona's version is most well-known.\n  },\n  {\n    slug: \"pablo_de_sarasate\",\n    midis: [\n      \"malaguena-sarasate\",\n      \"a-wanderer-s-song-zigeunerweisen-gypsy-airs-op.20\",\n    ],\n    composerBirthYear: 1844,\n    country: \"Spain\",\n  },\n  {\n    slug: \"vaqif_mustafazadeh\",\n    midis: [\"vaqif_mustafazade_-_dushunce_piano_tutorial\"],\n    composerBirthYear: 1940, // Vaqif Mustafazadeh\n    genre: \"Jazz, Azerbaijani Music\",\n    style: \"Jazz, Mugham Fusion\",\n    country: \"Azerbaijan\", // Vaqif Mustafazadeh was Azerbaijani.\n  },\n  {\n    slug: \"ferdinand_hiller\",\n    midis: [\n      \"reverie---ferdinand-hiller\",\n      \"tagebuch-no.-2---ferdinand-hiller\",\n      \"etude-op.-15-no.-4---ferdinand-hiller\",\n    ],\n    composerBirthYear: 1811, // Ferdinand Hiller\n    genre: \"Classical, Romantic\",\n    style: \"Piano, Orchestral\",\n    country: \"Germany\", // Ferdinand Hiller was German.\n  },\n  {\n    slug: \"ennio_morricone\",\n    midis: [\n      \"ennio-morricone-chi-mai-from-le-professionnel-easy-piano-arr.-by-free-musickey\",\n      \"playing-love---ennio-morricone\",\n      \"deborah-s-theme-~-ennio-morricone\",\n      \"la-califfa-ennio-morricone\",\n      \"gabriel-s-oboe---ennio-morricone\",\n      \"cinema-paradiso-morricone\",\n    ],\n    composerBirthYear: 1928, // Ennio Morricone\n    genre: \"Film Music\",\n    style: \"Cinematic, Orchestral, Soundtrack\",\n    country: \"Italy\", // Ennio Morricone was Italian.\n  }, // 1883\n  {\n    slug: \"charlie_astin\",\n    midis: [\"in-the-gloaming-1883\", \"clide-polka-1883\"],\n  },\n  // 1897, first three annotated, then just preserved\n  {\n    slug: \"theo_a_metz\",\n    midis: [\n      \"a-hot-time-in-the-old-town-1897\",\n      \"fiddling-silas-1899\",\n      \"the-klondike-1897\",\n      \"the-song-they-sang-at-santiago-1898\",\n      \"indian-smoke-dance-1919\",\n      \"walk-baby-walk-1897\",\n      \"omene-1893\",\n      \"give-cinda-the-cake-1898\",\n    ],\n    composerBirthYear: 1856, // Theo A. Metz\n    genre: \"American, Ragtime\",\n    style: \"Ragtime, March\",\n    country: \"USA\", // Theo A. Metz was American.\n  },\n  {\n    slug: \"king_kollins\",\n    midis: [\"the-whizzer-1907\", \"the-twirler-1907\"],\n    composerBirthYear: 1880, // King Kollins\n    genre: \"American, Ragtime\",\n    style: \"Ragtime, Novelty\",\n    country: \"USA\", // King Kollins was American.\n  },\n  { slug: \"los_kjarkas\", midis: [\"llorando-se-fue---los-kjarkas\"] },\n  {\n    slug: \"frank_h_grey\",\n    midis: [\"love-in-venice-1924\", \"valse-des-fleurs-1925\"],\n    composerBirthYear: 1877, // Frank H. Grey\n    genre: \"American, Classical\",\n    style: \"Ragtime, Orchestral\",\n    country: \"USA\", // Frank H. Grey was American.\n  },\n  {\n    slug: \"yamato_kasai\",\n    midis: [\n      \"ender-lilies-quietus-of-the-knights---holy-land-save-ver.\",\n      \"ender-lilies-quietus-of-the-knights---grudge-save-ver.\",\n      \"ender-lilies-quietus-of-the-knights---the-white-witch\",\n      \"the-witch-s-breath---ender-lilies\",\n      \"a-nocturne-for-all---ender-lilies-ost\",\n      \"ephemeral---yamato-kasai---klavier---mili-mag-mell-deemo\",\n    ],\n    composerBirthYear: 1989, // Yamato Kasai\n    genre: \"Video Game Music\",\n    style: \"Symphonic, Piano\",\n    country: \"Japan\", // Yamato Kasai is Japanese.\n  },\n  {\n    slug: \"aj_weidt\",\n    midis: [\n      \"aj_weidt_the_colored_guards\", // two banjos\n      \"aj_weidt_kaloola\",\n      \"memelicanmanrag\",\n    ],\n    composerBirthYear: 1865, // A.J. Weidt\n    genre: \"American, Ragtime\",\n    style: \"Ragtime, Novelty\",\n    country: \"USA\", // A.J. Weidt was American.\n  },\n  {\n    slug: \"scriabin\",\n    midis: [\n      \"24-preludes-op.11-no.1---a.-scriabin\",\n      \"scriabin-vers-la-flamme-op.-72\",\n      \"scriabin-s-nocturne-for-the-left-hand\",\n    ],\n    composerBirthYear: 1872, // Alexander Scriabin\n    genre: \"Russian, Classical\",\n    style: \"Romantic, Modern\",\n    country: \"Russia\", // Alexander Scriabin was Russian.\n  },\n  {\n    slug: \"tadeusz_joteyko\",\n    midis: [\n      \"elegie-op.16-no.1---tadeusz-joteyko\",\n      \"xi.-prelude-des-dur-op.-6-no-5---tadeusz-joteyko\",\n      \"prelude-op.5-no6---tadeusz-joteyko\",\n      \"prelude-op.7-no3---tadeusz-joteyko\",\n    ],\n    composerBirthYear: 1889, // Tadeusz Joteyko\n    genre: \"Polish, Classical\",\n    style: \"Romantic, Piano\",\n    country: \"Poland\", // Tadeusz Joteyko was Polish.\n  },\n  {\n    slug: \"leo_delibes\",\n    midis: [\n      \"valse---coppelia---piano-solo---arr.-leo-delibes\",\n      \"flower-duet-from-lakme-by-leo-delibes-transcription-for-violin-and-piano\",\n      \"messe-breve---leo-delibes-delibes-messe-breve-ssa-kyrie\",\n    ],\n    composerBirthYear: 1836, // Leo Delibes\n    genre: \"French, Classical\",\n    style: \"Opera, Ballet\",\n    country: \"France\", // Leo Delibes was French.\n  },\n  {\n    slug: \"gustave_tritant\",\n    midis: [\n      \"elevation---gustave-tritant\",\n      \"communion-funebre---gustave-tritant\",\n      \"elevation-funebre---gustave-tritant\",\n      \"l-office-pratique-de-l-organiste---gustave-tritant\",\n    ],\n    composerBirthYear: 1860, // Gustave Tritant\n    genre: \"French, Classical\",\n    style: \"Organ Music\",\n    country: \"France\", // Gustave Tritant was French.\n  },\n  {\n    slug: \"mike_schoenmehl\",\n    midis: [\n      \"melancholy-reflections---mike-schoenmehl\",\n      \"criminal-music---mike-schoenmehl\",\n      \"marion-s-walk---mike-schoenmehl\",\n    ],\n    composerBirthYear: 1957,\n    country: \"Germany\",\n    genre: \"Teacher Music\",\n  },\n  {\n    slug: \"cesare_pugni\",\n    midis: [\n      \"la-esmeralda-ballet-variacao---cesare-pugni\",\n      \"coda---cesare-pugni\",\n      \"peasant-pas-de-deux-interpolated-variation---cesare-pugni\",\n      \"la-schottische\",\n      \"le-carnaval-de-venise-pas-de-deux-di-satanella---cesare-pugni---variazione-maschile\",\n    ],\n    composerBirthYear: 1802, // Cesare Pugni\n    genre: \"Italian, Classical\",\n    style: \"Ballet Music\",\n    country: \"Italy\", // Cesare Pugni was Italian.\n  },\n  {\n    slug: \"ahmed_adnan_saygun\",\n    midis: [\n      \"inci---ahmed-adnan-saygun\",\n      \"ayse-m\",\n      \"oyun---ahmed-adnan-saygun\",\n      \"ruya---ahmed-adnan-saygun\",\n      \"masal---ahmed-adnan-saygun\",\n      \"ataturk-marsi---ahmed-adnan-saygun\",\n      \"ninni---ahmed-adnan-saygun\",\n      \"kocaman-bebek---ahmed-adnan-saygun\",\n      \"horon-for-bb-clarinet-and-piano---ahmed-adnan-saygun\",\n      \"afacan-kedi---ahmed-adnan-saygun\",\n    ],\n    composerBirthYear: 1929, // Ahmed Adnan Saygun\n    genre: \"Turkish, Classical\",\n    style: \"Folk Music, Orchestral\",\n    country: \"Turkey\", // Ahmed Adnan Saygun was Turkish.\n  },\n  {\n    slug: \"paul_mauriat\",\n    midis: [\n      \"toccata---paul-mauriat\",\n      \"minuetto\",\n      \"nocturne---paul-mauriat\",\n      \"alouette---paul-mauriat\",\n      \"love-is-blue---paul-mauriat\",\n      \"ballade---paul-mauriat\",\n      \"petite-melodie\",\n    ],\n    composerBirthYear: 1925, // Paul Mauriat\n    genre: \"French, Pop, Classical\",\n    style: \"Easy Listening, Orchestral\",\n    country: \"France\", // Paul Mauriat was French.\n  },\n  {\n    slug: \"happy_birthday\",\n    midis: [\n      \"happy-birthday\",\n      \"happy-birthday-to-you-c-major\",\n      \"happy-birthday-song-in-jazz-arr.-by-jonny-may\",\n      \"happy-birthday-tango\",\n      \"happy-birthday-tango-variation\",\n      \"happy-birthday-to-you---tango-version\",\n      \"birthday-tango\",\n      \"birthday-tango-2\",\n      \"happy-birthday-waltz\",\n      \"happy-birthday-but-it-s-a-bach-chorale\",\n      \"chopin-ish-happy-birthday-to-you\",\n      \"happy-birthday-3-part-vocals\",\n      \"happy-birthday-variations-in-g-minor\",\n      \"happy_birthday_bass_and_chords\",\n      \"Happy_Birthday_to_You\",\n    ],\n    genre: \"Traditional, Folk\",\n    style: \"Birthday Song\",\n    country: \"International\",\n  },\n  {\n    slug: \"scott_joplin\",\n    midis: [\n      \"Maple_Leaf_Rag_Scott_Joplin\",\n      \"gladiolus-rag---scott-joplin---1907\",\n      \"the-cascades---scott-joplin---1904\",\n      \"sugar-cane---scott-joplin---1908\",\n      \"leola-two-step---scott-joplin---1905\",\n      \"the-sycamore---scott-joplin---1904\",\n      \"silver-swan-rag---scott-joplin---1914---transcribed-by-richard-zimmerman\",\n      \"elite-syncopations---scott-joplin---1902\",\n      \"weeping-willow---scott-joplin---1903\",\n      \"country_club_ragtime_two_step_scott_joplin_1909\",\n      \"the_ragtime_dance_scott_joplin_1906_arrangement\",\n      \"Pine_Apple_Rag_-_Scott_Joplin_-_1908.mscz\",\n      \"the_entertainer_scott_joplin\",\n      \"sunflower-slow-drag---joplin-and-hayden---1901\",\n      \"reflection-rag---scott-joplin---1917\",\n      \"rose-leaf-rag---scott-joplin---1907\",\n      \"palm-leaf-rag---scott-joplin---1903\",\n      \"search-light-rag---scott-joplin---c1907\",\n      \"the-strenuous-life---scott-joplin---1902\",\n      \"wall-street-rag---scott-joplin---1909\",\n      \"peacherine-rag---scott-joplin---1901\",\n      \"fig-leaf-rag---scott-joplin---1908\",\n      \"magnetic-rag---scott-joplin---1914\",\n      \"original-rags---scott-joplin---1899\",\n      \"paragon-rag---scott-joplin---1909\",\n      \"the-nonpareil---scott-joplin---1907\",\n      \"the-chrysanthemum---scott-joplin---1904\",\n      \"euphonic-sounds---scott-joplin---1909\",\n      \"scott-joplin-s-new-rag---original-edition---1912\",\n      \"scott-joplin-s-new-rag---revised-edition---c1914\",\n      \"kismet-rag---joplin-and-hayden---1913\",\n      \"felicity-rag---joplin-and-hayden---1911\",\n      \"swipesy-cakewalk-1900\",\n      \"the-easy-winners---scott-joplin---1901\",\n      \"cleopha---scott-joplin---1902\",\n      \"a-breeze-from-alabama---scott-joplin---1902\",\n      \"something-doing---joplin-and-hayden---1903\",\n      \"the-favorite---scott-joplin---1904\",\n      \"pleasant-moments---scott-joplin---1909\",\n      \"heliotrope-bouquet---joplin-and-chauvin---1907\",\n      \"lily-queen---joplin-marshall---1907\",\n      \"eugenia---scott-joplin---1905-6\",\n      \"stoptime-rag---scott-joplin---1910\",\n      \"the-rose-bud-march---scott-joplin---1905\",\n      \"antoinette---scott-joplin---1906\",\n      \"a-real-slow-drag---scott-joplin---1913\",\n      \"march-majestic---scott-joplin---1902\",\n      \"school-of-ragtime---scott-joplin---1908\",\n      \"maple_starts\",\n    ],\n    composerBirthYear: 1868, // Scott Joplin\n    genre: \"American, Ragtime\",\n    style: \"Ragtime\",\n    country: \"USA\", // Scott Joplin was American.\n  },\n  {\n    slug: \"leo_weiner\",\n    midis: [\n      \"fox-dance---leo-weiner\",\n      \"weiner-leo---esik-az-eso\",\n      \"magyar-nepdal---ungarischer-volkslieder---repulj-madar---weiner-leo\",\n    ],\n    composerBirthYear: 1885, // Leo Weiner\n    genre: \"Hungarian, Classical\",\n    style: \"Folk Music, Orchestral\",\n    country: \"Hungary\", // Leo Weiner was Hungarian.\n  },\n  {\n    slug: \"gershwin_songbook\",\n    midis: [\n      \"gershwin_swanee\",\n      \"swanee_gershwin\",\n      \"oh-lady-be-good---george-gershwin-1924-public-domain-piano-voice-sheet-music-arrangement\",\n      \"oh-_lady_be_good_gershwin\",\n      \"piano-i-ll-build-a-stairway-to-paradise\",\n      \"stairway-to-paradise-lead-sheet-with-verse-and-lyrics\",\n      \"i-ll_build_a_stairway_to_paradise_roll\",\n      \"i-ll_build_a_stairway_to_paradise_gershwin\",\n      \"fascinating-rhythm---george-gershwin-ira-gershwin-1924-piano-vocal-arrangement\",\n      \"fascinating_rhythm_gershwin\",\n      \"do-it-again---george-gershwin-buddy-desylva\",\n      \"do_it_again_gershwin\",\n      \"the-man-i-love---george-gershwin-ira-gershwin-1924-piano-vocal-arrangement\",\n      \"the_man_i_love_gershwin\",\n      \"s_wonderful_gershwin\",\n      \"clap_yo-_hands\",\n      \"do-do-do_gershwin\",\n      \"i_got_rhythm_gershwin\",\n      \"liza_gershwin\",\n      \"my_one_and_only_roll\",\n      \"nobody_but_you_sustain\",\n      \"somebody_loves_me_gershwin\",\n      \"strike_up_the_band_gershwin\",\n      \"sweet_and_low_down_gershwin\",\n      \"that-certain-feeling---george-gershwin\",\n      \"that_certain_feeling_gershwin\",\n      \"who_cares_as_long_as_you_care_for_me_gershwin\",\n    ],\n    composerBirthYear: 1898, // George Gershwin\n    genre: \"American, Jazz, Classical\",\n    style: \"Jazz, Musical Theatre\",\n    country: \"USA\", // George Gershwin was American.\n  },\n  {\n    slug: \"hector_ayala\",\n    midis: [\n      \"el-coyuyo---hector-ayala\",\n      \"luna-y-sol---hector-ayala-luna-y-sol\",\n      \"celeste-y-blanco---hector-ayala\",\n    ],\n    composerBirthYear: 1913,\n    genre: \"Guitar\",\n    country: \"Argentina\",\n  },\n  {\n    slug: \"leo_brouwer\",\n    midis: [\n      \"un-dia-de-noviembre---leo-brouwer\",\n      \"berceuse---leo-brouwer\",\n      \"brouwer-etude-simple-vi\",\n      \"brouwer-leo-etudes-simples-no-02-coral\",\n    ],\n    composerBirthYear: 1939,\n    genre: \"Guitar, Classical, Folk, Aleatoric, Atonal\",\n    country: \"Cuba, USA\",\n  },\n  {\n    slug: \"jack_wall\",\n    midis: [\n      \"ends-justify-the-means---jack-wall-transcribed-by-christian-smith\",\n      \"mass-effect-2-suicide-mission-end-run\",\n      \"savimbi-s-pride\",\n      \"adrenaline-call-of-duty-black-ops-ii-organ-cover\",\n    ],\n    composerBirthYear: 1963,\n    genre: \"Video Game Music\",\n    style: \"Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"fats_waller\",\n    midis: [\n      \"asbestos---fats-waller---c1930\",\n      \"alligator-crawl---fats-waller---1934\",\n      \"handful-of-keys---fats-waller---1933\",\n    ],\n    composerBirthYear: 1904, // Fats Waller\n    genre: \"American, Jazz\",\n    style: \"Stride Piano\",\n    country: \"USA\", // Fats Waller was American.\n  },\n  {\n    slug: \"gershwin\",\n    midis: [\n      \"gershwin_prelude_1\",\n      \"gershwin_prelude_2\",\n      \"gershwin_prelude_3\",\n      \"Gershwin_Rhapsody_in_Blue_Piano_solo\",\n    ],\n    genre: \"American, Classical\",\n    style: \"Jazz, Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"toru_minegishi\",\n    midis: [\n      \"kakariko-is-saved---the-legend-of-zelda-twilight-princess---toru-minegishi\",\n      \"results-low-ranking---wii-fit---toru-minegishi-manaka-tominaga-shiho-fujii\",\n      \"k.k.-bossa---animal-crossing-ost\",\n      \"k.k.-dirge---toru-minegishi\",\n      \"k.k.-salsa---toru-minegishi\",\n      \"k.k.-condor---toru-minegishi\",\n    ],\n    composerBirthYear: 1975,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"minecraft_c418\",\n    midis: [\n      \"minecraft---dead-voxel\",\n      \"beginning-minecraft\",\n      \"aria-math---c418-from-minecraft\",\n      \"minecraft-calm\",\n      \"c418---cat-from-minecraft---volume-alpha\",\n      \"clark-minecraft\",\n      \"moog-city-minecraft\",\n      \"danny-minecraft\",\n      \"living-mice-minecraft\",\n      \"alpha-full---minecraft-credits-end-poem\",\n      \"dry-hands-minecraft\",\n      \"haggstrom-minecraft\",\n      \"minecraft-title\",\n      \"mice-on-venus-minecraft\",\n      \"subwoofer-lullaby-minecraft\",\n      \"Sweden_Minecraft\",\n      \"Wet_Hands_Minecraft\",\n    ],\n    composerBirthYear: 1981, // Daniel Rosenfeld (C418)\n    genre: \"Video game music\",\n    style: \"Ambient, Electronic\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"tom_lehrer\",\n    midis: [\n      \"the-elements---tom-lehrer\",\n      \"the-masochism-tango---tom-lehrer-the-masochism-tango---tom-lehrer-the-masochism-tango\",\n      \"tom_lehrer_i_got_it_from_agnes\",\n      \"poisoning-pigeons-in-the-park---tom-lehrer\",\n      \"wernher-von-braun---tom-lehrer---tom-lehrer\",\n      \"the-wild-west-is-where-i-want-to-be---tom-lehrer\",\n      \"be-prepared---tom-lehrer\",\n      \"tom-lehrer---new-math-music\",\n      \"fight-fiercely-harvard---tom-lehrer\",\n      \"the-old-dope-peddler---tom-lehrer\",\n      \"i-hold-your-hand-in-mine---tom-lehrer-i-hold-your-hand-in-mine\",\n      \"vatican-rag\",\n      \"i-wanna-go-back-to-dixie---tom-lehrer\",\n      \"a-christmas-carol---tom-lehrer-a-christmas-carol\",\n      \"national-brotherhood-week\",\n      \"my-home-town---tom-lehrer\",\n      \"te-amo---tom-lehrer\",\n      \"whos-next---tom-lehrer\",\n      \"there-s-a-delta-for-every-epsilon---tom-lehrer\",\n      \"hanukah-in-santa-monica---tom-lehrer\",\n      \"so-long-mom----tom-lehrer\",\n      \"we-will-all-go-together-when-we-go---tom-lehrer\", //corrupt?\n      \"the-subway-song---tom-lehrer\", // 1915, Theodore Morse!\n    ],\n    composerBirthYear: 1928, // Tom Lehrer\n    genre: \"Comedy, Musical\",\n    style: \"Satirical, Parody\",\n    country: \"USA\",\n  },\n  {\n    // todo: link \"ragtime treasures\" together\n    slug: \"joseph_lamb\",\n    midis: [\n      \"the-alaskan-rag---joseph-f-lamb\",\n      \"paramount-rag\",\n      \"thoroughbred-rag-c-1960\",\n      \"toad-stool-rag-c-1959\",\n      \"chimes-of-dixie-c-1960\",\n      \"cinders\",\n    ],\n    composerBirthYear: 1887, // Joseph Lamb\n    genre: \"Ragtime\",\n    style: \"Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ted_snyder\",\n    midis: [\"the-sheik-of-araby-arr.-zez-confrey\"],\n    composerBirthYear: 1881, // Ted Snyder\n    genre: \"Jazz, Popular music\",\n    style: \"Ragtime, Early Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"nicholas_britell\",\n    midis: [\n      \"succession-main-theme\",\n      \"i-m-cruella---nicholas-britell\",\n      \"succession-scherzo-in-f-minor---nicholas-britell\",\n      \"don-t-look-up---main-title-theme---nicholas-britell\",\n      \"the-baroque-ball---nicholas-britell\",\n    ],\n    composerBirthYear: 1980, // Nicholas Britell\n    genre: \"Film score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  { slug: \"claude_bolling\", midis: [] },\n  {\n    slug: \"julius_schulhoff\",\n    midis: [\"piano-sonata-in-f-minor-opus-37-1st-movement---julius-schulhoff\"],\n  },\n  {\n    slug: \"alex_thorn\",\n    midis: [\n      \"piano-serenade-in-a-flat\",\n      \"as-bold-as-brass-a-very-british-march-for-piano\",\n      \"baroque-harpsichord\",\n      \"cryin-in-the-rain-piano-solo\",\n    ],\n    composerBirthYear: 1984, // Alex Thorn\n    genre: \"Classical, Film score\",\n    style: \"Classical, Baroque\",\n    country: \"USA\",\n  },\n  {\n    slug: \"bts\",\n    midis: [\n      \"bts-bangtansonyeondan---i-need-u-suga-piano-full-solo\",\n      \"bts-jungkook-bangtansonyeondan-jeonggug---still-with-you\",\n      \"bts-bangtansonyeondan---fake-love\",\n      \"spring-day---bts\",\n      \"the-truth-untold---bts\",\n      \"bts-bangtansonyeondan---dynamite-piano-version\",\n    ],\n    composerBirthYear: 1993, // BTS Members (group)\n    genre: \"Pop, K-pop\",\n    style: \"Pop, Dance, R&B\",\n    country: \"South Korea\",\n  },\n  {\n    slug: \"homm\",\n    midis: [\n      \"heroes-of-might-and-magic-2--sorceress-town---paul-anthony-romero\",\n      \"heroes-of-might-and-magic-iii---main-menu-theme\",\n      \"heroes-of-might-and-magic-iii----waiting-theme\",\n      \"heroes-of-might-and-magic-3---necropolis-town-theme\",\n      \"heroes-of-might-magic-iii---tower-town-theme\",\n      \"inferno-theme-by-paul-romero-from-heroes-of-might-and-magic-3\",\n      \"heroes-of-might-magic-iii---fortress-town-theme\",\n      \"heroes-of-might-and-magic-iii---castle-town-theme\",\n      \"dirt-theme-hope---heroes-of-might-and-magic-iv---celtic-harp\",\n      \"academy-order-theme---heroes-and-might-and-magic-iv\",\n      \"haven-theme-piano-form-heroes-of-might-and-magic-v\",\n      \"heroes-of-might-and-magic-vi-unknown-title\",\n    ],\n    composerBirthYear: 1965, // Paul Anthony Romero\n    genre: \"Video game music\",\n    style: \"Symphonic, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"kenji_ito\",\n    midis: [\n      \"si-dou-noguo-teni-struggle-to-the-death---saga-2-mi-bao-chuan-shuo-final-fantasy-legend-ii-gb---kenji-ito\",\n      \"opuningutaitoru-title-screen-romansingu-saga2-romancing-saga2-snes---kenji-ito\",\n    ],\n    composerBirthYear: 1968,\n    country: \"Japan\",\n    genre: \"Video game music\",\n  },\n  {\n    slug: \"kenji_kawai\",\n    midis: [\n      \"yun-ming-noye--piano-ver.----kenji-kawai\",\n      \"go-go-reigen-gogoling-huan---kenji-kawai-mp100\",\n      \"life-before-war---kenji-kawai---sad-song---apocalypse-the-second-world-war-soundtrack\",\n    ],\n    composerBirthYear: 1957,\n    genre: \"Anime, TV, Film score, Video game music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"alan_menken_beauty_and_the_beast\",\n    midis: [\n      \"beauty-and-the-beast-prologue\",\n      \"evermore---alan-menken-evermore-from-beauty-and-the-beast---alan-menken-piano-voice\",\n      \"something-there\",\n      \"if-i-can-t-love-her\",\n      \"belle\",\n      \"gaston\",\n      \"tale-as-old-as-time---beauty-and-the-beast---alan-menken---piano-solo\",\n    ],\n    composerBirthYear: 1949, // Alan Menken\n    genre: \"Film Score, Musical\",\n    style: \"Orchestral, Broadway\",\n    country: \"USA\",\n  },\n  {\n    slug: \"alan_menken\",\n    midis: [\"i-see-the-light-from-disney-s-tangled\"],\n    composerBirthYear: 1949, // Alan Menken\n    genre: \"Film score, Musical\",\n    style: \"Orchestral, Broadway\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ravel\",\n    midis: [\n      \"pavane_pour_une_infante_defunte_ravel_recorder\",\n      \"ravel---miroirs-iii.-une-barque-sur-l-ocean\",\n\n      \"ma-mere-l-oye-m.-60-i.-pavane-de-la-belle-au-bois-dormant---maurice-ravel\",\n    ],\n    composerBirthYear: 1875, // Maurice Ravel\n    genre: \"Classical\",\n    style: \"Impressionist\",\n    country: \"France\",\n  },\n  {\n    slug: \"masakazu_sugimori\",\n    midis: [\n      \"reminiscence-~-dl-6-incident---masakazu-sugimori-phoenix-wright-ace-attorney\",\n      \"ace-attorney-turnabout-sisters-ballad---masakazu-sugimori\",\n    ],\n    composerBirthYear: 1968, // Masakazu Sugimori\n    genre: \"Video game music\",\n    style: \"Orchestral, Piano\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"tokyo_ghoul\",\n    midis: [\n      \"unravel-acoustic-ver-tokyo-ghoul-theishter-sheet-music-full-sheets\",\n      \"tokyo-ghoul---glassy-sky-theishter-edit\",\n      \"tokyo-ghoul-a-kisetsu-wa-tsugitsugi-shindeiku\",\n      \"tokyo-ghoul---licht-und-schatten-akmigone-transcription\",\n      \"tokyo-ghoul-a-ost---wanderers\",\n      \"schmetterling---tokyo-ghoul-re-ep-7-bgm\",\n      \"tokyo-ghoul-re-op--katharsis\",\n      \"asphyxia---tokyo-ghoul-re-op\",\n    ],\n    composerBirthYear: 1989, // Yutaka Yamada\n    genre: \"Anime, Video game music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"alan_silvestri\",\n    midis: [\n      \"the-avengers-theme---piano\",\n      \"forest-gump---main-title-feather-theme\",\n      \"back-to-the-future-theme-song\",\n    ],\n    composerBirthYear: 1950,\n    genre: \"Film score, TV music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"karol_kurpinski\",\n    midis: [\n      \"polonaise-in-f-minor---karol-kurpinski\",\n      \"kurpinski-polonaise-in-a-major-polonez-a-dur\",\n    ],\n    composerBirthYear: 1785,\n  },\n  {\n    slug: \"wojciech_kilar\",\n    midis: [\n      \"wojciech-kilar-walc-z-filmu-tredowata-waltz-from-the-film-the-leper\",\n      \"polonaise-from-movie-master-thaddeus---wojciech-kilar\",\n    ],\n    composerBirthYear: 1932,\n    genre: \"Film score\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"deltarune\",\n    midis: [\n      \"deltarune-chapter-2-ost-toby-fox---my-castle-town-piano-solo\",\n      \"attack-of-the-killer-queen---deltarune-chapter-2\",\n    ],\n    composerBirthYear: 1991, // Toby Fox\n    genre: \"Video game music\",\n    style: \"Chiptune, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"mieczyslaw_weinberg\",\n    midis: [\"vstuplenie-iz-m-f-vinni-puh-m.-vaynberg\"],\n    composerBirthYear: 1919, // Mieczysaw Weinberg\n    genre: \"Classical\",\n    style: \"Romantic, Soviet\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"rachel_portman\",\n    midis: [\"we-had-today\", \"the-letterbox\", \"chocolat---main-titles\"],\n    composerBirthYear: 1960, // Rachel Portman\n    genre: \"Film score\",\n    style: \"Orchestral, Light Classical\",\n    country: \"UK\",\n  },\n  {\n    slug: \"john_barry\",\n    midis: [\n      \"places-out-of-africa---john-barry\",\n      \"somewhere-in-time---john-barry\",\n    ],\n    composerBirthYear: 1933, // John Barry\n    genre: \"Film score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"UK\",\n  },\n  {\n    slug: \"franois_couperin\",\n    midis: [\n      \"francois-couperin---les-barricades-mysterieuses\",\n      \"le-rossignol-en-amour---francois-couperin\",\n    ],\n    composerBirthYear: 1668, // Franois Couperin\n    genre: \"Baroque\",\n    style: \"Baroque, French Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"austin_wintory\",\n    midis: [\n      \"apotheosis-journey-ost---austin-wintory-thepandatooth-s-arrangement\",\n      \"nascence-journey-main-theme\",\n      \"monaco---what-s-yours-is-mine\",\n      \"pdf-volibear-the-relentless-storm\",\n      \"jokes-jokes-jokes\",\n      \"journey-i-was-born-for-this---austin-wintory\",\n      \"the-old-south-distillery\",\n    ],\n    composerBirthYear: 1984, // Austin Wintory\n    genre: \"Video game music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"USA\",\n  },\n  {\n    slug: \"cyril_scott\",\n    midis: [\"lotus-land\", \"cyril-scott-summerland-playtime-op.-54-no.1\"],\n    composerBirthYear: 1879, // Cyril Scott\n    genre: \"Classical\",\n    style: \"Impressionistic, British Classical\",\n    country: \"UK\",\n  },\n  // World pianists\n  {\n    slug: \"darren_korb_hades\",\n    midis: [\"on-the-coast---darren-korb-austin-wintory\"],\n    composerBirthYear: 1985, // Darren Korb\n    genre: \"Video game music\",\n    style: \"Ambient, Indie\",\n    country: \"USA\",\n  },\n  {\n    slug: \"percy_grainger\",\n    midis: [\n      \"molly-on-the-shore\",\n      \"spoon-river---percy-grainger\",\n      \"country-gardens-for-brass-quintet\",\n    ],\n    composerBirthYear: 1882, // Percy Grainger\n    genre: \"Classical, Folk\",\n    style: \"Folk music, Modern Classical\",\n    country: \"Australia\",\n  },\n  {\n    slug: \"benvenuto_terzi\",\n    midis: [\n      \"carillon---benvenuto-terzi-carillon-benvenuto-terzi---guitar-etude\",\n    ],\n    composerBirthYear: 1892,\n    country: \"Italy\",\n  },\n  {\n    slug: \"abdullah_ibrahim\",\n    midis: [\n      \"blue-bolero\",\n      \"homecoming-song---abdullah-ibrahim\",\n      \"mandela---abdullah-ibrahim--y8-african-music\",\n      \"water-from-an-ancient-well---abdullah-ibrahim\",\n      \"the-wedding---abdullah-ibrahim\",\n      \"thaba-bosigo\",\n      \"maraba-blue---abdullah-ibrahim\",\n    ],\n    composerBirthYear: 1934, // Abdullah Ibrahim\n    genre: \"Jazz, World music\",\n    style: \"Jazz, South African music\",\n    country: \"South Africa\",\n  },\n  {\n    slug: \"elza_ibrahimova\",\n    midis: [\n      \"elza-ibrahimova---daha-m-nd-dozum-yox\",\n      \"ot-n-gunl-rimi-qaytaraydilar-azerbaijani-song-piano\",\n      \"s-n-yadima-dus-nd\", // iv-V7-i, three chord minor\n    ],\n    composerBirthYear: 1949, // Elza Ibrahimova\n    genre: \"World music, Folk\",\n    style: \"Azerbaijani music, Folk\",\n    country: \"Azerbaijan\",\n  },\n  {\n    slug: \"bahram_dehghanyar\",\n    midis: [\"zireh-gonbadeh-kabood\", \"grand-mother\", \"aghaye-hekayati\"],\n    composerBirthYear: 1940, // Bahram Dehghanyar\n    genre: \"World music\",\n    style: \"Persian music, Folk\",\n    country: \"Iran\",\n  },\n  {\n    slug: \"jerry_goldsmith\",\n    midis: [\n      \"star-trek-voyager-theme-piano-arrangement\",\n      \"the-russia-house---jerry-goldsmith\",\n      \"the-gremlin-rag-accordion\",\n      \"king-solomon-s-mines---main-theme\",\n      \"theme-from-hoosiers\",\n      \"it-s-a-long-road-from-first-blood---jerry-goldsmith\",\n    ],\n    composerBirthYear: 1929, // Jerry Goldsmith\n    genre: \"Film score, TV music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"eduard_artemyev\",\n    midis: [\n      \"sibirskiy-ciryulnik---eduard-artemev\",\n      \"svoy-sredi-chuzhih-chuzhoy-sredi-svoih---eduard-artemev\",\n      \"raba-lyubvi---eduard-artemev\",\n    ],\n    composerBirthYear: 1937, // Eduard Artemyev\n    genre: \"Film score\",\n    style: \"Orchestral, Soviet\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"vladimir_shainsky\",\n    midis: [\n      \"belye-korabliki-v.-shainskiy\",\n      \"chemu-uchat-v-shkole----vladimir-shainskiy\",\n      \"pesenka-krokodila-geny-iz-m-f-cheburashka---vladimir-shainskiy-perelozhenie-dlya-fortepiano-i-golosa\",\n      \"kukla---v.-shainskiy\",\n    ],\n    composerBirthYear: 1935, // Vladimir Shainsky\n    genre: \"Film score, Children's music\",\n    style: \"Soviet, Light Classical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"kapustin\",\n    midis: [\"concert-etudes-op.-40-no.-1---prelude\"],\n    composerBirthYear: 1937, // Nikolai Kapustin\n    genre: \"Classical, Jazz\",\n    style: \"Jazz Classical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"russian_garmon\",\n    midis: [\"cyganochka---misc-traditional-cyganochka\"],\n  },\n  {\n    slug: \"maksim_dunaevsky\",\n    midis: [\n      \"misyachniy-vals---i.-dunaievskiy\",\n      \"polka---i.-dunaievskiy\",\n      \"oy-cvite-kalina---i.-dunaievskiy\",\n      \"uvertyura-do-k-f-diti-kapitana-granta---i.-dunaievskiy\",\n      \"chastushki-babok-yozhek\",\n    ],\n    composerBirthYear: 1942, // Maksim Dunaevsky\n    genre: \"Film score, Musical\",\n    style: \"Soviet, Musical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"prokofiev\",\n    midis: [\"dance-of-the-knights\"],\n    composerBirthYear: 1891, // Sergei Prokofiev\n    genre: \"Classical\",\n    style: \"Classical, Modern\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"gennady_gladkov\",\n    midis: [\n      \"pesnya-genialnogo-syshchika---gennadiy-gladkov\",\n      \"duet-princessy-i-korolya---gennadiy-gladkov-duet-princessy-i-korolya\",\n      \"pesnya-atamanshi-i-razboynikov-govoryat-my-byaki-buki---gennadiy-gladkov-pesnya-atamanshi-i-razboynikov-govoryat-my-byaki-buki-g.-gladkov\",\n      \"prosnis-i-poy---gennadiy-gladkov\",\n      \"tviy-poyizd---g.-gladkov\",\n      \"proshchalna-pisnya---g.-gladkov\",\n      \"farewell-song----g.-gladkov----easy-violin-and-piano\",\n      \"pisnya-ostapa---g.-gladkov\", // reharm diatonic -> V/\n      \"golovna-tema---g.-gladkov\",\n      \"rio---g.-gladkov\",\n      \"pritvornaya-pesnya-trubadura---gladkov\",\n      \"shestvie-cortege\",\n      \"tango-lyubvi\",\n      \"a-mozhet-byt-vorona---g.-gladkov\",\n      \"dzhentlmeny-udachi---g.-gladkov\",\n      \"beleet-moy-parus-a.-mironov---gennadiy-gladkov\",\n      \"padal-proshlogodniy-sneg---grigoriy-gladkov\", // cool stuff\n    ],\n    composerBirthYear: 1935, // Gennady Gladkov\n    genre: \"Film score, Musical\",\n    style: \"Soviet, Musical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"yuki_hayashi\",\n    midis: [\"my-hero-academia---you-say-run---piano-solo\"],\n    composerBirthYear: 1980, // Yuki Hayashi\n    genre: \"Anime music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"brandon_hesslau\",\n    midis: [\n      \"our-happy-ending---brandon-hesslau---buddy-simulator-1984\",\n      \"a-lovely-little-town---brandon-hesslau---buddy-simulator-1984\",\n    ],\n    composerBirthYear: 1964,\n    genre: \"Video game music\",\n    style: \"Indie, Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"studio_thumpy_puppy\",\n    midis: [\n      \"game-over---in-stars-and-time-ost---studio-thumpy-puppy\",\n      \"be-careful-everyone-boss-theme---in-stars-and-time\",\n      \"do-you-remember-king-s-theme---in-stars-and-time\",\n      \"thinking-time---in-stars-and-time-ost---studio-thumpy-puppy\",\n      \"frozen-in-time---studio-thumpy-puppy---in-stars-and-time-ost\",\n      \"friend-quest-solo---studio-thumpy-puppy-friend-quest-solo\",\n    ],\n    composerBirthYear: 1994, // Studio Thumpy Puppy (likely pseudonym or studio project)\n    genre: \"Video game music\",\n    style: \"Ambient, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"mikael_tariverdiev\",\n    midis: [\n      \"malenkiy-princ-m.-tariverdiev\",\n      \"vals-iz-ironii-sudby-ili-s-legkim-parom-the-waltz-from-the-irony-of-fate\",\n      \"dvoe-v-kafe\",\n      \"mne-nravitsya-chto-vy-bolny-ne-mnoy---mikael-tariverdie\",\n      \"mgnoveniya---m.-tariverdiiev\",\n      \"tihaya-muzyka-regtaym-no-9---m.-tariverdiev\",\n      \"tariverdiev-sudba-rezidenta-prelyudiya\",\n      \"po-ulice-moey---m.-tariverdiev\",\n      \"snow-above-leningrad-sneg-nad-leningradom---mikael-tariverdiev\",\n      \"pesnya-o-dalyokoy-rodine\",\n      \"tvoy-golos---mikael-tariverdiev\",\n      \"ne-zhaleyu-ne-zovu-ne-plachu\",\n      \"pesnya-tartali\",\n      \"na-tihoreckuyu-sostav-otpravitsya\",\n      \"v-sobore---m.-tariverdiev\",\n      \"ubil-ya-poemu---m.-tariverdiev\",\n      \"mikael-tariverdiev-michael-tariverdiyev---nikogo-ne-budet-v-dome-no-one-will-be-at-home\",\n      \"tariverdiev---net-eti-slyozy-ne-moi\",\n      \"ya-sprosil-u-yasenya---tariverdiev-tariverdiev\",\n    ],\n    composerBirthYear: 1931, // Mikael Tariverdiev\n    genre: \"Film score, Classical\",\n    style: \"Soviet Classical, Cinematic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"bill_evans\",\n    midis: [\n      \"bill-evans-on-autunm-leaves-from-the-album-portrait-in-jazz\",\n      \"remembering-the-rain---bill-evans\",\n      \"danny-boy-bill-evans-ver.\",\n      \"bill-evans---waltz-for-debby-medium\",\n    ],\n    composerBirthYear: 1929, // Bill Evans\n    genre: \"Jazz\",\n    style: \"Post-bop, Cool Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"karsten_obarski\",\n    midis: [\n      \"oil-imperium-ingame-music-action-1---karsten-obarski\",\n      \"oil-imperium-title-music---karsten-obarski\",\n    ],\n    composerBirthYear: 1971, // Karsten Obarski\n    genre: \"Video game music\",\n    style: \"Electronic, Ambient\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"jules_massenet\",\n    midis: [\n      \"thais-meditation-by-jules-massenet\",\n      \"aragonesa---jules-massenet\",\n      \"avril-est-amoureux---jules-massenet---arr.-for-flute-and-harp\",\n      \"musique-pour-bercer-les-petits-enfants-lullaby-jules-massenet---for-melodica-and-harmonium\",\n      \"elegie---jules-massenet---version-for-voice-cello-and-piano\",\n    ],\n    composerBirthYear: 1842, // Jules Massenet\n    genre: \"Classical\",\n    style: \"Romantic, French Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"cardiacs\",\n    midis: [\n      \"cardiacs---tarred-and-feathered-for-solo-piano\",\n      \"cardiacs---in-a-city-lining-for-solo-piano\",\n    ],\n    composerBirthYear: 1960, // Cardiacs (Tim Smith)\n    genre: \"Progressive rock, Experimental rock\",\n    style: \"Avant-garde, Math rock\",\n    country: \"UK\",\n  },\n  {\n    slug: \"cecile_chaminade\",\n    midis: [\"arabesque-op.-61-cecile-chaminade\"],\n    composerBirthYear: 1857, // Cecile Chaminade\n    genre: \"Classical\",\n    style: \"Romantic, French Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"taylor_swift\",\n    midis: [\n      \"cardigan---taylor-swift\",\n      \"champagne-problems---taylor-swift\",\n      \"evermore---taylor-swift-feat.-bon-iver\",\n      \"love-story---taylor-swift-taylor-s-version\",\n      \"tolerate-it---taylor-swift-intro-from-the-eras-tour\",\n      \"no-body-no-crime---taylor-swift\",\n      \"shake-it-off---taylor-swift\",\n      \"fearless---taylor-swift-2\",\n      \"enchanted-taylor-s-version---taylor-swift\",\n      \"forever-and-always---taylor-swift\",\n      \"lover---shawn-mendes-taylor-swift\",\n      \"blank-space---taylor-swift-easy-piano\",\n      \"wildest-dreams---taylor-swift\",\n      \"run-feat.-ed-sheeran-taylor-s-version-from-the-vault---taylor-swift-run-feat.-ed-sheeran-taylor-s-version-from-the-vault---flute-and-clarinet-duet\",\n    ],\n    composerBirthYear: 1989, // Taylor Swift\n    genre: \"Pop, Country\",\n    style: \"Pop, Singer-Songwriter\",\n    country: \"USA\",\n  },\n  {\n    slug: \"c_pop\",\n    midis: [\"meng---tntshi-dai-shao-nian-tuan\"],\n    composerBirthYear: 1990, // C-Pop (likely multiple artists)\n    genre: \"Pop\",\n    style: \"C-pop, Mandarin pop\",\n    country: \"China\",\n  },\n  {\n    slug: \"ttng\",\n    midis: [\n      \"ttng_26_is_dancier_than_4_tablature\",\n      \"ttng---empty-palms-tablature\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Math rock, Indie rock\",\n    style: \"Progressive rock, Post-rock\",\n    country: \"UK\",\n  },\n  {\n    slug: \"takahiro_unisuga\",\n    midis: [\"trails-of-cold-steel-iii----things-entrusted\"],\n    composerBirthYear: 1976, // Takahiro Unisuga\n    genre: \"Video game music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"gustavo_santaolalla\",\n    midis: [\n      \"the-last-of-us---gustavo-santaolalla---hbo-opening-theme\",\n      \"de-ushuaia-a-la-quiaca\",\n      \"all-gone-no-escape---gustavo-santaolalla-all-gone-no-escape\",\n      \"the-choice-last-of-us\",\n    ],\n    composerBirthYear: 1951, // Gustavo Santaolalla\n    genre: \"Film score, Folk\",\n    style: \"Folk, Ambient\",\n    country: \"Argentina\",\n  },\n  {\n    slug: \"tonci_huljic\",\n    midis: [\n      \"croatian-rhapsody-hard-piano\",\n      \"hana-s-eyes-by-maksim-mrvica\",\n      \"claudine---tonci-huljic\",\n      \"cubana\",\n      \"still-waters---tonci-huljic\",\n      \"wonderland---tonci-huljic\",\n      \"kolibre---maksim-mrvica\",\n    ],\n    composerBirthYear: 1957, // Toni Hulji\n    genre: \"Pop, Film score\",\n    style: \"Pop, Cinematic\",\n    country: \"Croatia\",\n  },\n  {\n    slug: \"hayato_sonoda\",\n    midis: [\n      \"ys-viii---dana-arcanashift\",\n      \"ys-viii---the-sibylline-road\",\n      \"the-legend-of-heroes--trails-in-the-sky---the-whereabouts-of-light\",\n    ],\n    composerBirthYear: 1984, // Hayato Sonoda\n    genre: \"Video game music\",\n    style: \"Orchestral, Symphonic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"ken_nakagawa\",\n    midis: [\n      \"nefertiti---k.-nakagawa-d.-achiwa-mana-khemia\",\n      \"atelier-totori---her-future-1\",\n    ],\n    composerBirthYear: 1970, // Ken Nakagawa\n    genre: \"Video game music\",\n    style: \"Orchestral, Electronic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"nihoshika\",\n    midis: [\n      \"bu-wu-nizhao-rasaretaguang---nihosika-heyani-terasareta-hikari---nihoshika\",\n      \"reinotubuyaki---nihosika\",\n    ],\n    composerBirthYear: 1992, // Nihoshika\n    genre: \"Video game music\",\n    style: \"Electronic, Ambient\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"joel_peters\",\n    midis: [\"trading-eights\", \"frostfang-s-theme\", \"waterfall---ec1ipze\"],\n    composerBirthYear: 1989, // Joel Peters\n    genre: \"Electronic, Video game music\",\n    style: \"Ambient, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"inon_zur\",\n    midis: [\n      \"dragon-age-origins-theme-song\",\n      \"hymn-of-vaghen---inon-zur\",\n      \"theme-from-fallout-76---inon-zur\",\n      \"in-uthenera\",\n    ],\n    composerBirthYear: 1965, // Inon Zur\n    genre: \"Video game music, Film score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Israel\",\n  },\n  {\n    slug: \"lena_raine_minecraft\",\n    midis: [\n      \"lena-raine---rubedo\",\n      \"pigstep\",\n      \"otherside---lena-raine-piano-solo\",\n    ],\n    composerBirthYear: 1983, // Lena Raine\n    genre: \"Video game music, Experimental\",\n    style: \"Ambient, Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"lena_raine_celeste\",\n    midis: [\n      \"little-goth---celeste\",\n      \"scattered-and-lost---celeste\",\n      \"quiet-and-falling---celeste\",\n      \"awake-celeste-ost\",\n      \"resurrections---lena-raine\",\n    ],\n    composerBirthYear: 1983, // Lena Raine\n    genre: \"Video game music, Indie\",\n    style: \"Ambient, Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"mamomo\",\n    midis: [\n      \"xiu-ti---mamomo\",\n      \"xxd44nature\",\n      \"summer-echoes---mamomo\",\n      \"silver----bai-yin\",\n      \"huan-chuang-noidea---prayer\",\n      \"sengokuhara_02\",\n    ],\n    composerBirthYear: 1990, // Mamomo\n    genre: \"Electronic, Experimental\",\n    style: \"Chillwave, IDM\",\n    country: \"China\",\n  },\n  {\n    slug: \"national_anthems\",\n    midis: [\n      \"zimbabwe-national-anthem\",\n      \"togo-national-anthem\",\n      \"nigeria-national-anthem\",\n      \"lesotho-national-anthem\",\n      \"burundi-national-anthem\",\n      \"chad-national-anthem\",\n      \"ghana-national-anthem\",\n      \"algeria-national-anthem\",\n    ],\n    composerBirthYear: null, // National anthems (varied composers)\n    genre: \"Patriotic, Folk\",\n    style: \"Classical, National\",\n    country: null,\n  },\n  {\n    slug: \"debussy\",\n    midis: [\n      \"Clair_de_Lune__Debussy\",\n      \"arabesque-l.-66-no.-1-in-e-major\",\n      \"estampes-i-pagodes----debussy\",\n      \"valse-romantique-claude-debussy\",\n      \"petite-suite-for-piano-four-hands---claude-debussy\",\n      \"debussy-claude---la-plus-que-lente\",\n      \"the-little-nigar-le-petit-negre---debussy\",\n      \"la-cathedrale-engloutie---debussy\",\n      \"debussy---suite-bergamasque-4-passepied\",\n      \"debussy---images-reflets-dans-leau\",\n      \"claude-debussy---la-fille-aux-cheveux-de-lin\",\n      \"prelude-l.-117-no.-6-in-d-minor---debussy\",\n      \"golliwog-s-cakewalk\",\n      \"reverie_galimberti\",\n    ],\n    composerBirthYear: 1862, // Claude Debussy\n    genre: \"Classical\",\n    style: \"Impressionist\",\n    country: \"France\",\n  },\n  {\n    slug: \"autumn_leaves\",\n    midis: [\n      \"autumn-leaves\",\n      \"autumn-leaves-les-feuilles-mortes\",\n      \"autumn-leaves---jazz-piano-solo-tutorial\",\n      \"bill-evans-on-autunm-leaves-from-the-album-portrait-in-jazz\",\n      \"autumn-leaves-jazz-piano\",\n      \"autumn-leaves-in-c\",\n      \"autumn_leaves_diatonic\",\n    ],\n    composerBirthYear: null, // Autumn Leaves (multiple composers)\n    genre: \"Jazz, Standard\",\n    style: \"Jazz, Ballad\",\n    country: \"France, USA\",\n  },\n  {\n    slug: \"komitas\",\n    midis: [\n      \"garown-a-garun-a-spring-clarinet-piano-komitas\",\n      \"garown-a-spring---komitas\",\n      \"chinar-es-komitas\",\n      \"ounabi-ndeg2-des-6-danses-armeniennes-de-komitas\",\n      \"alagyas-alaghiyssh-clarinettepiano-komitas-komitas\",\n      \"hov-arek---komitas\",\n      \"hoy-nazan---komitas\",\n      \"a.04-01-havadarim\",\n      \"saren-kowga-jowxtm-goc\",\n      \"kaqavik\",\n      \"yar-jan-ari---komitas-vardapet\",\n      \"a.03-01-vorti-assdoudzo-komitas\",\n    ],\n    composerBirthYear: 1869, // Komitas Vardapet\n    genre: \"Classical, Armenian Folk\",\n    style: \"Folk, Choral\",\n    country: \"Armenia\",\n  },\n  {\n    slug: \"ivan_zajc\",\n    midis: [\"na-gondoli---ivan-pl.-zajc\"],\n    composerBirthYear: 1832, // Ivan Zajc\n    genre: \"Classical\",\n    style: \"Opera, Romantic\",\n    country: \"Croatia\",\n  },\n  {\n    slug: \"stephen_rippy\",\n    midis: [\n      \"polyester-jammy-rome-2---age-of-empires\",\n      \"age-of-empires-ii-aoc-main-theme\",\n      \"music-9-operation-monkey-age-of-empires-ii-the-age-of-kings-for-piano----stephen-rippy\",\n    ],\n    composerBirthYear: 1974, // Stephen Rippy\n    genre: \"Video game music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"grant_kirkhope\",\n    midis: [\n      \"mid-boss-mayhem\",\n      \"the-phantom-of-the-bwahpera-act-1---mario-rabbids-kingdom-battle\",\n      \"viva-pinata---night-3---grant-kirkhope-viva-pinata-night-3---grant-kirkhope\",\n      \"grant-kirkhope---chilli-willi-chilli-billi-battle\",\n      \"angry-aztec---donkey-kong-64---grant-kirkhope-dk64\",\n      \"cranky-s-lab---donkey-kong-64---grant-kirkhope-dk64\",\n    ],\n    composerBirthYear: 1962, // Grant Kirkhope\n    genre: \"Video game music\",\n    style: \"Orchestral, Funky\",\n    country: \"UK\",\n  },\n  {\n    slug: \"sage_guyton_jeremy_wakefield_nick_carr\",\n    midis: [\n      \"grass-skirt-chase-piano-arrangement\",\n      \"spm---spongebob-production-music-hawaiian-adventures-spongebob-theme\",\n      \"hello-blues---sage-guyton-jeremy-wakefield\",\n      \"rip-tide-ripped-hide\",\n    ],\n    composerBirthYear: null, // Multiple composers for Spongebob series\n    genre: \"Television, Film score\",\n    style: \"Cartoon, Funk\",\n    country: \"USA\",\n  },\n  {\n    slug: \"lionel_rusquet\",\n    midis: [\"le-monde-des-graves-piano\", \"reflet\"],\n    composerBirthYear: 1990, // Lionel Rusquet\n    genre: \"Classical, Contemporary\",\n    style: \"Piano, Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"maclaine_diemer\",\n    midis: [\"path-of-fire-main-theme-menu---piano-arrangement\"],\n    composerBirthYear: 1947, // Maclaine Diemer\n    genre: \"Video game music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"yuja_wang\",\n    midis: [\n      \"turkish-march-by-yuja-wang\",\n      \"rhapsody-on-a-theme-of-paganini-op.43---sergei-rachmaninoff-18th-variation-yuja-wang\",\n      \"yuja-wang-encore-transcription-of-orfeo-ed-euridice-wq.30---christoph-willibald-gluck\",\n    ],\n    composerBirthYear: 1987, // Yuja Wang\n    genre: \"Classical\",\n    style: \"Virtuoso, Piano\",\n    country: \"China\",\n  },\n  {\n    slug: \"scott_lloyd_shelly\",\n    midis: [\n      \"overworld-day---scott-lloyd-shelly-terraria-ost\",\n      \"boss-1---scott-lloyd-shelly-terraria-ost\",\n      \"windy-day---scott-lloyd-shelly-terraria-ost\",\n      \"alternate-day---scott-lloyd-shelly-terraria-ost\",\n      \"thunderstorm-storm---scott-lloyd-shelly-terraria-ost\",\n    ],\n    composerBirthYear: 1987, // Scott Lloyd Shelly\n    genre: \"Video game music\",\n    style: \"Ambient, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"bud_powell\",\n    midis: [\"oblivion-bud-powell\", \"dusk-in-sandi---bud-powell\"],\n    composerBirthYear: 1924,\n    genre: \"Jazz\",\n    style: \"Bebop, Piano\",\n    country: \"USA\",\n  },\n  {\n    slug: \"michiru_yamane\",\n    midis: [\n      \"michiru-yamane---wood-carving-partita\",\n      \"dance-of-gold---castlevania-symphony-of-the-night\",\n    ],\n    composerBirthYear: 1963, // Michiru Yamane\n    genre: \"Video game music, Classical\",\n    style: \"Baroque, Orchestral\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"mendelssohn\",\n    midis: [\n      \"wedding-march-mendelssohn-piano\",\n      \"mendelssohn-opus-67-no.-2-aka-lost-illusions\",\n      \"mendelssohn-songs-without-words-no.-1-piano-solo\",\n    ],\n    composerBirthYear: 1809, // Felix Mendelssohn\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"romantic_single_pieces\",\n    midis: [\"caprice-brillant-sur-romeo-et-juliette-op.-303---georges-lamothe\"],\n    composerBirthYear: 1809, // Georges Lamothe\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"michael_price_and_david_arnold\",\n    midis: [\n      \"the-game-is-on-from-bbc-s-sherlock-for-piano\",\n      \"who-you-really-are-from-sherlock-bbc-series-4\",\n    ],\n  },\n  {\n    slug: \"common_practice_single_pieces\",\n    midis: [\"valsy-griboedova---griboedov-s-waltzes\", \"chopsticks\"],\n    composerBirthYear: 1795, // Alexander Griboedov\n    genre: \"Classical\",\n    style: \"Common-practice\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"shuki_levy_haim_saban\",\n    midis: [\n      \"inspecteur-gadget---shuki-levy-haim-saban-inspecteur-gadget\",\n      \"heathcliff-theme-song\",\n      \"bulk-skull-s-theme-mighty-morphin-power-rangers---shuki-levy-haim-saban-et-al\",\n      \"le-vol-du-condor---les-mysterieuses-cites-d-or---shuki-levy-haim-saban---4-mains\",\n      \"piano-duet-he-man-and-the-masters-of-the-universe-1980s---shuki-levi-haim-saban\",\n    ],\n    composerBirthYear: 1946, // Shuki Levy & Haim Saban\n    genre: \"Television, Pop\",\n    style: \"Theme songs, Children's\",\n    country: \"Israel/USA\",\n  },\n  {\n    slug: \"m2u\",\n    midis: [\"m2u---masquerade\"],\n    composerBirthYear: null, // M2U (not much info available)\n    genre: \"Electronic\",\n    style: \"Eurobeat, Trance\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"haywyre\",\n    midis: [\"prologue---haywyre\"],\n    composerBirthYear: 1992, // Haywyre\n    genre: \"Electronic\",\n    style: \"Chillstep, IDM\",\n    country: \"USA\",\n  },\n  {\n    slug: \"gari_biasillo\",\n    midis: [\n      \"target-renegade-main-theme---gari-biasillo\",\n      \"target-renegade-level-3-music---gari-biasillo\",\n      \"target-renegade-end-theme---gari-biasillo\",\n    ],\n    composerBirthYear: 1980, // Gari Biasillo\n    genre: \"Video game music\",\n    style: \"Chiptune, Synthwave\",\n    country: \"Spain\",\n  },\n  {\n    slug: \"zun_touhou\",\n    midis: [\n      \"touhou-8---maiden-s-capriccio-~-dream-battle\",\n      \"touhou---native-faith\",\n\n      \"touhou-6-eosd-complete-ost\",\n      \"touhou-8-in-complete-ost\",\n    ],\n    composerBirthYear: 1977, // ZUN\n    genre: \"Video game music\",\n    style: \"Electronic, Rock\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"edmund_fu\",\n    midis: [\n      \"dpsp-starting-wind---edmund-fu\",\n      \"yi-zhan-next-station---edmund-fu\",\n      \"deemo-walking-by-the-sea---edmund-fu\",\n    ],\n    composerBirthYear: 1989, // Edmund Fu\n    genre: \"Video game music\",\n    style: \"Ambient, Piano\",\n    country: \"Hong Kong\",\n  },\n  {\n    slug: \"farhan_sarasin\",\n    midis: [\n      \"original-reflect---gawr-gura---farhan-sarasin\",\n      \"id-entity-voices---hololive-idol-project\",\n      \"scent-from-voez\",\n    ],\n    composerBirthYear: 1995, // Farhan Sarasin\n    genre: \"Video game music\",\n    style: \"Ambient, Electronic\",\n    country: \"Indonesia\",\n  },\n  {\n    slug: \"yoko_shimomura\",\n    midis: [\n      \"guile-s-theme-street-fighter-ii\",\n      \"vega-s-theme-street-fighter-ssbu-remix-score-compacted-for-violin-and-piano\",\n      \"sutoritohuaitaii-taitorudemo~-v.s.hua-mian-street-fighter-ii-ac-title---v.s.---yoko-shimomura\",\n      \"e.ben-tian-e.honda-japan---sutoritohuaitaii-street-fighter-ii-ac---yoko-shimomura\",\n      \"chun-li-chun-li-china---sutoritohuaitaii-street-fighter-ii-ac---yoko-shimomura\",\n      \"buranka-blanka-brazil---sutoritohuaitaii-street-fighter-ii-ac---yoko-shimomura\",\n      \"ryu-s-theme-8beatsvgm---yoko-shimomura-street-fighter-2-ost-ryus-theme-reboot-arcade-cps1-stereo-by-8beatsvgm_320kbps\",\n      \"ken-ken-america---sutoritohuaitaii-street-fighter-ii-ac---yoko-shimomura\",\n      \"beware-the-forest-s-mushrooms-forest-maze---super-mario-rpg---yoko-shimomura-piano\",\n      \"dearly-beloved-piano-collections-kingdom-hearts\",\n    ],\n    composerBirthYear: 1967,\n    genre: \"Video game music\",\n    style: \"Orchestral, Electronic\",\n    country: \"Japan\",\n  },\n  { slug: \"muzio_clementi\", midis: [\"clementi-sonatina-no.-1-op-36\"] },\n  {\n    slug: \"yasunori_mitsuda\",\n    midis: [\n      \"where-we-used-to-be---xenoblade-chronicles-2\",\n      \"xenoblade-chronicles-2---mor-ardain-~-roaming-the-wastes\",\n      \"xenoblade-2-one-last-you-piano-arrange---yasunori-mitsuda\",\n      \"chrono-trigger---wind-scene---yasunori-mitsuda-wind-scene---chrono-trigger\",\n      \"chrono-trigger---02-crono-s-theme-main-theme\",\n    ],\n    composerBirthYear: 1972, // Yasunori Mitsuda\n    genre: \"Video game music\",\n    style: \"Orchestral, Celtic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"dm_dokuro\",\n    midis: [\n      \"terraria-calamity-mod-ost-dm-dokuro---stained-brutal-calamity-piano-solo\",\n      \"terraria-calamity-mod-ost-dm-dokuro---guardian-of-the-former-seas-piano-solo\",\n    ],\n    composerBirthYear: 1990, // DM Dokuro\n    genre: \"Video game music\",\n    style: \"Orchestral, Metal\",\n    country: \"USA\",\n  },\n  {\n    slug: \"geza_horvath\",\n    midis: [\"petite-saltarelle---geza-horvath\"],\n    composerBirthYear: 1985, // Geza Horvath\n    genre: \"Classical\",\n    style: \"Piano, Classical\",\n    country: \"Hungary\",\n  },\n  {\n    slug: \"nikolay_myaskovsky\",\n    midis: [\n      \"nikolai-myaskovsky---the-yellowed-leaves-op.-31-no-2\",\n      \"an-ancient-tale---drevnyaya-povest---nikolay-myaskovsky\",\n    ],\n    composerBirthYear: 1881, // Nikolay Myaskovsky\n    genre: \"Classical\",\n    style: \"Symphonic, Romantic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"yoshito_sekigawa\",\n    midis: [\n      \"cafe-scene---paper-mario-the-origami-king\",\n      \"super-paper-mario---naoko-mitome-and-chika-sekigawa-staff-roll-\",\n      \"it-s-showtime-from-super-paper-mario---naoko-mitome-chika-sekigawa\",\n      \"the-museum---paper-mario-the-origami-king\",\n    ],\n    composerBirthYear: 1977, // Yoshito Sekigawa\n    genre: \"Video game music\",\n    style: \"Jazz, Orchestral\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"guns_n_roses\",\n    midis: [\"welcome-to-the-jungle\", \"november-rain---guns-n-roses\"],\n    composerBirthYear: 1985, // Guns N' Roses (band)\n    genre: \"Rock\",\n    style: \"Hard rock, Glam metal\",\n    country: \"USA\",\n  },\n  {\n    slug: \"dominic_james_la_rocca\",\n    midis: [\"barnyard-blues---dominic-james-la-rocca-1917\"],\n    composerBirthYear: 1889, // Dominic James La Rocca\n    genre: \"Jazz\",\n    style: \"Blues\",\n    country: \"USA\",\n  },\n  {\n    slug: \"oesterreichisch-magyar_dance_music\",\n    midis: [\n      \"dunapalota---rozsnyai-sandor-1919\",\n      \"the-star---rene-r.-schmal-1919\",\n    ],\n    composerBirthYear: null, // Traditional Hungarian and Austrian dance music\n    genre: \"Folk, Dance\",\n    style: \"March, Polka\",\n    country: \"Austria, Hungary\",\n  },\n  {\n    slug: \"theo_northrup\",\n    midis: [\n      \"the-two-happy-coons---theodore-h.-northrup-1891\",\n      \"plantation-echoes---theodore-h.-northrup-1897\",\n      \"louisiana-la-pas-ma-la---theodore-h.-northrup-1897\",\n      \"the-possum-patrol---theodore-h.-northrup-1892\",\n    ],\n    composerBirthYear: 1866, // Theodore H. Northrup\n    genre: \"Jazz, Ragtime\",\n    style: \"Ragtime\",\n    country: \"USA\",\n  },\n  {\n    slug: \"early_xx_century_single_pieces\",\n    midis: [\n      \"feuillet-d-album-no.1-in-f-minor---ludovic-lamothe-feuillet-d-album-no.1-in-f-minor\",\n    ],\n  },\n  {\n    slug: \"scott_bradlee\",\n    midis: [\n      \"i-wanna-be-like-you-ragtime---scott-bradlee\",\n      \"super-mario-bros.-ragtime-piano-medley---scott-bradlee\",\n    ],\n    composerBirthYear: 1980, // Scott Bradlee\n    genre: \"Jazz, Ragtime\",\n    style: \"Jazz, Ragtime\",\n    country: \"USA\",\n  },\n  {\n    slug: \"randy_newman\",\n    midis: [\n      \"you-ve-got-a-friend-in-me---randy-newman\",\n      \"dexter-s-tune---randy-newman\",\n      \"monsters-inc.-if-i-didn-t-have-you---randy-newman\",\n      \"boo-s-going-home-by-monsters-inc.-randy-newman-ofimaticagio2-v-2.0\",\n      \"its-a-jungle-out-there---randy-newman\",\n    ],\n    composerBirthYear: 1943, // Randy Newman\n    genre: \"Film score, Pop\",\n    style: \"Film music, Singer-songwriter\",\n    country: \"USA\",\n  },\n  {\n    slug: \"oleksii_omelchuk\",\n    midis: [\n      \"metro-2033-main-menu-theme\",\n      \"metro-exodus---race-against-fate\",\n      \"metro-last-light-ending-bad-ending\",\n    ],\n    composerBirthYear: 1982, // Oleksii Omelchuk\n    genre: \"Video game music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Ukraine\",\n  },\n  {\n    slug: \"alexander_goedicke\",\n    midis: [\"alexander-goedicke---dance\"],\n    composerBirthYear: 1877, // Alexander Goedicke\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"waldemar_kazanecki\",\n    midis: [\n      \"noce-i-dnie---walc-barbary---misc-soundtrack-walc-barbary\",\n      \"czarne-chmury-black-clouds-soundtrack-theme---waldemar-kazanecki\",\n    ],\n    composerBirthYear: 1947, // Waldemar Kazanecki\n    genre: \"Film score, Classical\",\n    style: \"Film music\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"yoasobi\",\n    midis: [\"anomeng-wonazotute-ano-yume-wo-nazotte-marasiiver.\"],\n    composerBirthYear: 1998, // Yoasobi (Ayu and Ikura)\n    genre: \"J-Pop\",\n    style: \"Electropop, Synthpop\",\n    country: \"Japan\",\n  },\n  { slug: \"yakov_feldman\", midis: [\"yamshchik-ne-goni-loshadey\"] },\n  {\n    slug: \"modern_composers_of_single_pieces\",\n    midis: [\n      \"clubbed-to-death\",\n      \"mr-sandman-the-chordettes\",\n      \"after-school---weeekly\",\n      \"gray\",\n      \"changing-times---heather-hammond\",\n      \"ma-lu-mitai-baka-mitai---mitsuharu-fukuyama-piano-arrangement\",\n      \"devotion\",\n      \"tom-and-jerry-theme-piano-solo\",\n      \"pilot-for-hire--microsoft-flight-simulator-x\",\n      \"thundercats-theme\",\n      \"mighty-morphin-power-rangers-sheet-music-easy-piano\",\n      \"digimon-main-theme-organ-cover\",\n      \"vizisi\",\n      \"lost-patrol-main-theme---chris-glaister-jonathan-dunn\",\n      \"none-of-them-knew-they-were-robots---mr.-bungle-mostly\",\n      \"joker-folie-a-deux---trailer-theme---hildur-gudnadottir\",\n      \"warsaw-concerto-dangerous-moonlight-theme-1941\",\n      \"machinarium\",\n      \"vostochnye-skazki---blestyashchie\",\n      \"bomnal-beojggoc-geurigo-neo-spring-day-cherry-blossoms-you---epitone-project\",\n      \"starry-dome---no.-15-from-piano-meditation---george-nevada\",\n      \"seven-nation-army-arr.-nikodem-lorenz\",\n      \"sing-hallelujah\",\n      \"amish-paradise---weird-al-yankovic-kaleidoscope\",\n      \"na-zare---alyans-na-zare\",\n      \"aphrodites_child_rain_and_tears\",\n      \"want-you-gone-portal-2\",\n    ],\n    composerBirthYear: 1950, // Various modern composers\n    genre: \"Pop, Video game, Film\",\n    style: \"Eclectic, Contemporary\",\n    country: \"Various\",\n  },\n  {\n    slug: \"stephen_foster\",\n    midis: [\n      \"stephen-foster---hard-times-come-again-no-more\",\n      \"jeanie-with-the-light-brown-hair---stephen-foster\",\n      \"old-black-joe-by-stephen-foster\",\n      \"beautiful-dreamer---stephen-foster\",\n      \"soiree-polka---stephen-c.-foster---1850\",\n      \"ah-may-the-red-rose-live-alway---stephen-foster-1850\", // Indian Guest\n      \"some-folks-like-to-sigh---s-foster-arr.-p.r.-brass-quintet\",\n      \"gentle-annie\",\n      \"beyond-the-mystic-river---stephen-c.-foster\",\n      \"445-friendship-with-jesus\",\n      \"old-dog-tray\",\n      \"weep-no-more---stephen-c.-foster\",\n      \"old-folks-at-home---theme-and-variations-by-stephen-foster\",\n      \"oh-susanna\",\n      \"gone-from-my-heart---stephen-c.-foster\",\n      \"angelina-baker-by-stephen-c.-foster-not-quite-angeline-the-baker\",\n      \"my-old-kentucky-home---stephen-collins-foster\",\n      \"slumber-my-darling-by-stephen-foster\",\n    ],\n    composerBirthYear: 1826, // Stephen Foster\n    genre: \"Folk, Popular\",\n    style: \"American, Minstrelsy\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jean_schwartz\",\n    midis: [\"chinatown-my-chinatown\", \"the-popcorn-man-1910\"],\n    genre: \"Ragtime\",\n    country: \"USA\",\n    composerBirthYear: 1878,\n  },\n  {\n    slug: \"chet_baker\",\n    midis: [\n      \"autumn-leaves---joseph-kosma-autumn-leaves-chet-baker-paul-desmond\",\n    ],\n    genre: \"Jazz Solo\",\n    composerBirthYear: 1929,\n  },\n  {\n    slug: \"possibly_tango\",\n    midis: [\"veinte-anos\", \"rio---g.-gladkov\"],\n    composerBirthYear: null, // Various Tango composers\n    genre: \"Tango\",\n    style: \"Argentinian, Latin\",\n    country: \"Argentina\",\n  },\n  {\n    slug: \"dj_okawari\",\n    midis: [\n      \"represent\",\n      \"peacock---dj-okawari\",\n      \"over-the-rain---dj-okawari-x-emily-styler\",\n      \"lightning-moment---yuan-zuo\", // some chromaticism inside\n      \"luv-letter-by-dj-okawari\", // picardy, otherwise easy\n      \"perfect-blue---dj-okawari-piano-solo-hard\",\n      \"engage-ring---dj-okawari-x-emily-styler\", // V\n      \"flower-dance-dj-okawari\", // V, melodic minor, period\n      \"ming-ri-fang-zhou-arknights---speed-of-light-piano-transcription\", // pentatonic\n      \"bluebird-story---dj-okawari-bluebird-story-for-2-pianos\", // picardy\n      \"the-bonds---dj-okawari\", // seventh chords\n    ],\n    composerBirthYear: 1986, // DJ Okawari\n    genre: \"Jazz, Hip Hop, Electronic\",\n    style: \"Lofi, Chillhop\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"nujabes\",\n    midis: [\n      \"aruarian-dance---nujabes\",\n      \"feather---nujabes\",\n      \"shiki-no-uta---nujabes\",\n      \"horizon---nujabes\",\n      \"nujabes---counting-stars---loop-piano-cover\",\n      \"another-reflection---nujabes\",\n      \"mystline\",\n      \"eclipse---nujabes\",\n      \"think-different---nujabes\",\n      \"letter-from-yokosuka---nujabes-uyama-hiroto-piano-soprano-saxophone-vibraphone\",\n      \"flowers---nujabes\",\n      \"reflection_eternal\",\n      \"kumomi---nujabes\",\n      \"nujabes--blessing-it-remix\",\n    ],\n    composerBirthYear: 1974, // Nujabes\n    genre: \"Hip Hop, Jazz\",\n    style: \"Lofi, Chillhop\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"eri_sasaki\",\n    midis: [\n      \"ring-of-fortune---eri-sasaki-plastic-memories-op-reiva-piano-cover\",\n    ],\n    composerBirthYear: 1989,\n    country: \"Japan\",\n  },\n  {\n    slug: \"joao_mateus_junior_8_fados\",\n    midis: [\"beijos-de-mae---joao-mateus-junior\"],\n    composerBirthYear: null, // Joo Mateus Junior (Fado composer)\n    genre: \"Fado, Folk\",\n    style: \"Traditional, Portuguese\",\n    country: \"Portugal\",\n  },\n  {\n    slug: \"angelo_frondoni\",\n    midis: [\n      \"marcha-as-tres-rocas-de-crystal---angelo-frondoni\",\n      \"diz-tudo-amor---romance---angelo-frondoni\",\n    ],\n    composerBirthYear: 1874, // Angelo Frondoni\n    genre: \"Classical\",\n    style: \"Romantic, Opera\",\n    country: \"Italy\",\n  },\n  {\n    slug: \"derek_fiechter\",\n    midis: [\n      \"cats-of-whisker-hollow-spooky-autumn---derek-fiechter\",\n      \"osiris---derek-fiechter\",\n      \"spooky-autumn-ii---halloween-carnival---derek-fiechter-brandon-fiechter\",\n      \"the-tale-of-the-firebird---derek-brandon-fiechter\",\n    ],\n    composerBirthYear: 1990, // Derek Fiechter & Brandon Fiechter (Ambient composers)\n    genre: \"Ambient, Cinematic\",\n    style: \"Fantasy, Spooky\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ryuichi_sakamoto\",\n    midis: [\n      \"merry-christmas-mr.-lawrence-forbidden-colours---ryuichi-sakamoto\",\n      \"aqua---ryuichi-sakamoto-ryuichi-sakamoto\", // ideal for beginners\n      \"energy-flow---ryuichi-sakamoto\",\n    ],\n    composerBirthYear: 1952, // Ryuichi Sakamoto\n    genre: \"Classical, Electronic\",\n    style: \"Ambient, Experimental\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"gesualdo\",\n    midis: [\n      \"moro-lasso-al-mio-duolo---gesualdo\",\n      \"belta-poi-che-t-assenti---carlo-gesualdo\",\n    ],\n    composerBirthYear: 1566, // Carlo Gesualdo\n    genre: \"Renaissance\",\n    style: \"Choral, Madrigal\",\n    country: \"Italy\",\n  },\n  {\n    slug: \"rimsky-korsakoff\",\n    midis: [\"song-of-the-indian-guest\", \"flight-of-the-bumblebee\"],\n    composerBirthYear: 1844, // Nikolai Rimsky-Korsakov\n    genre: \"Classical\",\n    style: \"Orchestral, Symphonic\",\n    country: \"Russia\",\n  },\n  {\n    // https://musescore.com/user/68853055\n    // also see https://musescore.com/sheetmusic?text=%CE%BC%CE%BF%CF%85%CF%83%CE%B9%CE%BA%CE%AE&type=non-official\n    // https://musescore.com/sheetmusic?text=%CE%97&type=non-official\n    slug: \"greek_music\",\n    midis: [\n      \"m.-theodorakis---ena-to-helidoni---greek-music-001\",\n      \"g.-katsaros---kathe-limani-kai-kaimos---greek-music-002\",\n      \"m.-loizos---o-dromos---greek-music-003\",\n\n      \"m.-theodorakis---omorfi-poli---greek-music-036\",\n      \"a.-kaldaras---nyhtose-horis-feggari---greek-music-037\",\n      \"m.-hatzidakis---efta-tragoydia-tha-soy-po---greek-music-038\",\n      \"g.-katsaros---pame-gia-upno-katerina---greek-music-039\",\n      \"g.-spanos---aspra-karavia---greek-music-040\",\n      \"g.-mitsakis---palamakia---greek-music-041\",\n      \"v.-tsitsanis---eimaste-alania---greek-music-042\",\n      \"pyx-lax---de-tha-dakryso-pia-gia-sena---greek-music-043\",\n      \"n.-portokalogloy---to-kalokairaki---greek-music-044\",\n      \"p.-sidiropoylos---o-mpampis-o-floy---greek-music-045\",\n      \"orf.-peridis---fotovolida---greek-music-046\",\n      \"th.-mikroytsikos---enas-negros-thermastis-apo-to-tzimpoyti---greek-music-047\",\n      \"m.-loizos---koytsi-kithara---greek-music-048\", // a capella thirds\n      \"g.-spanos---mia-agapi-gia-to-kalokairi---greek-music-049\",\n      \"h.-nikolopoylos---hronia-helidonia---greek-music-050\",\n      \"m.-hiotis---thessaloniki-moy---greek-music-051\",\n      \"m.-theodorakis---vrehei-sti-ftohogeitonia---greek-music-052\",\n      \"v.-tsitsanis---horisame-ena-deilino---greek-music-053\",\n      \"g.-zampetas---agonia---greek-music-054\",\n      \"s.-xarhakos---stoy-thoma---greek-music-055\",\n      \"g.-papaioannoy---vadizo-kai-paramilo---greek-music-056\",\n      \"g.-mpithikotsis---toy-votanikoy-o-magkas---greek-music-057\",\n      \"v.-tsitsanis---to-vapori-ap-tin-persia---greek-music-058\",\n      \"a.-kaldaras---min-perimeneis-pia---greek-music-059\",\n      \"m.-hiotis---perasmenes-moy-agapes---greek-music-060\",\n      \"g.-zampetas---stalia-stalia---greek-music-061\",\n      \"h.-nikolopoylos---ston-aggelon-ta-mpoyzoykia---greek-music-062\",\n      \"m.-plessas---ti-soy-kana-kai-pineis---greek-music-063\",\n      \"s.-koygioymtzis---to-kokkino-foystani---greek-music-064\",\n      \"t.-moysafiris---o-taxitzis---greek-music-065\",\n      \"g.-hatzinasios---me-lene-giorgo---greek-music-066\",\n      \"g.-spanos---tha-me-thymitheis---greek-music-067\",\n      \"m.-tokas---exartatai---greek-music-068\", // demo minor chord\n      \"h.-nikolopoylos---yparho---greek-music-069\", // phrygian\n      \"m.-loizos---ah-helidoni-moy---greek-music-070\",\n      \"g.-katsaros---ta-kythira-pote-de-tha-ta-vroyme---greek-music-071\", // typo in m.8\n      \"p.-katsimihas---an-yparhei-logos---greek-music-072\", // hijaz bvi-I7 feel of iv-V7-i\n      \"t.-morakis---se-magika-nisia---greek-music-073\",\n      \"s.-xarhakos---to-dihty---greek-music-074\",\n      \"g.-zampetas---ti-na-ftaiei---greek-music-075\",\n      \"h.-nikolopoylos---to-agrioloyloydo---greek-music-076\",\n      \"m.-hatzidakis---to-vals-ton-hamenon-oneiron---greek-music-077\",\n      \"d.-savvopoylos---dimosthenoys-lexis---greek-music-078\",\n      \"s.-xarhakos---mpoyrnovalia---greek-music-079\",\n      \"t.-moysafiris---kane-kati-na-haso-to-treno---greek-music-080\",\n    ],\n    composerBirthYear: 1925,\n    genre: \"Pop\",\n    style: \"Folk, Traditional, Pop, Traditional Fusion\",\n    country: \"Greece\",\n  },\n  {\n    slug: \"louis_couperin\",\n    midis: [\n      \"1626---1661-louis-couperin---fugue-ol-11\",\n      \"l.-couperin-la-piemontoise\",\n    ],\n  },\n  {\n    slug: \"jesse_novak\",\n    midis: [\n      \"bojack-horseman-don-t-stop-dancing-piano-solo\",\n      \"concerto-in-f-major\",\n      \"i-will-always-think-of-you-bojack-horseman---piano-arrangement\",\n    ],\n    composerBirthYear: 1979,\n    country: \"USA\",\n    genre: \"Film Score\",\n  },\n  {\n    slug: \"j_p_ahmad\",\n    midis: [\"castlemania\", \"ninja-runner\", \"super-bounce\"],\n  },\n  {\n    slug: \"akira_yamaoka\",\n    midis: [\n      \"akira-yamaoka---silent-hill-2---promise-reprise\",\n      \"magdalene---akira-yamaoka\",\n      \"never-forgive-me-never-forget-me---akira-yamaoka\",\n      \"silent-hill-not-tomorrow-lisa-s-death\",\n      \"akira-yamaoka---true\",\n    ],\n    composerBirthYear: 1968,\n    genre: \"Video game music\",\n    style: \"Ambient, Industrial\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"shostakovich\",\n    midis: [\n      \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\",\n      \"shostakovich_symphony_no5_2nd_movement_for_piano_solo\",\n      \"symphony-no.-10-by-dmitri-shostakovich---piano-reduction\",\n    ],\n    composerBirthYear: 1906,\n    genre: \"Classical\",\n    style: \"Symphonic, Modernist\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"vince_guaraldi\",\n    midis: [\n      \"linus-and-lucy-peanuts---vince-guaraldi\",\n      \"christmas-time-is-here-for-jazz-piano---vince-guaraldi---arr.-elijah-hemingway\",\n      \"what-child-is-this---vince-guaraldi-trio\",\n      \"the-great-pumpkin-waltz-peanuts---vince-guaraldi\",\n      \"skating\",\n      \"o-christmas-tree-vince-guaraldi\",\n    ],\n    composerBirthYear: 1928,\n    genre: \"Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jazz_standards\",\n    midis: [\n      \"recorda-me-no-me-esqueca\",\n      \"all-the-things-you-are\",\n      \"all-the-things-you-are-2\",\n      \"all-the-things-you-are-lead-sheet---jerome-kern-oscar-hammerstein-ii\",\n      \"all-the-things-you-are---reharmonized---jerome-kern\",\n      \"solo-transcription-all-the-things-you-are---paul-desmond\",\n      \"all-the-things-you-are-guitar-chord-melody\",\n      \"my-funny-valentine-lead-sheet-with-lyrics\",\n      \"tea-for-two---vincent-youmans-and-irving-caesar-1924-piano-voice-sheet-music-arrangement\",\n      \"tea-for-two-er-ren-deocha-wo---vincent-youmans\",\n      \"straight-no-chaser-thelonious-monk\",\n      \"blue-monk-piano\",\n      \"round-midnight---thelonious-monk\",\n      \"well-you-needn-t\",\n      \"footprints.mscz\",\n      \"satin-doll\",\n      \"lady_bird_piano_solo\",\n      \"a-night-in-tunisia---dizzy-gillespie-sarah-vaughan-a-night-in-tunisia\",\n      \"Bags_Groove__Lead_sheet_\",\n      \"footprints_r\",\n      \"armstrong-go-down-moses\",\n      \"all-of-me---new-york-jazz-lounge\",\n      \"Misty_piano_solo\",\n      \"bheki_mseleku_angola\",\n      \"donna-lee---charlie-parker---lead-sheet-bass-clef-up-8va-from-real-book-ver.\",\n      \"indiana-back-home-again-in-indiana-lead-sheet-with-lyrics-alternate\",\n      \"o-barquinho-little-boat---roberto-menescal\",\n      \"o-barquinho-little-boat---roberto-menescal-20ac8f\",\n    ],\n    genre: \"Jazz\",\n    // This is a collection of jazz standards, no specific composer can be assigned.\n    style: \"Jazz Standards\",\n    country: \"USA\",\n  },\n  {\n    // https://musescore.com/user/24069/sets/4869434\n    slug: \"rachmaninoff\",\n    midis: [\n      \"rachmaninoff-piano-concerto-no.-2-1st-mvmt.-arr.-for-2-pianos\",\n      \"piano_concerto_no_4_op_40_sergei_rachmaninoff_i_allegro_vivace_alla_breve\",\n      \"prelude_in_c_sharp_minor_opus_3_no_2_sergei_rachmaninoff\",\n      \"rachmaninoff_piano_concerto_4_1\",\n      \"serguei-rachmaninov---piano-concerto-ndeg4-in-g-minor---1st-mouvement-intro\",\n      \"Prelude_in_G_Minor_Opus_23_No._5\",\n      \"prelude-in-c-sharp-minor-opus-3-no.-2---sergei-rachmaninoff\",\n      \"rachmaninoff-10-preludes-op.-23---no.-5-in-g-minor-m.-a.-deocariza\",\n\n      \"symphony-no.-2-in-e-minor-op.-27-for-piano-duet---i.-largo-allegro-moderato\",\n      \"symphony-no.-2-in-e-minor-op.-27-for-piano-duet---ii.-allegro-molto\",\n    ],\n    composerBirthYear: 1873,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"valentin_silvestrov\",\n    midis: [\n      \"five-pieces-op.-306-no.-4-waltz\",\n      \"abschiedsserenade-ii-farewell-serenade---valentin-silvestrov\",\n      \"english-serenades-op.-46-no.-1---valentin-silvestrov\",\n      \"english-serenades-op.-46-no.-4---valentin-silvestrov\",\n    ],\n    composerBirthYear: 1937,\n    genre: \"Classical\",\n    style: \"Postmodern, Minimalism\",\n    country: \"Ukraine\",\n  },\n  {\n    slug: \"george_pelecis\",\n    midis: [\n      \"all-in-the-past---georgs-pelecis\",\n      \"plaukstosais-jasmins---georgs-pelecis\",\n    ],\n    composerBirthYear: 1947,\n    genre: \"Classical\",\n    style: \"Contemporary\",\n    country: \"Latvia\",\n  },\n  { slug: \"jaco_pastorius\", midis: [\"donna-lee---jaco-pastorius\"] },\n  {\n    slug: \"frank_wildhorn\",\n    midis: [\n      \"master-of-the-strings-die-faden-in-der-hand-rudolf---affaire-mayerling-for-violin-and-piano\",\n      \"the-confrontation---frank-wildhorn\",\n    ],\n  },\n  {\n    slug: \"klaus_doldinger\",\n    midis: [\"erinnerung-from-das-boot---klaus-doldinger\"],\n  },\n  { slug: \"falco\", midis: [\"jeanny-falco\"] },\n  {\n    slug: \"marco_beltrami\",\n    midis: [\n      \"rosemary-s-theme-the-giver\",\n      \"rosemary-s-waltz\",\n      \"st.-estes-reform-school-extended---marco-beltrami-venom-let-there-be-carnage\",\n      \"le-mans-66\",\n      \"theme-from-world-war-z---marco-beltrami-theme-from-world-war-z--isolated-system\",\n    ],\n    composerBirthYear: 1966,\n    genre: \"Film Score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"catherine_rollin\",\n    midis: [\n      // major desc bass\n      \"sunlight-waltz---catherine-rollin\",\n      \"sweet-elegy---catherine-rollin\",\n      \"tenderly---catherine-rollin\",\n      // minor desc bass\n      \"french-movie-waltz---catherine-rollin\",\n      \"moonlight-nocturne---catherine-rollin\",\n\n      // minor circle of fifths\n      \"russian-waltz\",\n      \"lyric-nocturne---catherine-rollin\", // bII, rel major\n\n      \"winter-waltz---catherine-rollin\", // autumn leaves exit\n\n      \"summer-s-dream---catherine-rollin\", // minor pachelbel, 50s\n\n      \"remembrance---catherine-rollin\", // reverse V/ii, bVII\n      \"pure-heart---catherine-rollin\",\n      \"summer-splendor---catherine-rollin\",\n\n      \"the-swan---catherine-rollin\", // line cliche\n      \"mah_g4.05\",\n      \"ballad-for-our-time\",\n\n      \"blues-boulevard---catherine-rollin\",\n      \"back-beat-blues---catherine-rollin\",\n      \"miami-blues---catherine-rollin\",\n      \"waltzing-the-blues---catherine-rollin\",\n      \"baroque-bop---catherine-rollin\",\n      \"jazzy-moves---catherine-rollin\",\n\n      \"sneaky-skeleton---catherine-rollin\",\n      \"witches-brew---catherine-rollin\",\n      \"cool-ghoul---catherine-rollin-cool-ghoul\",\n      \"solar-wind\",\n\n      \"tap-time---catherine-rollin\",\n\n      \"blues-train---catherine-rollin-catherine-rollin---blues-train-jazz\",\n      \"motown-rag---catherine-rollin\",\n      \"circus-rag---catherine-rollin\",\n      \"nashville-rag---catherine-rollin-nashville-rag\",\n\n      \"hoe-down---catherine-rollin\",\n      \"rock-it---catherine-rollin\",\n      \"la-senorita---catherine-rollin\",\n    ],\n    composerBirthYear: 1954,\n    style: \"Jazz, Blues, Teacher Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jelly_roll_morton\",\n    midis: [\"king-porter-stomp---jelly-roll-morton---melrose-edition\"],\n    composerBirthYear: 1890,\n    genre: \"Jazz\",\n    style: \"Jazz, Blues\",\n    country: \"USA\",\n  },\n  {\n    slug: \"chen_gang\",\n    midis: [\n      \"liang-zhu---he-zhan-hao-chen-gang-liang-zhu---chen-gang-he-zhan-hao---butterfly-lovers-violin-concerto\",\n    ],\n    composerBirthYear: 1935,\n    genre: \"Classical\",\n    country: \"China\",\n  },\n  {\n    slug: \"kensuke_ushio\",\n    midis: [\n      \"to-a-kinder-world---kensuke-ushio\",\n      \"chainsaw-man-ost---sweet-dreams-by-kensuke-ushio-arranged-by-thezewmusic\",\n      \"lit-a-silent-voice\",\n    ],\n    country: \"Japan\",\n    composerBirthYear: 1983,\n    genre: \"Anime, EBM\",\n  },\n  {\n    slug: \"oscar_peterson\",\n    midis: [\"oscar-peterson---jazz-exercises-for-piano---exercise-1\"],\n  },\n  {\n    slug: \"boogie_woogie\",\n    midis: [\n      \"easy-boogie-woogie\",\n      \"surfboard-boogie\",\n      \"boogie-woogie\",\n      \"original-boogie-woogie\",\n      \"boogie-woogie---misc-traditional-boogie-woogie-_-basic-piano-solo-for-beginners\",\n      \"pine-top-s-boogie-woogie---transcription-of-take-b\",\n      \"suzan-boogie-woogie-in-c---easy-piano-riff---basic-boogie\",\n      \"boogie-blues-etude-1974---oscar-peterson-piano-solo-transcription\",\n      \"boogie-woogie---monday-struggle---by-albert-ammons\",\n      \"boogie-woogie-stomp\",\n\n      \"lewis-boogie-rock-n-roll-piano-arrangement\",\n\n      \"boogie-woogie-7a11a3\",\n      \"boogie-woogie-piano\",\n      \"some-boogie-woogie-by-albert-ammons-friends\",\n      \"bumble-boogie---adapted-from-the-flight-of-the-bumble-bee\",\n      \"jingle-bells-boogie-woogie-cover\",\n      \"jingle-bells-boogie\",\n    ],\n    genre: \"Boogie Woogie\",\n    // This is a genre-based collection, not tied to a specific composer.\n    style: \"Boogie Woogie\",\n  },\n  {\n    slug: \"fur_elise_covers\",\n    midis: [\n      \"fur-elise-reharmonization-cover\",\n      \"fur-elise-but-elise-is-scary\",\n      \"Fr_Elise\",\n    ],\n    // Cover of Beethoven's piece, so no new composer or style info necessary here.\n  },\n  {\n    slug: \"rhcp_red_hot_chili_peppers\",\n    midis: [\"road-trippin---red-hot-chili-peppers\"],\n    composerBirthYear: 1970,\n    genre: \"Funk Rock, Alternative Rock\",\n    country: \"USA\",\n  },\n  {\n    slug: \"martha_mier\",\n    midis: [\n      \"to-catch-a-dream---martha-mier\",\n      \"peppermint-rag---martha-mier\",\n      \"downright-happy-rag\",\n      \"just-struttin-along\",\n      \"surfboard-boogie\",\n      \"enchanted-waterfall---martha-mier\",\n      \"baroque-expression---martha-mier\",\n    ],\n    composerBirthYear: 1955,\n    genre: \"Classical, Ragtime\",\n    style: \"Ragtime, Light Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"scary\",\n    midis: [\n      \"fur-elise-but-elise-is-scary\",\n      \"funeral-march---f.-chopin-halloween-scary-version---easy-to-intermediate\",\n    ],\n    genre: \"Classical\",\n    style: \"Spooky Variations\",\n    // No specific country, these are just spooky versions of classical pieces.\n  },\n  {\n    slug: \"carlos_chavez\",\n    midis: [\"diez-preludios-para-piano---carlos-chavez\", \"ponchito-al-hombro\"],\n    composerBirthYear: 1899,\n    genre: \"Classical\",\n    style: \"Nationalist\",\n    country: \"Mexico\",\n  },\n  {\n    slug: \"anoushiravan_rohani\", // pure harmonic minor\n    midis: [\n      \"il-coure-mio---anoushiravan-rohani\",\n      \"maadar\",\n      \"gol-e-sang---anoushiravan-rohani\",\n      \"aziz-joon---anoushiravan-rohani\",\n      \"soltaan-e-ghalbhaa---anoushiravan-rohani\",\n      \"potpurri---anoshirvan-rohani\",\n      \"saraab---anoushiravan-rohani\",\n      \"bahaneh\",\n      \"queen-of-hearts\",\n    ],\n    composerBirthYear: 1959,\n    genre: \"World, Traditional\",\n    style: \"Persian, Classical\",\n    country: \"Iran\",\n  },\n  {\n    slug: \"alexei_stanchinsky\",\n    midis: [\n      \"song-without-words-no.-1-in-c-minor---stanchinsky\",\n      \"song-without-words-no.-2-in-d-minor---stanchinsky\",\n      \"song-without-words-no.-3-in-c-minor---stanchinsky\",\n    ],\n  },\n  {\n    slug: \"evgeny_doga\",\n    midis: [\n      \"vals---ie.-doga\",\n      \"sonet---ie.-doga\",\n      \"meditation---ie.-doga\",\n      \"i-love-you---ie.-doga\",\n      \"portret---e.-doga\",\n      \"pollyanna---ie.-doga\",\n    ],\n    composerBirthYear: 1937,\n    genre: \"Classical, Film Score\",\n    style: \"Romantic, Cinematic\",\n    country: \"Moldova\",\n  },\n  {\n    slug: \"marc_sabatella\",\n    midis: [\n      \"reunion\",\n      \"different-worlds\",\n      \"for-dad\",\n      \"coming-back-home\",\n      \"birthday-rag\",\n      \"fugue\",\n      \"autumn-fires\",\n    ],\n    composerBirthYear: 1966,\n    genre: \"Jazz, Classical\",\n    style: \"Jazz, Ragtime\",\n    country: \"USA\",\n  },\n  {\n    slug: \"raimonds_pauls\",\n    midis: [\n      \"million-alyh-roz---raimonds-pauls\",\n      \"ischezli-solnechnye-dni\",\n      \"raymond-pauls-ptichka-na-vetke\",\n      \"zelyonyy-svet---valeriy-leontev-raymond-pauls\",\n    ],\n    composerBirthYear: 1936,\n    genre: \"Pop, Jazz, Classical\",\n    style: \"Popular, Light Classical\",\n    country: \"Latvia\",\n  },\n  {\n    slug: \"alkan\",\n    midis: [\"nocturne-opus-22-in-b-major---alkan\"],\n    composerBirthYear: 1813,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"robert_d_vandall\",\n    midis: [\n      \"prelude-no.-4-in-f-major---robert-d.-vandall\",\n      \"rockin-at-the-hall\",\n      \"witches-waltz---robert-d.-vandall\",\n      \"slide-easy---robert-d.-vandall\", // test 12-bar blues search\n      \"in-the-groove---robert-d.-vandall-piano-trio\",\n      \"prelude-no.-7-in-b-minor\", // minor circle of fifths\n    ],\n    composerBirthYear: 1945,\n    genre: \"Classical, Educational\",\n    style: \"Jazz, Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"malcolm_arnold\",\n    midis: [\n      \"fanfara-for-horn---malcolm-arnold-fantasy-for-horn\",\n      \"fantasy-for-trumpet-op.-100---malcolm-arnold-excerpt-from-fantasy-for-trumpet-op.-100\",\n      \"fantasy-for-trombone\",\n      \"siciliano-from-prelude-siciliano-and-rondo\",\n      \"eight-children-s-pieces-op.36---malcolm-arnold\",\n      \"piano-reduction-mvt-i-from-four-cornish-dances---malcolm-arnold\",\n      \"whistle-down-the-wind---malcolm-arnold\",\n    ],\n    composerBirthYear: 1921,\n    genre: \"Classical\",\n    style: \"British, Orchestral\",\n    country: \"UK\",\n  },\n  {\n    slug: \"mark_fradkin\",\n    midis: [\n      \"techyot-reka-volga---muzyka-m-fradkin\",\n      \"doroga-na-berlin---mark-grigorevich-fradkin\",\n      \"sluchaynyy-vals---m.-fradkin\",\n    ],\n    composerBirthYear: 1926,\n    genre: \"Film Score, Classical\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"aleksey_rybnikov\",\n    midis: [\n      \"ya-tebya-nikogda-ne-zabudu---o.-ribnikov\",\n      \"pesnjakrasnoishapochki\",\n      \"pesnya-krasnoy-shapochki---a.-rybnikov\",\n      \"pesnya-krasnoy-shapochki---aleksey-rybnikov\",\n      \"poslednyaya-poema-the-last-poem---aleksey-rybnikov\", // many strategies\n      \"pisnya-kota-bazilio-ta-lisici-alisi---o.-ribnikov\",\n      \"meeting-a.-rybnikov---zustrich-o.-ribnikov\",\n      \"misyachna-pisnya---o.-ribnikov\",\n      \"main---alexey-rybnikov-golovna-tema---oleksiy-ribnikov\",\n      \"belyy-shipovnik---o.-ribnikov\",\n      \"tema-mriy---oleksiy-ribnikov-dream-theme-alexey-rybnikov\",\n      \"v-parke---aleksey-rybnikov-v-parke---aleksey-rybnikov-iz-kinofilma-vam-i-ne-snilos\",\n      \"recognition-alexey-rybnikov-a.-rybnikov-priznanie\",\n      \"groza---aleksey-rybnikov-iz-k-f-cherez-ternii-k-zvezdam\",\n      \"a.-rybnikov----the-lamplighter-s-song-ost-the-adventures-of-buratino-1976\",\n      \"ostrov-sokrovishch-aleksey-lvovich-rybnikov\",\n      \"mlechnyy-put-milky-way\",\n    ],\n    composerBirthYear: 1945,\n    genre: \"Film Score, Classical\",\n    style: \"Film, Popular Music\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"aleksandr_zatsepin\",\n    midis: [\n      \"pesenka-o-medvedyah---a.-zacepin\",\n      \"s-lyubovyu-vstretitsya---a.-zacepin\",\n      \"volki-gonyat-olenya---a.-zacepin\",\n      \"hudozhniki---a.-zacepin\",\n      \"island-of-misfortune-ostrov-nevezeniya---o.-zacepin\",\n      \"proshchay---a.-zacepin\",\n      \"tango-do-k-f-12-stulev---o.-zacepin\",\n      \"kak-zhe-mne-teper-tebya-lyubit---a.-zacepin\", // triton sub\n      \"lunnaya-serenada---a.-zacepin\",\n      \"volshebnik-nedouchka---aleksandr-zacepin\",\n    ],\n    composerBirthYear: 1926,\n    genre: \"Film Score, Popular\",\n    style: \"Film, Popular Music\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"tihon_hrennikov\",\n    midis: [\n      \"vals---t.-hrennikov\",\n      \"vals-davnim-davno---t.-hrennikov\",\n      \"prelyudiya---t.-hrennikov\",\n      \"moskovskie-okna-bossa-nova\",\n      \"chto-tak-serdce-rastrevozheno\",\n      \"marsh-artilleristov---t.-n.-hrennikov\",\n      \"proshchanie---tihon-hrennikov-proshchanie\",\n      \"koliskova-svitlani---t.-hrennikov\",\n      \"chastushki---t.-hrennikov\",\n    ],\n    composerBirthYear: 1913,\n    genre: \"Classical\",\n    style: \"Russian, Nationalist\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"sergey_banevich\",\n    midis: [\n      \"fantaziya---s.-banevich\",\n      \"soldatik-i-balerina\",\n      \"at-the-station-na-vokzale\",\n      \"road\", // seventh chords in minor, change of meter\n      \"pesenka-pro-vovu-rasteryashku\", // Iadd6 = ii65, V+/IV\n    ],\n    composerBirthYear: 1952,\n    genre: \"Classical\",\n    style: \"Contemporary\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"bslick\",\n    midis: [\n      \"let-go-piggy-book-2-soundtrack---bslick\",\n      \"the-untold-story-ft.-melissa-medina---bslick\",\n      \"archie-theme-scary-shanty---bslick\",\n    ],\n    // Unknown composer and country, genre/style unclear.\n  },\n  {\n    slug: \"alan_hovhaness\",\n    midis: [\n      \"mountain-lullaby---jealous-of-the-birds-piano-solo\",\n      \"prayer-of-st-gregory---alan-hovhaness\",\n      \"symphony-no.-2-mysterious-mountain---alan-hovhaness-mysterious_mountain_iii\",\n    ],\n    composerBirthYear: 1911,\n    genre: \"Classical\",\n    style: \"Symphonic, Mystical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"duke_ellington\",\n    midis: [\n      \"solitude---duke-ellington\",\n      \"solitude---duke-ellington-eddie-de-lange-and-irving-mills-piano-version\",\n      \"solitude---duke-ellington-as-played-by-roland-hanna\",\n    ],\n    composerBirthYear: 1899,\n    genre: \"Jazz, Swing\",\n    style: \"Big Band, Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"rhythm_changes\",\n    midis: [\n      \"oleo---sonny-rollins\",\n      \"cottontail_sax_soli\",\n      \"cotton-tail---duke-ellington\",\n      \"cotton-tail---duke-ellington-musescore3\",\n      \"cotton-tail\",\n      \"dexterity\",\n      \"dexterity---charlie-parker\",\n      \"fungii-mama---richard-blue-mitchell\",\n    ],\n    genre: \"Jazz\",\n    style: \"Bebop, Swing\",\n    country: \"USA\",\n  },\n  { slug: \"cherokee_changes\", midis: [] },\n  {\n    slug: \"overcooked\",\n    midis: [\n      \"overcooked---menu-theme\",\n      \"overcooked-2-medley\",\n      \"overcooked-medley\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Video Game Music\",\n    style: \"Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"l_m_gottschalk\",\n    midis: [\n      \"grande-tarantelle---gottschalk-1872\",\n      \"the-dying-swan-1870\",\n      \"souvenirs-d-andalousie-1855\",\n      \"morte-l.-m.-gottschalk-in-memoriam\", // corrupted grid somehow\n      \"bamboula-1849\",\n      \"the-banjo-1855\",\n      \"tremolo---gottschalk-1868\",\n      \"le-bananier-chanson-negre-de-l.m-gottschalk-1846\",\n      \"souvenir-de-porto-rico-200-i.e.-206-follower-special\",\n      \"god-save-the-queen---gottschalk-c.1860\",\n    ],\n    composerBirthYear: 1829,\n    genre: \"Romantic\",\n    style: \"Virtuoso Piano, Early American\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jean_henri_ravina\",\n    midis: [\n      \"etude---ravina-no.-22-op.-50---h-moll\",\n      \"petit-bolero-op.-62---jean-henri-ravina\",\n      \"nocturne-op.112---jean-henri-ravina\",\n    ],\n    composerBirthYear: 1813,\n    genre: \"Romantic\",\n    style: \"French Romanticism\",\n    country: \"France\",\n  },\n  {\n    slug: \"jean-luc_ponty\",\n    midis: [\"faith-in-you\"],\n    composerBirthYear: 1942,\n    genre: \"Jazz Fusion\",\n    style: \"Jazz, Fusion\",\n    country: \"France\",\n  },\n  {\n    slug: \"placebo\",\n    midis: [\"every-you-every-me---placebo\", \"the-bitter-end---placebo\"],\n    composerBirthYear: 1974,\n    genre: \"Alternative Rock\",\n    style: \"Alternative Rock, Britpop\",\n    country: \"UK\",\n  },\n  {\n    slug: \"john_cacavas\",\n    midis: [\n      \"jazzy-sax---john-cacavas\",\n      \"corsage-for-winds---john-cacavas-string-quartet\",\n    ],\n    composerBirthYear: 1930,\n    genre: \"Jazz\",\n    style: \"Jazz, Classical Crossover\",\n    country: \"USA\",\n  },\n  {\n    slug: \"joe_zawinul\",\n    midis: [\n      \"birdland-piano\",\n      \"mercy-mercy-mercy---joe-zawinul\",\n      \"mercy-mercy-mercy---joe-zawinul-2\",\n      \"boogie-woogie-waltz-zawinul-leadsheet\",\n      \"walk-tall---joe-zawinul\",\n      \"125th-street-congress-zawinul-leadsheet\",\n      \"cucumber-slumber-leadsheet-johnson-zawlinul\",\n    ],\n    composerBirthYear: 1932,\n    genre: \"Jazz Fusion\",\n    style: \"Fusion, Funk, Jazz\",\n    country: \"Austria\",\n  },\n  {\n    slug: \"lucas_pope\",\n    midis: [\"papers-please\"],\n    composerBirthYear: 1977,\n    genre: \"Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"asuka_ota_and_ryo_nagamatsu\",\n    midis: [\"coconut-mall---mario-kart-wii\"],\n  },\n  {\n    slug: \"asuka_hayazaki\",\n    midis: [\n      \"daisy-circuit---mario-kart-wii\",\n      \"winning-results-race---mario-kart-wii\",\n    ],\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n    composerBirthYear: 1981,\n  },\n  {\n    slug: \"selected\",\n    midis: [\n      \"monk-maz-koshia---the-legend-of-zelda-breath-of-the-wild-\",\n      \"vizisi\",\n      \"marx-theme-from-kirby-super-star---jun-ishikawa\",\n    ],\n  },\n  {\n    slug: \"manaka_kataoka\",\n    midis: [\n      \"main-theme---the-legend-of-zelda-tears-of-the-kingdom---manaka-kataoka-yasuaki-iwata-and-hajime-wakai-totk-sheet-music\",\n      \"kass-theme--full-the-legend-of-zelda-breath-of-the-wild\",\n      \"attack-on-vah-naboris---manaka-kataoka\",\n      \"monk-maz-koshia---the-legend-of-zelda-breath-of-the-wild-\",\n    ],\n    composerBirthYear: 1985,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"altin_gun\",\n    midis: [\n      \"goca-dunya---altin-gun-goca-dunya.xml\",\n      \"rakiya-su-katamam---selami-sahin-altin-gun\",\n      \"badi-sabah-olmadan---altin-gun-badi-sabah-olmadan.xml\",\n    ],\n    composerBirthYear: 1970,\n    genre: \"Psychedelic Folk, Turkish Folk\",\n    style: \"Folk, Psychedelic\",\n    country: \"Netherlands, Turkey\",\n  },\n  {\n    slug: \"herbie_hancock\",\n    midis: [\"cantaloupe-island\"],\n    composerBirthYear: 1940,\n    genre: \"Jazz\",\n    style: \"Jazz, Fusion\",\n    country: \"USA\",\n  },\n  {\n    slug: \"michel_camilo\",\n    midis: [\n      \"one-more-once---michel-camilo\", // 12-bar blues\n      \"michel-camilo-from-within\",\n      \"blue-bossa-salsa---michel-camilo\",\n      \"caribe---michel-camilo\",\n    ],\n    composerBirthYear: 1954,\n    genre: \"Jazz\",\n    style: \"Latin Jazz\",\n    country: \"Dominican Republic\",\n  },\n  {\n    slug: \"hiromi_uehara\",\n    midis: [\n      \"the-tom-and-jerry-show---hiromi-uehara\",\n      \"hiromi-uehara---haze\",\n      \"hiromi-uehara---old-castle-by-the-river-in-the-middle-of-a-forest\",\n      \"mr.-c.c.-cm-ver.---hiromi-uehara\",\n      \"spark-by-hiromi-uehara-the-trio-project-piano-score\",\n    ],\n    composerBirthYear: 1979,\n    genre: \"Jazz\",\n    style: \"Jazz Fusion, Contemporary Jazz\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"george_duke\",\n    midis: [\"if-you-will---george-duke\", \"george-duke---it-s-on\"],\n    composerBirthYear: 1946,\n    genre: \"Jazz\",\n    style: \"Fusion, R&B, Funk\",\n    country: \"USA\",\n  },\n  {\n    slug: \"tonal_stretch\",\n    midis: [\n      \"jurassic-park---journey-to-the-island\",\n      \"na-krilah-vitru---a.-minov\",\n      \"narodniy-tanec---miroslav-skorik\",\n      \"skyscraper---wynn-anne-rossi\",\n      \"team-fortress---rise-of-the-living-bread---mike-morasky\",\n      \"eight-children-s-pieces-op.36---malcolm-arnold\",\n      \"the-tom-and-jerry-show---hiromi-uehara\",\n      \"irken-armada-invasion-zim-s-theme---mattias-hakulinen-and-pontus-askbrink\",\n      \"do-you-remember-king-s-theme---in-stars-and-time\",\n      \"marx-theme-from-kirby-super-star---jun-ishikawa\",\n      \"twilight-in-benares-1923\",\n      \"alien-lair\",\n      \"greenpath---christopher-larkin\",\n      \"qiao-shang-nozhan-i-battle-on-the-bridge---final-fantasy-tactics-ps1---hitoshi-sakimoto\",\n      \"heroes-of-might-magic-iii---fortress-town-theme\",\n      \"lavender-town-pokemon-r-b-y\",\n      \"amor-sacro---giovanni-allevi\",\n    ],\n  },\n  {\n    slug: \"gibran_alcocer\",\n    midis: [\n      \"idea-15---gibran-alcocer\",\n      \"idea-22---gibran-alcocer\",\n      \"idea-n.10---gibran-alcocer\",\n      \"idea-9---gibran-alcocer\",\n\n      \"idea-20---gibran-alcocer\",\n      \"idea-7---gibran-alcocer\",\n      \"idea-1---gibran-alcocer\",\n      \"idea-5---gibran-alcocer\",\n    ],\n    composerBirthYear: 2003,\n    genre: \"21st Century Piano\",\n    country: \"Mexico\",\n  },\n  {\n    slug: \"aaron_copland\",\n    midis: [\n      \"copland_s_third_symphony_first_movement\",\n      \"copland_symphony_3_mov_1_rewired\",\n      \"appalachian-spring---aaron-copland-appalachian-spring\",\n      \"hoe-down---aaron-copland\",\n      \"at-the-river-g\",\n      \"aaron-copland---story-of-our-town\",\n      \"the-cat-and-the-mouse\",\n    ],\n    composerBirthYear: 1900,\n    genre: \"Classical\",\n    style: \"American Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"revaz_laghidze\",\n    midis: [\"simg-era-t-bilisze---revaz-lag-iz-e\"],\n    composerBirthYear: 1930,\n    genre: \"Classical\",\n    style: \"Georgian Classical\",\n    country: \"Georgia\",\n  },\n  {\n    slug: \"ralph_vaughan_williams\",\n    midis: [\"lark-ascending\"],\n  },\n  {\n    slug: \"john_williams\",\n    midis: [\n      \"john-william---jurassic-park-theme\",\n      \"jurassic-park-theme---john-williams-jurrasic-park-theme---john-williams\",\n      \"somewhere-in-my-memory-by-john-williams\",\n      \"theme-from-schindler-s-list---piano-solo\",\n      \"jurassic-park---journey-to-the-island\", // what's going on?\n      \"e.t.-end-credits-piano-solo\",\n      \"e.t.-theme---ywcm\",\n      \"jazz-autographs---john-williams-jazz-autographs-from-the-terminal---john-williams\",\n      \"holiday-flight-from-home-alone-2---john-williams-joni-leiman-solo-piano-transcription\",\n      \"jaws-theme\",\n      \"the-tale-of-viktor-navorski-john-williams\",\n      \"catch-me-if-you-can-sax-solo\",\n      \"nbc-sunday-night-football-theme\",\n      \"the-fabelmans---john-williams\",\n      \"helena-s-theme---john-williams-from-indiana-jones-and-the-dial-of-destiny\",\n      \"with-malice-toward-none---trumpet-solo-john-williams\", // very coplandinan quartal language\n    ],\n    composerBirthYear: 1932,\n    genre: \"Film Score\",\n    style: \"Film Music, Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"john_philip_sousa\",\n    midis: [\n      \"the-liberty-bell-march---john-philip-sousa---1893\",\n      \"semper-fidelis-piano-john-philip-sousa\",\n      \"the-stars-and-stripes-forever--john-f-sousa---arr.-v-horowitz\",\n    ],\n    composerBirthYear: 1854,\n    genre: \"March\",\n    style: \"Military March, American Patriotic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"cameron_lee_simpson\",\n    midis: [\n      \"mr.rogers-theme-wont-you-be-my-neighbor-arr.-cameron-lee-simpson\",\n      \"picking-the-chicken---cameron-lee-simpson---pjotr-kolster\",\n    ],\n    composerBirthYear: 1930,\n    genre: \"Pop, Childrens Music\",\n    style: \"Childrens Music, Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"chick_corea\",\n    midis: [\n      \"spain---chick-corea\",\n      \"children-s-song-no.-7---chick-corea\",\n      \"children-s-song-no.-6\",\n      \"children-s-song-2\",\n      \"children-s-song-no.-5\",\n\n      \"tones-for-joan-s-bones\",\n      \"fingerprints---chick-corea\",\n      \"chick-corea-s-scriabin\",\n    ],\n    composerBirthYear: 1941,\n    genre: \"Jazz\",\n    style: \"Jazz Fusion, Latin Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"dennis_alexander\",\n    midis: [\n      \"reflections-by-dennis-alexander\",\n      \"titanium_toccata-50\",\n      \"appaloosa-spirit---dennis-alexander\",\n      \"going-places---dennis-alexander\",\n      \"toccate---dennis-alexander-.\",\n      \"valse-romantique-sriram\",\n      \"grumpy-old-witch---dennis-alexander\",\n      \"nocturne-in-e-flat-major---dennis-alexander\",\n    ],\n    composerBirthYear: 1957, // Dennis Alexander was born in 1957\n    genre: \"Classical\", // Mainly classical, with some contemporary influences\n    style: \"Romantic, Contemporary\", // Known for both romantic and contemporary piano works\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"fabrizio_paterlini\",\n    midis: [\n      \"fabrizio-paterlini---snow\",\n      \"waltz---fabrizio-paterlini\",\n      \"all-my-joy-all-my-pain---fabrizio-paterlini\",\n      \"rue-des-trois-freres---fabrizio-paterlini\",\n      \"fabrizio-paterlini---my-misty-mornings\",\n    ],\n    composerBirthYear: 1973,\n    country: \"Italy\",\n  },\n  {\n    slug: \"manfred_schmitz\",\n    midis: [\n      \"manfred-schmitz---kleine-pop-romanze-short-pop-romance\",\n      \"barkarole---manfred-schmitz\",\n      \"zimniy-vecher-winter-evening---manfred-shmitc-manfred-schmitz\",\n      \"am-abend---manfred-schmitz\",\n      \"elegie---manfred-schmitz\",\n      \"mickey-mouse---manfred-schmitz\", // rag\n      \"andrea---manfred-schmitz\",\n      \"for-linda-king---manfred-schmitz\",\n      \"manfredschmitzunpeutriste\",\n      \"old-movie-man---manfred-schmitz\",\n      \"bagatelle---manfred-schmitz\",\n      \"romance-melancolique---manfred-schmitz-easy\",\n      \"praerie-song---manfred-schmitz\",\n      \"episode---manfred-schmitz\",\n      \"spieluhr-serenade---manfred-schmitz\",\n      \"poetische-skizze---manfred-schmitz\",\n      \"prelude---manfred-schmitz\",\n    ],\n    composerBirthYear: 1950, // Born in 1950, known for contemporary classical compositions\n    genre: \"Teacher Music, Classical, Pop\", // Combines classical and pop elements\n    country: \"Germany\", // German composer\n  },\n  {\n    slug: \"ignacy_feliks_dobrzynski\",\n    midis: [\n      \"feliks-dobrzynski---farewell-nocturne\",\n      \"nocturne-op.21-no1---ignacy-feliks-dobrzynski\",\n      \"nocturne-in-f-minor-op.24-no.1---ignacy-feliks-dobrzynski\",\n    ],\n    composerBirthYear: 1807, // Born in 1807\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic period composer\n    country: \"Poland\", // Polish composer\n  },\n  {\n    slug: \"ignacy_jan_paderewski\",\n    midis: [\n      \"elegy-op.4---ignacy-jan-paderewski\",\n      \"miscellanea-op.16---ignacy-jan-paderewski-no.4-nocturne\",\n      \"piano-concerto-op.17---ignacy-jan-paderewski\",\n      \"ignacy-jan-paderewski-sarabande-op.-14-no-2\",\n    ],\n    composerBirthYear: 1860, // Born in 1860\n    genre: \"Classical\", // Classical, especially known for his piano compositions\n    style: \"Late-Romantic\", // Late Romantic era style\n    country: \"Poland\", // Polish composer and statesman\n  },\n  {\n    slug: \"nikolay_zubov\",\n    midis: [\n      \"ne-uhodi-pobud-so-mnoyu-don-t-go-stay-with-me-romance\",\n      \"o-ni-nemaie-mriyi---m.-zubov\",\n      \"poglyad-tvoyih-chornih-ochey---m.-zubov\",\n    ],\n    composerBirthYear: 1915, // Born in 1915\n    genre: \"Romantic\", // Romantic and early 20th-century style\n    style: \"Romantic\", // Predominantly Romantic style\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"mykola_mozgovyy\",\n    midis: [\n      \"minaie-den-minaie-nich---mikola-mozgoviy\",\n      \"moya-zemlya---mikola-mozgoviy\",\n      \"zacharuy-nas-lyubov---mikola-mozgoviy\",\n      \"nazvi---m.-mozgoviy\",\n    ],\n    composerBirthYear: 1943, // Born in 1943\n    genre: \"Folk, Classical\", // Combines folk music with classical traditions\n    style: \"Romantic, Folk\", // Romantic influences with Ukrainian folk music\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"myroslav_skoryk\",\n    midis: [\n      \"melodiya-lya-minor-dlya-skripki-i-fortepiano---m.-skorik\",\n      \"namalyuy-meni-nich---m.-skorik\",\n      \"listok-do-albomu---miroslav-skorik\",\n      \"narodniy-tanec---miroslav-skorik\",\n      \"zhartivliva-p-iesa---miroslav-skorik\",\n      \"sini-ochi---miroslav-skorik\",\n      \"nav-yazliviy-motiv---miroslav-skorik\",\n      \"v-narodnomu-stili---miroslav-skorik\",\n      \"tanec-iz-guculskogo-triptiha\",\n    ],\n    composerBirthYear: 1938, // Born in 1938\n    genre: \"Classical, Folk\", // Classical and folk influences\n    style: \"Contemporary, Folk\", // Contemporary with traditional folk elements\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"moritz_moszkowski\",\n    midis: [\n      \"moszkowski---la-jongleuse-op.52-no.4\",\n      \"tarentelle-10-pieces-mignonnes-op.-77-no.-6-m.-moszkowski\",\n      \"spanish-dance---moritz-moszkowski\",\n      \"moszkowski---etincelles-op.36-no.6\",\n    ],\n    composerBirthYear: 1854, // Born in 1854\n    genre: \"Classical\", // Classical and Romantic composer\n    style: \"Romantic\", // Romantic era style\n    country: \"Poland\", // Polish composer\n  },\n  {\n    slug: \"platon_mayboroda\",\n    midis: [\n      \"bili-kashtani---platon-mayboroda\",\n      \"kiyivskiy-vals---p.-mayboroda\",\n      \"ridna-mati-moya-pisnya-pro-rushnik---p.-mayboroda\",\n    ],\n    composerBirthYear: 1918, // Born in 1918\n    genre: \"Folk, Classical\", // Combines Ukrainian folk and classical traditions\n    style: \"Romantic, Folk\", // Romantic and folk elements\n    country: \"Ukraine\", // Ukrainian composer\n  },\n\n  { slug: \"max_richter\", midis: [] },\n  {\n    slug: \"yaroslav_kis\",\n    midis: [\"liricheskiy-vals---yaroslav-kis\"],\n    composerBirthYear: 1980, // Born in 1980\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic piano music\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"yuriy_zubay\",\n    midis: [\n      \"babusya-yagusya---yu.-zubay\",\n      \"osinnya-pisnya---yuriy-zubay\",\n      \"koncertino---yu.-zubay\",\n    ],\n    composerBirthYear: 1952, // Born in 1952\n    genre: \"Classical, Folk\", // Classical with folk influences\n    style: \"Folk, Contemporary\", // Folk-inspired classical compositions\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"loginvovchyk_single\",\n    midis: [\n      \"na-krilah-vitru---a.-minov\",\n      \"dobriy-vechir-dole---o.-pushkarenko\",\n    ],\n    genre: \"Folk, Classical\", // Folk and classical music\n    style: \"Folk\", // Traditional folk music\n    country: \"Ukraine\", // Ukrainian composers\n  },\n  {\n    slug: \"valery_zubkov\",\n    midis: [\n      \"vozvrashchenie---v.-zubkov-return---v.-zubkov\",\n      \"gypsy-v.-zubkov-cygan-v.-zubkov\", // same?\n    ],\n    composerBirthYear: 1949, // Born in 1949\n    genre: \"Classical, Folk\", // Classical with folk influences\n    style: \"Folk\", // Ukrainian folk and classical music\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"john_field\",\n    midis: [\n      \"nocturne-no.5---h.37---john-field---edited-by-liszt\",\n      \"nocturne-no.1---field\",\n      \"john-field-nocturne-no.-12\",\n    ],\n    composerBirthYear: 1782, // Born in 1782\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Early Romantic composer\n    country: \"Ireland\", // Irish composer\n  },\n  {\n    slug: \"fuzzy\",\n    midis: [\n      \"julenat\",\n      \"en-gammel-knark---gamle-er-unge-der-er-blevet-aeldre\",\n      \"en-by-i-provinsen-mus3\",\n    ],\n    genre: \"Pop, Folk\", // Pop and folk influences\n    style: \"Pop, Folk\", // Pop and traditional folk\n    country: \"Denmark\", // Danish artists\n  },\n  {\n    slug: \"ebbe_raun\",\n    midis: [\n      \"melodien-som-evert-taube-aldrig-skrev\",\n      \"noget-om-mit-hjerterum\",\n      \"ingen-er-evig-ung\",\n    ],\n    genre: \"Folk\", // Primarily folk music\n    style: \"Folk\", // Folk music\n    country: \"Denmark\", // Danish composer\n  },\n  {\n    slug: \"ringmasters\",\n    midis: [\n      \"kung-liljekonvalje\",\n      \"you-ll-never-walk-alone\",\n      \"between-the-devil-and-the-deep-blue-sea\",\n    ],\n    composerBirthYear: 1975,\n    genre: \"Barbershop\", // Barbershop style\n    style: \"Barbershop\", // Traditional barbershop quartet\n    country: \"Sweden\", // Swedish barbershop quartet\n  },\n  {\n    slug: \"white_star_line_1912\",\n    midis: [\n      \"the-quaker-girl-valse---lionel-monckton-carl-kiefert-1910\", // ii-V->V7/V\n      \"barber-of-seville-overture\",\n      \"overture-to-poet-and-peasant---franz-von-suppe-piano-reduction-solo\",\n    ],\n    composerBirthYear: 1870,\n    genre: \"Classical\", // Classical music\n    style: \"Romantic\", // Late Romantic period\n    country: \"UK\", // British composers\n  },\n  {\n    slug: \"louis_vierne\",\n    midis: [\"vierne-organ-symphony-no.-1-part-vi---final\"],\n  },\n  {\n    slug: \"roberto_cacciapaglia\",\n    midis: [\n      \"roberto-cacciapaglia---tema-celeste\",\n      \"roberto-cacciapaglia---seconda-navigazione\",\n      \"roberto-cacciapaglia---atlantico\",\n    ],\n  },\n  {\n    slug: \"tchaikovsky\",\n    midis: [\n      \"trepak-russian-dance---tchaikovsky---piano-transcription\",\n      \"dance-of-the-reed-flutes-the-nutcracker-suite---tchaikovsky\",\n      \"chinese-dance---the-nutcracker-suite---peter-tchaikovsky\",\n      \"tchaikovsky-waltz-of-the-flowers-from-the-nutcracker-piano-4-hands\",\n      \"dance-of-the-sugar-plum-fairy\",\n      \"swan-lake-theme---tchaikovsky\",\n\n      \"the-seasons-op.-37b---1.-january-at-the-fireside-t.-yaskawa\",\n\n      \"march-of-the-toy-soldiers---pyotr-ilyich-tchaikovsky\",\n\n      \"tchaikovsky---album-for-the-young-1.-morning-prayer\",\n      \"tchaikovsky---album-for-the-young-2.-winter-morning\",\n      \"tchaikovsky---album-for-the-young-3.-the-little-horseman\",\n    ],\n    composerBirthYear: 1840, // Born in 1840\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic era composer\n    country: \"Russia\", // Russian composer\n  },\n  { slug: \"chad_lawson\", midis: [\"stay---chad-lawson\"] },\n  {\n    slug: \"rob_costlow\",\n    midis: [\n      // Sophomore Jinx, 2005\n      \"rob-costlow---bliss\",\n      \"rob-costlow---i-do\",\n      \"rob-costlow---forever\",\n      \"rob-costlow---goodbyes\",\n      \"rob-costlow---oceans\",\n    ],\n  },\n  {\n    slug: \"wagner\",\n    midis: [\n      \"wagner-siegfried-s-funeral-march-from-gotterdammerung-piano-solo\",\n      \"wagner-elsa-s-procession-to-the-cathedral-from-the-opera-lohengrin-piano-solo\",\n      \"wagner_tannhauser_overture_piano_solo\",\n    ],\n    composerBirthYear: 1813, // Born in 1813\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic opera composer\n    country: \"Germany\", // German composer\n  },\n  {\n    slug: \"timothy_brown\",\n    midis: [\n      \"dance-of-the-wind---timothy-brown\",\n      \"toccatina---timothy-brown\",\n      \"summer-song\",\n      \"scherzino---timothy-brown\", // i like this one. simple and effective\n    ],\n    composerBirthYear: 1961, // Born in 1961\n    genre: \"Contemporary Classical\", // Contemporary classical music\n    style: \"Minimalism\", // Minimalism style\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"lionel_yu\",\n    midis: [\n      \"fight-for-freedom---lionel-yu\",\n      \"i-will-love-you-always---lionel-yu\",\n      \"the-cursed-path\",\n    ],\n    composerBirthYear: 1989,\n    genre: \"Contemporary\", // Contemporary classical and cinematic\n    style: \"Cinematic\", // Cinematic and contemporary classical\n    country: \"China, USA\", // American composer\n  },\n  {\n    slug: \"melody_bober\",\n    midis: [\n      \"stealth-mode---melody-bober\",\n      \"blues-006---blyuz-006\",\n      \"midnight-ride---melody-bober-midnight-ride\",\n      \"melody-bober----yellowhammer-stomp\",\n      \"antique-music-box---melody-bober\",\n      \"dance-of-the-autumn-leaves---melody-bober\",\n    ],\n    composerBirthYear: 1952, // Born in 1952\n    genre: \"Classical, Educational\", // Classical with an educational focus\n    style: \"Contemporary, Educational\", // Contemporary educational music\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"wynn-anne_rossi\",\n    midis: [\n      \"skyscraper---wynn-anne-rossi\",\n      \"cafe-cha-cha---wynn-anne-rossi\",\n      \"alma-del-tango---wynn-anne-rossi\",\n    ],\n    composerBirthYear: 1964, // Born in 1964\n    genre: \"Classical, Jazz\", // Classical with jazz influences\n    style: \"Contemporary, Jazz\", // Contemporary classical with jazz influences\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"jennifer_linn\",\n    midis: [\"the-dreamcatcher\", \"snowcrystals---jennifer-linn\"],\n    composerBirthYear: 1978, // Born in 1978\n    genre: \"Classical\", // Classical music\n    style: \"Contemporary\", // Contemporary classical music\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"john_adams\",\n    midis: [\n      \"piano-arr.-short-ride-in-a-fast-machine---john-adams\",\n      \"phrygian-gates-china-gates---john-adams\",\n    ],\n    composerBirthYear: 1947, // Born in 1947\n    genre: \"Minimalism\", // Minimalism composer\n    style: \"Minimalism\", // Famous for Minimalism music\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"ignacio_cervantes\",\n    midis: [\n      \"no-me-toques-danza-cubana-de-ignacio-cervantes\",\n      \"soledad-.-habanera-par-ignazio-cervantes\",\n      \"los-tres-golpes-danza-ignacio-cervantes\",\n    ],\n    composerBirthYear: 1847, // Born in 1847\n    genre: \"Classical\", // Classical and Cuban music\n    style: \"Romantic\", // Romantic period composer\n    country: \"Cuba\", // Cuban composer\n  },\n  { slug: \"borrtex\", midis: [\"flowing---borrtex\"] },\n  {\n    slug: \"kristofer_maddigan\",\n    midis: [\n      \"inkwell-hell-piano-from-cuphead---kristofer-maddigan\",\n      \"cuphead---kristofer-maddigan---die-house\",\n      \"inkwell-isle-four-piano---kristofer-maddigan\",\n      \"inkwell-isle-three\",\n      \"snow-cult-scuffle---kristofer-maddigan\",\n    ],\n  },\n  {\n    slug: \"mozart_misc\",\n    midis: [\n      \"fantasia_in_d_minor_k_397_385g_wolfgang_amadeus_mozart\",\n      \"i_allegro_symphony_no_4_in_d_major_k_19_w_a_mozart\",\n      \"mozart_rondo_in_d_major_k_485_professional_production_score\",\n\n      \"mozart_string_quartet_no_18_in_a_major_k464\",\n      \"mozart_string_quartet_no_19_in_c_major_k465_dissonance\",\n\n      \"string_quartet_no_23_in_f_major_k_590_wolfgang_amadeus_mozart\",\n\n      \"sonata_no_9_3rd_movement_k_311\",\n      \"mozart_sonata_11_1st\",\n      \"sonata_no_13_1st_movement_k_333\",\n      \"piano_sonata_no_16_in_c_major_k_545_wolfgang_amadeus_mozart_piano_solo\",\n\n      \"wa-mozart-marche-turque-turkish-march-fingered\",\n\n      \"lacrimosa---requiem\",\n\n      \"eine-kleine-nachtmusik\",\n    ],\n    composerBirthYear: 1756, // Born in 1756\n    genre: \"Classical\", // Classical composer\n    style: \"Classical\", // Classical period composer, known for his operas, symphonies, and chamber music\n    country: \"Austria\", // Austrian composer\n  },\n  {\n    slug: \"chopin_misc\",\n    midis: [\n      \"nocturnes-op.-9---no.-1-in-b-minor-d.-inoue\",\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n      \"chopin_nocturne_op9_no2_maestro_2011r3d3t5\",\n      \"nocturne-in-c-minor-op.-posth.-d.-inoue\",\n      \"nocturne-in-c-sharp-minor\",\n      \"nocturnes-op.-9---no.-3-in-b-d.-inoue\",\n      \"nocturnes-op.-15---no.-1-in-f-d.-inoue\",\n      \"nocturnes-op.-15---no.-2-in-f-d.-inoue\",\n      \"nocturne-opus-15-no.-2-in-f-major\",\n      \"nocturne-opus-15-no.-3-in-g-minor\",\n      \"nocturne-opus-27-no.-1-in-c-minor\",\n      \"nocturne-opus-27-no.-2-in-d-major\",\n      \"nocturne-opus-32-no.-1-in-b-major\",\n      \"nocturne-opus-32-no.-2-in-a-major\",\n      \"nocturne-opus-48-no.-1-in-c-minor\",\n      \"nocturne-opus-55-no.-1-in-f-minor\",\n      \"nocturne-opus-62-no.-1-in-b-major\",\n\n      \"waltz-opus-18-in-e-major-grande-valse-brillante\",\n      \"chopin---waltz-no.-1-in-d-flat-major-op.-64\",\n      \"waltz-opus-64-no.-2-in-c-minor\",\n      \"waltz-opus-69-no.-1-in-a-major\",\n      \"waltz-opus-69-no.-2-in-b-minor\",\n      \"waltz-opus-70-no.-1-in-g-major\",\n      \"waltz-b.-133-in-e-major---chopin\",\n      \"Waltz_in_A_MinorChopin\",\n      \"waltz-no.-11-in-g-flat-major-op.70-no.1---frederic-chopin\",\n      \"chopin---waltz-no.-1-in-d-flat-major-op.-64\", // harmonic prototype for Scott Joplin\n\n      \"chopin_ballade_fminor_op52\",\n      \"chopin_ballade_no_1_in_g_minor_op_23\",\n      \"chopin_ballade_no_4_piano_solo\",\n      \"chopin_military_polonaise\",\n\n      \"fantaisie-impromptu-in-c-minor---chopin\",\n\n      \"etude-opus-10-no.-1-in-c-major\",\n      \"etude-opus-10-no.-2-in-a-minor\",\n      \"etude-opus-25-no.-11-winter-wind-in-a-minor\",\n\n      \"mazurka-op.68-no.4---chopin---posth.\",\n      \"mazurkas-op.-63---no.-2-in-f-minor-r.-lubetsky\",\n\n      \"etudes-op.-10---no.-12-in-c-minor-revolutionary-n.-carter\",\n    ],\n    composerBirthYear: 1810, // Born in 1810\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic period composer, known for his piano works\n    country: \"Poland\", // Polish composer (spent much of his life in France)\n  },\n\n  {\n    slug: \"chopin_24_preludes\",\n    midis: [\n      \"prelude-opus-28-no.-1-in-c-major\",\n      \"prelude-opus-28-no.-2-in-a-minor\",\n\n      \"chopin-prelude-e-minor-op-28-no-4-w-chord-symbols\",\n      \"24-preludes-op.-28---no.-4-in-e-minor-suffocation-g.-d.-robertson\",\n\n      \"prelude-opus-28-no.-6-in-b-minor\",\n      \"prelude-opus-28-no.-7-in-a-major---chopin\",\n      \"prelude-opus-28-no.-8-in-f-minor\",\n\n      \"chopin_raindrop_prelude\",\n    ],\n    composerBirthYear: 1810, // Born in 1810\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic period composer, known for his piano works\n    country: \"Poland\", // Polish composer (spent much of his life in France)\n  },\n  {\n    slug: \"grieg\",\n    midis: [\n      \"grieg_arietta_yaskawa\",\n      \"grieg_lyric_2_waltz_yaskawa\",\n      \"in-the-hall-of-the-mountain-king-dovregubbens-hall\",\n    ],\n    composerBirthYear: 1843, // Edvard Grieg\n    genre: \"Classical\", // Late Romantic period\n    style: \"Romantic\", // Known for his expressive piano pieces\n    country: \"Norway\", // Grieg was Norwegian\n  },\n  {\n    slug: \"kaijura_yuki\",\n    midis: [\"nara-no-kyoukai-vol.-2---m01\"],\n    composerBirthYear: 1963, // Yuki Kajiura\n    genre: \"Soundtrack\", // Known for composing anime soundtracks\n    style: \"Orchestral, Electronic\", // Combines orchestral with electronic music\n    country: \"Japan\", // Yuki Kajiura is Japanese\n  },\n  {\n    slug: \"jacob_axel_josephson\",\n    midis: [\"albumblad\"],\n    composerBirthYear: 1850, // Jacob Axel Josephson\n    genre: \"Classical\", // Primarily known for his works in the classical genre\n    style: \"Romantic\", // Romantic era composer\n    country: \"Sweden\", // Josephson was Swedish\n  },\n  {\n    slug: \"christian_hymns_worldwide\",\n    midis: [\"karibu-na-bwana\"],\n    composerBirthYear: undefined, // No specific composer\n    genre: \"Gospel\", // Christian hymns are often gospel in style\n    style: \"Gospel, Hymn\", // Traditional Christian hymns\n  },\n  {\n    slug: \"medleys\",\n    midis: [\"seru-giran-medley---charly-garcia\"],\n  },\n  {\n    slug: \"medorei\",\n    midis: [\n      \"zhao-he-aidorumedore\", // Showa Era J-Pop Idol Medley\n    ],\n    composerBirthYear: undefined, // Medley, no specific composer\n    genre: \"Pop\", // J-Pop, Japanese pop music\n    style: \"J-Pop, Idol\", // Showa era idol music\n    country: \"Japan\", // J-Pop is a genre from Japan\n  },\n  {\n    slug: \"dora_pejacevic\",\n    midis: [\n      \"the-life-of-flowers-violet---dora-pejacevic\",\n      \"papillon-op.-6---dora-pejacevic\",\n    ],\n    composerBirthYear: 1885, // Dora Pejacevic\n    genre: \"Classical\", // Primarily classical composer\n    style: \"Romantic\", // Works in the late Romantic style\n    country: \"Croatia\", // Dora Pejacevic was Croatian\n  },\n  {\n    slug: \"mikulas_schneider_trnavsky\",\n    midis: [\n      \"otec-nebesky-jks017---mikulas-schneider-trnavsky\",\n      \"kriste-zo-srdca-celeho-jks272---mikulas-schneider-trnavsky\",\n      \"hospodine-vyslys-nas-jks527---mikulas-schneider-trnavsky\",\n    ],\n    composerBirthYear: 1881, // Mikul Schneider-Trnavsk\n    genre: \"Classical\", // Classical music with folk influences\n    style: \"Folk-inspired, Sacred\", // Known for sacred and folk-inspired compositions\n    country: \"Slovakia\", // Schneider-Trnavsk was Slovak\n  },\n  {\n    slug: \"mihail_krug\",\n    midis: [\"prihodite-v-moy-dom\", \"fraer---mihail-krug\", \"kolshchik\"],\n    composerBirthYear: 1962, // Mikhail Krug\n    genre: \"Russian chanson\", // Popular in Russian chanson genre\n    style: \"Chanson\", // Known for his distinctive style in Russian chanson\n    country: \"Russia\", // Mikhail Krug was Russian\n  },\n  {\n    slug: \"danny_elfman\",\n    midis: [\n      \"victor-s-piano-solo---danny-elfman---corpse-bride\",\n      \"the-simpsons-main-title-theme---piano\",\n      \"the-simpsons-main-theme---danny-elfman\",\n      \"everybody-knows\",\n      \"hong-kong-disneyland-mystic-manor-theme-remastered---danny-elfman\",\n      \"hero-s-theme---justice-league-2017---danny-elfman---piano-solo\",\n      \"opening-titles-from-edward-scissorhands\",\n      \"main-titles-from-doctor-strange-in-the-multiverse-of-madness-2022---danny-elfman\",\n      \"wednesday---piano-opening-theme---danny-elfman-wednesday---piano-opening-theme\",\n      \"alice-in-wonderland\",\n      \"this-is-halloween-short-version---danny-elfman\",\n    ],\n    composerBirthYear: 1953, // Danny Elfman\n    genre: \"Film Score\", // Known for film scores and movie soundtracks\n    style: \"Orchestral, Gothic, Pop\", // A blend of orchestral, gothic, and sometimes pop elements\n    country: \"USA\", // Danny Elfman is American\n  },\n  {\n    slug: \"george_bruns\",\n    midis: [\n      \"les-aristochats---george-bruns\",\n      \"overture-from-the-jungle-book---george-bruns-overture-the-jungle-book---george-bruns\",\n      \"yo-ho-a-pirate-s-life-for-me---george-bruns-xavier-atencio-yo-ho-a-pirates-life-for-me\",\n    ],\n    composerBirthYear: 1914, // George Bruns\n    genre: \"Film Score\", // Composer of film scores\n    style: \"Orchestral\", // Traditional orchestral film scoring\n    country: \"USA\", // George Bruns was American\n  },\n  {\n    slug: \"yu-peng_chen\",\n    midis: [\n      \"rex-incognito-zhongli-s-theme-from-genshin-impact---yu-peng-chen-hoyo-mix\",\n      \"ganyu-radiant-dreams-genshin-impact---yu-peng-chen\",\n      \"kamisato-dance-cg-bgm-for-piano---genshin-impact-2.0-inazuma---yu-peng-chen\",\n      \"ruu-s-song---yu-peng-chen\",\n      \"yoimiya-dazzling-lights-in-the-summer-genshin-impact---yu-peng-chen\",\n      \"moonlike-smile---yu-peng-chen\",\n      \"genshin-impact---inazuma-miscellany---yu-peng-chen-genshin-impact-2.0-livestream-piano-part-1\",\n      \"genshin-impact-main-theme\",\n    ],\n    composerBirthYear: 1984,\n    genre: \"Video Game Music\", // Composer for video games, primarily Genshin Impact\n    style: \"Orchestral, Cinematic\", // Cinematic style with orchestral elements\n    country: \"China\", // Yu-Peng Chen is Chinese\n  },\n  {\n    slug: \"udo_jurgens\",\n    midis: [\n      \"griechischer-wein---udo-jurgens-griechischer-wein---udo-jurgens\",\n      \"griechischer-wein---udo-jurgens\",\n      \"zehn-nach-elf-udo-jurgens-piano-cover\",\n      \"vielen-dank-fur-die-blumen---udo-jurgens\",\n      \"ein-ehrenwertes-haus---udo-jurgens\",\n    ],\n    composerBirthYear: 1934, // Udo Jrgens\n    genre: \"Schlager, Pop\", // Schlager is a key genre he worked in\n    style: \"Pop, Easy Listening\", // His style was easy listening and pop\n    country: \"Austria\", // Udo Jrgens was Austrian\n  },\n  {\n    slug: \"geoffrey_gregoire_kargmax\",\n    midis: [\n      \"oriental-breath\",\n      \"menuet-en-mib-mineur\",\n      \"espieglerie-grazioso-entre-violon-et-piano-mi-m\",\n    ],\n    composerBirthYear: undefined, // Not enough information to determine\n    genre: \"Classical\", // Classical genre\n    style: \"Baroque, Classical\", // Works in classical and baroque style\n    country: undefined, // Country of origin unclear\n  },\n  {\n    slug: \"emmerich_kalman\",\n    midis: [\n      \"the-tercet-from-die-bajadere-by-emmerich-kalman-tercet-iz-operetty-bayadera-i.-kalmana\",\n      \"grafin-mariza.-no-7a-komm-zigany---emmerich-kalman\",\n      \"die-zirkusprinzessin---emmerich-kalman-reminiszenz_nr.15a_die-zirkusprinzessin_emmerich-kalman\",\n      \"die-herzogin-von-chicago-nr.1a---emmerich-kalman\",\n      \"i-still-can-dream---emmerich-kalman\",\n      \"throw-me-a-rose---emmerich-kalman-throw-me-a-rose\",\n      \"grafin-mariza.-no-3-wenn-es-abend-wird---emmerich-kalman-wenn-es-abend-wird\",\n    ],\n    composerBirthYear: 1882, // Emmerich Klmn\n    genre: \"Operetta\", // Known for operettas and light opera\n    style: \"Operetta, Classical\", // Works in operetta and classical styles\n    country: \"Hungary\", // Emmerich Klmn was Hungarian\n  },\n  {\n    slug: \"vicenzo_piano\",\n    midis: [\n      \"winter---lucia-salieri-vicenzo-piano\",\n      \"letter-to-my-mother---vicenzo-piano\",\n      \"introspection---vicenzo-piano\",\n      \"day-off---vicenzo-piano\",\n      \"awakening---vicenzo-piano\",\n      \"farewell---vicenzo-piano\",\n      \"the-golden-waltz---vicenzo-piano\",\n      \"the-midnight-waltz---vicenzo-piano\",\n      \"a-dream-i-had---vicenzo-piano\",\n      \"interstellar---vicenzo-piano\",\n    ],\n    composerBirthYear: undefined, // Information about Vicenzo Piano's birth year is unclear\n    genre: \"New Age\", // New Age piano compositions\n    style: \"Instrumental, Classical Crossover\", // Instrumental with elements of classical crossover\n    country: undefined, // Country of origin unclear\n  },\n  {\n    slug: \"todd_owen\",\n    midis: [\n      \"leaves-upon-tess\",\n      \"at-the-klutzy-ball\",\n      \"backpack-quest\",\n      \"when-i-am-dust-in-arcadia\",\n      \"sincerest-betrayal\",\n    ],\n    composerBirthYear: undefined, // Not enough information available\n    genre: \"Indie, Classical\", // Indie-classical style music\n    style: \"Minimalism\", // Minimalism piano compositions\n    country: undefined, // Country not specified\n  },\n  {\n    slug: \"SIX\",\n    midis: [\n      \"heart-of-stone-from-six-the-musical\",\n      \"six-the-musical---broadway-six-medley\",\n    ],\n    composerBirthYear: 1984, // Toby Marlow & Lucy Moss (co-composers of Six)\n    genre: \"Musical Theatre\", // Broadway musical\n    style: \"Pop Musical\", // Pop-influenced musical style\n    country: \"UK\", // SIX originated in the UK\n  },\n  {\n    slug: \"xix_century_russian_romance\",\n    midis: [\n      \"no-ya-vas-vse-taki-lyublyu...-nevertheless-i-love-you...---russian-romance\",\n    ],\n  },\n  {\n    slug: \"johann_pachelbel\",\n    midis: [\n      \"Canon_in_D\",\n      \"johann-pachelbel-1653~1706---fugue-in-c-major-p.144\",\n      \"pachelbel-chaconne-in-f-minor\",\n    ],\n    composerBirthYear: 1653, // Johann Pachelbel's birth year\n    genre: \"Baroque\", // Pachelbel was a Baroque composer\n    style: \"Classical\", // Common style descriptor for Baroque music\n    country: \"Germany\", // Pachelbel was German\n  },\n  {\n    slug: \"bebu_silvetti_and_raul_di_blasio\",\n    midis: [\n      \"mexico-de-noche\",\n      \"quiero-amanecer-con-alguien---daniela-romo\",\n      \"melissa---bebu-silvetti\", // canon in D\n      // \"bebu-silvetti---piano\",\n      \"volviendo-a-casa-raul-di-blasio\",\n      \"barroco---raul-di-blasio\",\n      \"piano---raul-di-blasio\",\n      \"corazon-de-nino-child-s-heart-by-raul-di-blasio---raul-di-blasio-corazon-de-nino-child-s-heart-by-raul-di-blasio\",\n    ],\n    composerBirthYear: 1939, // Bebu Silvetti's birth year\n    genre: \"Latin\", // Bebu Silvetti was known for Latin music\n    style: \"Pop\", // Known for Latin pop arrangements\n    country: \"Argentina\", // Silvetti was from Argentina\n  },\n  {\n    slug: \"c_austin_miles\",\n    midis: [\"in-the-garden---c.-austin-miles\"],\n    composerBirthYear: 1868, // C. Austin Miles' birth year (composer of \"In the Garden\")\n    genre: \"Gospel\", // \"In the Garden\" is a Christian hymn\n    style: \"Hymn\", // Hymnal style music\n    country: \"USA\", // C. Austin Miles was American\n  },\n  {\n    slug: \"mikhail_glinka\",\n    midis: [\n      \"glinka---the-lark-from-a-farewell-to-saint-petersburg-no.-10\",\n      \"ya-pomnyu-chudnoe-mgnovene\",\n      \"noktyurn-razluka-nocturne-la-separation---m.-i.-glinka-m.-i.-glinka-razluka\",\n    ],\n    composerBirthYear: 1804, // Glinka's birth year\n    genre: \"Romantic\", // Glinka was a Romantic composer\n    style: \"Classical\", // Typical descriptor for his style\n    country: \"Russia\", // Glinka was Russian\n  },\n  {\n    slug: \"jared_emerson-johnson\",\n    midis: [\n      \"sam-and-max-save-the-world-the-office---jared-emerson-johnson\",\n      \"cruisin---jared-emerson-johnson\",\n      \"prologue---the-wolf-among-us\",\n      \"crane-s-business-office-the-wolf-among-us\",\n    ],\n    composerBirthYear: 1980, // Approximate birth year\n    genre: \"Video Game\", // Known for video game music\n    style: \"Orchestral, Electronic\", // Blend of orchestral and electronic styles\n    country: \"USA\", // Emerson-Johnson is American\n  },\n  {\n    slug: \"david_wise\",\n    midis: [\n      \"gang-plank-galleon-donkey-kong-country\",\n      \"aquatic-ambience\",\n      \"jib-jig-donkey-kong-country-2\",\n    ],\n    composerBirthYear: 1967, // David Wise's birth year\n    genre: \"Video Game\", // Known for video game music, specifically Donkey Kong Country\n    style: \"Electronic, Orchestral\", // Known for a mix of electronic and orchestral elements in video game scores\n    country: \"UK\", // David Wise is from the UK\n  },\n  {\n    slug: \"andrew_prahlow\",\n    midis: [\n      \"andrew-prahlow---echoes-of-the-eye\",\n      \"andrew-prahlow---end-times\",\n      \"outer-wilds---main-theme---andrew-prahlow\",\n      \"outer-wilds---timber-hearth\",\n      \"andrew-prahlow---the-river\",\n    ],\n    composerBirthYear: 1988,\n    genre: \"Video Game\", // Known for video game music, particularly Outer Wilds\n    style: \"Ambient, Electronic\", // Prahlow's music is largely ambient with electronic influences\n    country: \"USA\", // Prahlow is American\n  },\n  {\n    slug: \"bear_mccreary\",\n    midis: [\n      \"the-walking-dead---theme-song-tv-series-2010---bear-mccreary\",\n      \"god-of-war-ragnarok---raeb-s-lament---bear-mccreary\",\n      \"nori-brandyfoot---lord-of-the-rings-the-rings-of-power\",\n      \"this-wandering-day---bear-mccreary---the-rings-of-power\",\n      \"percy-jackson-and-the-olympians---bear-mccreary-piano-solo\",\n      \"god-of-war-ragnarok---giantess-of-ironwood---bear-mccreary\",\n      \"leonardo-s-theme\",\n      \"the-witcher-blood-origin---the-black-rose---bear-mccreary\",\n      \"the-day-will-come---bear-mccreary\",\n      \"the-veil-of-time---outlander-score\",\n      \"agents-of-s.h.i.e.l.d.-theme\",\n    ],\n    composerBirthYear: 1979, // Bear McCreary's birth year\n    genre: \"Film, TV\", // Known for composing for films and TV series\n    style: \"Orchestral, Electronic, Rock\", // McCreary blends orchestral, electronic, and rock styles\n    country: \"USA\", // McCreary is American\n  },\n  {\n    slug: \"joe_hisaishi\",\n    midis: [\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n      \"One_Summers_Day_Spirited_Away\",\n      \"Summer_Joe_Hisaishi\",\n      \"a-town-with-an-ocean-view--joe-hisaishi--natural-key-signature\",\n      \"joe-hisaishi---hana-bi\",\n      \"the-name-of-life-inochi-no-namae-joe-hisaishi\",\n      \"itsumo-nando-demo-always-with-me---spirited-away\",\n    ],\n    composerBirthYear: 1950, // Joe Hisaishi's birth year\n    genre: \"Film, Anime\", // Known for composing music for films and anime\n    style: \"Orchestral\", // His compositions are often orchestral\n    country: \"Japan\", // Hisaishi is Japanese\n  },\n  {\n    // https://musescore.com/user/19710/sets/3559241\n    slug: \"pictures_at_the_exhibition\",\n    midis: [\n      \"promenade-i\",\n      \"gnomus\",\n      \"promenade-ii\",\n      \"il-vecchio-castello\",\n      \"promenade-iii\",\n      \"tuileries-dispute-d-enfants-apres-jeux\",\n      \"bydlo\",\n    ],\n    composerBirthYear: 1834, // Modest Mussorgsky's birth year (composer of Pictures at an Exhibition)\n    genre: \"Romantic\", // Mussorgsky was a Romantic composer\n    style: \"Classical\", // Typical descriptor for Romantic era music\n    country: \"Russia\", // Mussorgsky was Russian\n  },\n  {\n    slug: \"zequinha_de_abreu\",\n    midis: [\n      \"tico-tico-no-fuba---zequinha-de-abreu\",\n      \"nao-me-toques-chorinho---zequinha-de-abreu\",\n      \"os-pintinhos-no-terreiro-zequinha-de-abreu\",\n      \"levanta-poeira-chorinho---zequinha-de-abreu\",\n      \"bafo-de-onca\",\n      \"sururu-na-cidade\",\n    ],\n  },\n  {\n    slug: \"saint_saens\",\n    midis: [\n      \"danse-macabre-opus-40-s.-555\",\n      \"Saint_Saens_Symphony_3_1st\",\n      \"le-carnaval-des-animaux---aquarium\",\n      \"le-cygne-the-swan\",\n      \"feuillet-d-album-op.169---camille-saint-saens\",\n    ],\n    composerBirthYear: 1835,\n    genre: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    // https://www.discogs.com/release/17759461-Various-%D0%A8%D0%B5%D0%B4%D0%B5%D0%B2%D1%80%D1%8B-%D0%9A%D0%BB%D0%B0%D1%81%D1%81%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9-%D0%9C%D1%83%D0%B7%D1%8B%D0%BA%D0%B8-%D0%9A%D0%BE%D0%BB%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F-2-%D0%92%D1%8B%D0%BF%D1%83%D1%81%D0%BA-5\n    // https://musescore.com/user/12163676\n    slug: \"popular_classics\",\n    midis: [\n      \"offenbach---can-can-from-orpheus-in-the-underworld-piano-arrangement\",\n      \"valse---coppelia---piano-solo---arr.-leo-delibes\",\n\n      \"hungarian-march---hector-berlioz\",\n\n      \"swan-lake-op.-20-act-iii-no.-20-danse-hongroise-hungarian-dance-czardas\",\n      \"funiculi-funicula\",\n      \"grand-march-from-the-opera-aida-by-giuseppe-verdi\",\n      \"lyapunov-reverie-du-soir-op.3\",\n      \"thema-aus-die-moldau---b-smetana-s-sitnikava\",\n      \"mein-vaterland-nr2-moldau---bedrich-smetana-for-piano-solo\",\n      \"fantasia-on-greensleeves---ralph-vaughan-williams\",\n      \"der-flohwalzer\",\n      \"stanley-myers---cavatina-arranged-for-piano\",\n      \"imslp181922-wima.ec84-oginski_polonez_a\",\n      \"Entry_of_the_Gladiators_-_Julius_Fuk_-_1897\",\n    ],\n    composerBirthYear: 1836,\n    style: \"Classical\",\n    genre: \"Classical, Romantic\",\n  },\n  {\n    slug: \"smetana\",\n    midis: [\n      \"thema-aus-die-moldau---b-smetana-s-sitnikava\",\n      \"bedrich-smetana---vltava-ma-vlast\",\n      \"mein-vaterland-nr2-moldau---bedrich-smetana-for-piano-solo\",\n    ],\n    composerBirthYear: 1824, // Bedich Smetana (1824-1884)\n    genre: \"Romantic\", // Romantic era composer\n    style: \"Symphonic, Nationalism\", // Known for his symphonic poems and Czech nationalistic music\n    country: \"Czech Republic\", // Born in what is now the Czech Republic\n  },\n  {\n    slug: \"austin_farwell\",\n    midis: [\n      \"city-lights---austin-farwell\",\n      \"wedding-ballet---austin-farwell\",\n      \"once-upon-a-time---austin-farwell\",\n    ],\n  },\n  { slug: \"dylan_john_sparkes\", midis: [\"butterfly\"] },\n  {\n    slug: \"hania_rani\",\n    midis: [\n      \"glass---hania-rani\",\n      \"eden---hania-rani\",\n      \"sun---hania-rani\",\n      \"silent-night---hania-rani\",\n      \"hania-rani---rurka\",\n    ],\n    genre: \"Minimalism\",\n    composerBirthYear: 1990,\n    country: \"Poland\",\n  },\n  {\n    slug: \"johann_strauss_ii\",\n    midis: [\n      \"johann-strauss-jr.---an-der-schonen-blauen-donau\",\n      \"strauss---tritsch-tratsch-polka-piano\",\n    ],\n  },\n  {\n    slug: \"kelly_bailey\",\n    midis: [\n      \"triage-at-dawn\",\n      \"portal-radio-music-for-trombone\",\n      \"something-secret-steers-us\",\n    ],\n    composerBirthYear: 1967, // Kelly Bailey (born 1967)\n    genre: \"Video Game Music\", // Known for composing for video games, notably Portal and Half-Life\n    style: \"Electronic, Ambient\", // Often uses electronic and ambient styles in his compositions\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"arif_malikov\",\n    midis: [\n      \"sehrli-xalat-filminin-musiqisi---arif-m-likov\",\n      \"cix-yasil-duz---arif-m-likov-azerbaijan-folk-song\",\n      \"brilliant-dadasova---gull-rim\",\n    ],\n    composerBirthYear: 1933, // Arif Malikov (born 1933)\n    genre: \"Classical, Film Music\", // Known for classical compositions and film scores\n    style: \"Romantic, Nationalism\", // Romanticism with elements of national identity in his music\n    country: \"Azerbaijan\", // Azerbaijani composer\n  },\n  {\n    slug: \"alexander_nakarada\",\n    midis: [\n      \"adventure---alexander-nakarada\",\n      \"village-ambiance---alexander-nakarada\",\n    ],\n  },\n  {\n    slug: \"kevin_macleod\",\n    midis: [\n      \"monkey-spinning-monkeys---kevin-macleod\",\n      \"if-i-had-a-chicken---kevin-macleod\",\n      \"carefree---kevin-macleod\",\n      \"amazing-plan---kevin-macleod\",\n    ],\n    composerBirthYear: 1972,\n    genre: \"Stock Music, Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"pete_johnson\",\n    midis: [\"boogie-woogie-jump---pete-johnson\", \"dive-bomber---pete-johnson\"],\n    style: \"Boogie Woogie\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jobim\",\n    midis: [\n      \"wave---antonio-carlos-jobim-jazz-piano-solo\",\n      \"desafinado\",\n      \"aguas-de-marco---elis-regina-e-tom-jobim\",\n    ],\n    composerBirthYear: 1927, // Antnio Carlos Jobim (19271994)\n    genre: \"Bossa Nova\", // Pioneer of the bossa nova genre\n    style: \"Jazz, Brazilian\", // Known for blending jazz with Brazilian rhythms\n    country: \"Brazil\", // Brazilian composer\n  },\n  {\n    slug: \"chico_buarque\",\n    midis: [\"atras_da_porta\"],\n    composerBirthYear: 1944, // Chico Buarque (born 1944)\n    genre: \"Bossa Nova, MPB\", // Brazilian popular music (MPB) and bossa nova\n    style: \"Samba, Bossa Nova\", // Combines samba and bossa nova in his compositions\n    country: \"Brazil\", // Brazilian composer\n  },\n  {\n    slug: \"borislav_slavov\",\n    midis: [\"down-by-the-river---borislav-slavov-baldur-s-gate-3-ost\"],\n    composerBirthYear: 1980, // Borislav Slavov (born 1980)\n    genre: \"Video Game Music\", // Composer for video game soundtracks like Baldur's Gate 3\n    style: \"Orchestral, Cinematic\", // Orchestral music with cinematic qualities\n    country: \"Bulgaria\", // Bulgarian composer\n  },\n  {\n    slug: \"takeshi_abo\",\n    midis: [\n      \"gate-of-steiner\",\n      \"suzuha-s-farewell-wakare---steins-gate\",\n      \"steins-gate-0---messenger-piano\",\n    ],\n    composerBirthYear: 1977, // Takeshi Abo (born 1977)\n    genre: \"Video Game Music\", // Known for composing music for visual novels and video games\n    style: \"Electronic, Orchestral\", // A mix of electronic and orchestral elements in his compositions\n    country: \"Japan\", // Japanese composer\n  },\n  {\n    slug: \"esther_abrami\",\n    midis: [\n      \"no.9-esther-s-waltz---esther-abrami\",\n      \"no.2-remembering-her---esther-abrami\",\n      \"no.1-a-minor-waltz---esther-abrami-no-1-a-minor-waltz\",\n    ],\n    composerBirthYear: 1995, // Esther Abrami (born 1995)\n    genre: \"Classical\", // Classical composer and violinist\n    style: \"Romantic\", // Often performs and composes in the Romantic style\n    country: \"France\", // French composer and violinist\n  },\n  {\n    slug: \"brawl_stars\",\n    midis: [\n      \"brawl-stars---menu-theme\",\n      \"brawl-stars-metropolis-theme\",\n      \"brawl-stars---footbrawl-theme\",\n      \"brawl-stars---win-theme-piano\",\n      \"brawl-stars---draw-theme\",\n      \"brawl-stars---lose-theme\",\n      \"brawl-stars-ost---battle-8\",\n      \"brawl-stars---brawl-o-ween-battle-2\",\n      \"brawl-star\",\n      \"brawl-stars-summer-of-monsters-battle-2-insane\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Video Game Music\",\n    style: \"Electronic, Orchestral\",\n    country: \"Finland\",\n  },\n  {\n    slug: \"65daysofstatic\",\n    midis: [\n      \"don-t-go-down-to-sorrow---65daysofstatic\",\n      \"no-man-s-sky-escape-velocity---65daysofstatic\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Post-Rock, Electronic\", // Known for their mix of post-rock and electronic music\n    style: \"Instrumental\", // Primarily instrumental music\n    country: \"UK\", // British band\n  },\n  {\n    slug: \"mogwai\",\n    midis: [\"take-me-somewhere-nice---mogwai\"],\n    composerBirthYear: 1976,\n    genre: \"Post-Rock\", // A pioneering band in the post-rock genre\n    style: \"Instrumental, Atmospheric\", // Known for their atmospheric instrumental compositions\n    country: \"Scotland\", // Scottish band\n  },\n  {\n    slug: \"dmitry_kabalevsky\",\n    midis: [\n      \"slow-waltz-24-pieces-for-children-op.39-no.-23---dmitry-kabalevsky\",\n      \"clowns---dmitri-kabalevsky\", // I~i mix\n      \"a-happy-outing-24-pieces-for-children-op.39-no.-24---dmitry-kabalevsky\",\n      \"animato-24-pieces-for-children-op.-39-no.-18---dmitri-kabalevsky\",\n    ],\n    composerBirthYear: 1904, // Dmitri Kabalevsky (19041987)\n    genre: \"Classical\", // Prominent 20th-century classical composer\n    style: \"Neoclassical\", // Neoclassical style, often with elements of folk music\n    country: \"Russia\", // Russian composer\n  },\n  {\n    slug: \"nikolai_medtner\",\n    midis: [\n      \"medtner---2-skazki-op.20-no.1\",\n      \"medtner---6-skazki-op.-51-no.-6-fairy-tales\",\n    ],\n    composerBirthYear: 1880,\n    country: \"Russia\",\n    genre: \"Romantic\",\n  },\n  {\n    slug: \"mattias_hakulinen\",\n    midis: [\n      \"nickelodeon-all-star-brawl-menu-theme---mattias-hakulinen\",\n      \"irken-armada-invasion-zim-s-theme---mattias-hakulinen-and-pontus-askbrink\",\n      \"i-m-thinking---ittle-dew\",\n      \"that-cold-place-2nd-floor---ittle-dew\",\n      \"princess-remedy---shark-of-omen-shore\",\n    ],\n    composerBirthYear: 1976,\n    genre: \"Video Game Music\", // Composed for various video games\n    style: \"Electronic, Orchestral\", // A mix of electronic and orchestral music\n    country: \"Finland\", // Finnish composer\n  },\n  {\n    slug: \"james_newton_howard\",\n    midis: [\n      \"the-hunger-games-mockingjay-pt.-2-piano-suite\",\n      \"running-on-raindrops-from-raya-and-the-last-dragon---james-newton-howard\",\n    ],\n    composerBirthYear: 1951, // James Newton Howard (born 1951)\n    genre: \"Film Music\", // Famous for film scores\n    style: \"Orchestral, Cinematic\", // Orchestral and cinematic compositions for films\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"claude_morgan\",\n    midis: [\n      \"el-bimbo---claude-morgan\",\n      \"la-balanga\",\n      \"tchoo-tchoo-hold-on-the-line\",\n    ],\n    composerBirthYear: 1947,\n    genre: \"Pop\",\n    style: \"Pop\",\n    country: \"Tunisia\",\n  },\n  {\n    slug: \"vladimir_dashkevich\",\n    midis: [\n      \"rekviem-iz-k-f-sobache-serdce---vladimir-dashkevich\",\n      \"tam-na-nevedomyh-dorozhkah---v.-dashkevich\",\n      \"irene-adler-waltz----v.-dashkevich\",\n      \"marsh-krasnoarmeycev---vladimir-dashkevich-perelozhenie-dlya-fortepiano-i-golosa\",\n      \"uvertyura---v.-dashkevich\",\n      \"song-of-the-sea-pisnya-pro-more---v.-dashkevich\",\n      \"surovye-gody-uhodyat-iz-k-f-sobache-serdce---vladimir-dashkevich-yuriy-kim\",\n    ],\n    composerBirthYear: 1938, // Vladimir Dashkevich (19382019)\n    genre: \"Film Music\", // Known for composing film scores, particularly for Soviet films\n    style: \"Orchestral, Cinematic\", // His music is often cinematic and orchestral in style\n    country: \"Russia\", // Russian composer\n  },\n  {\n    slug: \"singles\",\n    midis: [\n      \"catherine-howard-s-fate---blackmore-s-night\",\n      \"moskau---dschinghis-khan-moskau\",\n    ],\n    // Not enough info to provide composerBirthYear, genre, style, and country\n  },\n  {\n    slug: \"anton_rubinstein\",\n    midis: [\n      \"melody-in-f-op.-3-no.-1---anton-rubinstein\",\n      \"morceau-d-anton-rubinstein-toreador-et-andalouse\",\n      \"melody-in-b-op.-3-no.-2---anton-rubinstein\",\n    ],\n    composerBirthYear: 1829, // Anton Rubinstein (18291894)\n    genre: \"Classical\", // Classical composer and pianist\n    style: \"Romantic\", // Romantic era composer\n    country: \"Russia\", // Russian composer\n  },\n  {\n    slug: \"russian_singles\",\n    midis: [\n      \"belym-snegom---muzyka-e-rodygina-belym-snegom---muzyka-e.-rodygina\",\n      \"beri_shinel-_poshli_domoy\",\n      \"i-hear-the-noise-of-birches...---konstantin-orbelyan\",\n    ],\n    composerBirthYear: 1950, // Konstantin Orbelyan was born in 1950\n    country: \"Russia\",\n  },\n  {\n    slug: \"fleur\",\n    midis: [\n      \"formalin-formalin---flyour\",\n      \"shelkopryad---flyour\",\n      \"teplye-koty---flyour\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Electronic\", // Based on the style of the artist\n    style: \"Ambient\", // Ambient electronic style\n    country: \"Russia\", // Assuming the artist is from Russia\n  },\n  {\n    slug: \"manisha_vremeni\",\n    midis: [\n      \"moy-drug---mashina-vremeni\",\n      \"odnazhdy-mir-prognetsya-pod-nas.\",\n      \"she-walks-through-life-a-smile-on-her-face----a.-makarevich\",\n    ],\n    composerBirthYear: 1949, // Andrei Makarevich (composer of Mashina Vremeni) was born in 1949\n    genre: \"Rock\", // Russian rock\n    style: \"Progressive Rock\", // Progressive elements in Mashina Vremeni\n    country: \"Russia\",\n  },\n  {\n    slug: \"melnitsa\",\n    midis: [\n      \"melnica---korolevna\",\n      \"melnica---doroga-sna\",\n      \"melnica----nevesta-poloza\",\n    ],\n    composerBirthYear: 1976,\n    genre: \"Folk Rock\", // Folk-rock style\n    style: \"Celtic Folk\", // Heavy influence of folk traditions\n    country: \"Russia\",\n  },\n  {\n    slug: \"igor_kornelyuk\",\n    midis: [\n      \"banditskiy-peterburg-gorod-kotorogo-net-fortepiano-a-town-that-does-not-exist\",\n      \"syuyita-mayster-ta-margarita---i.-kornelyuk\",\n    ],\n    composerBirthYear: 1961, // Igor Kornelyuk was born in 1961\n    genre: \"Classical\", // Mostly classical and cinematic music\n    style: \"Cinematic\", // Often composes for films and TV\n    country: \"Russia\",\n  },\n  {\n    slug: \"krematoriy\",\n    midis: [\"katmandu-polnaya-versiya\", \"musornyy-veter-gr.-krematoriy\"],\n    composerBirthYear: 1960,\n    genre: \"Rock\", // Russian rock\n    style: \"Post-punk\", // Post-punk and alternative rock elements\n    country: \"Russia\",\n  },\n  {\n    slug: \"wang_jian\",\n    midis: [\"fei-niao-he-chan-ren-ran\"],\n    composerBirthYear: 1973, // Wang Jian, a Chinese composer, born in 1973\n    genre: \"Classical\", // Chinese classical music\n    style: \"Traditional\", // Traditional Chinese music\n    country: \"China\",\n  },\n  {\n    slug: \"chinese_single_pieces\",\n    midis: [\n      \"spring-festival-overture-chun-jie-xu-qu---li-huan-zhi-piano-cover\",\n      \"cai-yun-zhui-yue-colorful-clouds-chasing-the-moon--piano-solo\", // ren guang\n    ],\n    genre: \"Classical\", // Classical Chinese music\n    style: \"Traditional\", // Traditional Chinese styles\n    country: \"China\",\n  },\n  {\n    slug: \"cornelius_gurlitt\",\n    midis: [\n      \"night-journey---cornelius-gurlitt\",\n      \"little-waltz---gurlitt-op.-205-no-10\",\n      \"gurlitt-cornelius---sonatina-in-a-minor-op.-76-no.-5-3rd-mvmt\",\n    ],\n    composerBirthYear: 1823, // Cornelius Gurlitt was born in 1823\n    genre: \"Classical\", // 19th-century German classical\n    style: \"Romantic\", // Romantic period style\n    country: \"Germany\",\n  },\n  {\n    slug: \"clara_schumann\",\n    midis: [\n      \"schumann-clara---lieder-op.12-no.4---liebst-du-um-schonheit\",\n      \"clara-schumann--notturno\",\n    ],\n    composerBirthYear: 1819, // Clara Schumann was born in 1819\n    genre: \"Classical\", // Classical, Romantic music\n    style: \"Romantic\", // Romantic period\n    country: \"Germany\",\n  },\n  {\n    slug: \"schumann\",\n    midis: [\n      \"schumann-carnaval---no.-12-chopin-piano-solo\",\n      \"schumann-kinderszenen-no.7-op.15--dreaming-traumerei\",\n      \"schumann-the-wild-horseman-op.-68-no.-8\",\n      \"r.-schumann---kinderszenen-no.-1-von-fremden-landern-und-menschen.\",\n    ],\n    composerBirthYear: 1810, // Robert Schumann was born in 1810\n    genre: \"Classical\", // Classical, Romantic music\n    style: \"Romantic\", // Romantic period\n    country: \"Germany\",\n  },\n  {\n    slug: \"norbert_schultze\",\n    midis: [\n      \"lili-marlene---norbert-schultz\",\n      \"von-finnland-bis-zum-schwarzen-meer\",\n      \"das-lied-vom-deutschen-u-boot-mann\",\n    ],\n    composerBirthYear: 1911, // Norbert Schultze was born in 1911\n    genre: \"Film Music\", // German film composer\n    style: \"Military\", // Often associated with wartime themes\n    country: \"Germany\",\n  },\n  {\n    slug: \"boban_markovic\",\n    midis: [\n      \"majstorski-cocek---boban-markovic\",\n      \"beli-dvor---boban-markovic\",\n      \"za-beograd---boban-markovic\",\n      \"zivot-cigana---boban-markovic\",\n      \"ciganin-kuca---boban-markovic\",\n    ],\n    composerBirthYear: 1964, // Boban Markovi was born in 1964\n    genre: \"Balkan Brass\", // Traditional Balkan brass\n    style: \"Balkan\", // Traditional Serbian brass band music\n    country: \"Serbia\",\n  },\n  {\n    slug: \"russian_folk\",\n    midis: [\n      \"vyydu-ya-na-ulicu---russkaya-narodnaya-pesnya-vyydu-ya-na-ulicu\",\n      \"poydu-l-ya-vyydu-l-ya-da.---russkaya-narodnaya\",\n      \"podgorka-russkaya-plyaska---narodnaya-plyasovaya-podgorka\",\n      \"ah-ty-nochenka.-russkaya-narodnaya-pesnya\",\n      \"kamarinskaya---russkaya-narodnaya-kamarinskaia\",\n      \"veselaya-kadril---russkaya-narodnaya-pesnya-folk-malenkaya-kadril\",\n      \"vo-lesochke-komarochkov-mnogo-urodilos---russkaya-narodnaya-pesnya\",\n    ],\n  },\n  {\n    slug: \"thomas_attwood\",\n    midis: [\n      \"allegro---first-movement-from-sonatina-no.-1-in-g-trinity-grade-2-piano\",\n    ],\n    composerBirthYear: 1765, // Thomas Attwood was born in 1765\n    genre: \"Classical\", // Classical period music\n    style: \"Classical\", // Classical style\n    country: \"United Kingdom\",\n  },\n  {\n    slug: \"nat_king_cole\",\n    midis: [\"nat-king-cole---easy-listening-blues-transcription\"],\n    composerBirthYear: 1919, // Nat King Cole was born in 1919\n    genre: \"Jazz\", // Jazz, Swing\n    style: \"Swing\", // Swing jazz style\n    country: \"USA\",\n  },\n  {\n    slug: \"martin_kratochwil\",\n    midis: [\n      \"potato-blues\",\n      \"sour-apple-blues\",\n      \"lonesome-broccoli-blues-_-easy-piano\",\n    ],\n    composerBirthYear: 1960,\n    genre: \"Blues\", // Blues music\n    style: \"Jazz Blues\", // Influences of jazz in blues\n    country: \"USA\", // Based on his genre\n  },\n  {\n    slug: \"hitoshi_sakimoto\",\n    midis: [\n      \"qiao-shang-nozhan-i-battle-on-the-bridge---final-fantasy-tactics-ps1---hitoshi-sakimoto\",\n      \"randam-waltz---final-fantasy-tactics-ps1---hitoshi-sakimoto\",\n    ],\n    composerBirthYear: 1969,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"glenn_stafford\",\n    midis: [\n      \"starcraft-2---wings-of-liberty---piano-solo\",\n      \"warcraft-2-human-1---by-glenn-stafford-arranged-by-gori-fater\",\n      \"warcraft-ii---orcs-betrayal\", // bvi in a functional context\n      \"brood-war-aria---glenn-stafford-and-neal-acree\",\n      \"warcraft-ii---humans-beyond-the-dark-portal\",\n      \"warcraft-2-intro---glenn-stafford\",\n      \"drustvar\",\n      \"grizzly-hills-wow\",\n      \"warcraft-iii---orc-theme-old-school-battle-net-theme\",\n    ],\n    composerBirthYear: 1969, // Glenn Stafford was born in 1969\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Cinematic\", // Often cinematic in nature\n    country: \"USA\",\n  },\n  {\n    slug: \"ludwig_goransson\",\n    midis: [\n      \"can-you-hear-the-music---ludwig-goransson-from-oppenheimer\",\n      \"the-book-of-boba-fett---main-title-theme---ludwig-goransson---piano-version\",\n      \"venom-theme\",\n      \"wakanda-forever-from-wakanda-forever---ludwig-goransson\",\n      \"main-theme---black-panther---ludwig-goransson---piano-solo\",\n      \"foils---ludwig-goransson-from-tenet\",\n      \"the-mandalorian---main-theme\",\n      \"greendale-is-where-i-belong---ludwig-goransson---community\",\n    ],\n    composerBirthYear: 1982, // Ludwig Gransson was born in 1982\n    genre: \"Film Music\", // Film music composer\n    style: \"Cinematic\", // Film score style\n    country: \"Sweden\",\n  },\n  {\n    slug: \"brian_tyler\",\n    midis: [\n      \"formula-1-theme---brian-tyler\",\n      \"peaches-from-super-mario-bros-movie-for-violin---brian-tyler-jack-blackman\",\n      \"theme-from-rambo-brian-tyler\",\n    ],\n    composerBirthYear: 1972, // Brian Tyler was born in 1972\n    genre: \"Film Music\", // Film music composer\n    style: \"Cinematic\", // Film score style\n    country: \"USA\",\n  },\n  {\n    slug: \"miki_higashino_sukoiden_2\",\n    midis: [\"reminiscence---suikoden-2\", \"two-rivers---suikoden-2\"],\n    composerBirthYear: 1960,\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Orchestral\", // Orchestral soundtrack\n    country: \"Japan\",\n  },\n  {\n    slug: \"rob_hubbard\",\n    midis: [\"monty-on-the-run\"],\n    composerBirthYear: 1955,\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Chiptune\", // Early video game music style\n    country: \"UK\",\n  },\n  {\n    slug: \"jeremy_soule\",\n    midis: [\n      \"harry-potter-ii-game-main-menu---jeremy-soule\",\n      \"diagon-alley---jeremy-soule-from-harry-potter-and-the-chamber-of-secrets---solo-piano-arr.\",\n      \"happy-hogwarts-from-harry-potter-and-the-philosopher-s-stone\",\n      \"call-of-magic-nerevar-rising---the-elder-scrolls-morrowind-jeremy-soule\",\n      \"dragonborn---skyrim-theme-song-piano-solo\",\n      \"secunda-the-elder-scrolls-v-skyrim\",\n      \"fear-not-this-night-guild-wars-2-piano-version\",\n      \"guild-wars-2-trailer---jeremy-soule\",\n      \"guild-wars-factions-theme\",\n      \"ashford-abbey---jeremy-soule-guild-wars\",\n      \"overture-from-guild-wars-2\",\n    ],\n    composerBirthYear: 1975, // Jeremy Soule was born in 1975\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Cinematic\", // Often cinematic and orchestral\n    country: \"USA\",\n  },\n  {\n    slug: \"natalia_lafourcade\",\n    midis: [\"soledad-y-el-mar\", \"mi-tierra-veracruzana---natalia-lafourcade\"],\n    composerBirthYear: 1984,\n    genre: \"Pop\", // Latin pop\n    style: \"Folk\", // Latin folk influence\n    country: \"Mexico\", // Mexican artist\n  },\n  {\n    slug: \"inti-illimani\",\n    midis: [\n      \"el-pueblo-unido---inti-illimani\",\n      \"dolencias---inti-illimani-dolencias\",\n      \"huajra---inti-illimani\",\n    ],\n    composerBirthYear: 1942,\n    country: \"Chile\",\n  },\n  {\n    slug: \"handel\",\n    midis: [\n      \"minuet-from-music-for-the-royal-fireworks---georg-friedrich-handel\",\n      \"gavotte_in_g_major_hwv_491_handel_george_frideric\",\n      \"passacaglia---handel-halvorsen\",\n      \"water-music-suite-in-d-major-ii---alla-hornpipe-handel\",\n    ],\n    composerBirthYear: 1685, // Georg Friedrich Handel was born in 1685\n    genre: \"Classical\", // Baroque period\n    style: \"Baroque\", // Baroque style\n    country: \"Germany\",\n  },\n  {\n    slug: \"bo_burnham\",\n    midis: [\"welcome-to-the-internet---bo-burnham-s-inside\"],\n    composerBirthYear: 1990,\n    genre: \"Comedy\", // Comedy music and satire\n    style: \"Satirical\", // Satirical comedy\n    country: \"USA\",\n  },\n  {\n    slug: \"lin-manuel_miranda\",\n    midis: [\n      \"We_Dont_Talk_about_Bruno\",\n      \"waiting-on-a-miracle-from-encanto---lin-manuel-miranda\",\n      \"keep-the-beat---lin-manuel-miranda-keep-the-beat\",\n      \"surface-pressure-disney-s-encanto\",\n      \"surface-pressure---encanto\",\n      \"moana-lin-manuel-miranda---you-re-welcome-piano-solo\",\n      \"how-far-i-ll-go-~-moana-ost\",\n      \"dos-oruguitas---lin-manuel-miranda-by-adonay-guedes\",\n      \"where-you-are-from-moana---lin-manuel-miranda-where-you-are-easy\",\n      \"aaron-burr-sir\",\n      \"lauren-s-interlude\",\n      \"the-family-madrigal-from-encanto---lin-manuel-miranda-simplified-for-kids-beginners-piano\",\n    ],\n    composerBirthYear: 1980, // Lin-Manuel Miranda was born in 1980\n    genre: \"Musical Theatre\", // Musical theatre music\n    style: \"Broadway\", // Broadway-style musical compositions\n    country: \"USA\",\n  },\n  {\n    slug: \"three_part_harmony\",\n    midis: [\"yksin-op.29b-no.4---toivo-kuula\", \"ekialde-dantza\"],\n  },\n  {\n    slug: \"dario_marianelli\",\n    midis: [\n      \"Dawn_Pride_and_Prejudice\",\n      \"liz-on-top-of-the-world\",\n      \"your-hands-are-cold-from-pride-and-prejudice-2005-soundtrack\",\n      \"elegy-for-dunkirk---dario-marianelli\",\n    ],\n    composerBirthYear: 1963, // Dario Marianelli was born in 1963\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Orchestral\", // Marianelli is recognized for his orchestral and emotive compositions\n    country: \"Italy\", // Italian composer\n  },\n  {\n    slug: \"enya\",\n    midis: [\n      \"watermark-enya\",\n      \"caribbean-blue---enya\",\n      \"a-day-without-rain---enya\",\n    ],\n    composerBirthYear: 1961, // Enya was born in 1961\n    genre: \"New Age\", // Enya is a prominent artist in the New Age genre\n    style: \"Ambient, Celtic\", // Known for ambient and Celtic musical influences\n    country: \"Ireland\", // Enya is from Ireland\n  },\n  {\n    slug: \"charles_villiers_stanford\",\n    midis: [\n      \"stanford-charles-villiers---the-blue-bird\",\n      \"when-mary-thro-the-garden-went---charles-villiers-stanford\",\n    ],\n    composerBirthYear: 1852, // Born in 1852\n    genre: \"Classical\", // Stanford was a classical composer\n    style: \"Romantic\", // His work is typically associated with the Romantic era\n    country: \"United Kingdom\", // Stanford was English\n  },\n  {\n    slug: \"2002_band\",\n    midis: [\"suddenly-yours---2002-band\", \"we-meet-again---2002-band\"],\n    composerBirthYear: undefined, // No clear composer is associated with the band\n    genre: \"Pop\", // The 2002 band is known for pop music\n    style: \"Soft Pop\", // Their music has a soft pop style\n    country: \"South Korea\", // 2002 was a South Korean band\n  },\n  {\n    slug: \"lyle_mays\",\n    midis: [\"lyle-mays-chorinho-arr.-for-solo-piano\"],\n    composerBirthYear: 1949, // Born in 1949\n    genre: \"Jazz\", // Lyle Mays was a jazz composer and pianist\n    style: \"Jazz Fusion\", // Known for his fusion of jazz with other styles\n    country: \"USA\", // Lyle Mays was American\n  },\n  {\n    slug: \"poulenc\",\n    midis: [\"poulenc-melancolie-piano-solo\"],\n    composerBirthYear: 1899, // Born in 1899\n    genre: \"Classical\", // Poulenc was a classical composer\n    style: \"20th Century\", // His works are characterized by 20th-century classical music styles\n    country: \"France\", // Poulenc was French\n  },\n  {\n    slug: \"chinese\",\n    midis: [\"han-gong-chun-li-chun-ri---song-yu-ning\", \"shan-zhi-gao---song\"],\n    composerBirthYear: undefined, // The specific composer is unclear for these tracks\n    genre: \"Traditional Chinese\", // The music is traditional Chinese\n    style: \"Folk\", // Folk music style with traditional Chinese instruments\n    country: \"China\", // Likely from China, given the titles\n  },\n  {\n    slug: \"karel_svoboda\",\n    midis: [\n      \"drei-haselnusse-fur-aschenbrodel---karel-svoboda-by-jacroby\",\n      \"n-a-v-s-t-e-v-n-i-c-i\",\n    ],\n    composerBirthYear: 1938, // Born in 1938\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Orchestral\", // His film scores are typically orchestral\n    country: \"Czech Republic\", // Svoboda was Czech\n  },\n  {\n    slug: \"benjamin_wallfisch\",\n    midis: [\n      \"a-cure-for-wellness---benjamin-wallfisch\",\n      \"volmer-s-lab-a-cure-for-wellness\",\n      \"magnificent-isn-t-it-a-cure-for-wellness\",\n      \"blade-runner\",\n      \"we-can-fix-this-the-flash-movie.-2023-ost\",\n    ],\n    composerBirthYear: 1976, // Born in 1976\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Modern Orchestral\", // Modern orchestral style with electronic elements\n    country: \"United Kingdom\", // Benjamin Wallfisch is from the UK\n  },\n  {\n    slug: \"takashi_yoshimatsu\",\n    midis: [\n      \"waltz-of-rainbow-colored-roses---takashi-yoshimatsu\",\n      \"waltz-in-green---takashi-yoshimatsu-lu-nowarutu\",\n      \"velvet-waltz---takashi-yoshimatsu-berubetutowarutu\",\n\n      \"yoshimatsu---4-little-dream-songs-ii.-summer---distorted-waltz-on-august\",\n      \"pleiades-dances-book-2---takashi-yoshimatsu\",\n      \"yoshimatsu-waltz-in-obtuse-angle-from-pleiades-dances-ix\",\n      \"yoshimatsu---koo-s-waltz\",\n    ],\n    composerBirthYear: 1953,\n    country: \"Japan\",\n  },\n  {\n    slug: \"shinichi_osawa\",\n    midis: [\n      \"the-last-waltz---banana-fish\",\n      \"liberty---banana-fish\",\n      \"blue-bird---banana-fish\",\n    ],\n    composerBirthYear: 1967,\n    country: \"Japan\",\n  },\n  {\n    slug: \"john_kander\",\n    midis: [\"cabaret---john-kander-and-fred-ebb-bb-clarinet-and-piano\"],\n    composerBirthYear: 1927,\n    genre: \"Broadway\",\n    country: \"USA\",\n  },\n  {\n    slug: \"karol_szymanowski\",\n    midis: [\n      \"9-preludes-op.1---karol-szymanowski-9-preludes-op.-1-no.-1---karol-szymanowski\",\n      \"9-preludes-op.1---karol-szymanowski\",\n    ],\n    composerBirthYear: 1882,\n    style: \"Romantic\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"schubert\",\n    midis: [\n      \"marche-militaire---franz-schubert\",\n      \"moments_musicaux_d_780_no_3_in_f_minor\",\n      // \"moments_musicaux_d_780_op_94_no_3_franz_schubert\",\n      \"schubert-impromptu-op.-90-no.-4\",\n      \"serenade---schubert\",\n      \"schubert-liszt---standchen\",\n      \"schubert-waltz-in-b-minor-op.-18-no.-6-d.145\",\n      \"schubert-waltz-in-bb---d.783-op.-33-no.-7\",\n      \"schubert-waltz-in-a-minor-d.924-op.-91a-no.-9\",\n      \"waltz-ndeg-7---op.-18---d.145\",\n      \"36-original-dances-no.-27---franz-schubert\",\n      \"franz-schubert---waltz-in-d-flat-major-op.-9-no.-14\",\n      \"36-originaltanze-d.365---franz-schubert\",\n      \"12-graz-waltzes-ndeg3---schubert\",\n      \"franz-schubert---waltz-in-b-major-d.-145-nr2\",\n      // \"ecossaise-no-3-d.529---franz-schubert\",\n      \"schubert-ecossaise-no.-4-op-18-d.145\",\n      \"schubert-ecossaise-no-8-op-18-d.145\",\n      \"ecossaise-in-c-major-no-8-d.299---franz-schubert\",\n      \"schubert-german-dance-d.783-op.-33-no.-2\",\n      \"german-dance-and-ecossaise-d.643---franz-schubert\",\n      \"schubert---sonata-in-a-op.120-d.664-movement-i\",\n      \"ave-maria-d839---schubert---solo-piano-arrg.\",\n      \"wima.d719-schubert_atzenbrugger-tanz-d.365.30\",\n\n      \"wima.41cc-schubert_deut.tanz-d.820.3\",\n      \"wima.52f1-deut.tanz-d.820nr.6\",\n\n      // simple V I\n      // \"wima.7e1e-schubert_deut.tanz-d.365.09\",\n      \"schubert_d365_09\",\n      \"wima.e480-schubert_de.-tanz-d.365.25\",\n      \"wima.1124-schubert_de.-tanz-d.365.26\",\n      \"wima.4be9-schubert_de.-tanz-d.365.28\",\n\n      // voice-leading chromatic tones\n      \"wima.3fc1-schubert_deut.tanz-d.365.05\",\n      \"wima.c953-schubert_deut.tanz-d.365.07\",\n      \"wima.ae09-schubert_deut.tanz-d.365.10\",\n      \"wima.8229-schubert_deut.tanz-d.365.11\",\n\n      // minor\n      \"wima.01fa-schubert_deut.tanz-d.365.22\",\n      \"wima.738b-schubert_de.-tanz-d.365.27\",\n\n      // V/ii\n      \"wima.b3a9-schubert_deut.tanz-d.365.06\",\n      \"wima.30c1-schubert_deut.tanz-d.365.08\",\n      \"wima.7295-schubert_deut.tanzd365.19\",\n      \"wima.5ded-schubert_deut.tanzd365.15\",\n\n      // mix applieds\n      \"wima.d719-schubert_atzenbrugger-tanz-d.365.30\",\n      \"wima.8729-deut.tanz-d-365-nr.01\",\n      \"wima.3e58-schubert_deut.tanz-d.365.3\",\n      \"wima.0384-schubert_deut.tanzd365.16\",\n      \"wima.3306-schubert_deut.tanz-d.365.21\",\n      \"wima.5426-schubert_de.-tanz-d.365.23\",\n      \"wima.28fc-schubert_de.-tanz-d.365.24\", // reverse V/vi\n      \"wima.8469-schubert_deut.tanz-d.365.34\", // Ger\n      \"wima.a20b-schubert_deut.tanzd365.36\", // very chromatic\n\n      // subdominant\n      \"wima.dc1e-schubert_deut.tanzd365.12\", // ii65\n      \"wima.d5ac-schubert_deut.tanzd365.13\", // IV\n      \"wima.e3f7-schubert_deut.tanzd365.17\", // IV\n      \"wima.3657-schubert_deut.tanzd365.18\", // ii\n\n      // modulatory\n      \"wima.02f6-schubert_deut.tanz-d.365.33\",\n      \"wima.eac7-schubert_deut.tanzd365.14\",\n      \"wima.a880-schubert_deut.tanz-d.365.20\",\n      \"wima.67e3-schubert_deut.tanz-d.365.32\",\n      \"wima.7abe-schubert_deut.tanz-d.365.35\",\n    ],\n    composerBirthYear: 1797,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Austria\",\n  },\n\n  {\n    slug: \"brad_mehldau\",\n    midis: [\"anthropology---brad-mehldau\"],\n    composerBirthYear: 1970,\n    genre: \"Jazz\",\n    style: \"Post-bop, Contemporary Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"aziza_mustafa_zadeh\",\n    midis: [\n      \"aziza_mustafa_zadeh_dance_of_fire_2010_live_trio\",\n      \"aziza_mustafa_zadeh_dance_of_fire_nicola_morali_solo_piano_cover\",\n      \"always---aziza-mustafa-zadeh\",\n    ],\n    composerBirthYear: 1969, // Aziza Mustafa Zadeh was born in 1969\n    genre: \"Jazz\", // She is a jazz pianist and composer\n    style: \"Fusion, Avant-garde Jazz\", // Known for jazz fusion and avant-garde styles\n    country: \"Azerbaijan\", // Born in Baku, Azerbaijan\n  },\n  {\n    // https://musescore.com/user/24069/sets/5098783\n    slug: \"dvorak\",\n    midis: [\n      \"Symphony_No9_From_The_New_World_1st_movement_for_piano_solo_\",\n      \"Symphony_No9__From_The_New_World__2nd_movement\",\n      \"Symphony_No.9_From_The_New_World_3rd_movement_Scherzo\",\n      \"Symphony_No9_From_The_New_World_4th_movement__Z_Novho_Svta\",\n      \"antonin-dvorak-serenade-for-string-orchestra-in-e-major-op.22-ii.-tempo-di-valse\",\n    ],\n    composerBirthYear: 1841, // Antonn Dvok was born in 1841\n    genre: \"Classical\", // He was a classical composer\n    style: \"Romantic\", // Part of the Romantic movement\n    country: \"Czech Republic\", // Born in what is now the Czech Republic\n  },\n  {\n    // https://musescore.com/user/19710/sets\n    slug: \"beethoven\",\n    midis: [\n      \"sonatina_in_g_beethoven_anh_5_no_1_beethoven\",\n\n      \"beethoven-symphony-no.-5-1st-movement-piano-solo\",\n      \"beethoven---sonata-in-f-minor-op.2-no.1-movement-i\",\n      \"piano_sonata_no_3_in_c_major_op_2_no_3_ludwig_van_beethoven_piano_sonata_no_3_in_c_major_op_2_no_3_complete\",\n      \"beethoven_sonata_in_f_minor_op_2_no_1_movement_i\",\n      \"beethoven_sonate_5_1st\",\n      \"beethoven_sonata_8_pathetique_op_13_mov_1\",\n      \"beethoven_sonata_in_g_op_14_no_2_movement_i\",\n      \"beethoven_op_22_sonata_11_mov_1\",\n      \"Sonate_No._14_Moonlight_1st_Movement\",\n      \"moonlight_sonata_ludwig_van_beethoven_piano_solo\",\n      \"Sonate_No._14_Moonlight_3rd_Movement\",\n      \"sonate-no.-17-tempest-3rd-movement\",\n      \"sonate-no.-19-1st-movement\",\n      \"sonate-no.-19-2nd-movement\",\n\n      \"beethoven_trio_for_clarinet_cello_and_piano_no_4_op_11_2nd_movement\",\n      \"Fr_Elise\",\n\n      \"bagatelle_in_g_minor_op_119_no_1_ludwig_van_beethoven_16_07_1770_26_03_1827_piano_solo\",\n      \"beethoven---bagatelle-no.-4-in-a-major-op.-119\",\n      \"beethoven---bagatelle-in-a-minor-no.-9---op.-119\",\n      \"beethoven---bagatelle-in-a-major-no.-10---op.-119\",\n      \"bagatelle-op.-119.-no-2---ludwig-van-beethoven\",\n      \"bagatelle-op.119-no.5-beethoven\",\n    ],\n    composerBirthYear: 1770, // Ludwig van Beethoven was born in 1770\n    genre: \"Classical\", // Beethoven bridged the Classical and Romantic eras, but is primarily associated with Classical music\n    style: \"Romantic\", // Beethoven's later works, particularly from his middle period onward, are often considered Romantic\n    country: \"Germany\", // Beethoven was German (born in Bonn, which was part of Electorate of Cologne, now Germany)\n  },\n  {\n    slug: \"einaudi\",\n    midis: [\n      \"the_earth_prelude_ludovico_einaudi_piano_solo\",\n      \"ludovico-einaudi-una-mattina\",\n    ],\n    composerBirthYear: 1955, // Ludovico Einaudi was born in 1955\n    genre: \"Classical\", // Modern classical music\n    style: \"Minimalism, 21st Century Piano\", // Known for Minimalism and contemporary classical style\n    country: \"Italy\", // Born in Italy\n  },\n  {\n    slug: \"michel_petrucciani\",\n    midis: [\"home-1998-solo-live-transcription---michel-petrucciani\"],\n  },\n  {\n    slug: \"horo\",\n    midis: [\n      \"aytoska-rchenica---unknown-aitoska_rachenitsa\",\n      \"backovsko-horo\",\n      \"bakovsko-horo\",\n      \"bavno-horo\",\n      \"bistrica-kopanica\",\n      \"bistrishka-kopanica\",\n      \"bistrishka-kopanitsa\",\n      \"blagoevgradsko-horo\",\n      \"bregovsko-horo-1\",\n      \"bregovsko-horo-2\",\n      \"brestaska-racenica---misc-traditional-brestaska-racenica\",\n      \"bulcenska-racenica\",\n      \"bulchenska-rachenitsa\",\n      \"cecovoto-horo-9-8\",\n      \"celebinsko-horo\",\n      \"cerovska-kopanica\",\n      \"cesto-horo\",\n      \"cetvorno-horo\",\n      \"cetvorno-horo-2\",\n      \"cetvorno-horo-4\",\n      \"chetvorno-horo---sofia\",\n      \"chetvorno-shopsko-horo\",\n      \"chtvorno-horo---misc-traditional\",\n      \"daichovo-horo\",\n      \"daichovo-horo---viacheslav-semyonov\",\n      \"daichovo-horo-2\",\n      \"daichovo-horo-3\",\n      \"daichovo_horo_1\",\n      \"roumen-sirakov-s-daichevo\",\n      \"denjovo-horo\",\n      \"devetorka-samokovsko-horo\",\n      \"drjanovska-racenica-ii\",\n      \"dudino-horo---boris-karlov\",\n      \"dunavsko-horo---diko-iliev-diko-iliev\",\n      \"eleno-mome-elenino-horo\",\n      \"elenska-racenica\",\n      \"elenska-racenica---misc-traditional-elenska-racenica\",\n      \"gankino_horo\",\n      \"gankino_horo_traditionnel_bulgare\",\n      \"gjusevska-racenica\",\n      \"glavinishko-cetvorno\",\n      \"gr-uan-vcarsko-horo\",\n      \"gr-uan-vcarsko-horo-1\",\n      \"gr-uan-vcarsko-horo-2\",\n      \"hanukah-in-santa-monica---tom-lehrer-8bbe875464c17f6faa9a162192557cf1a17a257d-2\",\n      \"ivailovsko-horo-in-c\",\n      \"kemensko-horo\",\n      \"kojovo-horo\",\n      \"kolev-s-kopanitsa\",\n      \"koljovo-horo\",\n      \"konushenska-rchenica---konushenski-orkestr\",\n      \"kopanica\",\n      \"kopanitsa\",\n      \"kopanitsa-a-la-turka\",\n      \"krajdunavsko-horo\",\n      \"krivo-horo\",\n      \"krivo_sadovsko_horo\",\n      \"kulsko-horo\",\n      \"kulsko-horo-1\",\n      \"kulsko-horo-2\",\n      \"lazarsko-horo\",\n      \"lazarsko-horo-1\",\n      \"lomka-po-lomka-kasapsko-horo\",\n      \"malisevsko-horo\",\n      \"mihaiylovgradsko-horo\",\n      \"misino-horo\",\n      \"momino-horo\",\n      \"mr-zvonsky-s-kopanica\",\n      \"novoselsko-kopanica\",\n      \"paidushko-choro\",\n      \"paidushko-horo\",\n      \"paidushko-horo-2\",\n      \"paidusko-horo\",\n      \"pajdusko-horo\",\n      \"pamela-s-ruchenitsa\",\n      \"pasard-vzijska-kopanica\",\n      \"pernishka-rchenica---ibro-lolov\",\n      \"pravo-horo-version-2\",\n      \"rachenica-for-three\",\n      \"rachenitsa\",\n      \"rachenitsa-1\",\n      \"rachenitsa-2\",\n      \"radino-horo\",\n      \"radomirsko-horo\",\n      \"sandansko-horo\",\n      \"sandansko-horo-1\",\n      \"satovcensko-horo\",\n      \"serbian-racenica\",\n      \"severnyashka-racenica\",\n      \"seymour_blagoevgradsko_horo\",\n      \"seymour_cekurjankino_horo\",\n      \"seymour_drjanovska_rachenica\",\n      \"seymour_elenska_rachenica\",\n      \"seymour_gjusevska_rachenica\",\n      \"shopska-rachenitsa\",\n      \"sitno-krajdunavsko-horo\",\n      \"smeceno_horo\",\n      \"starceska-racenica\",\n      \"suleman-s-kopanitsa\",\n      \"svatbarska-racenica---bulgarien\",\n      \"svatbarska-rachenitsa\",\n      \"svornato-horo\",\n      \"traditional-music---petrunino-horo\",\n      \"traditional_music_plevensko_daichovo_horo\",\n      \"trakijska-rachenica\",\n      \"trakiyska-rchenica\",\n      \"varnensko-horo\",\n      \"vcekurjankino-horo\",\n      \"vcerkesko-horo-3\",\n      \"veselinovo-horo\",\n      \"veselinovo-horo-1\",\n      \"veselinovo-horo-2\",\n      \"veselinovo-horo-3\",\n      \"yareshko-horo\",\n      \"sandansko-oro\",\n      \"seymour_jambolsko_pajdushko\",\n      \"seymour_paidushko\",\n      \"seymour_pajdusko_oro\",\n      \"bavno-oro\",\n      \"dospatsko-oro---misc-tunes\",\n      \"gankino\",\n      \"gankino-2\",\n      \"kasapsko\",\n      \"maricensko\",\n      \"chetvorno_shopsko_fixed\",\n      \"daichovo-chara\",\n      \"daichovo-hora\",\n    ],\n    country: \"Bulgaria\",\n  },\n  {\n    slug: \"franz_xaver_gruber\",\n    midis: [\"stille-nacht-heilige-nacht-the-1818-original-silent-night\"],\n    composerBirthYear: 1787,\n    country: \"Austria\",\n    genre: \"Classical\",\n    style: \"Romantic\",\n  },\n  {\n    slug: \"r_bryan_anthony\",\n    midis: [\n      \"away-in-a-manger-by-william-j.-kirkpatrick-arranged-by-r-bryan-anthony\",\n      \"silent-night-holy-night-piano-solo---arranged-by-r-bryan-anthony\",\n    ],\n    composerBirthYear: 1980,\n    style: \"Modern Jazz\",\n  },\n  {\n    slug: \"ernest_shand\",\n    midis: [\n      \"andante-espressivo-op-60---shand-ernest\",\n      \"songes-d-ete-op-95---shand-ernest\",\n    ],\n    composerBirthYear: 1868,\n    genre: \"Classical Guitar\",\n    country: \"UK\",\n  },\n  {\n    slug: \"william_j_kirkpatrick\",\n    midis: [\n      \"away-in-a-manger-cradle-song\",\n      \"crown-him-with-many-crowns-kirkpatrick---wm.-j.-kirkpatrick\",\n    ],\n    composerBirthYear: 1838,\n    country: \"Ireland, USA\",\n    genre: \"Classical\",\n    style: \"Hymn\",\n  },\n  {\n    slug: \"franz_gordon\",\n    midis: [\n      \"the-french-library---franz-gordon\",\n      \"song-for-johanna---franz-gordon\",\n    ],\n  },\n  {\n    slug: \"paul_de_senneville\",\n    midis: [\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n      \"ballade-pour-adeline---richard-clayderman\",\n      \"moon-tango---r.-clayderman\",\n      \"les-fleurs-sauvages---richard-clayderman\",\n      \"souvenirs-d-enfance---richard-clayderman\",\n      \"concerto-des-etoiles---richard-clayderman\",\n      \"a-comme-amour-by-paul-de-senneville-arranged-richard-clayderman-for-piano\",\n      \"nostalgy-by-olivier-toussaint-arranged-richard-clayderman-for-piano\",\n      \"jardin-secret-by-paul-de-senneville-arranged-richard-clayderman-for-piano\",\n      \"lyphard-melody---richard-clayderman\",\n      \"dolannes-melody--richard-clayderman\",\n      \"les-premiers-sourires-de-vanessa-by-richard-clayderman-for-piano\",\n      \"coeur-fragile\",\n      \"lettre-a-ma-mere\",\n      \"coup-de-coeur-coup-de-coeur-serenade-de-l-etoile--richard-clayderman\",\n      \"les-oiseaux-tristes-du-zuiderzee\",\n      \"triste-coeur\",\n      \"les-jours-triste\",\n      \"concerto-pour-une-jeune-fille-nommee-je-t-aime\",\n      \"la-fuite-du-temps-by-richard-clayderman-for-piano\",\n      \"hungarian-sonata---paul-de-senneville\",\n      \"voyage-a-venice---richard-clayderman\",\n      \"couleur-tendresse\",\n      \"revivre-sa-vie--richard-clayderman\",\n      \"eden-is-a-magic-world---paul-de-senneville-and-oliver-toussaint\",\n      \"promenade-dans-les-bois\",\n      \"murmures-murmullos\",\n      \"concerto-la-madrague----paul-de-senneville-jean-baudlot\",\n      \"le-deuxieme-slow----paul-de-senneville-jean-baudlot\",\n      \"eleana\",\n    ],\n    composerBirthYear: 1933,\n    genre: \"Easy Listening, Intrumental Pop\", // Known for his romantic and easy-listening style\n    country: \"France\", // Born in Paris, France\n  },\n  {\n    slug: \"marc_streitenfeld\",\n    midis: [\n      \"honoring-the-dead---marc-streitenfeld\",\n      \"american-gangster-frank-lucas---marc-streitenfeld\",\n      \"the-grey\",\n    ],\n    composerBirthYear: 1968, // Marc Streitenfeld was born in 1968\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Orchestral, Cinematic\", // His style is orchestral and cinematic\n    country: \"Germany\", // Born in Frankfurt, Germany\n  },\n  {\n    slug: \"brian_eno\",\n    midis: [\n      \"music_for_airports_1_1-eno\",\n      \"by-this-river---brian-eno\",\n      \"harold-budd-brian-eno---not-yet-remembered\",\n      \"blonde-by-roger-and-brian-eno\",\n    ],\n    composerBirthYear: 1948, // Brian Eno was born in 1948\n    genre: \"Ambient, Electronic\", // Known for ambient and electronic music\n    style: \"Ambient, Experimental\", // Pioneer of ambient music and experimental sound\n    country: \"UK\", // Born in England\n  },\n  {\n    slug: \"campyfire\",\n    midis: [\"greed---campyfire\", \"nut-cracker-march---arsenal-emote-music\"],\n    composerBirthYear: undefined, // Birth year not available\n    genre: \"Electronic\", // Electronic music\n    style: \"Chiptune, Lo-fi\", // Lo-fi and chiptune elements are present in their music\n    country: undefined, // Country not available\n  },\n  {\n    slug: \"gabriele_traietti\",\n    midis: [\"a-trip-to-rapture-i-in-the-bathysphere\"],\n    composerBirthYear: undefined, // Birth year not available\n    genre: \"Electronic\", // Likely an electronic artist based on the music\n    style: \"Ambient, Soundtrack\", // The track suggests a cinematic and ambient style\n    country: undefined, // Country not available\n  },\n  {\n    slug: \"lofi\",\n    midis: [\"cool-lofi-hip-hop-song\"],\n    composerBirthYear: undefined, // No specific birth year for this genre\n    genre: \"Lo-fi Hip Hop\", // The genre is lo-fi hip hop\n    style: \"Chill, Instrumental\", // Lo-fi is typically chill and instrumental\n    country: undefined, // Country not available\n  },\n  {\n    slug: \"horace_silver\",\n    midis: [\"song-for-my-father---horace-silver\"],\n    composerBirthYear: 1928, // Horace Silver was born in 1928\n    genre: \"Jazz\", // A legendary jazz pianist and composer\n    style: \"Hard Bop\", // Known for the hard bop style of jazz\n    country: \"USA\", // Born in the United States\n  },\n  {\n    slug: \"mulatu_astatke\",\n    midis: [\"yekermo_sew_-_mulatu_astatke-no-acc\"],\n    composerBirthYear: 1943, // Mulatu Astatke was born in 1943\n    genre: \"Jazz, Ethio-jazz\", // Known for Ethio-jazz, a fusion of jazz and traditional Ethiopian music\n    style: \"Fusion, Ethio-jazz\", // Pioneer of Ethio-jazz\n    country: \"Ethiopia\", // Born in Addis Ababa, Ethiopia\n  },\n  {\n    slug: \"kanye_west\",\n    midis: [\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n      \"kanye-west-homecoming-piano-cover\",\n    ],\n    composerBirthYear: 1977,\n    genre: \"Hip-hop\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ramin_djawadi\",\n    midis: [\n      // \"Game_of_Thrones_Easy_piano\",\n      \"game-of-thrones-main-piano\",\n      \"light-of-the-seven---ramin-djawadi-complete-transcription\",\n      \"the-night-king---ramin-djawadi\",\n      \"ramin-djawadi---a-lannister-always-pays-his-debts-piano\",\n    ],\n    composerBirthYear: 1973, // Ramin Djawadi was born in 1973\n    genre: \"Film Score, Classical\", // Known for his film scores\n    style: \"Orchestral, Cinematic\", // Orchestral and cinematic style, particularly in soundtracks\n    country: \"Germany\", // Born in Germany\n  },\n  {\n    slug: \"vivaldi\",\n    midis: [\n      \"vivaldi---summer---piano\",\n      \"vivaldi---winter-rousseau-version-original\",\n    ],\n    composerBirthYear: 1678,\n    genre: \"Classical\",\n    style: \"Baroque\",\n    country: \"Italy\",\n  },\n  {\n    slug: \"coldplay\",\n    midis: [\n      \"Viva_La_Vida_Coldplay\",\n      \"the-scientist---coldplay-piano-arrangement\",\n      \"clocks---coldplay\",\n      \"fix-you---coldplay\",\n    ],\n    composerBirthYear: 1977,\n    genre: \"Pop, Pop Rock, Alternative Rock\",\n    country: \"UK\",\n  },\n  {\n    slug: \"brad_breeck\",\n    midis: [\n      \"Gravity_Falls_Opening\",\n      \"gravity-falls---weirdmageddon-theme\",\n      \"eda-s-requiem---brad-breeck-piano\",\n      \"we-ll-meet-again---gravity-falls\",\n    ],\n    composerBirthYear: 1978,\n    genre: \"Animation\",\n    country: \"USA\",\n  },\n  {\n    slug: \"bruno_mars\",\n    midis: [\n      \"when-i-was-your-man---bruno-mars-600e3a\",\n      \"bruno-mars-leave-the-door-open\",\n      \"die-with-a-smile---lady-gaga-bruno-mars\",\n    ],\n    composerBirthYear: 1985,\n    genre: \"Pop\",\n    country: \"USA\",\n  },\n  {\n    slug: \"luo_ni\",\n    midis: [\n      \"g-minor-bach-original\",\n      \"crazy-pharaoh\",\n      \"miss-fox-piano-tiles-2\",\n      \"childhood-piano-tiles-2\",\n      \"bluestone-alley-piano-tiles-2\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Music Game\",\n    country: \"China\",\n  },\n  {\n    slug: \"laura_shigihara\",\n    midis: [\n      \"plants-vs-zombies-grasswalk\",\n      \"crazy-dave-intro-theme---laura-shigihara-from-plants-vs.-zombies\",\n      \"loonboon---laura-shigihara-arranged-by-piano-keyng\",\n      \"moongrains---laura-shigihara\",\n      \"plants-vs-zombies---watery-graves\",\n\n      \"to-the-moon-for-river-johnny-s-version-48aa2a\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Music Game\",\n    country: \"US, Japan\",\n  },\n  {\n    slug: \"yosuke_yamashita\",\n    midis: [\n      \"never-ending-saga---yosuke-yamashita\",\n      \"hikari-e---franchouchou-hikari-e---yosuke-yamashita-zombieland-saga\",\n      \"ookami-blues-tv-size---seton-academy-ed\",\n    ],\n    country: \"Japan\",\n  },\n  {\n    slug: \"christopher_larkin\",\n    midis: [\n      \"hollow-knight-main-theme---christopher-larkin\",\n      \"greenpath---christopher-larkin\",\n      \"sealed-vessel---christopher-larkin\",\n      \"the-grimm-troupe---christopher-larkin\",\n      \"soul-sanctum---christopher-larkin\",\n      \"crossroads---christopher-larkin-hollow-knight\",\n      \"dirtmouth---christopher-larkin-hollow-knight-7e5846\",\n      \"hive-knight---christopher-larkin-hive-knight---christopher-larkin\",\n      \"broken-vessel---christopher-larkin---theme-from-hollow-knight-for-piano\",\n    ],\n    composerBirthYear: 1992,\n    genre: \"Video Game Music\",\n    country: \"Australia\",\n  },\n  {\n    slug: \"jose_asuncion_flores\",\n    midis: [\n      \"panambi-vera---manuel-ortiz-guerrero-y-jose-asuncion-flores\",\n      \"nde-rendape-aju-jose-a-suncion-flores-manuel-ortiz-guerrero\",\n    ],\n    composerBirthYear: 1904,\n    genre: \"Guarania\",\n    country: \"Paraguay\",\n  },\n  {\n    slug: \"fujii_kaze\",\n    midis: [\n      \"shinunoga-e-wa---fujii-kaze-si-nunogaiiwa\",\n      \"matsuri---fujii-kaze\",\n    ],\n    country: \"Japan\",\n    genre: \"J-Pop\",\n    composerBirthYear: 1997,\n  },\n  {\n    slug: \"kazumi_totaka\",\n    midis: [\"mii-channel-piano\", \"wii-sports-theme-piano\"],\n    composerBirthYear: 1967,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"hirokazu_tanaka\",\n    midis: [\n      \"overworld-from-kid-icarus---hirokazu-tanaka\",\n      \"adobansuadobentiya-pokemon-ag-japanese-op1-piano---hirokazu-tanaka\",\n    ],\n    composerBirthYear: 1957,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"kohei_tanaka\",\n    midis: [\n      \"one-piece---bink-s-sake---kohei-tanaka\",\n      \"overtaken---kohei-tanaka-overtaken-one-piece---kohei-tanaka\",\n      \"if-you-live-one-piece-ost-bgm---kohei-tanaka-maranoch\",\n    ],\n    composerBirthYear: 1954,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"hidenori_maezawa\",\n    midis: [\n      \"prelude---castlevania-iii\",\n      \"aquarius---castlevania-iii-dracula-s-curse\",\n      \"alien-lair\",\n      \"stage-1-jungle\",\n    ],\n    composerBirthYear: 1958,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"koji_kondo\",\n    midis: [\n      \"legend-of-zelda-main-theme-score\",\n      \"Legend_of_Zelda_Great_Fairy_Fountain\",\n      \"Super_Mario_Bros_Main_Theme\",\n      \"Zeldas_Lullaby\",\n      \"ocarina-of-time-lost-woods-piano\",\n    ],\n    composerBirthYear: 1961,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"imagine_dragons\",\n    midis: [\"demons-imagine-dragons\", \"Believer_-_Imagine_Dragons\"],\n    composerBirthYear: 1984,\n    country: \"USA\",\n    genre: \"Rock\",\n  },\n  { slug: \"adele\", midis: [\"someone-like-you\", \"easy-on-me---adele\"] },\n  {\n    slug: \"parov_stelar\",\n    midis: [\n      \"booty-swing---parov-stelar\",\n      \"chambermaid-swing---parov-stelar---piano-notes\",\n      \"catgroove-piano-solo\",\n      \"all-night\",\n      \"mojo-radio-gang---parov-stelar-parov-stelar---mojo-radio-gang-all-piano\",\n    ],\n  },\n  {\n    slug: \"hans_zimmer\",\n    midis: [\n      \"Interstellar\",\n      \"molossus---batman-begins\",\n      \"eptesicus---batman-begins\",\n      \"antrozous---batman-begins\",\n    ],\n  },\n  { slug: \"bo_en\", midis: [\"bo-en---my-time\", \"tussle-among-trees---bo-en\"] },\n  {\n    slug: \"pedro_silva\",\n    midis: [\n      \"Omori_Duet\",\n      \"omori---gator-gambol---ost-no.-103---pedro-silva\",\n      \"omori---sugar-star-planetarium---ost-no.-21---pedro-silva\",\n      \"by-your-side.---omori\",\n      \"omori-ost---006---let-s-get-together-now---pedro-silva\",\n    ],\n  },\n  {\n    slug: \"toshio_masuda\",\n    midis: [\n      \"sadness-and-sorrow-for-piano-solo\",\n      \"afternoon-of-konoha---toshio-masuda\",\n      \"tenten-s-theme---naruto\",\n      \"the-raising-fighting-spirit---toshio-masuda---jarvis-phan\",\n      \"gaara-s-childhood-theme---toshio-masuda\",\n    ],\n  },\n  {\n    slug: \"dan_salvato\",\n    midis: [\n      \"doki-doki-literature-club-ost---your-reality\",\n      \"okay-everyone---dan-salvato-okay-everyone\",\n      \"my-confession---dan-salvato-my-confession-ddlc\",\n      \"ohayou-sayori---dan-salvato-ohayou-sayori-ddlc\",\n      \"play-with-me---dan-salvato---doki-doki-literature-club\",\n      \"i-still-love-you\",\n      \"poem-panic---ddlc\",\n      \"daijoubu---doki-doki-literature-club\",\n      \"my-feelings\",\n      \"dreams-of-love-and-literature\",\n      \"my-song-your-note-piano---dan-salvato\",\n\n      \"your-obnoxious-reality---your-reality-but-sadder\", // this piece does not exist!\n    ],\n  },\n  {\n    slug: \"clint_mansell\",\n    midis: [\n      \"Requiem_for_a_Dream\",\n      \"dying-dream-arrangement-by-reik\",\n      \"the-last-man-by-clint-mansell\",\n      \"leaving-earth---mass-effect-3\",\n      \"first-sleep---clint-mansell\",\n      \"memories-someone-we-ll-never-know\",\n    ],\n  },\n  {\n    slug: \"yann_tiersen\",\n    midis: [\n      \"Yann_Tiersen_Amelie\",\n      \"rue-des-cascades---yann-tiersen\",\n      \"tiersen-yann----j-y-suis-jamais-alle\",\n      \"les-jours-triste\",\n      \"la-valse-d-amelie-piano\",\n      \"la-noyee---yann-tiersen-la-noyee\",\n      \"a-quai---yann-tiersen\",\n      \"le-moulin---yann-tiersen\",\n\n      \"l-autre-valse-d-amelie---yann-tiersen-l-autre-valse-d-amelie\",\n    ],\n  },\n  {\n    slug: \"michael_giacchino\",\n    midis: [\n      \"Disney_Pixar_Up_Theme\",\n      \"imperial-suite---michael-giacchino-~piano~\",\n      \"catwoman---michael-giacchino\",\n      \"ratatouille-main-theme---michael-giacchino\",\n      \"spider-man-far-from-home-suite---michael-giacchino-piano-arrangement\",\n    ],\n  },\n  {\n    slug: \"fkj\",\n    midis: [\n      \"fee-just-piano-version---fkj\",\n      \"meeting-again-in-the-void-just-piano-version---fkj\",\n      \"sundays-just-piano-version---fkj---fkj\",\n      \"tui---fkj-tui\",\n      \"last-hour-just-piano-version---fkj\",\n      \"does-it-exist---fkj\",\n      \"ylang-ylang---fkj-transcribed-by-lilroo\",\n      \"10-years-ago---fkj\",\n      \"pe---fkj\",\n    ],\n    genre: \"Lofi\",\n    composerBirthYear: 1990,\n    country: \"France\",\n  },\n  {\n    slug: \"mac_miller\",\n    midis: [\n      \"congratulations---mac-miller\",\n      \"good-news---mac-miller---easy-piano\",\n      \"come-back-to-earth-by-mac-miller\",\n      \"circles---mac-miller\",\n      \"everybody---mac-miller-medium-piano\",\n      \"once-a-day---mac-miller\",\n    ],\n    country: \"USA\",\n    composerBirthYear: 1992,\n  },\n  {\n    slug: \"yasuharu_takanashi\",\n    midis: [\n      \"fairy-tail-main-theme\",\n      \"fairy-tail-ost---natsu-theme\",\n      \"fairy-tail--past-story\",\n      \"fairy-tail---mirajane-no-theme---yasuharu-takanashi-fairy-tail---mirajane-no-theme---yasuharu-takanashi-mira-s-theme\",\n      \"fairy-tail-sad-theme\",\n      \"dragon-slayer---fairy-tail\",\n      \"fairy-tail-opening-14---fairy-tail-yakusoku-no-hi\",\n    ],\n    country: \"Japan\",\n    composerBirthYear: 1963,\n  },\n  {\n    slug: \"taro_umebayashi\",\n    midis: [\n      \"yuri-on-ice---piano-theme-full\",\n      \"minako-s-mood-choose-your-costume---taro-umebayashi-yuri-on-ice\",\n      \"serenade-for-two-from-yuri-on-ice\",\n    ],\n  },\n  {\n    slug: \"yugo_kanno\",\n    midis: [\n      \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\",\n      \"jolyne-s-theme---yugo-kanno---stone-ocean-piano-solo\",\n      \"jotaro-s-theme---yugo-kanno-blue-devils-2023-marimba---jojo-s-bizarre-adventure\",\n      \"killer-yoshikage-kira-s-theme---jojo-s-bizarre-adventure-part-4-diamond-is-unbreakable---yugo-kanno-quiet-life\",\n      \"josuke-s-theme-for-piano-breakdown\",\n      \"pucci-theme---yugo-kanno-pale-snake-from-jojo-stone-ocean\",\n    ],\n    composerBirthYear: 1977,\n    country: \"Japan\",\n  },\n  {\n    slug: \"jule_styne\",\n    midis: [\n      \"it-s-been-a-long-long-time---harry-james\",\n      \"let-it-snow---jule-styne\",\n      \"people---jule-styne\",\n      \"cornet-man---bob-merrill\",\n    ],\n    composerBirthYear: 1905,\n    country: \"USA\",\n    genre: \"Broadway\",\n  },\n  {\n    slug: \"takahiro_obata\",\n    midis: [\n      \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\",\n      \"norman-s-theme-22194\",\n      \"emma-s-sorrow---the-promised-neverland\",\n      \"krone-on-the-gf-string\",\n      \"shoshimin-ost---main-theme---takahiro-obata\",\n    ],\n  },\n  {\n    slug: \"bella_ciao\",\n    midis: [\n      \"bella-ciao---sad-and-slow-piano-version-arranged-by-rafal-piwowarczuk-la-casa-de-papel\",\n      \"Bella_Ciao\",\n    ],\n  },\n  {\n    slug: \"yehezkel_raz\",\n    midis: [\n      \"ballerina---yehezkel-raz\",\n      \"laniakea---yehezkel-raz\", // does not exist\n      \"carousel---yehezkel-raz\", // it's called laniakea on youtube\n      \"continuance---yehezkel-raz\",\n      \"slowly-understanding---yehezkel-raz\",\n      \"breath-in---yehezkel-raz\",\n      \"breath-out---yehezkel-raz\",\n      \"after-you-came---yehezkel-raz\",\n      \"before-you-left---yehezkel-raz\", // does not exist\n      \"closing-time---yehezkel-raz\",\n      \"milestone---yehezkel-raz\",\n      \"early-morning-haze---yehezkel-raz\",\n    ],\n  },\n  {\n    slug: \"masaru_yokoyama\",\n    midis: [\n      \"my-lie-watashi-no-uso---your-lie-in-april\",\n      \"again-your-lie-in-april---masaru-yokoyama\",\n      \"classroom-of-the-elite-season-2-theme---masaru-yokoyama-kana-hashiguchi\",\n      \"presence-otouto-mitai-na-sonzai---your-lie-in-april-si-yue-hajun-noxu\",\n      \"horimiya-ep-4-untitled-track---masaru-yokoyama-please-don-t-go\",\n      \"yi-yu-zhi-xian-qu-yiyu---shi-jie-zhi-wai-sheng-ri-wu-ming-pian-duan-beyond-the-world---heng-shan-ke-yokoyama-masaru\",\n      \"fate-apocrypha-hope---masaru-yokoyama\",\n      \"orange-your-lie-in-april-ed2\",\n    ],\n  },\n  {\n    slug: MUSESCORE_TOP_100_SLUG,\n    posttext: AboutTop100Corpus,\n    midis: [\n      \"river-flows-in-you\", // Yiruma\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\", // Joe Hisaishi\n      \"Canon_in_D\", // Pachelbel\n      \"Clair_de_Lune__Debussy\", // Debussy\n      \"Fr_Elise\", // Beethoven\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\", // Chopin\n      \"Gymnopdie_No._1__Satie\", // Satie\n      \"Undertale_-_Megalovania_Piano_ver._3\", // Toby Fox\n      \"Golden_Hour__JVKE_Updated_Ver.\", // JVKE\n      \"Je_Te_Laisserai_Des_Mots_-_Patrick_Watson\", // Patrick Watson\n\n      \"Hallelujah\", // Leonard Cohen\n      \"Interstellar\", // Hans Zimmer\n      \"Another_Love__-_Tom_Odell_Professional\", // Tom Odell\n      \"Sweden_Minecraft\", // C418\n      \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\", // Klaus Badelt\n      \"game-of-thrones-main-piano\", // Ramin Djawadi\n      \"someone-you-loved-lewis-capaldi\", // Lewis Capaldi\n      \"Ed_Sheeran_Perfect\", // Ed Sheeran\n      \"Liebestraum_No._3_in_A_Major\", // Liszt\n      \"Believer_-_Imagine_Dragons\", // Imagine Dragons\n\n      \"All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\", // John Legend\n      \"Mad_world_Piano\", // Roland Orzabal\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\", // Paul de Senneville\n      \"someone-like-you\", // Adele\n      \"my-heart-will-go-on\", // James Horner\n      \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\", // Yugo Kanno\n      \"Carol_of_the_Bells\", // Mykola Leontovych\n      \"piano-man-piano\", // Billy Joel\n      \"Fly_Me_to_the_Moon\", // Bart Howard\n      \"passacaglia---handel-halvorsen\", // Handel\n\n      \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\", // Bach\n      \"All_I_Want_for_Christmas_is_You\", // Mariah Carey\n      \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\", // Shostakovich\n      \"wa-mozart-marche-turque-turkish-march-fingered\", // Mozart\n      \"Viva_La_Vida_Coldplay\", // Coldplay\n      \"Gravity_Falls_Opening\", // Brad Breeck\n      \"the_entertainer_scott_joplin\", // Scott Joplin\n      \"Disney_Pixar_Up_Theme\", // Michael Giacchino\n      \"a-thousand-years\", // Christina Perri\n      \"John_Lennon_Imagine\", // John Lennon\n\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\", // Kanye West\n      \"Lovely_Billie_Eilish\", // Billie Eilish\n      // \"lovely-billie-eilish-and-khalid\",\n      \"Omori_Duet\", // Pedro Silva\n      \"Never_Gonna_Give_You_Up\", // Mike Stock\n      \"despacito-piano-cover-peter-bence\", // Luis Fonsi\n      \"solas---jamie-duffy\", // Jamie Duffy\n      \"autumn-leaves-jazz-piano\", // Joseph Kosma\n      \"still-dre---variation-composition\", // Andre Young\n      // Jake 25.17 - duplicate, replaced\n      \"mii-channel-piano\", // Kazumi Totaka\n\n      \"sadness-and-sorrow-for-piano-solo\", // Toshio Masuda\n      \"Super_Mario_Bros_Main_Theme\", // Koji Kondo\n      \"Cant_Help_Falling_In_Love\", // Jean-Paul-gide Martini\n      \"g-minor-bach-original\", // Luo Ni\n      \"when-i-was-your-man---bruno-mars-600e3a\", // Bruno Mars\n      \"gurenge--demon-slayer-kimetsu-no-yaiba-op\", // Kayoko Kusano\n      \"Let_Her_Go_Passenger\", // Passenger\n      \"we-are-number-one-but-it-s-a-piano-transcript\", // Mni Svavarsson\n      \"dragonborn---skyrim-theme-song-piano-solo\", // Jeremy Soule\n      \"doki-doki-literature-club-ost---your-reality\", // Dan Salvato\n\n      \"ylang-ylang---fkj-transcribed-by-lilroo\", // FKJ\n      \"attack-on-titan-theme-guren-no-yumiya\", // Revo\n      \"Bella_Ciao\", // Italian folk\n      \"minuet-bwv-anhang-114-in-g-major\", // Christian Petzold\n      \"Take_on_me\", // a-ha\n      \"congratulations---mac-miller\", // Mac Miller\n      // \"the-office---opening-titles-theme-song-for-piano\", // Jay Ferguson\n      \"the-office\", // Jay Ferguson\n      \"it-s-been-a-long-long-time---harry-james\", // Jule Styne\n      \"Dawn_Pride_and_Prejudice\", // Dario Marianelli\n      \"kimi-no-na-wa---sparkle-theishter-2016\", // Radwimps, Yojiro Noda\n\n      \"Yann_Tiersen_Amelie\", // Yann Tiersen\n      \"sia---snowman\", // Sia\n      \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\", // Takahiro Obata\n      \"theme-from-schindler-s-list---piano-solo\", // John Williams\n      \"happy-birthday\", // Patty Smith Hill\n      \"flight-of-the-bumblebee\", // Nikolai Rimsky-Korsakov\n      \"dance-of-the-sugar-plum-fairy\", // Pyotr Ilyich Tchaikovsky\n      \"dont-stop-believing-piano\", // Journey\n      \"sign-of-the-times---harry-styles\", // Harry Styles\n      \"Requiem_for_a_Dream\", // Clint Mansell\n\n      \"yuri-on-ice---piano-theme-full\", // Taro Umebayashi + Taku Matsushiba\n      \"ye-niqu-keru-yoru-ni-kakeru---racing-into-the-night\", // Ayase\n      \"africa---toto\", // Toto\n      \"vivaldi---summer---piano\", // Vivaldi\n      \"Love_Like_You_Steven_Universe\", // Steven Universe\n      \"alan-walker---alone-piano\", // Alan Walker\n      \"my-lie-watashi-no-uso---your-lie-in-april\", // Masaru Yokoyama\n      \"anastasia---once-upon-a-december\", // Stephen Flaherty\n      \"Test_Drive_How_to_Train_Your_Dragon\", // John Powell\n      \"Pokemon_Theme_Song\", // John Siegler\n\n      \"your-song-piano\", // Elton John\n      \"nothing-else-matters---metallica\", // Metallica\n      \"calum-scott---you-are-the-reason-piano-sheet-lyrics-lyrics-version-link-in-description\", // Calum Scott\n      \"fairy-tail-main-theme\", // Yasuharu Takanashi\n      \"welcome-to-the-black-parade---my-chemical-romance\", // My Chemical Romance\n      \"how-far-i-ll-go-~-moana-ost\", // Lin-Manuel Miranda\n      \"la-vie-en-rose-solo-accordion\", // Louiguy\n      \"Im_Blue_Eiffel_65\", // Eiffel 65\n      \"old-town-road---lil-nas-x-ft.-billy-ray-cyrus\", // Lil Nas X\n      \"abba--the-winner-takes-it-all\", // ABBA\n      \"A_Thousand_Miles\", // Vanessa Carlton\n    ],\n  },\n  {\n    slug: \"revo\",\n    midis: [\n      \"Attack_on_Titan_Shinzou_wo_Sasageyo\",\n      \"attack-on-titan-theme-guren-no-yumiya\",\n    ],\n  },\n  {\n    slug: \"liszt\",\n    midis: [\n      \"tude_S._1413_in_G_Minor_La_Campanella__Liszt\",\n      \"liszt---trois-etudes-de-concert-no.-3-un-sospiro\",\n      \"liszt---hungarian-rhapsody-no.-2\",\n      \"Liebestraum_No._3_in_A_Major\",\n    ],\n    composerBirthYear: 1811,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Austria, Hungary\",\n  },\n  {\n    slug: \"billie_eilish\",\n    midis: [\"Billie_Eilish_Bad_Guy\", \"Lovely_Billie_Eilish\"],\n    composerBirthYear: 2001,\n    genre: \"Pop\",\n    country: \"USA\",\n  },\n  {\n    slug: \"toby_fox\",\n    midis: [\n      \"undertale-ost---hopes-and-dreams-save-the-world\",\n      \"undertale-undertale-piano\",\n      \"undertale-ost---nyeh-heh-heh-bonetrousle\",\n      \"Fallen_Down_Undertale\",\n      \"asgore-an-undertale-boss-theme\",\n      \"spider-dance---undertale\",\n    ],\n    composerBirthYear: 1991,\n    genre: \"Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"erik_satie\",\n    midis: [\n      \"satie-e.---gnossienne-no.-1\",\n      \"gnossienne-no.-2-dery\",\n      \"gnossienne-no.-3-dery\",\n      \"Gymnopdie_No._1__Satie\",\n    ],\n    composerBirthYear: 1866,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"ed_sheeran\",\n    midis: [\n      \"Ed_Sheeran_Shape_of_you\",\n      \"Photograph_Ed_Sheeran\",\n      \"shivers_ed_sheeran_shivers_ed_sheeran_mixed_ensemble\",\n      \"Ed_Sheeran_Perfect\",\n    ],\n    composerBirthYear: 1991,\n    genre: \"Pop\",\n    country: \"UK\",\n  },\n  {\n    slug: \"musescore_top100_more_works_same_composer\",\n    midis: [\n      \"ren-sheng-nomerigorando---jiu-shi-rang-jazz-arranged\",\n      \"the-office-opening-theme\",\n    ],\n  },\n\n  {\n    slug: \"henry_mancini\",\n    midis: [\n      \"Pink_Panther\",\n      \"lujon---henry-mancini\",\n      \"moon-river-for-flute---henry-mancini\",\n    ],\n    composerBirthYear: 1924,\n    genre: \"Film Score, Jazz, Pop, Easy Listening\",\n    country: \"USA\",\n  },\n  {\n    slug: \"edward_macdowell\",\n    midis: [\n      \"to-a-wild-rose-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"will-o-the-wisp-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"at-an-old-trysting-place-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"in-autumn-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"from-an-indian-lodge-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"to-a-water-lily-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"from-uncle-remus-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"a-deserted-farm-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"by-a-meadow-brook-from-woodland-sketches-op.-51---edward-macdowell\",\n      \"told-at-sunset-from-woodland-sketches-op.-51---edward-macdowell\",\n\n      \"to-a-humming-bird----edward-macdowell\",\n      \"clair-de-lune----edward-macdowell\",\n    ],\n    composerBirthYear: 1860,\n    country: \"USA\",\n  },\n  {\n    slug: \"stephen_schwartz\",\n    midis: [\n      \"defying-gravity-from-wicked---stephen-schwartz\",\n      \"when-you-believe-film-version---stephen-schwartz\",\n    ],\n    composerBirthYear: 1948,\n    country: \"USA\",\n  },\n  {\n    slug: \"nino_rota\",\n    midis: [\n      \"Godfather\",\n      \"romeo-and-juliet---nino-rota-a-time-for-us-flute-piano\",\n      \"fellini-8-1-2-rota-8-1-2-fellini-rota---nino-rota-8-1-2-fellini-rota---rota-fellini-8-1-2\",\n    ],\n    composerBirthYear: 1911,\n    country: \"Italy\",\n    genre: \"Film Score\",\n  },\n  {\n    slug: \"kristen_anderson_lopez_and_robert_lopez\",\n    midis: [\n      \"Let_It_Go_Disney_Frozen\",\n      \"remember-me---kristen-anderson-lopez-robert-lopez-from-disney-pixar-s-coco-arr-for-solo-piano\",\n      \"wandavision-from-wandavision-ep-2---kristen-anderson-lopez-robert-lopez\",\n      \"a-newlywed-couple-from-wandavision-ep-1---kristen-anderson-lopez-robert-lopez\",\n    ],\n    composerBirthYear: 1972,\n    genre: \"Animation Score\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jingle_bells\",\n    midis: [\n      \"jingle-bells\",\n      \"jingle-bells---minor-ragtime-advanced---piano\",\n      \"jingle-bells-boogie-woogie-cover\",\n      \"jingle-bells-boogie\",\n      \"jingle-bells---jazz-piano\",\n    ],\n  },\n  {\n    slug: \"marshmello\",\n    midis: [\n      \"marshmello-ft.-bastille---happier\",\n      \"Alone_Marshmello\",\n      \"marshmello-alone-sergio-moy-20201220161814-nonstop2k.com\",\n    ],\n    composerBirthYear: 1992,\n    genre: \"Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"go_shiina\",\n    midis: [\n      \"kamado-tanjiro-no-uta-~-demon-slayer-ep-19-ed-ost-fonzi-m-improvised-hard-version\",\n      \"code-vein---go-shiina\",\n    ],\n    composerBirthYear: 1974,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"carlos_gardel\",\n    midis: [\n      \"tango-por-una-cabeza\",\n      \"volver---carlos-gardel\",\n      \"melodia-de-arrabal---carlos-gardel\",\n      \"cuesta-abajo---carlos-gardel\",\n      \"golondrinas---carlos-gardel\",\n      \"rubias-de-new-york---carlos-gardel\",\n    ],\n    composerBirthYear: 1890,\n    country: \"Argentina\",\n    genre: \"Tango\",\n  },\n  {\n    slug: \"the_script\",\n    midis: [\"hall-of-fame\", \"the-script---superheroes\"],\n    composerBirthYear: 1980,\n    genre: \"Pop Rock\",\n    country: \"Ireland\",\n  },\n  {\n    slug: \"kyle_dixon_and_michael_stein\",\n    midis: [\n      \"stranger-things-theme\",\n      \"kids---kyle-dixon-michael-stein-stranger-things---arranged-by-nana\",\n      \"aftermath---kyle-dixon-and-michael-stein\",\n    ],\n    composerBirthYear: 1983,\n    country: \"USA\",\n  },\n  {\n    slug: \"dave_brubeck\",\n    midis: [\"take-five\", \"Blue_Rondo_A_La_Turk\"],\n    composerBirthYear: 1920,\n    country: \"USA\",\n    genre: \"Jazz\",\n  },\n  {\n    slug: \"junichi_masuda\",\n    midis: [\n      \"pallet-town---pokemon-red-blue-green-yellow-by-junichi-masuda\",\n      \"viridian-pewter-saffron-city---pokemon-rby---junichi-masuda\",\n      \"pokemon-rse---route-101---junichi-masuda\",\n      \"lavender-town-pokemon-r-b-y\",\n    ],\n  },\n  {\n    slug: \"brahms\",\n    midis: [\n      \"hungarian_dance_1_-c-yogore\",\n      \"hungarian-dance-no.-1\",\n      \"hungarian_dance_2_-c-yogore\",\n      \"hungarian_dance_3_-c-yogore\",\n      \"hungarian-dance-no-5-in-g-minor\",\n      \"brahms_118_1\",\n      \"brahms_op118_1\",\n      \"waltz-in-a-major-op.39-no.15-by-johannes-brahms\",\n      \"brahms---waltz-op.39-no.3\",\n      \"waltz-in-d-minor-op.39-no.9---johannes-brahms\",\n    ],\n  },\n  {\n    slug: \"evgeny_grinko\",\n    midis: [\n      \"evgeny-grinko---valse\",\n      \"carousel---evgeny-grinko\",\n      \"it-s-foggy-today---evgeny-grinko---by-fatih-erol\",\n      \"melting---evgeny-grinko\",\n      \"wind-brought---evgeny-grinko\",\n\n      \"jane-maryam---evgeny-grinko\", // Iranian song\n      \"lullaby-for-erik---evgeny-grinko\",\n    ],\n  },\n  {\n    slug: \"amachas_music_studio\",\n    midis: [\n      \"old-doll-puppet---ib-mad-father-old-doll\",\n      \"yu-nolian-ren-tati---gan-cha-noyin-le-gong-fang\",\n      \"kagayakuquan-a-shining-spring\",\n      \"still-in-memory-from-witch-s-heart\",\n      \"jin-yao-noye-ni-on-friday-night\",\n    ],\n  },\n  {\n    slug: \"musescore_top200\",\n    midis: [\n      \"Godfather\", // Nino Rota\n      \"Pink_Panther\", // Henry Mancini\n      \"Let_It_Go_Disney_Frozen\", // Kristen Anderson-Lopez & Robert Lopez\n      \"bts-bangtansonyeondan---i-need-u-suga-piano-full-solo\", // BTS\n      \"rihanna-ft.-mikky-echo---stay\", // Mikky Echo\n      \"kamado-tanjiro-no-uta-~-demon-slayer-ep-19-ed-ost-fonzi-m-improvised-hard-version\", // Go Shiina\n      \"marshmello-ft.-bastille---happier\", // Marshmello\n      \"linus-and-lucy-peanuts---vince-guaraldi\", // Vince Guaraldi\n      \"tango-por-una-cabeza\", // Carlos Gardel\n      \"chasing-kou---hidekazu-sakamoto-drowning-love---ni-rerunaihu-mule-bbajin-naipeu-ost\", // Hidekazu Sakamoto\n\n      \"hall-of-fame\", // The Script\n      \"olivia-rodrigo---drivers-license\", // Olivia Rodrigo\n      \"stranger-things-theme\", // Kyle Dixon & Michael Stein\n      \"forest-gump---main-title-feather-theme\", // Alan Silvestri\n      \"senorita---shawn-mendes-camilla-cabello\", // Shawn Mendes & Camila Cabello\n      \"i-see-the-light-from-disney-s-tangled\", // Alan Menken\n      \"take-five\", // Dave Brubeck\n      \"somewhere-only-we-know---keane\", // Keane\n      \"glimpse-of-us\", // Joji\n      \"lost-boy---ruth-b\", // Ruth B\n\n      \"Misty_piano_solo\", // Erroll Garner\n      \"Wellerman_Sea_Shanty\", // New Zealand folk song\n      \"flower-dance-dj-okawari\", // DJ Okawari\n      \"Jingle_Bell_Rock\", // Joseph Carleton Beal and James Ross Boothe\n      \"the-night-we-met\", // Lord Huron\n      \"Tetris_Theme\", // Russian folk song\n      \"dearly-beloved-piano-collections-kingdom-hearts\", // Yoko Shimomura\n      \"for-the-damaged-coda---blonde-redhead\", // Blonde Redhead\n      \"unravel-acoustic-ver-tokyo-ghoul-theishter-sheet-music-full-sheets\", // Toru Kitajima\n      \"stand-by-me\", // Ben E. King\n\n      \"solo-violin-caprice-no.-24-in-a-minor---n.-paganini-op.-1-no.-24\", // Niccolo Paganini\n      \"la-foule-edith-piaf-piano-chant\", // Angel Cabral\n      \"Ophelia\", // The Lumineers\n      \"turning-page---sleeping-at-last-piano-string-quartet\", // Sleeping at Last\n      \"hungarian-dance-no-5-in-g-minor\", // Johannes Brahms\n      \"take-me-to-church---hozier\", // Andrew Hozier\n      \"it-s-been-so-long-fnaf-2-song\", // The Living Tombstone\n      \"hollow-knight-main-theme---christopher-larkin\", // Christopher Larkin\n      \"7-years---lukas-graham\", // Lukas Graham\n      \"one-piece---bink-s-sake---kohei-tanaka\", // Kohei Tanaka\n\n      \"Gershwin_Rhapsody_in_Blue_Piano_solo\", // George Gershwin\n      \"idea-22---gibran-alcocer\", // Gibran Alcocer\n      \"Hit_the_Road_Jack\", // Percy Mayfield\n      \"lavender-town-pokemon-r-b-y\", // Junichi Masuda\n      \"rachmaninoff-piano-concerto-no.-2-1st-mvmt.-arr.-for-2-pianos\", // Rachmaninoff\n      \"the-weeknd---blinding-lights---advanced-cover-by-majorandminor\", // The Weeknd\n      \"in-the-end---linkin-park\", // Linkin Park\n      \"czardas-by-vittorio-monti\", // Vittorio Monti\n      \"a-wanderer-s-song-zigeunerweisen-gypsy-airs-op.20\", // Pablo de Sarasate\n      \"ave-maria-d839---schubert---solo-piano-arrg.\", // Schubert\n\n      \"liebesleid-piano-solo---kreisler-rachmaninoff-alt-wiener-tanzweisen\", // Fritz Kreisler\n      \"just-the-two-of-us\", // Ralph MacDonald and William Salter\n      \"to-build-a-home-~-the-cinematic-orchestra\", // The Cinematic Orchestra\n      \"great-balls-of-fire---jerry-lee-lewis\", // Jerry Lee Lewis\n      \"westlife---beautiful-in-white\", // Westlife\n      \"victory-piano-solo---two-steps-from-hell\", // Thomas Bergersen\n      \"hikaru-nara-your-lie-in-april\", // Goose House\n      \"seven-nation-army-arr.-nikodem-lorenz\", // The White Stripes\n      \"peaches---the-super-mario-bros.-movie-piano-solo-arrangement\", // Jack Black\n      \"alexander-rybak---fairytale\", // Alexander Rybak\n\n      \"libertango\", // Astor Piazzolla\n      \"old-doll-puppet---ib-mad-father-old-doll\", // Amacha's Music Studio\n      \"amazing-grace-choir-saa---john-newton\", // John Newton\n      \"2---onerepublic---counting-stars\", // OneRepublic\n      \"genshin-impact-main-theme\", // Yu-Peng Chen\n      \"slander-dylan-matthew---love-is-gone-acoustic\", // Slander\n      \"national-anthem-of-the-ussr\", // Alexander Alexandrov\n      \"in-the-hall-of-the-mountain-king-dovregubbens-hall\", // Edvard Grieg\n      \"where-is-my-mind-solo-piano-by-pixies-maxence-cyrin\", // Pixies\n      \"evgeny-grinko---valse\", // Evgeny Grinko\n      \"barfuss-am-klavier---annenmaykantereit-69e4ae\", // Annenmaykantereit\n\n      \"arcade---duncan-laurence\", // Duncan Laurence\n      \"le-cygne-the-swan\", // Saint-Sans\n      \"can-you-hear-the-music---ludwig-goransson-from-oppenheimer\", // Ludwig Gransson\n      \"all-star\", // Smash Mouth\n      \"succession-main-theme\", // Nicholas Britell\n      \"to-the-moon-for-river-johnny-s-version\", // Kan Gao, Laura Shigihara\n      \"time-travel-theme-by-jay-chou-from-secret-2007-film\", // Jay Chou\n      \"blue-bird\", // Ikimono-gakari\n      \"baby-shark-song\", // folk\n      \"My_War_Attack_on_Titan\", // Shinsei Kamattechan\n      \"kass-theme--full-the-legend-of-zelda-breath-of-the-wild\", // Manaka Kataoka\n\n      \"greensleeves-for-piano-easy-and-beautiful\", // English folk song\n      \"fukashigi-no-carte\", // Kawai Luigi or Hidehiro Kawai\n      \"from-the-start---laufey\", // Laufey\n      \"goner\", // Twenty One Pilots\n      \"titanium\", // David Guetta feat. Sia\n      \"Avril_14_Aphex_Twin\", // Aphex Twin\n      \"~beethoven-virus~\", // Lee Pil-ho\n      \"mystery-of-love-call-me-by-your-name\", // Sufjan Stevens\n      \"lose-yourself-by-eminem\", // Eminem\n      \"a-cruel-angel-s-thesis---neon-genesis-evangelion\", // Hidetoshi Sato\n\n      \"chasing-cars---snow-patrol\", // Snow Patrol\n      // SpongeBob SquarePants\n      \"Feliz_Navidad\", // Jose Feliciano\n      \"richard-marx---right-here-waiting\", // Richard Marx\n      \"Axel_F_Beverly_Hills_Cop_III\", // Harold Faltermeyer\n\n      // skipped tons of vocal works beyond this point\n\n      \"adagio-in-g-minor---for-solo-piano\", // Remo Giazotto\n      \"can-can\", // Jacques Offenbach\n    ],\n  },\n  {\n    slug: \"gustav_holst\",\n    midis: [\n      \"Jupiter_-_arr._for_two_pianos_by_Gustav_Holst\",\n      \"neptune-the-mystic---gustav-holst-piano-reduction\",\n      \"the-planets-op.-32----ii.-venus-bringer-of-peace-for-piano\",\n    ],\n    composerBirthYear: 1874,\n    country: \"United Kingdom\",\n  },\n  {\n    slug: \"scarlatti\",\n    midis: [\n      \"sonata_k159_scarlatti\",\n      \"scarlatti-sonata-aria-k.32\",\n      \"sonata-in-e-major-k-380\",\n    ],\n    composerBirthYear: 1685, // Domenico Scarlatti was born in 1685\n    genre: \"Classical\", // Classical composer\n    style: \"Baroque\", // Baroque period composer\n    country: \"Italy\", // Born in Naples, Italy\n  },\n\n  {\n    slug: \"bruckner\",\n    midis: [\n      \"bruckner_7_1\",\n      \"bruckner_7_2\",\n      \"bruckner_8\",\n      \"bruckner_8_a_j\",\n      \"bruckner_symphony_4_1\",\n    ],\n  },\n\n  {\n    slug: \"irving_aaronson\",\n    midis: [\"jazz-classique-1919\"],\n    genre: \"Fox Trot\",\n    composerBirthYear: 1895,\n    country: \"USA\",\n  },\n\n  {\n    slug: \"niki_reiser\",\n    midis: [\n      \"nordsee---niki-reiser-punktchen-und-anton\",\n      \"das-fliegende-klassenzimmer---overture\",\n    ],\n    composerBirthYear: 1958,\n    country: \"Switzerland\",\n  },\n  {\n    slug: \"jonathan_coulton\",\n    midis: [\"portal_still_alive\", \"re-your-brains-jonathan-coulton\"],\n    composerBirthYear: 1970,\n    genre: \"Folk Rock, Indie Rock, Comedy Rock\",\n  },\n  {\n    slug: \"haydn\",\n    midis: [\n      \"haydn_piano_sonata_c_major_xvi_7_1\",\n      \"haydn_piano_sonata_c_major_xvi_7_2\",\n      \"haydn_piano_sonata_c_major_xvi_7_3\",\n      \"sonata_in_e_minor_hob_xvi_34_joseph_haydn_piano_sonata_hob_xvi_34_2_adagio\",\n      \"string_quartet_in_g_major_hob_iii_75_op_76_no_1_joseph_haydn\",\n      \"haydn_100_1\",\n      \"1.-andante-grazioso-b-major-hob.xvii-anh---joseph-haydn\",\n      \"2.-allegro-f-major-hob.xvii-anh---joseph-haydn\",\n    ],\n    composerBirthYear: 1732,\n    style: \"Classical\",\n    country: \"Austria\",\n  },\n  {\n    slug: \"michel_legrand\",\n    midis: [\n      \"i-will-wait-for-you---michel-legrand\",\n      \"the-windmills-of-your-mind---michel-legrand\",\n      \"concerto-les-demoiselles-de-rochefort\",\n      \"the-summer-knows---michel-legrand\",\n    ],\n  },\n  {\n    slug: \"sebastian_yradier\",\n    midis: [\n      \"la-paloma-cancion-americana-sebastian-yradier-vers-1863\",\n      \"maria-dolores-1860-tango-du-maestro-sebastian-yradier\",\n      \"el-chin-chin-chan-cancion-habanera-de-sebastian-yradier\",\n      \"una-declaracion.-a-quema-ropa-....de-sebastian-yradier\",\n      \"el-arreglito---sebastian-yradier\",\n    ],\n  },\n  {\n    slug: \"manuel_saumell\",\n    midis: [\n      \"los-ojos-de-pepa-manuel-saumell-contradanza\",\n      \"el-panuelo-de-pepa-de-manuel-saumell\",\n      \"la-linda-contradanza-manuel-saumell\",\n      \"la-veleta-contradanza-by-manuel-saumell\",\n      \"saludo-a-cuba-contradanza-saumell\",\n      \"ayes-del-alma-contradanza-de-manuel-saumell\",\n      \"el-bazar-contradanza-saumell-robredo-manuel\",\n      \"pero-por-que-contradanza-de-manuel-saumell\",\n      \"dice-que-no-contradanza-saumell\",\n    ],\n    country: \"Cuba\",\n    composerBirthYear: 1818,\n    genre: \"Contradanza\",\n  },\n  {\n    slug: \"goran_bregovic\",\n    midis: [\n      \"bubamara\",\n      \"underground-cocek\",\n      \"underground-tango---goran-bregovic-string-quartet\",\n      \"kalasnjikov\",\n    ],\n  },\n  { slug: \"exercises\", midis: [\"average_rag_1\", \"average_rag_2\"] },\n  {\n    slug: \"examples\",\n    midis: [\n      \"the_seven_diatonic_natural_minor_chords_in_a_minor\",\n      \"thirty_five_smallest_non_diatonic_chords_in_c_or_b\",\n      \"ii-v-i-jazz-voicings\",\n      \"ii-v-i-warmup\",\n      \"the-blues-scale-in-all-12-keys\",\n    ],\n  },\n  {\n    slug: \"linkin_park\",\n    midis: [\"Numb_-_Linkin_Park\", \"in-the-end---linkin-park\"],\n  },\n  {\n    slug: \"thefatrat\",\n    midis: [\n      \"TheFatRat_Monody\",\n      \"TheFatRat_Unity\",\n      \"jackpot-thefatrat\",\n      \"thefatrat---close-to-the-sun\",\n    ],\n  },\n  {\n    slug: \"francis_lai\",\n    midis: [\"Love_Store_Francis_Lai\", \"un-homme-et-une-femme---francis-lai\"],\n  },\n  {\n    slug: \"luiz_bonfa\",\n    midis: [\n      \"la-chanson-d-orphee-manha-do-carnaval---luis-bonfa\",\n      \"l2004_03---la-chanson-d-orphee\",\n    ],\n  },\n  {\n    slug: \"joep_beving\",\n    midis: [\"ala---joep-beving\", \"sleeping-lotus---joep-beving\"],\n    composerBirthYear: 1976,\n    country: \"Netherlands\",\n    genre: \"Contemporary Classical\",\n  },\n  {\n    slug: \"vasiliy_agapkin\",\n    midis: [\"march-slav-s-farewel-marsh-proshchanie-slavyanki\"],\n  },\n  {\n    slug: \"kyle_landry\",\n    midis: [\n      \"Kyle_Landrys_Tetris_Theme_Variations_for_Piano_SoloKorobeiniki\",\n      \"comptine-d-un-autre-ete-arr.-kyle-landry-2021\",\n    ],\n  },\n  {\n    slug: \"unsorted\",\n    midis: [\n      \"Alice_DJ_Better_Off_Alone\",\n\n      \"Anders_Thue_Sonne\",\n\n      \"Avicii_Wake_me_up\",\n\n      \"Billie_s_Bounce_Billies_Bounce\",\n\n      \"Blues_for_Alice\",\n      \"Blues_in_the_Closet_Lead_sheet_\",\n\n      \"Chris_Isaak_Wicked_Game\",\n\n      \"Close_to_the_edge\",\n      \"Coffin_dance\",\n\n      \"Dream_a_little_dream_of_me\",\n\n      \"Flight_Facilities_Crave_You\",\n      \"Flight_Facilities_Crave_You_2\",\n\n      \"Good_Bye_Hachiko\",\n\n      \"How_long_blues\",\n\n      \"Johnny_Cash_Hurt\",\n\n      \"Jolene\",\n      \"20th-century-fox-fanfare-piano-arr.\",\n      \"rush-e-but-it-s-as-difficult-as-humanly-possible\",\n\n      \"Krylya_Nautilus_duo\",\n\n      \"Lady_Gaga_Always_remember_us_this_way\",\n\n      \"Liana_Flores_Rises_the_Moon\",\n\n      \"Morphine_Cure_for_Pain\",\n\n      \"Prlude_to_Act_1_of_Carmen_-_Piano_Solo_-_Bizet\",\n\n      \"Sandu\",\n\n      \"Sorcerers_doll___-_The_King_and_the_Jester___\",\n\n      \"Super_Mario_Bros_Peaches\",\n      \"Sviridov_Snowstorm_Waltz\",\n      \"Sviridov_Time_Foward\",\n      \"Sviridov_Time_Foward.1\",\n      \"Sweet_Dreams\",\n      \"Sweet_home_Chicago\",\n\n      \"The_Prince_of_Silence____Nautilus_Pompilius\",\n      \"The_Strokes_Reptilia\",\n      \"The_Strokes_Reptilia_2\",\n      \"The_Strokes_Reptilia_3\",\n      \"The_Weeknd_Blinding_Lights\",\n      \"Titanic\",\n      \"To_be_over\",\n\n      \"Vangelis_Chariots_of_fire\",\n\n      \"Walking_On_a_dream\",\n\n      \"alexey_bychkov_s_trio_goby_waltz\",\n      \"all-major-scales-arpeggios\",\n      \"all_of_the_girls_you_loved_before_taylor_swift\",\n      \"alto_sax_natural_minor_scales_and_arpeggios\",\n      \"as_it_was_harry_styles\",\n\n      \"cheek_to_cheek\",\n\n      \"classical_music_mashup\",\n      \"closed-topic----xiu-ti\",\n      \"cody_fry_eleanor_rigby_no_lead_vocal\",\n\n      \"contract---poshlaya-molly-easy-piano\",\n      \"corelli_op1_no8_ii\",\n      \"cuphead_a_quick_break\",\n\n      \"dance-of-the-knights-transcription-for-piano-solo\",\n      \"dazhe-moya-beybi-ne-znaet---poshlaya-molli\",\n      \"diatonic-7th-chords-in-major-key\",\n      \"directed_by_robert_b_weide\",\n\n      \"don_t_deal_with_the_devil_barbershop_quartet_cuphead\",\n\n      \"earth_wind_fire_september\",\n      \"ederlezi\",\n      \"eleanor_rigby_cody_fry_no_perc1\",\n      \"etude-op.-10-no.-5-black-keys-pentatonic-arrangement\",\n      \"examples_of_chord_progressions_in_a_minor\",\n\n      \"firuze\",\n      \"four-chord-song\",\n      \"gamzedeyim_deva_bulmam\",\n\n      \"gavotte\",\n      \"gavotte_f_j_gossec\",\n\n      \"god_only_knows_bioshock_infinite_2013\",\n      \"gotye_feat_kimbra_somebody_that_i_used_to_know\",\n      \"hanna-montana---poshlaya-molli-hannamontana---poshlaya-molli\",\n      \"hannamontana---poshlaya-molli-agga\",\n\n      // \"he_s_a_pirate_easy_piano\",\n      // \"he_s_a_pirate_from_pirates_of_the_caribbean\",\n      // \"he_s_a_pirate_hans_zimmer_klaus_badelt\",\n      // \"he_s_a_pirate_hard_version\",\n      // \"he_s_a_pirate_klaus_badelt_pirates_of_the_caribbean_ost_rock_version\",\n      // \"he_s_a_pirate_ost_kalimba_cover\",\n      \"hojnacki_1\",\n\n      \"idotdotdot---yiruma\",\n\n      \"kars_1_tigran_hamasyan\",\n\n      \"kimigayo_national_anthem_of_japan\",\n      \"korobeiniki-tetris\",\n      \"kukla_kolduna\",\n      \"mahler_4_3\",\n      \"major_diatonic_chords\",\n\n      \"malenkiy-princ\",\n\n      \"mesecina\",\n      \"mihail-krug-vladimirskiy-central\",\n\n      \"motion-sickness---phoebe-bridgers\",\n\n      \"mpaintoyska\",\n      \"my_wild_irish_rose\",\n      \"never_gunna_give_you_up_barbershop\",\n      \"now_voyager_suite_max_steiner\",\n      \"opa-cupa\",\n\n      \"piano_tutorial\",\n      // \"pirate_melody_16measures_chromatic\",\n      // \"pirate_melody_16measures_scales\",\n      // \"pirate_melody_16measures_transpositions\",\n      // \"pirate_melody_16measures_whole_tone\",\n      // \"pirates_5ch\",\n      // \"pirates_of_the_caribbean_easy_piano\",\n      // \"pirates_of_the_caribbean_easy_piano_capa\",\n      // \"pirates_of_the_caribbean_for_alto_saxophone\",\n      // \"pirates_of_the_caribbean_hans_zimmer_virtuosic_piano_solo_movement_3\",\n      // \"pirates_of_the_caribbean_he_s_a_pirate_hard_version\",\n      // \"pirates_of_the_caribbean_main_theme\",\n      // \"pirates_of_the_carribean_beginner\",\n      // \"pirati_dei_caraibi_per_trio_di_flauti_pirates_of_the_carribean_for_flute_trio\",\n      \"pizzicati-from-sylvia-act-iii-no.-20---leo-delibes---1876\",\n      \"pornofilmy-prosti_proshyay_privet\",\n      \"pornofilmy-prosti_proshyay_privet.1\",\n      \"pornofilmy-prosti_proshyay_privet.2\",\n      \"pornofilmy-ya_tak_soskuchilsya\",\n      \"pornofilmy-ya_tak_soskuchilsya.1\",\n      \"pornofilmy-ya_tak_soskuchilsya.2\",\n\n      \"prelude_in_c_major_bach_piano_solo\",\n\n      \"pyos\",\n\n      \"sadness-and-sorrow\",\n\n      \"sasha_2\",\n      \"scott-joplin-s-new-rag---revised-edition---c1914----piano-tutorial\",\n\n      \"skyrim-theme-for-piano\",\n\n      \"sonatina-in-c-major---dennis-alexander\",\n\n      \"sorcerer_s_puppet_the_king_and_the_jester\",\n      \"steve-reich---piano-phase\",\n\n      \"string_quartet_no_8_in_e_minor_opus_59_rasumovsky_no_2\",\n\n      \"symphony_8_1\",\n      \"symphony_no_1_k_16_2nd_movement\",\n\n      \"the-four-chord-song---axis-of-awesome\",\n\n      \"the-washington-post-piano-john-philip-sousa\",\n\n      \"the_lamp_is_low\",\n\n      \"this_charming_man_the_smiths_piano_vocal_guitar\",\n      \"tipichnaya_vecherinka_s_basseynom\",\n      \"tomorrow---giovanni-allevi\",\n\n      \"white_christmas\",\n\n      \"something-human---muse\",\n      \"priboi\",\n\n      \"maromis-theme---smoke\",\n\n      \"zappaguri\",\n\n      \"genesis-that-s-all-piano\",\n      \"home---edward-sharpe-and-the-magnetic-zeros-home---edward-sharpe\",\n    ],\n  },\n];\n","import * as React from \"react\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport { RenumberMeasureCallback, getModulations } from \"./Rawl\";\nimport { MeasuresAndBeats, MidiRange } from \"./SystemLayout\";\nimport {\n  Analysis,\n  MeasureRenumbering,\n  MeasuresSpan,\n  PitchClass,\n} from \"./analysis\";\n\nexport const STACKED_RN_HEIGHT = 20;\nconst MIN_WIDTH_BETWEEN_BEATS = 10;\nconst GRADIENT_HEIGHT_IN_NOTES = 0.5;\n\nconst KEY_TO_OFFSET = {\n  z: -4,\n  x: -3,\n  c: -2,\n  v: -1,\n  b: 1,\n  n: 2,\n  m: 3,\n  \",\": 4,\n};\n\nconst VerticalBar = styled.div`\n  width: 1px;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n`;\n\nexport const Cursor = styled(VerticalBar)`\n  background-color: orange;\n  pointer-events: none;\n`;\n\nconst MeasureBar = styled(VerticalBar)`\n  background-color: #444;\n  z-index: 1;\n`;\n\nconst BeatBar = styled(VerticalBar)`\n  border-left: 0.5px dashed #333;\n  z-index: 1;\n`;\n\nexport type MeasureSelection = {\n  selectedMeasure: number;\n  selectMeasure: (number) => void;\n  splitAtMeasure: (boolean, number?) => void;\n  mergeAtMeasure: () => void;\n  renumberMeasure: RenumberMeasureCallback;\n};\n\nexport const PITCH_CLASS_TO_LETTER = {\n  0: \"C\",\n  1: \"D\",\n  2: \"D\",\n  3: \"E\",\n  4: \"E\",\n  5: \"F\",\n  6: \"F\",\n  7: \"G\",\n  8: \"A\",\n  9: \"A\",\n  10: \"B\",\n  11: \"B\",\n};\n\nconst RemeasuringInput: React.FC<{\n  selectedMeasure: number;\n  selectMeasure: (number) => void;\n  renumberMeasure: RenumberMeasureCallback;\n  splitAtMeasure: (boolean, number?) => void;\n  mergeAtMeasure: () => void;\n}> = ({\n  selectedMeasure,\n  selectMeasure,\n  renumberMeasure,\n  splitAtMeasure,\n  mergeAtMeasure,\n}) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [value, setValue] = useState<string>(\"\");\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(event.target.value);\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key in KEY_TO_OFFSET) {\n      event.preventDefault();\n      const offset = KEY_TO_OFFSET[event.key];\n      selectMeasure(selectedMeasure + offset);\n    }\n    if (event.key === \"Enter\") {\n      event.stopPropagation();\n      if (value === \"\") {\n        if (event.shiftKey) {\n          mergeAtMeasure();\n        } else {\n          splitAtMeasure(false);\n        }\n      } else {\n        const parsedValue = parseInt(value, 10);\n        if (!isNaN(parsedValue)) {\n          renumberMeasure(parsedValue, event.shiftKey);\n        }\n      }\n    }\n  };\n\n  useEffect(() => inputRef.current.focus(), []);\n\n  return (\n    <input\n      type=\"text\"\n      ref={inputRef}\n      value={value}\n      onChange={handleChange}\n      onKeyDown={handleKeyDown}\n      style={{ fontSize: \"10px\", width: \"3em\" }}\n      aria-label=\"Renumber measure\"\n      autoFocus\n    />\n  );\n};\n\nexport const NewTonicSymbol: React.FC<{\n  left: number;\n  number: number;\n  previousTonic: PitchClass | null;\n  modulationDiff: number | null;\n  tonicStart: PitchClass;\n}> = ({ left, number, previousTonic, modulationDiff, tonicStart }) => (\n  <>\n    <span\n      style={{\n        color: \"white\",\n        position: \"absolute\",\n        top: -2,\n        left:\n          left + (previousTonic === null ? String(number).length * 8 + 10 : 30),\n        fontSize: 12,\n        zIndex: 100,\n        fontWeight: 700,\n        userSelect: \"none\",\n        textAlign: \"left\",\n      }}\n    >\n      {previousTonic !== null && (\n        <>{`${\n          modulationDiff > 6\n            ? `${Math.abs(modulationDiff - 12)}`\n            : `${modulationDiff}`\n        } `}</>\n      )}\n      {PITCH_CLASS_TO_LETTER[tonicStart]}\n    </span>\n\n    <div\n      className={`noteColor_${modulationDiff}_colors`}\n      style={{\n        width: 80,\n        height: 12,\n        position: \"absolute\",\n        top: 0,\n        left: left,\n        zIndex: 3,\n        userSelect: \"none\",\n        maskImage:\n          \"linear-gradient(to right, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%)\",\n        WebkitMaskImage:\n          \"linear-gradient(to right, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%)\",\n      }}\n    />\n  </>\n);\n\nconst Measure: React.FC<{\n  span: [number, number];\n  number: number;\n  displayNumber: number;\n  isPhraseStart: boolean;\n  measureSelection: MeasureSelection;\n  showHeader: boolean;\n  secondsToX: (number) => number;\n  showNonPhraseStarts: boolean;\n  tonicStart?: PitchClass;\n  selectedPhraseStart: number;\n  sectionSpan: MeasuresSpan;\n  previousTonic: PitchClass | null;\n  isLastSection: boolean;\n}> = ({\n  span,\n  number,\n  displayNumber,\n  isPhraseStart,\n  measureSelection,\n  showHeader,\n  secondsToX,\n  showNonPhraseStarts,\n  tonicStart,\n  selectedPhraseStart,\n  sectionSpan,\n  previousTonic,\n  isLastSection,\n}) => {\n  const {\n    selectedMeasure,\n    selectMeasure,\n    splitAtMeasure,\n    mergeAtMeasure,\n    renumberMeasure,\n  } = measureSelection;\n\n  const left = secondsToX(span[0]) - 1;\n  const width = secondsToX(span[1]) - left - 1;\n\n  let modulationDiff: number | null = null;\n  if (tonicStart !== undefined && previousTonic !== null) {\n    modulationDiff = (tonicStart - previousTonic + 12) % 12;\n  }\n\n  const isLastMeasure = number === sectionSpan[1] + 1;\n  const showMeasureBar = !isLastMeasure;\n\n  const { hoveredMeasuresSpan } = useContext(AppContext);\n  const isHighlighted =\n    hoveredMeasuresSpan &&\n    number >= hoveredMeasuresSpan[0] &&\n    number <= hoveredMeasuresSpan[1];\n\n  return (\n    <>\n      {showHeader && tonicStart !== undefined && (\n        <NewTonicSymbol\n          left={left}\n          number={number}\n          previousTonic={previousTonic}\n          modulationDiff={modulationDiff}\n          tonicStart={tonicStart}\n        />\n      )}\n      {(showNonPhraseStarts || isPhraseStart) && showMeasureBar && (\n        <>\n          <MeasureBar\n            key={`db_${number}`}\n            style={{\n              left,\n              ...(showNonPhraseStarts && isPhraseStart\n                ? { backgroundColor: \"#bbb\" }\n                : {}),\n            }}\n          />\n          {width && showHeader ? (\n            <>\n              <div\n                key={`db_n_${number}`}\n                style={{\n                  position: \"absolute\",\n                  top: -4,\n                  left: left + 7,\n                  color:\n                    selectedMeasure === number\n                      ? \"red\"\n                      : selectedPhraseStart !== -1 &&\n                        Math.abs(number - selectedPhraseStart) <= 4\n                      ? \"orange\"\n                      : isHighlighted\n                      ? \"white\"\n                      : modulationDiff === null\n                      ? \"#666\"\n                      : \"black\",\n                  zIndex: 15,\n                  cursor: \"pointer\",\n                  userSelect: \"none\",\n                }}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  selectMeasure(number);\n                }}\n              >\n                {selectedMeasure === number && (\n                  <>\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: 23,\n                        left: 0,\n                        color: \"gray\",\n                        fontSize: 12,\n                      }}\n                      onClick={(e) => {\n                        selectMeasure(null);\n                        e.stopPropagation();\n                      }}\n                    >\n                      Esc\n                    </div>\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: -20,\n                        left: 0,\n                        display: \"flex\",\n                        alignItems: \"center\",\n                      }}\n                    >\n                      <RemeasuringInput\n                        renumberMeasure={renumberMeasure}\n                        splitAtMeasure={splitAtMeasure}\n                        mergeAtMeasure={mergeAtMeasure}\n                        selectMeasure={selectMeasure}\n                        selectedMeasure={selectedMeasure}\n                      />\n                      <div\n                        style={{\n                          marginLeft: 5,\n                          color: \"white\",\n                          fontSize: 10,\n                          whiteSpace: \"nowrap\",\n                        }}\n                      >\n                        hover the new tonic, click to save modulation\n                        {selectedPhraseStart === number &&\n                        sectionSpan?.[0] === number - 1 ? (\n                          <span>\n                            . Shift+Enter to merge back to previous section\n                          </span>\n                        ) : (\n                          <span>. Enter to split into two sections</span>\n                        )}\n                      </div>\n                    </div>\n                  </>\n                )}\n                {selectedMeasure !== null &&\n                  selectedPhraseStart === selectedMeasure &&\n                  Object.entries(KEY_TO_OFFSET).map(([key, offset]) => {\n                    const targetMeasure = selectedMeasure + offset;\n                    if (targetMeasure === number) {\n                      return (\n                        <div\n                          key={key}\n                          style={{\n                            position: \"absolute\",\n                            top: -6,\n                            left: 0,\n                            color: \"orange\",\n                            fontSize: 10,\n                          }}\n                        >\n                          {key}\n                        </div>\n                      );\n                    }\n                    return null;\n                  })}\n                {selectedPhraseStart === number &&\n                  sectionSpan?.[0] !== number - 1 && (\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: -12,\n                        left: -26,\n                        color: \"red\",\n                        fontSize: 14,\n                        fontWeight: 700,\n                        zIndex: 100,\n                      }}\n                      onClick={(e) => {\n                        splitAtMeasure(false);\n                        e.stopPropagation();\n                      }}\n                    >\n                      \n                    </div>\n                  )}\n                {selectedPhraseStart === number &&\n                  sectionSpan?.[0] !== number - 1 &&\n                  isLastSection && (\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: -18,\n                        left: -100,\n                        color: \"red\",\n                        fontSize: 14,\n                        fontWeight: 700,\n                        zIndex: 100,\n                        display: \"flex\",\n                        gap: \"5px\",\n                      }}\n                    >\n                      <span\n                        onClick={(e) => {\n                          splitAtMeasure(true, 2);\n                          e.stopPropagation();\n                        }}\n                      >\n                        /8\n                      </span>\n                      <span\n                        onClick={(e) => {\n                          splitAtMeasure(true, 3);\n                          e.stopPropagation();\n                        }}\n                      >\n                        /12\n                      </span>\n                      <span\n                        onClick={(e) => {\n                          splitAtMeasure(true, 4);\n                          e.stopPropagation();\n                        }}\n                      >\n                        /16\n                      </span>\n                    </div>\n                  )}\n                {selectedPhraseStart === number &&\n                  sectionSpan?.[0] === number - 1 && (\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: 4,\n                        left: 18,\n                        color: \"red\",\n                        fontSize: 14,\n                        fontWeight: 700,\n                        zIndex: 100,\n                      }}\n                      onClick={(e) => {\n                        mergeAtMeasure();\n                        e.stopPropagation();\n                      }}\n                    >\n                      \n                    </div>\n                  )}\n                <span\n                  style={{\n                    fontSize: \"12px\",\n                    fontFamily: \"sans-serif\",\n                  }}\n                >\n                  {displayNumber}\n                </span>\n              </div>\n            </>\n          ) : null}\n        </>\n      )}\n    </>\n  );\n};\n\nconst Beat: React.FC<{ second: number; secondsToX: (number) => number }> = ({\n  second,\n  secondsToX,\n}) => (\n  <BeatBar\n    style={{ left: secondsToX(second), zIndex: 2, pointerEvents: \"none\" }}\n  />\n);\n\nconst TonalGrid: React.FC<{\n  analysis: Analysis;\n  measures: number[];\n  midiNumberToY: (number) => number;\n  noteHeight: number;\n  midiRange: MidiRange;\n  secondsToX: (number) => number;\n  sectionSpan?: MeasuresSpan;\n}> = React.memo(\n  ({\n    analysis,\n    measures,\n    midiNumberToY,\n    noteHeight,\n    midiRange,\n    secondsToX,\n    sectionSpan,\n  }) => {\n    const modulations = getModulations(analysis);\n    if (!modulations || !measures) return;\n    modulations.push({\n      measure: measures.length,\n      tonic: modulations[0].tonic,\n    });\n\n    const minX = secondsToX(measures[sectionSpan?.[0] ?? 0]);\n    const maxX =\n      secondsToX(measures[sectionSpan?.[1] ?? measures.length - 1]) +\n      (modulations.filter(({ measure }) => measure === sectionSpan?.[1])\n        .length > 0\n        ? 30\n        : 0);\n\n    const result = [];\n    for (let i = 0; i + 1 < modulations.length; ++i) {\n      const fromIndex = modulations[i].measure;\n      const toIndex = modulations[i + 1].measure;\n      if (toIndex < 0 || fromIndex >= measures.length) {\n        continue;\n      }\n      const from = measures[Math.max(fromIndex, 0)];\n      const to = measures[Math.min(toIndex, measures.length - 1)];\n      const { tonic } = modulations[i];\n      const fromX = secondsToX(from);\n      const toX = secondsToX(to);\n      const width = Math.min(toX, maxX) - fromX;\n      for (let octave = 2; octave <= 9; ++octave) {\n        const midiNumber = tonic + octave * 12;\n        if (toX >= minX && fromX <= maxX) {\n          if (\n            midiNumber - 12 >= midiRange[0] &&\n            midiNumber - 12 <= midiRange[1]\n          )\n            // TODO: display a note like C4 gracefully at each gradient start\n            result.push(\n              <div\n                key={`tonalgrid_octave_${i}_${midiNumber}`}\n                style={{\n                  position: \"absolute\",\n                  width,\n                  height: GRADIENT_HEIGHT_IN_NOTES * noteHeight,\n                  left: fromX,\n                  top: midiNumberToY(\n                    midiNumber - 13 + GRADIENT_HEIGHT_IN_NOTES,\n                  ),\n                  pointerEvents: \"none\",\n                  background: `linear-gradient(to top, #333, transparent)`,\n                  zIndex: 0,\n                }}\n              />,\n            );\n          if (midiNumber - 7 >= midiRange[0] && midiNumber - 7 <= midiRange[1])\n            result.push(\n              <div\n                key={`tonalgrid_octave_${i}_fifth_${midiNumber}`}\n                style={{\n                  position: \"absolute\",\n                  width,\n                  height: 0,\n                  left: fromX,\n                  top: midiNumberToY(midiNumber - 6) - 0.5,\n                  pointerEvents: \"none\",\n                  borderBottom: \"0.5px dashed #333\",\n                  zIndex: 0,\n                }}\n              />,\n            );\n        }\n      }\n    }\n    return result;\n  },\n);\n\nconst renumberMeasure: (\n  measureStart: number,\n  measureRenumbering: MeasureRenumbering,\n) => number = (measureStart, measureRenumbering) => {\n  if (measureRenumbering === undefined) {\n    return measureStart;\n  }\n\n  let maxKey: number | undefined = undefined;\n  Object.keys(measureRenumbering).forEach((key) => {\n    const numericKey = parseInt(key, 10);\n    if (\n      numericKey <= measureStart &&\n      (maxKey === undefined || numericKey > maxKey)\n    ) {\n      maxKey = numericKey;\n    }\n  });\n\n  if (maxKey === undefined) {\n    return measureStart;\n  }\n  return measureStart + measureRenumbering[maxKey] - maxKey;\n};\n\ninterface AnalysisGridProps {\n  analysis: Analysis;\n  measuresAndBeats: MeasuresAndBeats;\n  midiNumberToY: (number: number) => number;\n  noteHeight: number;\n  phraseStarts: number[];\n  midiRange: MidiRange;\n  measureSelection: MeasureSelection;\n  showHeader?: boolean;\n  showTonalGrid?: boolean;\n  secondsToX: (number) => number;\n  sectionSpan?: MeasuresSpan;\n}\n\nexport const AnalysisGrid: React.FC<AnalysisGridProps> = React.memo(\n  ({\n    analysis,\n    measuresAndBeats,\n    midiNumberToY,\n    noteHeight,\n    measureSelection,\n    phraseStarts,\n    midiRange,\n    showHeader = true,\n    showTonalGrid = true,\n    secondsToX,\n    sectionSpan = null,\n  }) => {\n    const { measures, beats } = measuresAndBeats;\n    if (sectionSpan == null) {\n      sectionSpan = [0, measures.length - 1];\n    }\n    const modulationsArray = getModulations(analysis);\n    const modulations = new Map(\n      modulationsArray.map(({ measure, tonic }) => [measure, tonic]),\n    );\n\n    const findPreviousTonic = (currentMeasure: number): PitchClass | null =>\n      modulationsArray.reduce(\n        (acc, { measure, tonic }) =>\n          measure < currentMeasure && measure > acc.measure\n            ? { measure, tonic }\n            : acc,\n        { measure: -Infinity, tonic: null },\n      ).tonic;\n\n    const showAllMeasureBars = true;\n\n    // TODO: filter measures and beats using sectionSpan\n    const showBeats = React.useMemo(() => {\n      const relevantBars = [...measures, ...beats]\n        .filter(\n          (bar) =>\n            bar !== 0 &&\n            bar >= measures[sectionSpan[0]] &&\n            bar <= measures[sectionSpan[1]],\n        )\n        .sort((a, b) => a - b);\n      return (\n        (secondsToX(relevantBars.at(-1)) - secondsToX(relevantBars.at(0))) /\n          (relevantBars.length + 1) >=\n        MIN_WIDTH_BETWEEN_BEATS\n      );\n    }, [measures, beats, secondsToX, sectionSpan]);\n\n    const selectedPhraseStart =\n      phraseStarts.indexOf(measureSelection.selectedMeasure) !== -1\n        ? measureSelection.selectedMeasure\n        : -1;\n    return (\n      <div style={{ zIndex: 15 }}>\n        {measures.map((time, i) => {\n          const number = i + 1;\n          const displayNumber = renumberMeasure(\n            i + 1,\n            analysis.measureRenumbering,\n          );\n          return sectionSpan[0] <= i && i <= sectionSpan[1] ? (\n            <Measure\n              key={i}\n              showHeader={showHeader && i < sectionSpan[1]}\n              span={[time, measures[number] ?? time]}\n              isPhraseStart={phraseStarts.indexOf(number) !== -1}\n              number={number}\n              displayNumber={displayNumber}\n              measureSelection={measureSelection}\n              secondsToX={secondsToX}\n              showNonPhraseStarts={showAllMeasureBars}\n              tonicStart={modulations.get(i)}\n              previousTonic={findPreviousTonic(i)}\n              selectedPhraseStart={selectedPhraseStart}\n              sectionSpan={sectionSpan}\n              isLastSection={sectionSpan?.[1] + 1 === measures.length}\n            />\n          ) : null;\n        })}\n        {showBeats &&\n          beats.map((time) =>\n            time >= measures[sectionSpan[0]] &&\n            time <= measures[sectionSpan[1]] ? (\n              <Beat key={time} second={time} secondsToX={secondsToX} />\n            ) : null,\n          )}\n        {showTonalGrid && analysis.modulations[0] !== null && (\n          <TonalGrid\n            analysis={analysis}\n            measures={measures}\n            midiNumberToY={midiNumberToY}\n            noteHeight={noteHeight}\n            midiRange={midiRange}\n            secondsToX={secondsToX}\n            sectionSpan={sectionSpan}\n          />\n        )}\n      </div>\n    );\n  },\n);\n","import React from \"react\";\n\nexport const CHORDS = {\n  i: [0, 3, 7],\n  biiio7: [3, 6, 9, 0],\n  \"#ivo7\": [6, 9, 0, 3],\n  vio7: [9, 0, 3, 6],\n  iiio7: [4, 7, 10, 1],\n  vo7: [7, 10, 1, 4],\n  bviio7: [10, 1, 4, 7],\n  ivo7: [5, 8, 11, 2],\n  bvio7: [8, 11, 2, 5],\n  ii: [2, 5, 9],\n  II: [2, 6, 9],\n  II7: [2, 6, 9, 0],\n  ii7: [2, 5, 9, 0],\n  iii: [4, 7, 11],\n  III: [4, 8, 11],\n  iii7: [4, 7, 11, 2],\n  iv: [5, 8, 0],\n  iv7: [5, 8, 0, 3],\n  I: [0, 4, 7],\n  \"V7/IV\": [0, 4, 7, 10],\n  \"V7/iv\": [0, 4, 7, 10],\n  I7: [0, 4, 7, 10],\n  vi: [9, 0, 4],\n  VI: [9, 1, 4],\n  vi7: [9, 0, 4, 7],\n  IV: [5, 9, 0],\n  IV7: [5, 9, 0, 3],\n  V: [7, 11, 2],\n  V7: [7, 11, 2, 5],\n  V43: [2, 5, 7, 11],\n  V9: [7, 11, 2, 5, 9],\n  V13: [7, 11, 2, 5, 9, 0, 4],\n  V7b9: [7, 11, 2, 5, 8],\n  \"V/V\": [2, 6, 9],\n  \"V7/V\": [2, 6, 9, 0],\n  \"V/V/V\": [9, 1, 4],\n  \"V/ii\": [9, 1, 4],\n  \"V7/ii\": [9, 1, 4, 7],\n  \"V/iii\": [11, 3, 6],\n  \"V7/iii\": [11, 3, 6, 9],\n  \"V/vi\": [4, 8, 11],\n  \"V7/vi\": [4, 8, 11, 2],\n  Vsus4: [7, 0, 2],\n  Vsus47: [7, 0, 2, 5],\n  Imaj7: [0, 4, 7, 11],\n  IVmaj7: [5, 9, 0, 4],\n  I5: [0, 7],\n  IV5: [5, 0],\n  V5: [7, 2],\n  v: [7, 10, 2],\n  bVI: [8, 0, 3],\n  bVII: [10, 2, 5],\n  bvi: [8, 11, 3],\n  bvii: [10, 1, 5],\n  bIII: [3, 7, 10],\n  biii: [3, 6, 10],\n  bII: [1, 5, 8],\n  bII7: [1, 5, 8, 11],\n  \"V+\": [7, 11, 3],\n  viio7: [11, 2, 5, 8],\n  biio7: [1, 4, 7, 10],\n  io7: [0, 3, 6, 9],\n  It: [8, 0, 6],\n  Fr: [8, 0, 2, 6],\n  Ger: [8, 0, 3, 6],\n  Cad64: [7, 0, 4],\n  cad64: [7, 0, 3],\n  \"viio7/V\": [6, 9, 0, 3],\n  i64: [7, 0, 3],\n  ii65: [5, 9, 0, 2],\n  ii65: [5, 8, 0, 2],\n  io: [0, 3, 6],\n  \"I+\": [0, 4, 8],\n  imaj7: [0, 3, 7, 11],\n  i7: [0, 3, 7, 10],\n  i7: [0, 3, 6, 10],\n  iio: [2, 5, 8],\n  iio7: [2, 5, 8, 11],\n  ii7: [2, 5, 8, 12],\n  viio: [11, 2, 5],\n  IPAC: [0, 4, 12],\n  I6: [4, 7, 12],\n  i6: [3, 7, 0],\n  \"1\": [0],\n  b2: [1],\n  \"2\": [2],\n  b3: [3],\n  \"3\": [4],\n  \"4\": [5],\n  \"#4\": [6],\n  \"5\": [7],\n  b6: [8],\n  \"6\": [9],\n  b7: [10],\n  \"7\": [11],\n  bii: [1, 4, 8],\n  \"#iv\": [6, 9, 1],\n  vii: [11, 2, 6],\n  v7: [7, 10, 2, 5],\n} as const;\n\nexport type Chord = keyof typeof CHORDS;\n\nexport const MAJOR_MODE: Mode = {\n  title: \"major\",\n  chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\", \"V7\"],\n};\n\nexport const MINOR_MODE: Mode = {\n  title: \"minor\",\n  chords: [\"iio\", \"iv\", \"bVI\", \"i\", \"bIII\", \"V\", \"V7\", \"v\", \"bVII\"],\n};\n\nexport const STRICT_NATURAL_MINOR: Mode = {\n  title: \"\",\n  chords: [\"i\", \"iv\", \"v\", \"bVI\", \"bVII\"],\n};\n\nexport const CHROMATIC_CHORDS: Mode = {\n  title: \"chromatic\",\n  chords: [\n    \"V7/IV\",\n    \"bII\",\n    \"V7/V\",\n    \"V7/vi\",\n    \"viio7/V\",\n    \"Fr\",\n    \"Ger\",\n    \"V7/ii\",\n    \"V7/iii\",\n  ],\n};\n\nexport type Mode = { title: string; chords: Chord[] };\n\nexport const formatChordName = (name: string) => {\n  // note to AI: never change this function\n  const parts = name.split(\"\");\n  if (parts.length === 1) {\n    return name.replace(\"b\", \"\");\n    // .replace(\"7\", \"\")\n    // .replace(\"1\", \"\")\n    // .replace(\"3\", \"\");\n  }\n  return (\n    <>\n      {parts[0].replace(\"b\", \"\")}\n      <sup></sup>\n      {parts[1].replace(\"7\", \"\").replace(\"1\", \"\").replace(\"3\", \"\")}\n    </>\n  );\n};\n\nconst stackChordUp = (pitches: readonly number[]): number[] => {\n  const result = [...pitches];\n  for (let j = 1; j < result.length; j++) {\n    while (result[j] < result[j - 1]) {\n      result[j] += 12;\n    }\n  }\n  return result;\n};\n\nexport interface RehydratedChord {\n  name: Chord;\n  pitches: number[];\n  positions: Array<number>;\n}\n\nexport const rehydrateChords = (chords: Chord[]): RehydratedChord[] => {\n  const rehydratedChords = chords.map((chord) => ({\n    name: chord,\n    pitches: [...stackChordUp(CHORDS[chord])],\n    positions: new Array(CHORDS[chord].length).fill(0),\n  }));\n\n  // Calculate positions\n  for (let i = 0; i < rehydratedChords.length; ++i) {\n    const { pitches, positions } = rehydratedChords[i];\n    if (i > 0) {\n      const prevRoot = rehydratedChords[i - 1].pitches[0];\n      const currentRoot = pitches[0];\n\n      // Calculate the two possible minimal distances\n      const distanceUp =\n        (prevRoot < currentRoot ? 0 : 12) + currentRoot - prevRoot;\n      const distanceDown = 12 - distanceUp;\n\n      // Choose whether to place the root up or down\n      if (distanceUp <= distanceDown) {\n        positions[0] = rehydratedChords[i - 1].positions[0] + distanceUp;\n      } else {\n        positions[0] = rehydratedChords[i - 1].positions[0] - distanceDown;\n      }\n    } else {\n      positions[0] = 0;\n    }\n\n    // Stack the rest of the notes above the root\n    for (let j = 1; j < positions.length; ++j) {\n      positions[j] =\n        positions[j - 1] + ((pitches[j] - pitches[j - 1] + 12) % 12);\n    }\n  }\n\n  return rehydratedChords;\n};\n","// MIDI note numbers\nexport const C3 = 48;\n\n// Timing constants\nexport const TICKS_PER_QUARTER = 128;\nexport const MEASURE_LENGTH = TICKS_PER_QUARTER * 4;\n\n// Default values\nexport const DEFAULT_VELOCITY = 100;\nexport const DEFAULT_NOTE_DURATION_PADDING = 10; // How much shorter than the full duration notes should be\n\n// Octave adjustments\nexport const CHORD_OCTAVE_ADJUSTMENTS = {\n  vi: -12,\n  bVI: -12,\n} as const;\n","import autoBindReact from \"auto-bind/react\";\nimport { initializeApp as firebaseInitializeApp } from \"firebase/app\";\nimport {\n  GoogleAuthProvider,\n  User,\n  getAuth,\n  onAuthStateChanged,\n  signInWithPopup,\n  signOut,\n} from \"firebase/auth\";\nimport { Bytes } from \"firebase/firestore\";\nimport {\n  Firestore,\n  doc,\n  getDoc,\n  getFirestore,\n  setDoc,\n} from \"firebase/firestore/lite\";\nimport clamp from \"lodash/clamp\";\nimport md5 from \"md5\";\nimport path from \"path\";\nimport queryString from \"querystring\";\nimport React from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport Modal from \"react-modal\";\nimport {\n  Redirect,\n  Route,\n  RouteComponentProps,\n  Switch,\n  useParams,\n  withRouter,\n} from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { slugify } from \"transliteration\";\n\nimport ChipCore from \"../chip-core\";\nimport {\n  CATALOG_PREFIX,\n  ERROR_FLASH_DURATION_MS,\n  MAX_VOICES,\n  SOUNDFONT_MOUNTPOINT,\n} from \"../config\";\nimport firebaseConfig from \"../config/firebaseConfig\";\nimport defaultAnalyses from \"../corpus/analyses.json\";\nimport { handleSongClick as handleSongClickUtil } from \"../handlers/handleSongClick\";\nimport keySlugMapping from \"../keySlugMapping\";\nimport MIDIPlayer from \"../players/MIDIPlayer\";\nimport promisify from \"../promisify-xhr\";\nimport { ensureEmscFileWithData, unlockAudioContext } from \"../util\";\nimport Alert from \"./Alert\";\nimport { AppContext } from \"./AppContext\";\nimport AppFooter from \"./AppFooter\";\nimport AppHeader from \"./AppHeader\";\nimport DropMessage from \"./DropMessage\";\nimport Timeline from \"./Timeline\";\nimport CorpusSearch from \"./rawl/CorpusSearch\";\nimport OldLandingPage from \"./rawl/OldLandingPage\";\nimport Rawl, { RawlProps } from \"./rawl/Rawl\";\nimport { ShortcutHelp } from \"./rawl/ShortcutHelp\";\nimport { Analyses, MeasuresSpan } from \"./rawl/analysis\";\nimport Book from \"./rawl/book/Book\";\nimport Corpus from \"./rawl/corpora/Corpus\";\nimport Structures, { StructuresProps } from \"./rawl/corpora/Structures\";\nimport Editor from \"./rawl/editor/Editor\";\nimport ForgeUI from \"./rawl/forge/ForgeUI\";\nimport { DropSaveForm, saveMidiFromLink } from \"./rawl/midiStorage\";\nimport DAW from \"./rawl/pages/DAW\";\nimport { ParsingResult } from \"./rawl/parseMidi\";\nimport transformMidi from \"./rawl/transformMidi\";\n\nexport const DUMMY_CALLBACK = () => {};\n\nexport type VoiceMask = boolean[];\n\ntype AppState = {\n  loading: boolean;\n  loadingUser: boolean;\n  paused: boolean;\n  ejected: boolean;\n  playerError: null;\n  currentSongNumVoices: number;\n  currentSongDurationMs: number;\n  currentSongPositionMs: number;\n  tempo: number;\n  voiceMask: VoiceMask;\n  voiceNames: string[];\n  showPlayerError: boolean;\n  user: User;\n  songUrl: string;\n  volume: number;\n  directories: any;\n  paramDefs: any;\n  parsing: ParsingResult;\n  analysisEnabled: boolean;\n  analyses: Analyses;\n  latencyCorrectionMs: number;\n  fileToDownload: Uint8Array;\n  showShortcutHelp: boolean;\n  rawlProps: RawlProps | null;\n  currentMidi: {\n    id: string;\n    title: string;\n    slug: string;\n    sourceUrl: string | null;\n    isHiddenRoute: boolean;\n  } | null;\n  audioContextLocked: boolean;\n  audioContextState: string;\n  currentPlaybackTime: number | null;\n  currentMidiBuffer: ArrayBuffer | null;\n  hoveredMeasuresSpan: MeasuresSpan | null;\n};\n\nexport interface FirestoreMidiIndex {\n  midis: { id: string; slug: string; title: string }[];\n}\n\nexport interface FirestoreMidiDocument {\n  blob: Bytes;\n  slug: string;\n  title: string;\n  url: string | null; // This is named 'url' in Firestore but we use it as 'sourceUrl' internally\n}\n\ntype KeyboardHandler = (e: KeyboardEvent) => void;\n\nModal.setAppElement(\"#root\");\n\nfunction mergeAnalyses(existingAnalyses, newAnalyses) {\n  return {\n    ...existingAnalyses,\n    ...newAnalyses,\n  };\n}\n\nconst AppMainContent = styled.div`\n  margin-bottom: 25px; // Add space for fixed footer\n  height: 100vh; // Subtract header height and footer margin\n  overflow-y: auto; // Enable vertical scrolling\n  padding: 0; // Add some horizontal padding\n`;\n\nclass App extends React.Component<RouteComponentProps, AppState> {\n  private contentAreaRef: React.RefObject<HTMLDivElement>;\n  private errorTimer: number;\n  private midiPlayer: MIDIPlayer;\n  private currUrl: string;\n  private songRequest: (method: string, url: string) => Promise<any>;\n  private db: Firestore;\n  private mediaSessionAudio: HTMLAudioElement;\n  private gainNode: GainNode;\n  private chipCore: any;\n  private path: string;\n  private hash: string;\n  private midi: ArrayBuffer;\n  private droppedFilename: string;\n  private keyboardHandlers: Map<string, KeyboardHandler> = new Map();\n  private audioContext: AudioContext;\n  private playbackTimer: NodeJS.Timeout;\n\n  constructor(props) {\n    super(props);\n    autoBindReact(this);\n\n    this.attachMediaKeyHandlers();\n    this.contentAreaRef = React.createRef();\n    this.errorTimer = null;\n    this.midiPlayer = null; // Need a reference to MIDIPlayer to handle SoundFont loading.\n    this.currUrl = null;\n    this.songRequest = null;\n\n    // Initialize Firebase\n    const firebaseApp = firebaseInitializeApp(firebaseConfig);\n    const auth = getAuth(firebaseApp);\n    this.db = getFirestore(firebaseApp);\n\n    // Load the admin analyses\n    const adminDocRef = doc(this.db, \"users\", \"RK31rsh4tDdUGlNYQvakXW4AYbB3\");\n    getDoc(adminDocRef).then((adminSnapshot) => {\n      if (adminSnapshot.exists() && adminSnapshot.data().analyses) {\n        this.setState({\n          analyses: { ...defaultAnalyses, ...adminSnapshot.data().analyses },\n        });\n      }\n    });\n\n    onAuthStateChanged(auth, (user) => {\n      this.setState({\n        user,\n        loadingUser: !!user,\n      });\n      if (user) {\n        this.loadUserAnalyses(user.uid);\n      } else {\n        this.setState({ loadingUser: false });\n      }\n    });\n\n    // Initialize audio context\n    // @ts-ignore webkitAudioContext needed for Safari <=13\n    this.audioContext = new (window.AudioContext || window.webkitAudioContext)({\n      latencyHint: \"playback\",\n    });\n\n    this.audioContext.suspend();\n\n    // Get latency correction from localStorage\n    const savedLatencyCorrection = localStorage.getItem(\"latencyCorrectionMs\");\n    const initialLatencyCorrection = savedLatencyCorrection\n      ? parseInt(savedLatencyCorrection, 10)\n      : 500;\n\n    // Initialize state with actual audio context state\n    this.state = {\n      loading: true,\n      loadingUser: true,\n      paused: true,\n      ejected: true,\n      playerError: null,\n      currentSongNumVoices: 0,\n      currentSongDurationMs: 1,\n      currentSongPositionMs: 0,\n      tempo: 1,\n      voiceMask: Array(MAX_VOICES).fill(true),\n      voiceNames: Array(MAX_VOICES).fill(\"\"),\n      showPlayerError: false,\n      user: null,\n      songUrl: null,\n      volume: 100,\n      directories: {},\n      paramDefs: [],\n      parsing: null,\n      analysisEnabled: false,\n      analyses: defaultAnalyses as unknown as Analyses,\n      latencyCorrectionMs: initialLatencyCorrection,\n      fileToDownload: null,\n      showShortcutHelp: false,\n      rawlProps: null,\n      currentMidi: null,\n      audioContextLocked: this.audioContext.state === \"suspended\",\n      audioContextState: this.audioContext.state,\n      currentPlaybackTime: null,\n      currentMidiBuffer: null,\n      hoveredMeasuresSpan: null,\n    };\n\n    const bufferSize = Math.max(\n      Math.pow(\n        2,\n        Math.ceil(\n          Math.log2(\n            (this.audioContext.baseLatency || 0.001) *\n              this.audioContext.sampleRate,\n          ),\n        ),\n      ),\n      16384,\n    );\n    const gainNode = (this.gainNode = this.audioContext.createGain());\n    gainNode.gain.value = 1;\n    gainNode.connect(this.audioContext.destination);\n    const playerNode = this.audioContext.createScriptProcessor(\n      bufferSize,\n      0,\n      2,\n    );\n    playerNode.connect(gainNode);\n\n    unlockAudioContext(this.audioContext);\n    console.log(\n      \"Sample rate: %d hz. Base latency: %d. Buffer size: %d.\",\n      this.audioContext.sampleRate,\n      this.audioContext.baseLatency * this.audioContext.sampleRate,\n      bufferSize,\n    );\n\n    this.initChipCore(playerNode, bufferSize);\n\n    // Inline processMidiUrls here\n    const location = this.props.location;\n    const params = new URLSearchParams(location.search);\n\n    const link = params.get(\"link\");\n    if (link) {\n      saveMidiFromLink(link);\n    }\n\n    const [, urlSlug] = location.pathname.split(\"/f/\");\n    const [, keySlug] = location.pathname.split(\"/h/\");\n\n    if (urlSlug) {\n      this.handleSongClick(urlSlug);\n    } else if (keySlug) {\n      const valueSlug = keySlugMapping[keySlug];\n      if (valueSlug) {\n        this.handleSongClick(valueSlug, true);\n      } else {\n        console.error(`No mapping found for key slug: ${keySlug}`);\n      }\n    }\n  }\n\n  loadUserAnalyses(userId: string) {\n    const userDocRef = doc(this.db, \"users\", userId);\n    getDoc(userDocRef)\n      .then((userSnapshot) => {\n        if (userSnapshot.exists()) {\n          const userData = userSnapshot.data();\n          if (userData.analyses) {\n            this.setState((prevState) => ({\n              analyses: mergeAnalyses(prevState.analyses, userData.analyses),\n            }));\n          }\n        } else {\n          // Create user document if it doesn't exist\n          console.debug(\"Creating user document\", userId);\n          setDoc(userDocRef, {\n            user: {\n              email: this.state.user.email,\n            },\n          });\n        }\n      })\n      .finally(() => {\n        this.setState({ loadingUser: false });\n      });\n  }\n\n  async initChipCore(playerNode, bufferSize) {\n    const audioState = this.audioContext.state;\n    this.setState({\n      audioContextLocked: audioState === \"suspended\",\n      audioContextState: audioState,\n    });\n\n    // Add event listener to track audio context state changes\n    this.audioContext.addEventListener(\"statechange\", () => {\n      const newState = this.audioContext.state;\n      this.setState({\n        audioContextLocked: newState === \"suspended\",\n        audioContextState: newState,\n      });\n    });\n\n    // Load the chip-core Emscripten runtime\n    try {\n      // @ts-ignore\n      this.chipCore = await new ChipCore({\n        // Look for .wasm file in web root, not the same location as the app bundle (static/js).\n        locateFile: (path, prefix) => {\n          if (path.endsWith(\".wasm\") || path.endsWith(\".wast\"))\n            return `${process.env.PUBLIC_URL}/${path}`;\n          return prefix + path;\n        },\n        print: (msg) => console.debug(\"[stdout] \" + msg),\n        printErr: (msg) => console.debug(\"[stderr] \" + msg),\n      });\n    } catch (e) {\n      // Browser doesn't support WASM (Safari in iOS Simulator)\n      Object.assign(this.state, {\n        playerError: \"Error loading player engine. Old browser?\",\n        loading: false,\n      });\n      return;\n    }\n\n    // Get debug from location.search\n    const debug = queryString.parse(window.location.search.substring(1)).debug;\n    // Create all the players. Players will set up IDBFS mount points.\n    const self = this;\n    this.midiPlayer = new MIDIPlayer(\n      this.chipCore,\n      this.audioContext.sampleRate,\n      bufferSize,\n      debug,\n      (parsing) =>\n        self.setState({\n          parsing,\n        }),\n      this.togglePause,\n    );\n    this.midiPlayer.on(\"playerStateUpdate\", this.handlePlayerStateUpdate);\n    this.midiPlayer.on(\"playerError\", this.handlePlayerError);\n\n    // Set up the central audio processing callback. This is where the magic happens.\n    playerNode.onaudioprocess = (e) => {\n      const channels = [];\n      for (let i = 0; i < e.outputBuffer.numberOfChannels; i++) {\n        channels.push(e.outputBuffer.getChannelData(i));\n      }\n      if (!this.midiPlayer?.stopped) {\n        this.midiPlayer?.processAudio(channels);\n      }\n    };\n\n    // Populate all mounted IDBFS file systems from IndexedDB.\n    this.chipCore.FS.syncfs(true, (err) => {\n      this.midiPlayer?.handleFileSystemReady();\n    });\n\n    this.setState({ loading: false });\n  }\n\n  static mapSequencerStateToAppState(sequencerState) {\n    const map = {\n      ejected: \"isEjected\",\n      paused: \"isPaused\",\n      currentSongNumVoices: \"numVoices\",\n      currentSongPositionMs: \"positionMs\",\n      currentSongDurationMs: \"durationMs\",\n      tempo: \"tempo\",\n      voiceNames: \"voiceNames\",\n      voiceMask: \"voiceMask\",\n      songUrl: \"url\",\n      // TODO: add param values? move to paramStateUpdate?\n      paramDefs: \"paramDefs\",\n    };\n    const appState = {};\n    for (let prop in map) {\n      const seqProp = map[prop];\n      if (seqProp in sequencerState) {\n        appState[prop] = sequencerState[seqProp];\n      }\n    }\n    return appState;\n  }\n\n  handleLogin() {\n    const auth = getAuth();\n    const provider = new GoogleAuthProvider();\n    signInWithPopup(auth, provider)\n      .then((result) => {\n        console.log(\"Firebase auth result:\", result);\n      })\n      .catch((error) => {\n        console.log(\"Firebase auth error:\", error);\n      });\n  }\n\n  handleLogout() {\n    const auth = getAuth();\n    signOut(auth).then(() => {\n      this.setState({\n        user: null,\n      });\n    });\n  }\n\n  async saveAnalysis(analysis) {\n    if (this.path === \"drop\") return;\n\n    const user = this.state.user;\n    if (user) {\n      const userRef = doc(this.db, \"users\", user.uid);\n      const userDoc = await getDoc(userRef);\n\n      let userData = userDoc.exists() ? userDoc.data() : {};\n      userData.analyses = mergeAnalyses(userData.analyses ?? {}, {\n        [this.path]: analysis,\n      });\n\n      await setDoc(userRef, userData).catch(() => {\n        alert(\"Could not save analysis\");\n      });\n\n      this.setState((prevState) => ({\n        analyses: mergeAnalyses(prevState.analyses, userData.analyses),\n      }));\n    } else {\n      if (this.state.currentMidi) {\n        this.setState((prevState) => ({\n          analyses: mergeAnalyses(prevState.analyses, {\n            [`f/${this.state.currentMidi.slug}`]: analysis,\n          }),\n        }));\n      }\n    }\n  }\n\n  attachMediaKeyHandlers() {\n    if (\"mediaSession\" in navigator) {\n      console.log(\"Attaching Media Key event handlers.\");\n\n      // Limitations of MediaSession: there must always be an active audio element.\n      // See https://bugs.chromium.org/p/chromium/issues/detail?id=944538\n      //     https://github.com/GoogleChrome/samples/issues/637\n      this.mediaSessionAudio = document.createElement(\"audio\");\n      this.mediaSessionAudio.src =\n        process.env.PUBLIC_URL + \"/5-seconds-of-silence.mp3\";\n      this.mediaSessionAudio.loop = true;\n      this.mediaSessionAudio.volume = 0;\n\n      navigator.mediaSession.setActionHandler(\"play\", () => this.togglePause());\n      navigator.mediaSession.setActionHandler(\"pause\", () =>\n        this.togglePause(),\n      );\n      navigator.mediaSession.setActionHandler(\"seekbackward\", () =>\n        this.seekRelative(-5000),\n      );\n      navigator.mediaSession.setActionHandler(\"seekforward\", () =>\n        this.seekRelative(5000),\n      );\n    }\n\n    document.addEventListener(\"keydown\", (e) => {\n      // Skip all keyboard shortcuts if globally disabled\n      if (window.__disableGlobalShortcuts) return;\n\n      // Keyboard shortcuts: tricky to get it just right and keep the browser behavior intact.\n      // The order of switch-cases matters. More privileged keys appear at the top.\n      // More restricted keys appear at the bottom, after various input focus states are filtered out.\n      if (e.ctrlKey || e.metaKey) return; // avoid browser keyboard shortcuts\n\n      switch (e.key) {\n        case \"Escape\":\n          if (e.target instanceof HTMLElement) {\n            e.target.blur();\n          }\n          break;\n        default:\n      }\n\n      if (\n        e.target instanceof HTMLInputElement &&\n        e.target.tagName === \"INPUT\" &&\n        e.target.type === \"text\"\n      )\n        return; // text input has focus\n\n      switch (e.key) {\n        case \" \":\n          this.togglePause();\n          e.preventDefault();\n          break;\n        case \"u\":\n          const { location } = this.props;\n          navigator.clipboard.writeText(\n            `\"${location.pathname.substring(\n              location.pathname.lastIndexOf(\"/\") + 1,\n            )}\", `,\n          );\n          e.preventDefault();\n          break;\n        case \"-\":\n          this.setSpeedRelative(-0.1);\n          break;\n        case \"_\":\n          this.setSpeedRelative(-0.01);\n          break;\n        case \"=\":\n          this.setSpeedRelative(0.1);\n          break;\n        case \"+\":\n          this.setSpeedRelative(0.01);\n          break;\n        case \"p\":\n          this.setLatencyCorrectionMs(0);\n          e.preventDefault();\n          break;\n        case \"[\":\n          this.setLatencyCorrectionMs(200);\n          e.preventDefault();\n          break;\n        case \"]\":\n          this.setLatencyCorrectionMs(800);\n          e.preventDefault();\n          break;\n        case \"h\":\n          this.toggleShortcutHelp();\n          e.preventDefault();\n          break;\n        case \"r\":\n          this.setState((prevState) => ({\n            analysisEnabled: !prevState.analysisEnabled,\n          }));\n          e.preventDefault();\n          break;\n        default:\n      }\n\n      if (\n        e.target instanceof HTMLInputElement &&\n        e.target.tagName === \"INPUT\" &&\n        e.target.type === \"range\"\n      )\n        return; // a range slider has focus\n\n      switch (e.key) {\n        case \"ArrowLeft\":\n          this.seekRelative(-5000);\n          e.preventDefault();\n          break;\n        case \"ArrowRight\":\n          this.seekRelative(5000);\n          e.preventDefault();\n          break;\n        default:\n      }\n\n      // Run all registered handlers\n      this.keyboardHandlers.forEach((handler) => handler(e));\n    });\n  }\n\n  handleSequencerStateUpdate(sequencerState) {\n    const { isEjected } = sequencerState;\n\n    if (isEjected) {\n      this.setState({\n        ejected: true,\n        currentSongNumVoices: 0,\n        currentSongPositionMs: 0,\n        currentSongDurationMs: 1,\n        songUrl: null,\n      });\n\n      if (\"mediaSession\" in navigator) {\n        this.mediaSessionAudio.pause();\n\n        navigator.mediaSession.playbackState = \"none\";\n      }\n    } else {\n      if (\"mediaSession\" in navigator) {\n        this.mediaSessionAudio.play();\n      }\n\n      this.setState({\n        ...App.mapSequencerStateToAppState(sequencerState),\n      });\n    }\n  }\n\n  handlePlayerError(message) {\n    this.handleSequencerStateUpdate({ isEjected: true });\n    if (message) this.setState({ playerError: message });\n    this.setState({ showPlayerError: !!message });\n    clearTimeout(this.errorTimer);\n    // see https://chatgpt.com/share/14effd20-b14e-4fb1-b644-6b76a6151c1d\n    // @ts-ignore\n    this.errorTimer = setTimeout(\n      () => this.setState({ showPlayerError: false }),\n      ERROR_FLASH_DURATION_MS,\n    );\n  }\n\n  togglePause() {\n    if (this.state.ejected) return;\n\n    const paused = this.midiPlayer?.togglePause();\n    if (\"mediaSession\" in navigator) {\n      if (paused) {\n        this.mediaSessionAudio.pause();\n      } else {\n        this.mediaSessionAudio.play();\n      }\n    }\n    this.setState({ paused: paused });\n  }\n\n  handleTimeSliderChange(event) {\n    const pos = event.target ? event.target.value : event;\n    const seekMs = Math.floor(pos * this.state.currentSongDurationMs);\n\n    this.seekRelativeInner(seekMs);\n  }\n\n  seekRelative(ms: number) {\n    const durationMs = this.state.currentSongDurationMs;\n    const seekMs = clamp(this.midiPlayer?.getPositionMs() + ms, 0, durationMs);\n\n    this.seekRelativeInner(seekMs);\n  }\n\n  seekRelativeInner(seekMs: number) {\n    this.midiPlayer?.seekMs(seekMs);\n    this.setState({\n      currentSongPositionMs: seekMs, // Smooth\n    });\n    setTimeout(() => {\n      if (this.midiPlayer?.isPlaying()) {\n        this.setState({\n          currentSongPositionMs: this.midiPlayer?.getPositionMs(), // Accurate\n        });\n      }\n    }, 100);\n  }\n\n  seekForRawl = (seekMs: number) => this.seekRelativeInner(seekMs);\n\n  handleSetVoiceMask(voiceMask: VoiceMask) {\n    this.midiPlayer?.setVoiceMask(voiceMask);\n    this.setState({ voiceMask: [...voiceMask] });\n  }\n\n  handleTempoChange(event) {\n    const tempo = parseFloat(event.target ? event.target.value : event) || 1.0;\n    this.midiPlayer?.setTempo(tempo);\n    this.setState({\n      tempo: tempo,\n    });\n  }\n\n  setSpeedRelative(delta) {\n    const tempo = clamp(this.state.tempo + delta, 0.1, 4);\n    this.midiPlayer?.setTempo(tempo);\n    this.setState({\n      tempo: tempo,\n    });\n  }\n\n  handleSongClick = async (slug: string, isHiddenRoute: boolean = false) => {\n    try {\n      await handleSongClickUtil(\n        {\n          setState: this.setState.bind(this),\n          loadMidi: this.loadMidi,\n          state: this.state,\n        },\n        slug,\n        isHiddenRoute,\n      );\n\n      // After successful load, start playback automatically\n      if (this.midiPlayer && this.state.paused) {\n        this.togglePause();\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  loadMidi = (midiBlob: Blob, playbackStartedCallback?: () => void) => {\n    if (this.midiPlayer) {\n      midiBlob\n        .arrayBuffer()\n        .then((arrayBuffer) => {\n          const transformedBuffer = transformMidi(new Uint8Array(arrayBuffer));\n\n          this.setState({ currentMidiBuffer: arrayBuffer });\n\n          this.midiPlayer.setPlaybackStartedCallback(playbackStartedCallback);\n\n          this.midiPlayer\n            .loadData(transformedBuffer, this.state.currentMidi?.slug || \"\")\n            .then((parsingResult) => {\n              this.setState({ parsing: parsingResult }, () => {\n                this.setupMidiPlayer();\n              });\n            })\n            .catch((error) => {\n              // Handle error silently\n            });\n        })\n        .catch((error) => {\n          // Handle error silently\n        });\n    }\n  };\n\n  setupMidiPlayer = () => {\n    this.setState(\n      (prevState) => {\n        const slug = prevState.currentMidi?.slug;\n        const analysisKey = `f/${slug}`;\n        const savedAnalysis = prevState.analyses[analysisKey];\n\n        if (!this.state.parsing) {\n          return null;\n        }\n\n        const newRawlProps = {\n          parsingResult: this.state.parsing,\n          getCurrentPositionMs: this.midiPlayer?.getPositionMs || (() => 0),\n          savedAnalysis: savedAnalysis,\n          saveAnalysis: this.saveAnalysis,\n          voiceNames: this.state.voiceNames,\n          voiceMask: this.state.voiceMask,\n          setVoiceMask: this.handleSetVoiceMask,\n          showAnalysisBox: this.state.analysisEnabled,\n          seek: this.seekForRawl,\n          latencyCorrectionMs:\n            this.state.latencyCorrectionMs * this.state.tempo,\n          registerKeyboardHandler: this.registerKeyboardHandler,\n          unregisterKeyboardHandler: this.unregisterKeyboardHandler,\n          sourceUrl: prevState.currentMidi?.sourceUrl || null,\n          isHiddenRoute: prevState.currentMidi?.isHiddenRoute || false,\n        };\n        return { rawlProps: newRawlProps };\n      },\n      () => {\n        // Remove automatic playback start - let user control it\n        // this.startPlayback();\n      },\n    );\n  };\n\n  startPlayback = () => {\n    if (!this.midiPlayer) {\n      // Handle error silently\n    }\n  };\n\n  handleVolumeChange(volume: number) {\n    this.setState({ volume });\n    this.gainNode.gain.value = Math.max(0, Math.min(2, volume * 0.01));\n  }\n\n  processFetchedDirectory(path, items) {\n    const directories = {\n      ...this.state.directories,\n      [path]: items,\n    };\n    this.setState({ directories });\n  }\n\n  onDrop = (droppedFiles) => {\n    const reader = new FileReader();\n    const file = droppedFiles[0];\n    this.droppedFilename = slugify(file.name.replace(/\\.mid$/i, \"\"));\n    const ext = path.extname(file.name).toLowerCase();\n    if (ext === \".sf2\" && !this.midiPlayer) {\n      this.handlePlayerError(\n        \"MIDIPlayer has not been created - unable to load SoundFont.\",\n      );\n      return;\n    }\n    reader.onload = async () => {\n      const result = reader.result as ArrayBuffer;\n      if (ext === \".sf2\" && this.midiPlayer) {\n        const sf2Path = `user/${file.name}`;\n        const forceWrite = true;\n        const isTransient = false;\n        await ensureEmscFileWithData(\n          this.chipCore,\n          `${SOUNDFONT_MOUNTPOINT}/${sf2Path}`,\n          new Uint8Array(result),\n          forceWrite,\n        );\n        this.midiPlayer?.updateSoundfontParamDefs();\n        this.midiPlayer?.setParameter(\"soundfont\", sf2Path, isTransient);\n        // TODO: emit \"paramDefsChanged\" from player.\n        // See https://reactjs.org/docs/integrating-with-other-libraries.html#integrating-with-model-layers\n        this.forceUpdate();\n      } else {\n        this.props.history.push(\"/drop\");\n        this.currUrl = null;\n        this.midi = result;\n        this.playSongBuffer(file.name, result);\n      }\n    };\n    reader.readAsArrayBuffer(file);\n  };\n\n  setLatencyCorrectionMs = (latencyCorrectionMs: number) => {\n    this.setState({ latencyCorrectionMs });\n    localStorage.setItem(\"latencyCorrectionMs\", latencyCorrectionMs.toString());\n  };\n\n  handlePlayerStateUpdate(playerState) {\n    const { isStopped } = playerState;\n    console.debug(\"Sequencer.handlePlayerStateUpdate(isStopped=%s)\", isStopped);\n\n    if (isStopped) {\n      this.currUrl = null;\n    } else {\n      this.handleSequencerStateUpdate({\n        url: this.currUrl,\n        isEjected: false,\n        ...playerState,\n      });\n    }\n  }\n\n  toggleShortcutHelp = () => {\n    this.setState((prevState) => ({\n      showShortcutHelp: !prevState.showShortcutHelp,\n    }));\n  };\n\n  playSong(url) {\n    if (url.startsWith(\"static/f\")) return;\n\n    if (url.startsWith(\"static\")) {\n      url = url.replace(\"static\", \"https://rawl.rocks/midi\");\n    } else {\n      // Normalize url - paths are assumed to live under CATALOG_PREFIX\n      url =\n        url.startsWith(\"http\") || url.startsWith(\"f:\")\n          ? url\n          : CATALOG_PREFIX + encodeURIComponent(encodeURIComponent(url));\n    }\n\n    // Find a player that can play this filetype\n    const ext =\n      url.includes(\"score.mid\") || url.startsWith(\"f:\")\n        ? \"mid\"\n        : url.split(\".\").pop().toLowerCase();\n\n    if (!this.midiPlayer.canPlay(ext)) {\n      this.handlePlayerError(`The file format \".${ext}\" was not recognized.`);\n      return;\n    }\n\n    if (url.startsWith(\"f:\")) {\n      const playFromFirestore = async () => {\n        const firestore = getFirestore();\n        const { blob, url: sourceUrl } = (\n          await getDoc(doc(firestore, \"midis\", url.slice(2)))\n        ).data() as FirestoreMidiDocument;\n\n        // Update the state with sourceUrl\n        this.setState((prevState) => ({\n          currentMidi: {\n            ...prevState.currentMidi,\n            sourceUrl: sourceUrl || null, // Use null if sourceUrl is undefined or empty\n          },\n        }));\n\n        const transformedMidi = transformMidi(\n          Uint8Array.from(blob.toUint8Array()),\n        );\n\n        this.playSongBuffer(url, transformedMidi);\n      };\n      playFromFirestore();\n    } else {\n      // Fetch the song file (cancelable request)\n      // Cancel any outstanding request so that playback doesn't happen out of order\n      if (this.songRequest) {\n        // @ts-ignore\n        this.songRequest.abort();\n      }\n      // TODO: rewrite on fetch()\n      this.songRequest = promisify(new XMLHttpRequest());\n      // @ts-ignore\n      this.songRequest.responseType = \"arraybuffer\";\n      // @ts-ignore\n      this.songRequest.open(\"GET\", url);\n      this.songRequest\n        // @ts-ignore\n        .send()\n        .then((xhr) => xhr.response)\n        .then((buffer) => {\n          this.currUrl = url;\n          const filepath = url.replace(CATALOG_PREFIX, \"\");\n          this.playSongBuffer(filepath, buffer);\n        })\n        .catch((e) => {\n          this.handlePlayerError(\n            e.message || `HTTP ${e.status} ${e.statusText} ${url}`,\n          );\n        });\n    }\n  }\n\n  async playSongBuffer(\n    filepath: string,\n    buffer: ArrayBuffer | Uint8Array,\n    shouldAutoPlay: boolean = true,\n  ) {\n    this.midiPlayer.suspend();\n\n    const inputArray =\n      buffer instanceof Uint8Array ? buffer : new Uint8Array(buffer);\n\n    const uint8Array = transformMidi(inputArray);\n\n    this.hash = md5(uint8Array);\n\n    this.midiPlayer.setTempo(1);\n\n    this.setState({\n      currentMidiBuffer: buffer instanceof ArrayBuffer ? buffer : buffer.buffer,\n      paused: !shouldAutoPlay,\n    });\n\n    try {\n      const parsingResult = await this.midiPlayer.loadData(\n        uint8Array,\n        filepath,\n        shouldAutoPlay,\n      );\n\n      this.setState({ parsing: parsingResult }, () => {\n        const numVoices = this.midiPlayer.getNumVoices();\n        const voiceMask = [...Array(numVoices)].fill(true);\n        this.midiPlayer.setVoiceMask(voiceMask);\n        this.setState({ voiceMask }, () => {\n          this.setupMidiPlayer();\n\n          if (!shouldAutoPlay) {\n            this.midiPlayer.pause();\n          }\n        });\n      });\n    } catch (e) {\n      this.handlePlayerError(`Unable to play ${filepath} (${e.message}).`);\n    }\n  }\n\n  registerKeyboardHandler = (id: string, handler: KeyboardHandler) => {\n    this.keyboardHandlers.set(id, handler);\n  };\n\n  unregisterKeyboardHandler = (id: string) => {\n    this.keyboardHandlers.delete(id);\n  };\n\n  resetMidiPlayerState = () => {\n    if (this.midiPlayer) {\n      this.midiPlayer.eject();\n    }\n    this.setState({\n      ejected: true,\n      currentSongNumVoices: 0,\n      currentSongPositionMs: 0,\n      currentSongDurationMs: 1,\n      songUrl: null,\n      rawlProps: null,\n      currentMidi: null,\n      parsing: null,\n    });\n  };\n\n  handleUnlockAudioContext = async () => {\n    if (this.audioContext) {\n      await this.audioContext.resume();\n      this.setState({\n        audioContextLocked: this.audioContext.state === \"suspended\",\n        audioContextState: this.audioContext.state,\n      });\n    }\n  };\n\n  // Add this method to update playback time\n  updatePlaybackTime = () => {\n    if (this.midiPlayer && this.midiPlayer.isPlaying()) {\n      const positionMs = this.midiPlayer.getPositionMs();\n      this.setState({ currentPlaybackTime: positionMs / 1000 });\n    }\n  };\n\n  componentDidMount() {\n    // Start the playback time update timer with a longer interval\n    this.playbackTimer = setInterval(this.updatePlaybackTime, 100); // Update every 100ms instead of 50ms\n  }\n\n  componentWillUnmount() {\n    // Clear the playback timer\n    if (this.playbackTimer) {\n      clearInterval(this.playbackTimer);\n    }\n  }\n\n  eject = () => {\n    if (this.midiPlayer) {\n      this.midiPlayer.eject();\n      this.handleSequencerStateUpdate({ isEjected: true });\n    }\n  };\n\n  componentDidUpdate(prevProps: RouteComponentProps) {\n    const prevPath = prevProps.location.pathname;\n    const currentPath = this.props.location.pathname;\n    const isStructuresRoute = currentPath.startsWith(\"/s/\");\n    const wasStructuresRoute = prevPath.startsWith(\"/s/\");\n\n    // Only eject if navigating into Structures from a non-Structures route\n    if (isStructuresRoute && !wasStructuresRoute) {\n      this.eject();\n      // Reset rawlProps to hide InlineRawl\n      this.setState({\n        rawlProps: null,\n        currentMidi: null,\n      });\n    }\n  }\n\n  render() {\n    const { location } = this.props;\n    const rawlProps: RawlProps = {\n      parsingResult: this.state.parsing,\n      getCurrentPositionMs: this.midiPlayer?.getPositionMs,\n      savedAnalysis: this.state.analyses[this.path] ?? null,\n      saveAnalysis: this.saveAnalysis,\n      voiceNames: this.state.voiceNames,\n      voiceMask: this.state.voiceMask,\n      setVoiceMask: this.handleSetVoiceMask,\n      showAnalysisBox: this.state.analysisEnabled,\n      seek: this.seekForRawl,\n      latencyCorrectionMs: this.state.latencyCorrectionMs * this.state.tempo,\n      sourceUrl: this.state.currentMidi?.sourceUrl || null,\n    };\n\n    const rawlRoute = (\n      <Route\n        path={[\"/f/:slug*\", \"/h/:keySlug*\", \"/c/:chiptuneUrl*\", \"/drop\"]}\n        render={({ match }) => {\n          const { keySlug } = match.params as {\n            slug?: string;\n            keySlug?: string;\n            chiptuneUrl?: string;\n          };\n          const { parsing } = this.state;\n          this.path = match.url.slice(1);\n          return (\n            <>\n              {parsing && (\n                <>\n                  <Rawl\n                    parsingResult={parsing}\n                    getCurrentPositionMs={this.midiPlayer?.getPositionMs}\n                    savedAnalysis={this.state.analyses[this.path] ?? null}\n                    saveAnalysis={this.saveAnalysis}\n                    showAnalysisBox={this.state.analysisEnabled}\n                    seek={this.seekForRawl}\n                    sourceUrl={this.state.currentMidi?.sourceUrl || null}\n                    isHiddenRoute={!!keySlug}\n                    {...rawlProps}\n                  />\n                  {match.path === \"/drop\" && (\n                    <DropSaveForm\n                      midi={this.midi}\n                      filename={this.droppedFilename}\n                    />\n                  )}\n                </>\n              )}\n            </>\n          );\n        }}\n      />\n    );\n\n    const isStructuresRoute = location.pathname.startsWith(\"/s/\");\n\n    if (isStructuresRoute) {\n      return (\n        <AppContext.Provider\n          value={{\n            handleSongClick: this.handleSongClick,\n            rawlProps: this.state.rawlProps,\n            setRawlProps: (rawlProps) => this.setState({ rawlProps }),\n            analyses: this.state.analyses,\n            saveAnalysis: this.saveAnalysis,\n            resetMidiPlayerState: this.resetMidiPlayerState,\n            registerKeyboardHandler: this.registerKeyboardHandler,\n            unregisterKeyboardHandler: this.unregisterKeyboardHandler,\n            currentMidi: this.state.currentMidi,\n            setCurrentMidi: (currentMidi) => this.setState({ currentMidi }),\n            user: this.state.user,\n            seek: this.seekForRawl,\n            currentPlaybackTime: this.state.currentPlaybackTime || null,\n            eject: this.eject,\n            currentMidiBuffer: this.state.currentMidiBuffer,\n            hoveredMeasuresSpan: this.state.hoveredMeasuresSpan,\n            setHoveredMeasuresSpan: (span) =>\n              this.setState({ hoveredMeasuresSpan: span }),\n            togglePause: this.togglePause,\n            handleLogin: this.handleLogin,\n            handleLogout: this.handleLogout,\n            handleToggleAnalysis: () => {\n              this.setState((prevState) => ({\n                analysisEnabled: !prevState.analysisEnabled,\n              }));\n            },\n            analysisEnabled: this.state.analysisEnabled,\n            playSongBuffer: this.playSongBuffer,\n            latencyCorrectionMs: this.state.latencyCorrectionMs,\n            tempo: this.state.tempo,\n          }}\n        >\n          <AppHeader />\n          <Switch>\n            <Route\n              path=\"/s/\"\n              exact\n              render={() => <Structures analyses={this.state.analyses} />}\n            />\n            <Route\n              path=\"/s/:chapter/:topic\"\n              render={() => (\n                <StructuresWithParams analyses={this.state.analyses} />\n              )}\n            />\n            <Route\n              path=\"/s/:chapter\"\n              render={() => (\n                <StructuresWithParams analyses={this.state.analyses} />\n              )}\n            />\n          </Switch>\n        </AppContext.Provider>\n      );\n    }\n\n    // The rest of your existing render method for other routes\n    return (\n      <AppContext.Provider\n        value={{\n          handleSongClick: this.handleSongClick,\n          rawlProps: this.state.rawlProps,\n          setRawlProps: (rawlProps) => this.setState({ rawlProps }),\n          analyses: this.state.analyses,\n          saveAnalysis: this.saveAnalysis,\n          resetMidiPlayerState: this.resetMidiPlayerState,\n          registerKeyboardHandler: this.registerKeyboardHandler,\n          unregisterKeyboardHandler: this.unregisterKeyboardHandler,\n          currentMidi: this.state.currentMidi,\n          setCurrentMidi: (currentMidi) => this.setState({ currentMidi }),\n          user: this.state.user,\n          seek: this.seekForRawl,\n          currentPlaybackTime: this.state.currentPlaybackTime || null,\n          eject: this.eject,\n          currentMidiBuffer: this.state.currentMidiBuffer,\n          hoveredMeasuresSpan: this.state.hoveredMeasuresSpan,\n          setHoveredMeasuresSpan: (span) =>\n            this.setState({ hoveredMeasuresSpan: span }),\n          togglePause: this.togglePause,\n          handleLogin: this.handleLogin,\n          handleLogout: this.handleLogout,\n          handleToggleAnalysis: () => {\n            this.setState((prevState) => ({\n              analysisEnabled: !prevState.analysisEnabled,\n            }));\n          },\n          analysisEnabled: this.state.analysisEnabled,\n          playSongBuffer: this.playSongBuffer,\n          latencyCorrectionMs: this.state.latencyCorrectionMs,\n          tempo: this.state.tempo,\n        }}\n      >\n        <Dropzone disableClick style={{}} onDrop={this.onDrop}>\n          {/* @ts-ignore */}\n          {(dropzoneProps) => (\n            <>\n              {this.state.audioContextLocked && this.state.parsing && (\n                <div className=\"audio-context-overlay\">\n                  <button\n                    className=\"unlock-audio-button\"\n                    onClick={this.handleUnlockAudioContext}\n                  >\n                    Play\n                  </button>\n                </div>\n              )}\n              <DropMessage dropzoneProps={dropzoneProps} />\n              <Alert\n                handlePlayerError={this.handlePlayerError}\n                playerError={this.state.playerError}\n                showPlayerError={this.state.showPlayerError}\n              />\n\n              <AppHeader />\n              <AppMainContent ref={this.contentAreaRef}>\n                <Switch>\n                  <Route path=\"/old\" render={() => <OldLandingPage />} />\n                  <Route\n                    path=\"/corpus/:corpus?\"\n                    render={({ match }) =>\n                      match.params.corpus ? (\n                        <Corpus slug={match.params.corpus} />\n                      ) : (\n                        <CorpusSearch />\n                      )\n                    }\n                  />\n                  <Route path=\"/daw\" render={() => <DAW />} />\n                  <Route path=\"/e/:slug?\" component={Editor} />\n                  <Route path=\"/ef/:id?\" component={Editor} />\n                  {rawlRoute}\n                  <Route path=\"/100/:slug?\" component={Book} />\n                  <Route path=\"/beyond/:slug?\" component={Book} />\n                  <Route path=\"/timeline\" component={Timeline} />\n                  <Route path=\"/forge\" component={ForgeUI} />\n                  <Redirect exact from=\"/\" to=\"/100\" />\n                </Switch>\n              </AppMainContent>\n              <AppFooter\n                currentSongDurationMs={this.state.currentSongDurationMs}\n                ejected={this.state.ejected}\n                paused={this.state.paused}\n                volume={this.state.volume}\n                handleTimeSliderChange={this.handleTimeSliderChange}\n                handleVolumeChange={this.handleVolumeChange}\n                togglePause={this.togglePause}\n                latencyCorrectionMs={this.state.latencyCorrectionMs}\n                setLatencyCorrectionMs={this.setLatencyCorrectionMs}\n                getCurrentPositionMs={this.midiPlayer?.getPositionMs}\n                tempo={this.state.tempo}\n                setTempo={this.handleTempoChange}\n              />\n\n              <Modal\n                isOpen={this.state.showShortcutHelp}\n                onRequestClose={this.toggleShortcutHelp}\n                contentLabel=\"Keyboard Shortcuts\"\n                style={{\n                  content: {\n                    background: \"black\",\n                    border: \"none\",\n                  },\n                  overlay: {\n                    backgroundColor: \"rgba(0, 0, 0, 0.75)\",\n                  },\n                }}\n              >\n                <ShortcutHelp />\n              </Modal>\n            </>\n          )}\n        </Dropzone>\n      </AppContext.Provider>\n    );\n  }\n}\n\n// New component to handle route params\nconst StructuresWithParams: React.FC<StructuresProps> = ({ analyses }) => {\n  const { chapter, topic } = useParams<{ chapter: string; topic?: string }>();\n\n  return (\n    <Structures\n      analyses={analyses}\n      initialChapter={decodeURIComponent(chapter)}\n      initialTopic={topic ? decodeURIComponent(topic) : undefined}\n    />\n  );\n};\n\nexport default withRouter(App);\n"],"sourceRoot":""}